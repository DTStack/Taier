<!doctype html>
<html class="docs-version-current" lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.14">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-09MSEFN7VC"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-09MSEFN7VC",{anonymize_ip:!0})</script><title data-react-helmet="true">数据同步 | Taier</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://dtstack.github.io/Taier/docs/functions/task/sync"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="数据同步 | Taier"><meta data-react-helmet="true" name="description" content="数据同步 任务提供两种模式进行选择"><meta data-react-helmet="true" property="og:description" content="数据同步 任务提供两种模式进行选择"><link data-react-helmet="true" rel="icon" href="/Taier/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://dtstack.github.io/Taier/docs/functions/task/sync"><link data-react-helmet="true" rel="alternate" href="https://dtstack.github.io/Taier/docs/functions/task/sync" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://dtstack.github.io/Taier/docs/functions/task/sync" hreflang="x-default"><link rel="stylesheet" href="/Taier/assets/css/styles.987aab73.css">
<link rel="preload" href="/Taier/assets/js/runtime~main.a5a12275.js" as="script">
<link rel="preload" href="/Taier/assets/js/main.6540c745.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_OuoZ">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Taier/"><div class="navbar__logo"><img src="/Taier/img/logo.svg" alt="Taier Logo" class="themedImage_TMUO themedImage--light_4Vu1"><img src="/Taier/img/logo.svg" alt="Taier Logo" class="themedImage_TMUO themedImage--dark_uzRr"></div><b class="navbar__title">Taier</b></a><a class="navbar__item navbar__link navbar__link--active" href="/Taier/docs/guides/introduction">Docs</a><a href="https://github.com/DTStack/Taier/releases" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>Download<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><a class="navbar__item navbar__link" href="/Taier/docs/faq">FAQ</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/DTStack/Taier" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="toggle_iYfV toggle_2i4l toggleDisabled_xj38"><div class="toggleTrack_t-f2" role="button" tabindex="-1"><div class="toggleTrackCheck_mk7D"><span class="toggleIcon_pHJ9">🌜</span></div><div class="toggleTrackX_dm8H"><span class="toggleIcon_pHJ9">🌞</span></div><div class="toggleTrackThumb_W6To"></div></div><input type="checkbox" class="toggleScreenReader_h9qa" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper docs-wrapper docs-doc-page"><div class="docPage_lDyR"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_i9tI" type="button"></button><aside class="docSidebarContainer_0YBq"><div class="sidebar_a3j0"><nav class="menu thin-scrollbar menu_cyFh"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/Taier/docs/guides/introduction">关于 Taier</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/Taier/docs/quickstart/rely">快速开始</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/quickstart/rely">部署依赖</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/Taier/docs/quickstart/deploy/deployment-quick">快速部署</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/quickstart/deploy/deployment-quick">单机部署</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/quickstart/deploy/docker">Docker 部署</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/quickstart/deploy/cluster-deploy">集群部署</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/quickstart/build">源码编译</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/quickstart/start">快速上手</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/quickstart/precautions">常见问题</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" href="/Taier/docs/functions/multi-cluster">功能介绍</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/multi-cluster">集群配置</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" tabindex="0" href="/Taier/docs/functions/component/sftp">组件配置</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/datasource">数据源</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active hasHref_TwRn" tabindex="0" href="/Taier/docs/functions/task/sync">任务类型</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Taier/docs/functions/task/sync">数据同步</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/data-acquisition">实时采集</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/python">Python</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/shell">Shell</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/workflow">工作流</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/virtual">虚节点</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/flink">Flink Jar</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/flink-sql">Flink SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/spark-sql">Spark SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/hive-sql">Hive SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/oceanbase-sql">OceanBase SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/doris-sql">Doris SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/clickhouse-sql">ClickHouse SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/tidb-sql">TiDB SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/gaussdb-sql">GaussDB SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/mysql-sql">MySQL SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/vertica-sql">Vertica SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/greenplum-sql">Greenplum SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/postgre-sql">Postgre SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/sqlserver-sql">SqlServer SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/maxcompute-sql">MaxCompute SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task/hadoop-mr">Hadoop MR</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/maintenance">运维中心</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/depend">依赖配置</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/task-param">任务参数</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Taier/docs/functions/environmental-parameters">环境参数</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist hasHref_TwRn" href="/Taier/docs/expand/task">自定义扩展开发</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Taier/docs/contributing">贡献指南</a></li></ul></nav></div></aside><main class="docMainContainer_r8cw"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_zHA2"><div class="docItemContainer_oiyr"><article><div class="tocCollapsible_aw-L theme-doc-toc-mobile tocMobile_Tx6Y"><button type="button" class="clean-btn tocCollapsibleButton_zr6a">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>数据同步</h1></header><p>数据同步 任务提供两种模式进行选择</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="向导模式">向导模式<a class="hash-link" href="#向导模式" title="Direct link to heading">​</a></h2><blockquote><p>向导模式的特点是便捷、简单，可视化字段映射，快速完成同步任务配置，无需关心chunjun的json格式，但需要针对每种数据源进行适配开发  </p></blockquote><h3 class="anchor anchorWithStickyNavbar_y2LR" id="新建任务">新建任务<a class="hash-link" href="#新建任务" title="Direct link to heading">​</a></h3><p>进入&quot;开发目录&quot;菜单，点击&quot;新建任务&quot;按钮，并填写新建任务弹出框中的配置项，配置项说明：</p><ol><li>任务名称：需输入英文字母、数字、下划线组成，不超过64个字符</li><li>任务类型：选择数据同步</li><li>存储位置：在页面左侧的任务存储结构中的位置</li><li>描述：长度不超过200个的任意字符
点击&quot;保存&quot;，弹窗关闭，即完成了新建任务</li></ol><p><strong>同步模式</strong><br>
<!-- -->标识本任务是否采用增量模式，无增量标识：可通过简单的过滤语句实现增量同步；有增量标识：系统根据源表中的增量标识字段值，记录每次同步的点位，执行时可从上次点位继续同步</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="任务配置">任务配置<a class="hash-link" href="#任务配置" title="Direct link to heading">​</a></h3><p>数据同步任务的配置共分为5个步骤：</p><ol><li>选择数据来源：选择已配置的数据源，系统会读取其中的数据</li><li>选择数据目标：选择已配置的数据源，系统会向其写入数据</li><li>字段映射：配置数据来源与数据目标之间的字段映射关系，不同的数据类型在这步有不同的配置方法</li><li>通道控制：控制数据同步的执行速度、错误数据的处理方式等</li><li>预览保存：再次确认已配置的规则并保存</li></ol><p><img alt="add-source" src="/Taier/assets/images/sync-df9409e059ed947086f3fe06dc04c67a.png"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="数据源目标配置">数据源/目标配置<a class="hash-link" href="#数据源目标配置" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="关系型与mpp型数据库">关系型与MPP型数据库<a class="hash-link" href="#关系型与mpp型数据库" title="Direct link to heading">​</a></h3><p>关系型数据库与MPP数据库涵盖以下数据源：
MySQL、Oracle、PostgreSQL</p><p><strong>Reader</strong>
关系型数据库或MPP型数据库作为数据源，需配置以下信息：</p><ul><li><strong>数据源</strong></li><li><strong>表</strong></li><li><strong>数据过滤</strong>：针对源头数据筛选条件，根据指定的column、table、where条件拼接SQL进行数据抽取，暂时不支持limit关键字过滤。利用where条件可进行增量同步，具体说明如下：
增量导入在实际业务场景中，往往会选择当天的数据进行同步，通常需要编写where条件语句，需先确认表中描述增量字段（时间戳）为哪一个。如<code>tableA</code>增量的字段为 <code>create_time</code> ，则填写 <code>create_time&gt;需要的日期</code> ，如果需要日期动态变化，可以填写 <code>${bdp.system.bizdate}</code> 、<code>${bdp.system.cyctime}</code>
等调度参数，关于调度参数的详细信息请参考 <!-- -->[参数配置]<!-- -->。</li><li><strong>切分键</strong>：离线开发在进行数据抽取时，如果指定切分键，系统可以使用切分键的字段进行数据分片，数据同步因此会启动并发任务进行数据同步，这样可以大大提供数据同步的效能。<ul><li>推荐将表的主键作为切分键，因为表主键通常情况下比较均匀，因此切分出来的分片也不容易出现数据热点。</li><li>目前离线开发目前支持MySQL、Oracle、SQLServer、PostgreSQL、DB2、GBase 8a、达梦、PolarDB for MySQL8、Phoenix、Greenplum，<strong>仅支持数值型字段作为切分键，不支持字符串、浮点、日期等其他类型</strong>。如果指定了不支持的类型，则忽略切分键功能，使用单通道进行同步</li><li>如果在第四步的「作业并发数」大于1但是没有配置切分键，任务将置为失败</li><li>如果不填写切分键，数据同步视作使用单通道同步该表数据</li><li>切分键的配置需要与第四步的 <code>通道控制</code> 联合使用，下面是典型的应用场景： 假设MySQL的 <code>tableA</code> 表中，有一个INT类型的字段名为 <code>id</code> 的主键，那么可以在切分键输入框中输入<code>id</code>字段，并在第四步的&quot;<code>作业并发数</code>&quot;中配置为5，则系统会产生5个并发线程同时读取MySQL表，每个任务会根据<code>id</code>字段的值进行数据切分，保证5个并发线程读取的数据是不同的，通过以上机制即可以加速数据读取的速度。</li></ul></li><li><strong>高级配置</strong>：特定场景下，无法满足需求时，支持以JSON的形式传入其他参数，例如fetchSize等。</li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>关系型数据库设置作业速率上限和切分键才能根据作业速率上限将表进行切分，只支持数值型作为切分键</p></div></div><p><strong>Oracle读取/写入其他Schema下的表</strong></p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>Oracle通过用户名来标识Schema，如果需要同步其他Schema下的数据，则不能在下拉列表中选择表，而是直接输入schemaName.tableName，可读取/写入其他Schema的数据</p></div></div><p><strong>Writer</strong>
关系型数据库作为数据目标，需配置以下信息：</p><ul><li>数据同步目标库；</li><li>目标表；</li><li>导入前、导入后准备语句：执行数据同步任务之前率先执行的SQL语句。目前向导模式只允许执行一条SQL语句，例如：<code>truncate table</code> 。</li><li>主键冲突的处理：<ul><li>insert into：当主键/唯一性索引冲突时会写不进去冲突的行，以脏数据的形式体现，脏数据的配置与管理请参考 <!-- -->[脏数据管理]<!-- -->；</li><li>replace into：没有遇到主键/唯一性索引冲突时，与insert into行为一致，冲突时，先delete再insert，未映射的字段会被映射为NULL；</li><li>on duplicate key update：当主键/约束冲突，update数据，未映射的字段值不变；</li></ul></li></ul><p><strong>字段映射</strong>
请参考<!-- -->[字段映射的通用功能]</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="mysql分库分表">MySQL分库分表<a class="hash-link" href="#mysql分库分表" title="Direct link to heading">​</a></h3><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>目前分库分表模式仅支持MySQL数据源，其他数据源暂不支持 mysql分库分表实际是把表结构完全相同的多张表同步到一张目标表里。所以在数据预览的时候只默认显示第一张表的数据样例。所有数据同步任务都实际只支持单张表的同步（MySQL分库分表是特殊），不存在多张表同步到多张表的同步功能。</p></div></div><p>同一个同步任务，可以同时并发（或串行）读取多个库、多个表，适用于业务库采用了分库分表的情况下，配置方式比较简单，仅需在同一个同步任务中添加多个库、多个表即可。
在页面上勾选「<strong>批量选择</strong>」，还可以支持按表名搜索、批量选中等操作，便于对大量表配置数据同步。
分库分表的一些限制条件：</p><ul><li>选中的库、表，表结构需要保持一致（字段名、字段类型），系统不会进行检查，<strong>表结构的一致性由用户保证</strong>；</li><li>若MySQL采用分库模式，则不同的数据库需配置不同的数据源，需要在「<strong>数据源</strong>」模块单独配置；</li><li>若配置了并发度，则每个并发会分别读取一张表的数据；</li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>仅支持MySQL分库分表数据的读取，不支持写入</p></div></div><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>Batcworks仅支持关系型数据库的普通数据类型，暂时不支持blob、clob、地理空间等特殊类型的数据读/写</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="大数据存储型">大数据存储型<a class="hash-link" href="#大数据存储型" title="Direct link to heading">​</a></h3><h3 class="anchor anchorWithStickyNavbar_y2LR" id="hive1x--hive-2x">Hive1.x / Hive 2.x<a class="hash-link" href="#hive1x--hive-2x" title="Direct link to heading">​</a></h3><ul><li>Hive1.x与Hive2.x的配置是基本相同的，详情请参考 <!-- -->[Hive1.x与Hive2.x的区别]</li><li>Hive1.x与Hive2.x仅支持Textfile、ORC、Parquet 这3种数据格式，同步的原理请参考 <!-- -->[FlinkX读写Hive表的原理]</li></ul><p><strong>Reader</strong></p><ul><li><strong>分区</strong>：当Hive表作为数据源时，可读取某个分区下的数据：<ul><li>分区填写栏支持填写参数，支持的参数请参考 <!-- -->[参数配置]</li><li>非分区表，不用填写；</li><li>一级分区表，不填写分区，则会读取所有分区数据；填写了分区名（例如 <code>pt = &#x27;20200503&#x27;</code> ），则只读取指定分区的数据；</li><li>多级分区表，可以填写多级分区形式（例如 <code>ptd=&#x27;20200503&#x27; /pdh=&#x27;120000&#x27;</code>），多级分区表，如果只填写一级分区信息（例如 <code>ptd=&#x27;20200503&#x27;</code>），则会将下属的所有二级分区数据全部读取；</li></ul></li></ul><p><strong>Writer</strong></p><ul><li><strong>分区</strong>：当Hive表作为写入目标时，可将数据写入某个分区：<ul><li>分区填写栏支持填写参数，支持的参数请参考 <!-- -->[参数配置]</li><li>动态分区机制：当写入的分区名不存在时，系统按用户指定的分区名自动创建</li><li>对于非分区表，无需填写；</li><li>一级分区表，必须填写（例如 <code>pt = &#x27;20200503&#x27;</code> ）</li><li>多级分区表，必须填写至最末一级分区（例如 <code>ptd=&#x27;20200503&#x27; /pdh=&#x27;120000&#x27;</code>）</li></ul></li><li><strong>写入模式</strong>：<ul><li>insert overwrite：写入前将清理已存在的数据文件，之后执行写入（默认值）；</li><li>insert into：写入前已有的数据不会删除，系统会写入的新的文件；</li></ul></li></ul><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>不支持路由写入，对于分区表请务必保证写入数据到最末一级分区（HDFS上一个确定的目录）</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="字段映射">字段映射<a class="hash-link" href="#字段映射" title="Direct link to heading">​</a></h2><p>在支持向导模式配置的数据源中，均需要配置字段映射，标识源表与目标表之间每个字段的映射关系。离线开发仅支持「基本功能」中的format转换，不支持其他类型的数据转换功能，不建议在数据传输过程中进行过多的转换，而是在落盘后再转换</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="基本功能">基本功能<a class="hash-link" href="#基本功能" title="Direct link to heading">​</a></h3><p>离线开发所支持的任意数据源、目标之间，字段映射模块支持以下基本功能：</p><ul><li>支持选择部分字段进行读取/写入。</li><li>format处理：数据源为字符串类型的字段，若存储了日期数据，且映射到目标库的date或time等时间类型，支持指定format格式，例如 <code>&quot;yyyy-MM-dd hh:mm:ss</code>，若不配置此转换规则，则此数据可能被认为是脏数据。format处理支持Java格式化时间的标准格式，可参考 <!-- -->[SimpleDateFormat]<!-- -->。</li><li>支持在数据源一侧添加常量/系统变量作为虚拟字段值，请参考<!-- -->[虚拟字段]<!-- -->。</li></ul><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>在配置字段映射时，建议检查源表、目标表之间的字段类型映射关系，<strong>建议将目标表的字段类型统一设置为string，并在下游数据加工任务中进行类型转换，提高数据同步环节的可靠性</strong>，尤其是写入Hive表</p></div></div><h3 class="anchor anchorWithStickyNavbar_y2LR" id="连线映射">连线映射<a class="hash-link" href="#连线映射" title="Direct link to heading">​</a></h3><p>在源表和目标表的字段之间连线，标识对应的2个字段的映射关系，离线开发目前仅支持一一映射，不支持一对多，或多对一映射。虽然可以手动连线，但建议用户采用同名映射或同行映射，便于快速配置。</p><p><strong>同名与同行映射</strong></p><p>按照字段名，或者左右两侧的字段序号进行映射匹配，再次点击可取消映射关系。</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="虚拟字段">虚拟字段<a class="hash-link" href="#虚拟字段" title="Direct link to heading">​</a></h3><p>支持在数据源端增加虚拟字段，作为附加信息写入到目标端</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>虚拟字段必须被映射至结果表，否则不会生效</p></div></div><p><strong>常量字段</strong></p><p>当需要添加某个常量信息至结果表时，可使用虚拟字段的常量字段功能，点击「添加常量」按钮，在弹窗中的「常量值」文本框中输入，例如 <code>shanghai</code>（注意无需输入引号），则此字符串常量将会被写入目标端的指定字段</p><p><strong>变量字段</strong></p><p>这里的变量字段指的是系统的调度参数，点击「添加常量」按钮，在「常量值」文本框中输入系统变量（变量名称需单独填写），例如<code>${bdp.system.bizdate}</code>，则系统将根据周期调度中系统变量的取值作为此字段的值。对于变量字段，同样可以将此字段的内容进行format处理，format处理请参考本页的<!-- -->[基本功能]<!-- -->。</p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="通道控制">通道控制<a class="hash-link" href="#通道控制" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="同步速率与作业并发">同步速率与作业并发<a class="hash-link" href="#同步速率与作业并发" title="Direct link to heading">​</a></h3><ul><li><strong>作业速率上限</strong></li></ul><p>设置作业速率上限，则数据同步作业的总速率将尽可能按照这个上限进行同步，此参数需根据实际数据库情况调整，默认为不限制，页面可选择1-20MB/s，也可以直接填写希望的数值。当数据量较大，且硬件配置较好时，可以提高作业速率上限，离线开发将会提高同步速度，使用较短的时间完成同步。</p><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>流量度量值是数据集成本身的度量值，不代表实际网卡流量，实际流量膨胀看具体的数据存储系统传输序列化情况</p></div></div><ul><li><strong>作业并发数</strong></li></ul><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>仅关系型或MPP类数据库才支持作业并发数，具体支持的数据库类型请参考<!-- -->[关系型与MPP型数据库]</p></div></div><p>作业并发数需要与「数据源」配置中的「切分键」联合发挥作用，系统将一张表的数据切分多个通道并发读取，提高同步速度，如果作业并发数大于1但是没有配置切分键，任务将置为失败。</p><p><strong>作业速率上限=作业并发数<!-- -->*<!-- -->单作业的传输速率</strong>，当作业速率上限已定，选择的并发数越高则单并发的速率越低，同时所占用的内存会越高，这可以根据业务需求选择设定的值。</p><ul><li><strong>断点续传</strong></li></ul><p>断点续传的基本原理请参考 <!-- -->[断点续传]<!-- -->，对标识字段的要求如下：</p><ul><li>数据源（这里特指关系数据库）中必须包含一个升序的字段，比如主键或者日期类型的字段，同步过程中会记录同步的点位，任务在中途发生异常失败，在恢复运行时使用这个字段构造查询条件过滤已经同步过的数据，如果这个字段的值不是升序的，那么任务恢复时过滤的数据就是错误的，最终导致数据的缺失或重复；</li><li>用户需保证此字段的值是数据升序的；</li></ul><h2 class="anchor anchorWithStickyNavbar_y2LR" id="脚本模式">脚本模式<a class="hash-link" href="#脚本模式" title="Direct link to heading">​</a></h2><blockquote><p>脚本模式的特点是全能、高效，可深度调优，支持全部数据源，完全兼容chunjun的json格式.  </p></blockquote><h3 class="anchor anchorWithStickyNavbar_y2LR" id="脚本配置">脚本配置<a class="hash-link" href="#脚本配置" title="Direct link to heading">​</a></h3><table><thead><tr><th>数据库</th><th>源（读取）</th><th>目标（写入）</th></tr></thead><tbody><tr><td>MySQL</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/mysql/mysql-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/mysql/mysql-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>TiDB</td><td>参考MySQL</td><td>参考MySQL</td></tr><tr><td>Oracle</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/oracle/oracle-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/oracle/oracle-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>SqlServer</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/sqlserver/sqlserver-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/sqlserver/sqlserver-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>PostgreSQL</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/postgres/postgres-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/postgres/postgres-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>DB2</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/db2/db2-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/db2/db2-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>ClickHouse</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/clickhouse/clickhouse-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/clickhouse/clickhouse-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>Greenplum</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/greenplum/greenplum-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/greenplum/greenplum-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>KingBase</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/kingbase/kingbase-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/kingbase/kingbase-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>MongoDB</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/mongodb/mongodb-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/mongodb/mongodb-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>SAP HANA</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/saphana/saphana-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/saphana/saphana-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>ElasticSearch7</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/elasticsearch7/es7-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/elasticsearch7/es7-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>FTP</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/ftp/ftp-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/ftp/ftp-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>HDFS</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/hdfs/hdfs-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/hdfs/hdfs-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>Stream</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/stream/stream-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/stream/stream-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>Redis</td><td>不支持</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/redis/redis-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>Hive</td><td>参考HDFS</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/hive/hive-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>Solr</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/solr/solr-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/solr/solr-sink.md" target="_blank" rel="noopener noreferrer">doc</a></td></tr><tr><td>File</td><td><a href="https://github.com/DTStack/flinkx/blob/master/docs/connectors/file/file-source.md" target="_blank" rel="noopener noreferrer">doc</a></td><td>不支持</td></tr></tbody></table><h3 class="anchor anchorWithStickyNavbar_y2LR" id="同步任务参数">同步任务参数<a class="hash-link" href="#同步任务参数" title="Direct link to heading">​</a></h3><p>在同步任务的「环境参数」中，运行方式（<code>flinkTaskRunMode</code>）参数较为重要，任务运行方式有2种：</p><ul><li>per_job：单独为任务创建flink yarn session，任务运行的资源有保障，提高任务运行稳定性</li><li>new：多个任务共用一个flink yarn session，默认new，适合小数据量同步，节约集群资源</li></ul><p>设置方式，在任务的「环境参数」中，修改/添加此参数
<code>## flinkTaskRunMode=new</code>，其中 ##标识为注释状态，用户需要取消注释才能生效</p><h3 class="anchor anchorWithStickyNavbar_y2LR" id="任务配置-1">任务配置<a class="hash-link" href="#任务配置-1" title="Direct link to heading">​</a></h3><p><img alt="add-source" src="/Taier/assets/images/sync-json-81535811e4188ca258824d17d2066622.png"></p><h2 class="anchor anchorWithStickyNavbar_y2LR" id="环境参数">环境参数<a class="hash-link" href="#环境参数" title="Direct link to heading">​</a></h2><div class="codeBlockContainer_J+bg language-properties theme-code-block"><div class="codeBlockContent_csEI properties"><pre tabindex="0" class="prism-code language-properties codeBlock_rtdJ thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_1zSZ"><span class="token-line" style="color:#393A34"><span class="token plain">## 任务运行方式：</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## per_job:单独为任务创建flink yarn session，适用于低频率，大数据量同步</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## session：多个任务共用一个flink yarn session，适用于高频率、小数据量同步，默认per_job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## flinkTaskRunMode=per_job</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## per_job模式下jobManager配置的内存大小，默认1024（单位M)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## jobmanager.memory.mb=1024</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## per_job模式下taskManager配置的内存大小，默认1024（单位M）</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## taskmanager.memory.mb=1024</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## per_job模式下每个taskManager 对应 slot的数量</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## slots=1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## checkpoint保存时间间隔</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## flink.checkpoint.interval=300000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## 任务优先级, 范围:1-1000</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">## job.priority=10</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_M3SB clean-btn">Copy</button></div></div><div class="admonition admonition-tip alert alert--success"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</h5></div><div class="admonition-content"><p>右侧任务参数有数据同步的默认参数信息 可以手动调整数据同步的运行模式以及slot数量等参数<br>
<!-- -->数据同步同步任务默认为session模式</p></div></div><h2 class="anchor anchorWithStickyNavbar_y2LR" id="向导模式支持的数据源">向导模式支持的数据源<a class="hash-link" href="#向导模式支持的数据源" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_y2LR" id="数据源">数据源<a class="hash-link" href="#数据源" title="Direct link to heading">​</a></h3><ul><li>MySQL</li><li>ORACLE</li><li>POSTGRESQL</li><li>HIVE</li><li>SPARK THRIFT</li></ul><h3 class="anchor anchorWithStickyNavbar_y2LR" id="写入源">写入源<a class="hash-link" href="#写入源" title="Direct link to heading">​</a></h3><ul><li>MySQL</li><li>ORACLE</li><li>POSTGRESQL</li><li>HIVE</li><li>SPARK THRIFT</li></ul><div class="admonition admonition-caution alert alert--warning"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</h5></div><div class="admonition-content"><p>数据同步 依赖控制台 Flink组件 运行数据同步前请确保对应组件配置正确</p></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/functions/task/sync.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_mS5F" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_mt2f"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Taier/docs/functions/datasource"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">数据源</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/Taier/docs/functions/task/data-acquisition"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">实时采集</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_vrFS thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#向导模式" class="table-of-contents__link toc-highlight">向导模式</a><ul><li><a href="#新建任务" class="table-of-contents__link toc-highlight">新建任务</a></li><li><a href="#任务配置" class="table-of-contents__link toc-highlight">任务配置</a></li></ul></li><li><a href="#数据源目标配置" class="table-of-contents__link toc-highlight">数据源/目标配置</a><ul><li><a href="#关系型与mpp型数据库" class="table-of-contents__link toc-highlight">关系型与MPP型数据库</a></li><li><a href="#mysql分库分表" class="table-of-contents__link toc-highlight">MySQL分库分表</a></li><li><a href="#大数据存储型" class="table-of-contents__link toc-highlight">大数据存储型</a></li><li><a href="#hive1x--hive-2x" class="table-of-contents__link toc-highlight">Hive1.x / Hive 2.x</a></li></ul></li><li><a href="#字段映射" class="table-of-contents__link toc-highlight">字段映射</a><ul><li><a href="#基本功能" class="table-of-contents__link toc-highlight">基本功能</a></li><li><a href="#连线映射" class="table-of-contents__link toc-highlight">连线映射</a></li><li><a href="#虚拟字段" class="table-of-contents__link toc-highlight">虚拟字段</a></li></ul></li><li><a href="#通道控制" class="table-of-contents__link toc-highlight">通道控制</a><ul><li><a href="#同步速率与作业并发" class="table-of-contents__link toc-highlight">同步速率与作业并发</a></li></ul></li><li><a href="#脚本模式" class="table-of-contents__link toc-highlight">脚本模式</a><ul><li><a href="#脚本配置" class="table-of-contents__link toc-highlight">脚本配置</a></li><li><a href="#同步任务参数" class="table-of-contents__link toc-highlight">同步任务参数</a></li><li><a href="#任务配置-1" class="table-of-contents__link toc-highlight">任务配置</a></li></ul></li><li><a href="#环境参数" class="table-of-contents__link toc-highlight">环境参数</a></li><li><a href="#向导模式支持的数据源" class="table-of-contents__link toc-highlight">向导模式支持的数据源</a><ul><li><a href="#数据源" class="table-of-contents__link toc-highlight">数据源</a></li><li><a href="#写入源" class="table-of-contents__link toc-highlight">写入源</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Taier/docs/guides/introduction">Introduction</a></li><li class="footer__item"><a class="footer__link-item" href="/Taier/docs/quickstart/start">Quick Start</a></li><li class="footer__item"><a class="footer__link-item" href="/Taier/docs/contributing">Contributing</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/DTStack/Taier" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_wgqa"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 DTStack, Inc.</div></div></div></footer></div>
<script src="/Taier/assets/js/runtime~main.a5a12275.js"></script>
<script src="/Taier/assets/js/main.6540c745.js"></script>
</body>
</html>