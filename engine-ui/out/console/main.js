!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.DTConsoleApp=t():e.DTConsoleApp=t()}(window,(function(){return(window["webpackJsonp_console-ui"]=window["webpackJsonp_console-ui"]||[]).push([[3],{"+5i3":function(e,t,n){},"+CR5":function(e,t,n){"use strict";n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("27RR"),n("HRxU"),n("eoL8"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("o0o1"));n("2B1R"),n("yq1k"),n("JTJg"),n("rB9j"),n("EnZy"),n("zKZe"),n("QWBl"),n("FZtP"),n("sMBO"),n("+2oP"),n("T63A"),n("qePV"),n("ma9I");var l=a(n("N9UN")),u=a(n("4IMT")),i=a(n("d1El")),c=a(n("Pbn2")),s=a(n("g4D/")),d=a(n("B8+X")),f=a(n("pVnL")),p=a(n("qPIi")),m=a(n("Y/VR")),E=a(n("QpBz")),v=a(n("lSNA")),T=a(n("yXPU")),y=a(n("J4zp")),O=a(n("iJl9")),h=a(n("FAat")),N=a(n("qu0K")),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=R(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),C=n("LvDl"),P=n("lxQk"),S=a(n("RHHV")),b=n("RzPm"),A=n("OHU0");function R(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(R=function(e){return e?n:t})(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){(0,v.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L=N.default.Item,D=h.default.Option,M=O.default.TextArea,k={wrapperCol:{xs:{span:24},sm:{span:9}}},j=N.default.create({onValuesChange:function(e,t){t.hasOwnProperty("alertGateType")&&e.form.setFieldsValue({alertGateCode:void 0,alertGateJson:void 0})},mapPropsToFields:function(e){var t,n=null===(t=e.location.state)||void 0===t?void 0:t.ruleData;if(n){for(var a={},r=(0,C.cloneDeep)(n),o=0,l=Object.entries(r);o<l.length;o++){var u=(0,y.default)(l[o],2),i=u[0],c=u[1];a=Object.assign({},a,(0,v.default)({},i,N.default.createFormField({value:c})))}return a}}})((function(e){var t,n,a,r,C,R=(0,g.useState)([]),_=(0,y.default)(R,2),j=_[0],w=_[1],F=e.form,U=F.getFieldDecorator,V=F.getFieldValue,x=F.validateFields,B=F.setFieldsValue,Y=null===(t=e.location.state)||void 0===t?void 0:t.id,K=null===(n=e.location.state)||void 0===n?void 0:n.ruleData,G=V("alertGateType")===b.ALARM_TYPE.EMAIL,H=function(){x(function(){var e=(0,T.default)(o.default.mark((function e(t,n){var a,r,l,u,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=7;break}return u=(0,A.textAlertKey)(n.alertGateType),i=n.alertGateType!==b.ALARM_TYPE.CUSTOM?n[u].split(","):"",e.next=5,S.default.testAlert(Object.assign({},n,(0,v.default)({id:Y||"",filePath:(null==K?void 0:K.filePath)||"",isDefault:n.isDefault?1:0,file:null!==(a=null!==(r=null==n||null===(l=n.file)||void 0===l?void 0:l.file)&&void 0!==r?r:null==n?void 0:n.file)&&void 0!==a?a:""},u,i)));case 5:1===e.sent.code&&E.default.success("消息已发送");case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},q=function(){e.router.push("/console-ui/alarmChannel")},W=function(e,t,n){var a=e.name;!a||/\.(jar)$/.test(a.toLocaleLowerCase())?n&&n():E.default.warning(t)},Q={name:"file",accept:".jar",beforeUpload:function(e){return W(e,"jar文件只能是.jar文件",(function(){var t=[e];t=t.slice(-1),w(t)})),!1},onRemove:function(){w([]),B({file:void 0})},fileList:j},J={name:"configFile",accept:".jar",beforeUpload:function(e){return W(e,"配置文件只能是.jar文件",(function(){B((0,v.default)({},"file",e))})),!1},fileList:[]},z=G?"邮箱":"手机号码",Z=(0,A.textAlertKey)(V("alertGateType")),X=P.Utils.getParameterByName("isCreate"),$=V("alertGateType"),ee=V("alertGateCode");return g.default.createElement("div",{className:"alarm-rule__wrapper"},g.default.createElement(m.default,null,g.default.createElement(m.default.Item,null," ",g.default.createElement("a",{onClick:function(){e.router.push("/console-ui/alarmChannel")}},"告警通道")),g.default.createElement(m.default.Item,null,"".concat(X?"新增告警通道":"".concat(null==K?void 0:K.alertGateName)))),g.default.createElement(l.default,{bordered:!1},g.default.createElement(N.default,null,g.default.createElement(L,(0,f.default)({},I(I({},b.formItemCenterLayout),k),{label:"通道类型"}),U("alertGateType",{rules:[{required:!0,message:"请选择通道类型"}],initialValue:b.ALARM_TYPE.MSG})(g.default.createElement(p.default.Group,{name:"channelMode",onChange:function(){V("file")&&B((0,v.default)({},"file","")),w([])},disabled:!X},Object.entries(b.ALARM_TYPE_TEXT).map((function(e){var t=(0,y.default)(e,2),n=t[0],a=t[1];return g.default.createElement(p.default,{key:n,value:Number(n)},a)}))))),(0,A.showAlertGateCode)($)&&g.default.createElement(L,(0,f.default)({},b.formItemCenterLayout,{label:"通道模式"}),U("alertGateCode",{rules:[{required:!0,message:"请选择通道模式"}]})(g.default.createElement(h.default,null,function(){switch(V("alertGateType")){case b.ALARM_TYPE.MSG:return b.CHANNEL_MODE.sms.map((function(e,t){return g.default.createElement(D,{value:e.value,key:"".concat(t)},e.title)}));case b.ALARM_TYPE.EMAIL:return b.CHANNEL_MODE.mail.map((function(e,t){return g.default.createElement(D,{value:e.value,key:"".concat(t)},e.title)}));case b.ALARM_TYPE.DING:return b.CHANNEL_MODE.dingTalk.map((function(e,t){return g.default.createElement(D,{value:e.value,key:"".concat(t)},e.title)}));default:return[]}}()))),(null==ee?void 0:ee.includes("jar"))&&!(0,A.showConfigFile)($)?g.default.createElement(L,(0,f.default)({},b.formItemCenterLayout,{label:"上传文件"}),U("file",{rules:[{required:!1}]})(g.default.createElement(d.default,Q,g.default.createElement("a",{href:"javascript:;"},"选择jar文件"))),(null==K?void 0:K.filePath)&&!V("file")&&g.default.createElement("span",null,null==K?void 0:K.filePath)):null,g.default.createElement(L,(0,f.default)({},b.formItemCenterLayout,{label:"通道标识"}),U("alertGateSource",{rules:[{required:!0,message:"请输入通道标识"},{max:32,message:"通道标识不超过32个字符"},{pattern:/^[A-Za-z0-9_]+$/,message:"只支持英文、数字、下划线"}]})(g.default.createElement(O.default,{disabled:!!Y}))),g.default.createElement(L,(0,f.default)({},b.formItemCenterLayout,{label:"通道名称"}),U("alertGateName",{rules:[{required:!0,message:"请输入通道名称"},{max:32,message:"通道名称不超过32个字符"},{pattern:/^[^\s]*$/,message:"不允许填写空格"}]})(g.default.createElement(O.default,{placeholder:"请输入通道名称，不超过32个字符"}))),(0,A.showIsDefault)($)&&g.default.createElement(L,(0,f.default)({},b.formItemCenterLayout,{label:" ",colon:!1}),U("isDefault",{valuePropName:"checked",initialValue:!1})(g.default.createElement(s.default,null,"设置为默认通道")),g.default.createElement(i.default,{title:"各应用的告警走默认通道，故默认通道需谨慎设置，支持用户后续更改，每个通道类有且仅有一个默认通道。",arrowPointAtCenter:!0},g.default.createElement(c.default,{type:"info-circle"}))),(0,A.showConfigFile)($)&&g.default.createElement(L,(0,f.default)({},I(I({},b.formItemCenterLayout),k),{label:"配置文件"}),U("file",{rules:[{required:!0,message:"文件不可为空！"}],initialValue:null==K?void 0:K.filePath})(g.default.createElement("div",null)),g.default.createElement("div",{className:"c-alarmRule__config"},g.default.createElement(d.default,J,g.default.createElement(u.default,{style:{width:164},icon:"upload"},"点击上传")),g.default.createElement("span",{className:"config-desc"},"仅支持jar格式，",g.default.createElement("a",{href:"/api/console/service/alert/downloadJar?alertGateType=".concat($)},"查看配置文件说明"))),V("file")&&g.default.createElement("span",{className:"config-file"},g.default.createElement(c.default,{type:"paper-clip"}),null!==(a=null!==(r=null===(C=V("file"))||void 0===C?void 0:C.name)&&void 0!==r?r:V("file"))&&void 0!==a?a:"",g.default.createElement(c.default,{type:"delete",onClick:function(){B((0,v.default)({},"file",""))}}))),(0,A.showAlertGateJson)(ee,$)?g.default.createElement(L,(0,f.default)({},b.formItemCenterLayout,{label:"通道配置信息"}),U("alertGateJson",{rules:[{required:!0,message:"请输入通道配置信息"}]})(g.default.createElement(M,{placeholder:function(){var e=V("alertGateCode")||"";return e===b.CHANNEL_MODE_VALUE.SMS_YP?b.CHANNEL_CONF_TEXT.SMS_YP:e===b.CHANNEL_MODE_VALUE.MAIL_DT?b.CHANNEL_CONF_TEXT.MAIL_DT:e.includes("jar")?b.CHANNEL_CONF_TEXT.JAR:e.includes("api")?b.CHANNEL_CONF_TEXT.API:b.CHANNEL_CONF_TEXT.CUSTOM}(),rows:6}))):null,(0,A.showAlertTemplete)($,ee)?g.default.createElement(L,(0,f.default)({},b.formItemCenterLayout,{label:"通知消息模版"}),U("alertTemplate",{rules:[{required:!0,message:"请输入通知消息模版"}]})(g.default.createElement(M,{placeholder:"请按照此格式填写：<企业名称>${message}，请及时处理",rows:4}))):null,(0,A.canTestAlarm)($)?g.default.createElement(L,(0,f.default)({},b.formItemCenterLayout,{label:" ",colon:!1}),U("".concat(Z),{rules:[{required:!1},{validator:function(e,t,n){if(t&&!G)b.NUM_COMMA.test(t)||n("请输入正确格式的手机号码"),t.split(",").forEach((function(e){!b.PHONE_REG.test(e)&&e.length&&n("请输入正确格式的手机号码")}));else if(t&&G){b.EMAIL_COMMA.test(t)||n("请输入正确格式的邮箱账号"),t.split(",").forEach((function(e){!b.EMAIL_REG.test(e)&&e.length&&n("请输入正确格式的邮箱账号")}))}n()}}],initialValue:""})($!==b.ALARM_TYPE.CUSTOM?g.default.createElement(O.default,{placeholder:"输入".concat(z,"测试号码，多个").concat(z,"用英文逗号隔开"),addonAfter:g.default.createElement("span",{onClick:function(){H()}},"点击测试")}):g.default.createElement(u.default,{ghost:!0,onClick:function(){H()}},"消息发送测试"))):null),g.default.createElement("footer",null,g.default.createElement(u.default,{onClick:function(){q()}},"取消"),g.default.createElement(u.default,{type:"primary",onClick:function(){x(function(){var e=(0,T.default)(o.default.mark((function e(t,n){var a,r,l,u;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=5;break}return e.next=3,S.default.addOrUpdateAlarmRule(Object.assign({},n,{id:Y||"",isDefault:n.isDefault?1:0,file:null!==(a=null!==(r=null==n||null===(l=n.file)||void 0===l?void 0:l.file)&&void 0!==r?r:null==n?void 0:n.file)&&void 0!==a?a:""}));case 3:1===e.sent.code&&(u=Y?"编辑成功":"新增成功",E.default.success(u),q());case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())}},"确定"))))}));t.default=j},"/u1D":function(e,t,n){"use strict";n("eoL8"),Object.defineProperty(t,"__esModule",{value:!0}),t.appInfo=function(){window.console.log("%cApp current version: v".concat("4.2.1"),"font-family: Cabin, Helvetica, Arial, sans-serif;text-align: left;font-size:32px;color:#B21212;")}},"0lfv":function(e,t,n){"use strict";n("+2oP"),n("sMBO"),n("pjDv"),n("PKPk"),n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("3bBZ"),n("J30X"),n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("yXV3"),n("rB9j"),n("Rm1S"),n("4l63"),n("EnZy"),n("UxlC"),n("TWNs"),n("JfAA"),n("DQNa"),n("qePV"),n("toAj"),n("ma9I"),n("07d7"),n("ToJy");var r=a(n("wd/R"));function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){i=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(i)throw o}}}}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}r.default.locale("zh-cn");var u={pageWidth:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},pageHeight:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},checkExist:function(e){return null!=e&&""!==e},isMacOs:function(){return navigator.userAgent.indexOf("Macintosh")>-1},isWindows:function(){return navigator.userAgent.indexOf("Windows")>-1},isMobileDevice:function(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")},browserCheck:function(){var e={};if(this.isMobileDevice())return!0;var t,n=navigator.userAgent.toLowerCase();return(t=n.match(/rv:([\d.]+)\) like gecko/))||(t=n.match(/msie ([\d\.]+)/))?e.ie=t[1]:(t=n.match(/edge\/([\d\.]+)/))?e.edge=t[1]:(t=n.match(/firefox\/([\d\.]+)/))?e.firefox=t[1]:(t=n.match(/(?:opera|opr).([\d\.]+)/))?e.opera=t[1]:(t=n.match(/chrome\/([\d\.]+)/))?e.chrome=t[1]:(t=n.match(/version\/([\d\.]+).*safari/))&&(e.safari=t[1]),!!(e.chrome&&parseInt(e.chrome.split(".")[0],10)>=66||e.firefox)},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},getBase64:function(e,t){var n=new FileReader;n.addEventListener("load",(function(){return t(n.result)})),n.readAsDataURL(e)},percent:function(e,t){return e&&e!==1/0?(e>1&&(e=1),t=t||2,t=Math.pow(10,t),Math.round(e*t*100)/t+"%"):"0%"},getCssText:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="";for(var n in e)e.hasOwnProperty(n)&&(t+=n+":"+e[n]+";");return t},formatDateTime:function(e){return(0,r.default)(e).format("YYYY-MM-DD HH:mm:ss")},formatDate:function(e){return(0,r.default)(e).format("YYYY-MM-DD")},formatDateHours:function(e){return(0,r.default)(e).format("YYYY-MM-DD HH:mm")},formatDayHours:function(e){return(0,r.default)(e).format("MM-DD HH:mm")},formatHours:function(e){return(0,r.default)(e).format("HH:mm")},formatMinute:function(e){return(0,r.default)(e).format("HH:mm:ss")},trim:function(e){return"string"==typeof e?e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):e},trimlr:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},removeAllSpaces:function(e){return"string"==typeof e?e.replace(/\s*/g,""):e},getCookie:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(decodeURI(t[2])):null},deleteCookie:function(e,t,n){var a=new Date(0);t=t?"; domain=".concat(t):"",n=n||"/",document.cookie=e+"=; expires="+a.toUTCString()+t+"; path="+n},deleteAllCookies:function(e,t){for(var n=document.cookie.split(";"),a=0;a<n.length;a++)n[a]&&this.deleteCookie(n[a].split("=")[0],e,t)},setCookie:function(e,t,n){var a="";if(n){var r=new Date;r.setTime(r.getTime()+24*n*60*60*1e3),a="; expires="+r.toUTCString()}document.cookie=e+"="+t+a+"; path=/"},convertBytes:function(e){for(var t=0;e>=1024;)e=Number((e/1024).toFixed(2)),t++;return"".concat(e," ").concat(["B","KB","MB","GB","TB","PB","EB","ZB","YB"][t])},formatTime:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=0,n=0,a=0;function r(e){return e-3600*(a=Math.floor(e/3600))}function o(e){return e-60*(n=Math.floor(e/60))}function l(e){return t=e}return l(o(r(e))),"".concat(a?a+"h":"").concat(n?n+"m":"").concat(t?t+"s":"")||"0s"},toQfw:function(e){if(!e)return 0;return e=(e=e.toString?e.toString():e).replace(/(?=(?!(\b))(\d{3})+$)/g,",")},textOverflowExchange:function(e,t){return e&&e.length>t?e.substring(0,t)+"...":e},jsonFormat:function(e,t){if(!e)return e;try{var n=JSON.parse(e);return JSON.stringify(n,null,t||2)}catch(e){return null}},sortByCompareFunctions:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];e.sort((function(e,t){var a,r=0,l=o(n);try{for(l.s();!(a=l.n()).done;){if(0!==(r=(0,a.value)(e,t)))return r}}catch(e){l.e(e)}finally{l.f()}return r}))},exchangeOrder:function(e){switch(e){case"ascend":return"asc";case"descend":return"desc";default:return}},generateAKey:function(){return""+(new Date).getTime()+~~(1e6*Math.random())},isJSONStr:function(e){return"{"===(e=this.trimlr(e)).charAt(0)&&"}"===e.charAt(e.length-1)||"["===e.charAt(0)&&"]"===e.charAt(e.length-1)},getRandomStr:function(e){function t(e){var t=Math.random()*(e.length-1);return e.charAt(t)}for(var n="num",a="",r=0;r<e;r++)"num"===n?(a+=t("0123456789"),n="lower"):"lower"===n?(a+=t("abcdefghijklmnopqrstuvwxyz"),n="upper"):"upper"===n&&(a+=t("ABCDEFGHIJKLMNOPQRSTUVXYZ"),n="num");return a},isEqualArr:function(e,t){var n=JSON.stringify;return n(e.sort())===n(t.sort())}};t.default=u},"2Cp/":function(e,t,n){"use strict";n("eoL8"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.userActions.SET_TENANT_LIST:var n=t.data,l=(0,r.cloneDeep)(e);return l.tenantList=n,l;default:return e}};var a=n("o4I+"),r=n("LvDl"),o={tenantList:[]}},"6aLI":function(e,t,n){"use strict";n("SuFq"),n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I"),n("zKZe"),n("2B1R"),n("4l63"),n("wLYn"),n("cDke");var o=a(n("DtFj")),l=a(n("Pbn2")),u=a(n("Y/VR")),i=a(n("d1El")),c=a(n("RIqP")),s=a(n("9xET")),d=a(n("s4l/")),f=a(n("ZPTe")),p=a(n("ZvzK")),m=a(n("Jv8k")),E=a(n("QpBz")),v=a(n("lwsE")),T=a(n("W8MJ")),y=a(n("PJYZ")),O=a(n("7W2i")),h=a(n("a1gu")),N=a(n("Nsbk")),g=a(n("lSNA")),C=a(n("qPIi")),P=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=j(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),S=n("LvDl"),b=n("lxQk"),A=a(n("ykY0")),R=a(n("0lfv")),_=n("IiER"),I=a(n("Ej2X")),L=a(n("BjRx")),D=a(n("RHHV")),M=a(n("L56I")),k=n("RzPm");function j(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(j=function(e){return e?n:t})(e)}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,g.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,N.default)(e);if(t){var r=(0,N.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,h.default)(this,n)}}var V=C.default.Group,x=C.default.Button,B=b.Utils.getParameterByName,Y=function(e){(0,O.default)(n,e);var t=U(n);function n(){var e;(0,v.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,g.default)((0,y.default)(e),"state",{dataSource:[],table:{pageIndex:1,total:0,loading:!1},jobName:"",clusterName:void 0,node:void 0,jobResource:void 0,engineType:void 0,isShowViewDetail:!1,isShowTaskParams:!1,resource:{},killIds:[],isShowKill:!1,killResource:{},radioValue:null,selectedRowKeys:[],isShowAllKill:!1,isKillAllTasks:!1,killTaskInfo:[]}),(0,g.default)((0,y.default)(e),"getDetailTaskList",(function(){var t=e.state,n=t.node,a=t.jobResource,r=t.radioValue,o=e.state.table,l=o.pageIndex;e.setState({selectedRowKeys:[],killTaskInfo:[]}),a&&(e.setState({table:F(F({},o),{},{loading:!0})}),D.default.getViewDetail({nodeAddress:n,pageSize:15,currentPage:l,stage:r,jobResource:a}).then((function(t){1==t.code?e.setState({dataSource:(0,S.get)(t,"data.data",[]),table:F(F({},o),{},{loading:!1,total:(0,S.get)(t,"data.totalCount",0)})}):e.setState({table:F(F({},o),{},{loading:!1})})})))})),(0,g.default)((0,y.default)(e),"onPageChange",(function(t){e.setState({table:Object.assign(e.state.table,{pageIndex:t}),selectedRowKeys:[],killTaskInfo:[]},e.getDetailTaskList)})),(0,g.default)((0,y.default)(e),"handleKillSelect",(function(){var t=e.state.selectedRowKeys;if(!t||t.length<=0)return E.default.error("您没有选择任何任务！"),!1;e.setState({isKillAllTasks:!1,isShowAllKill:!0})})),(0,g.default)((0,y.default)(e),"onCheckAllChange",(function(t){var n=[],a=[];t.target.checked&&(n=e.state.dataSource.map((function(e){return e.jobId})),a=e.state.dataSource.map((function(e){return{jobId:e.jobId,jobType:e.jobType,engineType:e.engineType,clusterName:e.clusterName}}))),e.setState({selectedRowKeys:n,checkAll:t.target.checked,killTaskInfo:a})})),(0,g.default)((0,y.default)(e),"handleKillAll",(function(t){e.setState({isShowAllKill:!0,isKillAllTasks:!0})})),(0,g.default)((0,y.default)(e),"tableFooter",(function(){var t=e.state,n=t.table,a=t.selectedRowKeys,r=P.createElement(m.default,{onClick:e.handleKillAll},P.createElement(m.default.Item,{key:"1",style:{width:118}},"杀死全部任务"));return P.createElement(s.default,{style:{width:"100%"}},P.createElement(f.default,{span:12},P.createElement(p.default.Button,{size:"small",trigger:["click"],onClick:e.handleKillSelect,type:"primary",overlay:r},"杀死选中任务"),P.createElement("span",{style:{marginLeft:8,color:"#666"}},"已选中",P.createElement("a",null,a.length),"条")),P.createElement(f.default,{span:12},P.createElement(d.default,{current:n.pageIndex,pageSize:15,size:"small",total:n.total,style:{right:0},onChange:e.onPageChange,showTotal:function(e){return P.createElement("span",null,"共",P.createElement("span",{style:{color:"#3F87FF"}},e),"条数据，每页显示",15,"条")}})))})),e}return(0,T.default)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({node:B("node"),clusterName:B("clusterName"),engineType:B("engineType"),jobResource:B("jobResource"),radioValue:B("jobStage")},(function(){e.getDetailTaskList()}))}},{key:"changeJobPriority",value:function(e){var t=this.state,n=t.jobResource,a=t.radioValue,r=parseInt(a,10)===k.JobStage.Saved?"插入队列头成功":"置顶成功";return D.default.stickJob({jobId:e.jobId,jobResource:n}).then((function(e){if(1==e.code)return E.default.success(r),!0}))}},{key:"getPagination",value:function(){var e=this.state.table;return{current:e.pageIndex,pageSize:15,total:e.total}}},{key:"viewDetails",value:function(e){this.setState({isShowViewDetail:!0,resource:e})}},{key:"showTaskParams",value:function(e){var t,n,a=null!==(t=null==e||null===(n=e.jobInfo)||void 0===n?void 0:n.taskParams)&&void 0!==t?t:"";this.setState({isShowTaskParams:!0,resource:a})}},{key:"handleCloseViewModal",value:function(){this.setState({isShowViewDetail:!1,isShowTaskParams:!1,resource:null})}},{key:"killTask",value:function(e){this.setState({isShowKill:!0,killResource:e})}},{key:"handleCloseKill",value:function(){this.setState({isShowKill:!1,isShowAllKill:!1})}},{key:"killSuccess",value:function(e){this.setState({killIds:(0,c.default)(this.state.killIds).concat(e)})}},{key:"autoRefresh",value:function(){this.getDetailTaskList()}},{key:"stickTask",value:function(e){var t=this;this.changeJobPriority(e).then((function(e){e&&t.getDetailTaskList()}))}},{key:"changeRadioValue",value:function(e){var t=this.state.table;this.setState({selectedRowKeys:[],killTaskInfo:[],table:F(F({},t),{},{total:0,pageIndex:1}),radioValue:e.target.value},this.getDetailTaskList)}},{key:"initTableColumns",value:function(){var e=this;return[{title:"任务名称",dataIndex:"jobName",fixed:"left",width:280,render:function(e,t){return t.jobName}},{title:"任务ID",dataIndex:"jobId",render:function(e,t){return P.createElement("span",null,t.jobId,P.createElement(A.default,{style:{color:"#999",marginLeft:4},copyText:t.jobId}))}},{title:"状态",dataIndex:"status",render:function(e,t){return(0,_.displayTaskStatus)(e)}},{title:"节点",dataIndex:"nodeAddress"},{title:"已等待",dataIndex:"waitTime",render:function(e,t){return t.waitTime}},{title:"等待原因",dataIndex:"waitReason",width:300,render:function(e,t){var n;return P.createElement(i.default,{title:t.waitReason,placement:"top"},b.Utils.textOverflowExchange(null!==(n=t.waitReason)&&void 0!==n?n:"-",20))}},{title:"提交时间",dataIndex:"generateTime",render:function(e){return R.default.formatDateTime(e)}},{title:"租户",dataIndex:"tenantName"},{title:"操作",dataIndex:"deal",fixed:"right",width:250,render:function(t,n,a){var r=n.stage===k.JobStage.Saved,o=n.stage===k.JobStage.Queueing?"置顶":r?"插入队列头":null;return P.createElement("div",null,P.createElement("a",{onClick:e.viewDetails.bind(e,n)},"查看详情"),P.createElement("span",{className:"ant-divider"}),P.createElement("a",{onClick:e.killTask.bind(e,n)},"杀任务"),o?P.createElement("span",null,P.createElement("span",{className:"ant-divider"}),P.createElement("a",{onClick:e.stickTask.bind(e,n,a)},o)):null,P.createElement("span",{className:"ant-divider"}),P.createElement("a",{onClick:e.showTaskParams.bind(e,n)},"任务参数"))}}]}},{key:"render",value:function(){var e=this,t="c-taskDetail__container",n=this.state,a=n.killResource,r=n.resource,c=n.node,s=n.isKillAllTasks,d=n.isShowTaskParams,f=n.dataSource,p=n.table,m=n.selectedRowKeys,E=n.killTaskInfo,v=n.radioValue,T=n.isShowViewDetail,y=n.isShowKill,O=n.isShowAllKill,h=n.clusterName,N=n.jobResource,g=p.total,C=p.loading,S={onChange:function(t,n){e.setState({selectedRowKeys:t,killTaskInfo:n.map((function(e){return{jobId:e.jobId,jobType:e.jobType,engineType:e.engineType}}))})},selectedRowKeys:m},b=s?1===v?0:1:void 0;return P.createElement("div",{className:"".concat(t)},P.createElement("div",{className:"".concat(t,"__title")},P.createElement(u.default,null,P.createElement(u.default.Item,null,P.createElement("a",{onClick:function(){e.props.router.push("/console-ui/queueManage")}},"队列管理")),P.createElement(u.default.Item,null,N)),P.createElement("span",null,"集群：",h)),P.createElement("div",{className:"".concat(t,"__radioWrap")},P.createElement(V,{onChange:this.changeRadioValue.bind(this),value:this.state.radioValue},Object.getOwnPropertyNames(k.JobStageText).map((function(e){return P.createElement(x,{key:e,value:e},k.JobStageText[e])}))),P.createElement(i.default,{title:"刷新数据"},P.createElement("div",{className:"".concat(t,"__radioWrap__refresh")},P.createElement(l.default,{type:"sync",onClick:this.getDetailTaskList,style:{cursor:"pointer",color:"#94A8C6"}})))),P.createElement(o.default,{rowKey:function(e){return"".concat(e.jobId)},loading:C,className:"dt-table-fixed-contain-footer dt-table-border",scroll:{y:!0,x:1800},style:{height:"calc(100vh - 190px)"},rowSelection:S,dataSource:f,columns:this.initTableColumns(),pagination:!1,footer:this.tableFooter}),P.createElement(I.default,{visible:T,onCancel:this.handleCloseViewModal.bind(this),resource:JSON.stringify(r,null,2)}),P.createElement(I.default,{title:"任务参数",visible:d,onCancel:this.handleCloseViewModal.bind(this),resource:r}),P.createElement(L.default,{visible:y,onCancel:this.handleCloseKill.bind(this),killResource:a,killSuccess:this.killSuccess.bind(this),autoRefresh:this.autoRefresh.bind(this),node:c,jobResource:this.state.jobResource,stage:this.state.radioValue}),P.createElement(M.default,{visible:O,totalModel:b,onCancel:this.handleCloseKill.bind(this),killSuccess:this.killSuccess.bind(this),autoRefresh:this.autoRefresh.bind(this),killResource:E,node:c,totalSize:g,stage:this.state.radioValue,jobName:this.state.jobName,jobResource:this.state.jobResource,clusterName:this.state.clusterName}))}}]),n}(P.Component);t.default=Y},"6cUG":function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("wLYn"),n("2B1R");var o=a(n("d1El")),l=a(n("Pbn2")),u=a(n("CC+v")),i=a(n("lwsE")),c=a(n("W8MJ")),s=a(n("7W2i")),d=a(n("a1gu")),f=a(n("Nsbk")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),m=n("LvDl");function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var T=!0,y=!1,O=function(e){(0,s.default)(n,e);var t=v(n);function n(e){var a;return(0,i.default)(this,n),(a=t.call(this,e)).state={},a}return(0,c.default)(n,[{key:"showDetailErrMessage",value:function(e){u.default.error({title:"错误信息",content:"".concat(e.errorMsg),zIndex:1061})}},{key:"matchCompTest",value:function(e){switch(null==e?void 0:e.result){case T:return p.createElement(l.default,{className:"success-icon",type:"check-circle",theme:"filled"});case y:var t;return p.createElement(o.default,{title:p.createElement("a",{style:{color:"#fff",overflow:"scroll"},onClick:this.showDetailErrMessage.bind(this,e)},(0,m.isArray)(null==e?void 0:e.errorMsg)?null==e||null===(t=e.errorMsg)||void 0===t?void 0:t.map((function(e){return p.createElement("p",{key:e.componentVersion},e.componentVersion?e.componentVersion+" : ":"",e.errorMsg)})):p.createElement("span",null,null==e?void 0:e.errorMsg)),placement:"right"},p.createElement(l.default,{className:"err-icon",type:"close-circle",theme:"filled"}));default:return null}}},{key:"render",value:function(){var e=this.props.testStatus;return this.matchCompTest(e)}}]),n}(p.Component);t.default=O},"7o06":function(e,t,n){"use strict";n("SuFq"),n("+2oP"),n("sMBO"),n("pjDv"),n("PKPk"),n("pNMO"),n("4Brf"),n("0oug"),n("4mDm"),n("3bBZ"),n("J30X"),n("ENF9"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I"),n("07d7"),n("5s+n"),n("zKZe");var o=a(n("lwsE")),l=a(n("W8MJ")),u=a(n("PJYZ")),i=a(n("7W2i")),c=a(n("a1gu")),s=a(n("Nsbk")),d=a(n("lSNA")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),p=n("K7yS"),m=a(n("Wg/u")),E=a(n("VrN/"));n("gxFx"),n("i/zG"),n("p77/"),n("DdDu"),n("RJim"),n("dmqw");var v,T=n("gFia");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function O(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}n("/9rB"),n("25Eh"),n("+dQi"),n("3Fvf"),n("19Vz"),n("jDMi"),n("H9tZ");var g=(0,m.default)(v=function(e){(0,i.default)(n,e);var t=N(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,d.default)((0,u.default)(e),"Editor",void 0),(0,d.default)((0,u.default)(e),"self",void 0),e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){var e=this.Editor,t=this.props.options||p.defaultEditorOptions,n=this.getCodeMirrorIns(),a=this.props,r=a.value,o=a.onChange,l=a.onFocus,u=a.cursor,i=a.focusOut,c=a.cursorActivity,s=a.editorRef;e&&(this.self=n.fromTextArea(e,t),this.renderTextMark(),u&&this.self.doc.setCursor(u),this.self.on("change",(function(e){o&&o(r,e.getValue(),e)})),this.self.on("focus",(function(e){l&&l(r,e.getValue())})),this.self.on("blur",(function(e){i&&i(r,e.getValue())})),this.self.on("cursorActivity",(function(e){c&&c(r,e)})),s&&s(this.self))}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this,n=e.value,a=e.sync,r=e.cursor,o=e.placeholder,l=e.cursorAlwaysInEnd,u=e.options,i=void 0===u?{}:u;if(i&&this.self.setOption("readOnly",i.readOnly),o!=this.props.placeholder&&this.self.setOption("placeholder",o),this.props.value!==n){if(r&&this.self.doc.setCursor(r),a){window.ted=this.self;var c=this.self.getScrollInfo(),s=c.top+c.clientHeight-c.height>-10;n?this.self.setValue(n):this.self.setValue(""),l?this.self.doc.setCursor(this.self.doc.lineCount(),null):s?s&&Promise.resolve().then((function(){var e=t.self.getScrollInfo();t.self.scrollTo(e.left,e.height)})):this.self.scrollTo(c.left,c.top)}this.renderTextMark()}}},{key:"renderTextMark",value:function(){var e,t=O(this.self.doc.getAllMarks());try{for(t.s();!(e=t.n()).done;){e.value.clear()}}catch(e){t.e(e)}finally{t.f()}for(var n=this.self.getValue(),a=[].concat((0,T.getLinkMark)(n)).concat((0,T.getLogMark)(n)),r=0;r<a.length;r++){var o=a[r];this.self.doc.markText(this.self.doc.posFromIndex(o.start),this.self.doc.posFromIndex(o.end),{replacedWith:o.node})}}},{key:"getCodeMirrorIns",value:function(){return this.self||E.default}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.style,r="code-editor";r=n?"".concat(r," ").concat(n):r;var o={position:"relative",minHeight:"400px"};return o=a?Object.assign(o,a):o,f.createElement("div",{className:r,style:o},f.createElement("textarea",{ref:function(t){e.Editor=t},name:"code",placeholder:this.props.placeholder||"",defaultValue:this.props.value||""}))}}]),n}(f.Component))||v;t.default=g},"8Qsq":function(e,t,n){"use strict";n("eoL8"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={base:"vs",inherit:!0,rules:[],colors:{"editorSuggestWidget.background":"#fff","editorSuggestWidget.border":"#fff","editorSuggestWidget.foreground":"#88adbf","editorSuggestWidget.selectedBackground":"#dfeeff"}};t.default=a},"90CZ":function(e,t,n){"use strict";n("tkto"),n("pNMO"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("lSNA")),o=a(n("J4zp"));n("TeQF");var l=n("q1tI"),u=n("RzPm");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(){var e={};for(var t in u.ENGINE_TYPE)e[u.ENGINE_TYPE[t]]=!1;return e}function d(e,t){return t==u.RESOURCE_TYPE.KUBERNETES?e.filter((function(e){return e.resourceType==t})).length>0:e.filter((function(e){return e.engineType==t})).length>0}var f=function(e){var t=e.clusterId,n=e.form,a=e.clusterList,r=e.visible,i=(0,l.useState)([]),f=(0,o.default)(i,2),p=f[0],m=f[1],E=(0,l.useState)(c({},s())),v=(0,o.default)(E,2),T=v[0],y=v[1];return(0,l.useEffect)((function(){var e,o;if(t){if(!r)return n.resetFields(["queueId"]),y(c({},s())),void m([]);var l=a.filter((function(e){return(null==e?void 0:e.clusterId)==t})),i=(null==l||null===(e=l[0])||void 0===e?void 0:e.engines)||[],f=i.filter((function(e){return e.engineType==u.ENGINE_TYPE.HADOOP})),p={};for(var E in u.ENGINE_TYPE)p[u.ENGINE_TYPE[E]]=d(i,u.ENGINE_TYPE[E]);y(c({},p)),m((null==f||null===(o=f[0])||void 0===o?void 0:o.queues)||[])}}),[t,a,r,n]),{env:T,queueList:p}};t.default=f},A9pX:function(e,t,n){"use strict";n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"useEnv",{enumerable:!0,get:function(){return r.default}});var r=a(n("90CZ"))},AHgm:function(e,t,n){e.exports=function(){return new Worker(n.p+"d33318a1daf62b8bd763.worker.js")}},AuKd:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I"),n("fbCW"),n("yXV3"),n("2B1R"),n("mRH6"),n("sMBO");var o=a(n("Jv8k")),l=a(n("Pbn2")),u=a(n("lwsE")),i=a(n("W8MJ")),c=a(n("PJYZ")),s=a(n("7W2i")),d=a(n("a1gu")),f=a(n("Nsbk")),p=a(n("lSNA")),m=a(n("d2CI")),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),v=n("dtw8");function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var O=m.default.Sider,h="/console-ui",N=[{id:"queueManage",name:"队列管理",link:"".concat(h,"/queueManage"),enable:!0},{id:"resourceManage",name:"资源管理",link:"".concat(h,"/resourceManage"),enable:!0},{id:"alarmChannel",name:"告警通道",link:"".concat(h,"/alarmChannel"),enable:!0},{id:"clusterManage",name:"多集群管理",link:"".concat(h,"/clusterManage"),enable:!0}],g=function(e){(0,s.default)(n,e);var t=y(n);function n(e){var a;return(0,u.default)(this,n),a=t.call(this,e),(0,p.default)((0,c.default)(a),"state",{collapsed:!1,mode:"inline",selectKey:"queueManage"}),(0,p.default)((0,c.default)(a),"onCollapse",(function(){a.setState({collapsed:!a.state.collapsed,mode:a.state.collapsed?"inline":"vertical"})})),(0,p.default)((0,c.default)(a),"updateSelectKey",(function(){var e="".concat(window.location.pathname).concat(window.location.hash),t=N.find((function(t){return e.indexOf(t.id)>-1}));t&&a.setState({selectKey:t.id})})),(0,p.default)((0,c.default)(a),"onClickMenu",(function(e){a.setState({selectKey:e.key})})),a}return(0,i.default)(n,[{key:"componentDidMount",value:function(){this.updateSelectKey()}},{key:"render",value:function(){var e=this.state,t=e.collapsed,n=e.mode,a=e.selectKey;return E.createElement(O,{className:"dt-layout-sider",collapsed:t},E.createElement("div",{className:"dt-slider-top-icon",onClick:this.onCollapse},E.createElement(l.default,{type:t?"menu-unfold":"menu-fold"})),E.createElement(o.default,{mode:n,selectedKeys:[a],onClick:this.onClickMenu},N.map((function(e){return E.createElement(o.default.Item,{key:e.id},E.createElement(v.Link,{to:e.link,target:e.target,rel:"noopener noreferrer"},E.createElement("span",null,e.name)))}))))}}]),n}(E.Component);t.default=g},AwqB:function(e,t,n){"use strict";n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("07d7"),n("5s+n"),n("R5XZ"),n("oVuX"),n("hgUn");var r=a(n("U/y9")),o=a(n("lwsE")),l=a(n("W8MJ"));n("bZMm");var u=n("pWBi"),i=new(function(){function e(){(0,o.default)(this,e)}return(0,l.default)(e,[{key:"get",value:function(e,t){var n=t?this.build(e,t):e;return this.request(n,{method:"GET"})}},{key:"post",value:function(e,t){var n={method:"POST"};return t&&(n.body=JSON.stringify(t)),this.request(e,n)}},{key:"postWithDefaultHeader",value:function(e,t){var n={method:"POST"};return n.headers=this.defaultHeader(),t&&(n.body=JSON.stringify(t)),this.request(e,n)}},{key:"postAsFormData",value:function(e,t){var n={method:"POST"};return t&&(n.body=this.buildFormData(t)),this.request(e,n)}},{key:"postForm",value:function(e,t){var n={method:"POST"};return t&&(n.body=new FormData(t)),this.request(e,n)}},{key:"request",value:function(e,t){return r.default.show(),t.credentials="same-origin",fetch(e,t).then(u.authBeforeFormate).then((function(e){return setTimeout((function(){r.default.hide()}),300),e.json()})).then(u.authAfterFormated).catch((function(e){return Promise.reject(e)}))}},{key:"defaultHeader",value:function(){return{Accept:"*/*","Content-Type":"application/json"}}},{key:"build",value:function(e,t){var n=[];if(t)for(var a in t)a&&n.push(a+"="+encodeURIComponent(t[a]));return e+"?"+n.join("&")}},{key:"buildFormData",value:function(e){if(e){var t=new FormData;for(var n in e)n&&t.append(n,e[n]);return t}}}]),e}());t.default=i},BjRx:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("wLYn");var o=a(n("CC+v")),l=a(n("QpBz")),u=a(n("lwsE")),i=a(n("W8MJ")),c=a(n("7W2i")),s=a(n("a1gu")),d=a(n("Nsbk")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=m(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),p=a(n("RHHV"));function m(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(m=function(e){return e?n:t})(e)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.default)(this,n)}}var v=function(e){(0,c.default)(n,e);var t=E(n);function n(){return(0,u.default)(this,n),t.apply(this,arguments)}return(0,i.default)(n,[{key:"killTask",value:function(){var e=this,t=this.props,n=t.killResource,a=t.jobResource,r=t.stage,o=t.node;p.default.killTasks({jobIdList:[n.jobId],stage:r,jobResource:a,nodeAddress:o}).then((function(t){1==t.code&&(e.props.killSuccess(n.jobId),l.default.success("操作成功"),e.props.autoRefresh(),e.props.onCancel())}))}},{key:"confirmKilltask",value:function(){this.killTask()}},{key:"render",value:function(){return f.createElement(o.default,{title:"杀任务",visible:this.props.visible,onCancel:this.props.onCancel,onOk:this.confirmKilltask.bind(this)},f.createElement("p",null,"是否要杀死此任务?"))}}]),n}(f.Component);t.default=v},"C+lx":function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I");var o=a(n("CC+v")),l=a(n("pVnL")),u=a(n("iJl9")),i=a(n("lwsE")),c=a(n("W8MJ")),s=a(n("PJYZ")),d=a(n("7W2i")),f=a(n("a1gu")),p=a(n("Nsbk")),m=a(n("lSNA")),E=a(n("qu0K")),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),T=n("RzPm");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var h=E.default.Item,N=function(e){(0,d.default)(n,e);var t=O(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,m.default)((0,s.default)(e),"onSubmit",(function(){var t=e.props,n=t.onOk;(0,t.form.validateFields)((function(e,t){e||n({clusterName:t.clusterName})}))})),e}return(0,c.default)(n,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,n=t.title,a=t.visible,r=t.onCancel;return v.createElement(o.default,{title:n,visible:a,onCancel:r,onOk:this.onSubmit,className:"c-clusterManage__modal"},v.createElement(E.default,null,v.createElement(h,(0,l.default)({label:"集群名称"},T.formItemLayout),e("clusterName",{rules:[{required:!0,message:"集群标识不可为空！"},{pattern:/^[a-z0-9_]{1,64}$/i,message:"集群标识不能超过64字符，支持英文、数字、下划线"}]})(v.createElement(u.default,{placeholder:"请输入集群标识"})))))}}]),n}(v.Component),g=E.default.create()(N);t.default=g},C4JW:function(e,t,n){"use strict";n("eoL8"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.UIC_BASE_URL=t.CONSOLE_BASE_UPLOAD_URL=t.CONSOLE_BASE_URL=void 0;t.CONSOLE_BASE_URL="/node";t.CONSOLE_BASE_UPLOAD_URL="/node";t.UIC_BASE_URL="/uic/api";var a={DA_GET_USER_BY_ID:"".concat("/node","/user/getUserById"),DA_GET_USER_AUTH_BY_ID:"".concat("/node","/user/getUserById"),GET_TENANT_LIST:"".concat("/node","/tenant/listTenant"),GET_RESOURCE_USER_LIST:"".concat("/node","/tenant/listByQueueId"),BIND_USER_TO_RESOURCE:"".concat("/node","/tenant/addToQueue"),CONFIRM_SWITCH_QUEUE:"".concat("/node","/tenant/updateQueueId"),GET_RESOURCE_LIST:"".concat("/node","/cluster/pageQueue"),GET_CLUSTER_LIST:"".concat("/node","/cluster/pageQuery"),UPDATE_CLUSTER:"".concat("/node","/upload/cluster/update"),NEW_CLUSTER:"".concat("/node","/upload/cluster/add"),TEST_CLUSTER_CONNECT:"".concat("/node","/cluster/testConnect"),UPLOAD_CLUSTER_RESOURCE:"".concat("/node","/upload/cluster/config"),GET_CLUSTER:"".concat("/node","/cluster/getOne"),GET_QUEUE_LISTS:"".concat("/node","/cluster/listQueues"),GET_CLUSTER_DETAIL:"".concat("/node","/console/overview"),GET_CLUSTER_SELECT:"".concat("/node","/cluster/clusters"),GET_NODEADDRESS_SELECT:"".concat("/node","/console/nodeAddress"),SEARCH_TASKNAME_LIST:"".concat("/node","/console/searchJob"),SEARCH_TASKNAME_FUZZY:"".concat("/node","/console/listNames"),KILL_TASK:"".concat("/node","/console/stopJob"),KILL_TASKS:"".concat("/node","/console/stopJobList"),KILL_ALL_TASK:"".concat("/node","/console/stopAll"),JOB_STICK:"".concat("/node","/console/jobStick"),GET_ENGINE_LIST:"".concat("/node","/console/engineTypes"),GET_GROUP_LIST:"".concat("/node","/console/groups"),GET_VIEW_DETAIL:"".concat("/node","/console/groupDetail"),CHANGE_JOB_PRIORITY:"".concat("/node","/console/jobPriority"),GET_CLUSTER_RESOURCES:"".concat("/node","/console/clusterResources"),GET_CLUSTER_INFO:"".concat("/node","/component/cluster/getCluster"),UPLOAD_RESOURCE:"".concat("/node","/upload/component/config"),DOWNLOAD_RESOURCE:"".concat("/node","/download/component/downloadFile"),DELETE_CLUSTER:"".concat("/node","/cluster/deleteCluster"),DELETE_COMPONENT:"".concat("/node","/component/delete"),GET_COMPONENT_VERSION:"".concat("/node","/component/getComponentVersion"),TEST_CONNECT:"".concat("/node","/component/testConnect"),TEST_CONNECTS:"".concat("/node","/component/testConnects"),SAVE_COMPONENT:"".concat("/node","/upload/component/addOrUpdateComponent"),CLOSE_KERBEROS:"".concat("/node","/component/closeKerberos"),GET_VERSION:"".concat("/node","/component/getComponentVersion"),ADD_CLUSTER:"".concat("/node","/component/addOrCheckClusterWithName"),GET_LOADTEMPLATE:"".concat("/node","/component/loadTemplate"),UPLOAD_KERBEROSFILE:"".concat("/node","/upload/component/hadoopKerberosConfig"),GET_KERBEROSFILE:"".concat("/node","/component/getHadoopKerberosFile"),TEST_COMPONENT_CONNECT:"".concat("/node","/component/testConnections"),TEST_COMPONENT_CONNECT_KERBEROS:"".concat("/node","/upload/service/component/testConnections"),ADD_COMPONENT:"".concat("/node","/component/addComponent"),SAVE_COMPONENT_KERBEROS:"".concat("/node","/upload/service/component/updateWithKerberos"),DELETE_KERBEROS:"".concat("/node","/component/rmKerberosConfig"),ADD_ENGINE:"".concat("/node","/engine/addEngine"),ADD_ENGINS:"".concat("/node","/engine/addEngines"),UPDATE_CLUSTER_VERSION:"".concat("/node","/cluster/updateGlobalConfig"),GET_COMPONENTSTORE:"".concat("/node","/component/getComponentStore"),PARSE_KERBEROS:"".concat("/node","/upload/component/parseKerberos"),UPLOAD_KERBEROS:"".concat("/node","/upload/component/uploadKerberos"),UPDATE_KRB5CONF:"".concat("/node","/component/updateKrb5Conf"),GET_DTSCRIPT_AGENT_LABEL:"".concat("/node","/component/getDtScriptAgentLabel"),GET_CLUSTER_COMPONENT_USER:"".concat("/node","/component/getClusterComponentUser"),ADD_OR_UPDATE_COMPONENT_USER:"".concat("/node","/component/addOrUpdateComponentUser"),GET_ALL_CLUSTER:"".concat("/node","/cluster/getAllCluster"),SEARCH_TENANT:"".concat("/node","/tenant/pageQuery"),GET_QUEUE:"".concat("/node","/engine/getQueue"),BIND_TENANT:"".concat("/node","/tenant/bindingTenant"),LDAP_ACCOUNT_BIND:"".concat("/node","/account/bindAccountList"),SWITCH_QUEUE:"".concat("/node","/tenant/bindingQueue"),BIND_NAME_SPACE:"".concat("/node","/tenant/bindNamespace"),GET_TASKLIMITS:"".concat("/node","/tenant/queryTaskResourceLimits"),REFRESH_QUEUE:"".concat("/node","/component/refresh"),TASK_RESOURCE:"".concat("/node","/console/getTaskResourceTemplate"),ACCOUNT_UNBIND_LIST:"".concat("/node","/account/getTenantUnBandList"),ACCOUNT_BIND:"".concat("/node","/account/bindAccount"),UPDATE_ACCOUNT_BIND:"".concat("/node","/account/updateBindAccount"),ACCOUNT_BIND_LIST:"".concat("/node","/account/pageQuery"),ACCOUNT_UNBIND:"".concat("/node","/account/unbindAccount"),GET_FULL_TENANT:"".concat("/uic/api","/v2/account/user/get-full-tenants-by-name?tenantName="),ADD_OR_UPDATE_ALARM:"".concat("/node","/alert/edit"),GET_ALARM_RULE_LIST:"".concat("/node","/alert/page"),DEL_ALARM_RULE_LIST:"".concat("/node","/alert/delete"),GET_ALARM_BY_ID:"".concat("/node","/alert/getByAlertId"),SET_DEFAULT_ALERT:"".concat("/node","/alert/setDefaultAlert"),TEST_ALERT:"".concat("/node","/alert/testAlert"),GET_ALARM_CONFIG:"".concat("/node","/alert/sftp/get"),UPDATE_ALARM_CONFIG:"".concat("/node","/alert/sftp/update"),TEST_ALARM_CONFIG:"".concat("/node","/alert/sftp/testConnect")};t.default=a},Efuq:function(e,t,n){"use strict";n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("LrLD");var o=a(n("Wxie")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),u=n("dtw8"),i=a(n("KQ7z")),c=a(n("zqmc")),s=a(n("HGpX")),d=a(n("Uu3x")),f=a(n("RclC")),p=a(n("6aLI")),m=a(n("XdBI")),E=a(n("+CR5")),v=a(n("ao0w"));function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}var y=l.createElement(u.Route,{path:"/"},l.createElement(u.IndexRedirect,{to:"/console-ui"}),l.createElement(u.Route,{path:"/console-ui",component:i.default},l.createElement(u.IndexRoute,{component:c.default}),l.createElement(u.Route,{path:"queueManage",component:c.default}),l.createElement(u.Route,{path:"queueManage/detail",component:p.default}),l.createElement(u.Route,{path:"resourceManage",component:s.default}),l.createElement(u.Route,{path:"clusterManage",component:d.default}),l.createElement(u.Route,{path:"clusterManage/editCluster",component:f.default}),l.createElement(u.Route,{path:"alarmChannel",component:m.default}),l.createElement(u.Route,{path:"alarmChannel/alarmRule",component:E.default}),l.createElement(u.Route,{path:"alarmChannel/AlarmConfig",component:v.default})),l.createElement(u.Route,{path:"/*",component:o.default}));t.default=y},EgT6:function(e,t,n){},Ej2X:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I");var o=a(n("CC+v")),l=a(n("lwsE")),u=a(n("W8MJ")),i=a(n("PJYZ")),c=a(n("7W2i")),s=a(n("a1gu")),d=a(n("Nsbk")),f=a(n("lSNA")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),m=a(n("kC7r"));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,d.default)(e);if(t){var r=(0,d.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,s.default)(this,n)}}var T=function(e){(0,c.default)(n,e);var t=v(n);function n(){var e;(0,l.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,f.default)((0,i.default)(e),"state",{editor:{sql:"",cursor:void 0,sync:!0}}),e}return(0,u.default)(n,[{key:"render",value:function(){var e=this.props.title;return p.createElement(o.default,{title:e||"任务详情",width:650,onCancel:this.props.onCancel,onOk:this.props.onCancel,visible:this.props.visible},p.createElement(m.default,{style:{height:"400px",marginTop:"1px"},value:this.props.resource,language:"ini",options:{readOnly:!0,minimap:{enabled:!1}},sync:!0}))}}]),n}(p.Component);t.default=T},FZsQ:function(e,t,n){"use strict";n("eoL8"),Object.defineProperty(t,"__esModule",{value:!0}),t.giveMeAKey=function(){return(new Date).getTime()+""+~~(1e5*Math.random())},n("DQNa")},HGpX:function(e,t,n){"use strict";n("SuFq"),n("tkto"),n("pNMO"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("o0o1"));n("ma9I"),n("zKZe"),n("2B1R"),n("TeQF"),n("4l63"),n("wLYn");var l=a(n("N9UN")),u=a(n("DtFj")),i=a(n("9xET")),c=a(n("4IMT")),s=a(n("ZPTe")),d=a(n("QpBz")),f=a(n("yXPU")),p=a(n("lwsE")),m=a(n("W8MJ")),E=a(n("PJYZ")),v=a(n("7W2i")),T=a(n("a1gu")),y=a(n("Nsbk")),O=a(n("lSNA")),h=a(n("iJl9")),N=a(n("j7zX")),g=a(n("FAat")),C=a(n("qu0K")),P=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=M(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),S=n("LvDl"),b=a(n("RHHV")),A=n("RzPm"),R=n("IiER"),_=a(n("s7lY")),I=a(n("UANx")),L=a(n("jRo7")),D=a(n("kYLF"));function M(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(M=function(e){return e?n:t})(e)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){(0,O.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,y.default)(e);if(t){var r=(0,y.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,T.default)(this,n)}}var F=C.default.Item,U=g.default.Option,V=N.default.TabPane,x=h.default.Search,B=function(e){(0,v.default)(n,e);var t=w(n);function n(){var e;(0,p.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,O.default)((0,E.default)(e),"state",{tableData:[],clusterList:[],engineList:[],queryParams:{clusterId:"",engineType:"",tenantName:"",pageSize:20,currentPage:1,clusterName:""},loading:!1,total:0,tenantModal:!1,queueModal:!1,manageModal:!1,tenantInfo:"",isHaveHadoop:!1,isHaveLibra:!1,queueList:[]}),(0,O.default)((0,E.default)(e),"requestEnd",!0),(0,O.default)((0,E.default)(e),"searchTenant",(function(){var t=e.state.queryParams;e.setState({loading:!0}),b.default.searchTenant(t).then((function(t){1===t.code?e.setState({tableData:(0,S.get)(t,"data.data",[]),total:(0,S.get)(t,"data.totalCount",0),loading:!1}):e.setState({loading:!1})}))})),(0,O.default)((0,E.default)(e),"initList",(0,f.default)(o.default.mark((function t(){var n,a,r,l,u;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,b.default.getAllCluster();case 2:1===(n=t.sent).code&&(a=n.data||[],r=a[0]&&a[0].engines||[],l=a[0]||[],u=r[0]||[],e.setState({clusterList:a,queryParams:Object.assign(e.state.queryParams,{clusterId:l.clusterId,engineType:u.engineType}),clusterName:l.clusterName,engineList:r,loading:!0},e.searchTenant));case 4:case"end":return t.stop()}}),t)})))),(0,O.default)((0,E.default)(e),"clusterOptions",(function(){return e.state.clusterList.map((function(e){return P.createElement(U,{key:"".concat(e.clusterId),value:"".concat(e.clusterId)},e.clusterName)}))})),(0,O.default)((0,E.default)(e),"handleChangeCluster",(function(t){var n,a=(n=e.state.clusterList.filter((function(e){return e.clusterId==t})))[0]&&n[0].engines||[],r=Object.assign(e.state.queryParams,{clusterId:t,engineType:a[0]&&a[0].engineType,tenantName:"",pageSize:20,currentPage:1});e.setState({engineList:a,queryParams:r,clusterName:n[0].clusterName},e.searchTenant)})),(0,O.default)((0,E.default)(e),"changeTenantName",(function(t){var n=Object.assign(e.state.queryParams,{tenantName:t});e.setState({queryParams:n},e.searchTenant)})),(0,O.default)((0,E.default)(e),"onPageChange",(function(t){var n=Object.assign(e.state.queryParams,{currentPage:t});e.setState({queryParams:n},e.searchTenant)})),(0,O.default)((0,E.default)(e),"handleEngineTab",(function(t){var n=Object.assign(e.state.queryParams,{engineType:t,tenantName:"",currentPage:1});e.setState({queryParams:n},e.searchTenant)})),(0,O.default)((0,E.default)(e),"clickSwitchQueue",(function(t){e.setState({manageModal:!0,tenantInfo:t})})),(0,O.default)((0,E.default)(e),"clickSwitchNamespace",(function(t){e.setState({queueModal:!0,tenantInfo:t})})),(0,O.default)((0,E.default)(e),"initHadoopColumns",(function(){return[{title:"租户",dataIndex:"tenantName",render:function(e,t){return e}},{title:"资源队列",dataIndex:"queue",render:function(e,t){return e}},{title:"最小容量（%）",dataIndex:"minCapacity",render:function(e,t){return e}},{title:"最大容量（%）",dataIndex:"maxCapacity",render:function(e,t){return e}},{title:"操作",dataIndex:"deal",render:function(t,n){return P.createElement("a",{onClick:function(){e.clickSwitchQueue(n)}},"资源管理")}}]})),(0,O.default)((0,E.default)(e),"initKubernetesColumns",(function(){return[{title:"租户",dataIndex:"tenantName"},{title:"Namespace",dataIndex:"queue"},{title:"操作",dataIndex:"action",width:200,render:function(t,n){return P.createElement("a",{onClick:function(){e.clickSwitchNamespace(n)}},"切换Namespace")}}]})),(0,O.default)((0,E.default)(e),"initDefaultColumns",(function(){return[{title:"租户",dataIndex:"tenantName",render:function(e,t){return e}}]})),(0,O.default)((0,E.default)(e),"getColumn",(function(t,n){var a=e.initHadoopColumns();return t||(a=e.initDefaultColumns()),t&&(0,R.isKubernetesEngine)(n)&&(a=e.initKubernetesColumns()),a})),e}return(0,m.default)(n,[{key:"componentDidMount",value:function(){this.initList()}},{key:"bindTenant",value:function(e){var t=this,n=e.canSubmit,a=e.reqParams;n&&this.requestEnd&&(this.requestEnd=!1,b.default.bindTenant(j({},a)).then((function(e){1===e.code&&(t.setState({tenantModal:!1}),d.default.success("租户绑定成功"),t.searchTenant()),t.requestEnd=!0})))}},{key:"switchQueue",value:function(e){var t=this,n=e.reqParams;e.hasKubernetes?b.default.bindNamespace({clusterId:n.clusterId,namespace:n.namespace,queueId:n.queueId,tenantId:n.tenantId}).then((function(e){1===e.code&&(t.setState({queueModal:!1}),d.default.success("切换队列成功"),t.searchTenant())})):b.default.switchQueue(j({},n)).then((function(e){1===e.code&&(t.setState({queueModal:!1}),d.default.success("切换队列成功"),t.searchTenant())}))}},{key:"sourceManage",value:function(e){var t=this;this.setState({manageModal:!1,tenantInfo:""},(function(){return t.initList()}))}},{key:"showTenant",value:function(){this.setState({tenantModal:!0})}},{key:"render",value:function(){var e,t=this,n=this.state,a=n.tableData,r=n.queryParams,o=n.total,d=n.loading,f=n.engineList,p=n.clusterList,m=n.tenantModal,E=n.queueModal,v=n.modalKey,T=n.clusterName,y=n.tenantInfo,O=n.manageModal,h=(0,R.isKubernetesEngine)(f[0]&&f[0].resourceType),S={total:o,current:r.currentPage,pageSize:20,size:"small",showTotal:function(e){return P.createElement("span",null,"共",P.createElement("span",{style:{color:"#3F87FF"}},e),"条数据，每页显示",20,"条")},onChange:this.onPageChange};return P.createElement("div",{className:"resource-wrapper"},P.createElement(i.default,null,P.createElement(s.default,{span:12},P.createElement(C.default,{className:"m-form-inline",layout:"inline"},P.createElement(F,{label:"集群"},P.createElement(g.default,{className:"dt-form-shadow-bg",style:{width:"264px"},placeholder:"请选择集群",value:"".concat(r.clusterId),onChange:this.handleChangeCluster},this.clusterOptions())))),P.createElement(s.default,{span:12},P.createElement(c.default,{className:"terent-button",type:"primary",onClick:function(){t.setState({tenantModal:!0})}},"绑定新租户"))),P.createElement("div",{className:"resource-content"},P.createElement(l.default,{className:"console-tabs resource-tab-width",bordered:!1},P.createElement(N.default,{tabPosition:"left",defaultActiveKey:"".concat(f[0]&&f[0].engineType),onChange:this.handleEngineTab,activeKey:"".concat(r.engineType),forceRender:!0},f&&f.map((function(e){var n=e.engineType,o=e.resourceType,l=(0,R.isHadoopEngine)(n),i=l&&(0,R.isKubernetesEngine)(o)?"Kubernetes":A.ENGIN_TYPE_TEXT[n];return P.createElement(V,{className:"tab-pane-wrapper",tab:i,key:"".concat(n)},P.createElement(N.default,{key:"".concat(n,"-tenant"),className:"engine-detail-tabs",tabPosition:"top",animated:!1},(0,R.isHadoopEngine)(n)?P.createElement(V,{tab:"资源全景",key:"showResource"},P.createElement(L.default,{key:"".concat(T),clusterName:T})):null,P.createElement(V,{tab:"租户绑定",key:"bindTenant"},P.createElement("div",{style:{padding:20}},P.createElement(x,{style:{width:"200px",marginBottom:"20px"},placeholder:"按租户名称搜索",value:r.tenantName,onChange:function(e){t.setState({queryParams:Object.assign(t.state.queryParams,{tenantName:e.target.value})})},onSearch:t.changeTenantName}),P.createElement(u.default,{className:"dt-table-border dt-table-fixed-base",loading:d,rowKey:function(e,t){return"".concat(t,"-").concat(e.tenantName)},style:{height:"calc(100vh - 230px)",boxShadow:"unset"},scroll:{y:!0},columns:t.getColumn(l,o),dataSource:a,pagination:S}))),(0,R.isBindAccount)(n)?P.createElement(V,{tab:"账号绑定",key:"bindAccount"},P.createElement(D.default,{key:"".concat(r.clusterId,"-").concat(n),engineType:parseInt(n,10),clusterId:r.clusterId})):null))}))))),P.createElement(_.default,{title:"绑定新租户",visible:m,clusterList:p,isBindTenant:!0,onCancel:function(){t.setState({tenantModal:!1})},onOk:this.bindTenant.bind(this)}),P.createElement(_.default,{key:v,title:h?"切换namespace":"切换队列",visible:E,isBindTenant:!1,isBindNamespace:h,clusterList:p,tenantInfo:this.state.tenantInfo,clusterId:r.clusterId,disabled:!0,onCancel:function(){t.setState({queueModal:!1,tenantInfo:""})},onOk:this.switchQueue.bind(this)}),P.createElement(I.default,{title:"资源管理 (".concat(null!==(e=y.tenantName)&&void 0!==e?e:"",")"),visible:O,isBindTenant:!1,clusterList:p,tenantInfo:this.state.tenantInfo,clusterId:r.clusterId,disabled:!0,tenantId:null==y?void 0:y.tenantId,queue:null==y?void 0:y.queue,queueId:null==y?void 0:y.queueId,onCancel:function(){t.setState({manageModal:!1,tenantInfo:""})},onOk:this.sourceManage.bind(this)}))}}]),n}(P.Component);t.default=B},Hc45:function(e,t,n){"use strict";n("SuFq"),n("PKPk"),n("ENF9"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I"),n("2B1R"),n("4mDm"),n("07d7"),n("3bBZ"),n("rB9j"),n("EnZy"),n("oVuX"),n("yq1k"),n("JTJg"),n("T63A");var o=a(n("9xET")),l=a(n("ZPTe")),u=a(n("J4zp")),i=a(n("pVnL")),c=a(n("d1El")),s=a(n("iJl9")),d=a(n("lwsE")),f=a(n("W8MJ")),p=a(n("PJYZ")),m=a(n("7W2i")),E=a(n("a1gu")),v=a(n("Nsbk")),T=a(n("lSNA")),y=a(n("g4D/")),O=a(n("FAat")),h=a(n("qPIi")),N=a(n("qu0K")),g=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=_(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),C=n("LvDl"),P=n("j1Tt"),S=n("LNB4"),b=n("RzPm"),A=a(n("pXCp")),R=a(n("Ziym"));function _(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(_=function(e){return e?n:t})(e)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,v.default)(e);if(t){var r=(0,v.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,E.default)(this,n)}}var L=N.default.Item,D=h.default.Group,M=O.default.Option,k=y.default.Group,j=function(e){(0,m.default)(n,e);var t=I(n);function n(){var e;(0,d.default)(this,n);for(var a=arguments.length,r=new Array(a),f=0;f<a;f++)r[f]=arguments[f];return e=t.call.apply(t,[this].concat(r)),(0,T.default)((0,p.default)(e),"renderOptoinsType",(function(t){var n=e.props.view;switch(t.type){case P.CONFIG_ITEM_TYPE.RADIO:case P.CONFIG_ITEM_TYPE.RADIO_LINKAGE:return g.createElement(D,{disabled:n},t.values.map((function(e){return g.createElement(h.default,{key:e.key,value:e.value},e.key)})));case P.CONFIG_ITEM_TYPE.SELECT:return g.createElement(O.default,{disabled:n,style:{width:200}},t.values.map((function(e){return g.createElement(M,{key:e.key,value:e.value},e.key)})));case P.CONFIG_ITEM_TYPE.CHECKBOX:return g.createElement(k,{disabled:n,className:"c-componentConfig__checkboxGroup"},t.values.map((function(e){return g.createElement(y.default,{key:e.key,value:"".concat(e.value)},e.key)})));case P.CONFIG_ITEM_TYPE.PASSWORD:return g.createElement(s.default.Password,{disabled:n,style:{maxWidth:680},visibilityToggle:!1});default:return g.createElement(s.default,{disabled:n,style:{maxWidth:680}})}})),(0,T.default)((0,p.default)(e),"renderConfigItem",(function(t,n){var a,r,o=e.props,l=o.form,u=o.comp,s=o.itemLayout,d=o.clusterInfo,f=o.view,p=null!==(a=null==u?void 0:u.componentTypeCode)&&void 0!==a?a:"",m=null!==(r=null==u?void 0:u.hadoopVersion)&&void 0!==r?r:"",E=null!=s?s:b.formItemLayout,v="deploymode"!==t.key||(0,C.isArray)(t.value)?t.value:t.value.split(),T=p;(0,S.isMultiVersion)(p)&&(T=T+"."+m);var y=n?"".concat(T,".componentConfig.").concat(n):"".concat(T,".componentConfig");return!(0,S.isCustomType)(t.type)&&g.createElement(L,(0,i.default)({label:g.createElement(c.default,{title:t.key},g.createElement("span",{className:"c-formConfig__label"},t.key)),key:t.key},E),l.getFieldDecorator("".concat(y,".").concat(t.key.split(".").join("%")),{rules:[{required:t.required,message:"请输入".concat(t.key)}],initialValue:v})(e.renderOptoinsType(t)),(0,S.isDtscriptAgent)(p)&&g.createElement(R.default,{form:l,view:f,clusterInfo:d}))})),(0,T.default)((0,p.default)(e),"renderGroupConfigItem",(function(t,n){var a,r,o=e.props,l=o.form,u=o.comp,i=o.view,c=null!==(a=null==u?void 0:u.componentTypeCode)&&void 0!==a?a:"",s=null!==(r=null==u?void 0:u.hadoopVersion)&&void 0!==r?r:"",d=c;if((0,S.isMultiVersion)(c)&&(d=d+"."+s),((null==t?void 0:t.dependencyKey)?l.getFieldValue(d+".componentConfig."+(null==t?void 0:t.dependencyKey)):[]).includes(null==t?void 0:t.dependencyValue)||!(null==t?void 0:t.dependencyValue))return n?t.values.map((function(t){return e.renderConfigItem(t)})):g.createElement("div",{className:"c-formConfig__group",key:t.key},g.createElement("div",{className:"group__title"},t.key),g.createElement("div",{className:"group__content"},t.values.map((function(n){return e.renderConfigItem(n,t.key)})),g.createElement(A.default,{typeCode:c,hadoopVersion:s,form:l,view:i,template:t,maxWidth:680})))})),(0,T.default)((0,p.default)(e),"rendeConfigForm",(function(){var t,n,a,r=e.props,o=r.comp,l=r.form,u=r.view,i=r.itemLayout,c=null!==(t=null==o?void 0:o.componentTypeCode)&&void 0!==t?t:"",s=null!==(n=null==o?void 0:o.hadoopVersion)&&void 0!==n?n:"",d=null!==(a=(0,S.getValueByJson)(null==o?void 0:o.componentTemplate))&&void 0!==a?a:[];return d.map((function(t,n){return(0,S.isDeployMode)(t.key)||(0,S.isRadioLinkage)(t.type)?g.createElement(g.Fragment,null,e.renderConfigItem(t),t.values.map((function(n){return e.renderGroupConfigItem(n,(0,S.isRadioLinkage)(t.type))}))):t.type==P.CONFIG_ITEM_TYPE.GROUP?e.renderGroupConfigItem(t):g.createElement(g.Fragment,null,e.renderConfigItem(t),n===d.length-1?g.createElement(A.default,{typeCode:c,hadoopVersion:s,form:l,view:u,template:d,maxWidth:680,labelCol:null==i||null===(a=i.labelCol)||void 0===a||null===(r=a.sm)||void 0===r?void 0:r.span,wrapperCol:null==i||null===(o=i.wrapperCol)||void 0===o||null===(f=o.sm)||void 0===f?void 0:f.span}):null);var a,r,o,f}))})),(0,T.default)((0,p.default)(e),"renderKubernetsConfig",(function(){var t,n,a,r=e.props,o=r.comp,l=r.form,u=null!==(t=null==o?void 0:o.componentTypeCode)&&void 0!==t?t:"",i=null!==(n=null!==(a=l.getFieldValue(u+".specialConfig"))&&void 0!==a?a:null==o?void 0:o.componentConfig)&&void 0!==n?n:"";return g.createElement(g.Fragment,null,i?g.createElement("div",{className:"c-formConfig__kubernetsContent"},"配置文件参数已被加密，此处不予显示"):null,l.getFieldDecorator("".concat(u,".specialConfig"),{initialValue:i||{}})(g.createElement(g.Fragment,null)))})),(0,T.default)((0,p.default)(e),"renderYarnOrHdfsConfig",(function(){var t,n,a,r,i=e.props,s=i.comp,d=i.view,f=i.form,p=null!==(t=null==s?void 0:s.componentTypeCode)&&void 0!==t?t:"",m=null!==(n=(0,S.getValueByJson)(null==s?void 0:s.componentTemplate))&&void 0!==n?n:[],E=null!==(a=(0,S.getValueByJson)(null==s?void 0:s.componentConfig))&&void 0!==a?a:{},v=null!==(r=f.getFieldValue("".concat(p,".specialConfig")))&&void 0!==r?r:E,T=Object.entries(v);return g.createElement(g.Fragment,null,T.map((function(e){var t=(0,u.default)(e,2),n=t[0],a=t[1];return g.createElement(o.default,{key:n,className:"zipConfig-item"},g.createElement(l.default,{className:"formitem-textname",span:b.formItemLayout.labelCol.sm.span+2},g.createElement(c.default,{title:n,placement:"topRight"},g.createElement("span",{className:"form-text-name"},n)),g.createElement("span",null,"：")),g.createElement(l.default,{className:"formitem-textvalue",span:b.formItemLayout.wrapperCol.sm.span+1},"".concat(a)))})),f.getFieldDecorator("".concat(p,".specialConfig"),{initialValue:v||{}})(g.createElement("span",{style:{display:"none"}})),g.createElement(A.default,{key:String(m.length),typeCode:p,form:f,comp:s,view:d,template:m,labelCol:b.formItemLayout.labelCol.sm.span+2,wrapperCol:b.formItemLayout.wrapperCol.sm.span-3}))})),(0,T.default)((0,p.default)(e),"renderComponentsConfig",(function(){var t,n=e.props.comp;switch(null!==(t=null==n?void 0:n.componentTypeCode)&&void 0!==t?t:""){case P.COMPONENT_TYPE_VALUE.YARN:case P.COMPONENT_TYPE_VALUE.HDFS:return e.renderYarnOrHdfsConfig();case P.COMPONENT_TYPE_VALUE.KUBERNETES:return e.renderKubernetsConfig();case P.COMPONENT_TYPE_VALUE.SFTP:case P.COMPONENT_TYPE_VALUE.TIDB_SQL:case P.COMPONENT_TYPE_VALUE.LIBRA_SQL:case P.COMPONENT_TYPE_VALUE.ORACLE_SQL:case P.COMPONENT_TYPE_VALUE.IMPALA_SQL:case P.COMPONENT_TYPE_VALUE.GREEN_PLUM_SQL:case P.COMPONENT_TYPE_VALUE.PRESTO_SQL:case P.COMPONENT_TYPE_VALUE.FLINK:case P.COMPONENT_TYPE_VALUE.SPARK:case P.COMPONENT_TYPE_VALUE.DTYARNSHELL:case P.COMPONENT_TYPE_VALUE.LEARNING:case P.COMPONENT_TYPE_VALUE.SPARK_THRIFT_SERVER:case P.COMPONENT_TYPE_VALUE.NFS:case P.COMPONENT_TYPE_VALUE.HIVE_SERVER:case P.COMPONENT_TYPE_VALUE.DTSCRIPT_AGENT:case P.COMPONENT_TYPE_VALUE.INCEPTOR_SQL:case P.COMPONENT_TYPE_VALUE.ANALYTIC_DB:case P.COMPONENT_TYPE_VALUE.FLINK_ON_STANDALONE:return e.rendeConfigForm();default:return null}})),e}return(0,f.default)(n,[{key:"render",value:function(){var e,t,n=null!==(e=null===(t=this.props.comp)||void 0===t?void 0:t.componentTypeCode)&&void 0!==e?e:"",a="c-formConfig__container "+((0,S.isDtscriptAgent)(n)?"c-formConfig__full":"");return g.createElement("div",{className:a},this.renderComponentsConfig())}}]),n}(g.PureComponent);t.default=j},IdH2:function(e,t,n){"use strict";n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.testStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.DEFAULT_COMP_TEST,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.UPDATE_TEST_RESULT:var n=t.data;return Object.assign({},e,n);default:return e}},t.showRequireStatus=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.DEFAULT_COMP_REQUIRED,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case l.UPDATE_REQUIRED_STATUS:var n=t.data;return Object.assign({},e,n);default:return e}},t.updateRequiredStatus=t.updateTestStatus=void 0,n("zKZe");var r=a(n("zbcj")),o=n("RzPm"),l=(0,r.default)(["UPDATE_TEST_RESULT","UPDATE_REQUIRED_STATUS"]);t.updateTestStatus=function(e){return{type:l.UPDATE_TEST_RESULT,data:e}};t.updateRequiredStatus=function(e){return{type:l.UPDATE_REQUIRED_STATUS,data:e}}},IiER:function(e,t,n){"use strict";n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.validateCompParams=l,t.exChangeComponentConf=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],u=e.concat(t,n,a,l),i={};return u.map((function(e){var t=e&&e.componentTypeCode;i=Object.assign(i,(0,r.default)({},o.COMPONEMT_CONFIG_KEY_ENUM[t],e.config))})),i},t.showTestResult=function(e,t){var n={},a=u(t);return e&&e.map((function(e){switch(e.componentTypeCode){case o.COMPONENT_TYPE_VALUE.FLINK:n=Object.assign(n,{flinkTestResult:a?e:{}});break;case o.COMPONENT_TYPE_VALUE.SPARK_THRIFT_SERVER:n=Object.assign(n,{sparkThriftTestResult:a?e:{}});break;case o.COMPONENT_TYPE_VALUE.CARBONDATA:n=Object.assign(n,{carbonTestResult:a?e:{}});break;case o.COMPONENT_TYPE_VALUE.IMPALA_SQL:n=Object.assign(n,{impalaSqlTestResult:a?e:{}});break;case o.COMPONENT_TYPE_VALUE.SPARK:n=Object.assign(n,{sparkTestResult:a?e:{}});break;case o.COMPONENT_TYPE_VALUE.DTYARNSHELL:n=Object.assign(n,{dtYarnShellTestResult:a?e:{}});break;case o.COMPONENT_TYPE_VALUE.LEARNING:n=Object.assign(n,{learningTestResult:a?e:{}});break;case o.COMPONENT_TYPE_VALUE.HDFS:n=Object.assign(n,{hdfsTestResult:a?e:{}});break;case o.COMPONENT_TYPE_VALUE.YARN:n=Object.assign(n,{yarnTestResult:a?e:{}});break;case o.COMPONENT_TYPE_VALUE.HIVE_SERVER:n=Object.assign(n,{hiveServerTestResult:a?e:{}});break;case o.COMPONENT_TYPE_VALUE.LIBRA_SQL:n=Object.assign(n,{libraSqlTestResult:a?{}:e});break;case o.COMPONENT_TYPE_VALUE.TIDB_SQL:n=Object.assign(n,{tidbSqlTestResult:a?{}:e});break;case o.COMPONENT_TYPE_VALUE.ORACLE_SQL:n=Object.assign(n,{oracleSqlTestResult:a?{}:e});break;case o.COMPONENT_TYPE_VALUE.SFTP:n=Object.assign(n,{sftpTestResult:a?e:{}});break;default:n=Object.assign(n,{})}})),n},t.validateAllRequired=function(e,t){var n={};return t&&t.map((function(t){e(l(t.componentTypeCode),{force:!0,scroll:{offsetBottom:150}},(function(e,a){t.componentTypeCode==o.COMPONENT_TYPE_VALUE.FLINK?n=e?Object.assign(n,{flinkShowRequired:!0}):Object.assign(n,{flinkShowRequired:!1}):t.componentTypeCode===o.COMPONENT_TYPE_VALUE.SPARK_THRIFT_SERVER?n=e?Object.assign(n,{hiveShowRequired:!0}):Object.assign(n,{hiveShowRequired:!1}):t.componentTypeCode===o.COMPONENT_TYPE_VALUE.CARBONDATA?n=e?Object.assign(n,{carbonShowRequired:!0}):Object.assign(n,{carbonShowRequired:!1}):t.componentTypeCode===o.COMPONENT_TYPE_VALUE.IMPALA_SQL?n=e?Object.assign(n,{impalaSqlRequired:!0}):Object.assign(n,{impalaSqlRequired:!1}):t.componentTypeCode===o.COMPONENT_TYPE_VALUE.HIVE_SERVER?n=e?Object.assign(n,{hiveServerShowRequired:!0}):Object.assign(n,{hiveServerShowRequired:!1}):t.componentTypeCode===o.COMPONENT_TYPE_VALUE.SPARK?n=e?Object.assign(n,{sparkShowRequired:!0}):Object.assign(n,{sparkShowRequired:!1}):t.componentTypeCode===o.COMPONENT_TYPE_VALUE.DTYARNSHELL?n=e?Object.assign(n,{dtYarnShellShowRequired:!0}):Object.assign(n,{dtYarnShellShowRequired:!1}):t.componentTypeCode===o.COMPONENT_TYPE_VALUE.LEARNING?n=e?Object.assign(n,{learningShowRequired:!0}):Object.assign(n,{learningShowRequired:!1}):t.componentTypeCode===o.COMPONENT_TYPE_VALUE.HDFS?n=e?Object.assign(n,{hdfsShowRequired:!0}):Object.assign(n,{hdfsShowRequired:!1}):t.componentTypeCode===o.COMPONENT_TYPE_VALUE.YARN?n=e?Object.assign(n,{yarnShowRequired:!0}):Object.assign(n,{yarnShowRequired:!1}):t.componentTypeCode===o.COMPONENT_TYPE_VALUE.LIBRA_SQL?n=e?Object.assign(n,{libraShowRequired:!0}):Object.assign(n,{libraShowRequired:!1}):t.componentTypeCode===o.COMPONENT_TYPE_VALUE.SFTP&&(n=e?Object.assign(n,{sftpShowRequired:!0}):Object.assign(n,{sftpShowRequired:!1}))}))})),n},t.displayTaskStatus=function(e){switch(e){case o.TASK_STATE.UNSUBMIT:return"UNSUBMIT";case o.TASK_STATE.CREATED:return"CREATED";case o.TASK_STATE.SCHEDULED:return"SCHEDULED";case o.TASK_STATE.DEPLOYING:return"DEPLOYING";case o.TASK_STATE.RUNNING:return"RUNNING";case o.TASK_STATE.FINISHED:return"FINISHED";case o.TASK_STATE.CANCELLING:return"CANCELLING";case o.TASK_STATE.CANCELED:return"CANCELED";case o.TASK_STATE.FAILED:return"FAILED";case o.TASK_STATE.SUBMITFAILD:return"SUBMITFAILD";case o.TASK_STATE.SUBMITTING:return"SUBMITTING";case o.TASK_STATE.RESTARTING:return"RESTARTING";case o.TASK_STATE.MANUALSUCCESS:return"MANUALSUCCESS";case o.TASK_STATE.KILLED:return"KILLED";case o.TASK_STATE.SUBMITTED:return"SUBMITTED";case o.TASK_STATE.NOTFOUND:return"NOTFOUND";case o.TASK_STATE.WAITENGINE:return"WAITENGINE";case o.TASK_STATE.WAITCOMPUTE:return"WAITCOMPUTE";case o.TASK_STATE.FROZEN:return"FROZEN";case o.TASK_STATE.ENGINEACCEPTED:return"ENGINEACCEPTED";case o.TASK_STATE.ENGINEDISTRIBUTE:return"ENGINEDISTRIBUTE";case o.TASK_STATE.COMPUTING:return"COMPUTING";case o.TASK_STATE.PARENTFAILED:return"PARENTFAILED";case o.TASK_STATE.FAILING:return"FAILING";case o.TASK_STATE.EXPIRE:return"EXPIRE";default:return null}},t.myUpperCase=function(e){var t={},n=[],a=[],r=[];for(var o in e)e.hasOwnProperty(o)&&(n.push(o),a.push(e[o]));n.forEach((function(e,t){for(var n=e.split("."),a=n[0],o=1;o<n.length;o++){var l=n[o].split(""),u=l.shift();u=u.toUpperCase(),l.unshift(u),a+=l.join("")}r[t]=a}));for(var l=0;l<a.length;l++)t[r[l]]=a[l];return t},t.myLowerCase=function(e){var t={};for(var n in e){var a="openKerberos"===n||"kerberosFile"===n;if(e.hasOwnProperty(n)&&!a){var r=void 0;r=n.split("");for(var o=0;o<r.length;o++)"."==r[o]?(r.splice(o,1),r[o]=r[o].toUpperCase()):-1!="QWERTYUIOPLKJHGFDSAZXCVBNM".indexOf(r[o])&&(r[o]=r[o].toLowerCase(),r.splice(o,0,"."),o++);var l=r.join("");t[l]=e[n]}else t[n]=e[n]}return t},t.toChsKeys=function(e,t){return Object.keys(e).reduce((function(n,a){return n[t[a]||a]=e[a],n}),{})},t.isHadoopEngine=u,t.isLibraEngine=function(e){return e==o.ENGINE_TYPE.LIBRA},t.isTiDBEngine=function(e){return e==o.ENGINE_TYPE.TI_DB},t.isOracleEngine=function(e){return e==o.ENGINE_TYPE.ORACLE},t.isGreenPlumEngine=function(e){return e==o.ENGINE_TYPE.GREEN_PLUM},t.isKubernetesEngine=function(e){return e==o.RESOURCE_TYPE.KUBERNETES},t.isBindAccount=function(e){return[o.ENGINE_TYPE.TI_DB,o.ENGINE_TYPE.ORACLE,o.ENGINE_TYPE.GREEN_PLUM,o.ENGINE_TYPE.ANALYTIC_DB].indexOf(e)>-1};var r=a(n("lSNA"));n("ma9I"),n("2B1R"),n("zKZe"),n("QWBl"),n("rB9j"),n("EnZy"),n("oVuX"),n("pDQq"),n("E9XD"),n("tkto"),n("yXV3");var o=n("RzPm");function l(e){switch(e){case o.COMPONENT_TYPE_VALUE.FLINK:return o.validateFlinkParams;case o.COMPONENT_TYPE_VALUE.SPARK_THRIFT_SERVER:return o.validateHiveParams;case o.COMPONENT_TYPE_VALUE.CARBONDATA:return o.validateCarbonDataParams;case o.COMPONENT_TYPE_VALUE.IMPALA_SQL:return o.validateImpalaSqlParams;case o.COMPONENT_TYPE_VALUE.SPARK:return o.validateSparkParams;case o.COMPONENT_TYPE_VALUE.DTYARNSHELL:return o.validateDtYarnShellParams;case o.COMPONENT_TYPE_VALUE.LEARNING:return o.validateLearningParams;case o.COMPONENT_TYPE_VALUE.HIVE_SERVER:return o.validateHiveServerParams;case o.COMPONENT_TYPE_VALUE.HDFS:case o.COMPONENT_TYPE_VALUE.YARN:return[];case o.COMPONENT_TYPE_VALUE.LIBRA_SQL:return o.validateLibraParams;case o.COMPONENT_TYPE_VALUE.SFTP:return o.validateSftpDataParams;default:return null}}function u(e){return e==o.ENGINE_TYPE.HADOOP}},JtgN:function(e,t,n){"use strict";n("SuFq"),n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("yXV3"),n("rB9j"),n("UxlC");var o=a(n("lwsE")),l=a(n("W8MJ")),u=a(n("PJYZ")),i=a(n("7W2i")),c=a(n("a1gu")),s=a(n("Nsbk")),d=a(n("lSNA")),f=v(n("q1tI")),p=n("LvDl"),m=v(n("ProS"));function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}function v(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){(0,d.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}n("Ynxi"),n("AH3D"),n("zRKj"),n("0o9m"),n("75ce"),n("lLGD"),n("wDdD"),n("B+YJ");var h=function(e){(0,i.default)(n,e);var t=O(n);function n(e){var a;return(0,o.default)(this,n),a=t.call(this,e),(0,d.default)((0,u.default)(a),"chart",null),(0,d.default)((0,u.default)(a),"styleFormat",(function(e){return"string"==typeof e?e.indexOf("%")>-1?e:e.replace(/[px]/gi,"")+"px":e+"px"})),a.state={myChart:null},a}return(0,l.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.option,t=m.init(this.chart);t.setOption(e),this.setState({myChart:t})}},{key:"componentWillUnmount",value:function(){this.state.myChart.dispose()}},{key:"componentDidUpdate",value:function(e){var t=this.props.option;(0,p.isEqual)(e.option,t)||this.state.myChart.setOption(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.width,a=t.height,r=y(y({},t.style),{},{width:n?this.styleFormat(n):"100%",height:a?this.styleFormat(a):"300px"});return f.createElement("div",{ref:function(t){return e.chart=t},style:r})}}]),n}(f.PureComponent);t.default=h},"K4z+":function(e,t,n){"use strict";n("SuFq"),n("tkto"),n("pNMO"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I"),n("TeQF"),n("x0AG"),n("2B1R"),n("fbCW");var o=a(n("CC+v")),l=a(n("qu0K")),u=a(n("pVnL")),i=a(n("DtFj")),c=a(n("ATwu")),s=a(n("Pbn2")),d=a(n("iJl9")),f=a(n("RIqP")),p=a(n("lwsE")),m=a(n("W8MJ")),E=a(n("PJYZ")),v=a(n("7W2i")),T=a(n("a1gu")),y=a(n("Nsbk")),O=a(n("lSNA")),h=a(n("FAat")),N=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=S(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),g=n("RzPm"),C=n("FZsQ"),P=n("LvDl");function S(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(S=function(e){return e?n:t})(e)}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){(0,O.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,y.default)(e);if(t){var r=(0,y.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,T.default)(this,n)}}var _=h.default.Option,I=function(e){(0,v.default)(n,e);var t=R(n);function n(e){var a;return(0,p.default)(this,n),a=t.call(this,e),(0,O.default)((0,E.default)(a),"addTableData",(function(){a.setState((function(e){return{tableData:[].concat((0,f.default)(e.tableData),[{id:(0,C.giveMeAKey)()}])}}))})),(0,O.default)((0,E.default)(a),"deleteTableData",(function(e){var t=a.state.tableData,n=(0,P.cloneDeep)(t);n=n.filter((function(t){return t.id!==e.id})),a.setState({tableData:n})})),(0,O.default)((0,E.default)(a),"handleValueChange",(function(e,t,n){var r=a.state.tableData,o=(0,P.cloneDeep)(r),l=o.findIndex((function(e){return e.id==n.id}));l>-1&&(o[l][e]=t),a.setState({tableData:o})})),(0,O.default)((0,E.default)(a),"onCancel",(function(e){a.props.onCancel(e)})),(0,O.default)((0,E.default)(a),"onSubmit",(function(){var e=a.props,t=e.form,n=e.data,r=e.userList,o=e.onOk;if(null!=n)t.validateFields((function(e,t){if(!e){t.id=(0,P.get)(n,"id",""),t.bindUserId="";var a=r.find((function(e){return e.userId==t.bindUserId}));a&&(t.username=a.userName,t.email=a.userName,t.bindUserId=a.bindUserId),o(t)}}));else{var l=a.state.tableData.map((function(e){var t=r.find((function(t){return t.userId==e.bindUserId}));return A(A({},e),{},{password:"",username:null==t?void 0:t.userName,emali:null==t?void 0:t.userName})}));o(l)}})),(0,O.default)((0,E.default)(a),"initColumns",(function(){var e=a.props.userList;return[{title:"产品账号",dataIndex:"bindUserId",render:function(t,n){return N.createElement(h.default,{defaultValue:t,style:{width:160},onChange:function(e){return a.handleValueChange("bindUserId",e,n)}},e.map((function(e){return N.createElement(_,{key:"".concat(e.userId),value:e.userId},e.userName)})))}},{title:"LDAP账号",dataIndex:"name",render:function(e,t){return N.createElement(d.default,{onChange:function(e){return a.handleValueChange("name",e.target.value,t)},style:{width:160},value:e})}},{title:null,dataIndex:"action",width:40,render:function(e,t){return N.createElement(s.default,{type:"delete",onClick:function(){return a.deleteTableData(t)}})}}]})),a.state={tableData:[{id:(0,C.giveMeAKey)()}]},a}return(0,m.default)(n,[{key:"render",value:function(){var e=this.state.tableData,t=this.props,n=t.title,a=t.visible,r=t.data,f=this.props.form.getFieldDecorator;return N.createElement(o.default,{className:"no-padding-modal",closable:!0,title:n,visible:a,onCancel:this.onCancel,onOk:this.onSubmit},N.createElement(c.default,{style:{border:0},message:"产品账号绑定LDAP账号后任务提交至Yarn上将对接用户",type:"info",showIcon:!0}),N.createElement("div",{style:{padding:"12px 20px"}},r?N.createElement(N.Fragment,null,N.createElement(l.default,null,N.createElement(l.default.Item,(0,u.default)({key:"bindUserId",label:"产品账号"},g.formItemLayout),f("bindUserId",{rules:[{required:!0,message:"产品账号不可为空！"}],initialValue:(0,P.get)(r,"username","")})(N.createElement(d.default,{disabled:!0}))),N.createElement(l.default.Item,(0,u.default)({key:"bindLdapAccount",label:"LDAP账号"},g.formItemLayout),f("name",{rules:[{required:!0,message:"LDAP账号不可为空！"}],initialValue:(0,P.get)(r,"name","")})(N.createElement(d.default,null))))):N.createElement(N.Fragment,null,N.createElement(i.default,{className:"c-ldap__bindModal",columns:this.initColumns(),dataSource:e,pagination:!1}),e.length>20?N.createElement("a",{style:{color:"#BFBFBF"}},N.createElement(s.default,{type:"plus"}),"新增"):N.createElement("a",{style:{color:"#3F87FF"},onClick:this.addTableData},N.createElement(s.default,{type:"plus"}),"新增"))))}}]),n}(N.Component),L=l.default.create()(I);t.default=L},K7yS:function(e,t,n){"use strict";n("eoL8"),Object.defineProperty(t,"__esModule",{value:!0}),t.jsonEditorOptions=t.propEditorOptions=t.defaultEditorOptions=void 0;var a={mode:"text/x-sql",lint:!0,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,autofocus:!1,lineWrapping:!0,readOnly:void 0};t.defaultEditorOptions=a;t.propEditorOptions={mode:"text/x-properties",lint:!0,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,autofocus:!1};t.jsonEditorOptions={mode:"application/json",lint:!0,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,autofocus:!1,matchBrackets:!0}},KMNV:function(e,t,n){"use strict";n("eoL8"),Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"registeCompleteItemsProvider",{enumerable:!0,get:function(){return r.registeCompleteItemsProvider}}),Object.defineProperty(t,"disposeProvider",{enumerable:!0,get:function(){return r.disposeProvider}}),Object.defineProperty(t,"onChange",{enumerable:!0,get:function(){return r.onChange}}),n("4mDm"),n("07d7"),n("5s+n"),n("PKPk"),n("3bBZ");var a=n("+hIS"),r=n("k0Eq"),o="undefined"==typeof monaco?self.monaco:monaco;(0,a.registerLanguage)({id:"dtsql",extensions:[".dtsql",".dtsql"],aliases:["DtSql","dtsql"],loader:function(){return o.Promise.wrap(n.e(10).then(n.t.bind(null,"jiYr",7)))}})},KQ7z:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("lwsE")),l=a(n("W8MJ")),u=a(n("7W2i")),i=a(n("a1gu")),c=a(n("Nsbk")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),d=a(n("aSnJ"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,i.default)(this,n)}}var m=function(e){(0,u.default)(n,e);var t=p(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){var e=this.props.children;return s.createElement("div",{className:"main"},s.createElement(d.default,null,s.createElement("div",{className:"container overflow-x-hidden",id:"JS_console_container"},e||"加载中....")))}}]),n}(s.Component);t.default=m},KnRw:function(e,t,n){var a={"./af":"/Tvm","./af.js":"/Tvm","./ar":"yRKQ","./ar-dz":"2Mgn","./ar-dz.js":"2Mgn","./ar-kw":"SyK9","./ar-kw.js":"SyK9","./ar-ly":"Km2t","./ar-ly.js":"Km2t","./ar-ma":"k+3Q","./ar-ma.js":"k+3Q","./ar-sa":"dbzX","./ar-sa.js":"dbzX","./ar-tn":"E7L0","./ar-tn.js":"E7L0","./ar.js":"yRKQ","./az":"marO","./az.js":"marO","./be":"c9Cq","./be.js":"c9Cq","./bg":"Rxhz","./bg.js":"Rxhz","./bm":"Zf0k","./bm.js":"Zf0k","./bn":"qbSa","./bn-bd":"Dicg","./bn-bd.js":"Dicg","./bn.js":"qbSa","./bo":"aPmz","./bo.js":"aPmz","./br":"V/F2","./br.js":"V/F2","./bs":"CToL","./bs.js":"CToL","./ca":"GuxH","./ca.js":"GuxH","./cs":"qrel","./cs.js":"qrel","./cv":"wv9F","./cv.js":"wv9F","./cy":"7JVd","./cy.js":"7JVd","./da":"PtRy","./da.js":"PtRy","./de":"xhqU","./de-at":"bJtj","./de-at.js":"bJtj","./de-ch":"fRjz","./de-ch.js":"fRjz","./de.js":"xhqU","./dv":"tEna","./dv.js":"tEna","./el":"vE8+","./el.js":"vE8+","./en-au":"aGvD","./en-au.js":"aGvD","./en-ca":"TyIU","./en-ca.js":"TyIU","./en-gb":"xbvL","./en-gb.js":"xbvL","./en-ie":"8wpQ","./en-ie.js":"8wpQ","./en-il":"O112","./en-il.js":"O112","./en-in":"vfvX","./en-in.js":"vfvX","./en-nz":"mRnY","./en-nz.js":"mRnY","./en-sg":"fIpc","./en-sg.js":"fIpc","./eo":"nEfC","./eo.js":"nEfC","./es":"QqXE","./es-do":"OH6n","./es-do.js":"OH6n","./es-mx":"QajH","./es-mx.js":"QajH","./es-us":"VqXm","./es-us.js":"VqXm","./es.js":"QqXE","./et":"/BjE","./et.js":"/BjE","./eu":"lS/Y","./eu.js":"lS/Y","./fa":"Xl2a","./fa.js":"Xl2a","./fi":"pKmA","./fi.js":"pKmA","./fil":"zqRz","./fil.js":"zqRz","./fo":"1sIW","./fo.js":"1sIW","./fr":"t+gs","./fr-ca":"ApVP","./fr-ca.js":"ApVP","./fr-ch":"mR/r","./fr-ch.js":"mR/r","./fr.js":"t+gs","./fy":"zrXP","./fy.js":"zrXP","./ga":"oh3e","./ga.js":"oh3e","./gd":"7WNt","./gd.js":"7WNt","./gl":"EkHg","./gl.js":"EkHg","./gom-deva":"PB9U","./gom-deva.js":"PB9U","./gom-latn":"IlNN","./gom-latn.js":"IlNN","./gu":"SIlg","./gu.js":"SIlg","./he":"RWgf","./he.js":"RWgf","./hi":"fVgC","./hi.js":"fVgC","./hr":"QeL5","./hr.js":"QeL5","./hu":"UGq4","./hu.js":"UGq4","./hy-am":"powx","./hy-am.js":"powx","./id":"+gpe","./id.js":"+gpe","./is":"3azS","./is.js":"3azS","./it":"T/vC","./it-ch":"BQHH","./it-ch.js":"BQHH","./it.js":"T/vC","./ja":"n/+T","./ja.js":"n/+T","./jv":"pOn/","./jv.js":"pOn/","./ka":"5BLU","./ka.js":"5BLU","./kk":"i4p7","./kk.js":"i4p7","./km":"Rdvl","./km.js":"Rdvl","./kn":"x+k7","./kn.js":"x+k7","./ko":"+Fhz","./ko.js":"+Fhz","./ku":"4wLu","./ku.js":"4wLu","./ky":"dDLa","./ky.js":"dDLa","./lb":"Gudj","./lb.js":"Gudj","./lo":"VShb","./lo.js":"VShb","./lt":"5eMR","./lt.js":"5eMR","./lv":"JdG9","./lv.js":"JdG9","./me":"VVnP","./me.js":"VVnP","./mi":"oQ6b","./mi.js":"oQ6b","./mk":"tXUT","./mk.js":"tXUT","./ml":"uPxb","./ml.js":"uPxb","./mn":"p9cx","./mn.js":"p9cx","./mr":"b8N1","./mr.js":"b8N1","./ms":"Wnnz","./ms-my":"b+tO","./ms-my.js":"b+tO","./ms.js":"Wnnz","./mt":"V6YG","./mt.js":"V6YG","./my":"rt8X","./my.js":"rt8X","./nb":"xyXD","./nb.js":"xyXD","./ne":"4vTz","./ne.js":"4vTz","./nl":"6QMr","./nl-be":"LMGY","./nl-be.js":"LMGY","./nl.js":"6QMr","./nn":"Qsvx","./nn.js":"Qsvx","./oc-lnc":"Q7AQ","./oc-lnc.js":"Q7AQ","./pa-in":"oA7N","./pa-in.js":"oA7N","./pl":"C/jI","./pl.js":"C/jI","./pt":"V7OV","./pt-br":"b3iz","./pt-br.js":"b3iz","./pt.js":"V7OV","./ro":"TwjK","./ro.js":"TwjK","./ru":"YJSy","./ru.js":"YJSy","./sd":"4xdR","./sd.js":"4xdR","./se":"j5S3","./se.js":"j5S3","./si":"Am5L","./si.js":"Am5L","./sk":"sSmc","./sk.js":"sSmc","./sl":"9iY4","./sl.js":"9iY4","./sq":"cnMZ","./sq.js":"cnMZ","./sr":"ss7R","./sr-cyrl":"tGLK","./sr-cyrl.js":"tGLK","./sr.js":"ss7R","./ss":"mYhl","./ss.js":"mYhl","./sv":"IGtO","./sv.js":"IGtO","./sw":"p49z","./sw.js":"p49z","./ta":"VVil","./ta.js":"VVil","./te":"YQaq","./te.js":"YQaq","./tet":"2u18","./tet.js":"2u18","./tg":"oil7","./tg.js":"oil7","./th":"gJLt","./th.js":"gJLt","./tk":"IxH1","./tk.js":"IxH1","./tl-ph":"ogwM","./tl-ph.js":"ogwM","./tlh":"0bHV","./tlh.js":"0bHV","./tr":"BYDG","./tr.js":"BYDG","./tzl":"IUMd","./tzl.js":"IUMd","./tzm":"94jC","./tzm-latn":"Mgge","./tzm-latn.js":"Mgge","./tzm.js":"94jC","./ug-cn":"4xjM","./ug-cn.js":"4xjM","./uk":"NrFT","./uk.js":"NrFT","./ur":"U58I","./ur.js":"U58I","./uz":"orAx","./uz-latn":"jCvl","./uz-latn.js":"jCvl","./uz.js":"orAx","./vi":"t2dB","./vi.js":"t2dB","./x-pseudo":"XFnJ","./x-pseudo.js":"XFnJ","./yo":"qKGQ","./yo.js":"qKGQ","./zh-cn":"3O3J","./zh-cn.js":"3O3J","./zh-hk":"Fu0X","./zh-hk.js":"Fu0X","./zh-mo":"sCN4","./zh-mo.js":"sCN4","./zh-tw":"2Pdx","./zh-tw.js":"2Pdx"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="KnRw"},L56I:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RedTxt=void 0,n("ma9I"),n("R5XZ"),n("2B1R"),n("wLYn");var o,l=a(n("CC+v")),u=a(n("QpBz")),i=a(n("lwsE")),c=a(n("W8MJ")),s=a(n("PJYZ")),d=a(n("7W2i")),f=a(n("a1gu")),p=a(n("Nsbk")),m=a(n("lSNA")),E=a(n("VkAN")),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),T=a(n("9ObM")),y=a(n("RHHV"));function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,p.default)(e);if(t){var r=(0,p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,f.default)(this,n)}}var N=T.default.span(o||(o=(0,E.default)(["\n    color: #FF5F5C;\n"])));t.RedTxt=N;var g=function(e){(0,d.default)(n,e);var t=h(n);function n(){var e;(0,i.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,m.default)((0,s.default)(e),"state",{confirmLoading:!1}),e}return(0,c.default)(n,[{key:"killTask",value:function(){var e=this,t=this.props.killResource,n=void 0===t?[]:t,a=this.getReqParams();y.default.killTasks(a).then((function(t){1==t.code?setTimeout((function(){u.default.success("操作成功"),e.props.killSuccess(n),e.props.autoRefresh(),e.props.onCancel(),e.setState({confirmLoading:!1})}),1e3):e.setState({confirmLoading:!1})}))}},{key:"getReqParams",value:function(){var e=this.props,t=e.killResource,n=void 0===t?[]:t,a=e.node,r={stage:e.stage,jobResource:e.jobResource,jobIdList:[],nodeAddress:a},o=void 0!==e.totalModel;return r.jobIdList=o?[]:n.map((function(e){return e.jobId})),r}},{key:"confirmKillTask",value:function(){this.setState({confirmLoading:!0}),this.killTask()}},{key:"render",value:function(){var e=void 0!==this.props.totalModel,t=e?"杀死全部任务":"杀死选中任务",n=e?v.createElement("div",null,v.createElement(N,null,"本操作将杀死列表（跨分页）中的全部任务，不仅是当前页"),v.createElement("br",null),v.createElement(N,null,"杀死运行中的任务需要较长时间")):v.createElement(N,null,"本操作将杀死列表（非跨分页）中的选中任务");return v.createElement(l.default,{title:t,visible:this.props.visible,okText:t,okType:"danger",confirmLoading:this.state.confirmLoading,onCancel:this.props.onCancel,onOk:this.confirmKillTask.bind(this)},n)}}]),n}(v.Component);t.default=g},LNB4:function(e,t,n){"use strict";n("tkto"),n("pNMO"),n("5DmW"),n("27RR"),n("HRxU"),n("eoL8"),n("+2oP"),n("4Brf"),n("0oug"),n("J30X");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.isNeedTemp=p,t.isKubernetes=function(e){return i.COMPONENT_TYPE_VALUE.KUBERNETES==e},t.isYarn=function(e){return i.COMPONENT_TYPE_VALUE.YARN==e},t.isFLink=function(e){return i.COMPONENT_TYPE_VALUE.FLINK==e},t.isDtscriptAgent=function(e){return i.COMPONENT_TYPE_VALUE.DTSCRIPT_AGENT==e},t.isHaveGroup=m,t.notCustomParam=function(e){return[i.COMPONENT_TYPE_VALUE.SFTP,i.COMPONENT_TYPE_VALUE.LIBRA_SQL,i.COMPONENT_TYPE_VALUE.ORACLE_SQL,i.COMPONENT_TYPE_VALUE.TIDB_SQL,i.COMPONENT_TYPE_VALUE.GREEN_PLUM_SQL,i.COMPONENT_TYPE_VALUE.IMPALA_SQL,i.COMPONENT_TYPE_VALUE.PRESTO_SQL].indexOf(e)>-1},t.isOtherVersion=function(e){return[i.COMPONENT_TYPE_VALUE.FLINK,i.COMPONENT_TYPE_VALUE.SPARK,i.COMPONENT_TYPE_VALUE.SPARK_THRIFT_SERVER,i.COMPONENT_TYPE_VALUE.HIVE_SERVER,i.COMPONENT_TYPE_VALUE.INCEPTOR_SQL].indexOf(e)>-1},t.isSameVersion=E,t.isMultiVersion=v,t.needZipFile=function(e){return[i.FILE_TYPE.KERNEROS,i.FILE_TYPE.CONFIGS].indexOf(e)>-1},t.showDataCheckBox=T,t.notFileConfig=function(e){return[i.COMPONENT_TYPE_VALUE.DTSCRIPT_AGENT].indexOf(e)>-1},t.getActionType=function(e){switch(e){case"view":return"查看集群";case"new":return"新增集群";case"edit":return"编辑集群";default:return""}},t.isDataCheckBoxs=function(e){return 2==e.filter((function(e){return T(e.componentTypeCode)})).length},t.isSourceTab=function(e){return e==i.TABS_TITLE_KEY.SOURCE},t.initialScheduling=function(){var e=[];return Object.values(i.TABS_TITLE_KEY).map((function(t){return e[t]=[]}))},t.giveMeAKey=function(){return(new Date).getTime()+""+~~(1e5*Math.random())},t.isViewMode=function(e){return"view"==e},t.isFileParam=y,t.isMetaData=O,t.isDefaultVersion=function(e){return["isDefault"].indexOf(e)>-1},t.isDeployMode=h,t.isRadioLinkage=N,t.isGroupType=function(e){return e===i.CONFIG_ITEM_TYPE.GROUP},t.isCustomType=g,t.getCustomerParams=C,t.getCompsId=function(e,t){var n=[];return e.forEach((function(e){var a;(null!==(a=null==e?void 0:e.multiVersion)&&void 0!==a?a:[]).forEach((function(e){(null==e?void 0:e.id)==t&&n.push(e.id)}))})),n},t.getValueByJson=P,t.getOptions=function e(t){var n=[];return t.forEach((function(t,a){var r;n[a]={label:t.key,value:t.key},(null==t?void 0:t.values)&&(null==t||null===(r=t.values)||void 0===r?void 0:r.length)>0&&(n[a]=f(f({},n[a]),{},{children:e(t.values)}))})),n},t.getCompsName=function(e){return Array.from(e).map((function(e){return v(e.typeCode)?i.COMPONENT_CONFIG_NAME[e.typeCode]+" "+(Number(e.hadoopVersion)/100).toFixed(2):i.COMPONENT_CONFIG_NAME[e.typeCode]}))},t.getInitialValue=function(e,t){var n={};return function e(t,a){if(!t)return;return t.map((function(t){var r={value:t.key,parent:a};n[t.key]=r,e(t.values,r)}))}(e),function e(t){var a=[],r=n[t];a.push(r.value),r.parent&&(a=[].concat((0,o.default)(e(r.parent.value)),(0,o.default)(a)));return a}(t)},t.isSchedulings=function(e){var t,n=0,a=c(e);try{for(a.s();!(t=a.n()).done;){t.value.findIndex((function(e){return E(e.componentTypeCode)}))>-1&&n++}}catch(e){a.e(e)}finally{a.f()}return 2==n},t.handleCustomParam=b,t.getParamsByTemp=function(e){var t,n={};return(h(null===(t=e[0])||void 0===t?void 0:t.key)?e[0].values:e).forEach((function(e){if(e.type==i.CONFIG_ITEM_TYPE.GROUP){var t={};e.values.forEach((function(e){var n,a;e.id&&(t["%"+e.id+"-key"]=null!==(n=null==e?void 0:e.key)&&void 0!==n?n:"",t["%"+e.id+"-value"]=null!==(a=null==e?void 0:e.value)&&void 0!==a?a:"")})),n[e.key]=t}var a,r;g(e.type)&&(n["%"+e.id+"-key"]=null!==(a=null==e?void 0:e.key)&&void 0!==a?a:"",n["%"+e.id+"-value"]=null!==(r=null==e?void 0:e.value)&&void 0!==r?r:"")})),n},t.handleComponentTemplate=function(e,t){for(var n=JSON.parse(t.componentTemplate).filter((function(e){return e.type!==i.CONFIG_ITEM_TYPE.CUSTOM_CONTROL})),a=R(e),o=b(e.customParam),l=!1,c=function(){var e=(0,r.default)(d[s],2),t=e[0],a=e[1];if(u.default.isString(a)||u.default.isArray(a))n.map((function(e){e.key==t?e.value=a:N(e.type)&&e.values.map((function(e){e.values[0].key==t&&(e.values[0].value=a)}))}));else for(var o=function(){var e=(0,r.default)(c[l],2),a=e[0],o=e[1];(h(n[0].key)?n[0].values:n).map((function(e){e.key==t&&(e.values=e.values.filter((function(e){return e.type!==i.CONFIG_ITEM_TYPE.CUSTOM_CONTROL})),e.values.map((function(e){e.key==a&&(e.value=o)})))}))},l=0,c=Object.entries(a);l<c.length;l++)o()},s=0,d=Object.entries(a);s<d.length;s++)c();if(0==Object.values(o).length)return n;for(var f in o){var p;if(!(null===(p=o[f])||void 0===p?void 0:p.type)){l=!0;for(var m=function(){var e=(0,r.default)(v[E],2),t=e[0],a=e[1];(h(n[0].key)?n[0].values:n).map((function(e){e.key==t&&e.type==i.CONFIG_ITEM_TYPE.GROUP&&(e.values=e.values.concat(a))}))},E=0,v=Object.entries(o[f]);E<v.length;E++)m()}}return l?n:n.concat(o)},t.handleComponentConfig=R,t.handleComponentConfigAndCustom=_,t.getSingleTestStatus=function(e,t,n){var a,r,o,l,u=null!==(a=e.typeCode)&&void 0!==a?a:"",i=null!==(r=e.hadoopVersion)&&void 0!==r?r:"",c=null!==(o=n[String(u)])&&void 0!==o?o:{},s=null!==(l=null==c?void 0:c.multiVersion)&&void 0!==l?l:[];if(s.length){var d=!1;s=s.map((function(e){return(null==e?void 0:e.componentVersion)==i?(d=!0,t):e})),!d&&t&&s.push(t)}!s.length&&t&&s.push(t);return s},t.includesCurrentComp=function(e,t){var n,a=t.typeCode,r=t.hadoopVersion,o=c(e);try{for(o.s();!(n=o.n()).done;){var l=n.value;if(l.typeCode==a&&!l.hadoopVersion)return!0;if(l.typeCode==a&&l.hadoopVersion==r)return!0}}catch(e){o.e(e)}finally{o.f()}return!1},t.getCurrentComp=function(e,t){var n,a=t.typeCode,r=t.hadoopVersion,o={},l=c(e);try{for(l.s();!(n=l.n()).done;){var u,i,s=n.value,d=c(null!==(u=null==s?void 0:s.multiVersion)&&void 0!==u?u:[]);try{for(d.s();!(i=d.n()).done;){var f=i.value;(null==f?void 0:f.componentTypeCode)==a&&(!r&&f&&(o=f),(null==f?void 0:f.hadoopVersion)==r&&(o=f))}}catch(e){d.e(e)}finally{d.f()}}}catch(e){l.e(e)}finally{l.f()}return o},t.getCurrent1Comp=I,t.getModifyComp=function(e,t){for(var n=new Set,a=0,o=Object.entries(e);a<o.length;a++){var l=(0,r.default)(o[a],2),u=l[0],c=l[1];if(v(Number(u)))for(var s=0,d=Object.entries(c);s<d.length;s++){var f=(0,r.default)(d[s],2),p=f[0],m=f[1];if(!i.DEFAULT_PARAMS.includes(p)){var E=I(t,{typeCode:Number(u),hadoopVersion:p});L(m,E,Number(u))&&n.add({typeCode:Number(u),hadoopVersion:p})}}else{var T=I(t,{typeCode:Number(u)});L(c,T,Number(u))&&n.add({typeCode:Number(u)})}}return n};var r=a(n("J4zp")),o=a(n("RIqP")),l=a(n("lSNA"));n("yXV3"),n("TeQF"),n("2B1R"),n("B6y2"),n("DQNa"),n("QWBl"),n("FZtP"),n("4mDm"),n("07d7"),n("3bBZ"),n("pjDv"),n("PKPk"),n("toAj"),n("qePV"),n("ma9I"),n("x0AG"),n("T63A"),n("rB9j"),n("EnZy"),n("oVuX"),n("sMBO"),n("YGK4"),n("yq1k"),n("JTJg");var u=a(n("LvDl")),i=n("j1Tt");function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,l.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){return[i.COMPONENT_TYPE_VALUE.YARN,i.COMPONENT_TYPE_VALUE.HDFS,i.COMPONENT_TYPE_VALUE.KUBERNETES].indexOf(e)>-1}function m(e){return[i.COMPONENT_TYPE_VALUE.FLINK,i.COMPONENT_TYPE_VALUE.SPARK,i.COMPONENT_TYPE_VALUE.LEARNING,i.COMPONENT_TYPE_VALUE.DTYARNSHELL].indexOf(e)>-1}function E(e){return[i.COMPONENT_TYPE_VALUE.HDFS,i.COMPONENT_TYPE_VALUE.YARN].indexOf(e)>-1}function v(e){return[i.COMPONENT_TYPE_VALUE.FLINK,i.COMPONENT_TYPE_VALUE.SPARK,i.COMPONENT_TYPE_VALUE.FLINK_ON_STANDALONE].indexOf(e)>-1}function T(e){return[i.COMPONENT_TYPE_VALUE.HIVE_SERVER,i.COMPONENT_TYPE_VALUE.SPARK_THRIFT_SERVER].indexOf(e)>-1}function y(e){return["kerberosFileName","uploadFileName"].indexOf(e)>-1}function O(e){return["isMetadata"].indexOf(e)>-1}function h(e){return"deploymode"===e}function N(e){return e===i.CONFIG_ITEM_TYPE.RADIO_LINKAGE}function g(e){return e===i.CONFIG_ITEM_TYPE.CUSTOM_CONTROL}function C(e){return e.filter((function(e){return g(e.type)}))}function P(e){return e?JSON.parse(e):null}function S(e){var t=[],n=[];if(!e)return{};for(var a=0,o=Object.entries(e);a<o.length;a++){var c=(0,r.default)(o[a],2),s=c[0],d=c[1];if(d&&u.default.isString(d)&&u.default.isString(s)){var p=s.split("%")[1].split("-");t[p[0]]=f(f({},t[p[0]]),{},(0,l.default)({},p[1],d))}}for(var m in t){var E={};E.key=t[m].key,E.value=t[m].value,E.type=i.CONFIG_ITEM_TYPE.CUSTOM_CONTROL,n.push(E)}return n}function b(e,t){var n=[];if(!e)return{};for(var a=0,i=Object.entries(e);a<i.length;a++){var s=(0,r.default)(i[a],2),d=s[0],f=s[1];f&&!u.default.isString(f)&&(n=[].concat((0,o.default)(n),[(0,l.default)({},d,S(f))]))}if(t){var p,m={},E=c(n.concat(S(e)));try{for(E.s();!(p=E.n()).done;){var v=p.value;m[v.key]=v.value}}catch(e){E.e(e)}finally{E.f()}return m}return n.concat(S(e))}function A(e,t){var n=e;return["c.NotebookApp.ip","c.NotebookApp.token","c.NotebookApp.default_url"].forEach((function(a){a===t&&-1===e.indexOf("'")&&(n="'".concat(e,"'"))})),n}function R(e,t){var n={};function a(e){return t?e.split(".").join("%"):e.split("%").join(".")}for(var o=0,l=Object.entries(null!==(i=null==e?void 0:e.componentConfig)&&void 0!==i?i:{});o<l.length;o++){var i,c=(0,r.default)(l[o],2),s=c[0],d=c[1];if(n[a(s)]=d,!u.default.isString(d)&&!u.default.isArray(d)){for(var f={},p=0,m=Object.entries(d);p<m.length;p++){var E=(0,r.default)(m[p],2),v=E[0],T=E[1],y=a(v);f[y]=t?T:A(T,y)}n[s]=f}}return n}function _(e,t){var n,a=R(e),r="standalone"===(null===(n=a)||void 0===n?void 0:n.clusterMode),o=b(e.customParam);if(m(t)&&!r&&o.length){var u,i=c(o);try{for(i.s();!(u=i.n()).done;){var s=u.value;for(var d in s){var p,E=c(s[d]);try{for(E.s();!(p=E.n()).done;){var v=p.value;a[d]=f(f({},a[d]),{},(0,l.default)({},v.key,v.value))}}catch(e){E.e(e)}finally{E.f()}}}}catch(e){i.e(e)}finally{i.f()}}if((!m(t)||r)&&Object.values(o).length){var T,y=c(o);try{for(y.s();!(T=y.n()).done;){var O=T.value;a=f(f({},a),{},(0,l.default)({},O.key,O.value))}}catch(e){y.e(e)}finally{y.f()}}return a}function I(e,t){var n,a=t.typeCode,r=t.hadoopVersion,o={},l=c(e);try{for(l.s();!(n=l.n()).done;){var u,i=c(n.value);try{for(i.s();!(u=i.n()).done;){var s,d,f=u.value,p=c(null!==(s=null==f?void 0:f.multiVersion)&&void 0!==s?s:[]);try{for(p.s();!(d=p.n()).done;){var m=d.value;(null==m?void 0:m.componentTypeCode)==a&&(!r&&m&&(o=m),(null==m?void 0:m.hadoopVersion)==r&&(o=m))}}catch(e){p.e(e)}finally{p.f()}}}catch(e){i.e(e)}finally{i.f()}}}catch(e){l.e(e)}finally{l.f()}return o}function L(e,t,n){var a,r=c(i.DEFAULT_PARAMS);try{for(r.s();!(a=r.n()).done;){var o,l,s,d,f=a.value,m=e[f];if(y(f))m=null!==(s=null===(d=e[f])||void 0===d?void 0:d.name)&&void 0!==s?s:e[f];if(O(f)&&(!0===e[f]&&(m=1),!1===e[f]&&(m=0)),(m||0===m)&&!u.default.isEqual(m,null!==(o=null===(l=t[f])||void 0===l?void 0:l.name)&&void 0!==o?o:t[f]))return!0}}catch(e){r.e(e)}finally{r.f()}if(p(Number(n))){var E,v=e.customParam?S(e.customParam):[],T=C(null!==(E=P(null==t?void 0:t.componentTemplate))&&void 0!==E?E:[]);if(!u.default.isEqual(v,T))return!0}else{var h=_(e,Number(n));if(!Object.values(h).length)return!1;if(!u.default.isEqual(h,(null==t?void 0:t.componentConfig)?JSON.parse(t.componentConfig):{}))return!0}return!1}},MGW9:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I");var o=a(n("qu0K")),l=a(n("g4D/")),u=a(n("lwsE")),i=a(n("W8MJ")),c=a(n("PJYZ")),s=a(n("7W2i")),d=a(n("a1gu")),f=a(n("Nsbk")),p=a(n("lSNA")),m=a(n("CC+v")),E=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=T(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),v=n("j1Tt");function T(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(T=function(e){return e?n:t})(e)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var O=m.default.confirm,h=function(e){(0,s.default)(n,e);var t=y(n);function n(){var e;(0,u.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,p.default)((0,c.default)(e),"getCheckValue",(function(){var t,n,a,r=e.props,o=r.comp,l=r.isCheckBoxs,u=r.form,i=null!==(t=null==o?void 0:o.componentTypeCode)&&void 0!==t?t:"";return!l||null!==(n=null!==(a=u.getFieldValue("".concat(i,".isMetadata")))&&void 0!==a?a:null==o?void 0:o.isMetadata)&&void 0!==n&&n})),(0,p.default)((0,c.default)(e),"handleChange",(function(t){var n,a=e.props,r=a.form,o=a.comp,l=null!==(n=null==o?void 0:o.componentTypeCode)&&void 0!==n?n:"";e.props.isCheckBoxs&&function(){e.setState({show:!0},(function(){r.setFieldsValue((0,p.default)({},"".concat(l,".isMetadata"),!t.target.checked))}));var n=t.target.checked?v.COMPONENT_CONFIG_NAME[v.MAPPING_DATA_CHECK[l]]:v.COMPONENT_CONFIG_NAME[l],a=t.target.checked?v.COMPONENT_CONFIG_NAME[l]:v.COMPONENT_CONFIG_NAME[v.MAPPING_DATA_CHECK[l]];O({title:"确认将元数据获取方式由".concat(n,"切换为").concat(a,"？"),onOk:function(){var e;r.setFieldsValue((e={},(0,p.default)(e,"".concat(v.MAPPING_DATA_CHECK[l],".isMetadata"),!t.target.checked),(0,p.default)(e,"".concat(l,".isMetadata"),t.target.checked),e))}})}()})),(0,p.default)((0,c.default)(e),"validMetadata",(function(t,n,a){e.props.isCheckBoxs||n||a("请设置元数据获取方式"),a()})),e}return(0,i.default)(n,[{key:"render",value:function(){var e,t=this.props,n=t.form,a=t.comp,r=t.view,u=t.disabledMeta,i=null!==(e=null==a?void 0:a.componentTypeCode)&&void 0!==e?e:"";return E.createElement(E.Fragment,null,E.createElement(o.default.Item,{label:null,colon:!1},n.getFieldDecorator("".concat(i,".isMetadata"),{valuePropName:"checked",initialValue:this.getCheckValue(),rules:[{validator:this.validMetadata}]})(E.createElement(l.default,{disabled:r||u,onChange:this.handleChange},"设为元数据获取方式"))))}}]),n}(E.PureComponent);t.default=h},OHU0:function(e,t,n){"use strict";n("eoL8"),Object.defineProperty(t,"__esModule",{value:!0}),t.showAlertGateCode=function(e){return a.ALARM_TYPE.CUSTOM!==e},t.showIsDefault=function(e){return a.ALARM_TYPE.CUSTOM!==e},t.showConfigFile=function(e){return a.ALARM_TYPE.CUSTOM===e},t.showAlertGateJson=function(e,t){return a.CHANNEL_MODE_VALUE.DING_DT!==e||a.ALARM_TYPE.CUSTOM===t},t.showAlertTemplete=function(e,t){return a.ALARM_TYPE.EMAIL===e&&a.CHANNEL_MODE_VALUE.MAIL_DT===t||a.ALARM_TYPE.CUSTOM===e},t.canTestAlarm=function(e){return a.ALARM_TYPE.DING!==e},t.textAlertKey=function(e){return e===a.ALARM_TYPE.EMAIL?"emails":"phones"};var a=n("RzPm")},PU3n:function(e,t,n){},PrGF:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("lwsE")),l=a(n("W8MJ")),u=a(n("7W2i")),i=a(n("a1gu")),c=a(n("Nsbk")),s=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=d(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI"));function d(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(d=function(e){return e?n:t})(e)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,c.default)(e);if(t){var r=(0,c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,i.default)(this,n)}}var p=function(e){(0,u.default)(n,e);var t=f(n);function n(){return(0,o.default)(this,n),t.apply(this,arguments)}return(0,l.default)(n,[{key:"render",value:function(){var e,t=this.props,n=t.comp,a=t.isMetadata;return(null!=a?a:null===(e=n.multiVersion[0])||void 0===e?void 0:e.isMetadata)?s.createElement("span",{className:"c-metaIcon__title"},"Meta"):null}}]),n}(s.PureComponent);t.default=p},Ps9q:function(e,t,n){"use strict";n("eoL8"),Object.defineProperty(t,"__esModule",{value:!0}),t.SCHEDULE_TYPE=t.pieOption=t.ALARM_HIGHT=t.ALARM_DEFAULT=void 0;t.ALARM_DEFAULT=40;t.ALARM_HIGHT=70;var a={series:[{type:"pie",hoverAnimation:!1,radius:["72%","80%"],startAngle:210,labelLine:{normal:{show:!1}},label:{normal:{position:"center"}},data:[{value:40,itemStyle:{normal:{color:"#16DE9A"}}},{value:30,itemStyle:{normal:{color:"#FFB310"}}},{value:30,itemStyle:{normal:{color:"#FF5F5C"}}},{value:50,itemStyle:{normal:{label:{show:!1},labelLine:{show:!1},color:"rgba(0,0,0,0)",borderWidth:0}}}]},{type:"pie",hoverAnimation:!1,radius:["52%","70%"],startAngle:210,labelLine:{normal:{show:!1}},label:{normal:{position:"center"}},data:[{value:75,itemStyle:{normal:{color:"#FF5F5C"}},label:{normal:{formatter:"{c}%",position:"center",show:!0,textStyle:{fontSize:12,fontWeight:600,color:"#333333"}}}},{value:75,itemStyle:{normal:{label:{show:!1},labelLine:{show:!1},color:"rgba(0,0,0,0)",borderWidth:0}}}]}]};t.pieOption=a;t.SCHEDULE_TYPE={Capacity:"capacityScheduler",Fair:"fairScheduler",FIFO:"fifoScheduler"}},RHHV:function(e,t,n){"use strict";n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("AwqB")),o=a(n("C4JW")),l={addCluster:function(e){return r.default.post(o.default.ADD_CLUSTER,e)},getClusterInfo:function(e){return r.default.post(o.default.GET_CLUSTER_INFO,e)},uploadResource:function(e){return r.default.postAsFormData(o.default.UPLOAD_RESOURCE,e)},deleteComponent:function(e){return r.default.post(o.default.DELETE_COMPONENT,e)},deleteCluster:function(e){return r.default.post(o.default.DELETE_CLUSTER,e)},testConnect:function(e){return r.default.post(o.default.TEST_CONNECT,e)},testConnects:function(e){return r.default.post(o.default.TEST_CONNECTS,e)},closeKerberos:function(e){return r.default.post(o.default.CLOSE_KERBEROS,e)},getVersionData:function(e){return r.default.post(o.default.GET_VERSION,e)},saveComponent:function(e){return r.default.postAsFormData(o.default.SAVE_COMPONENT,e)},parseKerberos:function(e){return r.default.postAsFormData(o.default.PARSE_KERBEROS,e)},getCompVersion:function(e){return r.default.post(o.default.GET_COMPONENT_VERSION,e)},getResourceList:function(e){return r.default.post(o.default.GET_RESOURCE_LIST,e)},getClusterList:function(e){return r.default.post(o.default.GET_CLUSTER_LIST,e)},uploadClusterResource:function(e){return r.default.postAsFormData(o.default.UPLOAD_CLUSTER_RESOURCE,e)},getTenantList:function(e){return r.default.post(o.default.GET_TENANT_LIST,e)},testCluster:function(e){return r.default.post(o.default.TEST_CLUSTER_CONNECT,e)},createCluster:function(e){return r.default.postAsFormData(o.default.NEW_CLUSTER,e)},bindUserToQuere:function(e){return r.default.post(o.default.BIND_USER_TO_RESOURCE,e)},updateCluster:function(e){return r.default.postAsFormData(o.default.UPDATE_CLUSTER,e)},getQueueLists:function(e){return r.default.post(o.default.GET_QUEUE_LISTS,e)},confirmSwitchQueue:function(e){return r.default.post(o.default.CONFIRM_SWITCH_QUEUE,e)},getComponentStore:function(e){return r.default.post(o.default.GET_COMPONENTSTORE,e)},uploadKerberos:function(e){return r.default.postAsFormData(o.default.UPLOAD_KERBEROS,e)},updateKrb5Conf:function(e){return r.default.post(o.default.UPDATE_KRB5CONF,e)},getDtScriptAgentLabel:function(e){return r.default.post(o.default.GET_DTSCRIPT_AGENT_LABEL,e)},getClusterComponentUser:function(e){return r.default.post(o.default.GET_CLUSTER_COMPONENT_USER,e)},addOrUpdateComponentUser:function(e){return r.default.post(o.default.ADD_OR_UPDATE_COMPONENT_USER,e)},getClusterDetail:function(e){return r.default.post(o.default.GET_CLUSTER_DETAIL,e)},getClusterSelect:function(e){return r.default.post(o.default.GET_CLUSTER_SELECT,e)},getNodeAddressSelect:function(e){return r.default.post(o.default.GET_NODEADDRESS_SELECT,e)},searchTaskList:function(e){return r.default.post(o.default.SEARCH_TASKNAME_LIST,e)},searchTaskFuzzy:function(e){return r.default.post(o.default.SEARCH_TASKNAME_FUZZY,e)},killTasks:function(e){return r.default.post(o.default.KILL_TASKS,e)},killAllTask:function(e){return r.default.post(o.default.KILL_ALL_TASK,e)},stickJob:function(e){return r.default.post(o.default.JOB_STICK,e)},getEngineList:function(e){return r.default.post(o.default.GET_ENGINE_LIST,e)},getGroupList:function(e){return r.default.post(o.default.GET_GROUP_LIST,e)},getViewDetail:function(e){return r.default.post(o.default.GET_VIEW_DETAIL,e)},changeJobPriority:function(e){return r.default.post(o.default.CHANGE_JOB_PRIORITY,e)},getClusterResources:function(e){return r.default.post(o.default.GET_CLUSTER_RESOURCES,e)},getLoadTemplate:function(e){return r.default.post(o.default.GET_LOADTEMPLATE,e)},uploadKerberosFile:function(e){return r.default.postAsFormData(o.default.UPLOAD_KERBEROSFILE,e)},getKerberosFile:function(e){return r.default.post(o.default.GET_KERBEROSFILE,e)},testComponent:function(e){return r.default.post(o.default.TEST_COMPONENT_CONNECT,e)},testComponentKerberos:function(e){return r.default.postAsFormData(o.default.TEST_COMPONENT_CONNECT_KERBEROS,e)},addComponent:function(e){return r.default.post(o.default.ADD_COMPONENT,e)},saveComponentWithKerberos:function(e){return r.default.postAsFormData(o.default.SAVE_COMPONENT_KERBEROS,e)},deleteKerberos:function(e){return r.default.post(o.default.DELETE_KERBEROS,e)},addEngine:function(e){return r.default.post(o.default.ADD_ENGINE,e)},addEngines:function(e){return r.default.post(o.default.ADD_ENGINS,e)},updateClusterVersion:function(e){return r.default.post(o.default.UPDATE_CLUSTER_VERSION,e)},getAllCluster:function(e){return r.default.post(o.default.GET_ALL_CLUSTER,e)},searchTenant:function(e){return r.default.post(o.default.SEARCH_TENANT,e)},getTaskResourceTemplate:function(e){return r.default.post(o.default.TASK_RESOURCE,e)},getQueue:function(e){return r.default.post(o.default.GET_QUEUE,e)},bindTenant:function(e){return r.default.post(o.default.BIND_TENANT,e)},switchQueue:function(e){return r.default.post(o.default.SWITCH_QUEUE,e)},bindNamespace:function(e){return r.default.post(o.default.BIND_NAME_SPACE,e)},queryTaskResourceLimits:function(e){return r.default.post(o.default.GET_TASKLIMITS,e)},addOrUpdateAlarmRule:function(e){return r.default.postAsFormData(o.default.ADD_OR_UPDATE_ALARM,e)},getAlarmRuleList:function(e){return r.default.post(o.default.GET_ALARM_RULE_LIST,e)},deleteAlarmRule:function(e){return r.default.post(o.default.DEL_ALARM_RULE_LIST,e)},getByAlertId:function(e){return r.default.post(o.default.GET_ALARM_BY_ID,e)},setDefaultAlert:function(e){return r.default.post(o.default.SET_DEFAULT_ALERT,e)},testAlert:function(e){return r.default.postAsFormData(o.default.TEST_ALERT,e)},refreshQueue:function(e){return r.default.post(o.default.REFRESH_QUEUE,e)},getAlarmConfig:function(){return r.default.post(o.default.GET_ALARM_CONFIG)},updateAlarmConfig:function(e){return r.default.post(o.default.UPDATE_ALARM_CONFIG,e)},testAlarmConfig:function(){return r.default.post(o.default.TEST_ALARM_CONFIG)}};t.default=l},RJc4:function(e,t,n){"use strict";n("SuFq"),n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8"),n("PKPk"),n("ENF9");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("o0o1"));n("ma9I"),n("4mDm"),n("07d7"),n("3bBZ"),n("2B1R"),n("fbCW"),n("sMBO"),n("J30X"),n("rB9j"),n("EnZy");var l=a(n("rR1Q")),u=a(n("QpBz")),i=a(n("yXPU")),c=a(n("LB4q")),s=a(n("d1El")),d=a(n("Pbn2")),f=a(n("lwsE")),p=a(n("W8MJ")),m=a(n("PJYZ")),E=a(n("7W2i")),v=a(n("a1gu")),T=a(n("Nsbk")),y=a(n("lSNA")),O=a(n("FAat")),h=a(n("qu0K")),N=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),g=a(n("C4JW")),C=a(n("RHHV")),P=a(n("htex")),S=a(n("hmv9")),b=a(n("MGW9")),A=a(n("WlhX")),R=n("j1Tt"),_=n("LNB4");function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,y.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,T.default)(e);if(t){var r=(0,T.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,v.default)(this,n)}}var k=h.default.Item,j=O.default.Option,w=function(e){(0,E.default)(n,e);var t=M(n);function n(){var e,a;(0,f.default)(this,n);for(var r=arguments.length,p=new Array(r),E=0;E<r;E++)p[E]=arguments[E];return a=t.call.apply(t,[this].concat(p)),(0,y.default)((0,m.default)(a),"state",{loading:(e={},(0,y.default)(e,R.FILE_TYPE.KERNEROS,!1),(0,y.default)(e,R.FILE_TYPE.PARAMES,!1),(0,y.default)(e,R.FILE_TYPE.CONFIGS,!1),e),visible:!1,principals:[]}),(0,y.default)((0,m.default)(a),"handleVersion",(function(e){var t,n=a.props,r=n.comp;(0,n.handleCompVersion)(null!==(t=null==r?void 0:r.componentTypeCode)&&void 0!==t?t:"",e)})),(0,y.default)((0,m.default)(a),"renderCompsVersion",(function(){var e,t,n,r=a.props.form.getFieldDecorator,o=a.props,l=o.versionData,u=o.comp,i=o.view,f=null!==(e=null==u?void 0:u.componentTypeCode)&&void 0!==e?e:"",p=(0,_.isOtherVersion)(f)?l[R.VERSION_TYPE[f]]:l.hadoopVersion,m=(0,_.isOtherVersion)(f)?R.DEFAULT_COMP_VERSION[f]:[p[0].key,null===(t=p[0].values[0])||void 0===t?void 0:t.key],E=m=(null==u?void 0:u.hadoopVersion)||m;(0,_.isSameVersion)(f)&&(E=(null==u?void 0:u.hadoopVersion)||(null===(n=p[0].values[0])||void 0===n?void 0:n.key)||"",m=(null==u?void 0:u.hadoopVersion)?(0,_.getInitialValue)(p,null==u?void 0:u.hadoopVersion):m);return N.createElement(N.Fragment,null,N.createElement(k,{label:N.createElement("span",null,"组件版本",(0,_.isSameVersion)(f)&&N.createElement(s.default,{overlayClassName:"big-tooltip",title:"切换组件版本HDFS和YARN组件将同步切换至相同版本，Spark/Flink/DtScript的插件路径将同步自动变更"},N.createElement(d.default,{style:{marginLeft:4},type:"question-circle-o"}))),colon:!1},r("".concat(f,".hadoopVersionSelect"),{initialValue:m})((0,_.isOtherVersion)(f)?N.createElement(O.default,{style:{width:172},disabled:i,onChange:a.handleVersion},p.map((function(e){return N.createElement(j,{value:e.value,key:e.key},e.key)}))):N.createElement(c.default,{options:(0,_.getOptions)(p),disabled:i,expandTrigger:"click",allowClear:!1,displayRender:function(e){return e[e.length-1]},onChange:a.handleVersion,style:{width:"100%"}}))),r("".concat(f,".hadoopVersion"),{initialValue:E})(N.createElement("span",{style:{display:"none"}})))})),(0,y.default)((0,m.default)(a),"renderSchedulingVersion",(function(){var e,t=a.props,n=t.isSchedulings,r=t.comp,o=null!==(e=null==r?void 0:r.componentTypeCode)&&void 0!==e?e:"";return n&&o==R.COMPONENT_TYPE_VALUE.HDFS?null:a.renderCompsVersion()})),(0,y.default)((0,m.default)(a),"getPrincipalsList",function(){var e=(0,i.default)(o.default.mark((function e(t){var n,r,l,u,i,c,s,d,f,p,m,E;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=a.props,u=l.form,i=l.comp,c=null!==(n=null==i?void 0:i.componentTypeCode)&&void 0!==n?n:"",s=null!==(r=null==i?void 0:i.hadoopVersion)&&void 0!==r?r:"",e.next=5,C.default.parseKerberos({fileName:t});case 5:1==(d=e.sent).code&&(m={principal:null!==(f=null==d?void 0:d.data[0])&&void 0!==f?f:"",principals:d.data},E=(0,_.isMultiVersion)(c)?(0,y.default)({},s,m):D({},m),u.setFieldsValue((0,y.default)({},c,E)),a.setState({principals:null!==(p=d.data)&&void 0!==p?p:[]}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,y.default)((0,m.default)(a),"refreshYarnQueue",(function(){var e=a.props.clusterInfo.clusterName;C.default.refreshQueue({clusterName:e}).then((function(e){if(1==e.code){var t=e.data.find((function(e){return e.componentTypeCode==R.COMPONENT_TYPE_VALUE.YARN}));(null==t?void 0:t.result)||0==e.data.length?u.default.success("刷新成功"):l.default.error({message:"刷新失败",description:"".concat(t.errorMsg),style:{wordBreak:"break-word"}})}}))})),(0,y.default)((0,m.default)(a),"downloadFile",(function(e){var t,n,r,o=a.props,l=o.form,u=o.clusterInfo,i=o.comp,c=null!==(t=null==i?void 0:i.componentTypeCode)&&void 0!==t?t:"",s=null!==(n=null==i?void 0:i.deployType)&&void 0!==n?n:"",d=l.getFieldValue(c+".hadoopVersion")||"";(0,_.isMultiVersion)(c)&&(d=null!==(r=null==i?void 0:i.hadoopVersion)&&void 0!==r?r:"");var f=document.createElement("a"),p=(null==i?void 0:i.id)?"?componentId=".concat(i.id,"&"):"?";p+="type=".concat(e,"&componentType=").concat(c,"&hadoopVersion=").concat(d,"&deployType=").concat(s,"&clusterName=").concat(null==u?void 0:u.clusterName),f.href="".concat(g.default.DOWNLOAD_RESOURCE).concat(p),f.click()})),(0,y.default)((0,m.default)(a),"validateFileType",(function(e){var t=/\.(zip)$/.test(e.toLocaleLowerCase());return e&&!t&&u.default.warning("配置文件只能是zip文件!"),t})),(0,y.default)((0,m.default)(a),"uploadFile",function(){var e=(0,i.default)(o.default.mark((function e(t,n,r){var l,i,c,s,d,f,p,m,E,v,T,O,h;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(h=function(){var e=(0,_.handleComponentConfig)({componentConfig:v.data[0]},!0),t=(0,_.isMultiVersion)(p)?(0,y.default)({},m,{componentConfig:e}):{componentConfig:e};d.setFieldsValue((0,y.default)({},p,t))},c=a.props,s=c.comp,d=c.form,f=c.clusterInfo,p=null!==(l=null==s?void 0:s.componentTypeCode)&&void 0!==l?l:"",m=(0,_.isMultiVersion)(p)?null==s?void 0:s.hadoopVersion:"",E=null!==(i=null==s?void 0:s.deployType)&&void 0!==i?i:"",a.setState((function(e){return{loading:D(D({},e.loading),{},(0,y.default)({},n,!0))}})),!(0,_.needZipFile)(n)||a.validateFileType(null==t?void 0:t.name)){e.next=9;break}return a.setState((function(e){return{loading:D(D({},e.loading),{},(0,y.default)({},n,!1))}})),e.abrupt("return");case 9:if(n!=R.FILE_TYPE.KERNEROS){e.next=17;break}return O={kerberosFile:t,deployType:E,clusterId:null!==(T=null==f?void 0:f.clusterId)&&void 0!==T?T:"",componentCode:p,componentVersion:m},e.next=13,C.default.uploadKerberos(O);case 13:v=e.sent,a.getPrincipalsList(t),e.next=20;break;case 17:return e.next=19,C.default.uploadResource({fileName:t,componentType:p});case 19:v=e.sent;case 20:if(1!=v.code){e.next=33;break}e.t0=n,e.next=e.t0===R.FILE_TYPE.KERNEROS?24:e.t0===R.FILE_TYPE.PARAMES?26:e.t0===R.FILE_TYPE.CONFIGS?29:31;break;case 24:return a.setKrbConfig(v.data),e.abrupt("break",31);case 26:return h(),h(),e.abrupt("break",31);case 29:return d.setFieldsValue((0,y.default)({},p,{specialConfig:v.data[0]})),e.abrupt("break",31);case 31:r&&r(),u.default.success("文件上传成功");case 33:a.setState((function(e){return{loading:D(D({},e.loading),{},(0,y.default)({},n,!1))}}));case 34:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}()),(0,y.default)((0,m.default)(a),"deleteKerFile",(function(){var e=a.props.comp;e.id&&C.default.closeKerberos({componentId:e.id})})),(0,y.default)((0,m.default)(a),"renderKerberosFile",(function(){var e,t,n=a.props,r=n.comp,o=n.view,l=a.state.loading,u=null!==(e=null==r?void 0:r.componentTypeCode)&&void 0!==e?e:"";return N.createElement(P.default,{label:"Hadoop Kerberos认证文件",fileInfo:{typeCode:u,name:"kerberosFileName",value:r.kerberosFileName,desc:"仅支持.zip格式",loading:l[R.FILE_TYPE.KERNEROS],hadoopVersion:null!==(t=null==r?void 0:r.hadoopVersion)&&void 0!==t?t:"",uploadProps:{name:"kerberosFile",accept:".zip",type:R.FILE_TYPE.KERNEROS}},view:o,form:a.props.form,uploadFile:a.uploadFile,icons:N.createElement(N.Fragment,null,!o&&N.createElement(d.default,{type:"edit",style:{right:(null==r?void 0:r.id)?40:20},onClick:function(){return a.setState({visible:!0})}}),(null==r?void 0:r.id)&&N.createElement(d.default,{type:"download",style:{right:o?0:20},onClick:function(){return a.downloadFile(R.FILE_TYPE.KERNEROS)}})),deleteFile:a.deleteKerFile})})),(0,y.default)((0,m.default)(a),"renderParamsFile",(function(){var e,t,n=a.props,r=n.comp,o=n.view,l=a.state.loading,u=null!==(e=null==r?void 0:r.componentTypeCode)&&void 0!==e?e:"";return N.createElement(P.default,{fileInfo:{typeCode:u,name:"paramsFile",value:r.paramsFile,desc:"仅支持json格式",loading:l[R.FILE_TYPE.PARAMES],hadoopVersion:null!==(t=null==r?void 0:r.hadoopVersion)&&void 0!==t?t:"",uploadProps:{name:"paramsFile",accept:".json",type:R.FILE_TYPE.PARAMES}},view:o,form:a.props.form,uploadFile:a.uploadFile,notDesc:!0,label:N.createElement("span",null,"参数批量上传",N.createElement("span",{className:"c-fileConfig__downloadTemp",onClick:function(){return a.downloadFile(R.FILE_TYPE.PARAMES)}},(null==r?void 0:r.id)?"下载参数":"下载模板"))})})),(0,y.default)((0,m.default)(a),"renderConfigsFile",(function(){var e,t,n=a.props,r=n.comp,o=n.view,l=a.state.loading,u=null!==(e=null==r?void 0:r.componentTypeCode)&&void 0!==e?e:"";return N.createElement(P.default,{label:N.createElement("span",null,"配置文件",(0,_.isYarn)(u)&&N.createElement("a",{style:{marginLeft:66},onClick:a.refreshYarnQueue},"刷新队列")),deleteIcon:!0,fileInfo:{typeCode:u,name:"uploadFileName",value:r.uploadFileName,desc:R.CONFIG_FILE_DESC[u],loading:l[R.FILE_TYPE.CONFIGS],hadoopVersion:null!==(t=null==r?void 0:r.hadoopVersion)&&void 0!==t?t:"",uploadProps:{name:"uploadFileName",accept:".zip",type:R.FILE_TYPE.CONFIGS}},view:o,form:a.props.form,uploadFile:a.uploadFile,rules:[{required:!0,message:"配置文件为空"}],icons:(null==r?void 0:r.id)&&N.createElement(d.default,{type:"download",style:{right:0},onClick:function(){return a.downloadFile(R.FILE_TYPE.CONFIGS)}})})})),(0,y.default)((0,m.default)(a),"renderStorageComponents",(function(){var e,t,n,r=a.props,o=r.comp,l=r.form,u=r.saveCompsData,i=r.view,c=null!==(e=null==o?void 0:o.componentTypeCode)&&void 0!==e?e:"",s=null!==(t=null==o?void 0:o.hadoopVersion)&&void 0!==t?t:"",d=c;if((0,_.isMultiVersion)(c)&&(d=d+"."+s),d+=".storeType",0===u.length)return null;var f=!1;for(var p in u)if(u[p].key===R.COMPONENT_TYPE_VALUE.HDFS){f=!0;break}var m=(null==o?void 0:o.storeType)||(f?R.COMPONENT_TYPE_VALUE.HDFS:null==u||null===(n=u[0])||void 0===n?void 0:n.key);return N.createElement(k,{label:"存储组件",colon:!1,key:d},l.getFieldDecorator(d,{initialValue:m})(N.createElement(O.default,{style:{width:172},disabled:i},u.map((function(e){return N.createElement(j,{value:e.key,key:e.key},e.value)})))))})),(0,y.default)((0,m.default)(a),"renderPrincipal",(function(){var e,t,n,r,o,l,u,i=a.props,c=i.comp,s=i.form,d=i.view,f=a.state.principals,p=f,m=null!==(e=null==c?void 0:c.componentTypeCode)&&void 0!==e?e:"",E=null!==(t=null==c?void 0:c.hadoopVersion)&&void 0!==t?t:"",v=m;(0,_.isMultiVersion)(m)&&(v=v+"."+E);var T=null!==(n=s.getFieldValue(v+".kerberosFileName"))&&void 0!==n?n:null==c?void 0:c.kerberosFileName;if(f.length||Array.isArray(null==c?void 0:c.principals)||!(null==c?void 0:c.principals)||(p=null==c?void 0:c.principals.split(",")),0!=(null===(r=p)||void 0===r?void 0:r.length)&&T)return N.createElement(k,{label:"principal",colon:!1,key:v+".principal"},s.getFieldDecorator(v+".principal",{initialValue:null!==(o=null!==(l=null==c?void 0:c.principal)&&void 0!==l?l:f[0])&&void 0!==o?o:""})(N.createElement(O.default,{style:{width:172},disabled:d},p.map((function(e,t){return N.createElement(j,{value:e,key:t},e)})))),s.getFieldDecorator(v+".principals",{initialValue:null!==(u=null==c?void 0:c.principals)&&void 0!==u?u:""})(N.createElement(N.Fragment,null)))})),(0,y.default)((0,m.default)(a),"renderMeta",(function(){var e,t=a.props.comp,n=null!==(e=null==t?void 0:t.componentTypeCode)&&void 0!==e?e:"";return(0,_.showDataCheckBox)(n)?N.createElement(b.default,{comp:a.props.comp,form:a.props.form,view:a.props.view,disabledMeta:a.props.disabledMeta,isCheckBoxs:a.props.isCheckBoxs}):null})),(0,y.default)((0,m.default)(a),"renderDefaultVersion",(function(){var e,t=a.props.comp,n=null!==(e=null==t?void 0:t.componentTypeCode)&&void 0!==e?e:"";return(0,_.isFLink)(n)?N.createElement(A.default,{comp:a.props.comp,form:a.props.form,view:a.props.view,isDefault:a.props.isDefault}):null})),(0,y.default)((0,m.default)(a),"setKrbConfig",(function(e){var t,n,r=a.props,o=r.comp;(0,r.saveComp)({mergeKrb5Content:e,componentTypeCode:null!==(t=null==o?void 0:o.componentTypeCode)&&void 0!==t?t:"",hadoopVersion:null!==(n=null==o?void 0:o.hadoopVersion)&&void 0!==n?n:""})})),(0,y.default)((0,m.default)(a),"hanleVisible",(function(e){a.setState({visible:!1}),a.setKrbConfig(e)})),(0,y.default)((0,m.default)(a),"renderFileConfig",(function(){var e,t,n;switch(null!==(e=null===(t=a.props)||void 0===t||null===(n=t.comp)||void 0===n?void 0:n.componentTypeCode)&&void 0!==e?e:""){case R.COMPONENT_TYPE_VALUE.YARN:case R.COMPONENT_TYPE_VALUE.HDFS:return N.createElement(N.Fragment,null,a.renderSchedulingVersion(),a.renderConfigsFile(),a.renderKerberosFile(),a.renderPrincipal());case R.COMPONENT_TYPE_VALUE.KUBERNETES:return N.createElement(N.Fragment,null,a.renderConfigsFile(),a.renderKerberosFile(),a.renderPrincipal());case R.COMPONENT_TYPE_VALUE.SFTP:case R.COMPONENT_TYPE_VALUE.NFS:case R.COMPONENT_TYPE_VALUE.FLINK_ON_STANDALONE:return a.renderParamsFile();case R.COMPONENT_TYPE_VALUE.ORACLE_SQL:case R.COMPONENT_TYPE_VALUE.LIBRA_SQL:case R.COMPONENT_TYPE_VALUE.TIDB_SQL:case R.COMPONENT_TYPE_VALUE.GREEN_PLUM_SQL:case R.COMPONENT_TYPE_VALUE.PRESTO_SQL:case R.COMPONENT_TYPE_VALUE.ANALYTIC_DB:return N.createElement(N.Fragment,null,a.renderParamsFile());case R.COMPONENT_TYPE_VALUE.HIVE_SERVER:case R.COMPONENT_TYPE_VALUE.SPARK_THRIFT_SERVER:case R.COMPONENT_TYPE_VALUE.INCEPTOR_SQL:return N.createElement(N.Fragment,null,a.renderMeta(),a.renderCompsVersion(),a.renderKerberosFile(),a.renderPrincipal(),a.renderParamsFile(),a.renderStorageComponents());case R.COMPONENT_TYPE_VALUE.IMPALA_SQL:case R.COMPONENT_TYPE_VALUE.SPARK:case R.COMPONENT_TYPE_VALUE.FLINK:return N.createElement(N.Fragment,null,a.renderDefaultVersion(),a.renderKerberosFile(),a.renderPrincipal(),a.renderParamsFile(),a.renderStorageComponents());case R.COMPONENT_TYPE_VALUE.LEARNING:case R.COMPONENT_TYPE_VALUE.DTYARNSHELL:return N.createElement(N.Fragment,null,a.renderKerberosFile(),a.renderPrincipal(),a.renderParamsFile(),a.renderStorageComponents());default:return null}})),a}return(0,p.default)(n,[{key:"render",value:function(){var e,t,n,a=this.props.comp,r=this.state.visible,o=null!==(e=null===(t=this.props)||void 0===t||null===(n=t.comp)||void 0===n?void 0:n.componentTypeCode)&&void 0!==e?e:"";return(0,_.notFileConfig)(o)?null:N.createElement("div",{className:"c-fileConfig__container"},this.renderFileConfig(),N.createElement(S.default,{key:"".concat(r),visible:r,krbconfig:(null==a?void 0:a.mergeKrb5Content)||"",onCancel:this.hanleVisible}))}}]),n}(N.PureComponent);t.default=w},RclC:function(e,t,n){"use strict";n("SuFq"),n("pNMO"),n("5DmW"),n("27RR"),n("HRxU"),n("eoL8"),n("ENF9");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("o0o1"));n("ma9I"),n("QWBl"),n("FZtP"),n("qePV"),n("2B1R"),n("4mDm"),n("07d7"),n("YGK4"),n("PKPk"),n("3bBZ"),n("TeQF"),n("pjDv"),n("oVuX"),n("fbCW"),n("yq1k"),n("JTJg"),n("tkto"),n("toAj"),n("wLYn"),n("sMBO");var l=a(n("qu0K")),u=a(n("4IMT")),i=a(n("Y/VR")),c=a(n("QpBz")),s=a(n("Pbn2")),d=a(n("yXPU")),f=a(n("lwsE")),p=a(n("W8MJ")),m=a(n("PJYZ")),E=a(n("7W2i")),v=a(n("a1gu")),T=a(n("Nsbk")),y=a(n("lSNA")),O=a(n("CC+v")),h=a(n("j7zX")),N=j(n("q1tI")),g=n("dtw8"),C=j(n("LvDl")),P=a(n("RHHV")),S=n("LNB4"),b=n("j1Tt"),A=a(n("RJc4")),R=a(n("Hc45")),_=a(n("VDrD")),I=a(n("tgir")),L=a(n("PrGF")),D=a(n("6cUG")),M=a(n("SHuk"));function k(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(k=function(e){return e?n:t})(e)}function j(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=k(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,y.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,T.default)(e);if(t){var r=(0,T.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,v.default)(this,n)}}var V=h.default.TabPane,x=O.default.confirm,B=function(e){(0,E.default)(n,e);var t=U(n);function n(){var e;(0,f.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,y.default)((0,m.default)(e),"state",{testLoading:!1,disabledMeta:!1,activeKey:0,clusterName:"",versionData:{},testStatus:{},popVisible:b.TABS_POP_VISIBLE,saveCompsData:[],initialCompData:(0,S.initialScheduling)()}),(0,y.default)((0,m.default)(e),"getDataList",(function(){var t=(e.props.location.state||{}).cluster;P.default.getClusterInfo({clusterId:t.clusterId}).then((function(t){if(1===t.code){var n=(0,S.initialScheduling)(),a=t.data.scheduling;a&&a.forEach((function(e){n[e.schedulingCode]=e.components})),e.setState({initialCompData:n,clusterName:t.data.clusterName,disabledMeta:!t.data.canModifyMetadata},e.getSaveComponentList)}}))})),(0,y.default)((0,m.default)(e),"getVersionData",(function(){P.default.getVersionData().then((function(t){1===t.code&&e.setState({versionData:t.data})}))})),(0,y.default)((0,m.default)(e),"getSaveComponentList",(0,d.default)(o.default.mark((function t(){var n,a,r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.clusterName,t.next=3,P.default.getComponentStore({clusterName:n});case 3:1==(a=t.sent).code&&a.data&&(r=[],a.data.forEach((function(e){r.push({key:null==e?void 0:e.componentTypeCode,value:null==e?void 0:e.componentName})})),e.setState({saveCompsData:r}));case 5:case"end":return t.stop()}}),t)})))),(0,y.default)((0,m.default)(e),"getLoadTemplate",function(){var t=(0,d.default)(o.default.mark((function t(n,a){var r,l,u,i,c,s,d,f,p,m,E,v,T,y,O,h,N,g,C;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=e.props.form.getFieldValue,d=e.state,f=d.clusterName,p=d.initialCompData,m=d.activeKey,E=null!=n?n:null===(r=p[m][0])||void 0===r?void 0:r.componentTypeCode,v=(0,S.getCurrentComp)(p[m],{typeCode:E}),T={componentTypeCode:Number(E),hadoopVersion:null!==(l=null==a?void 0:a.compVersion)&&void 0!==l?l:""},y=null!==(u=null!==(i=null==a?void 0:a.compVersion)&&void 0!==i?i:b.DEFAULT_COMP_VERSION[E])&&void 0!==u?u:"",O=(0,S.isSameVersion)(Number(E))?y:"",!(0,S.isMultiVersion)(E)||(null==a?void 0:a.compVersion)){t.next=9;break}return t.abrupt("return");case 9:if(!(!(null==v?void 0:v.componentTemplate)&&(null===(c=p[m])||void 0===c?void 0:c.length)||(null==a?void 0:a.compVersion)||(null==a?void 0:a.storeType))){t.next=16;break}return t.next=12,P.default.getLoadTemplate({clusterName:f,componentType:E,version:y,originVersion:O,storeType:null!==(h=null!==(N=null==a?void 0:a.storeType)&&void 0!==N?N:s("".concat(E,".storeType")))&&void 0!==h?h:"",deployType:null!==(g=null==a?void 0:a.deployType)&&void 0!==g?g:""});case 12:1==(C=t.sent).code&&(T.componentTemplate=JSON.stringify(C.data)),e.saveComp(T),e.getSaveComponentList();case 16:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()),(0,y.default)((0,m.default)(e),"handleCompVersion",(function(t,n){var a=e.props.form.setFieldsValue;if(!(0,S.isSameVersion)(Number(t)))return a((0,y.default)({},"".concat(t,".hadoopVersion"),n)),void e.getLoadTemplate(t,{compVersion:n});a((0,y.default)({},t,{hadoopVersion:n[n.length-1],hadoopVersionSelect:n})),e.getLoadTemplate(t,{compVersion:n[n.length-1]})})),(0,y.default)((0,m.default)(e),"onTabChange",(function(t){e.setState((function(e){var n;return{activeKey:Number(t),popVisible:F(F({},e.popVisible),{},(n={},(0,y.default)(n,e.activeKey,!1),(0,y.default)(n,Number(t),!1),n))}}))})),(0,y.default)((0,m.default)(e),"handlePopVisible",(function(t){e.setState((function(e){return{popVisible:F(F({},e.popVisible),{},(0,y.default)({},e.activeKey,null==t||t))}}))})),(0,y.default)((0,m.default)(e),"turnCompMode",(function(t){var n=(e.props.location.state||{}).cluster;e.setState({testLoading:!1}),g.hashHistory.push({pathname:"/console-ui/clusterManage/editCluster",state:{mode:t,cluster:n}})})),(0,y.default)((0,m.default)(e),"handleConfirm",function(){var t=(0,d.default)(o.default.mark((function t(n,a,r){var l,u,i,c,s,d,f,p,m,E,v,T,O,h,N,g,C;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(l=e.state,u=l.initialCompData,i=l.activeKey,c=l.testStatus,d=(s=u)[i],a.length&&n!==b.COMP_ACTION.DELETE&&(f=a.map((function(e){return(0,S.isMultiVersion)(e)?{componentTypeCode:e,multiVersion:[]}:{componentTypeCode:e,multiVersion:[void 0]}})),d=d.concat(f)),n!=b.COMP_ACTION.DELETE){t.next=12;break}if(m=a.componentTypeCode,E=a.hadoopVersion,v=a.id,T=void 0===v?"":v,!(O=(0,S.getCompsId)(d,T)).length){t.next=11;break}return t.next=10,P.default.deleteComponent({componentIds:O});case 10:h=t.sent;case 11:1!=(null===(p=h)||void 0===p?void 0:p.code)&&O.length||(N=new Set,d.forEach((function(e){(0,S.isMultiVersion)(e.componentTypeCode)&&r&&(e.multiVersion=e.multiVersion.filter((function(e){return(null==e?void 0:e.hadoopVersion)!=E})),N.add(e)),e.componentTypeCode!=m&&N.add(e)})),d=Array.from(N),g=(0,S.getSingleTestStatus)({typeCode:m,hadoopVersion:E},null,c),C={},(0,S.isMultiVersion)(m)&&(C=(0,y.default)({},E,{})),e.props.form.setFieldsValue((0,y.default)({},m,C)),e.setState({testStatus:F(F({},c),{},(0,y.default)({},m,F(F({},c[m]),{},{result:null,multiVersion:g})))}));case 12:s[i]=d,e.setState({initialCompData:s},e.getLoadTemplate);case 14:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}()),(0,y.default)((0,m.default)(e),"saveComp",(function(t,n){var a=e.state,r=a.activeKey,o=a.initialCompData,l=C.cloneDeep(o);l[r]=o[r].map((function(e){return e.componentTypeCode!==t.componentTypeCode||(n==b.COMP_ACTION.ADD&&e.multiVersion.push(void 0),e.multiVersion=e.multiVersion.map((function(e){return e?(0,S.isMultiVersion)(t.componentTypeCode)&&(null==e?void 0:e.hadoopVersion)&&(null==e?void 0:e.hadoopVersion)!=t.hadoopVersion?e:F(F({},e),t):F({},t)}))),e})),e.setState({initialCompData:l})})),(0,y.default)((0,m.default)(e),"handleComplete",(function(){var t=e.props.form.validateFieldsAndScroll,n=e.state.initialCompData;t((function(t,a){var r,o=(0,S.getModifyComp)(a,n);o.size?(r=o,x({title:"".concat((0,S.getCompsName)(r).join("、"),"尚未保存，是否需要保存？"),content:null,icon:N.createElement(s.default,{style:{color:"#FAAD14"},type:"exclamation-circle",theme:"filled"}),okText:"保存",cancelText:"取消",onOk:function(){},onCancel:function(){e.props.router.push("/console-ui/clusterManage")}})):e.props.router.push("/console-ui/clusterManage")}))})),(0,y.default)((0,m.default)(e),"setTestStatus",(function(t,n){if(n){var a,r=e.state,o=r.testStatus,l=r.initialCompData[r.activeKey].find((function(e){return e.componentTypeCode==t.componentTypeCode}));if(!(0,S.isMultiVersion)(t.componentTypeCode))return void e.setState({testStatus:F(F({},o),{},(0,y.default)({},t.componentTypeCode,F({},t)))});var u=(0,S.getSingleTestStatus)({typeCode:t.componentTypeCode,hadoopVersion:null==t?void 0:t.componentVersion},t,o);u=u.filter((function(e){return e}));var i=!1,c=[];u.forEach((function(e){e&&!e.result&&(i=!0,c.push({componentVersion:e.componentVersion,errorMsg:e.errorMsg}))}));var s={result:null,errorMsg:[],multiVersion:u};return i||(null==l||null===(a=l.multiVersion)||void 0===a?void 0:a.length)!=u.length||(s.result=!0),i&&(s.result=!1,s.errorMsg=c),void e.setState((function(e){return{testStatus:F(F({},e.testStatus),{},(0,y.default)({},t.componentTypeCode,s))}}))}var d={};t.forEach((function(e){d[e.componentTypeCode]=F({},e)})),e.setState({testStatus:d})})),(0,y.default)((0,m.default)(e),"testConnects",(function(t,n){var a,r,o,l=null!==(a=null==t?void 0:t.typeCode)&&void 0!==a?a:"",u=null!==(r=null==t?void 0:t.hadoopVersion)&&void 0!==r?r:"",i=null!==(o=null==t?void 0:t.deployType)&&void 0!==o?o:"",s=e.props.form,d=e.state,f=d.initialCompData,p=d.clusterName;s.validateFields(null,{},(function(t,a){var r=t&&t[String(l)]||{};if((0,S.isMultiVersion)(l)&&Object.keys(r).includes(u))c.default.error("请检查配置");else if(t&&!l||t&&!(0,S.isMultiVersion)(l)&&Object.keys(t).includes(String(l)))c.default.error("请检查配置");else{var o=(0,S.getModifyComp)(a,f);if(l||0===l){if(o.size>0&&(0,S.includesCurrentComp)(Array.from(o),{typeCode:l,hadoopVersion:u})){var s=b.COMPONENT_CONFIG_NAME[l];return(0,S.isMultiVersion)(l)&&(s=s+" "+(Number(u)/100).toFixed(2)),void c.default.error("组件 ".concat(s," 参数变更未保存，请先保存再测试组件连通性"))}n&&n(!0),P.default.testConnect({clusterName:p,deployType:i,componentType:l,componentVersion:null!=u?u:""}).then((function(t){1===t.code&&e.setTestStatus(t.data,!0),n&&n(!1)}))}else{if(o.size>0)return void c.default.error("组件 ".concat((0,S.getCompsName)(o).join("、")," 参数变更未保存，请先保存再测试组件连通性"));e.setState({testLoading:!0}),P.default.testConnects({clusterName:p}).then((function(t){1===t.code&&e.setTestStatus(t.data),e.setState({testLoading:!1})}))}}}))})),e}return(0,p.default)(n,[{key:"componentDidMount",value:function(){this.getDataList(),this.getVersionData()}},{key:"render",value:function(){var e=this,t=this.props.location.state||{},n=t.mode,a=t.cluster,r=this.props.form.getFieldValue,o=this.state,l=o.clusterName,c=o.activeKey,s=o.initialCompData,d=o.versionData,f=o.saveCompsData,p=o.testLoading,m=o.testStatus,E=o.popVisible,v=o.disabledMeta,T=(0,S.isSchedulings)(s);return N.createElement("div",{className:"c-editCluster__containerWrap"},N.createElement("div",{className:"c-editCluster__header"},N.createElement(i.default,null,N.createElement(i.default.Item,null,N.createElement("a",{onClick:function(){e.props.router.push("/console-ui/clusterManage")}},"多集群管理")),N.createElement(i.default.Item,null,l)),(0,S.isViewMode)(n)?N.createElement("span",null,N.createElement(u.default,{className:"cluster-btn",type:"primary",onClick:this.turnCompMode.bind(this,"edit")},"编辑")):N.createElement("span",null,N.createElement(u.default,{className:"cluster-btn",ghost:!0,loading:p,onClick:function(){return e.testConnects()}},"测试所有组件连通性"),N.createElement(u.default,{className:"cluster-btn",type:"primary",onClick:this.handleComplete},"完成"))),N.createElement("div",{className:"c-editCluster__container"},N.createElement(h.default,{tabPosition:"top",onChange:this.onTabChange,activeKey:"".concat(c),className:"c-editCluster__container__commonTabs",tabBarExtraContent:N.createElement("div",{className:"c-editCluster__commonTabs__title"},"集群配置")},s.map((function(t,o){var u=(0,S.isDataCheckBoxs)(t);return N.createElement(V,{tab:N.createElement("div",{style:{height:19,display:"flex",alignItems:"center"}},N.createElement("i",{className:"iconfont ".concat(b.TABS_TITLE[o].iconName),style:{marginRight:2}}),b.TABS_TITLE[o].name),key:String(o)},0==(null==t?void 0:t.length)&&N.createElement("div",{key:c,className:"empty-logo"},N.createElement("img",{src:"http://127.0.0.1:8080/console/public/img/emptyLogo.svg"})),N.createElement(h.default,{tabPosition:"left",tabBarExtraContent:!(0,S.isViewMode)(n)&&N.createElement(I.default,{comps:t,popVisible:E[c],activeKey:c,handleConfirm:e.handleConfirm,handlePopVisible:e.handlePopVisible}),className:"c-editCluster__container__componentTabs",onChange:function(t){(0,S.isMultiVersion)(Number(t))||e.getLoadTemplate(t)}},(null==t?void 0:t.length)>0&&t.map((function(t){var o,i,c,s;return N.createElement(V,{tab:N.createElement("span",null,b.COMPONENT_CONFIG_NAME[t.componentTypeCode],(0,S.showDataCheckBox)(t.componentTypeCode)&&N.createElement(L.default,{comp:t,isMetadata:r("".concat(t.componentTypeCode,".isMetadata"))}),N.createElement(D.default,{testStatus:null!==(o=m[t.componentTypeCode])&&void 0!==o?o:{}})),key:"".concat(t.componentTypeCode)},N.createElement(N.Fragment,null,(0,S.isMultiVersion)(t.componentTypeCode)?N.createElement(M.default,{comp:t,form:e.props.form,view:(0,S.isViewMode)(n),saveCompsData:f,versionData:d,testStatus:null!==(i=null===(c=m[t.componentTypeCode])||void 0===c?void 0:c.multiVersion)&&void 0!==i?i:[],clusterInfo:{clusterName:l,clusterId:a.clusterId},saveComp:e.saveComp,getLoadTemplate:e.getLoadTemplate,testConnects:e.testConnects,handleConfirm:e.handleConfirm}):null==t||null===(s=t.multiVersion)||void 0===s?void 0:s.map((function(t){return N.createElement(N.Fragment,null,N.createElement(A.default,{comp:t,view:(0,S.isViewMode)(n),disabledMeta:v,isCheckBoxs:u,isSchedulings:T,form:e.props.form,versionData:d,saveCompsData:f,clusterInfo:{clusterName:l,clusterId:a.clusterId},saveComp:e.saveComp,handleCompVersion:e.handleCompVersion}),N.createElement(R.default,{comp:t,view:(0,S.isViewMode)(n),form:e.props.form,clusterInfo:{clusterName:l,clusterId:a.clusterId}}),!(0,S.isViewMode)(n)&&N.createElement(_.default,{comp:t,clusterInfo:{clusterName:l,clusterId:a.clusterId},form:e.props.form,saveComp:e.saveComp,testConnects:e.testConnects,handleConfirm:e.handleConfirm}))}))))}))))})))))}}]),n}(N.Component),Y=l.default.create()(B);t.default=Y},RnhZ:function(e,t,n){var a={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id="RnhZ"},RzPm:function(e,t,n){"use strict";n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.RESOURCE_TYPE=t.EMAIL_REG=t.EMAIL_COMMA=t.PHONE_REG=t.NUM_COMMA=t.pieOption=t.doubleLineAreaChartOptions=t.lineAreaChartOptions=t.rowFormItemLayout=t.tailFormItemLayout=t.specFormItemLayout=t.longLabelFormLayout=t.formItemCenterLayout=t.formItemLayout=t.sourcetype=t.notExtKeysTidbSql=t.notExtKeysLibraSql=t.notExtKeysHiveServer=t.notExtKeysSparkThrift=t.notExtKeyDtscriptJupter=t.notExtKeyDtscriptPython=t.notExtKeysDtyarnShell=t.notExtKeysLearning=t.notExtKeysSpark=t.notExtKeysFlink=t.FLINK_KEY_MAP_DOTS=t.FLINK_KEY_MAP=t.DTYARNSHELL_KEY_MAP_DOTS=t.DTYARNSHELL_KEY_MAP=t.SPARK_KEY_MAP_DOTS=t.SPARK_KEY_MAP=t.validateSftpDataParams=t.validateLibraParams=t.validateLearningParams=t.validateDtYarnShellParams=t.validateSparkParams=t.validateHiveServerParams=t.validateImpalaSqlParams=t.validateCarbonDataParams=t.validateHiveParams=t.validateFlinkParams=t.dataSourceTypes=t.EXCHANGE_ADMIN_API_STATUS=t.EXCHANGE_APPLY_STATUS=t.EXCHANGE_API_STATUS=t.API_DELETE=t.API_SYSTEM_STATUS=t.API_USER_STATUS=t.API_STATUS=t.API_METHOD_key=t.API_METHOD=t.API_MODE=t.HADOOP_GROUP_VALUE=t.DEFAULT_COMP_REQUIRED=t.DEFAULT_COMP_TEST=t.ENGINE_TYPE_ARRAY=t.ENGIN_TYPE_TEXT=t.ENGINE_TYPE_NAME=t.ENGINE_TYPE=t.DATA_SOURCE=t.JobStageText=t.JobStage=t.TASK_STATE=t.CHANNEL_CONF_TEXT=t.CHANNEL_MODE=t.CHANNEL_MODE_VALUE=t.ALARM_TYPE_TEXT=t.ALARM_TYPE=t.COMPUTE_COMPONENTS=t.STORE_COMPONENTS=t.SOURCE_COMPONENTS=t.COMMON_COMPONENTS=t.TABS_TITLE=t.TABS_TITLE_KEY=t.COMPONEMT_CONFIG_NAME_ENUM=t.COMPONEMT_CONFIG_KEY_ENUM=t.COMPONEMT_CONFIG_KEYS=t.COMPONENT_TYPE_VALUE=t.UPPER_NAME=t.COMPONENT_CONFIG_NAME=void 0;var r,o,l,u,i,c=a(n("lSNA")),s={FLINK:"Flink",SPARK:"Spark",LEARNING:"Learning",DTYARNSHELL:"DtScript",HDFS:"HDFS",YARN:"YARN",SPARK_THRIFT_SERVER:"SparkThrift",CARBONDATA:"CarbonData ThriftServer",LIBRA_SQL:"LibrA SQL",HIVE_SERVER:"Hive Server",SFTP:"SFTP",IMPALA_SQL:"Impala SQL",PRESTO_SQL:"Presto SQL",TIDB_SQL:"TiDB SQL",ORACLE_SQL:"Oracle SQL",GREEN_PLUM_SQL:"Greenplum SQL",KUBERNETES:"Kubernetes",NFS:"NFS"};t.COMPONENT_CONFIG_NAME=s;t.UPPER_NAME=["FLINK","HDFS","SPARK","SPARK_THRIFT_SERVER","YARN","IMPALA_SQL","DTYARNSHELL","LEARNING","HIVE_SERVER"];var d={FLINK:0,SPARK:1,LEARNING:2,DTYARNSHELL:3,HDFS:4,YARN:5,SPARK_THRIFT_SERVER:6,CARBONDATA:7,LIBRA_SQL:8,HIVE_SERVER:9,SFTP:10,IMPALA_SQL:11,TIDB_SQL:12,ORACLE_SQL:13,GREEN_PLUM_SQL:14,KUBERNETES:15,PRESTO_SQL:16,NFS:17};t.COMPONENT_TYPE_VALUE=d;var f={FLINK:"flinkConf",SPARK:"sparkConf",LEARNING:"learningConf",DTYARNSHELL:"dtscriptConf",HDFS:"hadoopConf",YARN:"yarnConf",SPARK_THRIFT_SERVER:"hiveConf",CARBONDATA:"carbonConf",LIBRA_SQL:"libraConf",TI_DB_SQL:"tidbConf",HIVE_SERVER:"hiveServerConf",SFTP:"sftpConf",IMPALA_SQL:"impalaSqlConf",TIDB_SQL:"tidbConf",ORACLE_SQL:"oracleConf",GREEN_PLUM_SQL:"greenConf",KUBERNETES:"kubernetesConf",PRESTO_SQL:"prestoConf",NFS:"NFS"};t.COMPONEMT_CONFIG_KEYS=f;var p=(r={},(0,c.default)(r,d.FLINK,f.FLINK),(0,c.default)(r,d.SPARK,f.SPARK),(0,c.default)(r,d.LEARNING,f.LEARNING),(0,c.default)(r,d.DTYARNSHELL,f.DTYARNSHELL),(0,c.default)(r,d.HDFS,f.HDFS),(0,c.default)(r,d.YARN,f.YARN),(0,c.default)(r,d.SPARK_THRIFT_SERVER,f.SPARK_THRIFT_SERVER),(0,c.default)(r,d.CARBONDATA,f.CARBONDATA),(0,c.default)(r,d.HIVE_SERVER,f.HIVE_SERVER),(0,c.default)(r,d.LIBRA_SQL,f.LIBRA_SQL),(0,c.default)(r,d.SFTP,f.SFTP),(0,c.default)(r,d.TIDB_SQL,f.TIDB_SQL),(0,c.default)(r,d.IMPALA_SQL,f.IMPALA_SQL),(0,c.default)(r,d.ORACLE_SQL,f.ORACLE_SQL),(0,c.default)(r,d.GREEN_PLUM_SQL,f.GREEN_PLUM_SQL),(0,c.default)(r,d.KUBERNETES,f.KUBERNETES),(0,c.default)(r,d.PRESTO_SQL,f.PRESTO_SQL),(0,c.default)(r,d.NFS,f.NFS),r);t.COMPONEMT_CONFIG_KEY_ENUM=p;var m=(o={},(0,c.default)(o,d.SPARK,s.SPARK),(0,c.default)(o,d.FLINK,s.FLINK),(0,c.default)(o,d.LEARNING,s.LEARNING),(0,c.default)(o,d.DTYARNSHELL,s.DTYARNSHELL),(0,c.default)(o,d.HDFS,s.HDFS),(0,c.default)(o,d.YARN,s.YARN),(0,c.default)(o,d.SPARK_THRIFT_SERVER,s.SPARK_THRIFT_SERVER),(0,c.default)(o,d.CARBONDATA,s.CARBONDATA),(0,c.default)(o,d.HIVE_SERVER,s.HIVE_SERVER),(0,c.default)(o,d.LIBRA_SQL,s.LIBRA_SQL),(0,c.default)(o,d.SFTP,s.SFTP),(0,c.default)(o,d.TIDB_SQL,s.TIDB_SQL),(0,c.default)(o,d.IMPALA_SQL,s.IMPALA_SQL),(0,c.default)(o,d.ORACLE_SQL,s.ORACLE_SQL),(0,c.default)(o,d.GREEN_PLUM_SQL,s.GREEN_PLUM_SQL),(0,c.default)(o,d.KUBERNETES,s.KUBERNETES),(0,c.default)(o,d.PRESTO_SQL,s.PRESTO_SQL),(0,c.default)(o,d.NFS,s.NFS),o);t.COMPONEMT_CONFIG_NAME_ENUM=m;var E={COMMON:0,SOURCE:1,STORE:2,COMPUTE:3};t.TABS_TITLE_KEY=E;var v=[{schedulingName:"公共组件",schedulingCode:E.COMMON},{schedulingName:"资源调度组件",schedulingCode:E.SOURCE},{schedulingName:"存储组件",schedulingCode:E.STORE},{schedulingName:"计算组件",schedulingCode:E.COMPUTE}];t.TABS_TITLE=v;var T=[{componentTypeCode:d.SFTP,componentName:s.SFTP}];t.COMMON_COMPONENTS=T;var y=[{componentTypeCode:d.YARN,componentName:s.YARN},{componentTypeCode:d.KUBERNETES,componentName:s.KUBERNETES}];t.SOURCE_COMPONENTS=y;var O=[{componentTypeCode:d.HDFS,componentName:s.HDFS},{componentTypeCode:d.NFS,componentName:s.NFS}];t.STORE_COMPONENTS=O;var h,N=[{componentTypeCode:d.SPARK,componentName:s.SPARK},{componentTypeCode:d.SPARK_THRIFT_SERVER,componentName:s.SPARK_THRIFT_SERVER},{componentTypeCode:d.FLINK,componentName:s.FLINK},{componentTypeCode:d.HIVE_SERVER,componentName:s.HIVE_SERVER},{componentTypeCode:d.IMPALA_SQL,componentName:s.IMPALA_SQL},{componentTypeCode:d.DTYARNSHELL,componentName:s.DTYARNSHELL},{componentTypeCode:d.LEARNING,componentName:s.LEARNING},{componentTypeCode:d.PRESTO_SQL,componentName:s.PRESTO_SQL},{componentTypeCode:d.TIDB_SQL,componentName:s.TIDB_SQL},{componentTypeCode:d.LIBRA_SQL,componentName:s.LIBRA_SQL},{componentTypeCode:d.ORACLE_SQL,componentName:s.ORACLE_SQL},{componentTypeCode:d.GREEN_PLUM_SQL,componentName:s.GREEN_PLUM_SQL}];t.COMPUTE_COMPONENTS=N,t.ALARM_TYPE=h,function(e){e[e.MSG=1]="MSG",e[e.EMAIL=2]="EMAIL",e[e.DING=3]="DING",e[e.CUSTOM=4]="CUSTOM"}(h||(t.ALARM_TYPE=h={}));var g=(l={},(0,c.default)(l,h.MSG,"短信通道"),(0,c.default)(l,h.EMAIL,"邮件通道"),(0,c.default)(l,h.DING,"钉钉通道"),(0,c.default)(l,h.CUSTOM,"自定义通道"),l);t.ALARM_TYPE_TEXT=g;var C={SMS_YP:"sms_yp",SMS_DY:"sms_dy",SMS_API:"sms_api",SMS_JAR:"sms_jar",MAIL_DT:"mail_dt",MAIL_API:"mail_api",MAIL_JAR:"mail_jar",DING_DT:"ding_dt",DING_API:"ding_api",DING_JAR:"ding_jar"};t.CHANNEL_MODE_VALUE=C;var P={sms:[{value:C.SMS_JAR,title:"扩展插件通道"}],mail:[{value:C.MAIL_DT,title:"默认邮件通道"},{value:C.MAIL_JAR,title:"扩展插件通道"}],dingTalk:[{value:C.DING_DT,title:"钉钉机器人"},{value:C.DING_JAR,title:"扩展插件通道"}]};t.CHANNEL_MODE=P;t.CHANNEL_CONF_TEXT={JAR:'{"className":"com.dtstack.sender.sms.xxxsender"}',API:'{\n"cookiestore": false,\n"configs": [{\n"url": "",\n"method": "get",\n"header": {},\n"body": {}\n}],\n"context": {}\n} ',SMS_YP:'请按照此格式输入配置信息：\n{"yp_api_key":"xxxxxx"}',MAIL_DT:'{\n"mail.smtp.host":"smtp.yeah.net",\n"mail.smtp.port":"25",\n"mail.smtp.ssl.enable":"false",\n"mail.smtp.username":"daishu@dtstack.com",\n"mail.smtp.password":"xxxx",\n"mail.smtp.from":"daishu@dtstack.com"\n}',CUSTOM:'{"className":"com.Test"}'};var S;t.TASK_STATE={UNSUBMIT:0,CREATED:1,SCHEDULED:2,DEPLOYING:3,RUNNING:4,FINISHED:5,CANCELLING:6,CANCELED:7,FAILED:8,SUBMITFAILD:9,SUBMITTING:10,RESTARTING:11,MANUALSUCCESS:12,KILLED:13,SUBMITTED:14,NOTFOUND:15,WAITENGINE:16,WAITCOMPUTE:17,FROZEN:18,ENGINEACCEPTED:19,ENGINEDISTRIBUTE:20,PARENTFAILED:21,FAILING:22,COMPUTING:23,EXPIRE:24,LACKING:25,AUTOCANCELED:26},t.JobStage=S,function(e){e[e.Saved=1]="Saved",e[e.Queueing=2]="Queueing",e[e.WaitTry=3]="WaitTry",e[e.WaitResource=4]="WaitResource",e[e.Running=5]="Running"}(S||(t.JobStage=S={}));var b=(u={},(0,c.default)(u,S.Queueing,"队列中"),(0,c.default)(u,S.Saved,"已存储"),(0,c.default)(u,S.WaitTry,"等待重试"),(0,c.default)(u,S.WaitResource,"等待资源"),(0,c.default)(u,S.Running,"运行中"),u);t.JobStageText=b;t.DATA_SOURCE={MYSQL:1,ORACLE:2,SQLSERVER:3,HDFS:6,HIVE:7,HBASE:8,FTP:9,MAXCOMPUTE:10,ADSMAXCOMPUTE:11,NFS:17,TI_DB:31};var A={HADOOP:1,LIBRA:2,TI_DB:4,ORACLE:5,GREEN_PLUM:6,PRESTO:7,FLINK_ON_STANDALONE:8,ANALYTIC_DB:9,KUBERNETES:"Kubernetes"};t.ENGINE_TYPE=A;var R={HADOOP:"Hadoop",LIBRA:"LibrA",TI_DB:"TiDB",ORACLE:"Oracle",GREEN_PLUM:"GreenPlum",PRESTO:"PRESTO",ANALYTIC_DB:"AnalyticDB PostgreSQL"};t.ENGINE_TYPE_NAME=R;var _=(i={},(0,c.default)(i,A.HADOOP,"Hadoop"),(0,c.default)(i,A.LIBRA,"LibrA"),(0,c.default)(i,A.TI_DB,"TiDB"),(0,c.default)(i,A.ORACLE,"Oracle"),(0,c.default)(i,A.GREEN_PLUM,"GreenPlum"),(0,c.default)(i,A.PRESTO,"Presto"),(0,c.default)(i,A.ANALYTIC_DB,"AnalyticDB PostgreSQL"),(0,c.default)(i,A.FLINK_ON_STANDALONE,"Flink on Standalone"),i);t.ENGIN_TYPE_TEXT=_;var I=[{name:"Hadoop",value:R.HADOOP},{name:"LibrA",value:R.LIBRA},{name:"TiDB",value:R.TI_DB},{name:"Oracle",value:R.ORACLE},{name:"GreenPlum",value:R.GREEN_PLUM}];t.ENGINE_TYPE_ARRAY=I;t.DEFAULT_COMP_TEST={flinkTestResult:{},sparkTestResult:{},dtYarnShellTestResult:{},learningTestResult:{},hdfsTestResult:{},yarnTestResult:{},sparkThriftTestResult:{},carbonTestResult:{},hiveServerTestResult:{},libraSqlTestResult:{},tidbSqlTestResult:{},oracleSqlTestResult:{},impalaSqlTestResult:{},sftpTestResult:{},greenPlumSqlTestResult:{}};t.DEFAULT_COMP_REQUIRED={flinkShowRequired:!1,sparkShowRequired:!1,dtYarnShellShowRequired:!1,learningShowRequired:!1,hdfsShowRequired:!1,yarnShowRequired:!1,hiveShowRequired:!1,carbonShowRequired:!1,hiveServerShowRequired:!1,libraShowRequired:!1,impalaSqlRequired:!1,sftpShowRequired:!1};var L=[{label:"HDFS",value:d.HDFS,disabled:!0},{label:"YARN",value:d.YARN,disabled:!0},{label:"SFTP",value:d.SFTP,disabled:!0},{label:"Flink",value:d.FLINK},{label:"Spark",value:d.SPARK},{label:"Learning",value:d.LEARNING},{label:"DTScript",value:d.DTYARNSHELL},{label:"SparkThrift",value:d.SPARK_THRIFT_SERVER},{label:"CarbonData ThriftServer",value:d.CARBONDATA},{label:"Hive Server",value:d.HIVE_SERVER},{label:"Impala SQL",value:d.IMPALA_SQL}];t.HADOOP_GROUP_VALUE=L;t.API_MODE={GUIDE:0,SQL:1};t.API_METHOD={POST:1};t.API_METHOD_key={1:"POST",2:"GET"};t.API_STATUS={"-1":"NO_APPLY",0:"IN_HAND",1:"PASS",2:"REJECT",3:"STOPPED",4:"DISABLE",5:"EXPIRED"};t.API_USER_STATUS={NO_APPLY:-1,IN_HAND:0,PASS:1,REJECT:2,STOPPED:3,DISABLE:4,EXPIRED:5};t.API_SYSTEM_STATUS={SUCCESS:0,STOP:1,EDITTING:2};t.API_DELETE={YES:0,NO:1};t.EXCHANGE_API_STATUS={"-1":"nothing",0:"inhand",1:"success",2:"notPass",3:"stop",4:"disabled",5:"expired"};t.EXCHANGE_APPLY_STATUS={0:"notApproved",1:"pass",2:"rejected",3:"stop",4:"disabled",5:"expired"};t.EXCHANGE_ADMIN_API_STATUS={0:"success",1:"stop",2:"editting"};t.dataSourceTypes=["未知类型","MySql","Oracle","SQLServer","PostgreSQL","RDBMS","HDFS","Hive","HBase","FTP","MaxCompute","NFS"];t.validateFlinkParams=["flinkConf.flinkZkAddress","flinkConf.flinkHighAvailabilityStorageDir","flinkConf.flinkZkNamespace","flinkConf.gatewayHost","flinkConf.gatewayPort","flinkConf.gatewayJobName","flinkConf.deleteOnShutdown","flinkConf.randomJobNameSuffix","flinkConf.typeName","flinkConf.clusterMode","flinkConf.flinkJarPath","flinkConf.kerberosFile","flinkConf.flinkSessionSlotCount"];t.validateHiveParams=["hiveConf.jdbcUrl","hiveConf.driverClassName","hiveConf.kerberosFile"];t.validateCarbonDataParams=["carbonConf.jdbcUrl","carbonConf.kerberosFile"];t.validateImpalaSqlParams=["impalaSqlConf.jdbcUrl"];t.validateHiveServerParams=["hiveServerConf.jdbcUrl","hiveServerConf.kerberosFile"];t.validateSparkParams=["sparkConf.typeName","sparkConf.sparkYarnArchive","sparkConf.sparkSqlProxyPath","sparkConf.sparkPythonExtLibPath","sparkConf.kerberosFile"];t.validateDtYarnShellParams=["dtscriptConf.jlogstashRoot","dtscriptConf.javaHome","dtscriptConf.hadoopHomeDir","dtscriptConf.kerberosFile"];t.validateLearningParams=["learningConf.learningPython3Path","learningConf.kerberosFile"];t.validateLibraParams=["libraConf.jdbcUrl","libraConf.driverClassName"];t.validateSftpDataParams=["sftpConf.host","sftpConf.port","sftpConf.path","sftpConf.username","sftpConf.password"];t.SPARK_KEY_MAP={"spark.yarn.appMasterEnv.PYSPARK_PYTHON":"sparkYarnAppMasterEnvPYSPARK_PYTHON","spark.yarn.appMasterEnv.PYSPARK_DRIVER_PYTHON":"sparkYarnAppMasterEnvPYSPARK_DRIVER_PYTHON"};t.SPARK_KEY_MAP_DOTS={sparkYarnAppMasterEnvPYSPARK_PYTHON:"spark.yarn.appMasterEnv.PYSPARK_PYTHON",sparkYarnAppMasterEnvPYSPARK_DRIVER_PYTHON:"spark.yarn.appMasterEnv.PYSPARK_DRIVER_PYTHON"};t.DTYARNSHELL_KEY_MAP={"java.home":"javaHome","hadoop.home.dir":"hadoopHomeDir","python2.path":"python2Path","python3.path":"python3Path","jupyter.path":"jupyterPath","c.NotebookApp.open_browser":"cNotebookAppOpen_browser","c.NotebookApp.allow_remote_access":"cNotebookAppAllow_remote_access","c.NotebookApp.ip":"cNotebookAppIp","c.NotebookApp.token":"cNotebookAppToken","c.NotebookApp.default_url":"cNotebookAppDefault_url","jupyter.project.root":"jupyterProjectRoot"};t.DTYARNSHELL_KEY_MAP_DOTS={javaHome:"java.home",hadoopHomeDir:"hadoop.home.dir",python2Path:"python2.path",python3Path:"python3.path",jupyterPath:"jupyter.path",cNotebookAppOpen_browser:"c.NotebookApp.open_browser",cNotebookAppAllow_remote_access:"c.NotebookApp.allow_remote_access",cNotebookAppIp:"c.NotebookApp.ip",cNotebookAppToken:"c.NotebookApp.token",cNotebookAppDefault_url:"c.NotebookApp.default_url",jupyterProjectRoot:"jupyter.project.root"};t.FLINK_KEY_MAP={"yarn.jobmanager.heap.mb":"yarnJobmanagerHeapMb","yarn.taskmanager.heap.mb":"yarnTaskmanagerHeapMb","yarn.taskmanager.numberOfTaskSlots":"yarnTaskmanagerNumberOfTaskSlots","yarn.taskmanager.numberOfTaskManager":"yarnTaskmanagerNumberOfTaskManager","metrics.reporter.promgateway.class":"metricsReporterPromgatewayClass","metrics.reporter.promgateway.host":"metricsReporterPromgatewayHost","metrics.reporter.promgateway.port":"metricsReporterPromgatewayPort","metrics.reporter.promgateway.jobName":"metricsReporterPromgatewayJobName","metrics.reporter.promgateway.randomJobNameSuffix":"metricsReporterPromgatewayRandomJobNameSuffix","metrics.reporter.promgateway.deleteOnShutdown":"metricsReporterPromgatewayDeleteOnShutdown","historyserver.web.address":"historyserverWebAddress","historyserver.web.port":"historyserverWebPort","high-availability.cluster-id":"high-availabilityCluster-id","high-availability.zookeeper.path.root":"high-availabilityZookeeperPathRoot","high-availability.zookeeper.quorum":"high-availabilityZookeeperQuorum","jobmanager.archive.fs.dir":"jobmanagerArchiveFsDir","high-availability.storageDir":"high-availabilityStorageDir"};t.FLINK_KEY_MAP_DOTS={yarnJobmanagerHeapMb:"yarn.jobmanager.heap.mb",yarnTaskmanagerHeapMb:"yarn.taskmanager.heap.mb",yarnTaskmanagerNumberOfTaskSlots:"yarn.taskmanager.numberOfTaskSlots",yarnTaskmanagerNumberOfTaskManager:"yarn.taskmanager.numberOfTaskManager",stateCheckpointsDir:"state.checkpoints.dir","stateCheckpointsNum-retained":"state.checkpoints.num-retained",metricsReporterPromgatewayClass:"metrics.reporter.promgateway.class",metricsReporterPromgatewayHost:"metrics.reporter.promgateway.host",metricsReporterPromgatewayPort:"metrics.reporter.promgateway.port",metricsReporterPromgatewayJobName:"metrics.reporter.promgateway.jobName",metricsReporterPromgatewayRandomJobNameSuffix:"metrics.reporter.promgateway.randomJobNameSuffix",metricsReporterPromgatewayDeleteOnShutdown:"metrics.reporter.promgateway.deleteOnShutdown",historyserverWebAddress:"historyserver.web.address",historyserverWebPort:"historyserver.web.port","high-availabilityCluster-id":"high-availability.cluster-id","high-availabilityZookeeperPathRoot":"high-availability.zookeeper.path.root","high-availabilityZookeeperQuorum":"high-availability.zookeeper.quorum",jobmanagerArchiveFsDir:"jobmanager.archive.fs.dir","high-availabilityStorageDir":"high-availability.storageDir"};t.notExtKeysFlink=["typeName","high-availability.zookeeper.quorum","high-availability.storageDir","high-availability.zookeeper.path.root","metrics.reporter.promgateway.class","metrics.reporter.promgateway.host","metrics.reporter.promgateway.port","metrics.reporter.promgateway.jobName","metrics.reporter.promgateway.randomJobNameSuffix","metrics.reporter.promgateway.deleteOnShutdown","jarTmpDir","flinkPluginRoot","remotePluginRootDir","clusterMode","flinkJarPath","historyserver.web.address","historyserver.web.port","high-availability.cluster-id","yarn.jobmanager.heap.mb","yarn.taskmanager.heap.mb","yarn.taskmanager.numberOfTaskSlots","yarn.taskmanager.numberOfTaskManager","openKerberos","kerberosFile","flinkSessionSlotCount","state.checkpoints.dir","jobmanager.archive.fs.dir","state.checkpoints.num-retained"];t.notExtKeysSpark=["typeName","sparkYarnArchive","sparkSqlProxyPath","sparkPythonExtLibPath","spark.yarn.appMasterEnv.PYSPARK_PYTHON","spark.yarn.appMasterEnv.PYSPARK_DRIVER_PYTHON","openKerberos","kerberosFile"];t.notExtKeysLearning=["typeName","learning.python3.path","learning.python2.path","learning.history.address","learning.history.webapp.address","learning.history.webapp.https.address","openKerberos","kerberosFile"];t.notExtKeysDtyarnShell=["typeName","jlogstash.root","pythonConf","jupyterConf","java.home","hadoop.home.dir","openKerberos","kerberosFile"];t.notExtKeyDtscriptPython=["typeName","python2.path","python3.path"];t.notExtKeyDtscriptJupter=["typeName","jupyter.path","c.NotebookApp.open_browser","c.NotebookApp.allow_remote_access","c.NotebookApp.ip","c.NotebookApp.token","c.NotebookApp.default_url","jupyter.project.root"];t.notExtKeysSparkThrift=["jdbcUrl","username","password","driverClassName","useConnectionPool","maxPoolSize","minPoolSize","initialPoolSize","jdbcIdel","maxRows","queryTimeout","checkTimeout","openKerberos","kerberosFile"];t.notExtKeysHiveServer=["driverClassName","jdbcUrl","username","password","openKerberos","kerberosFile"];t.notExtKeysLibraSql=["jdbcUrl","username","password","driverClassName","useConnectionPool","maxPoolSize","minPoolSize","initialPoolSize","jdbcIdel","maxRows","queryTimeout","checkTimeout"];t.notExtKeysTidbSql=["jdbcUrl","username","password","driverClassName","useConnectionPool","maxPoolSize","minPoolSize","initialPoolSize","jdbcIdel","maxRows","queryTimeout","checkTimeout"];t.sourcetype=["executor.memory","driver.memory","jobmanager.memory.mb","taskmanager.memory.mb","worker.memory","executor.memory"];t.formItemLayout={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};t.formItemCenterLayout={labelCol:{xs:{span:24},sm:{span:9}},wrapperCol:{xs:{span:24},sm:{span:6}}};t.longLabelFormLayout={labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:14}}};t.specFormItemLayout={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:14}}};t.tailFormItemLayout={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}};t.rowFormItemLayout={labelCol:{span:0},wrapperCol:{span:24}};t.lineAreaChartOptions={title:{text:"堆叠区域图",textStyle:{fontSize:12},textAlign:"left"},tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985"}}},color:["#2491F7","#7460EF","#26DAD2","#79E079","#7A64F3","#FFDC53","#9a64fb"],legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},toolbox:{feature:{saveAsImage:{show:!1}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{show:!0},axisLine:{lineStyle:{color:"#DDDDDD"}},axisLabel:{textStyle:{color:"#666666"}},nameTextStyle:{color:"#666666"},splitLine:{color:"#666666"}}],yAxis:[{type:"value",axisLabel:{formatter:"{value} 个",textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",nameGap:20,axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#DDDDDD",type:"dashed"}}}],series:[]};t.doubleLineAreaChartOptions={tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985"}}},color:["#2491F7","#7460EF","#26DAD2","#79E079","#7A64F3","#FFDC53","#9a64fb"],legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},toolbox:{feature:{saveAsImage:{show:!1}}},grid:{left:"3%",right:"4%",bottom:"30",top:40,containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{show:!0},axisLine:{lineStyle:{color:"#DDDDDD"}},axisLabel:{textStyle:{color:"#666666"}},nameTextStyle:{color:"#666666"},splitLine:{color:"#666666"}}],yAxis:[{nameGap:25,type:"value",name:"调用次数",axisLabel:{textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",axisLine:{show:!1},axisTick:{show:!1},splitLine:!1,minInterval:1},{nameGap:25,type:"value",name:"失败率 (%)",axisLabel:{textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#DDDDDD",type:"dashed"}},max:100}],series:[]};t.pieOption={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"horizontal",x:"center",y:"bottom",data:["参数错误","调用超时","异常访问","超出限额","禁用","其他"],itemWidth:5,itemHeight:5,textStyle:{color:"#666"}},series:[{name:"错误类型",type:"pie",radius:["35%","55%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"}},labelLine:{normal:{show:!1}},data:[{value:335,name:"参数错误",itemStyle:{normal:{color:"#1C86EE"}}},{value:310,name:"调用超时",itemStyle:{normal:{color:"#EE9A00"}}},{value:234,name:"异常访问",itemStyle:{normal:{color:"#EE4000"}}},{value:535,name:"超出限额",itemStyle:{normal:{color:"#40E0D0"}}},{value:1158,name:"禁用",itemStyle:{normal:{color:"#71C671"}}},{value:548,name:"其他",itemStyle:{normal:{color:"#A2B5CD"}}}]}]};t.NUM_COMMA=/^[0-9,]+$/;t.PHONE_REG=/^1[3|4|5|6|7|8|9]\d{9}$/;t.EMAIL_COMMA=/^[0-9a-zA-Z@,_.-]+$/;t.EMAIL_REG=/^[0-9a-zA-Z_.-]+[@][0-9a-zA-Z_.-]+([.][a-zA-Z]+){1,2}$/;t.RESOURCE_TYPE={YARN:"YARN",KUBERNETES:"Kubernetes"}},SHuk:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("2B1R"),n("x0AG"),n("toAj"),n("qePV"),n("fbCW");var o=a(n("ZvzK")),l=a(n("4IMT")),u=a(n("Pbn2")),i=a(n("9xET")),c=a(n("qPIi")),s=a(n("ZPTe")),d=a(n("lwsE")),f=a(n("W8MJ")),p=a(n("PJYZ")),m=a(n("7W2i")),E=a(n("a1gu")),v=a(n("Nsbk")),T=a(n("lSNA")),y=a(n("Jv8k")),O=a(n("j7zX")),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=A(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),N=n("j1Tt"),g=n("LNB4"),C=a(n("RJc4")),P=a(n("Hc45")),S=a(n("VDrD")),b=a(n("6cUG"));function A(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(A=function(e){return e?n:t})(e)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,v.default)(e);if(t){var r=(0,v.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,E.default)(this,n)}}n("EgT6");var _=O.default.TabPane,I=y.default.Item,L=function(e){(0,m.default)(n,e);var t=R(n);function n(e){var a,r,o;(0,d.default)(this,n),o=t.call(this,e),(0,T.default)((0,p.default)(o),"handleMenuClick",(function(e){var t,n=o.props,a=n.comp,r=n.saveComp,l=n.getLoadTemplate,u=o.state.deployType,i=null!==(t=null==a?void 0:a.componentTypeCode)&&void 0!==t?t:"";r({componentTypeCode:i,hadoopVersion:e.key,deployType:u,isDefault:!1},N.COMP_ACTION.ADD),l(i,{compVersion:e.key,deployType:u})})),(0,T.default)((0,p.default)(o),"getMeunItem",(function(){var e,t,n=o.props,a=n.versionData,r=n.comp,l=null!==(e=null==r?void 0:r.componentTypeCode)&&void 0!==e?e:"",u=o.state.deployType;return h.createElement(y.default,{onClick:o.handleMenuClick},null===(t=a[N.VERSION_TYPE[l]])||void 0===t?void 0:t.map((function(e){e.key;var t,n=e.value,a=null==r||null===(t=r.multiVersion)||void 0===t?void 0:t.findIndex((function(e){return e.hadoopVersion==n}));return h.createElement(I,{disabled:a>-1,key:n},(0,g.isFLink)(l)?N.FLINK_DEPLOY_NAME[u]:N.COMPONENT_CONFIG_NAME[l]," ",o.getCompVersion(n))})))})),(0,T.default)((0,p.default)(o),"addMultiVersionComp",(function(e){var t,n=o.props,a=n.comp,r=n.saveComp,l=n.getLoadTemplate,u=o.state.deployType,i=null!==(t=null==a?void 0:a.componentTypeCode)&&void 0!==t?t:"";r({deployType:u,componentTypeCode:i,hadoopVersion:e,isDefault:!0},N.COMP_ACTION.ADD),l(i,{compVersion:e,deployType:u})})),(0,T.default)((0,p.default)(o),"getCompVersion",(function(e){return"110"!==e?(Number(e)/100).toFixed(1):(Number(e)/100).toFixed(2)})),(0,T.default)((0,p.default)(o),"getComponentName",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N.FLINK_DEPLOY_TYPE.YARN;return(0,g.isFLink)(e)?N.FLINK_DEPLOY_NAME[t]:N.COMPONENT_CONFIG_NAME[e]})),(0,T.default)((0,p.default)(o),"getDefaultVerionCompStatus",(function(e){var t,n=null!==(t=null==e?void 0:e.componentTypeCode)&&void 0!==t?t:"";return!(!(0,g.isFLink)(n)||1!=e.multiVersion.length)}));var l=e.comp;return o.state={deployType:null!==(a=null==l||null===(r=l.multiVersion[0])||void 0===r?void 0:r.deployType)&&void 0!==a?a:N.FLINK_DEPLOY_TYPE.YARN},o}return(0,f.default)(n,[{key:"render",value:function(){var e,t,n,a=this,r=this.props,d=r.comp,f=r.versionData,p=r.saveCompsData,m=r.testStatus,E=r.view,v=r.clusterInfo,T=r.form,y=r.saveComp,A=r.testConnects,R=r.handleConfirm,I=this.state.deployType,L=null!==(e=null==d?void 0:d.componentTypeCode)&&void 0!==e?e:"",D="c-multiVersionComp",M=this.getDefaultVerionCompStatus(d);return(null==d||null===(t=d.multiVersion[0])||void 0===t?void 0:t.hadoopVersion)?h.createElement("div",{className:D},h.createElement(O.default,{tabPosition:"top",className:"".concat(D,"__tabs"),tabBarExtraContent:h.createElement(o.default,{disabled:E,overlay:this.getMeunItem(),placement:"bottomCenter"},h.createElement(l.default,{type:"primary",size:"small",style:{marginRight:20}},"添加版本",h.createElement(u.default,{type:"down"})))},null==d?void 0:d.multiVersion.map((function(e){var t=e.deployType,n=e.componentTypeCode,r=e.hadoopVersion;return h.createElement(_,{tab:h.createElement("span",null,a.getComponentName(n,t)," ",a.getCompVersion(r),h.createElement(b.default,{testStatus:m.find((function(e){return(null==e?void 0:e.componentVersion)==r}))})),key:String(r)},h.createElement(h.Fragment,null,h.createElement(C.default,{comp:e,form:T,view:E,isDefault:M,saveCompsData:p,versionData:f,clusterInfo:v,saveComp:y}),h.createElement(P.default,{comp:e,view:E,form:T}),!E&&h.createElement(S.default,{mulitple:!0,comp:e,clusterInfo:v,form:T,saveComp:y,testConnects:A,handleConfirm:R})))})))):h.createElement("div",{className:D},h.createElement("div",{className:"".concat(D,"__intail")},(0,g.isFLink)(L)&&h.createElement(i.default,{className:"".concat(D,"__intail__row")},h.createElement(s.default,{span:10},"部署模式："),h.createElement(s.default,null,h.createElement(c.default.Group,{value:I,onChange:function(e){return a.setState({deployType:e.target.value})}},h.createElement(c.default,{value:N.FLINK_DEPLOY_TYPE.YARN},N.FLINK_DEPLOY_NAME[N.FLINK_DEPLOY_TYPE.YARN]),h.createElement(c.default,{value:N.FLINK_DEPLOY_TYPE.STANDALONE},N.FLINK_DEPLOY_NAME[N.FLINK_DEPLOY_TYPE.STANDALONE])))),h.createElement(i.default,{className:"".concat(D,"__intail__row")},h.createElement(s.default,{span:10},"选择版本："),h.createElement(s.default,{style:{display:"flex"}},null===(n=f[N.VERSION_TYPE[L]])||void 0===n?void 0:n.map((function(e){var t=e.key,n=e.value;return h.createElement("div",{key:t,className:"".concat(D,"__intail__container__desc"),onClick:function(){return a.addMultiVersionComp(n)}},h.createElement("span",{className:"comp-name"},h.createElement("img",{src:"http://127.0.0.1:8080/console/public/img/".concat(N.VERSION_TYPE[L],".png")}),h.createElement("span",null,!(0,g.isFLink)(L)&&N.COMPONENT_CONFIG_NAME[L]+" ",a.getCompVersion(n))),h.createElement(u.default,{type:"right-circle",theme:"filled"}))}))))),!E&&h.createElement(S.default,{mulitple:!1,comp:d,clusterInfo:v,form:T,saveComp:y,handleConfirm:R}))}}]),n}(h.Component);t.default=L},UANx:function(e,t,n){"use strict";n("pNMO"),n("5DmW"),n("27RR"),n("HRxU"),n("eoL8"),n("4mDm"),n("PKPk"),n("ENF9"),n("3bBZ");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("tkto"),n("2B1R"),n("ma9I"),n("rB9j"),n("UxlC"),n("yq1k"),n("JTJg"),n("J30X"),n("QWBl"),n("FZtP"),n("TeQF"),n("07d7"),n("5s+n"),n("p532"),n("qePV"),n("yXV3");var o=a(n("d1El")),l=a(n("RIqP")),u=a(n("QpBz")),i=a(n("lSNA")),c=a(n("J4zp")),s=a(n("pVnL")),d=a(n("iJl9")),f=a(n("Pbn2")),p=a(n("CC+v")),m=a(n("qu0K")),E=a(n("FAat")),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),T=n("A9pX"),y=a(n("RHHV")),O=n("RzPm");function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function N(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?N(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var C=E.default.Option,P=m.default.Item,S=p.default.confirm,b=function(e){var t=e.getFieldDecorator,n=e.lineList,a=e.taskTypeName,r=e.deleteItem,o=e.type,l=e.initialList,u=Object.keys(n);return v.default.createElement(v.default.Fragment,null,v.default.createElement("header",{className:"c-header-dynamicform"},v.default.createElement("span",null,"".concat(a,"任务")),v.default.createElement("span",{style:{cursor:"pointer"},onClick:function(){return r(o)}},v.default.createElement(f.default,{type:"delete"}))),v.default.createElement("div",{style:{paddingBottom:10}},u.map((function(e){return v.default.createElement(P,(0,s.default)({key:e,label:e},O.specFormItemLayout),t("".concat(o," ").concat(e.replace(/(\.)/g,"-")),{initialValue:(null==l?void 0:l[e])||void 0})(v.default.createElement(d.default,{placeholder:n[e]})),v.default.createElement("span",{style:{position:"absolute",right:-20}},O.sourcetype.includes(e)?"m":""))}))))},A=function(e){var t=e.form,n=e.form,a=n.getFieldDecorator,r=n.setFieldsValue,i=n.resetFields,d=e.visible,h=e.onOk,N=e.onCancel,A=e.title,R=e.isBindTenant,_=e.clusterId,I=e.tenantId,L=e.queueId,D=e.clusterList,M=(0,v.useState)(!1),k=(0,c.default)(M,2),j=k[0],w=k[1],F=(0,v.useState)({current:void 0,union:[]}),U=(0,c.default)(F,2),V=U[0],x=U[1],B=(0,v.useState)([]),Y=(0,c.default)(B,2),K=Y[0],G=Y[1],H=(0,v.useState)({}),q=(0,c.default)(H,2),W=q[0],Q=q[1],J=(0,v.useRef)(null),z=(0,T.useEnv)({clusterId:_,form:t,visible:d,clusterList:D}).queueList;(0,v.useEffect)((function(){J.current!==d&&(d?(y.default.queryTaskResourceLimits({dtUicTenantId:I}).then((function(e){var t=e.code,n=e.data;if(1===t){var a=[],r={};Array.isArray(n)&&n.forEach((function(e){a.push(e.taskType),r["".concat(e.taskType)]=e.resourceLimit})),Q(r),x((function(e){return g(g({},e),{},{union:a})}))}})),y.default.getTaskResourceTemplate({}).then((function(e){1===e.code&&G(e.data)}))):(i(),x({current:void 0,union:[]}),G([]))),J.current=d}),[i,I,d]);var Z=function(){(0,(null==e?void 0:e.form).validateFields)((function(e,t){if(!e){var n=JSON.stringify(V.union.map((function(e){return K.map((function(n){if(e===n.taskType){var a=Object.keys(n.params),r={taskType:e,resourceParams:{}};return a.forEach((function(n){r.resourceParams[n]=null==t?void 0:t["".concat(e," ").concat(n).replace(/(\.)/g,"-")]})),r}}))})).map((function(e){return e.filter((function(e){return void 0!==e}))[0]})));w(!0),y.default.switchQueue({queueId:null==t?void 0:t.queueId,tenantId:I,taskTypeResourceJson:n}).then((function(e){if(1===e.code)return u.default.success("提交成功"),h();u.default.error("提交失败")})).finally((function(){w(!1)}))}}))},X=function(){var e=V.current,t=V.union;void 0===e||isNaN(e)?u.default.warning("请先选择任务类型"):0!==t.length&&t.includes(e)?u.default.warning("该任务的资源限制已存在！"):(x({current:e,union:[].concat((0,l.default)(t),[e])}),r({resourceType:e}))},$=function(e){var t=V.union;void 0!==e&&(-1!==t.indexOf(e)&&x(g(g({},V),{},{union:(0,l.default)(t.filter((function(t){return t!==e})))})))};return v.default.createElement(p.default,{title:A,visible:d,onOk:function(){return Z()},onCancel:function(){S({title:"是否保存配置？",content:"若不保存编辑内容，再次打开时会进行重置",okText:"保存",cancelText:"返回",onOk:function(){Z()},onCancel:function(){N()}})},width:"600px",confirmLoading:j,className:R?"no-padding-modal":""},v.default.createElement(m.default,null,v.default.createElement(P,(0,s.default)({label:v.default.createElement("span",null,"资源队列 ",v.default.createElement(o.default,{title:"指Yarn上分配的资源队列，若下拉列表中无全部队列，请前往“多集群管理”页面的具体集群中刷新集群"},v.default.createElement(f.default,{type:"question-circle-o"})))},O.formItemLayout),a("queueId",{rules:[{required:!0,message:"租户不可为空！"}],initialValue:L||void 0})(v.default.createElement(E.default,{allowClear:!0,placeholder:"请选择资源队列"},z.map((function(e){return v.default.createElement(C,{key:e.queueId,value:e.queueId},e.queueName)}))))),v.default.createElement(P,(0,s.default)({label:v.default.createElement("span",null,"资源限制 ",v.default.createElement(o.default,{title:"设置租户下单个离线任务在临时运行和周期运行时能使用的最大资源数，任务的环境参数设置超出此限制将导致任务提交或运行失败。保存变更后立即生效。"},v.default.createElement(f.default,{type:"question-circle-o"})))},O.formItemLayout),a("resourceType",{})(v.default.createElement(E.default,{allowClear:!0,placeholder:"请选择任务类型",onChange:function(e){return function(e){x(g(g({},V),{},{current:Number(e)}))}(e)}},K.map((function(e){return v.default.createElement(C,{key:e.taskType,value:e.taskType},e.taskTypeName)})))),v.default.createElement("div",{className:"o-div--actionDom",onClick:X},v.default.createElement(f.default,{className:"o-icon--actionDom",type:"plus-circle"}),"添加资源限制")),V.union.map((function(e){return K.map((function(t,n){return v.default.createElement("div",{key:n,className:"o-block--dynamic"},t.taskType===e?v.default.createElement(b,{type:e,getFieldDecorator:a,lineList:t.params,taskTypeName:t.taskTypeName,deleteItem:$,initialList:W[e]}):null)}))}))))},R=function(e,t){return(null==e?void 0:e.visible)===(null==t?void 0:t.visible)&&!0!==(null==t?void 0:t.visible)},_=m.default.create()(v.default.memo(A,R));t.default=_},Uu3x:function(e,t,n){"use strict";n("SuFq"),n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I"),n("zKZe"),n("wLYn");var o=a(n("DtFj")),l=a(n("s4l/")),u=a(n("4IMT")),i=a(n("QpBz")),c=a(n("h0/l")),s=a(n("lwsE")),d=a(n("W8MJ")),f=a(n("PJYZ")),p=a(n("7W2i")),m=a(n("a1gu")),E=a(n("Nsbk")),v=a(n("lSNA")),T=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),y=n("dtw8"),O=a(n("wd/R")),h=a(n("C+lx")),N=a(n("RHHV"));function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,v.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,E.default)(e);if(t){var r=(0,E.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,m.default)(this,n)}}var b=function(e){(0,p.default)(n,e);var t=S(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,v.default)((0,f.default)(e),"state",{dataSource:[],table:{pageIndex:1,total:0,loading:!0},newClusterModal:!1,editModalKey:""}),(0,v.default)((0,f.default)(e),"newCluster",(function(){e.setState({editModalKey:Math.random(),newClusterModal:!0})})),(0,v.default)((0,f.default)(e),"handleTableChange",(function(t,n,a){var r=Object.assign(e.state.table,{loading:!0});e.setState({table:r},e.getResourceList)})),(0,v.default)((0,f.default)(e),"onPageChange",(function(t){e.setState({table:Object.assign(e.state.table,{pageIndex:t,loading:!0})},e.getResourceList)})),e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.getResourceList()}},{key:"getResourceList",value:function(){var e=this,t=this.state.table,n=t.pageIndex;N.default.getClusterList({currentPage:n,pageSize:15}).then((function(n){1==n.code?e.setState({dataSource:n.data.data,table:P(P({},t),{},{loading:!1,total:n.data.totalCount})}):e.setState({table:P(P({},t),{},{loading:!1})})}))}},{key:"getPagination",value:function(){var e=this.state.table;return{current:e.pageIndex,pageSize:15,total:e.total}}},{key:"initTableColumns",value:function(){var e=this;return[{title:"集群名称",dataIndex:"clusterName"},{title:"修改时间",dataIndex:"gmtModified",render:function(e){return(0,O.default)(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"操作",dataIndex:"deal",width:"170px",render:function(t,n){return T.createElement("div",null,T.createElement("a",{onClick:e.viewCluster.bind(e,n)},"查看"),T.createElement("span",{className:"ant-divider"}),T.createElement(c.default,{placement:"topRight",title:"删除集群后不可恢复，确认删除集群 ".concat(n.clusterName,"?"),onConfirm:e.deleteCluster.bind(e,n),okText:"确认",cancelText:"取消"},T.createElement("a",null,"删除")))}}]}},{key:"deleteCluster",value:function(e){var t=this;N.default.deleteCluster({clusterId:e.clusterId}).then((function(e){1===e.code&&(i.default.success("集群删除成功"),t.getResourceList())}))}},{key:"viewCluster",value:function(e){y.hashHistory.push({pathname:"/console-ui/clusterManage/editCluster",state:{cluster:e,mode:"view"}})}},{key:"onCancel",value:function(){this.setState({newClusterModal:!1})}},{key:"onSubmit",value:function(e){var t=this;N.default.addCluster(P({},e)).then((function(e){1===e.code&&(t.onCancel(),y.hashHistory.push({pathname:"/console-ui/clusterManage/editCluster",state:{mode:"new",cluster:e.data}}),i.default.success("集群新增成功！"))}))}},{key:"render",value:function(){var e=this.state,t=e.dataSource,n=e.table,a=e.newClusterModal,r=e.editModalKey,i=n.loading,c=this.initTableColumns(),s={total:n.total,current:n.pageIndex,pageSize:15,size:"small",showTotal:function(e){return T.createElement("span",null,"共",T.createElement("span",{style:{color:"#3F87FF"}},e),"条数据，每页显示",15,"条")},onChange:this.onPageChange};return T.createElement(T.Fragment,null,T.createElement("div",{className:"c-clusterManage__title"},T.createElement("span",{className:"c-clusterManage__title__span"},"多集群管理"),T.createElement(u.default,{className:"c-clusterManage__title__btn",type:"primary",onClick:this.newCluster},"新增集群")),T.createElement("div",{className:"contentBox"},T.createElement(o.default,{rowKey:function(e,t){return"clusterManage-".concat(e.id)},className:"dt-table-fixed-contain-footer",scroll:{y:!0},style:{height:"calc(100vh - 90px)"},pagination:!1,loading:i,dataSource:t,columns:c,onChange:this.handleTableChange,footer:function(){return T.createElement(l.default,s)}})),T.createElement(h.default,{key:r,title:"新增集群",visible:a,onCancel:this.onCancel.bind(this),onOk:this.onSubmit.bind(this)}))}}]),n}(T.Component);t.default=b},VDrD:function(e,t,n){"use strict";n("SuFq"),n("pNMO"),n("TeQF"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I"),n("yq1k"),n("JTJg"),n("tkto"),n("sMBO"),n("toAj"),n("qePV");var o=a(n("h0/l")),l=a(n("4IMT")),u=a(n("Pbn2")),i=a(n("CC+v")),c=a(n("QpBz")),s=a(n("lwsE")),d=a(n("W8MJ")),f=a(n("PJYZ")),p=a(n("7W2i")),m=a(n("a1gu")),E=a(n("Nsbk")),v=a(n("lSNA")),T=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=N(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),y=a(n("RHHV")),O=n("j1Tt"),h=n("LNB4");function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(N=function(e){return e?n:t})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,v.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,E.default)(e);if(t){var r=(0,E.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,m.default)(this,n)}}var S=function(e){(0,p.default)(n,e);var t=P(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,v.default)((0,f.default)(e),"state",{loading:!1}),(0,v.default)((0,f.default)(e),"onOk",(function(){var t,n,a,r=e.props,o=r.form,l=r.comp,u=r.clusterInfo,i=r.saveComp,s=r.mulitple,d=null!==(t=null==l?void 0:l.componentTypeCode)&&void 0!==t?t:"",f=null!==(n=null==l?void 0:l.hadoopVersion)&&void 0!==n?n:"",p=null!==(a=null==l?void 0:l.deployType)&&void 0!==a?a:"";o.validateFields(null,{},(function(e,t){var n,a,r,o,m,E,v,T,O,N,g,P,S,b;if(e&&Object.keys(e).includes(String(d)))c.default.error("请检查配置");else{var A,R,_=t[d];if(s&&f&&(_=t[d][f]),(0,h.isNeedTemp)(d)||(A=JSON.stringify((0,h.handleComponentConfigAndCustom)(_,d))),(0,h.isNeedTemp)(d))A=JSON.stringify(C(C({},null===(R=_)||void 0===R?void 0:R.specialConfig),(0,h.handleCustomParam)(_.customParam,!0)));(0,h.isKubernetes)(d)&&(A=JSON.stringify(null===(n=_)||void 0===n?void 0:n.specialConfig));var I={isDefault:null!==(a=null===(r=_)||void 0===r?void 0:r.isDefault)&&void 0!==a?a:"",storeType:null!==(o=null===(m=_)||void 0===m?void 0:m.storeType)&&void 0!==o?o:"",principal:null!==(E=null===(v=_)||void 0===v?void 0:v.principal)&&void 0!==E?E:"",principals:null!==(T=null===(O=_)||void 0===O?void 0:O.principals)&&void 0!==T?T:[],hadoopVersion:s?f:_.hadoopVersion||"",isMetadata:_.isMetadata?1:0,componentTemplate:(0,h.isNeedTemp)(d)?_.customParam?JSON.stringify((0,h.handleCustomParam)(_.customParam)):"[]":JSON.stringify((0,h.handleComponentTemplate)(_,l)),componentConfig:A};y.default.saveComponent(C(C({},I),{},{deployType:p,clusterId:u.clusterId,componentCode:d,clusterName:u.clusterName,resources1:null!==(N=null===(g=_)||void 0===g?void 0:g.uploadFileName)&&void 0!==N?N:"",resources2:"",kerberosFileName:null!==(P=null===(S=_)||void 0===S||null===(b=S.kerberosFileName)||void 0===b?void 0:b.name)&&void 0!==P?P:""})).then((function(e){var t,n,a,r;1==e.code&&(i(C(C({},I),{},{id:e.data.id,componentTypeCode:d,deployType:p,uploadFileName:null!==(t=null===(n=_)||void 0===n?void 0:n.uploadFileName)&&void 0!==t?t:"",kerberosFileName:null!==(a=null===(r=_)||void 0===r?void 0:r.kerberosFileName)&&void 0!==a?a:""})),c.default.success("保存成功"))}))}}))})),(0,v.default)((0,f.default)(e),"testConnects",(function(){var t,n,a,r,o,l=null!==(t=null===(n=e.props.comp)||void 0===n?void 0:n.componentTypeCode)&&void 0!==t?t:"",u=(0,h.isMultiVersion)(l)?null===(a=e.props.comp)||void 0===a?void 0:a.hadoopVersion:"",i=null!==(r=null===(o=e.props.comp)||void 0===o?void 0:o.deployType)&&void 0!==r?r:"";e.props.testConnects({typeCode:l,hadoopVersion:u,deployType:i},(function(t){e.setState({loading:t})}))})),(0,v.default)((0,f.default)(e),"onConfirm",(function(){var t,n,a=e.props,r=a.form,o=a.comp,l=null!==(t=null==o?void 0:o.componentTypeCode)&&void 0!==t?t:"",u=(0,h.isMultiVersion)(l)?null===(n=e.props.comp)||void 0===n?void 0:n.hadoopVersion:"",i=(0,h.handleComponentConfig)({componentConfig:(null==o?void 0:o.componentConfig)?JSON.parse(null==o?void 0:o.componentConfig):{}},!0),c=(0,h.isMultiVersion)(l)?(0,v.default)({},u,{componentConfig:i}):{componentConfig:i};r.setFieldsValue((0,v.default)({},l,c))})),(0,v.default)((0,f.default)(e),"showModal",(function(){var t=e.props,n=t.comp,a=t.handleConfirm,r=t.mulitple;i.default.confirm({title:"确认要删除组件？",content:"此操作执行后不可逆，是否确认将当前组件删除？",icon:T.createElement(u.default,{type:"close-circle",theme:"filled",style:{color:"#FF5F5C"}}),okText:"删除",okType:"danger",cancelText:"取消",onOk:function(){a(O.COMP_ACTION.DELETE,n,r)},onCancel:function(){}})})),e}return(0,d.default)(n,[{key:"render",value:function(){var e,t,n,a=this.state.loading,r=this.props,u=r.comp,i=r.mulitple,c=null!==(e=null==u?void 0:u.componentTypeCode)&&void 0!==e?e:"",s=null!==(t=null==u?void 0:u.hadoopVersion)&&void 0!==t?t:"",d=null!==(n=null==u?void 0:u.deployType)&&void 0!==n?n:"",f=O.COMPONENT_CONFIG_NAME[c],p=((0,h.isFLink)(c)?O.FLINK_DEPLOY_NAME[null!=d?d:O.FLINK_DEPLOY_TYPE.YARN]:O.COMPONENT_CONFIG_NAME[c])+" "+(Number(s)/100).toFixed(2);return(0,h.isMultiVersion)(c)&&!i?T.createElement("div",{className:"c-toolbar__container"},T.createElement(l.default,{style:{marginLeft:8},onClick:this.showModal},"删除","".concat(f),"组件")):T.createElement("div",{className:"c-toolbar__container"},T.createElement(o.default,{title:"确认取消当前更改？",okText:"确认",cancelText:"取消",onConfirm:this.onConfirm},T.createElement(l.default,null,"取消")),T.createElement(l.default,{style:{marginLeft:8},onClick:this.showModal},"删除".concat(i?p:f,"组件")),T.createElement(l.default,{style:{marginLeft:8},loading:a,ghost:!0,onClick:this.testConnects},"测试".concat(i?p:f,"连通性")),T.createElement(l.default,{style:{marginLeft:8},type:"primary",onClick:this.onOk},"保存".concat(i?p:f,"组件")))}}]),n}(T.PureComponent);t.default=S},"Wg/u":function(e,t,n){"use strict";function a(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}n("eoL8"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e.prototype.shouldComponentUpdate=function(e,t){return!a(this.state,t)||!a(this.props,e)}}},WlhX:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I");var o=a(n("qu0K")),l=a(n("d1El")),u=a(n("Pbn2")),i=a(n("g4D/")),c=a(n("lwsE")),s=a(n("W8MJ")),d=a(n("PJYZ")),f=a(n("7W2i")),p=a(n("a1gu")),m=a(n("Nsbk")),E=a(n("lSNA")),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),T=n("j1Tt");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}var h=function(e){(0,f.default)(n,e);var t=O(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,E.default)((0,d.default)(e),"getCheckValue",(function(){var t,n=e.props,a=n.comp;return!!n.isDefault||null!==(t=null==a?void 0:a.isDefault)&&void 0!==t&&t})),(0,E.default)((0,d.default)(e),"validDefaultdata",(function(t,n,a){e.props.isDefault&&!n&&a("请设置默认版本"),a()})),(0,E.default)((0,d.default)(e),"handleChange",(function(t){var n,a,r=e.props,o=r.form,l=r.comp,u=r.isDefault,i=null!==(n=null==l?void 0:l.componentTypeCode)&&void 0!==n?n:"",c=null!==(a=null==l?void 0:l.hadoopVersion)&&void 0!==a?a:"";u||o.setFieldsValue((0,E.default)({},"".concat(i,".").concat(T.MAPPING_DEFAULT_VERSION[c],".isDefault"),!t.target.checked)),o.setFieldsValue((0,E.default)({},"".concat(i,".").concat(c,".isDefault"),t.target.checked))})),e}return(0,s.default)(n,[{key:"componentDidUpdate",value:function(e){var t,n,a=this.props,r=a.comp,o=a.isDefault,l=a.form,u=null!==(t=null==r?void 0:r.componentTypeCode)&&void 0!==t?t:"",i=null!==(n=null==r?void 0:r.hadoopVersion)&&void 0!==n?n:"";o&&o!==e.isDefault&&l.setFieldsValue((0,E.default)({},"".concat(u,".").concat(i,".isDefault"),!0))}},{key:"render",value:function(){var e,t,n=this.props,a=n.form,r=n.comp,c=n.view,s=null!==(e=null==r?void 0:r.componentTypeCode)&&void 0!==e?e:"",d=null!==(t=null==r?void 0:r.hadoopVersion)&&void 0!==t?t:"";return v.createElement(v.Fragment,null,v.createElement(o.default.Item,{label:null,colon:!1},a.getFieldDecorator("".concat(s,".").concat(d,".isDefault"),{valuePropName:"checked",initialValue:this.getCheckValue(),rules:[{validator:this.validDefaultdata}]})(v.createElement(i.default,{disabled:c,onChange:this.handleChange},"设置为默认版本")),v.createElement(l.default,{overlayClassName:"big-tooltip",title:"默认版本将用于离线开发的数据同步与实时开发的实时采集"},v.createElement(u.default,{style:{marginLeft:4},type:"question-circle-o"}))))}}]),n}(v.PureComponent);t.default=h},XdBI:function(e,t,n){"use strict";n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("+2oP"),n("2B1R"),n("T63A"),n("ma9I");var o=a(n("o0o1")),l=a(n("DtFj")),u=a(n("s4l/")),i=a(n("qu0K")),c=a(n("h0/l")),s=a(n("4IMT")),d=a(n("QpBz")),f=a(n("lSNA")),p=a(n("yXPU")),m=a(n("J4zp")),E=a(n("CC+v")),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),T=a(n("RHHV")),y=n("RzPm");function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=E.default.confirm,C=function(e){var t=(0,v.useState)({currentPage:1,total:0,pageSize:15}),n=(0,m.default)(t,2),a=n[0],r=n[1],f=(0,v.useState)({alertGateType:[],reFreshKey:""}),E=(0,m.default)(f,2),O=E[0],h=E[1],C=function(){h((function(e){return N(N({},e),{},{reFreshKey:Math.random()})}))},P=function(){var e=(0,p.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.default.deleteAlarmRule({id:t});case 2:1===e.sent.code&&(d.default.success("删除成功！"),C());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var t=(0,p.default)(o.default.mark((function t(n){var a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.default.getByAlertId({id:n});case 2:1===(a=t.sent).code&&e.router.push({pathname:"/console-ui/alarmChannel/alarmRule",state:{id:n,ruleData:a.data||{}}});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),b=function(e){var t=e.alertId,n=e.alertGateType,a=e.alertGateName,r="".concat(y.ALARM_TYPE_TEXT[n].slice(0,2),"默认通道");g({title:"确定将“".concat(a,"(通道名称)” 设为").concat(r,"吗"),content:"设置为默认告警通道后，各应用的告警信息将走此通道",onOk:function(){T.default.setDefaultAlert({alertId:t,alertGateType:n}).then((function(e){1===e.code&&(d.default.success("操作成功"),C())}))},onCancel:function(){}})},A=function(e){r((function(t){return N(N({},t),{},{currentPage:e||1})}))},R=function(e,t){var n=(0,v.useState)(!1),a=(0,m.default)(n,2),l=a[0],u=a[1],i=(0,v.useState)([]),c=(0,m.default)(i,2),s=c[0],d=c[1],f=t.currentPage,E=t.pageSize,y=O.alertGateType,h=O.reFreshKey;return(0,v.useEffect)((function(){(function(){var e=(0,p.default)(o.default.mark((function e(){var t,n;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,T.default.getAlarmRuleList({currentPage:f,pageSize:E,alertGateType:y});case 3:(t=e.sent)&&1==t.code&&(d((null===(n=t.data)||void 0===n?void 0:n.data)||[]),r((function(e){return N(N({},e),{},{total:t.data.totalCount})}))),u(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then()}),[f,y,E,h]),[{loading:l,alarmList:s}]}(0,a),_=(0,m.default)(R,1)[0],I=_.loading,L=_.alarmList;return v.default.createElement("div",{className:"alarm__wrapper"},v.default.createElement(i.default,{layout:"inline"},v.default.createElement(i.default.Item,null,v.default.createElement(s.default,{className:"alarm-btn",type:"primary",onClick:function(){e.router.push({pathname:"/console-ui/alarmChannel/alarmConfig"})}},"SFTP配置"),v.default.createElement(s.default,{className:"alarm-btn",type:"primary",onClick:function(){e.router.push({pathname:"/console-ui/alarmChannel/alarmRule",query:{isCreate:!0}})}},"新增告警通道"))),v.default.createElement(l.default,{className:"dt-table-fixed-contain-footer",scroll:{y:!0},style:{height:"calc(100vh - 90px)"},loading:I,columns:[{title:"通道名称",dataIndex:"alertGateName",render:function(e,t){var n="".concat(y.ALARM_TYPE_TEXT[t.alertGateType].slice(0,2),"默认通道");return v.default.createElement("span",{className:"alarm-name-wrap"},v.default.createElement("span",{className:"alarm-name"},e),t.isDefault?v.default.createElement(s.default,{className:"alarm-btn",disabled:!0},n):null)}},{title:"通道类型",dataIndex:"alertGateType",filters:Object.entries(y.ALARM_TYPE_TEXT).map((function(e){var t=(0,m.default)(e,2),n=t[0];return{text:t[1],value:n}})),render:function(e){return y.ALARM_TYPE_TEXT[e]}},{title:"通道标识",dataIndex:"alertGateSource"},{title:"操作",dataIndex:"opera",render:function(e,t){var n=t.alertId,a="".concat(y.ALARM_TYPE_TEXT[t.alertGateType].slice(0,2),"默认通道");return v.default.createElement("span",null,v.default.createElement("a",{onClick:function(){S(n)}},"编辑"),v.default.createElement("span",{className:"ant-divider"}),v.default.createElement(c.default,{title:"确认删除该告警通道？",okText:"确定",cancelText:"取消",onConfirm:function(){P(n)}},v.default.createElement("a",null,"删除")),!t.isDefault&&t.alertGateType!==y.ALARM_TYPE.CUSTOM&&v.default.createElement(v.default.Fragment,null,v.default.createElement("span",{className:"ant-divider"}),v.default.createElement("a",{onClick:function(){b(t)}},"设为".concat(a))))}}],dataSource:L,pagination:!1,onChange:function(e,t,n){h((function(e){return N(N({},e),{},{alertGateType:t.alertGateType||[]})}))},footer:function(){return v.default.createElement(u.default,{current:a.currentPage,pageSize:a.pageSize,size:"small",total:a.total,onChange:A,showTotal:function(e){return v.default.createElement("span",null,"共",v.default.createElement("span",{style:{color:"#3F87FF"}},e),"条数据，每页显示",a.pageSize,"条")}})}}))};t.default=C},Y5Yc:function(e,t,n){"use strict";n("4mDm"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.onChange=function(){return g.apply(this,arguments)},t.registeCompleteItemsProvider=function(e,t){var n=t.getModel().id;v[n]=e},t.disposeProvider=function(e){if(!e)return;var t=e.getModel().id;v[t]=void 0};var o=a(n("o0o1"));n("07d7"),n("5s+n"),n("pjDv"),n("PKPk"),n("DQNa"),n("2B1R"),n("TeQF"),n("ma9I"),n("rB9j"),n("UxlC");var l=a(n("yXPU")),u=a(n("J4zp")),i=a(n("lwsE")),c=a(n("W8MJ")),s=a(n("lSNA")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=p(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("wsa1")),f=a(n("AHgm"));function p(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(p=function(e){return e?n:t})(e)}var m,E=[],v={},T=[],y=function(){function e(){var t=this;(0,i.default)(this,e),(0,s.default)(this,"_parser",void 0),(0,s.default)(this,"_eventMap",void 0),this._parser=new f.default,this._eventMap={},this._parser.onmessage=function(e){var n=e.data,a=n.eventId;t._eventMap[a]&&(t._eventMap[a].resolve(n.result),t._eventMap[a]=null)}}return(0,c.default)(e,[{key:"parseSyntax",value:function(){var e=this,t=arguments,n=this._createId();return new Promise((function(a,r){e._parser.postMessage({eventId:n,type:"parseSyntax",data:Array.from(t)}),e._eventMap[n]={resolve:a,reject:r,arg:t,type:"parseSyntax"}}))}},{key:"_createId",value:function(){return(new Date).getTime()+""+~~(1e5*Math.random())}}]),e}();function O(){return m||(m=new y),m}function h(e){return e?e.map((function(e,t){var n=(0,u.default)(e,4),a=n[0],r=n[1],o=n[2],l=n[3];return o=o||"3000",{label:a,kind:d.languages.CompletionItemKind[l||"Text"],detail:r,insertText:{value:"Function"==l?a+"($1) ":a},sortText:o+t+a}})):[]}function N(){if(!E.length){var e={keywords:["A","ABS","ABSOLUTE","ACTION","ADA","ADD","ADMIN","AFTER","ALL","ALLOCATE","ALLOW","ALTER","ALWAYS","AND","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSERTION","ASSIGNMENT","ASYMMETRIC","AT","ATOMIC","ATTRIBUTE","ATTRIBUTES","AUTHORIZATION","AVG","BEFORE","BEGIN","BERNOULLI","BETWEEN","BIGINT","BINARY","BIT","BLOB","BOOLEAN","BOTH","BREADTH","BY","C","CALL","CALLED","CARDINALITY","CASCADE","CASCADED","CASE","CAST","CATALOG","CATALOG_NAME","CEIL","CEILING","CENTURY","CHAIN","CHAR","CHARACTER","CHARACTERISTICS","CHARACTERS","CHARACTER_LENGTH","CHARACTER_SET_CATALOG","CHARACTER_SET_NAME","CHARACTER_SET_SCHEMA","CHAR_LENGTH","CHECK","CLASS_ORIGIN","CLOB","CLOSE","COALESCE","COBOL","COLLATE","COLLATION","COLLATION_CATALOG","COLLATION_NAME","COLLATION_SCHEMA","COLLECT","COLUMN","COLUMN_NAME","COMMAND_FUNCTION","COMMAND_FUNCTION_CODE","COMMIT","COMMITTED","CONDITION","CONDITION_NUMBER","CONNECT","CONNECTION","CONNECTION_NAME","CONSTRAINT","CONSTRAINTS","CONSTRAINT_CATALOG","CONSTRAINT_NAME","CONSTRAINT_SCHEMA","CONSTRUCTOR","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_CATALOG","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CURSOR_NAME","CYCLE","DATA","DATABASE","DATE","DATETIME_INTERVAL_CODE","DATETIME_INTERVAL_PRECISION","DAY","DEALLOCATE","DEC","DECADE","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFERRABLE","DEFERRED","DEFINED","DEFINER","DEGREE","DELETE","DENSE_RANK","DEPTH","DEREF","DERIVED","DESC","DESCRIBE","DESCRIPTION","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISALLOW","DISCONNECT","DISPATCH","DISTINCT","DOMAIN","DOUBLE","DOW","DOY","DROP","DYNAMIC","DYNAMIC_FUNCTION","DYNAMIC_FUNCTION_CODE","EACH","ELEMENT","ELSE","END","END","-","EXEC","EPOCH","EQUALS","ESCAPE","EVERY","EXCEPT","EXCEPTION","EXCLUDE","EXCLUDING","EXEC","EXECUTE","EXISTS","EXP","EXPLAIN","EXTEND","EXTERNAL","EXTRACT","FALSE","FETCH","FILTER","FINAL","FIRST","FIRST_VALUE","FLOAT","FLOOR","FOLLOWING","FOR","FOREIGN","FORTRAN","FOUND","FRAC_SECOND","FREE","FROM","FULL","FUNCTION","FUSION","G","GENERAL","GENERATED","GET","GLOBAL","GO","GOTO","GRANT","GRANTED","GROUP","GROUPING","HAVING","HIERARCHY","HOLD","HOUR","IDENTITY","IMMEDIATE","IMPLEMENTATION","IMPORT","IN","INCLUDING","INCREMENT","INDICATOR","INITIALLY","INNER","INOUT","INPUT","INSENSITIVE","INSERT","INSTANCE","INSTANTIABLE","INT","INTEGER","INTERSECT","INTERSECTION","INTERVAL","INTO","INVOKER","IS","ISOLATION","JAVA","JOIN","K","KEY","KEY_MEMBER","KEY_TYPE","LABEL","LANGUAGE","LARGE","LAST","LAST_VALUE","LATERAL","LEADING","LEFT","LENGTH","LEVEL","LIBRARY","LIKE","LIMIT","LN","LOCAL","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOWER","M","MAP","MATCH","MATCHED","MAX","MAXVALUE","MEMBER","MERGE","MESSAGE_LENGTH","MESSAGE_OCTET_LENGTH","MESSAGE_TEXT","METHOD","MICROSECOND","MILLENNIUM","MIN","MINUTE","MINVALUE","MOD","MODIFIES","MODULE","MONTH","MORE","MULTISET","MUMPS","NAME","NAMES","NATIONAL","NATURAL","NCHAR","NCLOB","NESTING","NEW","NEXT","NO","NONE","NORMALIZE","NORMALIZED","NOT","NULL","NULLABLE","NULLIF","NULLS","NUMBER","NUMERIC","OBJECT","OCTETS","OCTET_LENGTH","OF","OFFSET","OLD","ON","ONLY","OPEN","OPTION","OPTIONS","OR","ORDER","ORDERING","ORDINALITY","OTHERS","OUT","OUTER","OUTPUT","OVER","OVERLAPS","OVERLAY","OVERRIDING","PAD","PARAMETER","PARAMETER_MODE","PARAMETER_NAME","PARAMETER_ORDINAL_POSITION","PARAMETER_SPECIFIC_CATALOG","PARAMETER_SPECIFIC_NAME","PARAMETER_SPECIFIC_SCHEMA","PARTIAL","PARTITION","PASCAL","PASSTHROUGH","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PLACING","PLAN","PLI","POSITION","POWER","PRECEDING","PRECISION","PREPARE","PRESERVE","PRIMARY","PRIOR","PRIVILEGES","PROCEDURE","PUBLIC","QUARTER","RANGE","RANK","READ","READS","REAL","RECURSIVE","REF","REFERENCES","REFERENCING","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELATIVE","RELEASE","REPEATABLE","RESET","RESTART","RESTRICT","RESULT","RETURN","RETURNED_CARDINALITY","RETURNED_LENGTH","RETURNED_OCTET_LENGTH","RETURNED_SQLSTATE","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUTINE","ROUTINE_CATALOG","ROUTINE_NAME","ROUTINE_SCHEMA","ROW","ROWS","ROW_COUNT","ROW_NUMBER","SAVEPOINT","SCALE","SCHEMA","SCHEMA_NAME","SCOPE","SCOPE_CATALOGS","SCOPE_NAME","SCOPE_SCHEMA","SCROLL","SEARCH","SECOND","SECTION","SECURITY","SELECT","SELF","SENSITIVE","SEQUENCE","SERIALIZABLE","SERVER","SERVER_NAME","SESSION","SESSION_USER","SET","SETS","SIMILAR","SIMPLE","SIZE","SMALLINT","SOME","SOURCE","SPACE","SPECIFIC","SPECIFICTYPE","SPECIFIC_NAME","SQL","SQLEXCEPTION","SQLSTATE","SQLWARNING","SQL_TSI_DAY","SQL_TSI_FRAC_SECOND","SQL_TSI_HOUR","SQL_TSI_MICROSECOND","SQL_TSI_MINUTE","SQL_TSI_MONTH","SQL_TSI_QUARTER","SQL_TSI_SECOND","SQL_TSI_WEEK","SQL_TSI_YEAR","SQRT","START","STATE","STATEMENT","STATIC","STDDEV_POP","STDDEV_SAMP","STREAM","STRUCTURE","STYLE","SUBCLASS_ORIGIN","SUBMULTISET","SUBSTITUTE","SUBSTRING","SYMMETRIC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLE_NAME","TEMPORARY","THEN","TIES","TIME","TIMESTAMP","TIMESTAMPADD","TIMESTAMPDIFF","TIMEZONE_HOUR","TIMEZONE_MINUTE","TINYINT","TO","TOP_LEVEL_COUNT","TRAILING","TRANSACTION","TRANSACTIONS_ACTIVE","TRANSACTIONS_COMMITTED","TRANSACTIONS_ROLLED_BACK","TRANSFORM","TRANSFORMS","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIGGER_CATALOG","TRIGGER_NAME","TRIGGER_SCHEMA","TRIM","TRUE","TYPE","UESCAPE","UNBOUNDED","UNCOMMITTED","UNDER","UNION","UNIQUE","UNKNOWN","UNNAMED","UNNEST","UPDATE","UPPER","UPSERT","USAGE","USER","USER_DEFINED_TYPE_CATALOG","USER_DEFINED_TYPE_CODE","USER_DEFINED_TYPE_NAME","USER_DEFINED_TYPE_SCHEMA","USING","VALUE","VALUES","VARBINARY","VARCHAR","VARYING","VAR_POP","VAR_SAMP","VERSION","VIEW","WEEK","WHEN","WHENEVER","WHERE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WORK","WRAPPER","WRITE","XML","YEAR","ZONE"]},t=[].concat(e.builtinFunctions).concat(e.windowsFunctions).concat(e.innerFunctions).concat(e.otherFunctions).filter(Boolean),n=[].concat(e.keywords);E=function(e){return e.map((function(e,t){return{label:e,kind:d.languages.CompletionItemKind.Keyword,detail:"关键字",insertText:e+" ",sortText:"1000"+t+e,filterText:e.toLowerCase()}}))}(n).concat(function(e){return e.map((function(e,t){return{label:e,kind:d.languages.CompletionItemKind.Function,detail:"函数",insertText:{value:e+"($1) "},sortText:"2000"+t+e,filterText:e.toLowerCase()}}))}(t))}return E}function g(){return(g=(0,l.default)(o.default.mark((function e(){var t,n,a,r,l,u,i,c,s,f=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.length>0&&void 0!==f[0]?f[0]:"",n=f.length>1?f[1]:void 0,a=f.length>2?f[2]:void 0,r=O(),l=n.getModel(),e.next=7,r.parseSyntax(t.replace(/\r\n/g,"\n"));case 7:(u=e.sent)?(i=u.errorMsg,c=n.getModel().getPositionAt(u.token.start),s=n.getModel().getPositionAt(u.token.stop),d.editor.setModelMarkers(l,l.getModeId(),[{startLineNumber:c.lineNumber,startColumn:c.column,endLineNumber:s.lineNumber,endColumn:s.column+1,message:"[语法错误！] \n".concat(i),severity:8}]),T=n.deltaDecorations(T,C(c,s))):(n.deltaDecorations(T,[]),d.editor.setModelMarkers(l,l.getModeId(),[])),a&&a(u);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function C(e,t){return[{range:new d.Range(e.lineNumber,1,t.lineNumber,1),options:{isWholeLine:!0,className:"dt-monaco-whole-line-error"}}]}d.languages.registerCompletionItemProvider("dtflink",{provideCompletionItems:function(e,t,n,a){var r=N();return new Promise(function(){var n=(0,l.default)(o.default.mark((function n(a,l){var u;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:(u=v[e.id])?u(r,a,h,{status:0,model:e,position:t}):a(r);case 2:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}})},Z5Xq:function(e,t,n){"use strict";n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n("fvjX"),o=n("L3Ur"),l=a(n("2Cp/")),u=n("IdH2"),i=(0,r.combineReducers)({routing:o.routerReducer,consoleUser:l.default,testStatus:u.testStatus,showRequireStatus:u.showRequireStatus});t.default=i},ZeNE:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I"),n("fbCW"),n("R5XZ"),n("2B1R");var o=a(n("CC+v")),l=a(n("iJl9")),u=a(n("qu0K")),i=a(n("pVnL")),c=a(n("ATwu")),s=a(n("4IMT")),d=a(n("lwsE")),f=a(n("W8MJ")),p=a(n("PJYZ")),m=a(n("7W2i")),E=a(n("a1gu")),v=a(n("Nsbk")),T=a(n("lSNA")),y=a(n("FAat")),O=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),h=n("LvDl"),N=n("RzPm");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,v.default)(e);if(t){var r=(0,v.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,E.default)(this,n)}}var P=y.default.Option,S=function(e){(0,m.default)(n,e);var t=C(n);function n(e){var a;return(0,d.default)(this,n),a=t.call(this,e),(0,T.default)((0,p.default)(a),"onSubmit",(function(e){var t=a.props,n=t.form,r=t.data,o=t.userList,l=null!=r?["username","id"]:["bindUserId"];n.validateFields(l.concat(["name","password"]),(function(t,a){if(!t){var r=o.find((function(e){return e.userId==a.bindUserId}));r&&(a.username=r.userName,a.email=r.userName),a.id&&(a.bindUserId=a.id),e&&(e(a),setTimeout((function(){return n.resetFields()}),0))}}))})),(0,T.default)((0,p.default)(a),"onOk",(function(){var e=a.props.onOk;a.onSubmit(e)})),(0,T.default)((0,p.default)(a),"onUnbind",(function(){var e=a.props.onUnbind;a.onSubmit(e)})),(0,T.default)((0,p.default)(a),"onCancel",(function(e){var t=a.props,n=t.onCancel,r=t.form;n&&(setTimeout((function(){return r.resetFields()}),0),n(e))})),a.state={},a}return(0,f.default)(n,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,n=t.visible,a=t.onCancel,r=t.title,d=t.data,f=t.userList,p=null!=d,m=O.createElement("div",{style:{height:"30px"}},d?O.createElement("span",{className:"left"},O.createElement(s.default,{onClick:this.onUnbind},"解除绑定")):null,O.createElement("span",{className:"right"},O.createElement(s.default,{onClick:this.onCancel,style:{marginRight:10}},"取消"),O.createElement(s.default,{type:"primary",onClick:this.onOk},"确定")));return O.createElement(o.default,{closable:!0,title:r,visible:n,footer:m,onCancel:a,className:"no-padding-modal"},O.createElement(O.Fragment,null,O.createElement(c.default,{message:"每个产品账号可绑定一个数据库用户，任务提交运行时后台将使用绑定的数据库用户执行。",style:{marginBottom:24},type:"info",showIcon:!0}),O.createElement(u.default,null,p?O.createElement(O.Fragment,null,O.createElement(u.default.Item,(0,i.default)({key:"username",label:"产品账号"},N.formItemLayout),e("username",{rules:[{required:!0,message:"产品账号不可为空！"}],initialValue:(0,h.get)(d,"username","")})(O.createElement(l.default,{disabled:p}))),O.createElement(u.default.Item,(0,i.default)({key:"id",label:"产品账号",style:{display:"none"}},N.formItemLayout),e("id",{initialValue:(0,h.get)(d,"id",void 0)})(O.createElement(l.default,null)))):O.createElement(u.default.Item,(0,i.default)({key:"bindUserId",label:"产品账号"},N.formItemLayout),e("bindUserId",{rules:[{required:!0,message:"产品账号不可为空！"}],initialValue:void 0})(O.createElement(y.default,{allowClear:!0,showSearch:!0,placeholder:"请选择产品账号",optionFilterProp:"title"},f&&f.map((function(e){var t="".concat(e.userId),n=e.userName;return O.createElement(P,{key:t,title:n,value:t},n)}))))),O.createElement(u.default.Item,(0,i.default)({label:"数据库账号"},N.formItemLayout),e("name",{rules:[{required:!0,message:"数据库账号不可为空！"},{pattern:/^[^\s]*$/,message:"数据库账号不可输入空格!"},{max:128,message:"数据库账号不得超过128个字符!"}],initialValue:(0,h.get)(d,"name","")})(O.createElement(l.default,{placeholder:"请输入数据库账号"}))),O.createElement(u.default.Item,(0,i.default)({label:"数据库密码"},N.formItemLayout),e("password",{rules:[{pattern:/^[^\s]*$/,message:"数据库密码不可输入空格!"},{max:128,message:"数据库密码不得超过128个字符!"}],initialValue:""})(O.createElement(l.default,{type:"password",placeholder:"请输入数据库密码"}))))))}}]),n}(O.Component),b=u.default.create()(S);t.default=b},Ziym:function(e,t,n){"use strict";n("tkto"),n("pNMO"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8"),n("+2oP"),n("07d7"),n("sMBO"),n("pjDv"),n("PKPk"),n("4Brf"),n("0oug"),n("4mDm"),n("3bBZ"),n("J30X"),n("ENF9");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("o0o1"));n("fbCW"),n("2B1R"),n("ma9I"),n("pDQq"),n("TeQF"),n("yXV3");var l=a(n("CC+v")),u=a(n("DtFj")),i=a(n("9xET")),c=a(n("FAat")),s=a(n("ZPTe")),d=a(n("ATwu")),f=a(n("iJl9")),p=a(n("QpBz")),m=a(n("RIqP")),E=a(n("lSNA")),v=a(n("yXPU")),T=a(n("J4zp")),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=N(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),O=a(n("RHHV")),h=n("j1Tt");function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(N=function(e){return e?n:t})(e)}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){u=!0,o=e},f:function(){try{l||null==n.return||n.return()}finally{if(u)throw o}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,E.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}n("uazm");var b=function(e){var t=(0,y.useState)(!1),n=(0,T.default)(t,2),a=n[0],r=n[1],E=(0,y.useState)(!1),N=(0,T.default)(E,2),C=N[0],P=N[1],b=(0,y.useState)([]),A=(0,T.default)(b,2),R=A[0],_=A[1],I=(0,y.useState)(null),L=(0,T.default)(I,2),D=L[0],M=L[1],k=function(){var t=(0,v.default)(o.default.mark((function t(){var n,a,l,u,i,c,s,d,f;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.clusterInfo.clusterId,a=e.form.getFieldValue,l=h.COMPONENT_TYPE_VALUE.DTSCRIPT_AGENT+".componentConfig.agentAddress",u={clusterId:n,needRefresh:!0,componentTypeCode:h.COMPONENT_TYPE_VALUE.DTSCRIPT_AGENT,agentAddress:a(l)||""},t.next=6,O.default.getClusterComponentUser(S({},u));case 6:i=t.sent,r(!0),1==i.code&&((null==i||null===(c=i.data)||void 0===c?void 0:c.length)||_([]),d=i.data.find((function(e){return e.isDefault}))||null,f=(null==d?void 0:d.label)||(null===(s=i.data[0])||void 0===s?void 0:s.label),M(f),V(i.data,f),r(!0));case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),j=function(e){return"c-nodeLable__modal"+(e?"__"+e:"")},w=function(e,t,n,a){_(R.map((function(r){var o=r.componentUserInfoList;if(r.label!==e.label)return r;var l=o.map((function(e,r){return t===r&&(e[n]=a),e}));return S(S({},r),{},{componentUserInfoList:l})})))},F=function(){var e,t=g(R);try{for(t.s();!(e=t.n()).done;){var n,a=e.value,r={},o=g(((null==a?void 0:a.componentUserInfoList)||[]).filter((function(e){return e.userName})));try{for(o.s();!(n=o.n()).done;){var l=n.value;if(r[l.userName])return!0;r[l.userName]=!0}}catch(e){o.e(e)}finally{o.f()}}}catch(e){t.e(e)}finally{t.f()}return!1},U=function(){var e,t=/^[^\s]*$/,n=g(R);try{for(n.s();!(e=n.n()).done;){var a,r=e.value,o=((null==r?void 0:r.componentUserInfoList)||[]).filter((function(e){return e.userName||e.password})),l=g((null==r?void 0:r.componentUserInfoList)||[]);try{for(l.s();!(a=l.n()).done;){if(!a.value.password)return!0}}catch(e){l.e(e)}finally{l.f()}var u,i=g(o);try{for(i.s();!(u=i.n()).done;){var c=u.value,s=c.userName,d=c.password;if(!t.test(s)||!t.test(d))return!0;if((null==s?void 0:s.length)>64||(null==d?void 0:d.length)>64)return!0}}catch(e){i.e(e)}finally{i.f()}}}catch(e){n.e(e)}finally{n.f()}return!1},V=function(e,t){_(e.map((function(e){return e.label!==t?S(S({},e),{},{isDefault:!1}):S(S({},e),{},{isDefault:!0})})))},x=function(){var e=(0,v.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R.length){e.next=3;break}return r(!1),e.abrupt("return");case 3:if(!F()){e.next=6;break}return p.default.error("服务器用户名重复，请检查服务器用户名！"),e.abrupt("return");case 6:if(!U()){e.next=9;break}return p.default.error("请检查服务器用户名和密码配置！"),e.abrupt("return");case 9:return P(!0),e.next=12,O.default.addOrUpdateComponentUser({componentUserList:R});case 12:1===e.sent.code&&(p.default.success("保存成功"),r(!1)),P(!1);case 15:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(e){return[{title:"服务器用户名",dataIndex:"userName",width:"210px",render:function(t,n,a){return y.default.createElement(f.default,{onChange:function(t){return w(e,a,"userName",t.target.value)},placeholder:"请输入",style:{width:180},size:"small",value:t})}},{title:"密码",dataIndex:"password",width:"210px",render:function(t,n,a){return y.default.createElement(f.default.Password,{onChange:function(t){return w(e,a,"password",t.target.value)},placeholder:"请输入",style:{width:180,height:28},size:"small",value:t,visibilityToggle:!1})}},{title:"操作",dataIndex:"action",width:"102px",render:function(t,n,a){return y.default.createElement("a",{onClick:function(){!function(e,t){_(R.map((function(n){return n.label!==e.label||n.componentUserInfoList.splice(t,1),n})))}(e,a)}},"删除")}}]};return y.default.createElement(y.default.Fragment,null,!e.view&&y.default.createElement("a",{className:"c-nodeLable__content",onClick:function(){return k()}},"查看节点标签和ip对应关系"),y.default.createElement(l.default,{title:"查看详情",visible:a,onCancel:function(){return r(!1)},onOk:x,className:j(),width:680,confirmLoading:C,maskClosable:!1},y.default.createElement(d.default,{className:j("alter"),message:"配置服务器用户后Shell on Agent任务可选择指定服务器用户运行。此处注意同一节点标签下所有IP的服 务器用户名与密码需要保持一致。",type:"info",showIcon:!0}),R.length>0?y.default.createElement("div",null,y.default.createElement(i.default,null,y.default.createElement(s.default,{span:4},"默认节点标签："),y.default.createElement(s.default,{span:20},y.default.createElement(c.default,{showSearch:!0,value:D,optionFilterProp:"label",style:{width:340},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0},onChange:function(e){return function(e){M(e),V(R,e)}(e)}},R.map((function(e){return y.default.createElement(c.default.Option,{key:e.label,value:e.label},e.label," ")}))))),R.map((function(e){return y.default.createElement("div",{key:e.label,className:"c-nodeLable__modal__nodes"},y.default.createElement(i.default,null,y.default.createElement(s.default,{span:4},"节点标签："),y.default.createElement(s.default,{span:20},(null==e?void 0:e.label)||"")),y.default.createElement(i.default,null,y.default.createElement(s.default,{span:4},"IP："),y.default.createElement(s.default,{span:20},(null==e?void 0:e.labelIp)||"")),y.default.createElement(i.default,null,y.default.createElement(s.default,{span:4},"服务器用户配置："),y.default.createElement(s.default,{span:20},y.default.createElement(u.default,{footer:null,pagination:!1,size:"middle",columns:B(e),dataSource:(null==e?void 0:e.componentUserInfoList)||[],className:"dt-table-border dt-table-last-row-noborder",style:{marginBottom:12,boxShadow:"unset"},locale:{emptyText:y.default.createElement("div",{className:"table-emptys"},"暂无数据")}}),y.default.createElement("a",{onClick:function(){return t=e,void _(R.map((function(e){var n=e.componentUserInfoList||[];return e.label!==t.label?e:S(S({},e),{},{componentUserInfoList:[].concat((0,m.default)(n),[{userName:"",password:""}])})})));var t}},"+ 添加自定义参数"))))}))):y.default.createElement("div",{className:"c-nodeLable__modal__empty"},y.default.createElement("img",{src:"http://127.0.0.1:8080/console/public/img/emptyLogo.svg"}),y.default.createElement("span",null,"无内容，请检查配置！"))))};t.default=b},aSnJ:function(e,t,n){"use strict";n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.MyLayout=s,t.default=void 0;var o=a(n("d2CI")),l=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=i(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),u=a(n("AuKd"));function i(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(i=function(e){return e?n:t})(e)}var c=o.default.Content;function s(e){var t=e.children;return l.createElement(o.default,{style:{position:"relative",height:"100%"}},l.createElement(u.default,null),l.createElement(o.default,null,l.createElement(c,{style:{minHeight:280}},t)))}var d=s;t.default=d},ao0w:function(e,t,n){"use strict";n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("o0o1")),l=a(n("qu0K")),u=a(n("N9UN")),i=a(n("h0/l")),c=a(n("4IMT")),s=a(n("Y/VR")),d=a(n("Pbn2")),f=a(n("QpBz")),p=a(n("lSNA")),m=a(n("yXPU")),E=a(n("J4zp")),v=a(n("CC+v")),T=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=g(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),y=a(n("RHHV")),O=n("oCo9"),h=a(n("Hc45")),N=n("j1Tt");function g(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(g=function(e){return e?n:t})(e)}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){(0,p.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S=v.default.confirm,b=l.default.create()((function(e){var t=(0,T.useState)({loading:!1,componentConfig:JSON.stringify({}),componentTemplate:JSON.stringify([])}),n=(0,E.default)(t,2),a=n[0],r=n[1],l={componentTypeCode:N.COMPONENT_TYPE_VALUE.SFTP,componentTemplate:a.componentTemplate,componentConfig:a.componentConfig};(0,T.useEffect)((function(){(function(){var e=(0,m.default)(o.default.mark((function e(){var t,n,a,l,u,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.default.getAlarmConfig();case 2:(t=e.sent)&&1==(null==t?void 0:t.code)&&(n=null==t?void 0:t.data,a=n.componentConfig,l=void 0===a?JSON.stringify({}):a,u=n.componentTemplate,i=void 0===u?JSON.stringify([]):u,r((function(e){return P(P({},e),{},{componentConfig:l,componentTemplate:i})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then()}),[]);var v=function(t){e.form.validateFields((function(e,n){if(e)f.default.error("请检查配置");else{var a=n[l.componentTypeCode];t?C(a):g(a)}}))},g=function(e){var t,n={componentConfig:JSON.stringify((0,O.getConfig)(e,l)),componentTemplate:JSON.stringify((0,O.getTemplate)(e,l))};if((0,O.validateConfig)(e,l))return f.default.success("保存成功"),void r((function(e){return P(P({},e),n)}));S({title:"确认变更配置？",content:"配置变更，可能导致告警通道无法使用，确认变更？",icon:T.default.createElement(d.default,{style:{color:"#FAAD14"},type:"exclamation-circle",theme:"filled"}),okText:"保存",cancelText:"取消",onOk:(t=(0,m.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.default.updateAlarmConfig(P({},n));case 2:if(1===e.sent.code){e.next=6;break}return f.default.success("保存失败"),e.abrupt("return");case 6:f.default.success("保存成功"),r((function(e){return P(P({},e),n)}));case 8:case"end":return e.stop()}}),e)}))),function(){return t.apply(this,arguments)}),onCancel:function(){}})},C=function(){var e=(0,m.default)(o.default.mark((function e(t){var n,u,i;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u={componentConfig:JSON.stringify((0,O.getConfig)(t,l)),componentTemplate:JSON.stringify((0,O.getTemplate)(t,l))},(0,O.validateConfig)(t,l)){e.next=4;break}return f.default.error("SFTP配置参数变更未保存，请先保存再测试组件连通性"),e.abrupt("return");case 4:return r((function(e){return P(P({},e),{},{loading:!0})})),e.next=7,y.default.testAlarmConfig();case 7:if(1!=(i=e.sent).code||!(null==i||null===(n=i.data)||void 0===n?void 0:n.result)){e.next=12;break}return f.default.success("测试连通性成功"),r(P(P(P({},a),u),{},{loading:!1})),e.abrupt("return");case 12:f.default.error("测试连通性失败"),r((function(e){return P(P({},e),{},{loading:!1})}));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return T.default.createElement("div",{className:"alarm-config__wrapper"},T.default.createElement(s.default,null,T.default.createElement(s.default.Item,null," ",T.default.createElement("a",{onClick:function(){e.router.push("/console-ui/alarmChannel")}},"告警通道")),T.default.createElement(s.default.Item,null,"SFTP配置")),T.default.createElement(u.default,{bordered:!1},T.default.createElement(h.default,{view:!1,form:e.form,itemLayout:O.formItemLayout,comp:l}),T.default.createElement("footer",{className:"alarm-config__footer"},T.default.createElement(i.default,{title:"确认取消当前更改？",okText:"确认",cancelText:"取消",onConfirm:function(){e.form.setFieldsValue((0,p.default)({},l.componentTypeCode,{componentConfig:(0,O.getInitailConfig)(l)}))}},T.default.createElement(c.default,null,"取消")),T.default.createElement(c.default,{ghost:!0,loading:a.loading,onClick:function(){return v(!0)}},"测试SFTP连通性"),T.default.createElement(c.default,{type:"primary",onClick:function(){return v()}},"保存SFTP组件"))))}));t.default=b},coB3:function(e,t,n){e.exports=function(){return new Worker(n.p+"7099b318444859084191.worker.js")}},dmqw:function(e,t,n){},"g/Sg":function(e,t,n){"use strict";window.__POWERED_BY_QIANKUN__&&(n.p=window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__)},gFia:function(e,t,n){"use strict";n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.createLinkMark=function(e){return"#link#".concat(JSON.stringify(e),"#link#")},t.getLinkMark=function(e){var t,n=/#link#(.+)#link#/g,a=[];t=n.exec(e);for(;t;){for(var o=document.createElement("a"),l=JSON.parse(t[1]),u=Object.entries(l),i=0,c=u;i<c.length;i++){var s=(0,r.default)(c[i],2),d=s[0],f=s[1];o.setAttribute(d,f)}o.className="editor_custom_link",o.innerHTML="logDownload",a.push({start:t.index,end:t.index+t[0].length,node:o}),t=n.exec(e)}return a},t.createLogMark=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";return"#log<".concat(t,">log#").concat(e,"#log<").concat(t,">log#")},t.getLogMark=function(e){var t=[];return function(){var n,a=new RegExp("#log<(\\w*)>log#((.|\r\n|\n)*?)#log<(\\w*)>log#","g");n=a.exec(e);for(;n;){var r=n[0].replace(/\r\n/g,"\n").split("\n"),o=n[2].replace(/\r\n/g,"\n").split("\n"),l=document.createElement("span"),u=n[1];l.className="c-editor--log__".concat(u);for(var i=0,c=0;c<r.length;c++){var s=r[c],d=o[c],f=l.cloneNode(!1);f.innerText=d,t.push({start:n.index+i,end:n.index+i+s.length,node:f}),i=i+s.length+1}n=a.exec(e)}}(),t},t.createLog=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=(0,o.default)().format("HH:mm:ss");0;return"[".concat(n,"] <").concat(t,"> ").concat(e)},t.createTitle=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=15,n=Math.floor(1.5*e.length/2),a=new Array(Math.max(t-n,5)),r=a.join("=");return"".concat(r).concat(e).concat(r)};var r=a(n("J4zp"));n("rB9j"),n("T63A"),n("ma9I"),n("TWNs"),n("JfAA"),n("UxlC"),n("EnZy"),n("oVuX");var o=a(n("wd/R"))},gxFx:function(e,t,n){"use strict";n("ma9I"),n("dq4f");var a=[{regex:/(\[.*?\])([ \t]*)(<error>)/,token:["tag",null,"error.strong"],sol:!0,next:"error"},{regex:/(\[.*?\])([ \t]*)(<info>)/,token:["tag",null,"bracket"],sol:!0,next:"info"},{regex:/(\[.*?\])([ \t]*)(<warning>)/,token:["tag",null,"comment"],sol:!0,next:"warning"}];n("VrN/").defineSimpleMode("dtlog",{start:[].concat(a,[{regex:/.*/,token:"hr"}]),error:[].concat(a,[{regex:/.*/,token:"error.strong"}]),info:[].concat(a,[{regex:/.*/,token:"bracket"}]),warning:[].concat(a,[{regex:/.*/,token:"comment"}])})},h1H3:function(e,t,n){"use strict";n("eoL8"),Object.defineProperty(t,"__esModule",{value:!0}),t.defaultOptions=void 0;t.defaultOptions={language:"sql",readOnly:!1,contextmenu:!0,autoIndent:!0,automaticLayout:!0,showFoldingControls:"always",folding:!0,foldingStrategy:"auto",suggestFontSize:13,fontSize:13,iconsInSuggestions:!1,fixedOverflowWidgets:!0,renderControlCharacters:!0}},hmv9:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("o0o1"));n("ma9I"),n("wLYn");var l=a(n("CC+v")),u=a(n("QpBz")),i=a(n("yXPU")),c=a(n("lwsE")),s=a(n("W8MJ")),d=a(n("PJYZ")),f=a(n("7W2i")),p=a(n("a1gu")),m=a(n("Nsbk")),E=a(n("lSNA")),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=h(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),T=a(n("7o06")),y=n("LvDl"),O=a(n("RHHV"));function h(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(h=function(e){return e?n:t})(e)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}var g={height:"100%"},C={mode:"simpleConfig",lineNumbers:!1,readOnly:!1,autofocus:!1,indentWithTabs:!0,smartIndent:!0},P=function(e){(0,f.default)(n,e);var t=N(n);function n(){var e;(0,c.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,E.default)((0,d.default)(e),"state",{krb5Content:""}),(0,E.default)((0,d.default)(e),"_editor",void 0),(0,E.default)((0,d.default)(e),"editorParamsChange",(function(t,n){e.setState({krb5Content:n})})),(0,E.default)((0,d.default)(e),"debounceEditorChange",(0,y.debounce)(e.editorParamsChange,300,{maxWait:2e3})),(0,E.default)((0,d.default)(e),"onOK",(0,i.default)(o.default.mark((function t(){var n,a;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.onCancel,a=e.state.krb5Content,t.next=4,O.default.updateKrb5Conf({krb5Content:a});case 4:1==t.sent.code&&(n(a),u.default.success("更新成功"));case 6:case"end":return t.stop()}}),t)})))),e}return(0,s.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.krbconfig;this.setState({krb5Content:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.visible,a=t.onCancel,r=t.krbconfig;return v.createElement(l.default,{title:"合并后的krb5.conf",visible:n,onCancel:function(){return a(r)},onOk:this.onOK,okText:"保存"},v.createElement("div",{style:g},v.createElement(T.default,{sync:!0,value:r||"",className:"c-kerberosModal__edior",ref:function(t){return e._editor=t},style:{height:"100%"},options:C,onChange:this.debounceEditorChange.bind(this)})))}}]),n}(v.Component);t.default=P},htex:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("sMBO");var o=a(n("d1El")),l=a(n("Pbn2")),u=a(n("B8+X")),i=a(n("4IMT")),c=a(n("lSNA")),s=a(n("lwsE")),d=a(n("W8MJ")),f=a(n("7W2i")),p=a(n("a1gu")),m=a(n("Nsbk")),E=a(n("qu0K")),v=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),T=n("LNB4");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,m.default)(e);if(t){var r=(0,m.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,p.default)(this,n)}}var h=E.default.Item,N=function(e){(0,f.default)(n,e);var t=O(n);function n(){return(0,s.default)(this,n),t.apply(this,arguments)}return(0,d.default)(n,[{key:"render",value:function(){var e,t,n=this,a=this.props,r=a.label,s=a.form,d=a.icons,f=a.deleteIcon,p=a.fileInfo,m=a.uploadFile,E=a.view,y=a.rules,O=a.notDesc,N=a.deleteFile,g=p.typeCode,C=p.hadoopVersion,P=p.name,S=g;(0,T.isMultiVersion)(g)&&C&&(S=S+"."+C),S=S+"."+P;var b=null!==(e=null===(t=s.getFieldValue(S))||void 0===t?void 0:t.name)&&void 0!==e?e:null==p?void 0:p.value,A={name:p.uploadProps.name,accept:p.uploadProps.accept,beforeUpload:function(e){return m(e,p.uploadProps.type,(function(){n.props.form.setFieldsValue((0,c.default)({},S,e))})),!1},fileList:[]};return v.createElement(h,{label:null!=r?r:"参数上传",colon:!1},s.getFieldDecorator(S,{initialValue:(null==p?void 0:p.value)||"",rules:null!=y?y:[]})(v.createElement("div",null)),!E&&v.createElement("div",{className:"c-fileConfig__config"},v.createElement(u.default,A,v.createElement(i.default,{style:{width:172},icon:"upload",loading:p.loading},"点击上传")),v.createElement("span",{className:"config-desc"},p.desc)),s.getFieldValue(S)&&!O&&v.createElement("span",{className:"config-file"},v.createElement(l.default,{type:"paper-clip"}),v.createElement(o.default,{title:b,placement:"topLeft"},b),d,f?null:!E&&v.createElement(l.default,{type:"delete",onClick:function(){s.setFieldsValue((0,c.default)({},S,"")),N&&N()}})))}}]),n}(v.PureComponent);t.default=N},"i/zG":function(e,t,n){"use strict";n("dq4f"),n("VrN/").defineSimpleMode("simpleLog",{start:[{regex:/^[=]+[^=]*[=]+/,token:"strong"},{regex:/([^\w])([A-Z][\w]*)/,token:[null,"string"]},{regex:/(^[A-Z][\w]*)/,token:"string"}]})},itRn:function(e,t,n){"use strict";n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=a(n("AwqB")),o=a(n("C4JW")),l={getUnbindAccounts:function(e){return r.default.post(o.default.ACCOUNT_UNBIND_LIST,e)},bindAccount:function(e){return r.default.postWithDefaultHeader(o.default.ACCOUNT_BIND,e)},ldapBindAccount:function(e){return r.default.postWithDefaultHeader(o.default.LDAP_ACCOUNT_BIND,e)},updateBindAccount:function(e){return r.default.postWithDefaultHeader(o.default.UPDATE_ACCOUNT_BIND,e)},getBindAccounts:function(e){return r.default.post(o.default.ACCOUNT_BIND_LIST,e)},unbindAccount:function(e){return r.default.postWithDefaultHeader(o.default.ACCOUNT_UNBIND,e)},getFullTenants:function(e){var t="".concat(o.default.GET_FULL_TENANT+(e||""));return r.default.get(t)}};t.default=l},j1Tt:function(e,t,n){"use strict";n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.MAPPING_DEFAULT_VERSION=t.FLINK_DEPLOY_NAME=t.FLINK_DEPLOY_TYPE=t.MAPPING_HADOOP_VERSON=t.MAPPING_DATA_CHECK=t.DEFAULT_PARAMS=t.COMP_ACTION=t.CONFIG_FILE_DESC=t.DEFAULT_COMP_VERSION=t.CONFIG_ITEM_TYPE=t.FILE_TYPE=t.VERSION_TYPE=t.CONFIG_BUTTON_TYPE=t.TABS_TITLE=t.COMPONENT_CONFIG_NAME=t.COMPONENT_TYPE_VALUE=t.TABS_POP_VISIBLE=t.TABS_TITLE_KEY=void 0;var r,o,l,u,i,c,s,d,f=a(n("lSNA")),p={COMMON:0,SOURCE:1,STORE:2,COMPUTE:3};t.TABS_TITLE_KEY=p;var m=(r={},(0,f.default)(r,p.COMMON,!1),(0,f.default)(r,p.SOURCE,!1),(0,f.default)(r,p.STORE,!1),(0,f.default)(r,p.COMPUTE,!1),r);t.TABS_POP_VISIBLE=m;var E={FLINK:0,SPARK:1,LEARNING:2,DTYARNSHELL:3,HDFS:4,YARN:5,SPARK_THRIFT_SERVER:6,CARBONDATA:7,LIBRA_SQL:8,HIVE_SERVER:9,SFTP:10,IMPALA_SQL:11,TIDB_SQL:12,ORACLE_SQL:13,GREEN_PLUM_SQL:14,KUBERNETES:15,PRESTO_SQL:16,NFS:17,DTSCRIPT_AGENT:18,INCEPTOR_SQL:19,FLINK_ON_STANDALONE:20,ANALYTIC_DB:21};t.COMPONENT_TYPE_VALUE=E;var v={0:"Flink",1:"Spark",2:"Learning",3:"DtScript",4:"HDFS",5:"YARN",6:"SparkThrift",7:"CarbonData ThriftServer",8:"LibrA SQL",9:"HiveServer",10:"SFTP",11:"Impala SQL",12:"TiDB SQL",13:"Oracle SQL",14:"Greenplum SQL",15:"Kubernetes",16:"Presto SQL",17:"NFS",18:"DtScript Agent",19:"Inceptor SQL",20:"Flink on Standalone",21:"AnalyticDB PostgreSQL"};t.COMPONENT_CONFIG_NAME=v;var T=(o={},(0,f.default)(o,p.COMMON,{iconName:"icongonggongzujian",name:"公共组件"}),(0,f.default)(o,p.SOURCE,{iconName:"iconziyuantiaodu",name:"资源调度组件"}),(0,f.default)(o,p.STORE,{iconName:"iconcunchuzujian",name:"存储组件"}),(0,f.default)(o,p.COMPUTE,{iconName:"iconjisuanzujian",name:"计算组件"}),o);t.TABS_TITLE=T;var y=(l={},(0,f.default)(l,p.COMMON,[{code:E.SFTP,componentName:v[E.SFTP]}]),(0,f.default)(l,p.SOURCE,[{code:E.YARN,componentName:v[E.YARN]},{code:E.KUBERNETES,componentName:v[E.KUBERNETES]}]),(0,f.default)(l,p.STORE,[{code:E.HDFS,componentName:v[E.HDFS]},{code:E.NFS,componentName:v[E.NFS]}]),(0,f.default)(l,p.COMPUTE,[{code:E.SPARK,componentName:v[E.SPARK]},{code:E.SPARK_THRIFT_SERVER,componentName:v[E.SPARK_THRIFT_SERVER]},{code:E.FLINK,componentName:v[E.FLINK]},{code:E.HIVE_SERVER,componentName:v[E.HIVE_SERVER]},{code:E.IMPALA_SQL,componentName:v[E.IMPALA_SQL]},{code:E.DTYARNSHELL,componentName:v[E.DTYARNSHELL]},{code:E.LEARNING,componentName:v[E.LEARNING]},{code:E.PRESTO_SQL,componentName:v[E.PRESTO_SQL]},{code:E.TIDB_SQL,componentName:v[E.TIDB_SQL]},{code:E.LIBRA_SQL,componentName:v[E.LIBRA_SQL]},{code:E.ORACLE_SQL,componentName:v[E.ORACLE_SQL]},{code:E.GREEN_PLUM_SQL,componentName:v[E.GREEN_PLUM_SQL]},{code:E.DTSCRIPT_AGENT,componentName:v[E.DTSCRIPT_AGENT]},{code:E.INCEPTOR_SQL,componentName:v[E.INCEPTOR_SQL]},{code:E.ANALYTIC_DB,componentName:v[E.ANALYTIC_DB]}]),l);t.CONFIG_BUTTON_TYPE=y;t.VERSION_TYPE={0:"Flink",9:"HiveServer",1:"Spark",6:"SparkThrift",19:"InceptorSql",20:"FlinkOnStandalone"};t.FILE_TYPE={KERNEROS:0,CONFIGS:1,PARAMES:2};t.CONFIG_ITEM_TYPE={RADIO:"RADIO",INPUT:"INPUT",SELECT:"SELECT",CHECKBOX:"CHECKBOX",PASSWORD:"PASSWORD",GROUP:"GROUP",RADIO_LINKAGE:"RADIO_LINKAGE",CUSTOM_CONTROL:"CUSTOM_CONTROL"};var O=(u={},(0,f.default)(u,E.FLINK,"180"),(0,f.default)(u,E.SPARK,"210"),(0,f.default)(u,E.SPARK_THRIFT_SERVER,"2.x"),(0,f.default)(u,E.HIVE_SERVER,"2.x"),(0,f.default)(u,E.INCEPTOR_SQL,"6.2.x"),u);t.DEFAULT_COMP_VERSION=O;var h=(i={},(0,f.default)(i,E.YARN,"zip格式，至少包括yarn-site.xml和core-site.xml"),(0,f.default)(i,E.HDFS,"zip格式，至少包括core-site.xml、hdfs-site.xml、hive-site.xml"),(0,f.default)(i,E.KUBERNETES,"zip格式，至少包括kubernetes.config"),i);t.CONFIG_FILE_DESC=h;t.COMP_ACTION={DELETE:"DELETE",ADD:"ADD"};t.DEFAULT_PARAMS=["storeType","principal","hadoopVersion","kerberosFileName","uploadFileName","isMetadata","isDefault"];var N=(c={},(0,f.default)(c,E.HIVE_SERVER,E.SPARK_THRIFT_SERVER),(0,f.default)(c,E.SPARK_THRIFT_SERVER,E.HIVE_SERVER),c);t.MAPPING_DATA_CHECK=N;var g=(s={},(0,f.default)(s,E.YARN,E.HDFS),(0,f.default)(s,E.HDFS,E.YARN),s);t.MAPPING_HADOOP_VERSON=g;var C={STANDALONE:0,YARN:1};t.FLINK_DEPLOY_TYPE=C;var P=(d={},(0,f.default)(d,C.STANDALONE,"Flink on Standalone"),(0,f.default)(d,C.YARN,"Flink on YARN"),d);t.FLINK_DEPLOY_NAME=P;t.MAPPING_DEFAULT_VERSION={180:"110",110:"180"}},jRo7:function(e,t,n){"use strict";n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8"),n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I");var o=a(n("lwsE")),l=a(n("W8MJ")),u=a(n("PJYZ")),i=a(n("7W2i")),c=a(n("a1gu")),s=a(n("Nsbk")),d=a(n("DtFj")),f=a(n("lSNA")),p=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=y(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),m=a(n("RHHV")),E=n("LvDl"),v=a(n("JtgN")),T=n("Ps9q");function y(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(y=function(e){return e?n:t})(e)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,f.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){var t=e.title,n=e.useNum,a=e.total,r=e.value,o=function(e){var t=(0,E.cloneDeep)(T.pieOption);return t.series[1].data=[N(N({},t.series[1].data[0]),{},{value:e,itemStyle:{normal:{color:e>=T.ALARM_DEFAULT?e>=T.ALARM_HIGHT?"#FF5F5C":"#FFB310":"#16DE9A"}}}),N(N({},t.series[1].data[1]),{},{value:150-e})],t}(void 0===r?0:r);return p.createElement("div",{className:"c-resourceCard__container"},p.createElement(v.default,{option:o,width:110,height:110}),p.createElement("div",{className:"c-resourceCard__container__title"},p.createElement("p",null,t),p.createElement("p",null,p.createElement("span",{style:{fontSize:18}},n||"-")," / ",a||"-")))},C=function(e){var t=e.columns,n=e.data,a=e.title,r=e.desc,o=void 0===r?"":r;return p.createElement("div",{className:"c-resourceView__table__container"},p.createElement("p",null,a,o&&"（".concat(o,"）")),p.createElement(d.default,{className:"dt-table-border dt-table-last-row-noborder",style:{marginTop:"10px"},columns:t,dataSource:n,pagination:!1}))},P=function(e){(0,i.default)(n,e);var t=O(n);function n(){var e;(0,o.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,f.default)((0,u.default)(e),"state",{nodesListSource:[],queuesListSource:[],target:"",resourceMetrics:{},type:T.SCHEDULE_TYPE.Capacity}),(0,f.default)((0,u.default)(e),"initQueuesColumns",(function(){var t=[{title:"资源队列",dataIndex:"queueName",render:function(e,t){return t.queueName}},{title:"已使用容量",dataIndex:"usedCapacity",render:function(e,t){return"".concat(t.usedCapacity,"%")}},{title:"分配容量",dataIndex:"capacity",render:function(e,t){return"".concat(t.capacity,"%")}},{title:"最大容量",dataIndex:"maxCapacity",render:function(e,t){return"".concat(t.maxCapacity,"%")}},{title:"查看",dataIndex:"action",render:function(t,n){return p.createElement("a",{onClick:function(){e.handleShowDetailt(n)}},"资源详情")},width:150}];switch(e.state.type){case T.SCHEDULE_TYPE.Fair:t=[{title:"资源队列",dataIndex:"queueName",render:function(e,t){return t.queueName}},{title:"已使资源数",dataIndex:"usedResources",render:function(e){return p.createElement("span",null,"memory:",p.createElement("span",{style:{margin:5}},e.memory,", "),"vCores:",p.createElement("span",{style:{margin:5}},e.vCores))}},{title:"最大资源数",dataIndex:"maxResources",render:function(e){return p.createElement("span",null,"memory:",p.createElement("span",{style:{margin:5}},e.memory,", "),"vCores:",p.createElement("span",{style:{margin:5}},e.vCores))}},{title:"最小资源数",dataIndex:"minResources",render:function(e){return p.createElement("span",null,"memory:",p.createElement("span",{style:{margin:5}},e.memory,", "),"vCores:",p.createElement("span",{style:{margin:5}},e.vCores))}}];break;case T.SCHEDULE_TYPE.FIFO:t=[{title:"容量",dataIndex:"capacity",render:function(e,t){return t.capacity}},{title:"已使用容量",dataIndex:"usedCapacity",render:function(e,t){return t.usedCapacity}},{title:"节点数量",dataIndex:"numNodes",render:function(e,t){return t.numNodes}}]}return t})),(0,f.default)((0,u.default)(e),"initDetailtColumns",(function(){return[{title:"Username",dataIndex:"username"},{title:"Max Resource",dataIndex:"maxResource",render:function(e){return p.createElement("span",null,"memory:",p.createElement("span",{style:{margin:5}},e.memory,", "),"vCores:",p.createElement("span",{style:{margin:5}},e.vCores))}},{title:"Used Resource",dataIndex:"resourcesUsed",render:function(e){return p.createElement("span",null,"memory:",p.createElement("span",{style:{margin:5}},e.memory,", "),"vCores:",p.createElement("span",{style:{margin:5}},e.vCores))}},{title:"Max AM Resource",dataIndex:"maxAMResource",render:function(e){return p.createElement("span",null,"memory:",p.createElement("span",{style:{margin:5}},e.memory,", "),"vCores:",p.createElement("span",{style:{margin:5}},e.vCores))}},{title:"Used AM Resource",dataIndex:"AMResourceUsed",render:function(e){return p.createElement("span",null,"memory:",p.createElement("span",{style:{margin:5}},e.memory,", "),"vCores:",p.createElement("span",{style:{margin:5}},e.vCores))}}]})),e}return(0,l.default)(n,[{key:"componentDidMount",value:function(){this.getClusterResources()}},{key:"getClusterResources",value:function(){var e=this,t=this.props.clusterName;m.default.getClusterResources({clusterName:t}).then((function(t){var n,a,r,o,l;if(1==t.code){var u=T.SCHEDULE_TYPE.Capacity,i=t.data.queues||[];switch(t.data.scheduleInfo.type){case T.SCHEDULE_TYPE.Fair:var c=null===(n=t.data)||void 0===n||null===(a=n.scheduleInfo)||void 0===a||null===(r=a.rootQueue)||void 0===r?void 0:r.childQueues;i=null!==(o=null==c?void 0:c.queue)&&void 0!==o?o:c,u=T.SCHEDULE_TYPE.Fair;break;case T.SCHEDULE_TYPE.FIFO:i=[N({},null===(l=t.data)||void 0===l?void 0:l.scheduleInfo)],u=T.SCHEDULE_TYPE.FIFO}e.setState({queuesListSource:i,type:u,nodesListSource:t.data.nodes||[],resourceMetrics:t.data.resourceMetrics||{}})}}))}},{key:"handleShowDetailt",value:function(e){var t=this.state.target,n=(0,E.cloneDeep)(e);(null==t?void 0:t.queueName)===e.queueName&&(null==t?void 0:t.queueName)&&(n=""),this.setState({target:n})}},{key:"initNodesColumns",value:function(){return[{title:"nodeName",dataIndex:"nodeName",render:function(e,t){return t.nodeName||"-"}},{title:"virtualCores",dataIndex:"virtualCores",render:function(e,t){return t.virtualCores}},{title:"usedVirtualCores",dataIndex:"usedVirtualCores",render:function(e,t){return t.usedVirtualCores}},{title:"memory (M)",dataIndex:"memory",render:function(e,t){return t.memory}},{title:"usedMemory (M)",dataIndex:"usedMemory",render:function(e,t){return t.usedMemory}}]}},{key:"render",value:function(){var e=this.initNodesColumns(),t=this.initQueuesColumns(),n=this.initDetailtColumns(),a=this.state,r=a.nodesListSource,o=a.target,l=a.queuesListSource,u=a.type,i=this.state.resourceMetrics,c=i.usedCores,s=i.totalCores,d=i.usedMem,f=i.totalMem,m=i.memRate,v=i.coresRate;return p.createElement("div",{style:{padding:20}},p.createElement("div",{className:"c-resourceView__container"},p.createElement("div",{style:{height:110,width:"50%",marginRight:10}},p.createElement(g,{type:"cpu",title:"CPU（core）",useNum:c,total:s,value:v})),p.createElement("div",{style:{height:110,width:"50%",marginLeft:10}},p.createElement(g,{type:"memory",title:"内存（GB）",useNum:d,total:f,value:m}))),p.createElement(C,{columns:e,data:r,title:"Yarn-NodeManager资源使用"}),p.createElement(C,{key:u,columns:t,data:l,title:"各资源队列资源使用（调度方式：".concat((0,E.findKey)(T.SCHEDULE_TYPE,(function(e){return e===u})),"）")}),o?p.createElement(C,{columns:n,data:o.users,title:"资源详情",desc:o.queueName}):null)}}]),n}(p.Component);t.default=P},k0Eq:function(e,t,n){"use strict";n("4mDm"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.registeCompleteItemsProvider=function(e,t){var n=t.getModel().id;O[n]=e},t.disposeProvider=function(e){if(!e)return;var t=e.getModel().id;O[t]=void 0},t.onChange=function(){return C.apply(this,arguments)};var o=a(n("o0o1"));n("07d7"),n("5s+n"),n("pjDv"),n("PKPk"),n("DQNa"),n("2B1R"),n("TeQF"),n("ma9I"),n("sMBO"),n("oVuX"),n("rB9j"),n("UxlC");var l,u=a(n("yXPU")),i=a(n("J4zp")),c=a(n("lwsE")),s=a(n("W8MJ")),d=a(n("lSNA")),f=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=E(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("wsa1")),p=a(n("coB3")),m=n("LvDl");function E(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(E=function(e){return e?n:t})(e)}var v=function(){function e(){var t=this;(0,c.default)(this,e),(0,d.default)(this,"_DtParser",void 0),(0,d.default)(this,"_eventMap",void 0),this._DtParser=new p.default,this._eventMap={},this._DtParser.onmessage=function(e){var n=e.data,a=n.eventId;t._eventMap[a]&&(t._eventMap[a].resolve(n.result),t._eventMap[a]=null)}}return(0,s.default)(e,[{key:"parserSql",value:function(){var e=this,t=arguments,n=this._createId();return new Promise((function(a,r){e._DtParser.postMessage({eventId:n,type:"parserSql",data:Array.from(t)}),e._eventMap[n]={resolve:a,reject:r,arg:t,type:"parserSql"}}))}},{key:"parseSyntax",value:function(){var e=this,t=arguments,n=this._createId();return new Promise((function(a,r){e._DtParser.postMessage({eventId:n,type:"parseSyntax",data:Array.from(t)}),e._eventMap[n]={resolve:a,reject:r,arg:t,type:"parseSyntax"}}))}},{key:"_createId",value:function(){return(new Date).getTime()+""+~~(1e5*Math.random())}}]),e}();function T(){return l||(l=new v),l}var y=[],O={},h=[];function N(e){return e?e.map((function(e,t){var n=(0,i.default)(e,4),a=n[0],r=n[1],o=n[2],l=n[3];return o=o||"3000",{label:a,kind:f.languages.CompletionItemKind[l||"Text"],detail:r,insertText:{value:"Function"==l?a+"($1) ":a},sortText:o+t+a}})):[]}function g(){if(!y.length){var e={keywords:["SELECT","FROM","WHERE","UNION ALL","LEFT OUTER JOIN","RIGHT OUTER JOIN","FULL OUTER JOIN","UNION","INSERT","ADD","ADMIN","AFTER","ALL","ALTER","ANALYZE","AND","ARCHIVE","ARRAY","AS","ASC","AUTHORIZATION","BEFORE","BETWEEN","BIGINT","BINARY","BOOLEAN","BOTH","BUCKET","BUCKETS","BY","CASCADE","CASE","CHANGE","CHAR","CLUSTER","CLUSTERED","CLUSTERSTATUS","COLLECTION","COLUMN","COLUMNS","COMMENT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONF","CONTINUE","CREATE","CROSS","CUBE","CURRENT","CURSOR","DATA","DATABASE","DATABASES","DATE","DATETIME","DBPROPERTIES","DECIMAL","DEFERRED","DEFINED","DELETE","DELIMITED","DEPENDENCY","DESC","DESCRIBE","DIRECTORIES","DIRECTORY","DISABLE","DISTINCT","DISTRIBUTE","DOUBLE","DROP","ELEM_TYPE","ELSE","ENABLE","END","ESCAPED","EXCHANGE","EXCLUSIVE","EXISTS","EXPLAIN","EXPORT","EXTENDED","EXTERNAL","FALSE","FETCH","FIELDS","FILE","FILEFORMAT","FIRST","FLOAT","FOLLOWING","FORMAT","FORMATTED","FULL","FUNCTION","FUNCTIONS","GRANT","GROUP","GROUPING","HAVING","HOLD_DDLTIME","IDXPROPERTIES","IGNORE","IMPORT","IN","INDEX","INDEXES","INNER","INPATH","INPUTDRIVER","INPUTFORMAT","INT","INTERSECT","INTERVAL","INTO","IS","ITEMS","JOIN","JAR","KEYS","KEY_TYPE","LATERAL","LEFT","LESS","LIFECYCLE","LIKE","LIMIT","LINES","LOAD","LOCAL","LOCATION","LOCK","LOCKS","LOGICAL","LONG","MACRO","MAP","MAPJOIN","MATERIALIZED","MINUS","MORE","MSCK","NOT","NONE","NOSCAN","NO_DROP","NULL","OF","OFFLINE","ON","OPTION","OR","ORC","ORDER","OUT","OUTER","OUTPUTDRIVER","OUTPUTFORMAT","OVER","OVERWRITE","OWNER","PARTIALSCAN","PARTITION","PARTITIONED","PARTITIONS","PERCENT","PARQUET","PLUS","PRECEDING","PRESERVE","PRETTY","PRINCIPALS","PROCEDURE","PURGE","RANGE","READ","READONLY","READS","REBUILD","RECORDREADER","RECORDWRITER","REDUCE","REGEXP","RELOAD","RENAME","REPAIR","REPLACE","RESTRICT","REVOKE","REWRITE","RIGHT","RLIKE","ROLE","ROLES","ROLLUP","ROW","ROWS","SCHEMA","SCHEMAS","SEMI","SERDE","SERDEPROPERTIES","SERVER","SET","SETS","SHARED","SHOW","SHOW_DATABASE","SKEWED","SMALLINT","SORT","SORTED","SSL","STATISTICS","STORED","STREAMTABLE","STRING","STRUCT","TABLE","TABLES","TABLESAMPLE","TBLPROPERTIES","TEMPORARY","TERMINATED","TEXTFILE","THEN","TIMESTAMP","TINYINT","TO","TOUCH","TRANSACTIONS","TRANSFORM","TRIGGER","TRUNCATE","TRUE","UNARCHIVE","UNBOUNDED","UNDO","UNIONTYPE","UNIQUEJOIN","UNLOCK","UNSET","UNSIGNED","UPDATE","URI","USE","USER","USING","UTC","UTC_TMESTAMP","VALUES","VALUE_TYPE","VARCHAR","VIEW","WHEN","WHILE","WINDOW","WITH"]},t=[].concat(e.builtinFunctions).concat(e.windowsFunctions).concat(e.innerFunctions).concat(e.otherFunctions).filter(Boolean),n=[].concat(e.keywords);y=function(e){return e.map((function(e,t){return{label:e,kind:f.languages.CompletionItemKind.Keyword,detail:"关键字",insertText:e+" ",sortText:"1000"+t+e,filterText:e.toLowerCase()}}))}(n).concat(function(e){return e.map((function(e,t){return{label:e,kind:f.languages.CompletionItemKind.Function,detail:"函数",insertText:{value:e+"($1) "},sortText:"2000"+t+e,filterText:e.toLowerCase()}}))}(t))}return y}function C(){return(C=(0,u.default)(o.default.mark((function e(){var t,n,a,r,l,u,i,c,s=arguments;return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:"",n=s.length>1?s[1]:void 0,a=s.length>2?s[2]:void 0,r=T(),l=n.getModel(),e.next=7,r.parserSql(t);case 7:return u=e.sent,e.next=10,r.parseSyntax(t.replace(/\r\n/g,"\n"));case 10:(i=e.sent)&&"EOF"!=i.token?(c=S(i),f.editor.setModelMarkers(l,l.getModeId(),[{startLineNumber:i.loc.first_line,startColumn:i.loc.first_column+1,endLineNumber:i.loc.last_line,endColumn:i.loc.last_column+1,message:"[语法错误！] \n".concat(c),severity:8}]),h=n.deltaDecorations(h,P(i))):(n.deltaDecorations(h,[]),f.editor.setModelMarkers(l,l.getModeId(),[])),a&&a(u,i);case 14:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e){return[{range:new f.Range(e.loc.first_line,1,e.loc.last_line,1),options:{isWholeLine:!0,className:"dt-monaco-whole-line-error"}}]}function S(e){var t=e.expected||[];return t.length?"您可能想输入是".concat(t.map((function(e){return" '".concat(e.text,"'")})).filter((function(e,t){return t<20})).join(","),"?"):"请检查您的语法！"}f.languages.registerCompletionItemProvider("dtsql",{triggerCharacters:["."],provideCompletionItems:function(e,t,n,a){var r=g();return new Promise(function(){var n=(0,u.default)(o.default.mark((function n(l,u){var i,c,s,d,f,p,E,v;return o.default.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(i=O[e.id])){n.next=14;break}return c=e.getValue(),s=e.getOffsetAt(t),d=T(),n.next=7,d.parserSql([c.substr(0,s),c.substr(s)]);case 7:f=n.sent,(v=(0,m.get)(f,"suggestTables.identifierChain",[])).length&&(E=v[0].name),f.suggestColumns&&f.suggestColumns.tables&&f.suggestColumns.tables.length&&(p=f.suggestColumns.tables.map((function(e){return e.identifierChain.map((function(e){return e.name})).join(".")}))),i(r,l,N,{status:0,model:e,position:t,word:e.getWordAtPosition(t),autoComplete:f,context:{columnContext:p,tableContext:E,completionContext:a}}),n.next=15;break;case 14:l(r);case 15:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}())}})},kC7r:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("wLYn"),n("T63A"),n("tkto"),n("yq1k"),n("JTJg"),n("zKZe"),n("ma9I");var o=a(n("RIqP")),l=a(n("J4zp")),u=a(n("lwsE")),i=a(n("W8MJ")),c=a(n("PJYZ")),s=a(n("7W2i")),d=a(n("a1gu")),f=a(n("Nsbk")),p=a(n("lSNA")),m=g(n("q1tI")),E=g(n("wsa1"));n("ln3q");var v=g(n("KMNV")),T=g(n("uTSk"));n("reBh"),n("PU3n");var y=a(n("8Qsq")),O=n("h1H3"),h=n("kMAU");function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(N=function(e){return e?n:t})(e)}function g(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=N(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,f.default)(e);if(t){var r=(0,f.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,d.default)(this,n)}}var P={dtsql:{register:v.registeCompleteItemsProvider,dispose:v.disposeProvider,onChange:v.onChange},dtflink:{register:T.registeCompleteItemsProvider,dispose:T.disposeProvider,onChange:T.onChange}},S=function(e){(0,s.default)(n,e);var t=C(n);function n(e){var a;return(0,u.default)(this,n),a=t.call(this,e),(0,p.default)((0,c.default)(a),"monacoDom",null),(0,p.default)((0,c.default)(a),"monacoInstance",null),(0,p.default)((0,c.default)(a),"_linkId",null),(0,p.default)((0,c.default)(a),"providerProxy",(function(e,t,n,r){var o=a.props.customCompleteProvider;o?o(e,t,n,r):t(e)})),(0,p.default)((0,c.default)(a),"delayLanguageValueOnChange",(0,h.delayFunctionWrap)(a.languageValueOnChange.bind((0,c.default)(a)))),a}return(0,i.default)(n,[{key:"shouldComponentUpdate",value:function(e,t){return!1}},{key:"componentDidMount",value:function(){this.initMonaco(),"function"==typeof this.props.editorInstanceRef&&this.props.editorInstanceRef(this.monacoInstance)}},{key:"initProviderProxy",value:function(){for(var e=0,t=Object.entries(P);e<t.length;e++){(0,l.default)(t[e],2)[1].register(this.providerProxy,this.monacoInstance)}}},{key:"disposeProviderProxy",value:function(){for(var e=0,t=Object.entries(P);e<t.length;e++){(0,l.default)(t[e],2)[1].dispose(this.monacoInstance)}}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=e.sync,n=e.value,a=e.theme,r=e.languageConfig,o=e.language;if(this.props.value!==n&&t){var l=n||"";this.updateValueWithNoEvent(l)}r!==this.props.languageConfig&&((0,h.jsonEqual)(r,this.props.languageConfig)||this.updateMonarch(r,o)),this.props.language!==e.language&&E.editor.setModelLanguage(this.monacoInstance.getModel(),e.language),this.props.options!==e.options&&this.monacoInstance.updateOptions(e.options),this.props.theme!==a&&E.editor.setTheme(a)}},{key:"componentWillUnmount",value:function(){this.disposeProviderProxy(),this.destroyMonaco()}},{key:"initLink",value:function(e){var t=this;this.monacoInstance.changeViewZones((function(n){t._linkId&&n.removeZone(t._linkId);var a=document.createElement("div"),r=document.createElement("a");r.innerHTML="完整下载链接",r.className="dt-monaco-link",r.setAttribute("href",e),r.setAttribute("download",""),a.appendChild(r),t._linkId=n.addZone({afterLineNumber:0,heightInLines:1,domNode:a})}))}},{key:"updateMonarch",value:function(e,t){e&&t&&e&&E.languages.setMonarchTokensProvider(t,e)}},{key:"isValueExist",value:function(e){return!!Object.keys(e).includes("value")}},{key:"log",value:function(e){var t;this.props.isLog&&(t=console).log.apply(t,(0,o.default)(e))}},{key:"destroyMonaco",value:function(){this.monacoInstance&&this.monacoInstance.dispose()}},{key:"initMonaco",value:function(){var e=this.props,t=e.value,n=e.language,a=e.options,r=e.cursorPosition;if(this.monacoDom){var o=Object.assign({},O.defaultOptions,a,{value:t,language:n||"sql"});this.monacoInstance=E.editor.create(this.monacoDom,o),this.monacoInstance&&r&&(this.monacoInstance.setPosition(r),this.monacoInstance.focus(),this.monacoInstance.revealPosition(r,E.editor.ScrollType.Immediate)),this.initEditor()}}},{key:"initEditor",value:function(){this.initTheme(),this.initEditorEvent(),this.initProviderProxy()}},{key:"initTheme",value:function(){E.editor.defineTheme("white",y.default),this.props.theme&&E.editor.setTheme(this.props.theme)}},{key:"updateValueWithNoEvent",value:function(e){this.monacoInstance.setValue(e)}},{key:"languageValueOnChange",value:function(e){if(!this.props.disabledSyntaxCheck){var t=this.monacoInstance.getValue(),n=this.monacoInstance.getModel().getModeId();P[n]&&P[n].onChange&&P[n].onChange(t,this.monacoInstance,e)}}},{key:"initEditorEvent",value:function(){var e=this;this.languageValueOnChange(this.props.onSyntaxChange),this.monacoInstance.onDidChangeModelContent((function(t){e.log("编辑器事件");var n=e.props,a=n.onChange,r=n.onSyntaxChange,o=e.monacoInstance.getValue();e.delayLanguageValueOnChange(r),a&&(e.log("订阅事件触发"),a(o,e.monacoInstance))})),this.monacoInstance.onDidBlurEditor((function(){e.log("编辑器事件 onDidBlur");var t=e.props,n=t.onBlur,a=t.value;n&&n(a,e.monacoInstance.getValue())})),this.monacoInstance.onDidFocusEditor((function(){e.log("编辑器事件 onDidFocus");var t=e.props,n=t.onFocus,a=t.value;n&&n(a,e.monacoInstance.getValue())})),this.monacoInstance.onDidChangeCursorSelection((function(t){e.log("编辑器事件 onDidChangeCursorSelection");for(var n=e.props.onCursorSelection,a=e.monacoInstance.getSelections(),r=e.monacoInstance.getModel(),o="",l=0;l<a.length;l++)o=o+=r.getValueInRange(a[l]);n&&n(o)})),this.monacoInstance.onContextMenu((function(t){e.log("编辑器事件 onContextMenu");var n=e.monacoInstance.getDomNode().querySelector(".monaco-menu-container");if(n){var a=t.event.posy+n.clientHeight>window.innerHeight?t.event.posy-n.clientHeight:t.event.posy,r=t.event.posx+n.clientWidth>window.innerWidth?t.event.posx-n.clientWidth:t.event.posx;n.style.position="fixed",n.style.top=Math.max(0,Math.floor(a))+"px",n.style.left=Math.max(0,Math.floor(r))+"px"}}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.style,r="code-editor";r=n?"".concat(r," ").concat(n):r;var o={position:"relative",minHeight:"400px",height:"100%",width:"100%"};return o=a?Object.assign(o,a):o,m.createElement("div",{className:r,style:o,ref:function(t){e.monacoDom=t}})}}]),n}(m.Component);t.default=S},kMAU:function(e,t,n){"use strict";n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.commonFileEditDelegator=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={find:"find",replace:"replace",commandPane:"commandPane"},a=u(u({},n),t);return function(t){switch(t){case a.find:return void e.trigger("anyString",c);case a.replace:return void e.trigger("anyString",s);case a.commandPane:e.trigger("anyString",i)}}},t.jsonEqual=function(e,t){if(e==t)return!0;var n=JSON.stringify(e),a=JSON.stringify(t);if(n==a)return!0;return!1},t.delayFunctionWrap=function(e){var t,n;return function(){var a=arguments;if(n&&clearTimeout(n),t){var o=new Date;o-t>3e3&&e.apply(void 0,(0,r.default)(a))}else t=new Date;n=setTimeout((function(){t=null,e.apply(void 0,(0,r.default)(a))}),500)}},n("fbCW"),n("rB9j"),n("UxlC"),n("DQNa"),n("R5XZ");var r=a(n("RIqP")),o=a(n("lSNA"));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var i="editor.action.quickCommand",c="actions.find",s="editor.action.startFindReplaceAction"},kYLF:function(e,t,n){"use strict";n("SuFq"),n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("o0o1"));n("ma9I"),n("zKZe"),n("sMBO"),n("2B1R");var l=a(n("DtFj")),u=a(n("4IMT")),i=a(n("h0/l")),c=a(n("QpBz")),s=a(n("yXPU")),d=a(n("lwsE")),f=a(n("W8MJ")),p=a(n("PJYZ")),m=a(n("7W2i")),E=a(n("a1gu")),v=a(n("Nsbk")),T=a(n("lSNA")),y=a(n("iJl9")),O=a(n("FAat")),h=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=I(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),N=n("LvDl"),g=a(n("0lfv")),C=a(n("RHHV")),P=a(n("itRn")),S=n("RzPm"),b=a(n("ZeNE")),A=a(n("K4z+")),R=n("IiER"),_=n("FZsQ");function I(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(I=function(e){return e?n:t})(e)}function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function D(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){(0,T.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,v.default)(e);if(t){var r=(0,v.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,E.default)(this,n)}}var k=O.default.Option,j=y.default.Search,w=function(e){(0,m.default)(n,e);var t=M(n);function n(){var e;(0,d.default)(this,n);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return e=t.call.apply(t,[this].concat(r)),(0,T.default)((0,p.default)(e),"state",{tableData:[],unbindUserList:[],tenantList:[],queryParams:{dtuicTenantId:"",username:"",currentPage:1,total:0,pageSize:20},modalData:null,loading:!1,visible:!1}),(0,T.default)((0,p.default)(e),"fetchData",(0,s.default)(o.default.mark((function t(){var n,a,r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.queryParams,a=e.props.engineType,e.setState({loading:!0}),n.engineType=a,t.next=6,P.default.getBindAccounts(n);case 6:1===(r=t.sent).code&&e.setState({tableData:(0,N.get)(r,"data.data",[]),queryParams:Object.assign({},n,{total:(0,N.get)(r,"data.totalCount","")})}),e.setState({loading:!1});case 9:case"end":return t.stop()}}),t)})))),(0,T.default)((0,p.default)(e),"fetchUnbindUsers",(0,s.default)(o.default.mark((function t(){var n,a,r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.queryParams,a=e.props.engineType,t.next=4,P.default.getUnbindAccounts({dtuicTenantId:n.dtuicTenantId,engineType:a});case 4:1===(r=t.sent).code&&e.setState({unbindUserList:(0,N.get)(r,"data",[])});case 6:case"end":return t.stop()}}),t)})))),(0,T.default)((0,p.default)(e),"fetchTenants",(0,s.default)(o.default.mark((function t(){var n,a,r,l,u;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,a=n.clusterId,r=n.engineType,t.next=3,C.default.searchTenant({clusterId:a,engineType:r,currentPage:1,pageSize:1e3});case 3:1===(l=t.sent).code&&(u=(0,N.get)(l,"data.data",[]),e.setState({tenantList:u}),u&&u.length>0&&e.onTenantChange("".concat(u[0].tenantId)));case 5:case"end":return t.stop()}}),t)})))),(0,T.default)((0,p.default)(e),"updateQueryParams",(function(t,n){e.setState({queryParams:Object.assign(e.state.queryParams,t)},(function(){n&&n()}))})),(0,T.default)((0,p.default)(e),"onTenantChange",(function(t){e.updateQueryParams({dtuicTenantId:t},(function(){e.handleTableChange({current:1}),e.fetchUnbindUsers()}))})),(0,T.default)((0,p.default)(e),"handleTableChange",(function(t,n,a){e.updateQueryParams({currentPage:t.current},e.fetchData)})),(0,T.default)((0,p.default)(e),"onPageChange",(function(t){var n=Object.assign(e.state.queryParams,{currentPage:t});e.setState({queryParams:n},e.fetchData)})),(0,T.default)((0,p.default)(e),"showHideBindModal",(function(t){e.setState({visible:!e.state.visible,modalData:t})})),(0,T.default)((0,p.default)(e),"onUnBindAccount",function(){var t=(0,s.default)(o.default.mark((function t(n){var a,r;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.engineType,r={id:n.bindUserId,name:n.name,password:n.password||""},(0,R.isHadoopEngine)(a)&&(r=D(D({},r),{},{id:n.id})),t.next=5,P.default.unbindAccount(r);case 5:1===t.sent.code&&(c.default.success("解绑成功！"),!(0,R.isHadoopEngine)(a)&&e.showHideBindModal(null),e.handleTableChange({current:1}),e.fetchUnbindUsers());case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,T.default)((0,p.default)(e),"onBindAccountUpdate",function(){var t=(0,s.default)(o.default.mark((function t(n){var a,r,l,u,i,s,d,f;return o.default.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.state,r=a.queryParams,l=a.modalData,u=e.props.engineType,s=function(){e.showHideBindModal(null),e.handleTableChange({current:1}),e.fetchUnbindUsers()},d={code:0},!(i=l)){t.next=13;break}return n.bindTenantId=r.dtuicTenantId,n.engineType=u,t.next=10,P.default.updateBindAccount(n);case 10:d=t.sent,t.next=25;break;case 13:if(i||(0,R.isHadoopEngine)(u)){t.next=21;break}return n.bindTenantId=r.dtuicTenantId,n.engineType=u,t.next=18,P.default.bindAccount(n);case 18:d=t.sent,t.next=25;break;case 21:return f=n.map((function(e){return D(D({},e),{},{bindTenantId:r.dtuicTenantId,engineType:u})})),t.next=24,P.default.ldapBindAccount({accountList:f});case 24:d=t.sent;case 25:1===d.code&&(c.default.success("绑定成功！"),s());case 26:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),(0,T.default)((0,p.default)(e),"initColumns",(function(){var t=e.props.engineType;return[{title:"产品账号",dataIndex:"username",render:function(e,t){return e}},{title:(0,R.isHadoopEngine)(t)?"LDAP账号":"数据库账号",dataIndex:"name",render:function(e,t){return e}},{title:"最近修改人",dataIndex:"modifyUserName",render:function(e,t){return e}},{title:"最近修改时间",dataIndex:"gmtModified",render:function(e,t){return g.default.formatDateTime(e)}},{title:"操作",dataIndex:"deal",render:function(n,a){return(0,R.isHadoopEngine)(t)?h.createElement("span",null,h.createElement("a",{onClick:function(){e.showHideBindModal(a)}},"编辑"),h.createElement("span",{className:"ant-divider"}),h.createElement(i.default,{title:"确认删除该LDAP账号绑定？",okText:"确定",cancelText:"取消",onConfirm:function(){e.onUnBindAccount(a)}},h.createElement("a",{style:{color:"#FF5F5C"}},"删除"))):h.createElement("a",{onClick:function(){e.showHideBindModal(a)}},"修改绑定")}}]})),e}return(0,f.default)(n,[{key:"componentDidMount",value:function(){this.fetchTenants()}},{key:"render",value:function(){var e=this,t=this.state,n=t.tableData,a=t.queryParams,r=t.loading,o=t.visible,i=t.modalData,c=t.tenantList,s=t.unbindUserList,d=this.props.engineType,f={total:a.total,current:a.currentPage,pageSize:20,size:"small",showTotal:function(e){return h.createElement("span",null,"共",h.createElement("span",{style:{color:"#3F87FF"}},e),"条数据，每页显示",20,"条")},onChange:this.onPageChange};return h.createElement("div",{style:{padding:20}},h.createElement(O.default,{className:"cluster-select",style:{width:"180px"},placeholder:"请选择租户",showSearch:!0,value:"".concat(a.dtuicTenantId),optionFilterProp:"title",onChange:this.onTenantChange},c&&c.map((function(e){return h.createElement(k,{key:"".concat(e.tenantId),title:e.tenantName,value:"".concat(e.tenantId)},e.tenantName)}))),h.createElement(j,{style:{width:"200px",marginBottom:"20px",marginLeft:"10px"},placeholder:"按产品账号、".concat((0,R.isHadoopEngine)(d)?"LDAP":"数据库","账号搜索"),value:a.username,onChange:function(t){e.updateQueryParams({username:t.target.value,currentPage:1})},onSearch:this.fetchData}),h.createElement("span",{style:{marginLeft:10}},h.createElement(u.default,{type:"primary",onClick:function(){return e.showHideBindModal()}},"绑定账号")),h.createElement(l.default,{loading:r,className:"dt-table-border dt-table-fixed-base",rowKey:function(e,t){return"accounts-".concat(t,"-").concat(e.userId)},style:{height:"calc(100vh - 230px)",boxShadow:"unset"},scroll:{y:!0},columns:this.initColumns(),dataSource:n,pagination:f}),(0,R.isHadoopEngine)(d)?h.createElement(A.default,{key:(0,_.giveMeAKey)(),visible:o,data:i,userList:s,title:i?"编辑账号":"绑定账号",onOk:this.onBindAccountUpdate,onCancel:function(){return e.showHideBindModal(null)}}):h.createElement(b.default,{key:String(o),visible:o,data:i,userList:i?n:s,title:i?"编辑账号":"绑定账号",onOk:this.onBindAccountUpdate,onUnbind:this.onUnBindAccount,onCancel:function(){return e.showHideBindModal(null)},engineText:S.ENGIN_TYPE_TEXT[d]}))}}]),n}(h.Component);t.default=w},ln3q:function(e,t,n){"use strict";n("4mDm"),n("07d7"),n("5s+n"),n("PKPk"),n("3bBZ");var a=n("+hIS"),r="undefined"==typeof monaco?self.monaco:monaco;(0,a.registerLanguage)({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:function(){return r.Promise.wrap(n.e(11).then(n.t.bind(null,"nbzb",7)))}})},"o4I+":function(e,t,n){"use strict";n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.userActions=void 0;var r=(0,a(n("zbcj")).default)(["SET_TENANT_LIST"],{prefix:"console/user"});t.userActions=r},oCo9:function(e,t,n){"use strict";n("eoL8"),Object.defineProperty(t,"__esModule",{value:!0}),t.getConfig=o,t.getTemplate=function(e,t){return(0,r.handleComponentTemplate)(e,t)},t.getInitailConfig=function(e){return(0,r.handleComponentConfig)({componentConfig:JSON.parse(e.componentConfig)},!0)},t.validateConfig=function(e,t){var n=t.componentConfig,r=o(e,t);return!!(0,a.isEqual)(r,JSON.parse(n))},t.formItemLayout=void 0;var a=n("LvDl"),r=n("LNB4");function o(e,t){var n=t.componentTypeCode;return(0,r.handleComponentConfigAndCustom)(e,n)}t.formItemLayout={labelCol:{xs:{span:24},sm:{span:9}},wrapperCol:{xs:{span:24},sm:{span:9}}}},pLYI:function(e,t,n){"use strict";n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.bootstrap=function(){return v.apply(this,arguments)},t.mount=function(e){return T.apply(this,arguments)},t.unmount=function(e){return y.apply(this,arguments)},t.update=function(e){return O.apply(this,arguments)};var o=a(n("o0o1")),l=a(n("yXPU"));n("g/Sg");var u=p(n("q1tI")),i=p(n("qWSy")),c=n("slYK"),s=p(n("/u1D")),d=a(n("vNIf"));function f(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(f=function(e){return e?n:t})(e)}function p(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=f(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}var m=function(){var e=n("Z5Xq").default,t=(0,c.getStore)(e,"hash"),a=t.store,r=t.history;return u.createElement(d.default,{store:a,history:r})};function E(e){i.render(u.createElement(m,null),e.container?e.container.querySelector("#app"):document.getElementById("app"))}function v(){return(v=(0,l.default)(o.default.mark((function e(){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=(0,l.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:E(t);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=(0,l.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i.unmountComponentAtNode(t.container?t.container.querySelector("#app"):document.getElementById("app"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=(0,l.default)(o.default.mark((function e(t){return o.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.__POWERED_BY_QIANKUN__||E({}),s.appInfo()},pWBi:function(e,t,n){"use strict";n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.authBeforeFormate=function(e){switch(e.status){case 402:case 200:case 412:return e;case 302:return l.default.info("登录超时, 请重新登录！"),Promise.reject(e);case 500:return l.default.error("服务器出现了点问题"),Promise.reject(e);default:return e.message&&l.default.error(e.message,3),e}},t.authAfterFormated=function(e){switch(e.code){case 1:case 0:return e;case 3:return o.default.error({message:"权限通知",description:e.message}),Promise.reject(e);case 16:return Promise.reject(e);default:return e.message&&setTimeout((function(){o.default.error({message:"异常",description:e.message,style:c(c({},s),{},{wordBreak:"break-all"})})}),0),e}},t.isSelectedProject=function(){var e=u.Cookie.getCookie("project_id");e&&"undefined"!==e||u.Cookie.deleteCookie("project_id")},t.isLogin=function(){return u.LocalDB.get("session")},n("07d7"),n("5s+n"),n("R5XZ");var r=a(n("lSNA")),o=a(n("rR1Q")),l=a(n("QpBz")),u=n("lxQk");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var s={maxHeight:"500px",overflowY:"auto"}},pXCp:function(e,t,n){"use strict";n("SuFq"),n("tkto"),n("pNMO"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8"),n("PKPk"),n("ENF9");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I"),n("TeQF"),n("T63A"),n("2B1R"),n("4mDm"),n("07d7"),n("3bBZ"),n("x0AG"),n("LKBx"),n("inlA");var o=a(n("iJl9")),l=a(n("9xET")),u=a(n("ZPTe")),i=a(n("J4zp")),c=a(n("RIqP")),s=a(n("lwsE")),d=a(n("W8MJ")),f=a(n("PJYZ")),p=a(n("7W2i")),m=a(n("a1gu")),E=a(n("Nsbk")),v=a(n("lSNA")),T=a(n("qu0K")),y=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=N(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),O=n("RzPm"),h=n("LNB4");function N(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(N=function(e){return e?n:t})(e)}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,v.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,E.default)(e);if(t){var r=(0,E.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,m.default)(this,n)}}var S=T.default.Item,b=function(e){(0,p.default)(n,e);var t=P(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,v.default)((0,f.default)(e),"state",{customParams:[]}),(0,v.default)((0,f.default)(e),"addCustomerParams",(function(){e.setState((function(e){return{customParams:[].concat((0,c.default)(e.customParams),[{}])}}))})),(0,v.default)((0,f.default)(e),"deleteCustomerParams",(function(t){var n=e.state.customParams.filter((function(e,n){return n!==t}));e.setState({customParams:n})})),(0,v.default)((0,f.default)(e),"handleCustomParam",(function(t,n,a){var r,o,l=t.target.value,u=e.props,c=u.template,s=u.form,d=u.typeCode,f=u.comp,p=u.hadoopVersion,m=e.state.customParams,E=d+"";(0,h.isMultiVersion)(d)&&(E=E+"."+p);var v=(0,h.isGroupType)(c.type)?E+".customParam."+c.key:E+".customParam",T=null!==(r=(0,h.getValueByJson)(null==f?void 0:f.componentConfig))&&void 0!==r?r:{},y=null!==(o=s.getFieldValue(E+".specialConfig"))&&void 0!==o?o:T,O=Object.entries(y);if(a){var N=m.map((function(e,t){return t==n?C(C({},e),{},{value:l}):e}));e.setState({customParams:N})}else{var g,P=-1,S=!1;if((0,h.isNeedTemp)(d))P=O.findIndex((function(e){var t=(0,i.default)(e,2),n=t[0];t[1];return n==l}));else P=null===(g=(0,h.isGroupType)(c.type)?c.values:c)||void 0===g?void 0:g.findIndex((function(e){return e.key==l}));for(var b=0,A=Object.entries(s.getFieldValue(v));b<A.length;b++){var R=(0,i.default)(A[b],2),_=R[0],I=R[1];if(_.startsWith("%")&&_.endsWith("-key")&&l==I){S=!0;break}}var L=m.map((function(e,t){return t==n?C(C({},e),{},{isSameKey:S||P>-1,key:l}):e}));e.setState({customParams:L})}})),(0,v.default)((0,f.default)(e),"renderAddCustomParam",(function(){var t=e.props.labelCol;return y.createElement(l.default,null,y.createElement(u.default,{span:null!=t?t:O.formItemLayout.labelCol.sm.span}),y.createElement(u.default,{className:"m-card",style:{marginBottom:"20px"},span:O.formItemLayout.wrapperCol.sm.span},y.createElement("a",{onClick:function(){return e.addCustomerParams()}},"添加自定义参数")))})),e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){var e=this.props.template;this.setState({customParams:(0,h.getCustomerParams)((0,h.isGroupType)(e.type)?e.values:e)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.typeCode,a=t.form,r=t.view,i=t.template,c=t.maxWidth,s=t.labelCol,d=t.wrapperCol,f=t.hadoopVersion,p=this.state.customParams,m=i.key;return 0==p.length?!r&&this.renderAddCustomParam():y.createElement(y.Fragment,null,p&&p.map((function(t,i){var p=n+"";(0,h.isMultiVersion)(n)&&(p=p+"."+f);var E=m?"".concat(p,".customParam.").concat(m):"".concat(p,".customParam"),v=(0,h.giveMeAKey)();return y.createElement(l.default,{key:i},y.createElement(u.default,{span:null!=s?s:O.formItemLayout.labelCol.sm.span,style:{textAlign:"right"}},y.createElement(S,null,a.getFieldDecorator("".concat(E,".%").concat(v,"-key"),{rules:[{required:!0,message:"请输入参数属性名"}],initialValue:t.key||""})(y.createElement(o.default,{disabled:r,style:{width:"calc(100% - 18px)",maxWidth:200},onChange:function(t){return e.handleCustomParam(t,i)}})),y.createElement("span",{style:{marginLeft:2,marginRight:6}},":"))),y.createElement(u.default,{span:null!=d?d:O.formItemLayout.wrapperCol.sm.span},y.createElement(S,null,a.getFieldDecorator("".concat(E,".%").concat(v,"-value"),{rules:[{required:!0,message:"请输入参数属性值"}],initialValue:t.value||""})(y.createElement(o.default,{disabled:r,style:{maxWidth:c?680:"unset"},onChange:function(t){return e.handleCustomParam(t,i,"value")}})))),!r&&y.createElement("a",{className:"formItem-right-text",onClick:function(){return e.deleteCustomerParams(i)}},"删除"),!r&&t.isSameKey&&y.createElement("span",{className:"formItem-right-text"},"该参数已存在"))})),!r&&this.renderAddCustomParam())}}]),n}(y.PureComponent);t.default=b},reBh:function(e,t,n){"use strict";n("4mDm"),n("07d7"),n("5s+n"),n("PKPk"),n("3bBZ");var a=n("+hIS"),r="undefined"==typeof monaco?self.monaco:monaco;(0,a.registerLanguage)({id:"dtlog",extensions:[".dtlog",".dtlog"],aliases:["Dtlog","dtlog"],loader:function(){return r.Promise.wrap(n.e(9).then(n.t.bind(null,"KHRF",7)))}})},s7lY:function(e,t,n){"use strict";n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("zKZe"),n("ma9I"),n("yXV3"),n("2B1R"),n("oVuX");var o=a(n("CC+v")),l=a(n("d1El")),u=a(n("iJl9")),i=a(n("pVnL")),c=a(n("Pbn2")),s=a(n("RIqP")),d=a(n("J4zp")),f=a(n("qu0K")),p=a(n("FAat")),m=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),E=n("LvDl"),v=a(n("itRn")),T=n("A9pX"),y=n("RzPm");function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}var h=p.default.Option,N=f.default.Item,g=function(e){var t=e.form,n=e.form,a=n.getFieldDecorator,r=n.resetFields,O=e.visible,g=e.onOk,C=e.onCancel,P=e.title,S=e.isBindTenant,b=e.disabled,A=e.tenantInfo,R=void 0===A?{}:A,_=e.clusterId,I=e.clusterList,L=e.isBindNamespace,D=(0,m.useState)([]),M=(0,d.default)(D,2),k=M[0],j=M[1],w=(0,m.useRef)(null),F=(0,m.useState)(_),U=(0,d.default)(F,2),V=U[0],x=U[1],B=(0,T.useEnv)({clusterId:V||_,visible:O,form:t,clusterList:I}),Y=B.env,K=B.queueList;(0,m.useEffect)((function(){w.current=O,!1===O&&(r(),x(void 0)),O&&G()}),[O,r]);var G=function(e){v.default.getFullTenants(e).then((function(e){e.success&&j(e.data||[])}))},H=(0,E.debounce)(G,1e3),q=function(){var e=[];for(var t in y.ENGINE_TYPE)y.ENGINE_TYPE[t]!==y.ENGINE_TYPE.KUBERNETES&&y.ENGINE_TYPE[t]!==y.ENGINE_TYPE.HADOOP&&(e=Y[y.ENGINE_TYPE[t]]?[].concat((0,s.default)(e),[y.ENGIN_TYPE_TEXT[y.ENGINE_TYPE[t]]]):e);return e}();return m.default.createElement(o.default,{title:P,visible:O,onOk:function(){var t,n,a,r,o;g((t={canSubmit:!1,reqParams:{}},n=null==e?void 0:e.form,a=n.getFieldsValue,r=n.validateFields,o=a(),r((function(e){e||(t.canSubmit=!0,t.reqParams=o,S||(t.reqParams=Object.assign(o,{tenantId:R.tenantId})),L&&(t.reqParams=Object.assign(o,{tenantId:R.tenantId,queueId:R.queueId})),t.hasKubernetes=Y[y.ENGINE_TYPE.KUBERNETES])})),t))},onCancel:C,width:"600px",className:S?"no-padding-modal":""},m.default.createElement(m.default.Fragment,null,S&&m.default.createElement("div",{className:"info-title"},m.default.createElement(c.default,{type:"info-circle",style:{color:"#2491F7"}}),m.default.createElement("span",{className:"info-text"},"将租户绑定到集群，可使用集群内的每种计算引擎，绑定后，不能切换其他集群。")),m.default.createElement(f.default,null,m.default.createElement(f.default.Item,(0,i.default)({label:"租户"},y.formItemLayout),a("tenantId",{rules:[{required:!0,message:"租户不可为空！"}],initialValue:R.tenantName||""})(m.default.createElement(p.default,{allowClear:!0,showSearch:!0,placeholder:"请搜索要绑定的租户",optionFilterProp:"title",disabled:b,onSearch:H,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},k&&k.map((function(e){return m.default.createElement(h,{key:"".concat(e.tenantId),value:"".concat(e.tenantId),title:e.tenantName},e.tenantName)}))))),m.default.createElement(f.default.Item,(0,i.default)({label:"集群"},y.formItemLayout),a("clusterId",{rules:[{required:!0,message:"集群不可为空！"}],initialValue:_||""})(m.default.createElement(p.default,{allowClear:!0,placeholder:"请选择集群",disabled:b,onChange:function(e){x(e)}},I.map((function(e){return m.default.createElement(h,{key:"".concat(e.clusterId),value:"".concat(e.clusterId)},e.clusterName)}))))),Y[y.ENGINE_TYPE.KUBERNETES]&&m.default.createElement("div",{className:"border-item"},m.default.createElement("div",{className:"engine-title"},"Kubernetes"),m.default.createElement(f.default.Item,(0,i.default)({label:"Namespace"},y.formItemLayout),a("namespace",{initialValue:(null==R?void 0:R.queue)||""})(m.default.createElement(u.default,null)))),Y[y.ENGINE_TYPE.HADOOP]&&!Y[y.ENGINE_TYPE.KUBERNETES]?m.default.createElement("div",{className:"border-item"},m.default.createElement("div",{className:"engine-title"},"Hadoop"),m.default.createElement(N,(0,i.default)({label:m.default.createElement("span",null,"资源队列 ",m.default.createElement(l.default,{title:"指Yarn上分配的资源队列，若下拉列表中无全部队列，请前往“多集群管理”页面的具体集群中刷新集群"},m.default.createElement(c.default,{type:"question-circle-o"})))},y.formItemLayout),a("queueId",{rules:[{required:!0,message:"资源队列不可为空！"}],initialValue:null==R?void 0:R.tenantName})(m.default.createElement(p.default,{allowClear:!0,placeholder:"请选择资源队列"},K.map((function(e){return m.default.createElement(h,{key:"".concat(e.queueId),value:"".concat(e.queueId)},e.queueName)})))))):null,q.length>0?m.default.createElement("div",{className:"border-item"},m.default.createElement("div",{className:"engine-name"},m.default.createElement("span",null,"创建项目时，自动关联到租户的",q.join("、"),"引擎"))):null)))},C=function(e,t){return(null==e?void 0:e.visible)===(null==t?void 0:t.visible)&&!0!==(null==t?void 0:t.visible)},P=f.default.create()(m.default.memo(g,C));t.default=P},slYK:function(e,t,n){"use strict";n("eoL8");var a=n("TqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.getStore=function(e,t){var n=function(e){return(0,l.createStore)(e,(0,l.applyMiddleware)(o.default))}(e),a=t&&"hash"===t?r.hashHistory:r.browserHistory,i=(0,u.syncHistoryWithStore)(a,n);return{store:n,history:i}};var r=n("dtw8"),o=(n("1ZXz"),a(n("TdMD"))),l=n("fvjX"),u=n("L3Ur")},tgir:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("ma9I"),n("2B1R"),n("yXV3");var o=a(n("h0/l")),l=a(n("4IMT")),u=a(n("9xET")),i=a(n("ZPTe")),c=a(n("QpBz")),s=a(n("lwsE")),d=a(n("W8MJ")),f=a(n("PJYZ")),p=a(n("7W2i")),m=a(n("a1gu")),E=a(n("Nsbk")),v=a(n("lSNA")),T=a(n("qPIi")),y=a(n("g4D/")),O=P(n("q1tI")),h=P(n("LvDl")),N=n("LNB4"),g=n("j1Tt");function C(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(C=function(e){return e?n:t})(e)}function P(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=C(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}return a.default=e,n&&n.set(e,a),a}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,E.default)(e);if(t){var r=(0,E.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,m.default)(this,n)}}var b=y.default.Group,A=T.default.Group,R=function(e){(0,p.default)(n,e);var t=S(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,v.default)((0,f.default)(e),"state",{visible:!1,addComps:[],initialValues:[]}),(0,v.default)((0,f.default)(e),"getInitialValues",(function(){var t=e.props.comps;return(void 0===t?[]:t).map((function(e){return null==e?void 0:e.componentTypeCode}))})),(0,v.default)((0,f.default)(e),"handleSelectValue",(function(){return e.props.comps.map((function(e){return e.componentTypeCode}))})),(0,v.default)((0,f.default)(e),"handleCheckValues",(function(t){var n=e.props.activeKey,a=e.getInitialValues();if(!(0,N.isSourceTab)(n)){var r=h.union(t,a),o=h.xor(r,a);e.setState({addComps:o,initialValues:t})}})),(0,v.default)((0,f.default)(e),"handleRadioValues",(function(t){var n=e.getInitialValues();if(!h.isEqual(n[0],t.target.value)){if(n[0])return void c.default.error("先删除".concat(g.COMPONENT_CONFIG_NAME[n[0]],"，才能切换为").concat(g.COMPONENT_CONFIG_NAME[t.target.value]));var a=[];a.push(t.target.value),e.setState({addComps:a,initialValues:[t.target.value]})}})),(0,v.default)((0,f.default)(e),"renderTitle",(function(){return O.createElement("div",{className:"c-componentButton__title"},O.createElement("span",null,"组件配置"))})),(0,v.default)((0,f.default)(e),"renderContent",(function(){var t=e.props.activeKey,n=e.state.initialValues;return(0,N.isSourceTab)(t)?O.createElement(O.Fragment,null,e.renderTitle(),O.createElement(A,{className:"c-componentButton__content",defaultValue:n[0],value:n[0],onChange:e.handleRadioValues},O.createElement(u.default,null,g.CONFIG_BUTTON_TYPE[t].map((function(t){return O.createElement(i.default,{key:"".concat(t.code)},O.createElement(T.default,{disabled:e.getInitialValues().indexOf(t.code)>-1,value:t.code},t.componentName))}))))):O.createElement(O.Fragment,null,e.renderTitle(),O.createElement(b,{className:"c-componentButton__content",value:n,defaultValue:n,onChange:e.handleCheckValues},O.createElement(u.default,null,g.CONFIG_BUTTON_TYPE[t].map((function(t){return O.createElement(i.default,{key:"".concat(t.code)},O.createElement(y.default,{disabled:e.getInitialValues().indexOf(t.code)>-1,value:t.code},t.componentName))})))))})),(0,v.default)((0,f.default)(e),"handleConfirm",(function(){var t=e.state.addComps;e.props.handlePopVisible(!1),e.props.handleConfirm(g.COMP_ACTION.ADD,t)})),(0,v.default)((0,f.default)(e),"handleCancel",(function(){e.setState({addComps:[],visible:!1}),e.props.handlePopVisible(!1)})),e}return(0,d.default)(n,[{key:"componentDidMount",value:function(){this.setState({initialValues:this.getInitialValues()})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.comps,a=t.popVisible;(e.comps!=n||e.popVisible!=a&&a)&&this.setState({initialValues:this.getInitialValues()})}},{key:"render",value:function(){var e=this;return O.createElement(O.Fragment,null,O.createElement(o.default,{icon:null,placement:"topRight",title:this.renderContent(),onConfirm:this.handleConfirm,onCancel:this.handleCancel},O.createElement(l.default,{className:"c-editCluster__componentButton",onClick:function(){return e.props.handlePopVisible()}},O.createElement("i",{className:"iconfont iconzujianpeizhi",style:{marginRight:2}}),"组件配置")))}}]),n}(O.Component);t.default=R},uTSk:function(e,t,n){"use strict";n("eoL8"),Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"registeCompleteItemsProvider",{enumerable:!0,get:function(){return r.registeCompleteItemsProvider}}),Object.defineProperty(t,"disposeProvider",{enumerable:!0,get:function(){return r.disposeProvider}}),Object.defineProperty(t,"onChange",{enumerable:!0,get:function(){return r.onChange}}),n("4mDm"),n("07d7"),n("5s+n"),n("PKPk"),n("3bBZ");var a=n("+hIS"),r=n("Y5Yc"),o="undefined"==typeof monaco?self.monaco:monaco;(0,a.registerLanguage)({id:"dtflink",extensions:[".dtflink",".dtflink"],aliases:["Dtflink","dtflink"],loader:function(){return o.Promise.wrap(n.e(8).then(n.t.bind(null,"fcJi",7)))}})},uazm:function(e,t,n){},vNIf:function(e,t,n){"use strict";n("SuFq"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ"),n("eoL8"),n("5DmW");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("vgIT")),l=a(n("lwsE")),u=a(n("W8MJ")),i=a(n("7W2i")),c=a(n("a1gu")),s=a(n("Nsbk")),d=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=v(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),f=n("dtw8"),p=n("/MKj"),m=a(n("+Gva"));n("m2I1"),n("TVWj"),n("O81F"),n("+5i3");var E=a(n("Efuq"));function v(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(v=function(e){return e?n:t})(e)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,s.default)(e);if(t){var r=(0,s.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,c.default)(this,n)}}var y=function(e){(0,i.default)(n,e);var t=T(n);function n(){return(0,l.default)(this,n),t.apply(this,arguments)}return(0,u.default)(n,[{key:"render",value:function(){var e=this.props,t=e.store,n=e.history;return d.createElement(o.default,{locale:m.default},d.createElement(p.Provider,{store:t},d.createElement(f.Router,{routes:E.default,history:n,key:Math.random(),onEnter:function(){}})))}}]),n}(d.Component);t.default=y},ykY0:function(e,t,n){"use strict";n("SuFq"),n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n("d1El")),l=a(n("Pbn2")),u=a(n("pVnL")),i=a(n("QILm"));n("ma9I"),n("wLYn");var c=a(n("QpBz")),s=a(n("lwsE")),d=a(n("W8MJ")),f=a(n("PJYZ")),p=a(n("7W2i")),m=a(n("a1gu")),E=a(n("Nsbk")),v=a(n("lSNA")),T=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=O(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI"));n("zm+v");var y=["customView","copyText","style","title"];function O(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(O=function(e){return e?n:t})(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,E.default)(e);if(t){var r=(0,E.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,m.default)(this,n)}}var g=function(e){(0,p.default)(n,e);var t=N(n);function n(){var e;(0,s.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,v.default)((0,f.default)(e),"fakeHandlerCallback",void 0),(0,v.default)((0,f.default)(e),"fakeHandler",null),(0,v.default)((0,f.default)(e),"fakeElem",void 0),(0,v.default)((0,f.default)(e),"state",{}),(0,v.default)((0,f.default)(e),"copy",(function(t){e.removeFake(),e.fakeHandlerCallback=function(){return e.removeFake()},e.fakeHandler=document.body.addEventListener("click",e.fakeHandlerCallback),e.fakeElem=document.createElement("textarea"),e.fakeElem.style.fontSize="12pt",e.fakeElem.style.border="0",e.fakeElem.style.padding="0",e.fakeElem.style.margin="0",e.fakeElem.style.position="absolute",e.fakeElem.style.left="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;e.fakeElem.style.top="".concat(n,"px"),e.fakeElem.setAttribute("readonly",""),e.fakeElem.value=t,document.body.appendChild(e.fakeElem),e.fakeElem.select(),e.copyText()})),e}return(0,d.default)(n,[{key:"componentWillUnmount",value:function(){this.removeFake()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"copyText",value:function(){var e;try{e=document.execCommand("copy")}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){e?c.default.success("复制成功"):c.default.error("不支持")}},{key:"render",value:function(){var e=this.props,t=e.customView,n=e.copyText,a=e.style,r=e.title,c=(0,i.default)(e,y);return a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,v.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({cursor:"pointer",fontSize:"13px"},a),t?T.createElement("span",{onClick:this.copy.bind(this,n)},t):T.createElement(o.default,{placement:"right",title:r||"复制"},T.createElement(l.default,(0,u.default)({className:"copy-hover",onClick:this.copy.bind(this,n),style:a},c,{type:"copy"})))}}]),n}(T.Component);t.default=g},"zm+v":function(e,t,n){},zqmc:function(e,t,n){"use strict";n("SuFq"),n("tkto"),n("pNMO"),n("TeQF"),n("5DmW"),n("QWBl"),n("FZtP"),n("27RR"),n("HRxU"),n("eoL8"),n("4mDm"),n("07d7"),n("PKPk"),n("ENF9"),n("3bBZ");var a=n("TqRt"),r=n("cDf5");Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.RedTxt=void 0;var o=a(n("o0o1"));n("ma9I"),n("zKZe"),n("fbCW"),n("J30X"),n("E9XD"),n("2B1R"),n("wLYn");var l=a(n("N9UN")),u=a(n("DtFj")),i=a(n("4IMT")),c=a(n("QpBz")),s=a(n("yXPU")),d=a(n("CC+v")),f=a(n("lwsE")),p=a(n("W8MJ")),m=a(n("PJYZ")),E=a(n("7W2i")),v=a(n("a1gu")),T=a(n("Nsbk")),y=a(n("lSNA")),O=a(n("VkAN")),h=a(n("FAat")),N=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==r(e)&&"function"!=typeof e)return{default:e};var n=b(t);if(n&&n.has(e))return n.get(e);var a={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var l in e)if("default"!==l&&Object.prototype.hasOwnProperty.call(e,l)){var u=o?Object.getOwnPropertyDescriptor(e,l):null;u&&(u.get||u.set)?Object.defineProperty(a,l,u):a[l]=e[l]}a.default=e,n&&n.set(e,a);return a}(n("q1tI")),g=a(n("9ObM")),C=a(n("RHHV"));n("+5i3");var P,S=n("RzPm");function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(b=function(e){return e?n:t})(e)}function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach((function(t){(0,y.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=(0,T.default)(e);if(t){var r=(0,T.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return(0,v.default)(this,n)}}var I=h.default.Option,L=g.default.span(P||(P=(0,O.default)(["\n    color: #FF5F5C;\n"])));t.RedTxt=L;var D=function(e){(0,E.default)(n,e);var t=_(n);function n(){var e;(0,f.default)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return e=t.call.apply(t,[this].concat(r)),(0,y.default)((0,m.default)(e),"state",{dataSource:[],table:{loading:!1},clusterList:[],clusterId:void 0,clusterMap:{},nodeList:[],node:void 0,isShowResource:!1,editModalKey:null}),(0,y.default)((0,m.default)(e),"onTableChange",(function(t,n,a){var r=Object.assign(e.state.table,{pageIndex:t.current});e.setState({table:r},(function(){e.getClusterDetail()}))})),(0,y.default)((0,m.default)(e),"handleKillAll",(function(t){e.setState({isShowAllKill:!0,isKillAllTasks:!0})})),(0,y.default)((0,m.default)(e),"getClusterItem",(function(t){var n=e.state.clusterList;return(void 0===n?[]:n).find((function(e){return e.id===t}))})),e}return(0,p.default)(n,[{key:"componentDidMount",value:function(){this.getClusterSelect()}},{key:"getClusterDetail",value:function(){var e=this,t=this.state,n=t.table,a=t.node,r=this.state.clusterId,o=this.getClusterItem(r);o&&(this.setState({table:R(R({},n),{},{loading:!0})}),C.default.getClusterDetail({clusterName:o.clusterName,nodeAddress:a}).then((function(t){if(1==t.code){var a=t.data;e.setState({dataSource:a||[],table:R(R({},n),{},{loading:!1})})}else e.setState({table:R(R({},n),{},{loading:!1})})})))}},{key:"getClusterSelect",value:function(){var e=this;return C.default.getAllCluster().then((function(t){if(1==t.code){var n=t.data,a={},r=[];Array.isArray(n)&&(a=n.reduce((function(e,t){return R(R({},e),{},(0,y.default)({},t.id,t.clusterName))}),{}),r=n.map((function(e){return R(R({},e),{},{id:e.id+""})}))),e.setState({clusterList:r,clusterMap:a,clusterId:n&&n[0]&&n[0].id+""},(function(){e.getNodeAddressSelect()}))}}))}},{key:"getClusterOptionView",value:function(){return this.state.clusterList.map((function(e,t){return N.createElement(I,{key:e.id,value:"".concat(e.id),"data-item":e},e.clusterName)}))}},{key:"clusterOptionChange",value:function(e){this.setState({clusterId:e},this.getClusterDetail)}},{key:"getNodeAddressSelect",value:function(){var e=this;return C.default.getNodeAddressSelect().then((function(t){if(1==t.code){var n=t.data;e.setState({nodeList:n||[]},e.getClusterDetail.bind(e))}}))}},{key:"getNodeAddressOptionView",value:function(){return this.state.nodeList.map((function(e,t){return N.createElement(I,{key:t,value:e},e)}))}},{key:"nodeAddressOptionChange",value:function(e){this.setState({node:e},this.getClusterDetail.bind(this))}},{key:"handleClickResource",value:function(){this.setState({isShowResource:!0,editModalKey:Math.random()})}},{key:"handleCloseResource",value:function(){this.setState({isShowResource:!1})}},{key:"viewDetails",value:function(e,t){var n=this.state,a=n.clusterId,r=n.node,o=this.getClusterItem(a);this.props.router.push({pathname:"/console-ui/queueManage/detail",query:{node:r,jobStage:t,clusterName:o.clusterName,engineType:e.engineType,jobResource:e.jobResource}})}},{key:"onKillAllTask",value:function(e){var t=this.state.node,n=this;d.default.confirm({title:"杀死全部",okText:"杀死全部",okType:"danger",cancelText:"取消",width:"460px",iconType:"close-circle",content:N.createElement("div",{style:{fontSize:"14px"}},N.createElement("p",null,"杀死所有",N.createElement(L,null,"队列中、已存储、等待重试、等待资源"),"的任务"),N.createElement("p",null,N.createElement(L,null,"运行中的任务不会被杀死"),"，可点击运行中的任务，并执行批量杀死操作")),onOk:function(){return(0,s.default)(o.default.mark((function a(){return o.default.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,C.default.killAllTask({jobResource:e.jobResource,nodeAddress:t});case 2:1===a.sent.code&&(c.default.success("杀死全部成功！"),n.getClusterDetail());case 4:case"end":return a.stop()}}),a)})))()},onCancel:function(){}})}},{key:"initTableColumns",value:function(){var e=this,t=function(t,n,a){return N.createElement("a",{onClick:e.viewDetails.bind(e,n,a)},t||0)};return[{title:"计算类型",dataIndex:"jobResource",render:function(e,n){return t(e,n,S.JobStage.Queueing)}},{title:"队列中(等待时长)",width:220,dataIndex:"priorityJobSize",render:function(e,n){var a=e+(n.priorityWaitTime?" (".concat(n.priorityWaitTime,")"):"");return t(a,n,S.JobStage.Queueing)}},{title:"已存储",dataIndex:"dbJobSize",render:function(e,n){return t(e,n,S.JobStage.Saved)}},{title:"等待重试",dataIndex:"restartJobSize",render:function(e,n){return t(e,n,S.JobStage.WaitTry)}},{title:"等待资源",dataIndex:"lackingJobSize",render:function(e,n){return t(e,n,S.JobStage.WaitResource)}},{title:"运行中",dataIndex:"submittedJobSize",render:function(e,n){return t(e,n,S.JobStage.Running)}},{title:"操作",dataIndex:"deal",render:function(t,n){return N.createElement("div",null,N.createElement("a",{onClick:e.onKillAllTask.bind(e,n)},"杀死全部"))}}]}},{key:"render",value:function(){var e=this.initTableColumns(),t=this.state,n=t.dataSource,a=t.table,r=t.clusterId,o=t.node,c=a.loading;return N.createElement("div",{className:" api-mine nobackground m-card height-auto",style:{marginTop:"20px"}},N.createElement("div",{style:{margin:"20px"}},"集群：",N.createElement(h.default,{className:"dt-form-shadow-bg",style:{width:150,marginRight:"10px"},placeholder:"选择集群",onChange:this.clusterOptionChange.bind(this),value:r},this.getClusterOptionView()),"节点：",N.createElement(h.default,{className:"dt-form-shadow-bg",style:{width:150},placeholder:"选择节点",allowClear:!0,onChange:this.nodeAddressOptionChange.bind(this),value:o},this.getNodeAddressOptionView()),N.createElement("div",{style:{float:"right"}},N.createElement(i.default,{size:"large",style:{marginLeft:"8px"},onClick:this.getClusterDetail.bind(this)},"刷新"))),N.createElement(l.default,{style:{marginTop:"0px"},className:"box-1",hoverable:!0},N.createElement(u.default,{rowKey:function(e){return e.clusterId},className:"dt-table-border",loading:c,columns:e,dataSource:n,onChange:this.onTableChange})))}}]),n}(N.Component);t.default=D}},[["pLYI",4,2,5]]])}));