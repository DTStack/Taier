!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Datasource=t():e.Datasource=t()}(window,(function(){return function(e){function t(t){for(var r,o,u=t[0],s=t[1],i=t[2],d=0,f=[];d<u.length;d++)o=u[d],Object.prototype.hasOwnProperty.call(l,o)&&l[o]&&f.push(l[o][0]),l[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(e[r]=s[r]);for(c&&c(t);f.length;)f.shift()();return n.push.apply(n,i||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],r=!0,u=1;u<a.length;u++){var s=a[u];0!==l[s]&&(r=!1)}r&&(n.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},l={21:0},n=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/datasource/";var u=window["webpackJsonp_data-source"]=window["webpackJsonp_data-source"]||[],s=u.push.bind(u);u.push=t,u=u.slice();for(var i=0;i<u.length;i++)t(u[i]);var c=s;return n.push(["pLYI",0,1,2,3,4,22,23,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]),a()}({"+K5h":function(e,t,a){},"294D":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG"),l=r.__importDefault(a("q1tI")),n=r.__importDefault(a("TSYQ"));t.default=function(e,t){var a=function(a){return l.default.createElement("div",{className:n.default({"step-icon-wrapper":!0,filled:e===t,"border-gray":e>t})},a)};return a(e<t?l.default.createElement("i",{className:"step-icon iconfont2 iconOutlinedxianxing_buzhou_wancheng"}):l.default.createElement("span",{className:"font"},e+1))}},"7EOV":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.columns=void 0;var r=a("mrSG").__importDefault(a("q1tI")),l=a("gdfu"),n=a("Lwkh"),o=a("C0PH");a("+K5h");t.columns=function(e){var t=e.toEdit,a=(e.toAuth,e.toDelete),u=e.left,s=e.right,i=e.filters,c=function(){return r.default.createElement("i",{className:"iconfont2 iconFilltianchong_shaixuan"})};return[{title:"数据源名称",width:240,key:"dataName",fixed:u,ellipsis:!0,render:function(e,t){return 0===t.isMeta?r.default.createElement("span",{title:t.dataName,style:{color:o.MAIN_COLOR},className:"ellipsis"},t.dataName):r.default.createElement("div",{style:{color:o.MAIN_COLOR,width:"210px"}},r.default.createElement("span",{title:t.dataName,style:{marginRight:4},className:"ellipsisSpec"},t.dataName),r.default.createElement(l.Tag,{style:{float:"left"},className:"show-meta"},"Meta"))}},{title:"类型",dataIndex:"dataType",ellipsis:!0,width:200,render:function(e,t){return r.default.createElement("span",{className:"ellipsis"},t.dataType,t.dataVersion||"")}},{title:"授权产品",dataIndex:"appNames",ellipsis:!0,width:200,render:function(e,t){return r.default.createElement("span",{className:"ellipsis"},t.appNames||"--")}},{title:"描述",dataIndex:"dataDesc",ellipsis:!0,width:200,render:function(e,t){return r.default.createElement("span",{className:"ellipsis"},t.dataDesc||"--")}},{title:"连接信息",dataIndex:"linkJson",width:240,render:function(e,t){return r.default.createElement(n.ExtTableCell,{sourceData:t})}},{title:"连接状态",dataIndex:"status",width:132,render:function(e,t){return 0===e?r.default.createElement("span",null,r.default.createElement(l.Badge,{status:"error"}),"连接失败"):r.default.createElement("span",null,r.default.createElement(l.Badge,{status:"success"}),"正常")},filters:i,filterIcon:function(){return r.default.createElement(l.Icon,{component:c,style:{cursor:"pointer",position:"relative",width:16,marginLeft:4}})}},{title:"最近修改时间",dataIndex:"gmtModified",key:"gmtModified",ellipsis:!0,width:200},{title:"操作",key:"action",fixed:s,width:200,render:function(e,n){return r.default.createElement(r.default.Fragment,null,r.default.createElement("span",{onClick:function(){return t(n)}},r.default.createElement("a",{className:0===n.isMeta?"data-view":"operate-forbid"},"编辑")),r.default.createElement(l.Divider,{type:"vertical"}),n.isMeta||1===n.isImport?r.default.createElement("span",{onClick:function(){n.isMeta?l.message.error("带meta标识的数据源不能编辑、删除"):l.message.error("数据源已授权给产品，不可删除")}},r.default.createElement("a",{className:"operate-forbid"},"删除")):r.default.createElement("span",{className:"data-view"},r.default.createElement(l.Popconfirm,{overlayClassName:"pop-confirm",title:"是否删除此条记录？",icon:r.default.createElement("span",null),onConfirm:function(){return a(n)},okText:"删除",cancelText:"取消",okType:"danger"},r.default.createElement("a",null,"删除"))))}}]}},"9/V2":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG"),l=r.__importStar(a("q1tI")),n=a("CLrh"),o=a("gdfu"),u=a("dtw8"),s=r.__importDefault(a("ZA7E"));a("+K5h");var i=o.Select.Option;t.default=o.Form.create({})(u.withRouter((function(e){var t=this,a=e.onSearch,u=r.__read(l.useState([]),2),c=u[0],d=u[1],f=r.__read(l.useState([]),2),m=(f[0],f[1],r.__read(l.useState(["全部"]),2)),p=m[0],_=m[1],E=r.__read(l.useState(["all"]),2);return E[0],E[1],l.useEffect((function(){r.__awaiter(t,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(a){switch(a.label){case 0:return[4,n.API.typeList()];case 1:return e=a.sent(),t=e.data,e.success?(Array.isArray(t)&&t.unshift({dataType:"全部"}),d(t||[])):o.message.error("获取类型下拉框内容失败！"),[2]}}))}))}),[]),l.default.createElement("div",{className:"top-search"},l.default.createElement(o.Form,{layout:"inline",className:"top-search-form"},l.default.createElement(o.Form.Item,null,l.default.createElement(s.default,{className:"dt-form-shadow-bg",placeholder:"数据源名称/描述",onSearch:function(e){return a({search:e.trim()})},width:160})),l.default.createElement(o.Form.Item,{label:"类型"},l.default.createElement(o.Select,{dropdownClassName:"top-search-select",className:"dt-form-shadow-bg",mode:"multiple",placeholder:"请选择类型",allowClear:!0,showSearch:!0,maxTagCount:1,showArrow:!0,optionFilterProp:"children",style:{width:280},onChange:function(e){return function(e){var t=e;t.includes("全部")&&(t=["全部"]),_(t),t.includes("全部")?a({dataTypeList:null}):a({dataTypeList:t})}(e)},value:p},c.length>0&&c.map((function(e){return l.default.createElement(i,{disabled:p.includes("全部")&&"全部"!==e.dataType,value:e.dataType,key:e.dataType},e.dataType)})))),l.default.createElement(o.Form.Item,null,l.default.createElement(o.Checkbox,{onChange:function(e){return a({isMeta:e.target.checked?1:0,currentPage:1})}},"显示默认数据库"),l.default.createElement(o.Tooltip,{title:"各模块在创建项目时的默认数据源"},l.default.createElement(o.Icon,{style:{color:"#999"},type:"question-circle-o"}))),l.default.createElement(o.Form.Item,{style:{float:"right",marginRight:0}},l.default.createElement(o.Button,{type:"primary",onClick:function(){e.router.push("/data-source/add")},style:{width:104}},"新增数据源"))))})))},C0PH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MAIN_COLOR=void 0,t.MAIN_COLOR="#3F87FF"},CLrh:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URL=t.API=void 0;var r,l,n=a("mrSG"),o=a("cCS3"),u=n.__importDefault(a("Ooke")),s=n.__importDefault(a("UyWH")),i=n.__importDefault(a("IAdA")),c=new o.Fetch,d=Object.keys;t.API=(r=Object.assign({},s.default,u.default),l={},d(r).forEach((function(e){var t=r[e];l[e]=function(e,a){return void 0===a&&(a={}),n.__awaiter(this,void 0,void 0,(function(){var r;return n.__generator(this,(function(l){switch(l.label){case 0:return(r=i.default(window.location.hash)).datasource_id&&(a.headers=new Headers({dt_datasource_id:r.datasource_id})),[4,c[t.method](t.url,e,a)];case 1:return[2,l.sent()]}}))}))}})),l),t.URL=function(e){var t={};return d(e).forEach((function(a){var r=e[a];t[a]=r.url})),t}(Object.assign({},s.default,u.default))},DTvn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="/api/publicService";t.default={dataSourcepage:{method:"post",url:r+"/dataSource/page"},typeList:{method:"post",url:r+"/dataSource/type/list"},productList:{method:"post",url:r+"/dataSource/product/list"},dataSourceDelete:{method:"post",url:r+"/dataSource/delete"},authProductList:{method:"post",url:r+"/dataSource/auth/product/list"},dataSoProAuth:{method:"post",url:r+"/dataSource/product/auth"},queryDsClassifyList:{method:"post",url:r+"/addDs/queryDsClassifyList"},queryDsTypeByClassify:{method:"post",url:r+"/addDs/queryDsTypeByClassify"},queryDsVersionByType:{method:"post",url:r+"/addDs/queryDsVersionByType"},findTemplateByTypeVersion:{method:"post",url:r+"/dsForm/findFormByTypeVersion"},queryProductList:{method:"post",url:r+"/addDs/queryAppList"},addDatasource:{method:"post",url:r+"/addDs/addOrUpdateSource"},addOrUpdateSourceWithKerberos:{method:"postForm",url:r+"/addDs/addOrUpdateSourceWithKerberos"},testCon:{method:"post",url:r+"/addDs/testCon"},testConWithKerberos:{method:"postForm",url:r+"/addDs/testConWithKerberos"},detail:{method:"post",url:r+"/dataSource/detail"},uploadCode:{method:"postForm",url:r+"/addDs/getPrincipalsWithConf"}}},DoNf:function(e,t,a){},EMcw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG"),l=r.__importStar(a("q1tI")),n=a("dtw8"),o=a("gdfu"),u=r.__importDefault(a("TYzk")),s=r.__importDefault(a("LwzM")),i=r.__importDefault(a("j3x2")),c=r.__importDefault(a("WLtI"));a("DoNf");var d=r.__importDefault(a("294D")),f=o.Steps.Step;t.default=n.withRouter((function(e){var t=l.useRef(null),a=r.__read(l.useState(0),2),n=a[0],m=a[1],p=r.__read(l.useState(!1),2),_=p[0],E=p[1],h=function(e){m(1)},v=function(){t.current.testForm()},S=function(){E(!0),t.current.submitForm()},y=function(){E(!1)};return l.default.createElement("div",{className:"source"},l.default.createElement(u.default,{name:"新增"}),l.default.createElement("div",{className:"content"},l.default.createElement("div",{className:"top-steps"},l.default.createElement(o.Steps,{className:"dm-steps",current:n},["选择数据源","产品授权","信息配置"].map((function(e,t){return l.default.createElement(f,{title:e,key:t,icon:d.default(t,n)})})))),function(a){switch(a){case 0:return l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"step-info"},l.default.createElement(s.default,{nextType:h})),l.default.createElement("div",{className:"footer-select"},l.default.createElement(o.Button,{key:"1",style:{marginRight:8,width:80},onClick:function(){e.router.push("/data-source/list")}},"取消")));case 1:return l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"step-info"},l.default.createElement(i.default,null)),l.default.createElement("div",{className:"footer-select"},l.default.createElement(o.Button,{key:"3",style:{marginRight:8,width:80},onClick:function(){m(0)}},"上一步"),l.default.createElement(o.Button,{style:{width:80},type:"primary",onClick:function(){m(2)}},"下一步")));case 2:return l.default.createElement(l.default.Fragment,null,l.default.createElement("div",{className:"step-info"},l.default.createElement(c.default,{cRef:t,record:"",changeBtnStatus:y})),l.default.createElement("div",{className:"footer-select"},l.default.createElement(o.Button,{key:"4",type:"primary",icon:"sync",onClick:v,style:{width:108}},l.default.createElement("span",null,"测试连通性")),l.default.createElement(o.Button,{key:"5",style:{marginLeft:60,marginRight:8,width:80},onClick:function(){m(1)}},"上一步"),l.default.createElement(o.Button,{key:"6",type:"primary",onClick:S,disabled:_,style:{width:80}},"确定")))}}(n)))}))},IAdA:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG");t.default=function(e){var t=e.split("?")[1];return t?t.split("&").reduce((function(e,t){var a=r.__read(t.split("="),2),l=a[0],n=a[1];return e[l]=n,e}),{}):{}}},IENE:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hdfsConfig=void 0;var r=a("mrSG").__importStar(a("q1tI"));t.hdfsConfig=r.createElement("div",null,"高可用模式下的填写规则：",r.createElement("ul",null,r.createElement("li",null,"1、分别要填写：nameservice名称、 namenode名称（多个以逗号分隔）、proxy.provider参数；"),r.createElement("li",null,"2、所有参数以JSON格式填写；"),r.createElement("li",null,"3、格式为：",r.createElement("br",null),'"dfs.nameservices": "nameservice名称",','"dfs.ha.namenodes.nameservice名称": "namenode名称，以逗号分隔",','"dfs.namenode.rpc-address.nameservice名称.namenode名称": "",','"dfs.namenode.rpc-address.nameservice名称.namenode名称": "",','"dfs.client.failover.proxy.provider.',r.createElement("br",null),'nameservice名称": "org.apache.hadoop.',r.createElement("br",null),"hdfs.server.namenode.ha.",r.createElement("br",null),'ConfiguredFailoverProxyProvider"'),r.createElement("li",null,"4、详细参数含义请参考《帮助文档》或",r.createElement("a",{href:"http://hadoop.apache.org/docs/r2.7.4/hadoop-project-dist/hadoop-hdfs/HDFSHighAvailabilityWithQJM.html",target:"blank"},"Hadoop官方文档"))))},"Kd+S":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSaveStatus=t.remove=t.saveCheckStauts=t.checks=void 0,t.checks=[],t.saveCheckStauts=function(e){t.checks=e},t.remove=function(){sessionStorage.removeItem("current"),sessionStorage.removeItem("sqlType"),sessionStorage.removeItem("version"),t.saveCheckStauts([])},t.getSaveStatus=function(){var e={dataType:""};try{e=JSON.parse(sessionStorage.getItem("sqlType"))}catch(e){}return{menuSelected:sessionStorage.getItem("current"),sqlType:e,version:sessionStorage.getItem("version")||""}}},LuB0:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRoutes=void 0;var r=a("mrSG"),l=r.__importStar(a("q1tI")),n=r.__importDefault(a("PaWD")),o=r.__importDefault(a("Mn5C")),u=function(){return l.default.createElement(n.default,{status:404,subTitle:"对不起，你访问的页面不存在"})},s=function(e){return function(t){return l.default.createElement(l.Suspense,{fallback:l.default.createElement(o.default,null)},l.default.createElement(e,r.__assign({},t)))}},i=s(l.lazy((function(){return Promise.resolve().then((function(){return r.__importStar(a("woEQ"))}))}))),c=s(l.lazy((function(){return Promise.resolve().then((function(){return r.__importStar(a("EMcw"))}))}))),d=s(l.lazy((function(){return Promise.resolve().then((function(){return r.__importStar(a("pGkl"))}))})));t.getRoutes=function(){return[{path:"/data-source",childRoutes:[{path:"list",component:i},{path:"add",component:c},{path:"edit",component:d}]},{path:"/*",component:u}]}},Lwkh:function(e,t,a){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ExtTableCell=void 0;var l=a("mrSG"),n=l.__importDefault(a("q1tI")),o=a("WOlr"),u=((r={})[o.DATA_SOURCE.MYSQL]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.CARBONDATA]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.CLICKHOUSE]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.POLAR_DB]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.ORACLE]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.SQLSERVER]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.SQLSERVER2017]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.DB2]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.KUDU]=[["hostPorts","集群地址"]],r[o.DATA_SOURCE.IMPALA]=[["jdbcUrl","jdbcUrl"],["defaultFS","defaultFS"]],r[o.DATA_SOURCE.POSTGRESQL]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.HDFS]=[["defaultFS","defaultFS"]],r[o.DATA_SOURCE.HIVE]=[["jdbcUrl","jdbcUrl"],["defaultFS","defaultFS"]],r[o.DATA_SOURCE.Hive_1X]=[["jdbcUrl","jdbcUrl"],["defaultFS","defaultFS"]],r[o.DATA_SOURCE.Hive_2X]=[["jdbcUrl","jdbcUrl"],["defaultFS","defaultFS"]],r[o.DATA_SOURCE.HBASE]=[["hbase_quorum","Zookeeper集群地址"]],r[o.DATA_SOURCE.HBase_1X]=[["hbase_quorum","Zookeeper集群地址"]],r[o.DATA_SOURCE.HBase_2X]=[["hbase_quorum","Zookeeper集群地址"]],r[o.DATA_SOURCE.FTP]=[["protocol","Protocol"],["host","Host"],["port","Port"],["username","用户名"]],r[o.DATA_SOURCE.MAXCOMPUTE]=[["endPoint","endPoint"],["project","项目名称"],["accessId","Access Id"]],r[o.DATA_SOURCE.ES]=[["address","集群地址"]],r[o.DATA_SOURCE.ES6]=[["address","集群地址"]],r[o.DATA_SOURCE.ES7]=[["address","集群地址"]],r[o.DATA_SOURCE.ELASTICSEARCH]=[["address","集群地址"]],r[o.DATA_SOURCE.REDIS]=[["hostPort","地址"],["database","数据库"]],r[o.DATA_SOURCE.MONGODB]=[["hostPorts","集群地址"],["database","数据库"]],r[o.DATA_SOURCE.KAFKA_11]=[["address","集群地址"],["brokerList","broker地址"]],r[o.DATA_SOURCE.KAFKA_09]=[["address","集群地址"],["brokerList","broker地址"]],r[o.DATA_SOURCE.KAFKA_10]=[["address","集群地址"],["brokerList","broker地址"]],r[o.DATA_SOURCE.KAFKA]=[["address","集群地址"],["brokerList","broker地址"]],r[o.DATA_SOURCE.KAFKA_2X]=[["address","集群地址"],["brokerList","broker地址"]],r[o.DATA_SOURCE.KAFKA_NEW]=[["address","集群地址"],["brokerList","broker地址"]],r[o.DATA_SOURCE.EMQ]=[["address","Broker URL"]],r[o.DATA_SOURCE.TIDB]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.KINGBASEES8]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.GBASE_8A]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.S3]=[["hostname","hostname"]],r[o.DATA_SOURCE.WEBSOCKET]=[["url","url"]],r[o.DATA_SOURCE.SOCKET]=[["url","url"]],r[o.DATA_SOURCE.GREENPLUM]=[["jdbcUrl","jdbcUrl"]],r[o.DATA_SOURCE.KYLINURL]=[["authURL","authURL"],["username","用户名"]],r[o.DATA_SOURCE.PHOENIX]=[["jdbcUrl","jdbcUrl"]],r[o.DATA_SOURCE.PRESTO]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.VERTICA]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.ADB_POSTGRESQL]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.SOLR]=[["zkHost","集群地址"],["chroot","chroot路径"]],r[o.DATA_SOURCE.INFLUXDB]=[["url","URL"],["username","用户名"]],r[o.DATA_SOURCE.INCEPTOR]=[["jdbcUrl","jdbcUrl"],["defaultFS","defaultFS"]],r[o.DATA_SOURCE.AWSS3]=[["accessKey","ACCESS KEY"]],r[o.DATA_SOURCE.SPARKTHRIFT]=[["jdbcUrl","jdbcUrl"],["defaultFS","defaultFS"]],r[o.DATA_SOURCE.GAUSSDB]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.OPENTSDB]=[["url","URL"]],r[o.DATA_SOURCE.DORIS]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.KYLINJDBC]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r[o.DATA_SOURCE.SQLSERVERJDBC]=[["jdbcUrl","jdbcUrl"],["username","用户名"]],r);t.ExtTableCell=function(e){var t=e.sourceData,a=u[t.type],r={};try{r=JSON.parse(t.linkJson)||{}}catch(e){}return a?n.default.createElement("div",null,a.map((function(e){var t=l.__read(e,2),a=t[0],o=t[1];return n.default.createElement("p",{key:a,style:{display:"flex",lineHeight:1.5,marginBottom:0}},n.default.createElement("span",{style:{color:"#999",flexShrink:0}},o,"："),n.default.createElement("span",{className:"link-json",title:r[a]||""},r[a]||""))}))):null}},LwzM:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG"),l=r.__importStar(a("q1tI")),n=r.__importDefault(a("ZA7E")),o=a("gdfu"),u=a("CLrh"),s=a("Kd+S"),i=a("q1tI"),c=r.__importDefault(a("LvDl"));t.default=function(e){var t=this,a=e.nextType,d=r.__read(l.useState(null),2),f=d[0],m=d[1],p=r.__read(l.useState([]),2),_=p[0],E=p[1],h=r.__read(l.useState([]),2),v=h[0],S=h[1],y=r.__read(l.useState(null),2),g=y[0],b=y[1],A=i.useRef(null),T=r.__read(l.useState(1),2),I=T[0],C=T[1],k=function(e,a,l){return void 0===a&&(a=""),r.__awaiter(t,void 0,void 0,(function(){var t,n;return r.__generator(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,u.API.queryDsTypeByClassify({classifyId:e,search:a})];case 1:return t=r.sent(),n=t.data,t.success&&(n.forEach((function(e){e.selected=e.typeId===l,e.imgUrl="/assets/imgs/"+e.imgUrl})),S(n||[])),[3,3];case 2:return r.sent(),o.notification.error({message:"错误！",description:"根据分类获取数据源类型失败！"}),[3,3];case 3:return[2]}}))}))};l.useEffect((function(){r.__awaiter(t,void 0,void 0,(function(){var e,t,a,l,n;return r.__generator(this,(function(r){switch(r.label){case 0:e=s.getSaveStatus(),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,u.API.queryDsClassifyList()];case 2:return t=r.sent(),a=t.data,t.success&&(l=e.menuSelected||a[0].classifyId,E(a||[]),m(l),b(a[0].classifyId),k(l,"",null===(n=e.sqlType)||void 0===n?void 0:n.typeId)),[3,4];case 3:return r.sent(),o.notification.error({message:"错误！",description:"获取数据源分类类目列表失败！"}),[3,4];case 4:return[2]}}))}))}),[]);var O=c.default.debounce((function(){if(A.current){var e=parseFloat(window.getComputedStyle(A.current).width),t=Math.floor(e/232);C((e-16*t)/t/216)}}),500);return l.useEffect((function(){O(),window.addEventListener("resize",(function(){O()}))}),[A.current]),l.default.createElement("div",{className:"fill"},l.default.createElement(n.default,{placeholder:"按数据源名称搜索",onSearch:function(e){return function(e){m(g),k(g,e)}(e)},width:200}),l.default.createElement("div",{className:"show-type"},l.default.createElement("div",{className:"left-menu"},l.default.createElement(o.Menu,{selectedKeys:[String(f)],mode:"inline",onClick:function(e){m(e.key),k(e.key),sessionStorage.setItem("current",e.key)}},_.length>0&&_.map((function(e){return l.default.createElement(o.Menu.Item,{key:e.classifyId},l.default.createElement("span",null,e.classifyName))})))),l.default.createElement("div",{className:"right-menu"},l.default.createElement("div",{className:"right-menu-main"},l.default.createElement("div",{className:"right-menu-main-content",ref:A},v.length>0&&v.map((function(e,t){return l.default.createElement("div",{className:"right-menu-item",key:t,style:{width:"auto",marginBottom:20},onClick:function(){return function(e){var t=[];try{(t=JSON.parse(JSON.stringify(v))).forEach((function(t){t.typeId===e.typeId?t.selected=!0:t.selected=!1}))}catch(e){}S(t),a(!0),sessionStorage.setItem("sqlType",JSON.stringify(e)),sessionStorage.removeItem("version")}(e)}},l.default.createElement("img",{src:e.imgUrl,alt:"图片显示失败",className:e.selected?"selected":"",style:{width:216*I,height:108*I}}),l.default.createElement("p",{style:{textAlign:"center",marginTop:12}},e.dataType))})))))))}},M0vb:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="/api/publicService/model";t.default={getModelList:{method:"post",url:r+"/list"},getModelDetail:{method:"get",url:r+"/detail"},isModelReferenced:{method:"post",url:r+"/checkRef"},deleteModel:{method:"post",url:r+"/delete"},releaseModel:{method:"post",url:r+"/release"},unreleaseModel:{method:"post",url:r+"/offline"},getAllDataSourceList:{method:"get",url:r+"/data/sources"},getDataSourceTypeList:{method:"get",url:r+"/data/sourceType"},getDataModelUpdateTypeList:{method:"get",url:r+"/data/updateType"},getDataModelSchemaList:{method:"get",url:r+"/data/schemas"},getDataModelTableList:{method:"get",url:r+"/data/tables"},previewSql:{method:"post",url:r+"/sqlPreview"},getDataModelColumns:{method:"post",url:r+"/data/columns"},repeatValidate:{method:"post",url:"/api/publicService/common/name/repeat"},isPartition:{method:"post",url:r+"/data/isPart"},saveDataModel:{method:"post",url:r+"/save"},getVersionHistoryList:{method:"post",url:r+"/versionHistory"},getVersionDetail:{method:"get",url:r+"/versionDetail"},recoverVersion:{method:"post",url:r+"/versionRecovery"}}},Mn5C:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG").__importDefault(a("q1tI"));a("RaQO"),t.default=function(){return r.default.createElement("div",{className:"load-anim"},r.default.createElement("div",{className:"loading","data-testid":"test-loading"},r.default.createElement("div",{className:"dot"}),r.default.createElement("div",{className:"dot"}),r.default.createElement("div",{className:"dot"}),r.default.createElement("div",{className:"dot"}),r.default.createElement("div",{className:"dot"})))}},OHD6:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStore=void 0;var r=a("mrSG"),l=a("dtw8"),n=(a("1ZXz"),r.__importDefault(a("TdMD"))),o=a("fvjX"),u=a("L3Ur");t.getStore=function(e,t){var a=function(e){return o.createStore(e,o.applyMiddleware(n.default))}(e),r=t&&"hash"===t?l.hashHistory:l.browserHistory;return{store:a,history:u.syncHistoryWithStore(r,a)}}},Ooke:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG"),l=r.__importDefault(a("WHRo"));t.default=r.__assign({},l.default)},PaWD:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG").__importDefault(a("q1tI")),l=a("dtw8"),n=a("gdfu");t.default=function(e){var t=e.status,a=e.subTitle;return r.default.createElement(n.Result,{status:t,title:t,style:{background:"none"},subTitle:a,extra:r.default.createElement(l.Link,{to:"/"},r.default.createElement(n.Button,{type:"primary"},"返回首页"))})}},RaQO:function(e,t,a){},TYzk:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG").__importDefault(a("q1tI")),l=a("gdfu"),n=a("dtw8");t.default=n.withRouter((function(e){var t=e.name,a=e.router;return r.default.createElement("div",null,r.default.createElement(l.Breadcrumb,null,r.default.createElement(l.Breadcrumb.Item,{onClick:function(){a.push("/data-source/list")}},r.default.createElement("a",null,"数据源中心")),r.default.createElement(l.Breadcrumb.Item,null,r.default.createElement("a",null,t,"数据源"))))}))},UyWH:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG"),l=r.__importDefault(a("M0vb")),n=r.__importDefault(a("DTvn"));t.default=r.__assign(r.__assign({},l.default),n.default)},WHRo:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={post:{method:"post",url:"/foo/bar"},get:{method:"get",url:"/foo/bas"}}},WLtI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG"),l=r.__importStar(a("q1tI")),n=a("dtw8"),o=a("gdfu"),u=r.__importDefault(a("+QRC")),s=r.__importDefault(a("wd/R")),i=r.__importDefault(a("aqBw")),c=a("CLrh"),d=a("Kd+S"),f=a("aijj"),m=a("nWVm"),p=a("WOlr"),_=a("IENE"),E=a("ioVt");a("+K5h");var h=o.Input.TextArea,v=o.Select.Option;t.default=o.Form.create({})(n.withRouter((function(e){var t=e.form,a=e.cRef,n=e.record,S=t.getFieldDecorator,y=t.validateFields,g=t.getFieldValue,b=t.setFieldsValue,A=r.__read(l.useState([]),2),T=A[0],I=A[1],C=r.__read(l.useState(!1),2),k=C[0],O=C[1],D=r.__read(l.useState(null),2),R=D[0],P=D[1],w=r.__read(l.useState([]),2),N=w[0],F=w[1],U=r.__read(l.useState({dataType:"",dataVersion:"",appTypeList:[]}),2),L=U[0],j=U[1],M=r.__read(l.useState({}),2),B=M[0],x=M[1],K=r.__read(l.useState([]),2),V=K[0],q=K[1],H=r.__read(l.useState(!1),2),G=H[0],J=H[1],W=r.__read(l.useState(!1),2),Q=W[0],z=W[1],X=r.__read(l.useState(null),2),Y=X[0],Z=X[1];l.useImperativeHandle(a,(function(){return{testForm:function(){$(!1)},submitForm:function(){$(!0)}}}));l.useEffect((function(){r.__awaiter(void 0,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(a){switch(a.label){case 0:return[4,r.__awaiter(void 0,void 0,void 0,(function(){var e,t,a,l;return r.__generator(this,(function(r){switch(r.label){case 0:return e=d.getSaveStatus(),t=(null===(l=e.sqlType)||void 0===l?void 0:l.dataType)||"",a=e.version,[4,c.API.findTemplateByTypeVersion({dataType:(null==n?void 0:n.dataType)||t,dataVersion:(null==n?void 0:n.dataVersion)||a})];case 1:return[4,r.sent().data];case 2:return[2,r.sent()||[]]}}))}))];case 1:return e=(e=a.sent().fromFieldVoList).filter((function(e){return 1!==e.invisible})),n?[4,r.__awaiter(void 0,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,c.API.detail({dataInfoId:null==n?void 0:n.dataInfoId})];case 1:return[4,e.sent().data];case 2:return[2,e.sent()||[]]}}))}))]:[3,3];case 2:(t=a.sent())&&e.forEach((function(e){"数据源名称"===e.label&&(e.disabled=!0);try{e.initialValue=t[e.name]||JSON.parse(i.default.decode(t.dataJson))[e.name]}catch(e){}var a={};try{a=JSON.parse(f.utf8to16(i.default.decode(t.dataJson)))}catch(e){}Z(a),x((null==a?void 0:a.webSocketParams)||{})})),a.label=3;case 3:return I(e||[]),[2]}}))})),r.__awaiter(void 0,void 0,void 0,(function(){var e,t,a,l,o;return r.__generator(this,(function(u){switch(u.label){case 0:return e=d.getSaveStatus(),t=n.dataType||(null===(o=e.sqlType)||void 0===o?void 0:o.dataType),a=n.dataVersion||e.version,n?[4,r.__awaiter(void 0,void 0,void 0,(function(){var e,t,a,l;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,c.API.authProductList({dataInfoId:null==n?void 0:n.dataInfoId})];case 1:return e=r.sent(),t=e.data,a=e.success,l=[],a&&t.length>0&&t.forEach((function(e){1===e.isAuth&&l.push(e.appType)})),[2,l]}}))}))]:[3,2];case 1:return l=u.sent(),[3,3];case 2:l=d.checks,u.label=3;case 3:return j({dataType:t,dataVersion:a,appTypeList:l}),[2]}}))}))}),[]);var $=function(t){y((function(a,l){return r.__awaiter(void 0,void 0,void 0,(function(){var u,s,c;return r.__generator(this,(function(d){if(a)e.changeBtnStatus();else{for(s in J(!0),u=r.__assign({},L),l)"string"==typeof l[s]&&(l[s]=l[s].trim());u.dataName=l.dataName,u.dataDesc=(null==l?void 0:l.dataDesc)||"",delete l.dataName,delete l.dataDesc,delete l.dataType,c="添加数据源成功",n&&(u.id=n.dataInfoId,c="修改数据源成功");try{"{}"!==JSON.stringify(B)&&(l.webSocketParams=B)}catch(e){J(!1)}if(g("kerberosFile")){Q&&(u.file=null==l?void 0:l.kerberosFile),delete l.openKerberos,delete l.kerberosFile,delete u.appTypeList,u.appTypeListString=JSON.stringify(L.appTypeList);try{u.dataJsonString=i.default.encode(JSON.stringify(l)),console.log("fieldsValue: ",l)}catch(e){console.log("error: ",e),J(!1)}console.log("handelParams: ",u),t?te(u,c):ee(u,"testConWithKerberos").then((function(e){e.success&&e.data?o.message.success("连接成功"):o.message.error(e.message||"连接失败"),J(!1)})).catch((function(){J(!1),o.message.error("测试连通性请求超时")}))}else{try{u.dataJsonString=i.default.encode(f.utf16to8(JSON.stringify(l)))}catch(e){J(!1)}console.log("fieldsValue: ",l),Object.keys(l).forEach((function(e){void 0===u[e]&&(u[e]=l[e])})),console.log("handelParams: ",u),t?te(u,c):ee(u,"testCon").then((function(e){e.success&&e.data?o.message.success("连接成功"):o.message.error(e.message||"连接失败"),J(!1)})).catch((function(){J(!1),o.message.error("测试连通性请求超时")}))}}return[2]}))}))}))},ee=function(e,t){var a=new AbortController,r=a.signal;return new Promise((function(l,n){var o=0,u=setTimeout((function(){0===o&&(o=2,u=null,a.abort(),n("测试连通性请求超时"))}),1e4);c.API[t](e,{signal:r}).then((function(e){2!==o&&(clearTimeout(u),l(e),u=null,o=1)}))}))},te=function(t,a){y((function(l,n){return r.__awaiter(void 0,void 0,void 0,(function(){var n,u,s,i,d;return r.__generator(this,(function(r){switch(r.label){case 0:return l?[3,5]:g("kerberosFile")?[4,c.API.addOrUpdateSourceWithKerberos(t)]:[3,2];case 1:return n=r.sent(),s=n.success,i=n.message,d=n.data,s&&d?(o.message.success(""+a),setTimeout((function(){e.router.push("/data-source/list")}),500)):o.message.error(""+i||"保存失败"),J(!1),e.changeBtnStatus(!1),[3,4];case 2:return[4,c.API.addDatasource(t)];case 3:u=r.sent(),s=u.success,i=u.message,d=u.data,s&&d?(o.message.success(""+a),setTimeout((function(){e.router.push("/data-source/list")}),500)):o.message.error(""+i||"保存失败"),J(!1),e.changeBtnStatus(!1),r.label=4;case 4:return[3,6];case 5:e.changeBtnStatus(!1),r.label=6;case 6:return[2]}}))}))}))},ae=function(e){u.default(e.placeHold)?o.message.success("复制成功"):o.message.error("复制失败，请手动复制")},re=function(){var e=Object.assign({},B);e[""]="",le(B)?o.message.warning("请先完整填写参数!"):20!==Object.keys(B).length?x(e):o.message.warning("最多可添加20行鉴权参数!")},le=function(e){return Object.keys(e).includes("")||Object.values(e).includes("")},ne=function(e,t,a){var r=e.target.value,l=Object.assign({},B);if("key"===a){var n=Object.entries(l);n[t][0]=r,l=Object.fromEntries(n)}else l[Object.keys(B)[t]]=r;x(l)},oe=function(){var e,t,a=[];try{for(var n=r.__values(Object.entries(B)),u=n.next();!u.done;u=n.next()){var s=r.__read(u.value,2),i=s[0],c=s[1];a.push({key:i,value:c})}}catch(t){e={error:t}}finally{try{u&&!u.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return a.map((function(e,t){return l.default.createElement("div",{key:t,className:"ws-form"},l.default.createElement(o.Input,{autoComplete:"off",onChange:function(e){ne(e,t,"key")},value:e.key,placeholder:"请输入key值"})," ",":  ",l.default.createElement(o.Input.Password,{autoComplete:"off",onChange:function(e){ne(e,t,"value")},value:e.value,placeholder:"请输入value值",visibilityToggle:!1}),l.default.createElement("a",{onClick:function(){!function(e){var t=Object.assign({},B);delete t[Object.keys(B)[e]],x(t)}(t)}},"删除"))}))},ue=V.map((function(e){return l.default.createElement(v,{key:e,value:e},e)})),se=function(e,t){return r.__awaiter(void 0,void 0,void 0,(function(){var a,l;return r.__generator(this,(function(n){switch(n.label){case 0:return delete(a=r.__assign({},L)).appTypeList,[4,c.API.uploadCode(r.__assign({file:e},a))];case 1:return[4,n.sent()];case 2:return(l=n.sent()).success?(P(R),F(N),o.message.success("上传成功")):o.message.error("上传失败!"),t&&t(l),[2]}}))}))},ie=function(){var e={beforeUpload:function(e){return e.modifyTime=s.default(),z(!0),se(e,(function(t){var a,r;1===t.code?(b(((r={}).kerberosFile=e,r.principal=t.data[0],r.hbase_master_kerberos_principal="",r.hbase_regionserver_kerberos_principal="",r)),q(t.data)):b(((a={}).kerberosFile="",a))})),!1},fileList:[],name:"file",accept:".zip"};return l.default.createElement(o.Form.Item,r.__assign({},m.formNewLayout,{label:"",key:"kerberosFile",className:"mg-8"}),S("kerberosFile",{rules:[{required:!0,message:"文件不可为空！"}],initialValue:(null==Y?void 0:Y.kerberosFile)||""})(l.default.createElement("div",null)),l.default.createElement("div",{style:{display:"flex",position:"relative"}},l.default.createElement(o.Upload,r.__assign({},e),l.default.createElement(o.Button,{style:{color:"#999"}},l.default.createElement(o.Icon,{type:"upload"})," 上传文件"),l.default.createElement("p",{style:{marginTop:8,color:"#666"}},"上传单个文件，支持扩展格式：.zip")),l.default.createElement("div",{style:{position:"absolute",left:100}},l.default.createElement(o.Tooltip,{title:"仅支持Zip格式，压缩包需包含xxx.keytab、krb5.config文件。上传文件前，请在控制台开启SFTP服务。"},l.default.createElement(o.Icon,{type:"question-circle-o",style:{fontSize:"14px",marginTop:"11px",marginLeft:"10px",color:"#999"}})))),g("kerberosFile")?l.default.createElement("div",{style:{width:"100%",position:"relative"}},l.default.createElement(o.Icon,{type:"close",style:{cursor:"pointer",position:"absolute",right:0,top:10,zIndex:99,color:"#999"},onClick:function(){var e;b(((e={}).kerberosFile="",e))}}),l.default.createElement("i",{className:"iconfont2 iconOutlinedxianxing_Attachment",style:{position:"absolute",left:0,top:3,zIndex:99,color:"#999"}}),l.default.createElement(o.Input,{style:{border:0,paddingRight:20,background:"transparent",paddingLeft:20},autoComplete:"off",value:f.utf8to16(g("kerberosFile").name)+"   "+s.default(g("kerberosFile").modifyTime).format("YYYY-MM-DD HH:mm:ss")})):null)},ce=T.map((function(e,t){switch(e.widget){case"Input":return l.default.createElement(o.Form.Item,{label:e.label,key:t},S(""+e.name,m.getRules(e))(l.default.createElement(o.Input,{autoComplete:"off",placeholder:e.placeHold||"请输入"+e.label,disabled:e.disabled})),e.tooltip&&l.default.createElement(o.Tooltip,{title:e.tooltip},l.default.createElement(o.Icon,{className:"help-doc",type:"question-circle-o"})));case"InputWithCopy":return l.default.createElement(o.Form.Item,{label:e.label,key:t},S(""+e.name,m.getRules(e))(l.default.createElement(o.Input,{autoComplete:"off",placeholder:e.placeHold||"请输入"+e.label,disabled:e.disabled})),l.default.createElement(o.Icon,{className:"help-doc",type:"copy",onClick:function(){return ae(e)}}));case"Select":return console.log(e.initialValue,"select-initialValue"),l.default.createElement(o.Form.Item,{label:e.label,key:t},S(""+e.name,m.getRules(e))(l.default.createElement(o.Select,{placeholder:e.placeHold||"请输入"+e.label},(e.options||[]).map((function(e){return l.default.createElement(v,{key:e.key,value:e.value},e.label)})))));case"TextArea":return l.default.createElement(o.Form.Item,{label:e.label,key:t},S(""+e.name,m.getRules(e))(l.default.createElement(h,{rows:4,placeholder:e.placeHold||"请输入"+e.label})));case"TextAreaWithCopy":return l.default.createElement(o.Form.Item,{label:e.label,key:t},S(""+e.name,m.getRules(e))(l.default.createElement(h,{id:"copy",rows:4,placeholder:e.placeHold})),e.tooltip&&l.default.createElement(o.Tooltip,{title:_.hdfsConfig,className:"help-tooltip"},l.default.createElement(o.Icon,{type:"question-circle-o"})),l.default.createElement("div",{className:"help-module"},l.default.createElement("span",{onClick:function(){return ae(e)}},"点击复制模板")));case"RichText":return l.default.createElement(o.Form.Item,{label:e.label,key:t},S(""+e.name,m.getRules(e))(l.default.createElement("p",null,e.defaultValue)));case"Upload":return l.default.createElement(o.Form.Item,{label:e.label,key:t,className:"file-row"},S(""+e.name,m.getRules(e))(l.default.createElement("div",null,l.default.createElement(o.Switch,{onChange:function(e){O(e)}}),k&&l.default.createElement("div",{style:{display:"flex"}},l.default.createElement(o.Upload,null,l.default.createElement(o.Button,null,l.default.createElement(o.Icon,{type:"upload"})," 上传文件"),l.default.createElement("p",{style:{marginTop:8}},"上传单个文件，支持扩展格式：.zip")),l.default.createElement("div",{style:{marginLeft:-40}},l.default.createElement(o.Icon,{type:"question-circle"}))))));case"Password":return l.default.createElement(o.Form.Item,{label:e.label,key:t},S(""+e.name,m.getRules(e))(l.default.createElement(o.Input.Password,{visibilityToggle:!1,placeholder:e.placeHold||"请输入"+e.label})));case"Radio":return l.default.createElement(o.Form.Item,{label:e.label,key:t},S(""+e.name,m.getRules(e))(l.default.createElement(o.Radio.Group,null,l.default.createElement(o.Radio,{value:1},"默认"),l.default.createElement(o.Radio,{value:2},"自定义"))));case"Integer":return l.default.createElement(o.Form.Item,{label:e.label,key:t},S(""+e.name,m.getRules(e))(l.default.createElement(o.InputNumber,{autoComplete:"off",style:{width:"100%"}})));case"Switch":return l.default.createElement(o.Form.Item,{label:e.label,key:t},S(""+e.name,m.getRules(e))(l.default.createElement(o.Switch,null)));case"Kerberos":return l.default.createElement("div",{key:t},l.default.createElement(o.Form.Item,{label:e.label,key:t,className:"file-row"},S(""+e.name,{valuePropName:"checked",initialValue:(null==Y?void 0:Y.openKerberos)||!1})(l.default.createElement(o.Switch,null))),g("openKerberos")&&ie(),g("kerberosFile")&&g("openKerberos")&&l.default.createElement(o.Form.Item,{label:"Kerberos Principal",key:"principal"},S("principal",{rules:[{required:!0,message:"Kerberos Principal不可为空"}],initialValue:(null==Y?void 0:Y.principal)||V[0]||""})(l.default.createElement(o.Select,null,ue))));case"HbaseKerberos":return l.default.createElement("div",{key:t},l.default.createElement(o.Form.Item,{label:"开启Kerberos认证",key:t,className:"file-row"},S("openKerberos",{valuePropName:"checked",initialValue:(null==Y?void 0:Y.openKerberos)||!1})(l.default.createElement(o.Switch,null))),g("openKerberos")&&ie(),g("kerberosFile")&&g("openKerberos")&&l.default.createElement(l.default.Fragment,null,l.default.createElement(o.Form.Item,{label:"client.principal"},S("principal",{initialValue:(null==Y?void 0:Y.principal)||V[0]||"",rules:[{required:!0,message:"client.principal不能为空"}]})(l.default.createElement(o.Select,null,ue))),l.default.createElement(o.Form.Item,{label:"master.kerberos"},S("hbase_master_kerberos_principal",{initialValue:null==Y?void 0:Y.hbase_master_kerberos_principal,rules:[{required:!0,message:"master.kerberos不能为空"},{max:128,message:"master.kerberos不可超过128个字符"}]})(l.default.createElement(o.Input,{autoComplete:"off"}))),l.default.createElement(o.Form.Item,{label:"regioserver.kerberos"},S("hbase_regionserver_kerberos_principal",{initialValue:null==Y?void 0:Y.hbase_regionserver_kerberos_principal,rules:[{required:!0,message:"regioserver.kerberos不能为空"},{max:128,message:"regioserver.kerberos不可超过128个字符"}]})(l.default.createElement(o.Input,{autoComplete:"off"})))));case"FtpReact":return l.default.createElement("div",{key:t},l.default.createElement(o.Form.Item,{label:"协议",key:t,className:"top-unset"},S("protocol",{initialValue:(null==Y?void 0:Y.protocol)||"FTP",rules:[{required:!0,message:"协议不能为空"}]})(l.default.createElement(o.Radio.Group,null,l.default.createElement(o.Radio,{value:"FTP"},"FTP"),l.default.createElement(o.Radio,{value:"SFTP"},"SFTP")))),"FTP"===g("protocol")&&l.default.createElement(o.Form.Item,{label:"连接模式",className:"top-unset"},S("connectMode",{initialValue:(null==Y?void 0:Y.connectMode)||"PORT",rules:[{required:!0,message:"连接模式不能为空"}]})(l.default.createElement(o.Radio.Group,null,l.default.createElement(o.Radio,{value:"PORT"},"Port (主动)"),l.default.createElement(o.Radio,{value:"PASV"},"Pasv（被动）")))),"SFTP"===g("protocol")&&l.default.createElement(l.default.Fragment,null,l.default.createElement(o.Form.Item,{label:"认证方式",className:"top-unset"},S("auth",{initialValue:(null==Y?void 0:Y.auth)||1,rules:[{required:!0,message:"认证方式不能为空"}]})(l.default.createElement(o.Radio.Group,null,l.default.createElement(o.Radio,{value:1},"密码"),l.default.createElement(o.Radio,{value:2},"私钥")))),2===g("auth")&&l.default.createElement(o.Form.Item,{label:"私钥地址"},S("rsaPath",{initialValue:"~/.ssh/id_rsa",rules:[{required:!0,message:"私钥地址不能为空"}]})(l.default.createElement(o.Input,{autoComplete:"off"})),l.default.createElement(o.Tooltip,{title:"用户的私钥储存路径，默认为~/.ssh/id_rsa",arrowPointAtCenter:!0},l.default.createElement(o.Icon,{className:"help-doc",type:"question-circle-o"})))));case"CarbonReact":return l.default.createElement("div",{key:t},l.default.createElement(o.Form.Item,{label:"HDFS配置",key:t,className:"top-unset"},S("hdfsCustomConfig",{initialValue:(null==Y?void 0:Y.hdfsCustomConfig)||"default"})(l.default.createElement(o.Radio.Group,null,l.default.createElement(o.Radio,{value:"default"},"默认"),l.default.createElement(o.Radio,{value:"custom"},"custom")))),"custom"===g("hdfsCustomConfig")&&l.default.createElement(l.default.Fragment,null,l.default.createElement(o.Form.Item,{label:"defaultFS"},S("defaultFS",{initialValue:(null==Y?void 0:Y.defaultFS)||"",rules:[{required:!0,message:"defaultFS不能为空"}]})(l.default.createElement(o.Input,{placeholder:"hdfs://host:port",autoComplete:"off"}))),l.default.createElement(o.Form.Item,{label:"高可用配置"},S("hadoopConfig",{initialValue:(null==Y?void 0:Y.hadoopConfig)||""})(l.default.createElement(h,{id:"copy",rows:4,placeholder:p.HDFSCONG})),l.default.createElement(o.Tooltip,{title:_.hdfsConfig,className:"help-tooltip"},l.default.createElement(o.Icon,{type:"question-circle-o"})),l.default.createElement("span",{className:"help-module",style:{display:"inline"},onClick:function(){return ae({label:"高可用配置",placeHold:p.HDFSCONG})}},"点击复制模板"))));case"KafkaReact":return l.default.createElement("div",{key:t},l.default.createElement(o.Form.Item,{label:"连接方式",key:"kafkaType",className:"top-unset"},S("kafkaType",{initialValue:(null==Y?void 0:Y.kafkaType)||1,rules:[{required:!0,message:"模式不能为空"}]})(l.default.createElement(o.Radio.Group,null,l.default.createElement(o.Radio,{value:1},"集群地址"),l.default.createElement(o.Radio,{value:2},"Broker地址")))),1===g("kafkaType")&&l.default.createElement(o.Form.Item,{label:"集群地址",key:"address"},S("address",{initialValue:(null==Y?void 0:Y.address)||"",rules:[{required:!0,message:"集群地址不能为空"}]})(l.default.createElement(h,{rows:4,placeholder:"请填写Kafka对应的ZooKeeper集群地址，例如：IP1:Port,IP2：Port,IP3：Port/子目录"}))),2===g("kafkaType")&&l.default.createElement(o.Form.Item,{label:"broker地址",key:"brokerList"},S("brokerList",{initialValue:(null==Y?void 0:Y.brokerList)||"",rules:[{required:!0,message:"broker地址不能为空"}]})(l.default.createElement(h,{rows:4,placeholder:"Broker地址，例如IP1:Port,IP2:Port,IP3:Port/子目录"}))),l.default.createElement(o.Form.Item,{label:"认证方式",key:"authentication"},S("authentication",{initialValue:(null==Y?void 0:Y.authentication)||"无",rules:[{required:!0,message:"认证方式不能为空"}]})(l.default.createElement(o.Select,null,E.KAFKA_OPTION.map((function(e){return l.default.createElement(v,{key:e.key,value:e.key},e.name)}))))),"SASL_PLAINTEXT"===g("authentication")&&l.default.createElement(l.default.Fragment,null,l.default.createElement(o.Form.Item,{label:"用户名",key:"username"},S("username",{initialValue:null==Y?void 0:Y.username,rules:[{required:!0,message:"用户名不能为空"}]})(l.default.createElement(o.Input,{type:"text"}))),l.default.createElement(o.Form.Item,{label:"密码",key:"password"},S("password",{initialValue:null==Y?void 0:Y.password})(l.default.createElement(o.Input,{type:"password"})))),"kerberos"===g("authentication")&&l.default.createElement(l.default.Fragment,null,ie(),g("kerberosFile")&&l.default.createElement(o.Form.Item,{label:"Kerberos Principal",key:"principal"},S("principal",{rules:[{required:!0,message:"Kerberos Principal不可为空"}],initialValue:(null==Y?void 0:Y.principal)||V[0]||""})(l.default.createElement(o.Select,null,ue)))));case"RedisReact":return l.default.createElement("div",{key:t},l.default.createElement(o.Form.Item,{label:"模式",key:"redisType",className:"top-unset"},S("redisType",{initialValue:(null==Y?void 0:Y.redisType)||1,rules:[{required:!0,message:"模式不能为空"}]})(l.default.createElement(o.Radio.Group,null,l.default.createElement(o.Radio,{value:1},"单机"),l.default.createElement(o.Radio,{value:3},"集群"),l.default.createElement(o.Radio,{value:2},"哨兵")))),l.default.createElement(o.Form.Item,{label:"地址",key:"hostPort"},S("hostPort",{initialValue:(null==Y?void 0:Y.hostPort)||"",rules:[{required:!0,message:"地址不能为空"}]})(l.default.createElement(h,{rows:4,placeholder:1===g("redisType")?"Redis地址，例如：IP1:Port":"Redis地址，例如：IP1:Port，多个地址以英文逗号分开"}))),2===g("redisType")&&l.default.createElement(o.Form.Item,{label:"master名称",key:"masterName"},S("masterName",{initialValue:(null==Y?void 0:Y.masterName)||"",rules:[{required:!0,message:"master名称不能为空"}]})(l.default.createElement(o.Input,{placeholder:"请输入master名称",autoComplete:"off"}))),(1===g("redisType")||2===g("redisType"))&&l.default.createElement(o.Form.Item,{label:"数据库"},S("database",{initialValue:(null==Y?void 0:Y.database)||""})(l.default.createElement(o.Input,{autoComplete:"off"}))),l.default.createElement(o.Form.Item,{label:"密码"},S("password",{initialValue:(null==Y?void 0:Y.password)||""})(l.default.createElement(o.Input.Password,{visibilityToggle:!1}))));case"WebSocketSub":return l.default.createElement(o.Form.Item,{label:"鉴权参数",key:"webSocketParams",className:"label-height-18 "+(Object.keys(B).length?"label-height-32":"")},oe(),l.default.createElement("span",{className:"ws-add",onClick:re},l.default.createElement(o.Icon,{type:"plus-circle-o"}),l.default.createElement("span",null,"新增参数")))}}));return l.default.createElement("div",{className:"info-config"},l.default.createElement(o.Spin,{spinning:G},l.default.createElement(o.Form,r.__assign({},m.formItemLayout,{className:"info-config-form"}),l.default.createElement(o.Form.Item,{label:"数据源类型"},S("dataType",{initialValue:L.dataType+L.dataVersion,rules:[{required:!0,message:"数据源类型不能为空"}]})(l.default.createElement(o.Input,{disabled:!0}))),ce)))})))},WOlr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PROJECT_TYPE=t.DATA_SOURCE_TEXT=t.DATA_SOURCE=t.HDFSCONG=void 0,t.HDFSCONG='{\n  "dfs.nameservices": "defaultDfs", \n  "dfs.ha.namenodes.defaultDfs": "namenode1", \n  "dfs.namenode.rpc-address.defaultDfs.namenode1": "", \n  "dfs.client.failover.proxy.provider.defaultDfs": "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider" \n  }',t.DATA_SOURCE={MYSQL:1,ORACLE:2,SQLSERVER:3,POSTGRESQL:4,HDFS:6,HIVE:7,HBASE:8,FTP:9,MAXCOMPUTE:10,ES:11,ES6:33,ES7:46,REDIS:12,MONGODB:13,ADS:15,BEATS:16,KAFKA:26,KAFKA_2X:37,KAFKA_09:18,KAFKA_10:17,KAFKA_11:14,KAFKA_NEW:55,DB2:19,KUDU:24,POLAR_DB:28,IMPALA:29,EMQ:34,SQLSERVER2017:32,TIDB:31,CLICKHOUSE:25,KINGBASEES8:40,S3:41,WEBSOCKET:42,SOCKET:44,RESTFULAPI:47,Hive_1X:43,Hive_2X:45,HBase_1X:48,HBase_2X:49,CARBONDATA:50,GREENPLUM:51,GBASE_8A:52,KYLINURL:53,ELASTICSEARCH:54,PHOENIX:56,PRESTO:57,VERTICA:58,ADB_POSTGRESQL:59,SOLR:60,INFLUXDB:61,INCEPTOR:62,AWSS3:63,SPARKTHRIFT:64,GAUSSDB:65,OPENTSDB:66,DORIS:67,KYLINJDBC:68,SQLSERVERJDBC:69},t.DATA_SOURCE_TEXT={1:"MySQL",2:"Oracle",3:"SQLServer",4:"PostgreSQL",6:"HDFS",7:"Hive",8:"HBase",9:"FTP",10:"Maxcompute",11:"ElasticSearch5",12:"Redis",13:"MongoDB",15:"ADS",16:"BEATS",26:"Kafka1.x",37:"Kafka2.x",18:"Kafka0.9",17:"Kafka0.10",14:"Kafka0.11",55:"Kafka",19:"DB2",24:"Kudu",28:"PolarDB for MySQL8",29:"Impala",34:"EMQ",33:"ElasticSearch6",32:"SQLServer_2017_later",40:"KingbaseES8",41:"S3",42:"WebSocket",44:"Socket",43:"Hive1.x",45:"Hive2.x",48:"HBase1.x",49:"HBase2.x",50:"CarbonData",25:"ClickHouse",51:"Greenplum",31:"TiDB",52:"GBase_8a",53:"Kylin URL",54:"Elasticsearch",56:"Phoenix",57:"Presto",58:"Vertica",59:"ADB_PostgreSQL",60:"Solr",61:"InfluxDB",62:"Inceptor",63:"AWS S3",64:"SparkThrift",65:"GaussDB",66:"OpenTSDB",67:"Doris",68:"Kylin JDBC",69:"SQLServer JDBC"},t.PROJECT_TYPE={COMMON:0,TEST:1,PRO:2}},Z5Xq:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("fvjX"),l=a("L3Ur"),n=r.combineReducers({routing:l.routerReducer});t.default=n},ZA7E:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG"),l=r.__importStar(a("q1tI")),n=a("gdfu");t.default=function(e,t){var a=e.placeholder,o=void 0===a?"请求输入搜索内容":a,u=e.width,s=void 0===u?200:u,i=e.onSearch,c=e.className,d=r.__read(l.useState(""),2),f=d[0],m=d[1];return l.default.createElement(n.Input,{className:c,allowClear:!0,value:f,onChange:function(e){m(e.target.value),e.target.value||i(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&i(f)},"data-testid":"input",placeholder:o,suffix:l.default.createElement(n.Icon,{component:function(){return l.default.createElement("span",{className:"iconfont2 iconOutlinedxianxing_Search","data-testid":"search-icon"})},onClick:function(){i(f)},style:{cursor:"pointer",color:"#999"}}),style:{width:s}})}},aijj:function(e,t,a){"use strict";function r(e){for(var t=new Array("ä","å","æ","ç","è","é"),a=0;a<t.length;a++)if(e&&e.indexOf(t[a])>-1)return!1;return!0}Object.defineProperty(t,"__esModule",{value:!0}),t.utf8to16=t.utf16to8=void 0,t.utf16to8=function(e){if("string"!=typeof e)return e;if(!r(e))return e;var t,a,l,n;for(t="",l=e.length||0,a=0;a<l;a++)(n=e.charCodeAt(a))>=1&&n<=127?t+=e.charAt(a):n>2047?(t+=String.fromCharCode(224|n>>12&15),t+=String.fromCharCode(128|n>>6&63),t+=String.fromCharCode(128|n>>0&63)):(t+=String.fromCharCode(192|n>>6&31),t+=String.fromCharCode(128|n>>0&63));return t},t.utf8to16=function(e){if("string"!=typeof e)return e;if(r(e))return e;var t,a,l,n,o,u;for(t="",l=e.length,a=0;a<l;)switch((n=e.charCodeAt(a++))>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=e.charAt(a-1);break;case 12:case 13:o=e.charCodeAt(a++),t+=String.fromCharCode((31&n)<<6|63&o);break;case 14:o=e.charCodeAt(a++),u=e.charCodeAt(a++),t+=String.fromCharCode((15&n)<<12|(63&o)<<6|(63&u)<<0)}return t}},"g/Sg":function(e,t,a){"use strict";window.__POWERED_BY_QIANKUN__&&(a.p=window.__INJECTED_PUBLIC_PATH_BY_QIANKUN__)},ioVt:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KAFKA_OPTION=void 0,t.KAFKA_OPTION=[{key:"SASL_PLAINTEXT",name:"SASL_PLAINTEXT"},{key:"kerberos",name:"kerberos"},{key:"无",name:"无"}]},j3x2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG"),l=r.__importStar(a("q1tI")),n=a("dtw8"),o=a("gdfu"),u=a("CLrh"),s=a("Kd+S"),i=o.Select.Option;t.default=n.withRouter((function(){var e=this,t=r.__read(l.useState({dataType:"",haveVersion:!0,imgUrl:"",typeId:null}),2),a=t[0],n=t[1],c=r.__read(l.useState([]),2),d=c[0],f=c[1],m=r.__read(l.useState([]),2),p=m[0],_=m[1],E=r.__read(l.useState([]),2),h=E[0],v=E[1],S=r.__read(l.useState(""),2),y=S[0],g=S[1],b=function(t,a){return r.__awaiter(e,void 0,void 0,(function(){var e,l;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,u.API.queryProductList({dataType:t,dataVersion:a})];case 1:return e=r.sent(),l=e.data,e.success?(f(l),v(s.checks)):o.notification.error({message:"错误！",description:"获取产品授权列表失败"}),[2]}}))}))};return l.useEffect((function(){r.__awaiter(e,void 0,void 0,(function(){var e,t,a,l,i,c;return r.__generator(this,(function(r){switch(r.label){case 0:return e=s.getSaveStatus(),t=(null===(c=e.sqlType)||void 0===c?void 0:c.dataType)||"",[4,u.API.queryDsVersionByType({dataType:t})];case 1:return a=r.sent(),l=a.data,a.success?(_(l||[]),n(e.sqlType),l.length>0?(i=e.version||l[0].dataVersion,sessionStorage.setItem("version",i),g(i),b(t,i)):b(t,"")):o.notification.error({message:"错误！",description:"根据数据源类型获取版本列表失败！"}),[2]}}))}))}),[]),l.default.createElement("div",{className:"produce-auth"},l.default.createElement("div",{className:"text-show"},l.default.createElement("p",null,"将 ",l.default.createElement("span",{style:{color:"#3F87FF"}},a.dataType),"授权哪些产品使用："),p.length>0&&l.default.createElement("div",{className:"version-sel"},l.default.createElement("span",{className:"version"},l.default.createElement("b",{style:{color:"red",verticalAlign:"center"}},"*")," 版本："),l.default.createElement(o.Select,{showSearch:!0,style:{width:"80%"},placeholder:"请选择对应版本",optionFilterProp:"children",onChange:function(e){g(e),b(a.dataType,e),sessionStorage.setItem("version",e)},value:y},p.map((function(e){return l.default.createElement(i,{value:e.dataVersion,disabled:"Kafka"===a.dataType&&"0.9"===e.dataVersion,key:e.dataVersion},e.dataVersion)})))),l.default.createElement("div",{style:{display:"flex"}},l.default.createElement("span",{className:"version"},"授权产品："),l.default.createElement(o.Checkbox.Group,{onChange:function(e){v(e),s.saveCheckStauts(e)},value:h,style:{flex:1}},l.default.createElement(o.Row,null,d.length>0&&d.map((function(e,t){return l.default.createElement(o.Col,{span:8,key:e.appType},l.default.createElement(o.Checkbox,{value:e.appType,key:e.appType},e.appName))})))))))}))},k1mS:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG"),l=r.__importStar(a("q1tI")),n=a("gdfu"),o=a("CLrh");t.default=function(e){var t=this,a=e.record,u=e.oncheck,s=r.__read(l.useState([]),2),i=s[0],c=s[1],d=r.__read(l.useState([]),2),f=d[0],m=d[1];return l.useEffect((function(){r.__awaiter(t,void 0,void 0,(function(){var e,t;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,o.API.authProductList({dataInfoId:a.dataInfoId})];case 1:return e=r.sent(),t=e.data,e.success?t.length>0&&(t.forEach((function(e){if(1===e.isAuth||1===e.isImport){var t=f;t.push(e.appType),m(t),u(t)}})),c(t)):n.message.error("获取产品授权列表失败！"),[2]}}))}))}),[]),l.default.createElement("div",null,l.default.createElement("p",{className:"auth-header"},"点击进行授权/取消，若已在产品中应用，不能取消授权"),l.default.createElement(n.Checkbox.Group,{style:{width:"100%"},onChange:function(e){u(e),m(e)},value:f},l.default.createElement(n.Row,{style:{padding:"22px 44px 0 44px"}},i.length>0&&i.map((function(e,t){return l.default.createElement(n.Col,{key:t,span:8,onClick:function(){1===e.isImport&&n.message.error("已在产品中应用，不能取消授权。")},style:{marginBottom:24}},l.default.createElement(n.Checkbox,{value:e.appType,disabled:1===e.isImport},e.appName))})))))}},nWVm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formNewLayout=t.formItemLayout=t.getRules=void 0;var r=a("aijj");t.getRules=function(e){var t,a=[{required:1===e.required,message:e.label+"不能为空"}];try{var l=JSON.parse(null==e?void 0:e.validInfo);Object.keys(l).includes("length")&&a.push(null==l?void 0:l.length),Object.keys(l).includes("regex")&&a.push({pattern:e.regex?RegExp(e.regex.substring(1,e.regex.length-1)):null,message:null===(t=null==l?void 0:l.regex)||void 0===t?void 0:t.message})}catch(e){}return"JDBC URL"===e.label&&a.push({pattern:/^[\S]+$/,message:"JDBC URL不能包含空格"}),"数据源名称"===e.label&&a.push({pattern:/^[\u4e00-\u9fa50-9A-Za-z_]+$/,message:"仅支持中文、数字、英文大小写、下划线"}),{initialValue:r.utf8to16(e.initialValue),rules:a,validateFirst:!0}},t.formItemLayout={labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:10}}},t.formNewLayout={labelCol:{span:10},wrapperCol:{span:10,offset:8}}},pGkl:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG"),l=r.__importStar(a("q1tI")),n=r.__importDefault(a("TYzk")),o=a("gdfu"),u=r.__importDefault(a("WLtI"));a("DoNf");var s=o.Steps.Step;t.default=function(e){var t=l.useRef(null),a=r.__read(l.useState(!1),2),i=a[0],c=a[1],d=e.location.state.record;return l.default.createElement("div",{className:"source"},l.default.createElement(n.default,{name:"编辑"}),l.default.createElement("div",{className:"content"},l.default.createElement("div",{className:"top-steps edit-steps"},l.default.createElement(o.Steps,{current:2},l.default.createElement(s,{title:"选择数据源",disabled:!0}),l.default.createElement(s,{title:"产品授权",disabled:!0}),l.default.createElement(s,{title:"信息配置"}))),l.default.createElement("div",{className:"step-info"},l.default.createElement(u.default,{cRef:t,record:d,changeBtnStatus:function(){c(!1)}})),l.default.createElement("div",{className:"footer-select"},l.default.createElement(o.Button,{type:"primary",onClick:function(){t.current.testForm()},style:{width:108}},"测试连通性"),l.default.createElement(o.Button,{style:{marginLeft:60,marginRight:8,width:80},disabled:!0},"上一步"),l.default.createElement(o.Button,{type:"primary",onClick:function(){c(!0),t.current.submitForm()},disabled:i,style:{width:80}},"确定"))))}},pLYI:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.unmount=t.mount=t.bootstrap=void 0;var r=a("mrSG");a("g/Sg");var l=r.__importDefault(a("q1tI")),n=r.__importDefault(a("i8i4")),o=a("OHD6"),u=r.__importDefault(a("vNIf"));a("Q2G3");var s=function(e){var t=a("Z5Xq").default,r=o.getStore(t,"hash"),s=r.store,i=r.history;n.default.render(l.default.createElement(u.default,{store:s,history:i}),e.container?e.container.querySelector("#app"):document.getElementById("app"))};window.__POWERED_BY_QIANKUN__||s({}),t.bootstrap=function(){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(e){return console.log("data-source app bootstraped"),[2]}))}))},t.mount=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return console.log("data-source app mount"),s(e),[2]}))}))},t.unmount=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return n.default.unmountComponentAtNode(e.container?e.container.querySelector("#app"):document.getElementById("app")),[2]}))}))},t.update=function(e){return r.__awaiter(this,void 0,void 0,(function(){return r.__generator(this,(function(t){return console.log("data-source update props",e),[2]}))}))}},vNIf:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG"),l=r.__importStar(a("q1tI")),n=a("dtw8"),o=a("/MKj"),u=a("LuB0"),s=r.__importDefault(a("+Gva")),i=a("gdfu");a("m2I1"),a("TVWj");var c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.render=function(){var e=this.props,t=e.store,a=e.history;return l.default.createElement(i.ConfigProvider,{locale:s.default,autoInsertSpaceInButton:!1,getPopupContainer:function(){return document.body.querySelector('div[id="app"]')}},l.default.createElement(o.Provider,{store:t},l.default.createElement(n.Router,{routes:u.getRoutes(),history:a})))},t}(l.Component);t.default=c},woEQ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mrSG"),l=r.__importStar(a("q1tI")),n=a("dtw8"),o=r.__importDefault(a("aqBw")),u=r.__importDefault(a("9/V2")),s=a("gdfu"),i=a("7EOV"),c=a("CLrh"),d=r.__importDefault(a("k1mS")),f=a("Kd+S");a("+K5h");var m=a("WOlr");t.default=n.withRouter((function(e){var t=this,a=r.__read(l.useState([]),2),n=a[0],p=a[1],_=r.__read(l.useState({currentPage:1,pageSize:20}),2),E=_[0],h=_[1],v=r.__read(l.useState({search:"",dataTypeList:[],appTypeList:[],isMeta:0,status:[]}),2),S=v[0],y=v[1],g=l.useRef(null),b=r.__read(l.useState(null),2),A=b[0],T=b[1],I=r.__read(l.useState(!1),2),C=I[0],k=I[1],O=r.__read(l.useState({dataInfoId:null,isAuth:null}),2),D=O[0],R=O[1],P=r.__read(l.useState([]),2),w=P[0],N=P[1],F=function(e){return r.__awaiter(t,void 0,void 0,(function(){var t,a,l,n,u,i,d;return r.__generator(this,(function(f){switch(f.label){case 0:return[4,c.API.dataSourcepage(r.__assign(r.__assign(r.__assign({},E),S),e))];case 1:return t=f.sent(),a=t.data,l=t.success,n=t.message,l?(u=a.currentPage,i=a.pageSize,d=a.totalCount,h({currentPage:u,pageSize:i}),a.data&&a.data.forEach((function(e){Object.keys(m.DATA_SOURCE_TEXT).forEach((function(t){e.dataType===m.DATA_SOURCE_TEXT[t]&&(e.type=Number(t))})),e.linkJson&&-1===e.linkJson.indexOf("{")&&-1===e.linkJson.indexOf("}")&&(e.linkJson=o.default.decode(e.linkJson))})),T(d),p(a.data||[])):s.notification.error({message:"错误！",description:n}),[2]}}))}))};l.useEffect((function(){F(),f.remove()}),[]);var U=function(e,t){var a=r.__assign(r.__assign(r.__assign({},E),{currentPage:e}),{pageSize:t});h(a),F(a)},L=l.useMemo((function(){return null===g.current?0:parseInt(getComputedStyle(g.current).height)}),[g.current]);return l.default.createElement("div",{className:"source"},l.default.createElement(u.default,{onSearch:function(e){var t=r.__assign(r.__assign(r.__assign({},S),e),{currentPage:1});y(t),F(t)}}),l.default.createElement("div",{className:"bottom"},l.default.createElement("div",{className:"conent-table",ref:g},l.default.createElement(s.Table,{size:"middle",rowKey:function(e){return e.dataInfoId},columns:i.columns({toEdit:function(t){1===t.isMeta?s.message.error("带meta标识的数据源不能编辑、删除"):e.router.push({pathname:"/data-source/edit",state:{record:t}})},toAuth:function(e){R(e),k(!0)},toDelete:function(e){return r.__awaiter(t,void 0,void 0,(function(){var t,a,l;return r.__generator(this,(function(r){switch(r.label){case 0:return[4,c.API.dataSourceDelete({dataInfoId:e.dataInfoId})];case 1:return t=r.sent(),a=t.success,l=t.message,a?(s.message.success("删除成功"),F()):s.message.error(""+l),[2]}}))}))},left:"left",right:"right",filters:[{text:"正常",value:1},{text:"连接失败",value:0}]}),dataSource:n,pagination:!1,scroll:{x:"100%",y:L},onChange:function(e,t,a){var l=r.__assign(r.__assign({},S),{status:t.status});y(l),F(l)}})),l.default.createElement("div",{className:"page-com"},l.default.createElement(s.Pagination,{size:"small",total:A,showTotal:function(){return l.default.createElement("span",null,"共 ",l.default.createElement("i",{style:{color:"#3F87FF"}},A)," 条数据，每页显示",E.pageSize,"条")},onChange:U,defaultPageSize:E.pageSize,current:E.currentPage,showSizeChanger:!0,pageSizeOptions:["20","50","100"],onShowSizeChange:U}))),C&&l.default.createElement(s.Modal,{className:"datasource-modal",closeIcon:l.default.createElement("span",{style:{fontSize:20},className:"iconfont2 iconOutlinedxianxing_Close-1"}),title:"授权",visible:C,onOk:function(){return r.__awaiter(t,void 0,void 0,(function(){return r.__generator(this,(function(e){switch(e.label){case 0:return[4,c.API.dataSoProAuth({dataInfoId:D.dataInfoId,isAuth:1,appTypes:w})];case 1:return e.sent().success?(s.message.success("操作成功"),F()):s.message.error("操作失败"),k(!1),[2]}}))}))},onCancel:function(){k(!1)}},l.default.createElement(d.default,{record:D,oncheck:function(e){N(e)}})))}))}})}));