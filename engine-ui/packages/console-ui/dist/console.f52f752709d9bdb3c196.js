(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{"/AHB":function(e,t,a){"use strict";a.r(t);var n=a("fvjX"),r=a("L3Ur"),s=a("Aqym"),o=a("LvDl"),i={userList:[]},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case s.a.SET_USER_LIST:var a=t.data,n=Object(o.cloneDeep)(e);return n.userList=a,n;default:return e}},c=l,u=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"defaultState","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/reducers/modules/consoleUser.js"),__REACT_HOT_LOADER__.register(l,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/reducers/modules/consoleUser.js")),a("6EK8")),p=a("+JEa"),d=Object(n.c)({routing:r.routerReducer,user:u.a,apps:p.b,app:p.a,consoleUser:c}),_=d;t.default=_,"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(d,"rootReducer","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/reducers/index.js"),__REACT_HOT_LOADER__.register(_,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/reducers/index.js"))},"1ZXz":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.createLogger=t.defaults=void 0;var n,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},s=a("MetC"),o=a("K17/"),i=a("BTjJ"),l=(n=i)&&n.__esModule?n:{default:n};function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r({},l.default,e),a=t.logger,n=t.stateTransformer,i=t.errorTransformer,c=t.predicate,u=t.logErrors,p=t.diffPredicate;if(void 0===a)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return function(){return function(e){return function(t){return e(t)}}};var d=[];return function(e){var a=e.getState;return function(e){return function(l){if("function"==typeof c&&!c(a,l))return e(l);var _={};d.push(_),_.started=o.timer.now(),_.startedTime=new Date,_.prevState=n(a()),_.action=l;var f=void 0;if(u)try{f=e(l)}catch(e){_.error=i(e)}else f=e(l);_.took=o.timer.now()-_.started,_.nextState=n(a());var m=t.diff&&"function"==typeof p?p(a,l):t.diff;if((0,s.printBuffer)(d,r({},t,{diff:m})),d.length=0,_.error)throw _.error;return f}}}}var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,a=e.getState;if("function"==typeof t||"function"==typeof a)return c()({dispatch:t,getState:a})};t.defaults=l.default,t.createLogger=c,t.logger=u,t.default=u},"2NsA":function(e,t,a){"use strict";a.d(t,"a",function(){return p});var n=a("dtw8"),r=a("1ZXz"),s=a("TdMD"),o=a.n(s),i=a("fvjX"),l=a("L3Ur");function c(e){return Object(i.e)(e,Object(i.d)(Object(i.a)(o.a,Object(r.createLogger)()),window.devToolsExtension?window.devToolsExtension():function(e){return e}))}function u(e){return Object(i.e)(e,Object(i.a)(o.a))}function p(e,t){var a=u(e),r=t&&"hash"===t?n.g:n.f;return{store:a,history:Object(l.syncHistoryWithStore)(r,a)}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(c,"configureStoreDev","/Users/ziv/Development/Workspace/data-stack/src/utils/reduxUtils.js"),__REACT_HOT_LOADER__.register(u,"configureStoreProd","/Users/ziv/Development/Workspace/data-stack/src/utils/reduxUtils.js"),__REACT_HOT_LOADER__.register(p,"getStore","/Users/ziv/Development/Workspace/data-stack/src/utils/reduxUtils.js"))},"3J6H":function(e,t,a){},"6EK8":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("QbLZ"),r=a.n(n),s=(a("LvDl"),a("CMun")),o={id:0,dtuicUserId:0,userName:"未登录",isRoot:!1};function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case s.a.GET_USER:return t.data;case s.a.UPDATE_USER:return null!==t.data?r()({},e,t.data):e;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(o,"initalUser","/Users/ziv/Development/Workspace/data-stack/src/webapps/main/reducers/modules/user.js"),__REACT_HOT_LOADER__.register(i,"user","/Users/ziv/Development/Workspace/data-stack/src/webapps/main/reducers/modules/user.js"))},"95Qq":function(e,t,a){},Aqym:function(e,t,a){"use strict";var n=a("zbcj"),r=a.n(n)()(["SET_USER_LIST"],{prefix:"console/"}),s=r;t.a=s;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"userActions","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/consoleActions.js"),__REACT_HOT_LOADER__.register(s,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/consoleActions.js"))},BTjJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},e.exports=t.default},EMQV:function(e,t,a){},FdzR:function(e,t,a){},"K17/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.repeat=function(e,t){return new Array(t+1).join(e)},r=t.pad=function(e,t){return n("0",t-e.toString().length)+e};t.formatTime=function(e){return r(e.getHours(),2)+":"+r(e.getMinutes(),2)+":"+r(e.getSeconds(),2)+"."+r(e.getMilliseconds(),3)},t.timer="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date},MetC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.printBuffer=function(e,t){var a=t.logger,n=t.actionTransformer,r=t.titleFormatter,o=void 0===r?function(e){var t=e.timestamp,a=e.duration;return function(e,n,r){var s=["action"];return s.push("%c"+String(e.type)),t&&s.push("%c@ "+n),a&&s.push("%c(in "+r.toFixed(2)+" ms)"),s.join(" ")}}(t):r,c=t.collapsed,u=t.colors,p=t.level,d=t.diff,_=void 0===t.titleFormatter;e.forEach(function(r,f){var m=r.started,v=r.startedTime,h=r.action,E=r.prevState,g=r.error,k=r.took,T=r.nextState,y=e[f+1];y&&(T=y.prevState,k=y.started-m);var b=n(h),A="function"==typeof c?c(function(){return T},h,r):c,C=(0,s.formatTime)(v),D=u.title?"color: "+u.title(b)+";":"",O=["color: gray; font-weight: lighter;"];O.push(D),t.timestamp&&O.push("color: gray; font-weight: lighter;"),t.duration&&O.push("color: gray; font-weight: lighter;");var R=o(b,C,k);try{A?u.title&&_?a.groupCollapsed.apply(a,["%c "+R].concat(O)):a.groupCollapsed(R):u.title&&_?a.group.apply(a,["%c "+R].concat(O)):a.group(R)}catch(e){a.log(R)}var S=l(p,b,[E],"prevState"),x=l(p,b,[b],"action"),L=l(p,b,[g,E],"error"),U=l(p,b,[T],"nextState");S&&(u.prevState?a[S]("%c prev state","color: "+u.prevState(E)+"; font-weight: bold",E):a[S]("prev state",E)),x&&(u.action?a[x]("%c action    ","color: "+u.action(b)+"; font-weight: bold",b):a[x]("action    ",b)),g&&L&&(u.error?a[L]("%c error     ","color: "+u.error(g,E)+"; font-weight: bold;",g):a[L]("error     ",g)),U&&(u.nextState?a[U]("%c next state","color: "+u.nextState(T)+"; font-weight: bold",T):a[U]("next state",T)),d&&(0,i.default)(E,T,a,A);try{a.groupEnd()}catch(e){a.log("—— log end ——")}})};var r,s=a("K17/"),o=a("Zv7G"),i=(r=o)&&r.__esModule?r:{default:r};function l(e,t,a,r){switch(void 0===e?"undefined":n(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(a)):e[r];case"function":return e(t);default:return e}}},TmhF:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a("udPp");function r(e){return{type:n.a.UPDATE_APP,data:e}}"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(r,"updateApp","/Users/ziv/Development/Workspace/data-stack/src/webapps/main/actions/app.js")},XoD3:function(e,t,a){},YHBf:function(e,t,a){"use strict";a.r(t);var n,r=a("sbe7"),s=a.n(r),o=a("i8i4"),i=a.n(o),l=a("0cfB"),c=a("2NsA"),u=a("Yz+Y"),p=a.n(u),d=a("iCc5"),_=a.n(d),f=a("V7oC"),m=a.n(f),v=a("FYw3"),h=a.n(v),E=a("mRg0"),g=a.n(E),k=a("dtw8"),T=a("/MKj"),y=(a("3J6H"),a("EMQV"),a("FdzR"),a("95Qq"),a("XoD3"),a("f7r7"),a("5012"),a("s9ml"),a("XLg0")),b=a("2BCK"),A=a("vFRS"),C=a("NX2S"),D=a("UopC"),O=a("X9CO"),R=a("dVc0"),S=a("2Ul7"),x=a("AVFO"),L=a("17x9"),U=a.n(L),w=a("7Qib"),j=a("QbLZ"),H=a.n(j),P=a("pLPX"),N=Object(T.b)(function(e){return{user:e.user,apps:e.apps,routing:e.routing,common:e.common,app:e.app}})(n=function(e){function t(e){_()(this,t);var a=h()(this,(t.__proto__||p()(t)).call(this,e));return a.state={},a}return g()(t,e),m()(t,[{key:"render",value:function(){var e=this.props,t=(e.user,e.apps,"/console.html#/console"),a=[{id:"resourceManage",name:"资源管理",link:t+"/resourceManage",enable:!0},{id:"clusterManage",name:"多集群管理",link:t+"/clusterManage",enable:!0}],n=s.a.createElement("span",null,s.a.createElement("img",{style:{height:"20px",width:"20px",marginTop:"13px"},alt:"logo",src:"/public/console/img/logo.svg"}),s.a.createElement("span",{style:{fontSize:"14px",color:"#ffffff",position:"absolute",left:"80px",top:0}},"DTinsight.Console"));return s.a.createElement(P.c,H()({logoWidth:"170px",logo:n,menuItems:a},this.props))}}]),t}(r.Component))||n,M=N,z=M,I=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(N,"Header","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/layout/header.js"),__REACT_HOT_LOADER__.register(M,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/layout/header.js")),a("4d7F")),W=a.n(I),F=(a("pjuD"),a("rR1Q")),G=a.n(F),B=a("gDS+"),q=a.n(B),V=(a("bZMm"),a("wFDc")),Y=(a("tL+A"),a("QpBz")),Q=a.n(Y),Z=a("OZjc");function X(e){switch(e.status){case 402:case 200:return e;case 302:Q.a.info("登录超时, 请重新登录！");case 500:Q.a.error("服务器出现了点问题");default:return e}}function J(e){switch(e.code){case 1:return e;case 0:return ce.openLogin(),W.a.reject(e);case 3:return G.a.error({message:"权限通知",description:e.message}),W.a.reject(e);case 16:hashHistory.push("/");default:return e.message&&Q.a.error(e.message,3),e}}function K(){var e=w.a.getCookie("project_id");e&&"undefined"!==e||w.a.deleteCookie("project_id")}function $(){return Z.a.get("session")}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(X,"authBeforeFormate","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/interceptor.js"),__REACT_HOT_LOADER__.register(J,"authAfterFormated","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/interceptor.js"),__REACT_HOT_LOADER__.register(K,"isSelectedProject","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/interceptor.js"),__REACT_HOT_LOADER__.register($,"isLogin","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/interceptor.js"));var ee=function(){function e(){_()(this,e)}return m()(e,[{key:"get",value:function(e,t){var a=t?this.build(e,t):e;return this.request(a,{method:"GET"})}},{key:"post",value:function(e,t){var a={method:"POST"};return t&&(a.body=q()(t)),this.request(e,a)}},{key:"postAsFormData",value:function(e,t){var a={method:"POST"};return t&&(a.body=this.buildFormData(t)),this.request(e,a)}},{key:"postForm",value:function(e,t){var a={method:"POST"};return t&&(a.body=new FormData(t)),this.request(e,a)}},{key:"request",value:function(e,t){return V.a.show(),t.credentials="same-origin",fetch(e,t).then(X).then(function(e){return setTimeout(function(){V.a.hide()},300),e.json()}).then(J).catch(function(e){return V.a.hide(),G.a.error({message:"请求异常",description:"服务器可能出了点问题, 请稍后再试！"}),new W.a.reject(e)})}},{key:"defaultHeader",value:function(){return{Accept:"*/*","Content-Type":"application/json"}}},{key:"build",value:function(e,t){var a=[];if(t)for(var n in t)n&&a.push(n+"="+encodeURIComponent(t[n]));return e+"?"+a.join("&")}},{key:"buildFormData",value:function(e){if(e){var t=new FormData;for(var a in e)a&&t.append(a,e[a]);return t}}}]),e}(),te=new ee,ae=te,ne=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ee,"Http","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/api/http.js"),__REACT_HOT_LOADER__.register(te,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/api/http.js")),a("PVY6")),re={DA_GET_USER_BY_ID:ne.b+"/user/getUserById",DA_GET_USER_AUTH_BY_ID:ne.b+"/user/getUserById",GET_USER_LIST:ne.b+"/tenant/listTenant",GET_RESOURCE_USER_LIST:ne.b+"/tenant/listByQueueId",BIND_USER_TO_RESOURCE:ne.b+"/tenant/addToQueue",GET_RESOURCE_LIST:ne.b+"/cluster/pageQueue",GET_CLUSTER_LIST:ne.b+"/cluster/pageQuery",UPDATE_CLUSTER:ne.a+"/upload/cluster/update",NEW_CLUSTER:ne.a+"/upload/cluster/add",TEST_CLUSTER_CONNECT:ne.b+"/cluster/testConnect",UPLOAD_CLUSTER_RESOURCE:ne.a+"/upload/cluster/config",GET_CLUSTER:ne.b+"/cluster/getOne"},se=re,oe=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(re,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/reqUrls.js"),APP_CONF.UIC_URL||""),ie=APP_CONF.UIC_DOMAIN||"",le={logout:function(){var e=this;ae.post(se.APP_LOGOUT).then(function(t){1===t.code&&e.openLogin()})},openLogin:function(){Z.a.clear(),w.a.deleteCookie("dt_user_id",ie,"/"),w.a.deleteCookie("dt_token",ie,"/"),w.a.deleteCookie("dt_tenant_id",ie,"/"),w.a.deleteCookie("dt_tenant_name",ie,"/"),w.a.deleteCookie("dt_username",ie,"/"),w.a.deleteCookie("dt_is_tenant_admin",ie,"/"),w.a.deleteCookie("dt_is_tenant_creator",ie,"/"),w.a.deleteCookie("project_id",ie,"/"),window.location.href=oe+"/#/login"},getLoginedUser:function(){return ae.post(se.DA_GET_USER_BY_ID)},getUserList:function(){return ae.post(se.DATA_API_GET_USER_LIST)}},ce=le,ue=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(oe,"UIC_URL_TARGET","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/api/user.js"),__REACT_HOT_LOADER__.register(ie,"UIC_DOMAIN_URL","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/api/user.js"),__REACT_HOT_LOADER__.register(le,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/api/user.js")),a("zbcj")),pe=a.n(ue)()(["GET_USER","UPDATE_USER","GET_NOT_PROJECT_USERS","GET_PROJECT_USERS","GET_USER_LIST"],{prefix:"user/"}),de=pe,_e=de;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(pe,"userActions","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/userActions.js"),__REACT_HOT_LOADER__.register(de,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/userActions.js"));function fe(){return function(e){ce.getLoginedUser().then(function(t){if(1===t.code)return e({type:_e.GET_USER,data:t.data})})}}function me(e){return{type:_e.UPDATE_USER,data:e}}function ve(e){return function(t){ce.getUserList(e).then(function(e){1===e.code&&t({type:_e.GET_USER_LIST,data:e.data})})}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(fe,"getUser","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/actions/user.js"),__REACT_HOT_LOADER__.register(me,"updateUser","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/actions/user.js"),__REACT_HOT_LOADER__.register(ve,"getUserList","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/actions/user.js"));var he,Ee=a("TmhF"),ge={children:U.a.node},ke={children:[]},Te=function(e){return{common:e.common}},ye=Object(T.b)(Te)(he=function(e){function t(){return _()(this,t),h()(this,(t.__proto__||p()(t)).apply(this,arguments))}return g()(t,e),m()(t,[{key:"componentWillMount",value:function(){this.props.dispatch}},{key:"componentDidMount",value:function(){(0,this.props.dispatch)(Object(Ee.a)(ne.h))}},{key:"render",value:function(){var e=this.props.children,t=s.a.createElement(z,null);return s.a.createElement("div",{className:"main"},t,s.a.createElement("div",{className:"container overflow-x-hidden"},e||"加载中...."))}}]),t}(r.Component))||he;ye.propTypes=ge,ye.defaultProps=ke;var be=ye,Ae=be,Ce=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ge,"propType","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/index.js"),__REACT_HOT_LOADER__.register(ke,"defaultPro","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/index.js"),__REACT_HOT_LOADER__.register(Te,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/index.js"),__REACT_HOT_LOADER__.register(ye,"Main","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/index.js"),__REACT_HOT_LOADER__.register(be,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/index.js")),a("zmYW"),a("DtFj")),De=a.n(Ce),Oe=(a("mN36"),a("N9UN")),Re=a.n(Oe),Se=(a("ek7I"),a("FAat")),xe=a.n(Se),Le=a("wd/R"),Ue=a.n(Le),we={getResourceList:function(e){return ae.post(se.GET_RESOURCE_LIST,e)},getClusterList:function(e){return ae.post(se.GET_CLUSTER_LIST,e)},uploadClusterResource:function(e){return ae.postAsFormData(se.UPLOAD_CLUSTER_RESOURCE,e)},getTenantList:function(e){return ae.post(se.GET_USER_LIST,e)},testCluster:function(e){return ae.post(se.TEST_CLUSTER_CONNECT,e)},createCluster:function(e){return ae.postAsFormData(se.NEW_CLUSTER,e)},bindUserToQuere:function(e){return ae.post(se.BIND_USER_TO_RESOURCE,e)},getClusterInfo:function(e){return ae.post(se.GET_CLUSTER,e)},updateCluster:function(e){return ae.postAsFormData(se.UPDATE_CLUSTER,e)}},je=we,He=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(we,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/api/console.js"),a("fwXI"),a("CC+v")),Pe=a.n(He),Ne=a("GQeE"),Me=a.n(Ne),ze=a("oF3Q"),Ie=a.n(ze),We=a("YEIV"),Fe=a.n(We),Ge=a("LvDl"),Be=a("Aqym");function qe(){return function(e){je.getTenantList({pageSize:9999,currentPage:1}).then(function(t){if(1===t.code)return e({type:Be.a.SET_USER_LIST,data:t.data.data})})}}"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(qe,"getUser","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/actions/console.js");var Ve,Ye=xe.a.Option;function Qe(e){return{consoleUser:e.consoleUser}}function Ze(e){return{getTenantList:function(){e(qe())}}}var Xe,Je=Object(T.b)(Qe,Ze)(Ve=function(e){function t(){var e,a,n,r;_()(this,t);for(var s=arguments.length,o=Array(s),i=0;i<s;i++)o[i]=arguments[i];return a=n=h()(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o))),n.state={loading:!1,selectUserMap:{},selectUser:"",selectHack:!1},r=a,h()(n,r)}return g()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e=this.props.resource;this.setState({selectUserMap:this.exchangeSelectMap(e.tenants)})}},{key:"componentWillReceiveProps",value:function(e){var t=e.resource,a=e.visible,n=this.props;n.resource;n.visible!=a&&a&&(this.setState({selectUserMap:this.exchangeSelectMap(t.tenants),loading:!1}),this.resetValueByHack(),this.props.getTenantList())}},{key:"exchangeSelectMap",value:function(){var e={};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(t){e[t.tenantId]={tenantName:t.tenantName}}),e}},{key:"changeUserValue",value:function(e){this.setState({selectUser:e})}},{key:"selectUser",value:function(e,t){var a=this.state.selectUserMap;this.setState({selectUser:"",selectUserMap:H()({},a,Fe()({},t.props.tenantid,{tenantName:t.props.children}))})}},{key:"removeUser",value:function(e){var t=this.state.selectUserMap;delete(t=Object(Ge.cloneDeep)(t))[e],this.setState({selectUserMap:t})}},{key:"getUserOptions",value:function(){var e=[],t=this.state.selectUserMap,a=this.props,n=a.consoleUser,r=a.resource,o=n.userList,i=r.tenants||[];o=Object(Ge.uniq)(o.concat(i),"tenantId");for(var l=0;l<o.length;l++){var c=o[l];t[c.tenantId]||e.push(s.a.createElement(Ye,{tenantid:c.tenantId,value:c.tenantName},c.tenantName))}return e}},{key:"initColumns",value:function(){return[{title:"租户名称",dataIndex:"name"}]}},{key:"getTableDataSource",value:function(){var e=this.state.selectUserMap;return Ie()(e).map(function(e){return{id:e[0],name:e[1].tenantName}})}},{key:"getTenantsList",value:function(){var e=this.state.selectUserMap;return Me()(e)}},{key:"changeResource",value:function(){var e=this;this.setState({loading:!0});var t=this.props.resource;je.bindUserToQuere({queueId:t.queueId,tenants:this.getTenantsList()}).then(function(t){e.setState({loading:!1}),1==t.code&&(Q.a.success("修改成功"),e.props.resourceUserChange())})}},{key:"onCancel",value:function(){this.props.onCancel()}},{key:"resetValueByHack",value:function(){var e=this;this.setState({selectHack:!0},function(){e.setState({selectHack:!1,selectUser:""})})}},{key:"render",value:function(){var e=this.state,t=e.selectUser,a=e.loading,n=e.selectHack,r=this.props,o=r.visible,i=r.resource,l=this.initColumns(),c=i.queueName;return s.a.createElement("div",{className:"contentBox"},s.a.createElement(Pe.a,{title:"修改",visible:o,onCancel:this.onCancel.bind(this),onOk:this.changeResource.bind(this),confirmLoading:a,maskClosable:!1,className:"m-card"},s.a.createElement("div",{className:"line-formItem"},"资源队列：",c),s.a.createElement("div",{className:"line-formItem"},"绑定租户：",!n&&s.a.createElement(xe.a,{mode:"combobox",style:{width:"150px"},placeholder:"请选择租户",onSelect:this.selectUser.bind(this),onSearch:this.changeUserValue.bind(this),value:t},this.getUserOptions())),s.a.createElement(De.a,{className:"m-table",style:{margin:"0 auto",marginTop:"20px",width:"300px"},columns:l,pagination:!1,dataSource:this.getTableDataSource(),scroll:{y:300}})))}}]),t}(s.a.Component))||Ve,Ke=Je,$e=Ke,et=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ye,"Option","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/components/changeResource/index.js"),__REACT_HOT_LOADER__.register(Qe,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/components/changeResource/index.js"),__REACT_HOT_LOADER__.register(Ze,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/components/changeResource/index.js"),__REACT_HOT_LOADER__.register(Je,"ChangeResourceModal","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/components/changeResource/index.js"),__REACT_HOT_LOADER__.register(Ke,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/components/changeResource/index.js")),xe.a.Option),tt=function(e){function t(){var e,a,n,r;_()(this,t);for(var s=arguments.length,o=Array(s),i=0;i<s;i++)o[i]=arguments[i];return a=n=h()(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o))),n.state={resource:{},dataSource:[],table:{pageIndex:1,total:0,loading:!0},changeModalVisible:!1},r=a,h()(n,r)}return g()(t,e),m()(t,[{key:"componentDidMount",value:function(){this.getResourceList()}},{key:"getResourceList",value:function(){var e=this,t=this.state.table,a=t.pageIndex;je.getResourceList({currentPage:a,pageSize:10}).then(function(a){1==a.code?e.setState({dataSource:e.exchangeDataSource(a.data.data),table:H()({},t,{loading:!1,total:a.data.totalCount})}):e.setState({table:H()({},t,{loading:!1})})})}},{key:"getPagination",value:function(){var e=this.state.table;return{current:e.pageIndex,pageSize:10,total:e.total}}},{key:"exchangeDataSource",value:function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push(H()({},n,{type:"cluster",className:null,clusterId:n.id,children:r(n.queues,0)}))}function r(e,t){var a=[];if(!e)return null;for(var n=0;n<e.length;n++){var s=e[n];a.push(H()({},s,{queueId:s.id,deepLength:t,className:"table-row-color_level"+(t+1),children:r(s.childQueues,t+1)}))}return a.length>0?a:null}return t}},{key:"initTableColumns",value:function(){var e=this;return[{title:"集群名称",dataIndex:"clusterName",width:"200px"},{title:"资源队列",dataIndex:"queueName",width:"200px",render:function(e,t){return"cluster"==t.type?null:("STOPPED"==t.queueState&&(e+="(已停用)"),s.a.createElement("span",{style:{paddingLeft:10*t.deepLength+"px"}},e))}},{title:"最小容量（%）",dataIndex:"capacity",width:"120px",render:function(e,t){return"cluster"==t.type?null:100*e}},{title:"最大容量（%）",dataIndex:"maxCapacity",width:"120px",render:function(e,t){return"cluster"==t.type?null:100*e}},{title:"绑定租户",dataIndex:"tenants",render:function(e,t){return e?e.map(function(e){return e.tenantName}).join("，")||"无":null}},{title:"修改时间",dataIndex:"gmtModified",width:"200px",render:function(e){return new Ue.a(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"操作",dataIndex:"deal",render:function(t,a){return"STOPPED"!=a.queueState&&a.tenants?s.a.createElement("a",{onClick:e.changeResource.bind(e,a)},"修改"):null},width:"80px"}]}},{key:"changeResource",value:function(e){this.setState({resource:e,changeModalVisible:!0})}},{key:"changeUserValue",value:function(e){this.setState({selectUser:e})}},{key:"selectUser",value:function(e){var t=this.state.selectUserList;this.setState({selectUser:"",selectUserList:t.concat(e)})}},{key:"closeModal",value:function(){this.setState({changeModalVisible:!1})}},{key:"resourceUserChange",value:function(){this.setState({changeModalVisible:!1}),this.getResourceList()}},{key:"getUserOptions",value:function(){for(var e=this.state,t=e.userList,a=e.selectUserList,n=[],r=0;r<t.length;r++){var o=t[r];-1==a.indexOf(o.id)&&n.push(s.a.createElement(et,{value:o.id},o.name))}return n}},{key:"render",value:function(){var e=this.state,t=e.dataSource,a=e.table,n=e.changeModalVisible,r=e.resource,o=a.loading,i=this.initTableColumns();return s.a.createElement("div",{className:"contentBox"},s.a.createElement(Re.a,{style:{width:"900px",color:"rgba(1,1,1,0.84)"},noHovering:!0},s.a.createElement("h2",null,"什么是资源管理"),s.a.createElement("p",{style:{marginTop:"20px"}},"资源管理是以租户为单位进行计算资源的分配，当您需要多个租户，并且每个租户分配不同比例的资源容量时需要使用本功能，例如：您的集群有10个节点，每个节点的配置为8核16GB内存，总资源为80核160GB内存，那么您可以新建“销售”和“开发”2个租户，为销售租户分配30%的资源容量，为开发租户分配70%的资源容量。"),s.a.createElement("p",{style:{marginTop:"20px"}},"注意:"),s.a.createElement("ul",null,s.a.createElement("li",null,"1、“资源队列”仅包括集群的内存和CPU；"),s.a.createElement("li",null,"2、只支持将资源队列绑定到租户，暂时不支持绑定到项目；"),s.a.createElement("li",null,"3、每个资源队列的最小容量之和等于100%；"),s.a.createElement("li",null,"4、以资源队列的形式分配资源，资源队列的维护在配置文件中，本模块只是将资源队列绑定到租户；"),s.a.createElement("li",null,"5、可能已有的任务占用了较多的资源，导致更新配置后不会立即生效，需要等待已占用的资源释放；"))),s.a.createElement(De.a,{rowClassName:function(e,t){return e.className},rowKey:function(e){return e.clusterId+"~"+e.queueId},style:{marginTop:"20px"},className:"m-table no-card-table",pagination:this.getPagination(),loading:o,dataSource:t,columns:i}),s.a.createElement($e,{visible:n,onCancel:this.closeModal.bind(this),resourceUserChange:this.resourceUserChange.bind(this),resource:r}))}}]),t}(s.a.Component),at=tt,nt=at,rt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(10,"PAGE_SIZE","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/resourceManage/index.js"),__REACT_HOT_LOADER__.register(et,"Option","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/resourceManage/index.js"),__REACT_HOT_LOADER__.register(tt,"ResourceManage","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/resourceManage/index.js"),__REACT_HOT_LOADER__.register(at,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/resourceManage/index.js")),a("MaXC"),a("4IMT")),st=a.n(rt),ot=function(e){function t(){var e,a,n,r;_()(this,t);for(var s=arguments.length,o=Array(s),i=0;i<s;i++)o[i]=arguments[i];return a=n=h()(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o))),n.state={dataSource:[],table:{pageIndex:1,total:0,loading:!0}},r=a,h()(n,r)}return g()(t,e),m()(t,[{key:"componentDidMount",value:function(){this.getResourceList()}},{key:"getResourceList",value:function(){var e=this,t=this.state.table,a=t.pageIndex;je.getClusterList({currentPage:a,pageSize:10}).then(function(a){1==a.code?e.setState({dataSource:a.data.data,table:H()({},t,{loading:!1,total:a.data.totalCount})}):e.setState({table:H()({},t,{loading:!1})})})}},{key:"getPagination",value:function(){var e=this.state.table;return{current:e.pageIndex,pageSize:10,total:e.total}}},{key:"initTableColumns",value:function(){var e=this;return[{title:"集群名称",dataIndex:"clusterName"},{title:"节点数量",dataIndex:"totalNode"},{title:"总资源数",dataIndex:"totalCore",width:"200px",render:function(e,t){var a=t.totalMemory/1024,n=Math.floor(a)!=a;return t.totalCore+"VCore "+(n?a.toFixed(2):a)+"GB"}},{title:"修改时间",dataIndex:"gmtModified",width:"200px",render:function(e){return new Ue.a(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"操作",dataIndex:"deal",render:function(t,a){return s.a.createElement("div",null,s.a.createElement("a",{onClick:e.editCluster.bind(e,a)},"修改"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.viewCluster.bind(e,a)},"查看"))}}]}},{key:"editCluster",value:function(e){k.g.push({pathname:"/console/clusterManage/editCluster",state:{cluster:e,mode:"edit"}})}},{key:"viewCluster",value:function(e){k.g.push({pathname:"/console/clusterManage/editCluster",state:{cluster:e,mode:"view"}})}},{key:"newCluster",value:function(){k.g.push({pathname:"/console/clusterManage/editCluster"})}},{key:"render",value:function(){var e=this.state,t=e.dataSource,a=e.table.loading,n=this.initTableColumns(),r=s.a.createElement("div",null,"多集群管理 ",s.a.createElement(st.a,{type:"primary",onClick:this.newCluster,style:{float:"right",marginTop:"9px"}},"新增集群"));return s.a.createElement("div",{className:"contentBox m-card"},s.a.createElement(Re.a,{noHovering:!0,title:r},s.a.createElement(De.a,{rowKey:function(e){return e.id},className:"m-table",pagination:this.getPagination(),loading:a,dataSource:t,columns:n})))}}]),t}(s.a.Component),it=ot,lt=it,ct=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(10,"PAGE_SIZE","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/clusterManage/index.js"),__REACT_HOT_LOADER__.register(ot,"ClusterManage","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/clusterManage/index.js"),__REACT_HOT_LOADER__.register(it,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/clusterManage/index.js")),a("FGdI"),a("Pbn2")),ut=a.n(ct),pt=(a("93XW"),a("d1El")),dt=a.n(pt),_t=(a("hr7U"),a("9xET")),ft=a.n(_t),mt=(a("fv9D"),a("ZPTe")),vt=a.n(mt),ht=a("m1cH"),Et=a.n(ht),gt=(a("PAYn"),a("EQeY")),kt=a.n(gt),Tt=a("sk9p"),yt=a.n(Tt),bt=(a("cUip"),a("iJl9")),At=a.n(bt),Ct=(a("nTym"),a("qu0K")),Dt=a.n(Ct),Ot={MYSQL:1,ORACLE:2,SQLSERVER:3,HDFS:6,HIVE:7,HBASE:8,FTP:9,MAXCOMPUTE:10,ADS:11},Rt={GUIDE:0,SQL:1},St={POST:1},xt={1:"POST",2:"GET"},Lt={"-1":"NO_APPLY",0:"IN_HAND",1:"PASS",2:"REJECT",3:"STOPPED",4:"DISABLE",5:"EXPIRED"},Ut={NO_APPLY:-1,IN_HAND:0,PASS:1,REJECT:2,STOPPED:3,DISABLE:4,EXPIRED:5},wt={SUCCESS:0,STOP:1,EDITTING:2},jt={YES:0,NO:1},Ht={"-1":"nothing",0:"inhand",1:"success",2:"notPass",3:"stop",4:"disabled",5:"expired"},Pt={0:"notApproved",1:"pass",2:"rejected",3:"stop",4:"disabled",5:"expired"},Nt={0:"success",1:"stop",2:"editting"},Mt=["未知类型","MySql","Oracle","SQLServer","PostgreSQL","RDBMS","HDFS","Hive","HBase","FTP","MaxCompute"],zt={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},It={labelCol:{xs:{span:24},sm:{span:10}},wrapperCol:{xs:{span:24},sm:{span:14}}},Wt={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}},Ft={labelCol:{span:0},wrapperCol:{span:24}},Gt={title:{text:"堆叠区域图",textStyle:{fontSize:12},textAlign:"left"},tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985"}}},color:["#2491F7","#7460EF","#26DAD2","#79E079","#7A64F3","#FFDC53","#9a64fb"],legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},toolbox:{feature:{saveAsImage:{show:!1}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{show:!0},axisLine:{lineStyle:{color:"#DDDDDD"}},axisLabel:{textStyle:{color:"#666666"}},nameTextStyle:{color:"#666666"},splitLine:{color:"#666666"}}],yAxis:[{type:"value",axisLabel:{formatter:"{value} 个",textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",nameGap:20,axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#DDDDDD",type:"dashed"}}}],series:[]},Bt={tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985"}}},color:["#2491F7","#7460EF","#26DAD2","#79E079","#7A64F3","#FFDC53","#9a64fb"],legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},toolbox:{feature:{saveAsImage:{show:!1}}},grid:{left:"3%",right:"4%",bottom:"30",top:40,containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{show:!0},axisLine:{lineStyle:{color:"#DDDDDD"}},axisLabel:{textStyle:{color:"#666666"}},nameTextStyle:{color:"#666666"},splitLine:{color:"#666666"}}],yAxis:[{nameGap:25,type:"value",name:"调用次数",axisLabel:{textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",axisLine:{show:!1},axisTick:{show:!1},splitLine:!1,minInterval:1},{nameGap:25,type:"value",name:"失败率 (%)",axisLabel:{textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#DDDDDD",type:"dashed"}},max:100}],series:[]},qt={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"horizontal",x:"center",y:"bottom",data:["参数错误","调用超时","异常访问","超出限额","禁用","其他"],itemWidth:5,itemHeight:5,textStyle:{color:"#666"}},series:[{name:"错误类型",type:"pie",radius:["35%","55%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"}},labelLine:{normal:{show:!1}},data:[{value:335,name:"参数错误",itemStyle:{normal:{color:"#1C86EE"}}},{value:310,name:"调用超时",itemStyle:{normal:{color:"#EE9A00"}}},{value:234,name:"异常访问",itemStyle:{normal:{color:"#EE4000"}}},{value:535,name:"超出限额",itemStyle:{normal:{color:"#40E0D0"}}},{value:1158,name:"禁用",itemStyle:{normal:{color:"#71C671"}}},{value:548,name:"其他",itemStyle:{normal:{color:"#A2B5CD"}}}]}]},Vt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ot,"DATA_SOURCE","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(Rt,"API_MODE","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(St,"API_METHOD","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(xt,"API_METHOD_key","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(Lt,"API_STATUS","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(Ut,"API_USER_STATUS","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(wt,"API_SYSTEM_STATUS","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(jt,"API_DELETE","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(Ht,"EXCHANGE_API_STATUS","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(Pt,"EXCHANGE_APPLY_STATUS","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(Nt,"EXCHANGE_ADMIN_API_STATUS","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(Mt,"dataSourceTypes","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(zt,"formItemLayout","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(It,"longLabelFormLayout","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(Wt,"tailFormItemLayout","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(Ft,"rowFormItemLayout","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(Gt,"lineAreaChartOptions","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(Bt,"doubleLineAreaChartOptions","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js"),__REACT_HOT_LOADER__.register(qt,"pieOption","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/consts/index.js")),a("ER3F")),Yt=Dt.a.Item,Qt=At.a.TextArea,Zt=xe.a.Option,Xt={NOTHING:0,SUCCESS:1,FAIL:2};function Jt(){return(new Date).getTime()+""+~~(1e5*Math.random())}function Kt(e){return{consoleUser:e.consoleUser}}function $t(e){return{getTenantList:function(){e(qe())}}}var ea=Object(T.b)(Kt,$t)(Xe=function(e){function t(){var e,a,n,r;_()(this,t);for(var s=arguments.length,o=Array(s),i=0;i<s;i++)o[i]=arguments[i];return a=n=h()(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(o))),n.state={selectUserMap:{},selectUser:"",file:"",zipConfig:"",uploadLoading:!1,testLoading:!1,testStatus:Xt.NOTHING,flink_params:[],spark_params:[],core:null,nodeNumber:null,memory:null,extDefaultValue:{},fileHaveChange:!1},r=a,h()(n,r)}return g()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.location,n=t.form,r=a.state||{};"edit"!=r.mode&&"view"!=r.mode||je.getClusterInfo({clusterId:r.cluster.id}).then(function(t){if(1==t.code){var a=t.data,r=a.clusterConf;r=JSON.parse(r);var s=e.exchangeServerParams(r);e.setState({core:a.totalCore,memory:a.totalMemory,nodeNumber:a.totalNode,zipConfig:q()({yarnConf:r.yarnConf,hadoopConf:r.hadoopConf}),flink_params:s.flinkKeys,spark_params:s.sparkKeys,extDefaultValue:s.default}),n.setFieldsValue({clusterName:a.clusterName,hiveConf:r.hiveConf,sparkConf:r.sparkConf,flinkConf:r.flinkConf})}})}},{key:"exchangeServerParams",value:function(e){var t={flinkKeys:[],sparkKeys:[],default:{}},a=e.sparkConf,n=e.flinkConf;function r(e,a,n,r){Ie()(e).map(function(e){var n=yt()(e,2),s=n[0],o=n[1];if(!a.includes(s)){var i=Jt();r.push({id:i}),t.default[i]={name:s,value:o}}})}return r(a,["typeName","sparkYarnArchive","sparkSqlProxyPath","sparkPythonExtLibPath"],0,t.sparkKeys),r(n,["typeName","flinkZkAddress","flinkHighAvailabilityStorageDir","flinkZkNamespace","jarTmpDir","flinkPluginRoot","remotePluginRootDir","clusterMode"],0,t.flinkKeys),t}},{key:"getUserOptions",value:function(){for(var e=this.props.consoleUser,t=this.state.selectUserMap,a=e.userList,n=[],r=0;r<a.length;r++){var o=a[r];t[o.tenantId]||n.push(s.a.createElement(Zt,{value:o.tenantId+"$$"+o.tenantName},o.tenantName))}return n}},{key:"changeUserValue",value:function(e){this.setState({selectUser:e})}},{key:"selectUser",value:function(e,t){var a=this.state.selectUserMap;this.setState({selectUser:"",selectUserMap:H()({},a,Fe()({},e.split("$$")[0],{name:t.props.children}))})}},{key:"getTableDataSource",value:function(){var e=this.state.selectUserMap;return Ie()(e).map(function(e){return{id:e[0],name:e[1].name}})}},{key:"removeUser",value:function(e){var t=this.state.selectUserMap;delete(t=Object(Ge.cloneDeep)(t))[e],this.setState({selectUserMap:t})}},{key:"initColumns",value:function(){var e=this;return[{title:"租户名称",dataIndex:"name",width:"150px"},{title:"操作",dataIndex:"deal",render:function(t,a){return s.a.createElement("a",{onClick:e.removeUser.bind(e,a.id)},"删除")}}]}},{key:"validateFileType",value:function(e,t,a){t&&!/\.(zip)$/.test(t.toLocaleLowerCase())&&a("配置文件只能是zip文件!"),a()}},{key:"fileChange",value:function(e){var t=this,a=e.target;this.setState({file:{},uploadLoading:!0,zipConfig:"",fileHaveChange:!0}),je.uploadClusterResource({config:a.files[0]}).then(function(e){1==e.code?t.setState({uploadLoading:!1,file:a,zipConfig:e.data}):(t.props.form.setFieldsValue({file:null}),t.setState({uploadLoading:!1}))})}},{key:"renderTestResult",value:function(){switch(this.state.testStatus){case Xt.NOTHING:return null;case Xt.SUCCESS:return s.a.createElement(kt.a,{color:"#87d068"},"连通成功");case Xt.FAIL:return s.a.createElement("span",null,s.a.createElement(kt.a,{color:"red"},"连通失败"))}}},{key:"addParam",value:function(e){var t=this.state,a=t.flink_params,n=t.spark_params;"flink"==e?this.setState({flink_params:[].concat(Et()(a),[{id:Jt()}])}):this.setState({spark_params:[].concat(Et()(n),[{id:Jt()}])})}},{key:"deleteParam",value:function(e,t){var a=this.state,n=a.flink_params,r=a.spark_params,s=void 0,o=void 0;"flink"==t?(o="flink_params",s=n):(o="spark_params",s=r),s=s.filter(function(t){return t.id!=e}),this.setState(Fe()({},o,s))}},{key:"renderExtraParam",value:function(e){var t=this,a=this.state,n=a.flink_params,r=a.spark_params,o=a.extDefaultValue,i=this.props.form.getFieldDecorator,l="view"==(this.props.location.state||{}).mode;return("flink"==e?n:r).map(function(a){return s.a.createElement(ft.a,{key:a.id},s.a.createElement(vt.a,{span:zt.labelCol.sm.span},s.a.createElement(Yt,{key:a.id+"-name"},i(e+"%"+a.id+"-name",{rules:[{required:!0,message:"请输入参数属性名"}],initialValue:o[a.id]&&o[a.id].name})(s.a.createElement(At.a,{disabled:l,style:{width:"calc(100% - 12px)"}})),":")),s.a.createElement(vt.a,{span:zt.wrapperCol.sm.span},s.a.createElement(Yt,{key:a.id+"-value"},i(e+"%"+a.id+"-value",{rules:[{required:!0,message:"请输入参数属性值"}],initialValue:o[a.id]&&o[a.id].value})(s.a.createElement(At.a,{disabled:l})))),l?null:s.a.createElement("a",{className:"formItem-right-text",onClick:t.deleteParam.bind(t,a.id,e)},"删除"))})}},{key:"renderZipConfig",value:function(e){var t=this.state.zipConfig;t=JSON.parse(t);var a=void 0;return"hdfs"==e?(a=Ie()(t.hadoopConf),w.a.sortByCompareFunctions(a,function(e,t){var a=yt()(e,2),n=a[0],r=(a[1],yt()(t,2)),s=r[0];r[1];return"fs.defaultFS"==n?-1:"fs.defaultFS"==s?1:0},function(e,t){var a=yt()(e,2),n=a[0],r=(a[1],yt()(t,2)),s=r[0];r[1];return"dfs.nameservices"==n?-1:"dfs.nameservices"==s?1:0},function(e,t){var a=yt()(e,2),n=a[0],r=(a[1],yt()(t,2)),s=r[0];r[1];return n.indexOf("dfs.ha.namenodes")>-1?-1:s.indexOf("dfs.ha.namenodes")>-1?1:0},function(e,t){var a=yt()(e,2),n=a[0],r=(a[1],yt()(t,2)),s=r[0],o=(r[1],n.indexOf("dfs.namenode.rpc-address")>-1),i=s.indexOf("dfs.namenode.rpc-address")>-1;return o&&i?n>s?1:-1:o?-1:i?1:0})):(a=Ie()(t.yarnConf),w.a.sortByCompareFunctions(a,function(e,t){var a=yt()(e,2),n=a[0],r=(a[1],yt()(t,2)),s=r[0];r[1];return"yarn.resourcemanager.ha.rm-ids"==n?-1:"yarn.resourcemanager.ha.rm-ids"==s?1:0},function(e,t){var a=yt()(e,2),n=a[0],r=(a[1],yt()(t,2)),s=r[0],o=(r[1],n.indexOf("yarn.resourcemanager.address")>-1),i=s.indexOf("yarn.resourcemanager.address")>-1;return o&&i?n>s?1:-1:o?-1:i?1:0},function(e,t){var a=yt()(e,2),n=a[0],r=(a[1],yt()(t,2)),s=r[0],o=(r[1],n.indexOf("yarn.resourcemanager.webapp.address")>-1),i=s.indexOf("yarn.resourcemanager.webapp.address")>-1;return o&&i?n>s?1:-1:o?-1:i?1:0})),a.map(function(e){var t=yt()(e,2),a=t[0],n=t[1];return s.a.createElement(ft.a,{className:"zipConfig-item"},s.a.createElement(vt.a,{className:"formitem-textname",span:zt.labelCol.sm.span+4},a.length>40?s.a.createElement(dt.a,{title:a},a.substr(0,40)+"..."):a,"："),s.a.createElement(vt.a,{className:"formitem-textvalue",span:zt.wrapperCol.sm.span-1},n))})}},{key:"exchangeMemory",value:function(e){if(!e)return"--";var t=e/1024;return(Math.floor(t)!=t?t.toFixed(2):t)+"GB"}},{key:"save",value:function(){var e=this,t=(this.props.location.state||{}).mode;this.props.form.validateFieldsAndScroll(null,{},function(a,n){if(!a){var r="createCluster";"edit"==t&&(r="updateCluster"),je[r](e.getServerParams(n,!0)).then(function(t){1==t.code&&(Q.a.success("保存成功"),e.props.router.goBack())})}})}},{key:"test",value:function(){var e=this;this.props.form.validateFieldsAndScroll(null,{},function(t,a){t||(e.setState({testLoading:!0}),je.testCluster(e.getServerParams(a)).then(function(t){1==t.code?(e.setState({testLoading:!1,testStatus:Xt.SUCCESS,nodeNumber:t.data.totalNode,core:t.data.totalCores,memory:t.data.totalMemory}),Q.a.success("连通成功")):e.setState({testLoading:!1,testStatus:Xt.FAIL})}))})}},{key:"getServerParams",value:function(e,t){var a=this.props.location.state||{},n=a.mode,r=a.cluster,s=this.getClusterConf(e),o={clusterName:e.clusterName,clusterConf:q()(s)};if(t){var i=this.state.file;i&&(o.config=i.files[0])}return"edit"==n&&(o.id=r.id),o}},{key:"getClusterConf",value:function(e){var t=this.state.zipConfig;t=JSON.parse(t);var a={},n=this.getCustomParams(e,"spark"),r=this.getCustomParams(e,"flink");return a.hadoopConf=t.hadoopConf,a.yarnConf=t.yarnConf,a.hiveConf=e.hiveConf,a.sparkConf=H()({},e.sparkConf,n),a.flinkConf=H()({},e.flinkConf,r),a.hiveConf.username=a.hiveConf.username||"",a.hiveConf.password=a.hiveConf.password||"",a}},{key:"getCustomParams",value:function(e,t){var a={},n={};for(var r in e)if(r.startsWith(t+"%")){var s=r.split("%")[1].split("-"),o=s[0],i=s[1];n[o]||(n[o]={}),n[o][i]=e[r]}for(var l in n){var c=n[l];a[c.name]=c.value}return a}},{key:"render",value:function(){var e=this.state,t=(e.selectUser,e.file),a=e.zipConfig,n=e.uploadLoading,r=e.core,o=e.nodeNumber,i=e.memory,l=e.testLoading,c=e.fileHaveChange,u=this.props.form,p=u.getFieldDecorator,d=(u.getFieldValue,(this.props.location.state||{}).mode),_="view"==d,f=!("view"==d||"edit"==d);this.initColumns();return s.a.createElement("div",{className:"contentBox"},s.a.createElement("p",{className:"box-title",style:{height:"auto",paddingLeft:"20px"}},s.a.createElement(Vt.a,{size:"default",type:"textButton"})),s.a.createElement(Re.a,{noHovering:!0,className:"contentBox shadow"},s.a.createElement("p",{className:"config-title"},"集群信息"),s.a.createElement("div",{className:"config-content",style:{width:"680px"}},s.a.createElement(Yt,H()({label:"集群标识"},zt),p("clusterName",{rules:[{required:!0,message:"请输入集群标识"},{pattern:/^[a-z0-9_]{1,64}$/i,message:"集群标识不能超过64字符，支持英文、数字、下划线"}]})(s.a.createElement(At.a,{disabled:!f,placeholder:"请输入集群标识",style:{width:"40%"}})),s.a.createElement("span",{style:{marginLeft:"30px"}},"节点数：",o||"--"," "),s.a.createElement("span",{style:{marginLeft:"10px"}},"资源数：",r||"--","VCore ",this.exchangeMemory(i)," "))),_?null:s.a.createElement("div",null,s.a.createElement("p",{className:"config-title"},"上传配置文件"),s.a.createElement("div",{className:"config-content",style:{width:"750px"}},s.a.createElement("p",{style:{marginBottom:"24px"}},"您需要获取Hadoop、Spark、Flink集群的配置文件，至少包括：",s.a.createElement("strong",null,"core-site.xml、hdfs-site.xml、hive-site.xml、yarn-site.xml"),"文件"),s.a.createElement(Yt,H()({label:"配置文件"},zt),p("file",{rules:[{required:!(!c&&"edit"==d),message:"请选择上传文件"},{validator:this.validateFileType}]})(s.a.createElement("div",null,n?s.a.createElement("label",{style:{lineHeight:"28px"},className:"ant-btn disble"},"选择文件"):s.a.createElement("label",{style:{lineHeight:"28px"},className:"ant-btn",htmlFor:"myOfflinFile"},"选择文件"),n?s.a.createElement(ut.a,{className:"blue-loading",type:"loading"}):null,s.a.createElement("span",null," ",t.files&&t.files[0].name),s.a.createElement("input",{name:"file",type:"file",id:"myOfflinFile",onChange:this.fileChange.bind(this),accept:".zip",style:{display:"none"}}))),s.a.createElement("span",null,"支持扩展名：.zip")),"如何获取这些配置文件？请您参考",s.a.createElement("a",null,"《帮助文档》"))),a?s.a.createElement("div",null,s.a.createElement("p",{className:"config-title"},"HDFS"),s.a.createElement("div",{className:"config-content",style:{width:"800px"}},this.renderZipConfig("hdfs")),s.a.createElement("p",{className:"config-title"},"YARN"),s.a.createElement("div",{className:"config-content",style:{width:"800px"}},this.renderZipConfig("yarn"))):null,s.a.createElement("p",{className:"config-title"},"Hive JDBC信息"),s.a.createElement("div",{className:"config-content",style:{width:"680px"}},s.a.createElement(Yt,H()({label:"JDBC URL"},zt),p("hiveConf.jdbcUrl",{rules:[{required:!0,message:"请输入jdbcUrl"}]})(s.a.createElement(At.a,{disabled:_}))),s.a.createElement(Yt,H()({label:"用户名"},zt),p("hiveConf.username")(s.a.createElement(At.a,{disabled:_}))),s.a.createElement(Yt,H()({label:"密码"},zt),p("hiveConf.password")(s.a.createElement(At.a,{disabled:_})))),s.a.createElement("p",{className:"config-title"},"Spark"),s.a.createElement("div",{className:"config-content",style:{width:"680px"}},s.a.createElement(Yt,H()({label:"版本选择"},zt),p("sparkConf.typeName",{rules:[{required:!0,message:"请选择Spark版本"}],initialValue:"spark_yarn"})(s.a.createElement(xe.a,{disabled:_,style:{width:"100px"}},s.a.createElement(Zt,{value:"spark_yarn"},"2.X")))),s.a.createElement(Yt,H()({label:"sparkYarnArchive"},zt),p("sparkConf.sparkYarnArchive",{rules:[{required:!0,message:"请输入sparkYarnArchive"}],initialValue:"/sparkjars/jars"})(s.a.createElement(At.a,{disabled:_}))),s.a.createElement(Yt,H()({label:"sparkSqlProxyPath"},zt),p("sparkConf.sparkSqlProxyPath",{rules:[{required:!0,message:"请输入sparkSqlProxyPath"}],initialValue:"/user/spark/spark-0.0.1-SNAPSHOT.jar"})(s.a.createElement(At.a,{disabled:_}))),s.a.createElement(Yt,H()({label:"sparkPythonExtLibPath"},zt),p("sparkConf.sparkPythonExtLibPath",{rules:[{required:!0,message:"请输入sparkPythonExtLibPath"}],initialValue:"/pythons/pyspark.zip,hdfs://ns1/pythons/py4j-0.10.4-src.zip"})(s.a.createElement(At.a,{disabled:_}))),this.renderExtraParam("spark"),_?null:s.a.createElement(ft.a,null,s.a.createElement(vt.a,{span:zt.labelCol.sm.span}),s.a.createElement(vt.a,{className:"m-card",span:zt.wrapperCol.sm.span},s.a.createElement("a",{onClick:this.addParam.bind(this,"spark")},"添加自定义参数")))),s.a.createElement("p",{className:"config-title"},"Flink"),s.a.createElement("div",{className:"config-content",style:{width:"680px"}},s.a.createElement(Yt,H()({label:"版本选择"},zt),p("flinkConf.typeName",{rules:[{required:!0,message:"请选择flink版本"}],initialValue:"flink140"})(s.a.createElement(xe.a,{disabled:_,style:{width:"100px"}},s.a.createElement(Zt,{value:"flink140"},"1.4"),s.a.createElement(Zt,{value:"flink150"},"1.5")))),s.a.createElement(Yt,H()({label:"clusterMode"},zt),p("flinkConf.clusterMode",{rules:[{required:!0,message:"请选择clusterMode"}],initialValue:"yarn"})(s.a.createElement(xe.a,{disabled:_,style:{width:"100px"}},s.a.createElement(Zt,{value:"standalone"},"standalone"),s.a.createElement(Zt,{value:"yarn"},"yarn")))),s.a.createElement(Yt,H()({label:"flinkZkAddress"},zt),p("flinkConf.flinkZkAddress",{rules:[{required:!0,message:"请输入flinkZkAddress"}]})(s.a.createElement(At.a,{disabled:_,placeholder:"hostname1:port,hostname2:port，多个地址用英文逗号隔开"}))),s.a.createElement(Yt,H()({label:s.a.createElement(dt.a,{title:"flinkHighAvailabilityStorageDir"},"flinkHighAvailabilityStorageDir")},zt),p("flinkConf.flinkHighAvailabilityStorageDir",{rules:[{required:!0,message:"请输入flinkHighAvailabilityStorageDir"}]})(s.a.createElement(At.a,{disabled:_,placeholder:"Flink高可用存储地址，例如：/flink140/ha"}))),s.a.createElement(Yt,H()({label:"flinkZkNamespace"},zt),p("flinkConf.flinkZkNamespace",{rules:[{required:!0,message:"请输入flinkZkNamespace"}]})(s.a.createElement(At.a,{disabled:_,placeholder:"Flink在Zookeeper的namespace，例如：/flink140"}))),s.a.createElement(Yt,H()({label:"jarTmpDir"},zt),p("flinkConf.jarTmpDir",{initialValue:"../tmp140"})(s.a.createElement(At.a,{disabled:_}))),s.a.createElement(Yt,H()({label:"flinkPluginRoot"},zt),p("flinkConf.flinkPluginRoot",{initialValue:"/opt/dtstack/flinkplugin"})(s.a.createElement(At.a,{disabled:_}))),s.a.createElement(Yt,H()({label:"remotePluginRootDir"},zt),p("flinkConf.remotePluginRootDir",{initialValue:"/opt/dtstack/flinkplugin"})(s.a.createElement(At.a,{disabled:_}))),this.renderExtraParam("flink"),_?null:s.a.createElement(ft.a,null,s.a.createElement(vt.a,{span:zt.labelCol.sm.span}),s.a.createElement(vt.a,{className:"m-card",span:zt.wrapperCol.sm.span},s.a.createElement("a",{onClick:this.addParam.bind(this,"flink")},"添加自定义参数")))),s.a.createElement("p",{className:"config-title"}),_?null:s.a.createElement("div",{className:"config-content",style:{width:"100%"}},s.a.createElement(st.a,{onClick:this.test.bind(this),loading:l,type:"primary"},"测试连通性"),s.a.createElement("span",{style:{marginLeft:"18px"}},this.renderTestResult()),s.a.createElement("span",{style:{float:"right",marginRight:"18px"}},s.a.createElement(st.a,{onClick:this.save.bind(this),type:"primary"},"保存"),s.a.createElement(st.a,{onClick:k.g.goBack,style:{marginLeft:"8px"}},"取消")))))}}]),t}(s.a.Component))||Xe,ta=Dt.a.create()(ea),aa=ta,na=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Yt,"FormItem","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/clusterManage/edit/index.js"),__REACT_HOT_LOADER__.register(Qt,"TextArea","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/clusterManage/edit/index.js"),__REACT_HOT_LOADER__.register(Zt,"Option","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/clusterManage/edit/index.js"),__REACT_HOT_LOADER__.register(Xt,"TEST_STATUS","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/clusterManage/edit/index.js"),__REACT_HOT_LOADER__.register(Jt,"giveMeAKey","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/clusterManage/edit/index.js"),__REACT_HOT_LOADER__.register(Kt,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/clusterManage/edit/index.js"),__REACT_HOT_LOADER__.register($t,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/clusterManage/edit/index.js"),__REACT_HOT_LOADER__.register(ea,"EditCluster","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/clusterManage/edit/index.js"),__REACT_HOT_LOADER__.register(ta,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/views/clusterManage/edit/index.js")),s.a.createElement(k.d,{path:"/",component:y.a},s.a.createElement(k.a,{to:"/console"}),s.a.createElement(k.d,{path:"/message",component:b.a},s.a.createElement(k.b,{component:A.a}),s.a.createElement(k.d,{path:"list",component:A.a}),s.a.createElement(k.d,{path:"detail/:msgId",component:C.a})),s.a.createElement(k.d,{path:"/admin",component:D.a},s.a.createElement(k.b,{component:O.a}),s.a.createElement(k.d,{path:"user",component:O.a}),s.a.createElement(k.d,{path:"role",component:R.a}),s.a.createElement(k.d,{path:"role/add",component:S.a}),s.a.createElement(k.d,{path:"role/edit/:roleId",component:x.a})),s.a.createElement(k.d,{path:"/console",component:Ae},s.a.createElement(k.b,{component:nt}),s.a.createElement(k.d,{path:"resourceManage",component:nt}),s.a.createElement(k.d,{path:"clusterManage",component:lt}),s.a.createElement(k.d,{path:"clusterManage/editCluster",component:aa})))),ra=na,sa=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(na,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/routers.js"),function(e){function t(){return _()(this,t),h()(this,(t.__proto__||p()(t)).apply(this,arguments))}return g()(t,e),m()(t,[{key:"render",value:function(){var e=this.props,t=e.store,a=e.history;return s.a.createElement(T.a,{store:t},s.a.createElement(k.e,{routes:ra,history:a,key:Math.random(),onEnter:function(){}}))}}]),t}(s.a.Component)),oa=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(sa,"Root","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/root.js"),function(e){var t=a("/AHB").default,n=Object(c.a)(t,"hash"),r=n.store,o=n.history;i.a.render(s.a.createElement(l.AppContainer,null,s.a.createElement(e,{store:r,history:o})),document.getElementById("app"))});oa(sa);"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(oa,"render","/Users/ziv/Development/Workspace/data-stack/src/webapps/console/app.js")},Zv7G:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n){var r=(0,s.default)(e,t);try{n?a.groupCollapsed("diff"):a.group("diff")}catch(e){a.log("diff")}r?r.forEach(function(e){var t=e.kind,n=function(e){var t=e.kind,a=e.path,n=e.lhs,r=e.rhs,s=e.index,o=e.item;switch(t){case"E":return[a.join("."),n,"→",r];case"N":return[a.join("."),r];case"D":return[a.join(".")];case"A":return[a.join(".")+"["+s+"]",o];default:return[]}}(e);a.log.apply(a,["%c "+o[t].text,function(e){return"color: "+o[e].color+"; font-weight: bold"}(t)].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(n)))}):a.log("—— no diff ——");try{a.groupEnd()}catch(e){a.log("—— diff end —— ")}};var n,r=a("bo1M"),s=(n=r)&&n.__esModule?n:{default:n};var o={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}};e.exports=t.default},bo1M:function(e,t,a){(function(a){var n;
/*!
 * deep-diff.
 * Licensed under the MIT License.
 */!function(r,s){"use strict";void 0===(n=function(){return function(e){var t,n,r=[];t="object"==typeof a&&a?a:"undefined"!=typeof window?window:{};(n=t.DeepDiff)&&r.push(function(){void 0!==n&&t.DeepDiff===f&&(t.DeepDiff=n,n=e)});function s(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function o(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function i(e,t,a){i.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:a,enumerable:!0})}function l(e,t){l.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function c(e,t){c.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function u(e,t,a){u.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:a,enumerable:!0})}function p(e,t,a){var n=e.slice((a||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function d(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":void 0!==e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function _(t,a,n,r,s,o,f){var m=(s=s||[]).slice(0);if(void 0!==o){if(r){if("function"==typeof r&&r(m,o))return;if("object"==typeof r){if(r.prefilter&&r.prefilter(m,o))return;if(r.normalize){var v=r.normalize(m,o,t,a);v&&(t=v[0],a=v[1])}}}m.push(o)}"regexp"===d(t)&&"regexp"===d(a)&&(t=t.toString(),a=a.toString());var h=typeof t,E=typeof a;if("undefined"===h)"undefined"!==E&&n(new l(m,a));else if("undefined"===E)n(new c(m,t));else if(d(t)!==d(a))n(new i(m,t,a));else if("[object Date]"===Object.prototype.toString.call(t)&&"[object Date]"===Object.prototype.toString.call(a)&&t-a!=0)n(new i(m,t,a));else if("object"===h&&null!==t&&null!==a){if((f=f||[]).indexOf(t)<0){if(f.push(t),Array.isArray(t)){var g;t.length;for(g=0;g<t.length;g++)g>=a.length?n(new u(m,g,new c(e,t[g]))):_(t[g],a[g],n,r,m,g,f);for(;g<a.length;)n(new u(m,g,new l(e,a[g++])))}else{var k=Object.keys(t),T=Object.keys(a);k.forEach(function(s,o){var i=T.indexOf(s);i>=0?(_(t[s],a[s],n,r,m,s,f),T=p(T,i)):_(t[s],e,n,r,m,s,f)}),T.forEach(function(t){_(e,a[t],n,r,m,t,f)})}f.length=f.length-1}}else t!==a&&("number"===h&&isNaN(t)&&isNaN(a)||n(new i(m,t,a)))}function f(t,a,n,r){return r=r||[],_(t,a,function(e){e&&r.push(e)},n),r.length?r:e}function m(e,t,a){if(e&&t&&a&&a.kind){for(var n=e,r=-1,s=a.path?a.path.length-1:0;++r<s;)void 0===n[a.path[r]]&&(n[a.path[r]]="number"==typeof a.path[r]?[]:{}),n=n[a.path[r]];switch(a.kind){case"A":!function e(t,a,n){if(n.path&&n.path.length){var r,s=t[a],o=n.path.length-1;for(r=0;r<o;r++)s=s[n.path[r]];switch(n.kind){case"A":e(s[n.path[r]],n.index,n.item);break;case"D":delete s[n.path[r]];break;case"E":case"N":s[n.path[r]]=n.rhs}}else switch(n.kind){case"A":e(t[a],n.index,n.item);break;case"D":t=p(t,a);break;case"E":case"N":t[a]=n.rhs}return t}(a.path?n[a.path[r]]:n,a.index,a.item);break;case"D":delete n[a.path[r]];break;case"E":case"N":n[a.path[r]]=a.rhs}}}return s(i,o),s(l,o),s(c,o),s(u,o),Object.defineProperties(f,{diff:{value:f,enumerable:!0},observableDiff:{value:_,enumerable:!0},applyDiff:{value:function(e,t,a){e&&t&&_(e,t,function(n){a&&!a(e,t,n)||m(e,t,n)})},enumerable:!0},applyChange:{value:m,enumerable:!0},revertChange:{value:function(e,t,a){if(e&&t&&a&&a.kind){var n,r,s=e;for(r=a.path.length-1,n=0;n<r;n++)void 0===s[a.path[n]]&&(s[a.path[n]]={}),s=s[a.path[n]];switch(a.kind){case"A":!function e(t,a,n){if(n.path&&n.path.length){var r,s=t[a],o=n.path.length-1;for(r=0;r<o;r++)s=s[n.path[r]];switch(n.kind){case"A":e(s[n.path[r]],n.index,n.item);break;case"D":case"E":s[n.path[r]]=n.lhs;break;case"N":delete s[n.path[r]]}}else switch(n.kind){case"A":e(t[a],n.index,n.item);break;case"D":case"E":t[a]=n.lhs;break;case"N":t=p(t,a)}return t}(s[a.path[n]],a.index,a.item);break;case"D":case"E":s[a.path[n]]=a.lhs;break;case"N":delete s[a.path[n]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==n},enumerable:!0},noConflict:{value:function(){return r&&(r.forEach(function(e){e()}),r=null),f},enumerable:!0}}),f}()}.apply(t,[]))||(e.exports=n)}()}).call(this,a("yLpj"))}},[["YHBf",59,62,61,60]]]);