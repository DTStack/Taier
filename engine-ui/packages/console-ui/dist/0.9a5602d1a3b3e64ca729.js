webpackJsonp([0],{1033:function(e,t,a){"use strict";function n(e){return function(){var t=this.ownerDocument,a=this.namespaceURI;return a===s.a&&t.documentElement.namespaceURI===s.a?t.createElement(e):t.createElementNS(a,e)}}function r(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var i=a(1034),s=a(1035);t.a=function(e){var t=a.i(i.a)(e);return(t.local?r:n)(t)}},1034:function(e,t,a){"use strict";var n=a(1035);t.a=function(e){var t=e+="",a=t.indexOf(":");return a>=0&&"xmlns"!==(t=e.slice(0,a))&&(e=e.slice(a+1)),n.b.hasOwnProperty(t)?{space:n.b[t],local:e}:e}},1035:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n="http://www.w3.org/1999/xhtml";t.b={svg:"http://www.w3.org/2000/svg",xhtml:n,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},1036:function(e,t,a){"use strict";t.a=function(e,t){var a=e.ownerSVGElement||e;if(a.createSVGPoint){var n=a.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}},1037:function(e,t,a){"use strict";function n(e,t,a){return e=r(e,t,a),function(t){var a=t.relatedTarget;a&&(a===this||8&a.compareDocumentPosition(this))||e.call(this,t)}}function r(e,t,a){return function(n){var r=c;c=n;try{e.call(this,this.__data__,t,a)}finally{c=r}}}function i(e){return e.trim().split(/^|\s+/).map(function(e){var t="",a=e.indexOf(".");return a>=0&&(t=e.slice(a+1),e=e.slice(0,a)),{type:e,name:t}})}function s(e){return function(){var t=this.__on;if(t){for(var a,n=0,r=-1,i=t.length;n<i;++n)a=t[n],e.type&&a.type!==e.type||a.name!==e.name?t[++r]=a:this.removeEventListener(a.type,a.listener,a.capture);++r?t.length=r:delete this.__on}}}function o(e,t,a){var i=l.hasOwnProperty(e.type)?n:r;return function(n,r,s){var o,l=this.__on,c=i(t,r,s);if(l)for(var u=0,d=l.length;u<d;++u)if((o=l[u]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=c,o.capture=a),void(o.value=t);this.addEventListener(e.type,c,a),o={type:e.type,name:e.name,value:t,listener:c,capture:a},l?l.push(o):this.__on=[o]}}a.d(t,"a",function(){return c});var l={},c=null;if("undefined"!=typeof document){"onmouseenter"in document.documentElement||(l={mouseenter:"mouseover",mouseleave:"mouseout"})}t.b=function(e,t,a){var n,r,l=i(e+""),c=l.length;{if(!(arguments.length<2)){for(u=t?o:s,null==a&&(a=!1),n=0;n<c;++n)this.each(u(l[n],t,a));return this}var u=this.node().__on;if(u)for(var d,p=0,_=u.length;p<_;++p)for(n=0,d=u[p];n<c;++n)if((r=l[n]).type===d.type&&r.name===d.name)return d.value}}},1038:function(e,t,a){"use strict";function n(){}t.a=function(e){return null==e?n:function(){return this.querySelector(e)}}},1039:function(e,t,a){"use strict";var n=a(1037);t.a=function(){for(var e,t=n.a;e=t.sourceEvent;)t=e;return t}},1040:function(e,t,a){"use strict";t.a=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}},1111:function(e,t,a){"use strict";var n=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var r=document.documentElement;if(!r.matches){var i=r.webkitMatchesSelector||r.msMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector;n=function(e){return function(){return i.call(this,e)}}}}t.a=n},1112:function(e,t,a){"use strict";function n(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}var r=a(1113),i=a(308);t.b=n,t.a=function(){return new i.a(this._enter||this._groups.map(r.a),this._parents)},n.prototype={constructor:n,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}}},1113:function(e,t,a){"use strict";t.a=function(e){return new Array(e.length)}},1114:function(e,t,a){"use strict";function n(e){return function(){this.style.removeProperty(e)}}function r(e,t,a){return function(){this.style.setProperty(e,t,a)}}function i(e,t,a){return function(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(e):this.style.setProperty(e,n,a)}}function s(e,t){return e.style.getPropertyValue(t)||a.i(o.a)(e).getComputedStyle(e,null).getPropertyValue(t)}var o=a(1040);t.a=function(e,t,a){return arguments.length>1?this.each((null==t?n:"function"==typeof t?i:r)(e,t,null==a?"":a)):s(this.node(),e)}},1115:function(e,t,a){"use strict";function n(){return[]}t.a=function(e){return null==e?n:function(){return this.querySelectorAll(e)}}},1367:function(e,t,a){"use strict";var n=(a(1033),a(1369),a(1111),a(1370));a.d(t,"c",function(){return n.a});var r=(a(1034),a(1035),a(1371));a.d(t,"a",function(){return r.a});var i=a(1372);a.d(t,"b",function(){return i.a});a(308),a(1038),a(1115),a(1114),a(1399),a(1400),a(1040),a(1037)},1368:function(e,t,a){"use strict";t.a=function(e){return function(){return e}}},1369:function(e,t,a){"use strict";function n(){return new r}function r(){this._="@"+(++i).toString(36)}var i=0;r.prototype=n.prototype={constructor:r,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}}},1370:function(e,t,a){"use strict";var n=a(1039),r=a(1036);t.a=function(e){var t=a.i(n.a)();return t.changedTouches&&(t=t.changedTouches[0]),a.i(r.a)(e,t)}},1371:function(e,t,a){"use strict";var n=a(308);t.a=function(e){return"string"==typeof e?new n.a([[document.querySelector(e)]],[document.documentElement]):new n.a([[e]],n.b)}},1372:function(e,t,a){"use strict";var n=a(308);t.a=function(e){return"string"==typeof e?new n.a([document.querySelectorAll(e)],[document.documentElement]):new n.a([null==e?[]:e],n.b)}},1373:function(e,t,a){"use strict";var n=a(1033);t.a=function(e){var t="function"==typeof e?e:a.i(n.a)(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}},1374:function(e,t,a){"use strict";function n(e){return function(){this.removeAttribute(e)}}function r(e){return function(){this.removeAttributeNS(e.space,e.local)}}function i(e,t){return function(){this.setAttribute(e,t)}}function s(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function o(e,t){return function(){var a=t.apply(this,arguments);null==a?this.removeAttribute(e):this.setAttribute(e,a)}}function l(e,t){return function(){var a=t.apply(this,arguments);null==a?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}var c=a(1034);t.a=function(e,t){var u=a.i(c.a)(e);if(arguments.length<2){var d=this.node();return u.local?d.getAttributeNS(u.space,u.local):d.getAttribute(u)}return this.each((null==t?u.local?r:n:"function"==typeof t?u.local?l:o:u.local?s:i)(u,t))}},1375:function(e,t,a){"use strict";t.a=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}},1376:function(e,t,a){"use strict";function n(e){return e.trim().split(/^|\s+/)}function r(e){return e.classList||new i(e)}function i(e){this._node=e,this._names=n(e.getAttribute("class")||"")}function s(e,t){for(var a=r(e),n=-1,i=t.length;++n<i;)a.add(t[n])}function o(e,t){for(var a=r(e),n=-1,i=t.length;++n<i;)a.remove(t[n])}function l(e){return function(){s(this,e)}}function c(e){return function(){o(this,e)}}function u(e,t){return function(){(t.apply(this,arguments)?s:o)(this,e)}}i.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}},t.a=function(e,t){var a=n(e+"");if(arguments.length<2){for(var i=r(this.node()),s=-1,o=a.length;++s<o;)if(!i.contains(a[s]))return!1;return!0}return this.each(("function"==typeof t?u:t?l:c)(a,t))}},1377:function(e,t,a){"use strict";function n(e,t,a,n,r,i){for(var o,l=0,c=t.length,u=i.length;l<u;++l)(o=t[l])?(o.__data__=i[l],n[l]=o):a[l]=new s.b(e,i[l]);for(;l<c;++l)(o=t[l])&&(r[l]=o)}function r(e,t,a,n,r,i,o){var c,u,d,p={},_=t.length,h=i.length,f=new Array(_);for(c=0;c<_;++c)(u=t[c])&&(f[c]=d=l+o.call(u,u.__data__,c,t),d in p?r[c]=u:p[d]=u);for(c=0;c<h;++c)d=l+o.call(e,i[c],c,i),(u=p[d])?(n[c]=u,u.__data__=i[c],p[d]=null):a[c]=new s.b(e,i[c]);for(c=0;c<_;++c)(u=t[c])&&p[f[c]]===u&&(r[c]=u)}var i=a(308),s=a(1112),o=a(1368),l="$";t.a=function(e,t){if(!e)return E=new Array(this.size()),h=-1,this.each(function(e){E[++h]=e}),E;var s=t?r:n,l=this._parents,c=this._groups;"function"!=typeof e&&(e=a.i(o.a)(e));for(var u=c.length,d=new Array(u),p=new Array(u),_=new Array(u),h=0;h<u;++h){var f=l[h],m=c[h],g=m.length,E=e.call(f,f&&f.__data__,h,l),v=E.length,y=p[h]=new Array(v),k=d[h]=new Array(v);s(f,m,y,k,_[h]=new Array(g),E,t);for(var T,A,C=0,b=0;C<v;++C)if(T=y[C]){for(C>=b&&(b=C+1);!(A=k[b])&&++b<v;);T._next=A||null}}return d=new i.a(d,l),d._enter=p,d._exit=_,d}},1378:function(e,t,a){"use strict";t.a=function(e){return arguments.length?this.property("__data__",e):this.node().__data__}},1379:function(e,t,a){"use strict";function n(e,t,n){var r=a.i(s.a)(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function r(e,t){return function(){return n(this,e,t)}}function i(e,t){return function(){return n(this,e,t.apply(this,arguments))}}var s=a(1040);t.a=function(e,t){return this.each(("function"==typeof t?i:r)(e,t))}},1380:function(e,t,a){"use strict";t.a=function(e){for(var t=this._groups,a=0,n=t.length;a<n;++a)for(var r,i=t[a],s=0,o=i.length;s<o;++s)(r=i[s])&&e.call(r,r.__data__,s,i);return this}},1381:function(e,t,a){"use strict";t.a=function(){return!this.node()}},1382:function(e,t,a){"use strict";var n=a(1113),r=a(308);t.a=function(){return new r.a(this._exit||this._groups.map(n.a),this._parents)}},1383:function(e,t,a){"use strict";var n=a(308),r=a(1111);t.a=function(e){"function"!=typeof e&&(e=a.i(r.a)(e));for(var t=this._groups,i=t.length,s=new Array(i),o=0;o<i;++o)for(var l,c=t[o],u=c.length,d=s[o]=[],p=0;p<u;++p)(l=c[p])&&e.call(l,l.__data__,p,c)&&d.push(l);return new n.a(s,this._parents)}},1384:function(e,t,a){"use strict";function n(){this.innerHTML=""}function r(e){return function(){this.innerHTML=e}}function i(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}t.a=function(e){return arguments.length?this.each(null==e?n:("function"==typeof e?i:r)(e)):this.node().innerHTML}},1385:function(e,t,a){"use strict";function n(){return null}var r=a(1033),i=a(1038);t.a=function(e,t){var s="function"==typeof e?e:a.i(r.a)(e),o=null==t?n:"function"==typeof t?t:a.i(i.a)(t);return this.select(function(){return this.insertBefore(s.apply(this,arguments),o.apply(this,arguments)||null)})}},1386:function(e,t,a){"use strict";function n(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}t.a=function(){return this.each(n)}},1387:function(e,t,a){"use strict";var n=a(308);t.a=function(e){for(var t=this._groups,a=e._groups,r=t.length,i=a.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var c,u=t[l],d=a[l],p=u.length,_=o[l]=new Array(p),h=0;h<p;++h)(c=u[h]||d[h])&&(_[h]=c);for(;l<r;++l)o[l]=t[l];return new n.a(o,this._parents)}},1388:function(e,t,a){"use strict";t.a=function(){for(var e=this._groups,t=0,a=e.length;t<a;++t)for(var n=e[t],r=0,i=n.length;r<i;++r){var s=n[r];if(s)return s}return null}},1389:function(e,t,a){"use strict";t.a=function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}},1390:function(e,t,a){"use strict";t.a=function(){for(var e=this._groups,t=-1,a=e.length;++t<a;)for(var n,r=e[t],i=r.length-1,s=r[i];--i>=0;)(n=r[i])&&(s&&s!==n.nextSibling&&s.parentNode.insertBefore(n,s),s=n);return this}},1391:function(e,t,a){"use strict";function n(e){return function(){delete this[e]}}function r(e,t){return function(){this[e]=t}}function i(e,t){return function(){var a=t.apply(this,arguments);null==a?delete this[e]:this[e]=a}}t.a=function(e,t){return arguments.length>1?this.each((null==t?n:"function"==typeof t?i:r)(e,t)):this.node()[e]}},1392:function(e,t,a){"use strict";function n(){this.nextSibling&&this.parentNode.appendChild(this)}t.a=function(){return this.each(n)}},1393:function(e,t,a){"use strict";function n(){var e=this.parentNode;e&&e.removeChild(this)}t.a=function(){return this.each(n)}},1394:function(e,t,a){"use strict";var n=a(308),r=a(1038);t.a=function(e){"function"!=typeof e&&(e=a.i(r.a)(e));for(var t=this._groups,i=t.length,s=new Array(i),o=0;o<i;++o)for(var l,c,u=t[o],d=u.length,p=s[o]=new Array(d),_=0;_<d;++_)(l=u[_])&&(c=e.call(l,l.__data__,_,u))&&("__data__"in l&&(c.__data__=l.__data__),p[_]=c);return new n.a(s,this._parents)}},1395:function(e,t,a){"use strict";var n=a(308),r=a(1115);t.a=function(e){"function"!=typeof e&&(e=a.i(r.a)(e));for(var t=this._groups,i=t.length,s=[],o=[],l=0;l<i;++l)for(var c,u=t[l],d=u.length,p=0;p<d;++p)(c=u[p])&&(s.push(e.call(c,c.__data__,p,u)),o.push(c));return new n.a(s,o)}},1396:function(e,t,a){"use strict";t.a=function(){var e=0;return this.each(function(){++e}),e}},1397:function(e,t,a){"use strict";function n(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var r=a(308);t.a=function(e){function t(t,a){return t&&a?e(t.__data__,a.__data__):!t-!a}e||(e=n);for(var a=this._groups,i=a.length,s=new Array(i),o=0;o<i;++o){for(var l,c=a[o],u=c.length,d=s[o]=new Array(u),p=0;p<u;++p)(l=c[p])&&(d[p]=l);d.sort(t)}return new r.a(s,this._parents).order()}},1398:function(e,t,a){"use strict";function n(){this.textContent=""}function r(e){return function(){this.textContent=e}}function i(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}t.a=function(e){return arguments.length?this.each(null==e?n:("function"==typeof e?i:r)(e)):this.node().textContent}},1399:function(e,t,a){"use strict";a(1039),a(1036)},1400:function(e,t,a){"use strict";a(1039),a(1036)},1970:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(55),r=(a.n(n),a(54)),i=a.n(r),s=a(37),o=(a.n(s),a(15)),l=a.n(o),c=a(74),u=(a.n(c),a(73)),d=a.n(u),p=a(8),_=a.n(p),h=a(1),f=a.n(h),m=a(4),g=a.n(m),E=a(3),v=a.n(E),y=a(2),k=a.n(y),T=a(0),A=a.n(T),C=a(16),b=a(18),O=(a.n(b),a(298)),D=a(665),R=a(2028),w=function(e){function t(){return f()(this,t),v()(this,(t.__proto__||_()(t)).apply(this,arguments))}return k()(t,e),g()(t,[{key:"render",value:function(){var e=this.props,t=(e.createTask,e.upload,e.workbench),n=e.scriptTree,r=e.toggleCreateTask,s=e.toggleUpload,o=e.toggleCreateScript,c={width:"60px",height:"60px",marginTop:"25px"};return t.tabs.length?A.a.createElement(R.a,null):A.a.createElement(i.a,{className:"box-card txt-left",style:{paddingTop:"30px"}},A.a.createElement(d.a,{className:"operation-card"},A.a.createElement("div",{onClick:r,className:"operation-content"},A.a.createElement(D.a,{style:c,type:"add-file"})),A.a.createElement("p",{className:"txt-center"},"创建离线任务")),A.a.createElement(d.a,{className:"operation-card"},A.a.createElement("div",{onClick:s,className:"operation-content"},A.a.createElement(D.a,{style:c,type:"upload"})),A.a.createElement("p",{className:"txt-center"},"上传离线计算资源")),!a.i(b.isEmpty)(n)&&A.a.createElement(d.a,{className:"operation-card"},A.a.createElement("div",{onClick:o,className:"operation-content"},A.a.createElement(l.a,{style:c,type:"code-o"})),A.a.createElement("p",{className:"txt-center"},"创建脚本")))}}]),t}(T.Component),S=a.i(C.connect)(function(e){var t=e.offlineTask.modalShow,a=t.createTask,n=t.upload,r=e.offlineTask;return{createTask:a,upload:n,workbench:r.workbench,scriptTree:r.scriptTree}},function(e){return{toggleCreateTask:function(){e({type:O.o.TOGGLE_CREATE_TASK})},toggleUpload:function(){e({type:O.o.TOGGLE_UPLOAD})},toggleCreateScript:function(){e({type:O.o.TOGGLE_CREATE_SCRIPT})}}})(w);t.default=S;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(w,"Default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/default.js"),__REACT_HOT_LOADER__.register(S,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/default.js"))}()},1977:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(8),r=a.n(n),i=a(1),s=a.n(i),o=a(4),l=a.n(o),c=a(3),u=a.n(c),d=a(2),p=a.n(d),_=a(0),h=a.n(_),f=a(1970),m=a(2024),g=a(2027),E=a(2012),v=a(2009),y=a(2010),k=a(2011),T=a(2015),A=a(2018);a.d(t,"default",function(){return C});var C=function(e){function t(){return s()(this,t),u()(this,(t.__proto__||r()(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){return h.a.createElement("div",null,h.a.createElement(m.a,null),h.a.createElement(g.a,null),h.a.createElement(E.a,null),h.a.createElement(v.a,null),h.a.createElement(y.a,null),h.a.createElement(k.a,null),h.a.createElement(T.a,null),h.a.createElement(A.a,null),h.a.createElement(f.default,null))}}]),t}(h.a.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(C,"Offline","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/index.js")}()},1978:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(55),r=(a.n(n),a(54)),i=a.n(r),s=a(74),o=(a.n(s),a(73)),l=a.n(o),c=a(23),u=(a.n(c),a(22)),d=a.n(u),p=a(25),_=(a.n(p),a(28)),h=a.n(_),f=a(5),m=a.n(f),g=a(105),E=a.n(g),v=a(59),y=a.n(v),k=a(1364),T=(a.n(k),a(1363)),A=a.n(T),C=a(20),b=(a.n(C),a(19)),O=a.n(b),D=a(8),R=a.n(D),w=a(1),S=a.n(w),L=a(4),x=a.n(L),M=a(3),H=a.n(M),F=a(2),N=a.n(F),I=a(34),V=(a.n(I),a(33)),U=a.n(V),P=a(41),B=(a.n(P),a(40)),z=a.n(B),j=a(0),q=a.n(j),K=a(16),W=a(21),G=a(18),Y=(a.n(G),a(12)),Q=a(45),J=a(665),$=a(1041),Z=a(922),X=a(1116),ee=a(923),te=a(51),ae=a(2031),ne=z.a.confirm,re=U.a.Item,ie=function(e){function t(){var e,n,r,i;S()(this,t);for(var s=arguments.length,o=Array(s),l=0;l<s;l++)o[l]=arguments[l];return n=r=H()(this,(e=t.__proto__||R()(t)).call.apply(e,[this].concat(o))),r.state={publishDesc:"",showPublish:!1},r.saveTask=function(){var e;return(e=r).__saveTask__REACT_HOT_LOADER__.apply(e,arguments)},r.editorChange=function(){var e;return(e=r).__editorChange__REACT_HOT_LOADER__.apply(e,arguments)},r.debounceChange=a.i(G.debounce)(r.editorChange,300,{maxWait:2e3}),r.editorParamsChange=function(){var e;return(e=r).__editorParamsChange__REACT_HOT_LOADER__.apply(e,arguments)},r.startTask=function(){var e;return(e=r).__startTask__REACT_HOT_LOADER__.apply(e,arguments)},r.loadTreeData=function(){var e;return(e=r).__loadTreeData__REACT_HOT_LOADER__.apply(e,arguments)},r.closePublish=function(){var e;return(e=r).__closePublish__REACT_HOT_LOADER__.apply(e,arguments)},r.publishChange=function(){var e;return(e=r).__publishChange__REACT_HOT_LOADER__.apply(e,arguments)},r.renderPublish=function(){var e;return(e=r).__renderPublish__REACT_HOT_LOADER__.apply(e,arguments)},i=n,H()(r,i)}return N()(t,e),x()(t,[{key:"componentDidMount",value:function(){}},{key:"__saveTask__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.currentPage,a=e.dispatch,n=t.resourceList;n&&n.length>0&&(t.resourceIdList=n.map(function(e){return e.id})),t.lockVersion=t.readWriteLockVO.version,Q.a.saveTask(t).then(function(e){var n=function(e){O.a.success("任务保存成功"),e.notSynced=!1,a(Z.d(e)),t.taskType===te.b.MR&&a(X.b({id:e.parentId,catalogueType:te.f.TASK}))};if(1===e.code){var r=e.data.readWriteLockVO,i=r.result;0===i?n(e.data):1===i?ne({title:"锁定提醒",content:q.a.createElement("span",null,"文件正在被",r.lastKeepLockUserName,"编辑中，开始编辑时间为",Y.a.formatDateTime(r.gmtModified),"。 强制保存可能导致",r.lastKeepLockUserName,"对文件的修改无法正常保存！"),okText:"确定保存",okType:"danger",cancelText:"取消",onOk:function(){var e=function(e){1===e.code&&n(e.data)};Q.a.forceUpdateTask(t).then(e)}}):2===i&&ne({title:"保存警告",content:q.a.createElement("span",null,"文件已经被",r.lastKeepLockUserName,"编辑过，编辑时间为",Y.a.formatDateTime(r.gmtModified),"。 点击确认按钮会",q.a.createElement(A.a,{color:"orange"},"覆盖"),"您本地的代码，请您提前做好备份！"),okText:"确定覆盖",okType:"danger",cancelText:"取消",onOk:function(){var e={id:t.id,lockVersion:r.version};Q.a.getTask(e).then(function(e){if(1===e.code){var t=e.data;t.merged=!0,n(t)}})}})}})}},{key:"__editorChange__REACT_HOT_LOADER__",value:function(e,t){var n=this.props,r=n.currentPage,i=n.dispatch;r=a.i(G.cloneDeep)(r),e!==t&&(r.merged="boolean"==typeof e,r.sqlText=t,r.notSynced=!0,i(Z.d(r)))}},{key:"__editorParamsChange__REACT_HOT_LOADER__",value:function(e,t){var a=this.props,n=a.currentPage,r=a.dispatch;e!==t&&(n.taskParams=t,r(Z.d(n)))}},{key:"__startTask__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.currentPage,a=e.dispatch;Q.a.startTask({id:t.id,isRestoration:0}).then(function(e){1===e.code&&(t.status=10,a(Z.d(y()({},t))),O.a.success("任务已经成功提交！"))})}},{key:"autoSaveTask",value:function(){var e=this;this.timerID=setInterval(function(){if("edit"===e.state.editorState){var t=e.props.currentPage;Q.a.saveTask(t).then(function(e){1===e.code&&O.a.success("任务已自动保存")})}},3e4)}},{key:"__loadTreeData__REACT_HOT_LOADER__",value:function(e){var t=this.props.dispatch,a=e.props.data;return new E.a(function(e){t(X.b(a)),e()})}},{key:"__closePublish__REACT_HOT_LOADER__",value:function(){this.setState({publishDesc:"",showPublish:!1})}},{key:"submitTab",value:function(){var e=this,t=this.props,n=t.currentPage,r=t.dispatch,i=this.state.publishDesc,s=a.i(G.cloneDeep)(n);return i?i.length>200?(O.a.error("备注信息不可超过200个字符！"),!1):(s.publishDesc=i,s.preSave=!0,s.submitStatus=1,void Z.e(s).then(function(t){e.closePublish(),t&&(O.a.success("发布成功！"),Q.a.getTask({id:n.id}).then(function(e){if(1===e.code){var t=e.data;t.merged=!0,t.notSynced=!1,r(Z.d(t))}}))})):(O.a.error("发布备注不可为空！"),!1)}},{key:"__publishChange__REACT_HOT_LOADER__",value:function(e){this.setState({publishDesc:e.target.value})}},{key:"__renderPublish__REACT_HOT_LOADER__",value:function(){var e=this.props.user,t=this.state.publishDesc;return q.a.createElement(z.a,{wrapClassName:"vertical-center-modal",title:"发布任务",style:{height:"600px",width:"600px"},visible:this.state.showPublish,onCancel:this.closePublish,onOk:this.submitTab.bind(this),cancelText:"关闭"},q.a.createElement(U.a,null,q.a.createElement(re,m()({},te.i,{label:"发布人",hasFeedback:!0}),q.a.createElement("span",null,e.userName)),q.a.createElement(re,m()({},te.i,{label:q.a.createElement("span",{className:"ant-form-item-required"},"备注"),hasFeedback:!0}),q.a.createElement(h.a,{type:"textarea",value:t,name:"publishDesc",rows:4,onChange:this.publishChange}))))}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.currentPage,r=n.notSynced;return q.a.createElement(i.a,{className:"task-editor"},q.a.createElement("header",{className:"toolbar bd-bottom clear"},q.a.createElement(l.a,{className:"left"},q.a.createElement(d.a,{onClick:function(){a($.b(ee.d.ADD_TASK_VISIBLE))},title:"创建任务"},q.a.createElement(J.a,{className:"my-icon",type:"focus"})," 新建任务"),q.a.createElement(d.a,{disabled:n.invalid,onClick:this.saveTask,title:"保存任务"},q.a.createElement(J.a,{className:"my-icon",type:"save"}),"保存")),q.a.createElement(l.a,{className:"right"},q.a.createElement(d.a,{disabled:r,onClick:function(){e.setState({showPublish:!0})}},q.a.createElement(J.a,{className:"my-icon",type:"fly"})," 发布"),q.a.createElement(W.Link,{to:"/operation/realtime?tname="+n.name},q.a.createElement(d.a,null,q.a.createElement(J.a,{className:"my-icon",type:"goin"})," 运维")))),q.a.createElement(ae.a,m()({},this.props,{ayncTree:this.loadTreeData,editorParamsChange:this.editorParamsChange,editorChange:this.debounceChange})),this.renderPublish())}}]),t}(j.Component),se=a.i(K.connect)(function(e){var t=e.realtimeTask,a=t.resources,n=t.pages;return{currentPage:t.currentPage,pages:n,resources:a,user:e.user}})(ie);t.default=se;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ne,"confirm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/index.js"),__REACT_HOT_LOADER__.register(re,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/index.js"),__REACT_HOT_LOADER__.register(ie,"TaskIndex","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/index.js"),__REACT_HOT_LOADER__.register(se,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/index.js"))}()},1980:function(e,t,a){"use strict";var n=a(92),r=(a.n(n),a(81)),i=a.n(r),s=a(8),o=a.n(s),l=a(1),c=a.n(l),u=a(4),d=a.n(u),p=a(3),_=a.n(p),h=a(2),f=a.n(h),m=a(0),g=a.n(m);a.d(t,"a",function(){return E});var E=function(e){function t(e){return c()(this,t),_()(this,(t.__proto__||o()(t)).call(this,e))}return f()(t,e),d()(t,[{key:"render",value:function(){return this.props.notSynced?g.a.createElement(i.a,{title:"修改已保存至本地存储但尚未同步到服务器，你可以点击上面的保存按钮立即同步。"},g.a.createElement("span",{style:{display:"inline-block",marginRight:8,borderRadius:"50%",border:"4px solid ",borderColor:"#EF5350"}})):g.a.createElement("span",{style:{display:"inline-block",marginRight:8,borderRadius:"50%",border:"4px solid ",borderColor:"#00A755"}})}}]),t}(g.a.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(E,"SyncBadge","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/components/sync-badge/index.js")}()},1981:function(e,t,a){"use strict";var n=a(23),r=(a.n(n),a(22)),i=a.n(r),s=a(310),o=(a.n(s),a(309)),l=a.n(o),c=a(56),u=(a.n(c),a(52)),d=a.n(u),p=a(5),_=a.n(p),h=a(1988),f=(a.n(h),a(1987)),m=a.n(f),g=a(25),E=(a.n(g),a(28)),v=a.n(E),y=a(8),k=a.n(y),T=a(1),A=a.n(T),C=a(4),b=a.n(C),O=a(3),D=a.n(O),R=a(2),w=a.n(R),S=a(27),L=(a.n(S),a(26)),x=a.n(L),M=a(34),H=(a.n(M),a(33)),F=a.n(H),N=a(0),I=a.n(N),V=a(16),U=a(298),P=(a(45),a(1362)),B=a(354),z=F.a.Item,j=x.a.Option,q=function(e){function t(e){A()(this,t);var a=D()(this,(t.__proto__||k()(t)).call(this,e));return a.state={isRecord:!1},a.onLifeDayChange=function(){return a.__onLifeDayChange__REACT_HOT_LOADER__.apply(a,arguments)},a}return w()(t,e),b()(t,[{key:"__onLifeDayChange__REACT_HOT_LOADER__",value:function(e){this.props.changeChannelSetting({lifeDay:e})}},{key:"render",value:function(){for(var e=this,t=this.props.form.getFieldDecorator,a=this.props,n=a.setting,r=(a.changeChannelSetting,a.navtoStep),s=(a.form,{labelCol:{sm:{span:6}},wrapperCol:{sm:{span:14}}}),o=[],c=[],u=1;u<=20;u++)o.push(I.a.createElement(j,{value:""+u,key:u},u,"MB/s"));for(var p=1;p<=5;p++)c.push(I.a.createElement(j,{value:""+p,key:p},p));return I.a.createElement("div",{className:"g-step4"},I.a.createElement(F.a,null,I.a.createElement(z,_()({},s,{label:"作业速率上限",style:{height:"32px"}}),t("speed",{rules:[{required:!0}],initialValue:""+n.speed})(I.a.createElement(m.a,{dataSource:o,optionLabelProp:"value"},I.a.createElement(v.a,{suffix:"MB/s"}))),I.a.createElement(P.a,{doc:"jobSpeedLimit"})),I.a.createElement(z,_()({},s,{label:"作业并发数",style:{height:"32px"}}),t("channel",{rules:[{required:!0}],initialValue:""+n.channel})(I.a.createElement(m.a,{dataSource:c,optionLabelProp:"value"})),I.a.createElement(P.a,{doc:"jobConcurrence"})),I.a.createElement(z,_()({},s,{label:"错误记录管理",className:"txt-left"}),t("isSaveDirty",{rules:[],initialValue:n.isSaveDirty})(I.a.createElement(d.a,{checked:n.isSaveDirty}," 记录保存 ")),I.a.createElement(P.a,{doc:"recordDirtyData"})),n.isSaveDirty?I.a.createElement("div",null,I.a.createElement(z,_()({},s,{label:"脏数据写入hive表"}),t("tableName",{rules:[],initialValue:n.tableName||null})(I.a.createElement(v.a,{placeholder:"默认系统分配"})),I.a.createElement(P.a,{doc:"recordDirtyData"})),I.a.createElement(z,_()({},s,{label:"脏数据存储生命周期",className:"txt-left"}),t("lifeDay",{rules:[{required:!0,message:"生命周期不可为空！"}],initialValue:n.lifeDay||90})(I.a.createElement(v.a,{type:"hidden"})),I.a.createElement(B.a,{value:n.lifeDay,width:120,onChange:this.onLifeDayChange}),I.a.createElement(P.a,{doc:"recordDirtyData"}))):"",I.a.createElement(z,_()({},s,{label:"错误记录数超过"}),t("record",{rules:[],initialValue:n.record})(I.a.createElement(l.a,{style:{float:"left"}})),I.a.createElement("span",{style:{float:"left"}},"条, 任务自动结束",I.a.createElement(P.a,{doc:"errorCount",style:{position:"initial",marginLeft:"6px"}}))),I.a.createElement(z,_()({},s,{label:"错误记录比例配置"}),I.a.createElement("span",{style:{float:"left"}},"任务执行结束后，统计错误记录占比，大于"),t("percentage",{rules:[],initialValue:n.percentage})(I.a.createElement(l.a,{style:{float:"left"}})),I.a.createElement("span",{style:{float:"left"}},"%时，任务置为失败"),I.a.createElement(P.a,{doc:"errorPercentConfig",style:{position:"initial",marginLeft:"6px"}}))),!this.props.readonly&&I.a.createElement("div",{className:"steps-action"},I.a.createElement(i.a,{style:{marginRight:8},onClick:function(){return e.prev(r)}},"上一步"),I.a.createElement(i.a,{type:"primary",onClick:function(){return e.next(r)}},"下一步")))}},{key:"prev",value:function(e){e.call(null,2)}},{key:"next",value:function(e){var t=this.props,a=t.changeChannelSetting;t.form.validateFields(function(t,n){t||(e.call(null,4),a(n))})}}]),t}(I.a.Component),K=F.a.create({onValuesChange:function(e,t){var a=e.changeChannelSetting,n=e.setting;n.isSaveDirty&&!n.lifeDay&&(t.lifeDay=90),n.isSaveDirty||(t.tableName=null),a(t)}})(q),W=function(e){function t(){return A()(this,t),D()(this,(t.__proto__||k()(t)).apply(this,arguments))}return w()(t,e),b()(t,[{key:"render",value:function(){return I.a.createElement("div",null,I.a.createElement(K,this.props))}}]),t}(I.a.Component),G=function(e){var t=e.offlineTask.dataSync;return{setting:t.setting,targetMap:t.targetMap}},Y=function(e){return{changeChannelSetting:function(t){e({type:U.g.CHANGE_CHANNEL_FIELDS,payload:t}),e({type:U.h.MAKE_TAB_DIRTY})}}},Q=a.i(V.connect)(G,Y)(W);t.a=Q;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(z,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"),__REACT_HOT_LOADER__.register(j,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"),__REACT_HOT_LOADER__.register(q,"ChannelForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"),__REACT_HOT_LOADER__.register(K,"ChannelFormWrap","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"),__REACT_HOT_LOADER__.register(W,"Channel","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"),__REACT_HOT_LOADER__.register(G,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"),__REACT_HOT_LOADER__.register(Y,"mapDispatch","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"),__REACT_HOT_LOADER__.register(Q,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"))}()},1982:function(e,t,a){"use strict";function n(e){return ae.n.HDFS===parseInt(e,10)}function r(e){return ae.a.indexOf(parseInt(e,10))>-1}function i(e,t){if(a.i(J.isObject)(e)&&a.i(J.isObject)(t))return a.i(J.isEqual)(e,t);if(a.i(J.isObject)(e)&&!a.i(J.isObject)(t)){return(e.key||e.index)===t}if(!a.i(J.isObject)(e)&&a.i(J.isObject)(t)){return e===(t.key||t.index)}return e===t}var s=a(42),o=a.n(s),l=a(20),c=(a.n(l),a(19)),u=a.n(c),d=a(55),p=(a.n(d),a(54)),_=a.n(p),h=a(23),f=(a.n(h),a(22)),m=a.n(f),g=a(74),E=(a.n(g),a(73)),v=a.n(E),y=a(25),k=(a.n(y),a(28)),T=a.n(k),A=a(92),C=(a.n(A),a(81)),b=a.n(C),O=a(37),D=(a.n(O),a(15)),R=a.n(D),w=a(299),S=a.n(w),L=a(8),x=a.n(L),M=a(1),H=a.n(M),F=a(4),N=a.n(F),I=a(3),V=a.n(I),U=a(2),P=a.n(U),B=a(27),z=(a.n(B),a(26)),j=a.n(z),q=a(34),K=(a.n(q),a(33)),W=a.n(K),G=a(0),Y=a.n(G),Q=a(16),J=a(18),$=(a.n(J),a(1367)),Z=a(1402),X=a(350),ee=a(12),te=a(45),ae=a(51),ne=a(2007),re=a(2005),ie=a(2006),se=W.a.Item,oe=j.a.Option,le={cf:"-",key:"rowkey",type:"STRING"},ce=function(e){function t(e){H()(this,t);var a=V()(this,(t.__proto__||x()(t)).call(this,e));return a.resize=function(){return a.__resize__REACT_HOT_LOADER__.apply(a,arguments)},a.initData=function(){return a.__initData__REACT_HOT_LOADER__.apply(a,arguments)},a.loadColumnFamily=function(){return a.__loadColumnFamily__REACT_HOT_LOADER__.apply(a,arguments)},a.hbaseRowKeyChange=function(){return a.__hbaseRowKeyChange__REACT_HOT_LOADER__.apply(a,arguments)},a.renderKeyModal=function(){return a.__renderKeyModal__REACT_HOT_LOADER__.apply(a,arguments)},a.renderBatchModal=function(){return a.__renderBatchModal__REACT_HOT_LOADER__.apply(a,arguments)},a.checkHBaseRowKey=function(){return a.__checkHBaseRowKey__REACT_HOT_LOADER__.apply(a,arguments)},a.copySourceCols=function(){return a.__copySourceCols__REACT_HOT_LOADER__.apply(a,arguments)},a.batchTextChange=function(){return a.__batchTextChange__REACT_HOT_LOADER__.apply(a,arguments)},a.batchSourceTextChange=function(){return a.__batchSourceTextChange__REACT_HOT_LOADER__.apply(a,arguments)},a.doBatchImport=function(){return a.__doBatchImport__REACT_HOT_LOADER__.apply(a,arguments)},a.hideBatchImportModal=function(){return a.__hideBatchImportModal__REACT_HOT_LOADER__.apply(a,arguments)},a.hideBatchSourceModal=function(){return a.__hideBatchSourceModal__REACT_HOT_LOADER__.apply(a,arguments)},a.importFields=function(){return a.__importFields__REACT_HOT_LOADER__.apply(a,arguments)},a.importSourceFields=function(){return a.__importSourceFields__REACT_HOT_LOADER__.apply(a,arguments)},a.doBatchAddSourceFields=function(){return a.__doBatchAddSourceFields__REACT_HOT_LOADER__.apply(a,arguments)},a.initEditKeyRow=function(){return a.__initEditKeyRow__REACT_HOT_LOADER__.apply(a,arguments)},a.doAddkeyRow=function(){return a.__doAddkeyRow__REACT_HOT_LOADER__.apply(a,arguments)},a.doEditKeyRow=function(){return a.__doEditKeyRow__REACT_HOT_LOADER__.apply(a,arguments)},a.hideKeyModal=function(){return a.__hideKeyModal__REACT_HOT_LOADER__.apply(a,arguments)},a.state={h:40,w:230,W:450,padding:10,rowMap:!1,nameMap:!1,keyModalVisible:!1,visibleConst:!1,keyModal:{operation:"add",isReader:!0,editField:"",position:-1,source:"",fileType:"orc"},batchModal:{visible:!1,batchText:""},batchSourceModal:{visible:!1,batchText:""},sourceColumnFamily:"",targetColumnFamily:""},a}return P()(t,e),N()(t,[{key:"getCanvasW",value:function(){var e=450,t=document.querySelector(".steps-content");if(t){var a=t.getBoundingClientRect().width/6*5;a>e&&(e=a)}return e}},{key:"componentDidMount",value:function(){this.$canvas=a.i($.a)(this.canvas),this.$activeLine=a.i($.a)("#activeLine"),this.setState({W:this.getCanvasW()}),this.drawSvg(),this.listenResize(),this.loadColumnFamily(),this.initData()}},{key:"__resize__REACT_HOT_LOADER__",value:function(){this.setState({W:this.getCanvasW()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize,!1)}},{key:"listenResize",value:function(){window.addEventListener&&window.addEventListener("resize",this.resize,!1)}},{key:"componentDidUpdate",value:function(){this.$canvas.selectAll(".dl, .dr, .lines").remove(),this.drawSvg()}},{key:"drawSvg",value:function(){this.renderDags(),this.renderLines(),this.bindEvents()}},{key:"renderDags",value:function(){var e=this.state,t=e.w,a=e.h,n=e.W,r=e.padding,i=this.props,s=i.targetCol,o=i.sourceCol;i.keymap;this.$canvas.append("g").attr("class","dl").selectAll("g").data(o).enter().append("g").attr("class","col-dag-l").append("circle").attr("class","dag-circle").attr("cx",function(e,t){return r}).attr("cy",function(e,t){return a*(t+1.5)}).attr("r",5).attr("stroke-width",2).attr("stroke","#fff").attr("fill","#2491F7"),this.$canvas.append("g").attr("class","dr").selectAll("g").data(s).enter().append("g").attr("class","col-dag-r").append("circle").attr("class","dag-circle").attr("cx",function(e,a){return n-2*t-r}).attr("cy",function(e,t){return a*(t+1.5)}).attr("r",5).attr("stroke-width",2).attr("stroke","#fff").attr("fill","#2491F7")}},{key:"renderLines",value:function(){var e=this.state,t=e.w,n=e.h,s=e.W,o=e.padding,l=this.props,c=(l.targetCol,l.sourceCol,l.keymap),u=l.sourceSrcType,d=(l.sourceFileType,l.targetSrcType),p=(l.targetFileType,c.source),_=c.target,h=a.i($.b)(".col-dag-l"),f=a.i($.b)(".col-dag-r"),m=[],g=function(e,t){return r(u)?e.key===t:i(e,t)},E=function(e,t){return r(d)?e.key===t:i(e,t)};p.forEach(function(e,a){h.each(function(r,i){var l=void 0,c=void 0,u=void 0,d=void 0;g(r,e)&&(l=o,c=(i+1.5)*n,f.each(function(r,i){E(r,_[a])&&(u=s-2*t-o,d=(i+1.5)*n,m.push({s:{x:l,y:c},e:{x:u,y:d},dl:e,dr:_[a]}))}))})}),this.$canvas.append("g").attr("class","lines").selectAll("g").data(m).enter().append("g").attr("class","mapline").append("line").attr("x1",function(e){return e.s.x}).attr("y1",function(e){return e.s.y}).attr("x2",function(e){return e.e.x}).attr("y2",function(e){return e.e.y}).attr("stroke","#2491F7").attr("stroke-width",2).attr("marker-end","url(#arrow)")}},{key:"bindEvents",value:function(){var e=this,t=this.state,n=t.w,i=t.h,s=t.W,o=t.padding,l=this.props,c=l.addLinkedKeys,u=l.delLinkedKeys,d=l.sourceSrcType,p=l.sourceFileType,_=l.targetSrcType,h=l.targetFileType,f=this.$activeLine,m=a.i($.b)(".col-dag-l"),g=!1,E=void 0,v=void 0;m.on("mousedown",function(e,t,a){var n=o,r=(t+1.5)*i;f.attr("x1",n).attr("y1",r).attr("x2",n).attr("y2",r),E=e,g=!0}),this.$canvas.on("mousemove",function(){if(g){var t=a.i($.c)(e.$canvas.node());f.attr("x2",t[0]).attr("y2",t[1])}}).on("mouseup",function(){if(g){var t=a.i($.c)(e.$canvas.node()),l=S()(t,2),u=l[0],p=l[1];if(u<s-2*n-o)e.resetActiveLine();else{var h=Math.floor(p/i)-1;a.i($.b)(".col-dag-r").each(function(e,t){t===h&&(v=e)})}}E&&v&&(c({source:r(d)?E.key:E,target:r(_)?v.key:v}),e.resetActiveLine()),g=!1}),this.$canvas.selectAll(".mapline").on("mouseover",function(e,t,n){a.i($.a)(n[t]).select("line").attr("stroke-width",3).attr("stroke","#2491F7")}).on("mouseout",function(e,t,n){a.i($.a)(n[t]).select("line").attr("stroke-width",2).attr("stroke","#2491F7")}).on("click",function(e,t,a){u({source:e.dl,target:e.dr,sourceSrcType:d,sourceFileType:p,targetSrcType:_,targetFileType:h})})}},{key:"resetActiveLine",value:function(){this.$activeLine.attr("x1",-10).attr("y1",-10).attr("x2",-10).attr("y2",-10)}},{key:"__initData__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.sourceMap,a=e.sourceSrcType,n=e.addSourceKeyRow;a===ae.n.HBASE&&(t.column&&0!==t.column.length||n(le))}},{key:"__loadColumnFamily__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.sourceMap,a=e.targetMap,n=e.sourceSrcType,r=e.targetSrcType,i=this,s=function(e,t){te.a.getHBaseColumnFamily(e).then(function(e){1===e.code&&t(e.data)})};n===ae.n.HBASE&&s({sourceId:t.sourceId,tableName:t.type.table},function(e){i.setState({sourceColumnFamily:e})}),r===ae.n.HBASE&&s({sourceId:a.sourceId,tableName:a.type.table},function(e){i.setState({targetColumnFamily:e})})}},{key:"__hbaseRowKeyChange__REACT_HOT_LOADER__",value:function(e){var t=ee.a.trim(e.target.value),a=this.props,n=a.handleTargetMapChange,r=a.targetMap;t&&(r.rowkey=t,n(r))}},{key:"renderSource",value:function(){var e=this,t=this.state,n=t.w,r=t.h,i=(t.W,t.H,t.padding),s=this.props,o=(s.targetCol,s.sourceCol),l=(s.keymap,s.sourceSrcType),c=s.sourceFileType,u=s.removeSourceKeyRow,d=s.readonly,p={left:i,top:i,width:n,height:r},_=function(t,n,r){var i=Y.a.createElement("div",{className:"remove-cell",onClick:function(){return u(n,r)}},Y.a.createElement(b.a,{title:"删除当前列"},Y.a.createElement(R.a,{type:"minus"})));switch(t){case ae.n.HDFS:var s=n?a.i(Z.a)(void 0!==n.index?n.index:"'"+n.key+"'"):"索引位";return Y.a.createElement("div",null,Y.a.createElement("div",{className:"cell",title:s},s),Y.a.createElement("div",{className:"cell"},n?n.value?"常量":n.type.toUpperCase():"类型"),"orc"!==c?Y.a.createElement("div",{className:"cell"},n?i:"操作"):"");case ae.n.HBASE:var o=n?a.i(Z.a)(n.key):"列名/行健",l=n?n.cf:"列族";return Y.a.createElement("div",{className:"four-cells"},Y.a.createElement("div",{className:"cell",title:l},l),Y.a.createElement("div",{className:"cell",title:o},o),Y.a.createElement("div",{className:"cell"},n?n.type.toUpperCase():"类型"),Y.a.createElement("div",{className:"cell"},n?Y.a.createElement("div",null,"rowkey"===n.key?"":i,Y.a.createElement("div",{className:"edit-cell",onClick:function(){e.initEditKeyRow(!0,t,null,n,r)}},Y.a.createElement(b.a,{title:"编辑当前列"},Y.a.createElement(R.a,{type:"edit"})))):"操作"));case ae.n.MAXCOMPUTE:case ae.n.HIVE:var d=n?a.i(Z.a)(n.value?"'"+n.key+"'":n.key):"字段名称";return Y.a.createElement("div",null,Y.a.createElement("div",{className:"cell"},d),Y.a.createElement("div",{className:"cell"},n?n.value?"常量":n.type.toUpperCase():"类型"),Y.a.createElement("div",{className:"cell"},n?n.value?i:"":"操作"));case ae.n.FTP:var p=n?a.i(Z.a)(void 0!==n.index?n.index:"'"+n.key+"'"):"字段序号";return Y.a.createElement("div",null,Y.a.createElement("div",{className:"cell",title:p},p),Y.a.createElement("div",{className:"cell"},n?n.value?"常量":n.type.toUpperCase():"类型"),Y.a.createElement("div",{className:"cell"},n?i:"操作"));default:return Y.a.createElement("div",null,Y.a.createElement("div",{className:"cell",title:name},n?a.i(Z.a)(n.key):"字段名称"),Y.a.createElement("div",{className:"cell"},n?n.type.toUpperCase():"类型"))}},h=function(t){if(!d){var a="",s=Y.a.createElement("span",{onClick:function(){e.setState({visibleConst:!0})}},"+添加常量");switch(t){case ae.n.MAXCOMPUTE:case ae.n.HIVE:a=Y.a.createElement("div",null,s);break;case ae.n.HBASE:a=Y.a.createElement("div",null,Y.a.createElement("span",{onClick:e.initAddKeyRow.bind(e,!0,c)},"+添加字段")," ",Y.a.createElement("span",{onClick:e.importSourceFields},"批量添加"));break;case ae.n.HDFS:a="orc"!==c?Y.a.createElement("div",null,Y.a.createElement("span",{onClick:e.initAddKeyRow.bind(e,!0,c)},"+添加字段")," ",s," ",Y.a.createElement("span",{onClick:e.importSourceFields},"批量添加")):null;break;case ae.n.FTP:a=Y.a.createElement("div",null,Y.a.createElement("span",{onClick:e.initAddKeyRow.bind(e,!0,c)},"+添加字段")," ",s," ",Y.a.createElement("span",{onClick:e.importSourceFields},"批量添加"));break;default:a=null}return Y.a.createElement("div",{className:"m-col footer pa",style:{left:i,top:i+r*(o.length+1),width:n,height:r,zIndex:100}},a)}return""};return Y.a.createElement("div",{className:"sourceLeft"},Y.a.createElement("div",{className:"m-col title pa",style:p},_(l)),o.map(function(e,t){return Y.a.createElement("div",{style:{width:n,height:r,left:i,top:i+r*(t+1)},className:"m-col pa",key:"sourceLeft-"+t},_(l,e,t))}),h(l))}},{key:"renderTarget",value:function(){var e=this,t=this.state,n=t.w,r=t.h,i=t.W,s=(t.H,t.padding),o=this.props,l=o.targetCol,c=o.sourceCol,u=(o.keymap,o.readonly),d=o.targetMap,p=o.targetFileType,_=o.removeTargetKeyRow,h=o.sourceSrcType,f=o.targetSrcType,m={left:i-(s+n),top:s,width:n,height:r},g=function(t,n,r){var i=Y.a.createElement("div",null,Y.a.createElement("div",{className:"remove-cell",onClick:function(){return _(n,r)}},Y.a.createElement(b.a,{title:"删除当前列"},Y.a.createElement(R.a,{type:"minus"}))),Y.a.createElement("div",{className:"edit-cell",onClick:function(){e.initEditKeyRow(!1,p,c[r],n,r)}},Y.a.createElement(b.a,{title:"编辑当前列"},Y.a.createElement(R.a,{type:"edit"}))));switch(t){case ae.n.HDFS:return Y.a.createElement("div",null,Y.a.createElement("div",{className:"cell"},n?a.i(Z.a)(n.key):"字段名称"),Y.a.createElement("div",{className:"cell"},n?n.type.toUpperCase():"类型"),Y.a.createElement("div",{className:"cell"},n?i:"操作"));case ae.n.HBASE:return Y.a.createElement("div",{className:"four-cells"},Y.a.createElement("div",{className:"cell"},n?n.cf:"列族"),Y.a.createElement("div",{className:"cell"},n?a.i(Z.a)(n.key):"列名"),Y.a.createElement("div",{className:"cell"},n?n.type.toUpperCase():"类型"),Y.a.createElement("div",{className:"cell"},n?i:"操作"));case ae.n.FTP:return Y.a.createElement("div",null,Y.a.createElement("div",{className:"cell"},n?a.i(Z.a)(n.key):"字段名称"),Y.a.createElement("div",{className:"cell"},n?n.type.toUpperCase():"类型"),Y.a.createElement("div",{className:"cell"},n?i:"操作"));default:return Y.a.createElement("div",null,Y.a.createElement("div",{className:"cell"},n?a.i(Z.a)(n.key):"字段名称"),Y.a.createElement("div",{className:"cell"},n?n.type.toUpperCase():"类型"))}},E=function(t){if(!u){var a="";switch(t){case ae.n.HBASE:a=Y.a.createElement("div",null,Y.a.createElement("span",{onClick:e.initAddKeyRow.bind(e,!1,p)},"+添加字段")," ",Y.a.createElement("span",{onClick:e.importFields},"批量添加"),Y.a.createElement("div",{className:"m-col"},"rowkey: ",Y.a.createElement(T.a,{style:{width:"160px"},defaultValue:d.type&&d.type.rowkey||"",placeholder:h===ae.n.HBASE?"$(colFamily1:colName1)":"$(colName)",onChange:e.hbaseRowKeyChange})));break;case ae.n.HDFS:case ae.n.FTP:a=Y.a.createElement("div",null,Y.a.createElement("span",{onClick:e.initAddKeyRow.bind(e,!1,p)},"+添加字段")," ",Y.a.createElement("span",{onClick:e.importFields},"批量添加"));break;default:a=null}return a?Y.a.createElement("div",{className:"m-col footer pa",style:{top:s+r*(l.length+1),left:i-(s+n),width:n,height:r,zIndex:100}},a):""}return""};return Y.a.createElement("div",{className:"targetRight"},Y.a.createElement("div",{className:"m-col title  pa",style:m},g(f)),l.map(function(e,t){return Y.a.createElement("div",{key:"targetRight-"+t,className:"m-col pa",style:{width:n,height:r,top:s+r*(t+1),left:i-(s+n)}},g(f,e,t))}),E(f))}},{key:"__renderKeyModal__REACT_HOT_LOADER__",value:function(){var e=this.state,t=e.keyModal,a=e.keyModalVisible,n=e.sourceColumnFamily,r=e.targetColumnFamily,i=t.operation,s=t.isReader,o=this.props,l=o.sourceSrcType,c=o.targetSrcType,u=t.isReader?l:c,d=this.doAddkeyRow,p="添加HDFS字段";return"add"===i?u===ae.n.HBASE?p="添加HBase字段":u===ae.n.FTP&&(p="添加FTP字段"):"edit"===i&&(d=this.doEditKeyRow,p="修改HDFS字段",u===ae.n.HBASE?p="修改HBase字段":u===ae.n.FTP&&(p="添加FTP字段")),Y.a.createElement(ne.a,{title:p,visible:a,keyModal:t,dataType:u,sourceColumnFamily:n,targetColumnFamily:r,onOk:d,onCancel:this.hideKeyModal,key:s?"source-"+u+"-"+l:"target-"+u+"-"+c})}},{key:"__renderBatchModal__REACT_HOT_LOADER__",value:function(){var e=this.state,t=e.batchModal,a=e.batchSourceModal,n=e.sourceColumnFamily,r=e.targetColumnFamily,i=this.props,s=i.sourceSrcType,o=i.targetSrcType,l=void 0,c=void 0,u=void 0,d=void 0;switch(s){case ae.n.FTP:case ae.n.HDFS:l="0: STRING, 1: INTEGER,...",c="index: type, index: type";break;case ae.n.HBASE:l="cf1: field1: STRING, cf1: field2: INTEGER,...",c="columnFamily: fieldName: type,"}switch(o){case ae.n.FTP:case ae.n.HDFS:u="field1: STRING, field2: INTEGER,...",d="fieldName: type, fieldName: type";break;case ae.n.HBASE:u=l,d=c}return[Y.a.createElement(re.a,{key:"sourceBatchAdd",title:"批量添加源表字段",desc:c,columnFamily:n,placeholder:l,visible:a.visible,value:a.batchText,onOk:this.doBatchAddSourceFields,onCancel:this.hideBatchSourceModal,onChange:this.batchSourceTextChange}),Y.a.createElement(re.a,{key:"targetBatchAdd",title:"批量添加目标字段",desc:d,columnFamily:r,placeholder:u,visible:t.visible,value:t.batchText,onOk:this.doBatchImport,onCancel:this.hideBatchImportModal,onChange:this.batchTextChange})]}},{key:"render",value:function(){var e=this,t=this.state,a=t.w,r=t.h,i=t.W,s=t.padding,o=t.visibleConst,l=this.props,c=l.targetCol,u=l.sourceCol,d=l.keymap,p=l.sourceSrcType,h=(l.sourceFileType,l.navtoStep),f=l.targetSrcType,g=l.addSourceKeyRow,E=r*(Math.max(c.length,u.length)+1);d.source,d.target;return Y.a.createElement("div",null,Y.a.createElement("p",{style:{fontSize:12,color:"#ccc",marginTop:-20}},"您要配置来源表与目标表的字段映射关系，通过连线将待同步的字段左右相连，也可以通过同行映射、同名映射批量完成映射"),Y.a.createElement(_.a,null,Y.a.createElement(v.a,{span:"20"},Y.a.createElement("div",{className:"m-keymapbox",ref:function(t){return e.container=t},style:{width:i,minHeight:E+20}},this.renderSource(),this.renderTarget(),Y.a.createElement("svg",{ref:function(t){return e.canvas=t},width:i>2*a?i-2*a:0,height:E,className:"pa m-keymapcanvas",style:{left:a,top:s}},Y.a.createElement("defs",null,Y.a.createElement("marker",{id:"arrow",markerUnits:"strokeWidth",markerWidth:"12",markerHeight:"12",viewBox:"0 0 12 12",refX:"6",refY:"6",orient:"auto"},Y.a.createElement("path",{d:"M2,3 L9,6 L2,9 L2,6 L2,3",style:{fill:"#2491F7"}}))),Y.a.createElement("g",null,Y.a.createElement("line",{id:"activeLine",x1:"-10",y1:"-10",x2:"-10",y2:"-10",stroke:"#2491F7",strokeWidth:"2",markerEnd:"url(#arrow)"}))))),Y.a.createElement(v.a,{span:"4"},this.props.readonly?null:Y.a.createElement("div",{className:"m-buttons"},Y.a.createElement(m.a,{type:this.state.rowMap?"primary":"default",onClick:this.setRowMap.bind(this)},this.state.rowMap?"取消同行映射":"同行映射"),Y.a.createElement("br",null),Y.a.createElement(m.a,{disabled:n(p),type:this.state.nameMap?"primary":"default",onClick:this.setNameMap.bind(this)},this.state.nameMap?"取消同名映射":"同名映射"),Y.a.createElement("br",null),n(f)?Y.a.createElement(m.a,{onClick:function(){e.copySourceCols(u)}},"拷贝源字段"):""))),this.renderKeyModal(),this.renderBatchModal(),Y.a.createElement(ie.a,{visible:o,onOk:g,onCancel:function(){e.setState({visibleConst:!1})}}),!this.props.readonly&&Y.a.createElement("div",{className:"steps-action",style:{marginTop:80}},Y.a.createElement(m.a,{style:{marginRight:8},onClick:function(){return e.prev(h)}},"上一步"),Y.a.createElement(m.a,{type:"primary",onClick:function(){return e.next(h)}},"下一步")))}},{key:"prev",value:function(e){e.call(null,1)}},{key:"next",value:function(e){var t=this.props,a=t.keymap,n=t.targetSrcType,r=a.source,i=a.target;if(0===r.length&&0===i.length)return void u.a.error("尚未配置数据同步的字段映射！");(n!==ae.n.HBASE||this.checkHBaseRowKey())&&e.call(null,3)}},{key:"__checkHBaseRowKey__REACT_HOT_LOADER__",value:function(e){var t=this.props,n=t.keymap,r=t.targetMap,i=t.sourceSrcType,s=r.type,l=n.source;if(s&&s.rowkey){var c=function(){var e=[];if(i===ae.n.HBASE)for(var t=/([\w]+:[\w]+)/g,n=s.rowkey.match(t),r=function(e){var t=n[e].split(":");if(t&&2===t.length){if(!l.find(function(e){return e.cf===t[0]&&e.key===t[1]}))return u.a.error("目标表rowkey在源表中并不存在！"),{v:{v:!1}}}},c=0;c<n.length;c++){var d=r(c);if("object"===(void 0===d?"undefined":o()(d)))return d.v}else{for(var p=/\$\(([\w]+)\)/g,_=void 0;null!==(_=p.exec(s.rowkey));)e.push(_[1]);for(var h=function(t){if(!(a.i(J.isObject)(l[0])?l.find(function(a){return""+(void 0!==a.key?a.key:a.index)==""+e[t]?a:void 0}):l.find(function(a){return a===e[t]})))return u.a.error("rowkey在已映射的字段中并未找到"+e[t]+"！"),{v:{v:!1}}},c=0;c<e.length;c++){var f=h(c);if("object"===(void 0===f?"undefined":o()(f)))return f.v}}return{v:!0}}();if("object"===(void 0===c?"undefined":o()(c)))return c.v}else if(!s.rowkey)return u.a.error("目标表rowkey不能为空！"),!1}},{key:"__copySourceCols__REACT_HOT_LOADER__",value:function(e){(0,this.props.addBatchTargetKeyRow)(e&&e.map(function(e){return{key:e.key||e.index,type:e.type}}))}},{key:"__batchTextChange__REACT_HOT_LOADER__",value:function(e){this.state.batchModal;this.setState({batchModal:{visible:!0,batchText:e.target.value}})}},{key:"__batchSourceTextChange__REACT_HOT_LOADER__",value:function(e){this.state.batchSourceModal;this.setState({batchSourceModal:{visible:!0,batchText:e.target.value}})}},{key:"__doBatchImport__REACT_HOT_LOADER__",value:function(){var e=this.state.batchModal,t=e.batchText,a=this.props,n=a.addBatchTargetKeyRow,r=a.targetSrcType,i=ee.a.trim(t),s=i.split(","),o=[];switch(r){case ae.n.FTP:case ae.n.HDFS:for(var l=0;l<s.length;l++){var c=s[l];if(c){var d=c.split(":"),p=d[0],_=d[1];if(!ae.q.includes(_))return void u.a.error("字段"+p+"的数据类型错误！");o.push({key:p,type:_})}}break;case ae.n.HBASE:for(var h=0;h<s.length;h++){var f=s[h];if(f){var m=f.split(":"),g=ee.a.trim(m[0]),E=ee.a.trim(m[1]),v=ee.a.trim(m[2]);if(!ae.q.includes(v))return void u.a.error("字段"+E+"的数据类型错误！");o.push({cf:g,key:E,type:v})}}}n(o),this.hideBatchImportModal()}},{key:"__hideBatchImportModal__REACT_HOT_LOADER__",value:function(){this.setState({batchModal:{visible:!1,batchText:""}})}},{key:"__hideBatchSourceModal__REACT_HOT_LOADER__",value:function(){this.setState({batchSourceModal:{visible:!1,batchText:""}})}},{key:"__importFields__REACT_HOT_LOADER__",value:function(){this.setState({batchModal:{visible:!0}})}},{key:"__importSourceFields__REACT_HOT_LOADER__",value:function(){this.setState({batchSourceModal:{visible:!0}})}},{key:"__doBatchAddSourceFields__REACT_HOT_LOADER__",value:function(){var e=this.state.batchSourceModal,t=e.batchText,n=this.props,r=n.addBatchSourceKeyRow,i=n.sourceSrcType,s=(n.sourceCol,ee.a.trim(t),t.split(",")),l=[];switch(i){case ae.n.FTP:case ae.n.HDFS:for(var c=function(e){var t=s[e];if(!t)return"continue";var n=t.split(":"),r=parseInt(ee.a.trim(n[0]),10),i=ee.a.trim(n[1]);return a.i(J.isNaN)(r)||!a.i(J.isNumber)(r)?(u.a.error("索引名称应该为整数数字！"),{v:void 0}):ae.q.includes(i)?void(l.find(function(e){return e.index===r})||l.push({index:r,type:i})):(u.a.error("字段"+r+"的数据类型错误！"),{v:void 0})},d=0;d<s.length;d++){var p=c(d);switch(p){case"continue":continue;default:if("object"===(void 0===p?"undefined":o()(p)))return p.v}}break;case ae.n.HBASE:l.push(le);for(var d=0;d<s.length;d++){var _=s[d];if(_){var h=_.split(":"),f=ee.a.trim(h[0]),m=ee.a.trim(h[1]),g=ee.a.trim(h[2]);if(!ae.q.includes(g))return void u.a.error("字段"+m+"的数据类型错误！");l.push({cf:f,key:m,type:g})}}}r(l),this.hideBatchSourceModal()}},{key:"setRowMap",value:function(){var e=this.state,t=e.rowMap,a=e.nameMap,n=this.props,i=n.targetCol,s=n.sourceCol,o=n.sourceSrcType,l=(n.sourceFileType,n.targetSrcType),c=(n.targetFileType,function(e){return r(o)&&(e=e.map(function(e){return e.key})),e}),u=function(e){return r(l)&&(e=e.map(function(e){return e.key})),e};t?this.props.resetLinkedKeys():this.props.setRowMap({sourceCol:c(s),targetCol:u(i)}),this.setState({rowMap:!t,nameMap:a?!a:a})}},{key:"setNameMap",value:function(){var e=this.state,t=e.nameMap,a=e.rowMap,n=this.props,r=n.targetCol,i=n.sourceCol,s=n.targetSrcType;t?this.props.resetLinkedKeys():this.props.setNameMap({sourceCol:i,targetCol:r,targetSrcType:s}),this.setState({nameMap:!t,rowMap:a?!a:a})}},{key:"initAddKeyRow",value:function(e,t){this.setState({keyModalVisible:!0,keyModal:{operation:"add",isReader:e,fileType:t}})}},{key:"__initEditKeyRow__REACT_HOT_LOADER__",value:function(e,t,a,n,r){this.setState({keyModalVisible:!0,keyModal:{operation:"edit",isReader:e,fileType:t,editField:n,position:r,source:a}})}},{key:"__doAddkeyRow__REACT_HOT_LOADER__",value:function(e){var t=this.state.keyModal.isReader,a=this.props,n=a.addSourceKeyRow,r=a.addTargetKeyRow;e&&(t?n(e):r(e),this.hideKeyModal())}},{key:"__doEditKeyRow__REACT_HOT_LOADER__",value:function(e){var t=this.props,a=t.editSourceKeyRow,n=t.editTargetKeyRow,r=t.editKeyMapTarget,i=this.state.keyModal,s=i.isReader,o=i.position,l=(i.source,i.editField);e&&(s?a(e):(n({index:o,value:e}),r({old:l,replace:e})),this.hideKeyModal())}},{key:"__hideKeyModal__REACT_HOT_LOADER__",value:function(){this.setState({keyModalVisible:!1,keyModal:{operation:"add",editField:"",source:""}})}}]),t}(Y.a.Component),ue=function(e){var t=e.offlineTask.dataSync;return{sourceMap:t.sourceMap,targetMap:t.targetMap,targetCol:t.targetMap.column||[],targetSrcType:t.targetMap.type&&t.targetMap.type.type,targetFileType:t.sourceMap.type&&t.targetMap.type.fileType,sourceCol:t.sourceMap.column||[],sourceSrcType:t.sourceMap.type&&t.sourceMap.type.type,sourceFileType:t.sourceMap.type&&t.sourceMap.type.fileType,keymap:t.keymap}},de=a.i(Q.connect)(ue,X.b)(ce);t.a=de;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(se,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(oe,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(le,"DefaultRowKey","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(n,"isHdfsType","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(r,"isRDB","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(i,"isFieldMatch","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(ce,"Keymap","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(ue,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(de,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"))}()},1983:function(e,t,a){"use strict";var n=a(11),r=a.n(n),i=a(25),s=(a.n(i),a(28)),o=a.n(s),l=a(20),c=(a.n(l),a(19)),u=a.n(c),d=a(23),p=(a.n(d),a(22)),_=a.n(p),h=a(30),f=(a.n(h),a(29)),m=a.n(f),g=a(37),E=(a.n(g),a(15)),v=a.n(E),y=a(5),k=a.n(y),T=a(8),A=a.n(T),C=a(1),b=a.n(C),O=a(4),D=a.n(O),R=a(3),w=a.n(R),S=a(2),L=a.n(S),x=a(80),M=(a.n(x),a(75)),H=a.n(M),F=a(27),N=(a.n(F),a(26)),I=a.n(N),V=a(34),U=(a.n(V),a(33)),P=a.n(U),B=a(0),z=a.n(B),j=a(16),q=a(18),K=(a.n(q),a(61)),W=a.n(K),G=a(45),Y=a(298),Q=a(1362),J=a(921),$=a(204),Z=a(51),X=P.a.Item,ee=I.a.Option,te=H.a.Group,ae=function(e){function t(e){b()(this,t);var n=w()(this,(t.__proto__||A()(t)).call(this,e));return n.getTableList=function(){return n.__getTableList__REACT_HOT_LOADER__.apply(n,arguments)},n.validatePath=function(){return n.__validatePath__REACT_HOT_LOADER__.apply(n,arguments)},n.debounceTableSearch=a.i(q.debounce)(n.changeTable,300,{maxWait:2e3}),n.state={tableList:[],showPreview:!1,dataSource:[],columns:[]},n}return L()(t,e),D()(t,[{key:"componentDidMount",value:function(){var e=this.props.sourceMap,t=e.sourceId;t&&this.getTableList(t)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"__getTableList__REACT_HOT_LOADER__",value:function(e){var t=this,a=this.props.sourceMap;(!a.type||a.type.type!==Z.n.HDFS&&a.type.type!==Z.n.FTP)&&this.setState({tableList:[],showPreview:!1},function(){G.a.getOfflineTableList({sourceId:e,isSys:!1}).then(function(e){1===e.code&&t.setState({tableList:e.data||[]})})})}},{key:"getTableColumn",value:function(e){var t=this.props,a=t.form,n=t.handleTableColumnChange,r=this.props.sourceMap;if(!r.type||r.type.type!==Z.n.HBASE){var i=a.getFieldValue("sourceId");G.a.getOfflineTableColumn({sourceId:i,tableName:e}).then(function(e){n(1===e.code?e.data:[])})}}},{key:"getDataObjById",value:function(e){return this.props.dataSourceList.filter(function(t){return t.id==e})[0]}},{key:"changeSource",value:function(e){var t=this,a=this.props.handleSourceChange;setTimeout(function(){t.getTableList(e)},0),a(this.getDataObjById(e)),this.resetTable()}},{key:"resetTable",value:function(){var e=this,t=this.props.form;this.changeTable(""),this.setState({selectHack:!0},function(){t.resetFields(["table"]),e.setState({selectHack:!1})})}},{key:"changeTable",value:function(e){e&&this.getTableColumn(e),this.submitForm(),this.setState({showPreview:!1})}},{key:"__validatePath__REACT_HOT_LOADER__",value:function(e,t,a){var n=this.props,r=n.handleTableColumnChange,i=n.form,s=i.getFieldValue,o=s("sourceId");"orc"===s("fileType")?G.a.getOfflineTableColumn({sourceId:o,tableName:t}).then(function(e){1===e.code&&(r(e.data),a()),a("该路径无效！")}):a()}},{key:"submitForm",value:function(){var e=this,t=this.props,n=t.updateTaskFields,r=t.form,i=t.handleSourceMapChange,s=t.currentTab,o=(t.sourceMap,t.taskCustomParams);this.timerID=setTimeout(function(){var t=r.getFieldsValue();for(var l in t)""===t[l]&&delete t[l];if(t.where){var c=a.i(J.d)(o,t.where);c.length>0&&n({id:s,taskVariables:c})}if(t.partition){var u=a.i(J.d)(o,t.partition);u.length>0&&n({id:s,taskVariables:u})}var d=W()(t,{src:e.getDataObjById(t.sourceId)});i(d)},0)}},{key:"next",value:function(e){var t=this.props,a=t.form,n=(t.handleSourceMapChange,t.sourceMap),r=null;n.type&&n.type.type===Z.n.HDFS&&(r=["sourceId","path","fileType"],"text"===n.type.fileType&&r.push("encoding")),a.validateFieldsAndScroll(r,{force:!0},function(t,a){t||e.call(null,1)})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,n=this.props,r=n.sourceMap,i=n.dataSourceList,s=n.navtoStep,o=n.isCurrentTabNew,l=a.i(q.isEmpty)(r)||r.type.type===Z.n.HDFS||r.type.type===Z.n.HBASE||r.type.type===Z.n.FTP;return z.a.createElement("div",{className:"g-step1"},z.a.createElement(P.a,null,z.a.createElement(X,k()({},Z.i,{label:"数据源"}),t("sourceId",{rules:[{required:!0}],initialValue:a.i(q.isEmpty)(r)?"":""+r.sourceId})(z.a.createElement(I.a,{showSearch:!0,onChange:this.changeSource.bind(this),optionFilterProp:"name",disabled:!o},i.map(function(e){return z.a.createElement(ee,{key:e.id,name:e.dataName,value:""+e.id,disabled:e.type===Z.n.ES},e.dataName,"( ",z.a.createElement($.b,{value:e.type})," )")})))),this.renderDynamicForm()),z.a.createElement("div",{className:"m-datapreview",style:{width:"90%",margin:"0 auto",overflow:"auto"}},z.a.createElement("p",{style:{cursor:"pointer",marginBottom:10}},z.a.createElement("a",{disabled:l,href:"javascript:void(0)",onClick:this.loadPreview.bind(this)},"数据预览",this.state.showPreview?z.a.createElement(v.a,{type:"up"}):z.a.createElement(v.a,{type:"down"}))),this.state.showPreview?z.a.createElement(m.a,{dataSource:this.state.dataSource,columns:this.state.columns,scroll:{x:200*this.state.columns.length},pagination:!1,bordered:!1}):null),!this.props.readonly&&z.a.createElement("div",{className:"steps-action"},z.a.createElement(_.a,{type:"primary",onClick:function(){return e.next(s)}},"下一步")))}},{key:"loadPreview",value:function(){var e=this,t=this.state.showPreview,a=this.props.form,n=a.getFieldValue("sourceId"),r=a.getFieldValue("table");if(!n||!r)return void u.a.error("数据源或表名缺失");t?this.setState({showPreview:!1}):G.a.getDataPreview({sourceId:n,tableName:r}).then(function(t){if(1===t.code){var a=t.data,n=a.columnList,r=a.dataList,i=n.map(function(e){return{title:e,dataIndex:e,key:e}}),s=r.map(function(e,t){for(var a={},r=0;r<e.length;r++)a.key=t,a[n[r]]=e[r];return a});e.setState({columns:i,dataSource:s,showPreview:!0})}})}},{key:"renderDynamicForm",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.selectHack,n=this.props,i=n.sourceMap,s=(n.dataSourceList,n.isCurrentTabNew),l=i.type&&i.type.fileType||"text",c=void 0;if(a.i(q.isEmpty)(i))return null;switch(i.type.type){case Z.n.MYSQL:case Z.n.ORACLE:case Z.n.SQLSERVER:c=[!t&&z.a.createElement(X,k()({},Z.i,{label:"表名",key:"table"}),e("table",{rules:[{required:!0,message:"数据源表为必选项！"}],initialValue:a.i(q.isEmpty)(i)?"":i.type.table})(z.a.createElement(I.a,{mode:"combobox",showSearch:!0,showArrow:!0,onChange:this.debounceTableSearch.bind(this),disabled:!s,optionFilterProp:"value"},this.state.tableList.map(function(e){return z.a.createElement(ee,{key:"rdb-"+e,value:e},e)})))),z.a.createElement(X,k()({},Z.i,{label:"数据过滤",key:"where"}),e("where",{rules:[{max:1e3,message:"过滤语句不可超过1000个字符!"}],initialValue:a.i(q.isEmpty)(i)?"":i.type.where})(z.a.createElement(o.a,{type:"textarea",placeholder:"请参考相关SQL语法填写where过滤语句（不要填写where关键字）。该过滤语句通常用作增量同步",onChange:this.submitForm.bind(this)})),z.a.createElement(Q.a,{doc:"dataFilterDoc"})),z.a.createElement(X,k()({},Z.i,{label:"切分键",key:"splitPK"}),e("splitPK",{rules:[],initialValue:a.i(q.isEmpty)(i)?"":i.splitPK})(z.a.createElement(o.a,{type:"text",placeholder:"根据配置的字段进行数据分片，实现并发读取",onChange:this.submitForm.bind(this)})),z.a.createElement(Q.a,{doc:"switchKey"}))];break;case Z.n.MAXCOMPUTE:case Z.n.HIVE:var u;c=[!t&&z.a.createElement(X,k()({},Z.i,{label:"表名",key:"table"}),e("table",{rules:[{required:!0}],initialValue:a.i(q.isEmpty)(i)?"":i.type.table})(z.a.createElement(I.a,{showSearch:!0,mode:"combobox",onChange:this.debounceTableSearch.bind(this),disabled:!s,optionFilterProp:"value"},this.state.tableList.map(function(e){return z.a.createElement(ee,{key:"rdb-"+e,value:e},e)})))),z.a.createElement(X,k()({},Z.i,{label:"分区",key:"partition"}),e("partition",{rules:[],initialValue:a.i(q.isEmpty)(i)?"":i.type.partition})(z.a.createElement(o.a,(u={placeholder:"请填写分区"},r()(u,"placeholder","pt=${bdp.system.bizdate};"),r()(u,"onChange",this.submitForm.bind(this)),u))),z.a.createElement(Q.a,{doc:"partitionDesc"}))];break;case Z.n.HDFS:c=[z.a.createElement(X,k()({},Z.i,{label:"路径",key:"path"}),e("path",{rules:[{required:!0,message:"路径不得为空！"},{max:200,message:"路径不得超过200个字符！"},{validator:this.validatePath}],validateTrigger:"onSubmit",initialValue:a.i(q.isEmpty)(i)?"":i.type.path})(z.a.createElement(o.a,{placeholder:"例如: /rdos/batch",onChange:this.submitForm.bind(this)})),z.a.createElement(Q.a,{doc:"hdfsPath"})),z.a.createElement(X,k()({},Z.i,{label:"文件类型",key:"fileType"}),e("fileType",{rules:[{required:!0}],initialValue:i.type&&i.type.fileType?i.type.fileType:"text"})(z.a.createElement(I.a,{onChange:this.submitForm.bind(this)},z.a.createElement(ee,{value:"orc"},"orc"),z.a.createElement(ee,{value:"text"},"text")))),z.a.createElement(X,k()({},Z.i,{label:"编码",key:"encoding",style:{display:"text"===l?"block":"none"}}),e("encoding",{rules:[{required:!0}],initialValue:i.type&&i.type.encoding?i.type.encoding:"utf-8"})(z.a.createElement(I.a,{onChange:this.submitForm.bind(this)},z.a.createElement(ee,{value:"utf-8"},"utf-8"),z.a.createElement(ee,{value:"gbk"},"gbk")))),z.a.createElement(X,k()({},Z.i,{style:{display:"text"===l?"block":"none"},label:"分隔符",key:"fieldDelimiter"}),e("fieldDelimiter",{rules:[],initialValue:a.i(q.isEmpty)(i)?",":i.type.fieldDelimiter})(z.a.createElement(o.a,{placeholder:"若不填写，则默认为\\001",onChange:this.submitForm.bind(this)})))];break;case Z.n.HBASE:c=[!t&&z.a.createElement(X,k()({},Z.i,{label:"表名",key:"table"}),e("table",{rules:[{required:!0}],initialValue:a.i(q.isEmpty)(i)?"":i.type.table})(z.a.createElement(I.a,{showSearch:!0,mode:"combobox",onChange:this.debounceTableSearch.bind(this),disabled:!s,optionFilterProp:"value"},this.state.tableList.map(function(e){return z.a.createElement(ee,{key:"hbase-"+e,value:e},e)})))),z.a.createElement(X,k()({},Z.i,{label:"编码",key:"encoding"}),e("encoding",{rules:[{required:!0}],initialValue:i.type&&i.type.encoding?i.type.encoding:"utf-8"})(z.a.createElement(I.a,{onChange:this.submitForm.bind(this)},z.a.createElement(ee,{value:"utf-8"},"utf-8"),z.a.createElement(ee,{value:"gbk"},"gbk")))),z.a.createElement(X,k()({},Z.i,{label:"开始行健",key:"startRowkey"}),e("startRowkey",{rules:[],initialValue:i.type&&i.type.startRowkey?i.type.startRowkey:""})(z.a.createElement(o.a,{placeholder:"startRowkey",onChange:this.submitForm.bind(this)}))),z.a.createElement(X,k()({},Z.i,{label:"结束行健",key:"endRowkey"}),e("endRowkey",{rules:[],initialValue:i.type&&i.type.endRowkey?i.type.endRowkey:""})(z.a.createElement(o.a,{placeholder:"endRowkey",onChange:this.submitForm.bind(this)}))),z.a.createElement(X,k()({},Z.i,{className:"txt-left",label:"行健二进制转换",key:"isBinaryRowkey"}),e("isBinaryRowkey",{rules:[],initialValue:i.type&&i.type.isBinaryRowkey?i.type.isBinaryRowkey:"0"})(z.a.createElement(te,{onChange:this.submitForm.bind(this)},z.a.createElement(H.a,{value:"0",style:{float:"left"}},"FALSE"),z.a.createElement(H.a,{value:"1",style:{float:"left"}},"TRUE")))),z.a.createElement(X,k()({},Z.i,{label:"每次RPC请求获取行数",key:"scanCacheSize"}),e("scanCacheSize",{rules:[],initialValue:i.type&&i.type.scanCacheSize?i.type.scanCacheSize:""})(z.a.createElement(o.a,{onChange:this.submitForm.bind(this),placeholder:"请输入大小, 默认为256",type:"number",min:0,suffix:"行"}))),z.a.createElement(X,k()({},Z.i,{label:"每次RPC请求获取列数",key:"scanBatchSize"}),e("scanBatchSize",{rules:[],initialValue:i.type&&i.type.scanBatchSize?i.type.scanBatchSize:""})(z.a.createElement(o.a,{onChange:this.submitForm.bind(this),placeholder:"请输入大小, 默认为100",type:"number",min:0,suffix:"列"})))];break;case Z.n.FTP:c=[z.a.createElement(X,k()({},Z.i,{label:"路径",key:"path"}),e("path",{rules:[{required:!0,message:"路径不得为空！"},{max:200,message:"路径不得超过200个字符！"},{validator:this.validatePath}],validateTrigger:"onSubmit",initialValue:a.i(q.isEmpty)(i)?"":i.type.path})(z.a.createElement(o.a,{placeholder:"例如: /rdos/batch",onChange:this.submitForm.bind(this)}))),z.a.createElement(X,k()({},Z.i,{style:{display:"text"===l?"block":"none"},label:"列分隔符",key:"fieldDelimiter"}),e("fieldDelimiter",{rules:[{required:!0,message:"分隔符不可为空！"}],initialValue:a.i(q.isEmpty)(i)?",":i.type.fieldDelimiter})(z.a.createElement(o.a,{placeholder:"默认值为,",onChange:this.submitForm.bind(this)}))),z.a.createElement(X,k()({},Z.i,{label:"编码",key:"encoding",style:{display:"text"===l?"block":"none"}}),e("encoding",{rules:[{required:!0,message:"必须选择一种编码！"}],initialValue:i.type&&i.type.encoding?i.type.encoding:"utf-8"})(z.a.createElement(I.a,{onChange:this.submitForm.bind(this)},z.a.createElement(ee,{value:"utf-8"},"utf-8"),z.a.createElement(ee,{value:"gbk"},"gbk"))))]}return c}}]),t}(z.a.Component),ne=P.a.create()(ae),re=function(e){function t(e){return b()(this,t),w()(this,(t.__proto__||A()(t)).call(this,e))}return L()(t,e),D()(t,[{key:"render",value:function(){return z.a.createElement("div",null,z.a.createElement(ne,this.props))}}]),t}(z.a.Component),ie=function(e){var t=e.offlineTask,a=t.dataSync,n=t.workbench;return{isCurrentTabNew:n.isCurrentTabNew,currentTab:n.currentTab,sourceMap:a.sourceMap,dataSourceList:a.dataSourceList,taskCustomParams:n.taskCustomParams}},se=function(e){return{handleSourceChange:function(t){e({type:Y.c.RESET_SOURCE_MAP}),e({type:Y.c.RESET_KEYMAP}),e({type:Y.d.DATA_SOURCE_CHANGE,payload:t}),e({type:Y.h.MAKE_TAB_DIRTY})},handleSourceMapChange:function(t){e({type:Y.d.DATA_SOURCEMAP_CHANGE,payload:t}),e({type:Y.h.MAKE_TAB_DIRTY})},handleTableColumnChange:function(t){e({type:Y.d.SOURCE_TABLE_COLUMN_CHANGE,payload:t}),e({type:Y.h.MAKE_TAB_DIRTY})},updateTaskFields:function(t){e({type:Y.h.SET_TASK_FIELDS_VALUE,payload:t})}}},oe=a.i(j.connect)(ie,se)(re);t.a=oe;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(X,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register(ee,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register(te,"RadioGroup","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register(ae,"SourceForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register(ne,"SourceFormWrap","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register(re,"Source","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register(ie,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register(se,"mapDispatch","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register(oe,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"))}()},1984:function(e,t,a){"use strict";var n=a(25),r=(a.n(n),a(28)),i=a.n(r),s=a(23),o=(a.n(s),a(22)),l=a.n(o),c=a(5),u=a.n(c),d=a(8),p=a.n(d),_=a(1),h=a.n(_),f=a(4),m=a.n(f),g=a(3),E=a.n(g),v=a(2),y=a.n(v),k=a(80),T=(a.n(k),a(75)),A=a.n(T),C=a(27),b=(a.n(C),a(26)),O=a.n(b),D=a(34),R=(a.n(D),a(33)),w=a.n(R),S=a(0),L=a.n(S),x=a(16),M=a(18),H=(a.n(M),a(61)),F=a.n(H),N=a(45),I=a(298),V=a(51),U=a(1362),P=a(921),B=a(204),z=w.a.Item,j=O.a.Option,q=A.a.Group,K=function(e){function t(e){h()(this,t);var n=E()(this,(t.__proto__||p()(t)).call(this,e));return n.getTableList=function(){return n.__getTableList__REACT_HOT_LOADER__.apply(n,arguments)},n.getTableColumn=function(){return n.__getTableColumn__REACT_HOT_LOADER__.apply(n,arguments)},n.debounceTableSearch=a.i(M.debounce)(n.changeTable,600,{maxWait:2e3}),n.state={tableList:[]},n}return y()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e=this.props.targetMap,t=e.sourceId;t&&this.getTableList(t)}},{key:"__getTableList__REACT_HOT_LOADER__",value:function(e){var t=this,a=this.props.targetMap;if(a.type&&(a.type.type===V.n.HDFS||a.type.type===V.n.FTP))return!0;t.setState({tableList:[]},function(){N.a.getOfflineTableList({sourceId:e,isSys:!1}).then(function(e){1===e.code&&t.setState({tableList:e.data})})})}},{key:"__getTableColumn__REACT_HOT_LOADER__",value:function(e){var t=this.props,a=t.form,n=t.handleTableColumnChange,r=t.targetMap,i=a.getFieldValue("sourceId");if(r.type&&r.type.type===V.n.HBASE)return!0;N.a.getOfflineTableColumn({sourceId:i,tableName:e}).then(function(e){n(1===e.code?e.data:[])})}},{key:"getDataObjById",value:function(e){return this.props.dataSourceList.filter(function(t){return t.id==e})[0]}},{key:"changeSource",value:function(e){var t=this,a=this.props,n=a.handleSourceChange;a.form;setTimeout(function(){t.getTableList(e)},0),n(this.getDataObjById(e)),this.resetTable()}},{key:"resetTable",value:function(){var e=this,t=this.props.form;this.changeTable(""),this.setState({selectHack:!0},function(){t.resetFields(["table"]),e.setState({selectHack:!1})})}},{key:"changeTable",value:function(e){e&&this.getTableColumn(e),this.submitForm()}},{key:"submitForm",value:function(){var e=this,t=this.props,n=t.taskCustomParams,r=t.updateTaskFields,i=t.form,s=t.handleTargetMapChange,o=t.currentTab;setTimeout(function(){var t=i.getFieldsValue(),l=t.preSql+" "+t.postSql;if(l){var c=a.i(P.d)(n,l);c.length>0&&r({id:o,taskVariables:c})}if(t.partition){var u=a.i(P.d)(n,t.partition);u.length>0&&r({id:o,taskVariables:u})}var d=F()(t,{src:e.getDataObjById(t.sourceId)});s(d)},0)}},{key:"prev",value:function(e){e.call(null,0)}},{key:"next",value:function(e){var t=this.props,a=t.form;t.handleTargetMapChange,t.targetMap;a.validateFields(function(t,a){t||e.call(null,2)})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,n=this.props,r=n.targetMap,i=(n.sourceMap,n.dataSourceList),s=n.navtoStep,o=n.isCurrentTabNew;return L.a.createElement("div",{className:"g-step2"},L.a.createElement(w.a,null,L.a.createElement(z,u()({},V.i,{label:"数据同步目标"}),t("sourceId",{rules:[{required:!0}],initialValue:a.i(M.isEmpty)(r)?"":""+r.sourceId})(L.a.createElement(O.a,{showSearch:!0,onChange:this.changeSource.bind(this),optionFilterProp:"name",disabled:!o},i.map(function(e){return L.a.createElement(j,{key:e.id,name:e.dataName,value:""+e.id,disabled:e.type===V.n.ES},e.dataName,"( ",L.a.createElement(B.b,{value:e.type})," )")})))),this.renderDynamicForm()),!this.props.readonly&&L.a.createElement("div",{className:"steps-action"},L.a.createElement(l.a,{style:{marginRight:8},onClick:function(){return e.prev(s)}},"上一步"),L.a.createElement(l.a,{type:"primary",onClick:function(){return e.next(s)}},"下一步")))}},{key:"renderDynamicForm",value:function(){var e=this.props.form.getFieldDecorator,t=this.state.selectHack,n=this.props,r=n.targetMap,s=(n.dataSourceList,n.isCurrentTabNew),o=void 0;if(a.i(M.isEmpty)(r))return null;switch(r.type.type){case V.n.MYSQL:case V.n.ORACLE:case V.n.SQLSERVER:o=[!t&&L.a.createElement(z,u()({},V.i,{label:"表名",key:"table"}),e("table",{rules:[{required:!0}],initialValue:a.i(M.isEmpty)(r)?"":r.type.table})(L.a.createElement(O.a,{showSearch:!0,mode:"combobox",disabled:!s,optionFilterProp:"value",onChange:this.debounceTableSearch.bind(this)},this.state.tableList.map(function(e){return L.a.createElement(j,{key:"rdb-target-"+e,value:e},e)})))),L.a.createElement(z,u()({},V.i,{label:"导入前准备语句",key:"preSql"}),e("preSql",{rules:[],initialValue:a.i(M.isEmpty)(r)?"":r.type.preSql})(L.a.createElement(i.a,{onChange:this.submitForm.bind(this),placeholder:"请输入导入数据前执行的SQL脚本",type:"textarea"}))),L.a.createElement(z,u()({},V.i,{label:"导入后准备语句",key:"postSql"}),e("postSql",{rules:[],initialValue:a.i(M.isEmpty)(r)?"":r.type.postSql})(L.a.createElement(i.a,{onChange:this.submitForm.bind(this),placeholder:"请输入导入数据后执行的SQL脚本",type:"textarea"}))),L.a.createElement(z,u()({},V.i,{label:"主键冲突",key:"writeMode",className:"txt-left"}),e("writeMode",{rules:[{required:!0}],initialValue:r.type&&r.type.writeMode?r.type.writeMode:"insert"})(L.a.createElement(q,{onChange:this.submitForm.bind(this)},L.a.createElement(A.a,{value:"insert",style:{float:"left"}},"视为脏数据，保留原有数据（Insert Into）"),L.a.createElement(A.a,{value:"replace",style:{float:"left"}},"替换原有数据（Replace Into）"))))];break;case V.n.HIVE:case V.n.MAXCOMPUTE:o=[!t&&L.a.createElement(z,u()({},V.i,{label:"表名",key:"table"}),e("table",{rules:[{required:!0}],initialValue:a.i(M.isEmpty)(r)?"":r.type.table})(L.a.createElement(O.a,{showSearch:!0,mode:"combobox",onChange:this.debounceTableSearch.bind(this),disabled:!s,optionFilterProp:"value"},this.state.tableList.map(function(e){return L.a.createElement(j,{key:"rdb-target-"+e,value:e},e)})))),L.a.createElement(z,u()({},V.i,{label:"分区",key:"partition"}),e("partition",{rules:[],initialValue:a.i(M.isEmpty)(r)?"":r.type.partition})(L.a.createElement(i.a,{onChange:this.submitForm.bind(this),placeholder:"pt=${bdp.system.bizdate};"})),L.a.createElement(U.a,{doc:"partitionDesc"})),L.a.createElement(z,u()({},V.i,{label:"写入模式",key:"writeMode",className:"txt-left"}),e("writeMode",{rules:[{required:!0}],initialValue:r.type&&r.type.writeMode?r.type.writeMode:"replace"})(L.a.createElement(q,{onChange:this.submitForm.bind(this)},L.a.createElement(A.a,{value:"replace",style:{float:"left"}},"覆盖（Insert Overwrite）"),L.a.createElement(A.a,{value:"insert",style:{float:"left"}},"追加（Insert Into）"))))];break;case V.n.HDFS:o=[L.a.createElement(z,u()({},V.i,{label:"路径",key:"path"}),e("path",{rules:[{required:!0}],initialValue:a.i(M.isEmpty)(r)?"":r.type.path})(L.a.createElement(i.a,{placeholder:"例如: /rdos/batch",onChange:this.submitForm.bind(this)}))),L.a.createElement(z,u()({},V.i,{label:"分隔符",key:"fieldDelimiter"}),e("fieldDelimiter",{rules:[],initialValue:a.i(M.isEmpty)(r)?",":r.type.fieldDelimiter})(L.a.createElement(i.a,{placeholder:"例如: 目标为hive则 分隔符为\\001",onChange:this.submitForm.bind(this)}))),L.a.createElement(z,u()({},V.i,{label:"编码",key:"encoding"}),e("encoding",{rules:[{required:!0}],initialValue:a.i(M.isEmpty)(r)||!r.type.encoding?"utf-8":r.type.encoding})(L.a.createElement(O.a,{onChange:this.submitForm.bind(this)},L.a.createElement(j,{value:"utf-8"},"utf-8"),L.a.createElement(j,{value:"gbk"},"gbk")))),L.a.createElement(z,u()({},V.i,{label:"文件名",key:"fileName"}),e("fileName",{rules:[{required:!0}],initialValue:a.i(M.isEmpty)(r)?"":r.type.fileName})(L.a.createElement(i.a,{onChange:this.submitForm.bind(this)}))),L.a.createElement(z,u()({},V.i,{label:"文件类型",key:"fileType"}),e("fileType",{rules:[{required:!0}],initialValue:r.type&&r.type.fileType?r.type.fileType:"orc"})(L.a.createElement(O.a,{onChange:this.submitForm.bind(this)},L.a.createElement(j,{value:"orc"},"orc"),L.a.createElement(j,{value:"text"},"text")))),L.a.createElement(z,u()({},V.i,{label:"写入模式",className:"txt-left",key:"writeMode"}),e("writeMode",{rules:[{required:!0}],initialValue:r.type&&r.type.writeMode?r.type.writeMode:"APPEND"})(L.a.createElement(q,{onChange:this.submitForm.bind(this)},L.a.createElement(A.a,{value:"APPEND",style:{float:"left"}},"追加新数据"),L.a.createElement(A.a,{value:"NONCONFLICT",style:{float:"left"}},"覆盖老数据"))))];break;case V.n.HBASE:o=[!t&&L.a.createElement(z,u()({},V.i,{label:"表名",key:"table"}),e("table",{rules:[{required:!0}],initialValue:r.type&&r.type.table?r.type.table:""})(L.a.createElement(O.a,{showSearch:!0,mode:"combobox",onChange:this.debounceTableSearch.bind(this),disabled:!s,optionFilterProp:"value"},this.state.tableList.map(function(e){return L.a.createElement(j,{key:"hbase-target-"+e,value:e},e)})))),L.a.createElement(z,u()({},V.i,{label:"编码",key:"encoding"}),e("encoding",{rules:[{required:!0}],initialValue:r.type&&r.type.encoding?r.type.encoding:"utf-8"})(L.a.createElement(O.a,{onChange:this.submitForm.bind(this)},L.a.createElement(j,{value:"utf-8"},"utf-8"),L.a.createElement(j,{value:"gbk"},"gbk")))),L.a.createElement(z,u()({},V.i,{label:"读取为空时的处理方式",key:"nullMode",className:"txt-left"}),e("nullMode",{rules:[{required:!0,message:"请选择为空时的处理方式!"}],initialValue:r.type&&r.type.nullMode?r.type.nullMode:"skip"})(L.a.createElement(q,{onChange:this.submitForm.bind(this)},L.a.createElement(A.a,{value:"skip",style:{float:"left"}},"SKIP"),L.a.createElement(A.a,{value:"empty",style:{float:"left"}},"EMPTY")))),L.a.createElement(z,u()({},V.i,{label:"写入缓存大小",key:"writeBufferSize"}),e("writeBufferSize",{rules:[],initialValue:a.i(M.isEmpty)(r)?"":r.type.writeBufferSize})(L.a.createElement(i.a,{onChange:this.submitForm.bind(this),placeholder:"请输入缓存大小",type:"number",min:0,suffix:"KB"})))];break;case V.n.FTP:o=[L.a.createElement(z,u()({},V.i,{label:"路径",key:"path"}),e("path",{rules:[{required:!0,message:"路径不得为空！"},{max:200,message:"路径不得超过200个字符！"},{validator:this.validatePath}],validateTrigger:"onSubmit",initialValue:a.i(M.isEmpty)(r)?"":r.type.path})(L.a.createElement(i.a,{placeholder:"例如: /rdos/batch",onChange:this.submitForm.bind(this)}))),L.a.createElement(z,u()({},V.i,{label:"编码",key:"encoding"}),e("encoding",{rules:[{required:!0}],initialValue:r.type&&r.type.encoding?r.type.encoding:"utf-8"})(L.a.createElement(O.a,{onChange:this.submitForm.bind(this)},L.a.createElement(j,{value:"utf-8"},"utf-8"),L.a.createElement(j,{value:"gbk"},"gbk")))),L.a.createElement(z,u()({},V.i,{label:"分隔符",key:"fieldDelimiter"}),e("fieldDelimiter",{rules:[],initialValue:r.type&&r.type.fieldDelimiter?r.type.fieldDelimiter:","})(L.a.createElement(i.a,{placeholder:"若不填写，则默认,",onChange:this.submitForm.bind(this)}))),L.a.createElement(z,u()({},V.i,{label:"写入模式",className:"txt-left",key:"writeMode"}),e("writeMode",{rules:[{required:!0}],initialValue:r.type&&r.type.writeMode?r.type.writeMode:"APPEND"})(L.a.createElement(q,{onChange:this.submitForm.bind(this)},L.a.createElement(A.a,{value:"APPEND",style:{float:"left"}},"追加新数据"),L.a.createElement(A.a,{value:"NONCONFLICT",style:{float:"left"}},"覆盖老数据"))))]}return o}}]),t}(L.a.Component),W=w.a.create()(K),G=function(e){function t(e){return h()(this,t),E()(this,(t.__proto__||p()(t)).call(this,e))}return y()(t,e),m()(t,[{key:"render",value:function(){return L.a.createElement("div",null,L.a.createElement(W,this.props))}}]),t}(L.a.Component),Y=function(e){var t=e.offlineTask,a=t.dataSync,n=t.workbench,r=n.isCurrentTabNew;return{currentTab:n.currentTab,isCurrentTabNew:r,targetMap:a.targetMap,sourceMap:a.sourceMap,dataSourceList:a.dataSourceList,taskCustomParams:n.taskCustomParams}},Q=function(e){return{handleSourceChange:function(t){e({type:I.c.RESET_TARGET_MAP}),e({type:I.c.RESET_KEYMAP}),e({type:I.e.DATA_SOURCE_TARGET_CHANGE,payload:t}),e({type:I.h.MAKE_TAB_DIRTY})},handleTargetMapChange:function(t){e({type:I.e.DATA_TARGETMAP_CHANGE,payload:t}),e({type:I.h.MAKE_TAB_DIRTY})},handleTableColumnChange:function(t){e({type:I.e.TARGET_TABLE_COLUMN_CHANGE,payload:t}),e({type:I.h.MAKE_TAB_DIRTY})},updateTaskFields:function(t){e({type:I.h.SET_TASK_FIELDS_VALUE,payload:t})}}},J=a.i(x.connect)(Y,Q)(G);t.a=J;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(z,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(j,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(q,"RadioGroup","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(K,"TargetForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(W,"TargetFormWrap","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(G,"Target","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(Y,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(Q,"mapDispatch","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(J,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"))}()},1985:function(e,t,a){"use strict";var n=a(41),r=(a.n(n),a(40)),i=a.n(r),s=a(30),o=(a.n(s),a(29)),l=a.n(o),c=a(8),u=a.n(c),d=a(1),p=a.n(d),_=a(4),h=a.n(_),f=a(3),m=a.n(f),g=a(2),E=a.n(g),v=a(0),y=a.n(v),k=(a(16),a(12)),T=a(1989),A=a(51);a.d(t,"a",function(){return C});var C=function(e){function t(e){p()(this,t);var a=m()(this,(t.__proto__||u()(t)).call(this,e));return a.state={showDiff:!1,campareTo:""},a.diffCode=function(){return a.__diffCode__REACT_HOT_LOADER__.apply(a,arguments)},a.close=function(){return a.__close__REACT_HOT_LOADER__.apply(a,arguments)},a.codeChange=function(){return a.__codeChange__REACT_HOT_LOADER__.apply(a,arguments)},a.taskVersionCols=function(){return a.__taskVersionCols__REACT_HOT_LOADER__.apply(a,arguments)},a}return E()(t,e),h()(t,[{key:"__diffCode__REACT_HOT_LOADER__",value:function(e){this.setState({showDiff:!0,campareTo:e})}},{key:"__close__REACT_HOT_LOADER__",value:function(){this.setState({showDiff:!1,campareTo:""})}},{key:"__codeChange__REACT_HOT_LOADER__",value:function(e,t){this.props.changeSql(t)}},{key:"render",value:function(){var e=this.props.taskInfo,t=this.state,a=t.showDiff,n=t.campareTo,r=e.readWriteLockVO&&!e.readWriteLockVO.getLock;return y.a.createElement("div",null,y.a.createElement(l.a,{className:"m-table",rowKey:"id",dataSource:e.taskVersions||[],columns:this.taskVersionCols(),pagination:!1}),y.a.createElement(i.a,{wrapClassName:"vertical-center-modal modal-body-nopadding",title:"历史版本对比",width:"900px",bodyStyle:{height:"500px"},visible:a,onCancel:this.close,cancelText:"关闭",footer:null},y.a.createElement(T.a,{readOnly:r,value:e.sqlText,compareTo:n.sqlText,onChange:this.codeChange})))}},{key:"__taskVersionCols__REACT_HOT_LOADER__",value:function(){var e=this,t=this.props.taskInfo;return[{width:120,title:"发布时间",dataIndex:"gmtCreate",key:"gmtCreate",render:function(e){return k.a.formatDateTime(e)}},{title:"发布人",dataIndex:"userName",key:"userName"},{width:120,title:"描述",dataIndex:"publishDesc",key:"publishDesc"},{title:"操作",dataIndex:"id",width:80,key:"operation",render:function(a,n){return y.a.createElement("span",null,t.taskType===A.b.SQL?y.a.createElement("a",{onClick:function(){return e.diffCode(n)}},"代码"):"-")}}]}}]),t}(y.a.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(C,"TaskVersion","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskVersion.js")}()},1986:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),i=n(r),s=a(1),o=n(s),l=a(4),c=n(l),u=a(3),d=n(u),p=a(2),_=n(p),h=a(0),f=n(h),m=a(14),g=function(e){function t(){(0,o.default)(this,t);var e=(0,d.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.focus=function(){e.ele.focus?e.ele.focus():(0,m.findDOMNode)(e.ele).focus()},e.blur=function(){e.ele.blur?e.ele.blur():(0,m.findDOMNode)(e.ele).blur()},e.saveRef=function(t){e.ele=t;var a=e.props.children.ref;"function"==typeof a&&a(t)},e}return(0,_.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return f.default.cloneElement(this.props.children,(0,i.default)({},this.props,{ref:this.saveRef}),null)}}]),t}(f.default.Component);t.default=g,e.exports=t.default},1987:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return e&&e.type&&(e.type.isSelectOption||e.type.isSelectOptGroup)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(42),s=n(i),o=a(11),l=n(o),c=a(5),u=n(c),d=a(1),p=n(d),_=a(4),h=n(_),f=a(3),m=n(f),g=a(2),E=n(g),v=a(0),y=n(v),k=a(367),T=a(10),A=n(T),C=a(26),b=n(C),O=a(28),D=n(O),R=a(1986),w=n(R),S=function(e){function t(){(0,p.default)(this,t);var e=(0,m.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.getInputElement=function(){var t=e.props.children,a=t&&y.default.isValidElement(t)&&t.type!==k.Option?y.default.Children.only(e.props.children):y.default.createElement(D.default,null),n=(0,u.default)({},a.props);return delete n.children,y.default.createElement(w.default,n,a)},e}return(0,E.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e,t=this.props,a=t.size,n=t.className,i=void 0===n?"":n,o=t.notFoundContent,c=t.prefixCls,d=t.optionLabelProp,p=t.dataSource,_=t.children,h=(0,A.default)((e={},(0,l.default)(e,c+"-lg","large"===a),(0,l.default)(e,c+"-sm","small"===a),(0,l.default)(e,i,!!i),(0,l.default)(e,c+"-show-search",!0),(0,l.default)(e,c+"-auto-complete",!0),e)),f=void 0,m=y.default.Children.toArray(_);return f=m.length&&r(m[0])?_:p?p.map(function(e){if(y.default.isValidElement(e))return e;switch(void 0===e?"undefined":(0,s.default)(e)){case"string":return y.default.createElement(k.Option,{key:e},e);case"object":return y.default.createElement(k.Option,{key:e.value},e.text);default:throw new Error("AutoComplete[dataSource] only supports type `string[] | Object[]`.")}}):[],y.default.createElement(b.default,(0,u.default)({},this.props,{className:h,mode:"combobox",optionLabelProp:d,getInputElement:this.getInputElement,notFoundContent:o}),f)}}]),t}(y.default.Component);t.default=S,S.Option=k.Option,S.OptGroup=k.OptGroup,S.defaultProps={prefixCls:"ant-select",transitionName:"slide-up",optionLabelProp:"children",choiceTransitionName:"zoom",showSearch:!1,filterOption:!1},e.exports=t.default},1988:function(e,t,a){"use strict";a(17),a(2041),a(27)},1989:function(e,t,a){"use strict";var n=a(59),r=a.n(n),i=a(8),s=a.n(i),o=a(1),l=a.n(o),c=a(4),u=a.n(c),d=a(3),p=a.n(d),_=a(2),h=a.n(_),f=a(0),m=a.n(f),g=(a(51),a(2033)),E=(a.n(g),a(2034)),v=(a.n(E),a(813));a(1403),a(2042);var y=function(e){function t(){var e,a,n,r;l()(this,t);for(var i=arguments.length,o=Array(i),c=0;c<i;c++)o[c]=arguments[c];return a=n=p()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(o))),n.initUI=function(){var e;return(e=n).__initUI__REACT_HOT_LOADER__.apply(e,arguments)},r=a,p()(n,r)}return h()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.value,a=e.compareTo;this.initUI(t,a)}},{key:"componentWillReceiveProps",value:function(e){var t=e.value,a=e.compareTo;t&&this.props.value!==t&&this._self.edit.doc.setValue(t),a&&this.props.compareTo!==a&&this._self.right.orig.doc.setValue(a)}},{key:"__initUI__REACT_HOT_LOADER__",value:function(e,t){var a=this.props,n=a.onChange,r=a.readOnly,i=this.getCodeMirrorIns(),s=i.MergeView(this.diffView,{value:e,origLeft:null,orig:t,lineNumbers:!0,mode:"text/x-sql",highlightDifferences:!0,connect:null,collapseIdentical:!1,readOnly:r});s.edit.doc.on("change",function(t){n&&n(e,t.getValue())}),s.wrap.style.height="500px",this._self=s}},{key:"mergeViewHeight",value:function(e){function t(e){return e?e.getScrollInfo().height:0}return Math.max(t(e.leftOriginal()),t(e.editor()),t(e.rightOriginal()))}},{key:"resize",value:function(e){for(var t=this.mergeViewHeight(e);;){e.leftOriginal()&&e.leftOriginal().setSize(null,t),e.editor().setSize(null,t),e.rightOriginal()&&e.rightOriginal().setSize(null,t);var a=this.mergeViewHeight(e);if(a>=t)break;t=a}e.wrap.style.height=t+"px"}},{key:"getCodeMirrorIns",value:function(){return this._self||v}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.style,i="code-editor merge-text";i=a?i+" "+a:i;var s={position:"relative",borderTop:"1px solid #e9e9e9",marginTop:"20px"};return s=n?r()(s,n):s,m.a.createElement("div",{ref:function(t){e.diffView=t},className:i,style:s})}}]),t}(f.Component),k=y;t.a=k;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(y,"DiffEditor","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/components/diff-code-editor/index.js"),__REACT_HOT_LOADER__.register(k,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/components/diff-code-editor/index.js"))}()},1999:function(e,t,a){"use strict";var n=a(41),r=(a.n(n),a(40)),i=a.n(r),s=a(23),o=(a.n(s),a(22)),l=a.n(o),c=a(20),u=(a.n(c),a(19)),d=a.n(u),p=a(82),_=a.n(p),h=a(59),f=a.n(h),m=a(8),g=a.n(m),E=a(1),v=a.n(E),y=a(4),k=a.n(y),T=a(3),A=a.n(T),C=a(2),b=a.n(C),O=a(0),D=a.n(O),R=a(2e3),w=a(2001),S=a(130);a.d(t,"a",function(){return x});var L={file:"",startLine:1,asTitle:!0,visible:!1,sourceFile:"",data:[],splitSymbol:",",charset:"UTF-8",step:"source",tableData:{},targetTable:"",tableList:[],partitions:[],hasPartition:!1,originPartitions:[],columnMap:[],matchType:1,sqlText:"",queryTable:"",overwriteFlag:0,originLineCount:0,targetExchangeWarning:!1},x=function(e){function t(){var e,a,n,r;v()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=A()(this,(e=t.__proto__||g()(t)).call.apply(e,[this].concat(s))),n.state=f()({},L),n.importData=function(){var e;return(e=n).__importData__REACT_HOT_LOADER__.apply(e,arguments)},n.checkParams=function(){var e;return(e=n).__checkParams__REACT_HOT_LOADER__.apply(e,arguments)},n.getParams=function(){var e;return(e=n).__getParams__REACT_HOT_LOADER__.apply(e,arguments)},n.fileChange=function(){var e;return(e=n).__fileChange__REACT_HOT_LOADER__.apply(e,arguments)},n.fileClick=function(){var e;return(e=n).__fileClick__REACT_HOT_LOADER__.apply(e,arguments)},n.readFile=function(){var e;return(e=n).__readFile__REACT_HOT_LOADER__.apply(e,arguments)},n.changeStatus=function(){var e;return(e=n).__changeStatus__REACT_HOT_LOADER__.apply(e,arguments)},n.next=function(){var e;return(e=n).__next__REACT_HOT_LOADER__.apply(e,arguments)},n.prev=function(){var e;return(e=n).__prev__REACT_HOT_LOADER__.apply(e,arguments)},r=a,A()(n,r)}return b()(t,e),k()(t,[{key:"__importData__REACT_HOT_LOADER__",value:function(){var e=this,t=this.getParams();this.checkParams(t)&&(t.partitions=_()(t.partitions),t.keyRef=_()(t.keyRef),S.a.importLocalData(t).then(function(t){if(1===t.code){var a="您已经成功导入"+t.data+"条数据！";d.a.success(a),e.setState({visible:!1})}}))}},{key:"__checkParams__REACT_HOT_LOADER__",value:function(e){var t=!0,a=this.state,n=a.originPartitions,r=a.columnMap,i=a.matchType,s=e.partitions;if(!e.tableId)return d.a.error("请选择要导入的目标表！"),!1;if(1==i){for(var o=!0,l=0;l<r.length;l++){if(r[l]){o=!1;break}}if(o)return this.setState({targetExchangeWarning:!0}),!1}if(n&&n.length>0){for(var c=!0,u=0;u<s.length;u++){""===s[u][n[u].columnName]&&(t=!1,c=!1)}c||d.a.error("分区每项值必填！")}return t}},{key:"__getParams__REACT_HOT_LOADER__",value:function(){var e=this.state,t=e.file,a=e.targetTable,n=e.splitSymbol,r=e.charset,i=e.startLine,s=e.asTitle,o=e.matchType,l=e.columnMap,c=e.partitions,u=e.overwriteFlag;return{tableId:a.id,separator:n,oriCharset:r,topLineIsTitle:s,keyRef:l,file:t,matchType:o,startLine:i,partitions:c,overwriteFlag:u}}},{key:"__fileChange__REACT_HOT_LOADER__",value:function(e){var t=this,a=e.target.files[0];a.size>52428800?d.a.error("本地上传文件不可超过50MB!"):this.setState({file:a},function(){t.readFile(a)})}},{key:"__fileClick__REACT_HOT_LOADER__",value:function(e){e.target.value=null,this.setState(f()({},L))}},{key:"__readFile__REACT_HOT_LOADER__",value:function(e){var t=this,a=this.state.charset;if(e){var n=new FileReader;e.type.split("/")[1];n.onload=function(e){return function(e){t.setState({sourceFile:e.target.result}),t.parseFile(e.target.result)}}(),n.readAsText(e,a)}}},{key:"parseFile",value:function(e){var t=this.state,a=t.splitSymbol,n=t.startLine,r=[],i=this.parseSplitSymbol(a);if((e=e.split("\n"))&&e[0].length>5e3)return void d.a.error("文件内容不正确！");for(var s=0;s<e.length;s++){var o=e[s].replace(/\r/,"");r.push(o.split(i))}var l=r.slice(n-1);this.setState({data:l,step:"source",visible:!0,originLineCount:e.length})}},{key:"parseSplitSymbol",value:function(e){switch(e){case"blank":e=" ";break;case"tab":e="\t"}return e}},{key:"__changeStatus__REACT_HOT_LOADER__",value:function(e){var t=this,a=this.state,n=(a.sourceFile,a.file);this.setState(e,function(){t.readFile(n)})}},{key:"__next__REACT_HOT_LOADER__",value:function(){this.setState({step:"target"})}},{key:"__prev__REACT_HOT_LOADER__",value:function(){this.setState({step:"source"})}},{key:"footer",value:function(){var e=this,t=this.state.step;return D.a.createElement("div",null,D.a.createElement(l.a,{onClick:function(){e.setState({visible:!1})}},"取消"),D.a.createElement(l.a,{style:{display:"source"===t?"inline-block":"none"},type:"primary",onClick:this.next},"下一步"),D.a.createElement(l.a,{style:{display:"target"===t?"inline-block":"none"},type:"primary",onClick:this.prev},"上一步"),D.a.createElement(l.a,{style:{display:"target"===t?"inline-block":"none"},onClick:this.importData,type:"primary"},"导入"))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.file,r=t.visible,s=t.step,o=t.targetExchangeWarning;return D.a.createElement("div",null,D.a.createElement("input",{name:"file",type:"file",accept:".txt, .log, .csv",id:"importFile",onClick:this.fileClick,onChange:this.fileChange,style:{display:"none"}}),D.a.createElement(i.a,{maskClosable:!1,title:"本地数据导入",visible:r,onCancel:function(){e.setState({visible:!1})},footer:this.footer()},D.a.createElement(R.a,{data:a,file:n,display:s,formState:this.state,changeStatus:this.changeStatus}),D.a.createElement(w.a,{visible:r,warning:o,data:a,file:n,formState:this.state,changeStatus:function(t){e.setState(t)},display:s})))}}]),t}(O.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(L,"defaultState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/index.js"),__REACT_HOT_LOADER__.register(x,"ImportLocalData","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/index.js"))}()},2e3:function(e,t,a){"use strict";var n=a(30),r=(a.n(n),a(29)),i=a.n(r),s=a(55),o=(a.n(s),a(54)),l=a.n(o),c=a(56),u=(a.n(c),a(52)),d=a.n(u),p=a(25),_=(a.n(p),a(28)),h=a.n(_),f=a(5),m=a.n(f),g=a(8),E=a.n(g),v=a(1),y=a.n(v),k=a(4),T=a.n(k),A=a(3),C=a.n(A),b=a(2),O=a.n(b),D=a(80),R=(a.n(D),a(75)),w=a.n(R),S=a(27),L=(a.n(S),a(26)),x=a.n(L),M=a(34),H=(a.n(M),a(33)),F=a.n(H),N=a(0),I=a.n(N),V=a(668),U=a(51);a.d(t,"a",function(){return j});var P=F.a.Item,B=x.a.Option,z=w.a.Group,j=function(e){function t(){var e,a,n,r;y()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=C()(this,(e=t.__proto__||E()(t)).call.apply(e,[this].concat(s))),n.state={radio:1},n.splitChange=function(){var e;return(e=n).__splitChange__REACT_HOT_LOADER__.apply(e,arguments)},n.charsetChange=function(){var e;return(e=n).__charsetChange__REACT_HOT_LOADER__.apply(e,arguments)},n.asTitle=function(){var e;return(e=n).__asTitle__REACT_HOT_LOADER__.apply(e,arguments)},n.changeStartLine=function(){var e;return(e=n).__changeStartLine__REACT_HOT_LOADER__.apply(e,arguments)},n.radioChange=function(){var e;return(e=n).__radioChange__REACT_HOT_LOADER__.apply(e,arguments)},n.generateCols=function(){var e;return(e=n).__generateCols__REACT_HOT_LOADER__.apply(e,arguments)},r=a,C()(n,r)}return O()(t,e),T()(t,[{key:"__splitChange__REACT_HOT_LOADER__",value:function(e){this.props.changeStatus({splitSymbol:e})}},{key:"__charsetChange__REACT_HOT_LOADER__",value:function(e){this.props.changeStatus({charset:e})}},{key:"__asTitle__REACT_HOT_LOADER__",value:function(e){var t=e.target.checked;this.props.changeStatus({asTitle:t,matchType:t?1:0})}},{key:"__changeStartLine__REACT_HOT_LOADER__",value:function(e){var t=this.props.formState,a=e.target.value;a=a>t.originLineCount?t.originLineCount:a,this.props.changeStatus({startLine:a})}},{key:"__radioChange__REACT_HOT_LOADER__",value:function(e){this.setState({radio:e.target.value})}},{key:"__generateCols__REACT_HOT_LOADER__",value:function(e,t){if(t&&t.length>0){var a=[];return e?(t.forEach(function(e,t){a.push({title:e,width:100,key:t+e,render:function(e,a){return I.a.createElement(V.a,{style:{minWidth:100},value:a[t]})}})}),a):(t.forEach(function(e,t){var n="col-"+(t+1);a.push({key:n,width:100,title:n,render:function(e,a){return I.a.createElement(V.a,{style:{minWidth:100},value:a[t]})}})}),a)}return[]}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.file,r=t.display,s=t.formState,o=this.generateCols(s.asTitle,a[0]),c=s.asTitle?a.slice(1):a,u=this.state.radio;return I.a.createElement("div",{style:{display:"source"===r?"block":"none"}},I.a.createElement(l.a,null,I.a.createElement(F.a,null,I.a.createElement(P,m()({},U.i,{label:"已选文件"}),I.a.createElement("span",{style:{fontSize:"14px"}},n.name||""),"  ",I.a.createElement("span",{style:{color:"#f60"}},"只支持.txt、.csv和.log文件类型")),I.a.createElement(P,m()({},U.i,{label:"分隔符"}),I.a.createElement(z,{onChange:this.radioChange,defaultValue:1},I.a.createElement(w.a,{value:1}),I.a.createElement(x.a,{disabled:2===u,style:{width:"80px"},value:s.splitSymbol,onChange:this.splitChange},I.a.createElement(B,{value:","},"逗号"),I.a.createElement(B,{value:"tab"},"Tab"),I.a.createElement(B,{value:";"},"分号"),I.a.createElement(B,{value:"blank"},"空格"),I.a.createElement(B,{value:"|"},"|"),I.a.createElement(B,{value:"#"},"#"),I.a.createElement(B,{value:"&"},"&")),"  ",I.a.createElement(w.a,{value:2},"自定义"),I.a.createElement(h.a,{disabled:1===u,onChange:function(t){e.splitChange(t.target.value)},style:{width:"80px"}}))),I.a.createElement(P,m()({},U.i,{label:"原始字符集"}),I.a.createElement(x.a,{value:s.charset,onChange:this.charsetChange},I.a.createElement(B,{value:"UTF-8"},"UTF-8"),I.a.createElement(B,{value:"GBK"},"GBK"),I.a.createElement(B,{value:"CP936"},"CP936"),I.a.createElement(B,{value:"ISO-8859"},"ISO-8859"))),I.a.createElement(P,m()({},U.i,{label:"导入起始行"}),I.a.createElement(h.a,{onChange:this.changeStartLine,type:"number",min:1,max:a.length,value:s.startLine})),I.a.createElement(P,m()({},U.i,{label:"首行为标题"}),I.a.createElement(d.a,{checked:s.asTitle,onChange:this.asTitle},"是")))),I.a.createElement(l.a,{className:"no-table-padding"},I.a.createElement(i.a,{rowKey:"id",scroll:{y:240,x:800},bordered:!0,dataSource:c,columns:o})))}}]),t}(N.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(P,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/source.js"),__REACT_HOT_LOADER__.register(B,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/source.js"),__REACT_HOT_LOADER__.register(z,"RadioGroup","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/source.js"),__REACT_HOT_LOADER__.register(j,"ImportSource","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/source.js"))}()},2001:function(e,t,a){"use strict";var n=a(41),r=(a.n(n),a(40)),i=a.n(r),s=a(30),o=(a.n(s),a(29)),l=a.n(o),c=a(5),u=a.n(c),d=a(55),p=(a.n(d),a(54)),_=a.n(p),h=a(23),f=(a.n(h),a(22)),m=a.n(f),g=a(25),E=(a.n(g),a(28)),v=a.n(E),y=a(47),k=a.n(y),T=a(20),A=(a.n(T),a(19)),C=a.n(A),b=a(11),O=a.n(b),D=a(8),R=a.n(D),w=a(1),S=a.n(w),L=a(4),x=a.n(L),M=a(3),H=a.n(M),F=a(2),N=a.n(F),I=a(27),V=(a.n(I),a(26)),U=a.n(V),P=a(34),B=(a.n(P),a(33)),z=a.n(B),j=a(80),q=(a.n(j),a(75)),K=a.n(q),W=a(0),G=a.n(W),Y=a(18),Q=(a.n(Y),a(12)),J=a(130),$=a(920),Z=a(1020),X=a(51),ee=a(1401);a.d(t,"a",function(){return re});var te=K.a.Group,ae=z.a.Item,ne=U.a.Option,re=function(e){function t(){var e,n,r,i;S()(this,t);for(var s=arguments.length,o=Array(s),l=0;l<s;l++)o[l]=arguments[l];return n=r=H()(this,(e=t.__proto__||R()(t)).call.apply(e,[this].concat(o))),r.state={visible:!1,pagination:{current:1,pageSize:10}},r.tableInput=function(){var e;return(e=r).__tableInput__REACT_HOT_LOADER__.apply(e,arguments)},r.tbNameOnChange=function(){var e;return(e=r).__tbNameOnChange__REACT_HOT_LOADER__.apply(e,arguments)},r.debounceSearch=a.i(Y.debounce)(r.tableInput,500,{maxWait:2e3}),r.tableChange=function(){var e;return(e=r).__tableChange__REACT_HOT_LOADER__.apply(e,arguments)},r.checkPartition=function(){var e;return(e=r).__checkPartition__REACT_HOT_LOADER__.apply(e,arguments)},r.createTable=function(){var e;return(e=r).__createTable__REACT_HOT_LOADER__.apply(e,arguments)},r.handleCancel=function(){var e;return(e=r).__handleCancel__REACT_HOT_LOADER__.apply(e,arguments)},r.mapChange=function(){var e;return(e=r).__mapChange__REACT_HOT_LOADER__.apply(e,arguments)},r.changeMatchWay=function(){var e;return(e=r).__changeMatchWay__REACT_HOT_LOADER__.apply(e,arguments)},r.changeImportMode=function(){var e;return(e=r).__changeImportMode__REACT_HOT_LOADER__.apply(e,arguments)},r.tablePartitionChange=function(){var e;return(e=r).__tablePartitionChange__REACT_HOT_LOADER__.apply(e,arguments)},r.ddlChange=function(){var e;return(e=r).__ddlChange__REACT_HOT_LOADER__.apply(e,arguments)},r.generateCols=function(){var e;return(e=r).__generateCols__REACT_HOT_LOADER__.apply(e,arguments)},r.generatePartitions=function(){var e;return(e=r).__generatePartitions__REACT_HOT_LOADER__.apply(e,arguments)},i=n,H()(r,i)}return N()(t,e),x()(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.visible,a=e.visible;t==a||a||this.setState({pagination:{current:1,pageSize:10}})}},{key:"__tableInput__REACT_HOT_LOADER__",value:function(e){var t=this.props.changeStatus;e.length>0&&J.a.getTablesByName({tableName:e}).then(function(e){1===e.code&&t({tableList:e.data||[]})})}},{key:"__tbNameOnChange__REACT_HOT_LOADER__",value:function(e){var t={queryTable:e};""===e&&(t.tableData={}),this.props.changeStatus(t)}},{key:"__tableChange__REACT_HOT_LOADER__",value:function(e,t){var a=t.props.data,n=this.props,r=n.changeStatus,i=n.data,s=i[0]||[];J.a.getTable({tableId:a.id}).then(function(e){if(1===e.code){var t=e.data,n=t.column&&t.column.map(function(e){var t=e.columnName;return s.indexOf(t)>-1?t:""}),i=t.partition&&t.partition.map(function(e){return O()({},e.columnName,"")});r({targetTable:a,queryTable:a.tableName,tableData:t,hasPartition:t.partition&&t.partition.length>0,columnMap:n,originPartitions:t.partition,partitions:i,targetExchangeWarning:!1})}})}},{key:"__checkPartition__REACT_HOT_LOADER__",value:function(){for(var e=this.props.formState,t=e.targetTable,a=e.partitions,n=e.originPartitions,r=0;r<a.length;r++){var i=a[r],s=n[r].columnName;if(""===Q.a.trim(i[s]))return void C.a.error("分区值不可为空！")}J.a.checkTablePartition({tableId:t.id,partitionInfo:a}).then(function(e){e.data?C.a.success("分区存在！"):C.a.error("分区不存在！")})}},{key:"__createTable__REACT_HOT_LOADER__",value:function(){var e=this,t=this.props.formState.sqlText;J.a.createDdlTable({sql:t}).then(function(t){1===t.code&&(e.setState({visible:!1,tableList:[t.data]}),e.tbNameOnChange(t.data.id),e.tableChange(t.data.id,{props:{data:t.data}}),C.a.success("表创建成功!"))})}},{key:"__handleCancel__REACT_HOT_LOADER__",value:function(){this.setState({visible:!1})}},{key:"__mapChange__REACT_HOT_LOADER__",value:function(e,t){var a=this.props,n=a.formState,r=a.changeStatus,i=[].concat(k()(n.columnMap));i[t]=e,r({columnMap:i,targetExchangeWarning:!1})}},{key:"onTableChange",value:function(e){this.setState({pagination:e})}},{key:"__changeMatchWay__REACT_HOT_LOADER__",value:function(e){this.props.formState.asTitle&&this.props.changeStatus({matchType:e.target.value,targetExchangeWarning:!1})}},{key:"__changeImportMode__REACT_HOT_LOADER__",value:function(e){this.props.changeStatus({overwriteFlag:e.target.value})}},{key:"__tablePartitionChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this.props.formState.partitions,r=[].concat(k()(n));r[a]=O()({},t.columnName,e.target.value),this.props.changeStatus({partitions:r})}},{key:"__ddlChange__REACT_HOT_LOADER__",value:function(e,t){(0,this.props.changeStatus)({sqlText:t})}},{key:"__generateCols__REACT_HOT_LOADER__",value:function(e){var t=this,a=this.props,n=a.formState,r=a.warning,i=this.state.pagination,s=n.columnMap,o=e?e[0].map(function(e,t){return G.a.createElement(ne,{key:"col-"+t,value:e},e)}):[],l=G.a.createElement("span",null,"源字段 ",r&&G.a.createElement("span",{style:{color:"#ce3b3b",float:"right"}},"请至少选择一个源字段"));return[{title:"目标字段",key:"target_part",render:function(e,t){return G.a.createElement("span",null,t.columnName)}},{title:l,key:"source_part",render:function(e,a,r){var l=r+(i.current-1)*i.pageSize;return G.a.createElement("span",null,G.a.createElement(U.a,{value:0===n.matchType?"":s[l],disabled:0===n.matchType,onSelect:function(e){t.mapChange(e,l)},style:{width:"200px"}},G.a.createElement(ne,{key:"col-null",value:""},"空字段"),o))}}]}},{key:"__generatePartitions__REACT_HOT_LOADER__",value:function(e){var t=this;return e.map(function(a,n){return G.a.createElement(_.a,{key:"partition-"+n},G.a.createElement("div",{className:"ellipsis",title:a.columnName,style:{width:"60px",display:"inline-block"}},a.columnName),G.a.createElement(v.a,{style:{width:"140px"},onChange:function(e){t.tablePartitionChange(e,a,n)},placeholder:"请输入分区名称"}),"  ",0===n?G.a.createElement(m.a,{type:"primary",onClick:t.checkPartition},"检测"):"",n===e.length-1?G.a.createElement("span",{style:{color:"#f60"}},G.a.createElement("br",null),'点击"检测"按钮，测试分区是否存在'):"")})}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=(t.file,t.display),r=t.formState,s=r.tableList,o=r.tableData,c=r.queryTable,d=r.asTitle,p=this.state.pagination,h=this.generateCols(a,o),f=this.generatePartitions(o.partition||[]),g=o&&o.column,E=s.map(function(e,t){return G.a.createElement(ne,{key:"table-"+t,data:e,value:e.tableName},e.tableName)});return G.a.createElement("div",{style:{display:"target"===n?"block":"none"}},G.a.createElement(_.a,null,G.a.createElement(z.a,null,G.a.createElement(ae,u()({},X.i,{label:"导入至表"}),G.a.createElement("div",null,G.a.createElement(U.a,{mode:"combobox",style:{width:"200px"},onChange:this.tbNameOnChange,onSearch:this.debounceSearch,onSelect:this.tableChange,notFoundContent:"没有发现相关表",value:c,placeholder:"请输入表名",showArrow:!1,filterOption:!1,defaultActiveFirstOption:!1},E),"  ",G.a.createElement(m.a,{type:"primary",onClick:function(){e.setState({visible:!0})}},"新建表"))),G.a.createElement(ae,u()({},X.i,{style:{display:o.partition&&o.partition.length>0?"block":"none"},label:"分区"}),f),G.a.createElement(ae,u()({},X.i,{label:"字段匹配"}),G.a.createElement(te,{value:r.matchType,onChange:this.changeMatchWay},G.a.createElement(K.a,{value:0},"按位置匹配"),G.a.createElement(K.a,{disabled:!d,value:1},"按名称匹配"))),G.a.createElement(ae,u()({},X.i,{label:"导入模式"}),G.a.createElement(te,{value:r.overwriteFlag,onChange:this.changeImportMode},G.a.createElement(K.a,{value:0},"写入"),G.a.createElement(K.a,{value:1},"覆盖"))))),G.a.createElement(_.a,null,G.a.createElement(l.a,{className:"m-table",bordered:!0,columns:h,dataSource:g,onChange:this.onTableChange.bind(this),pagination:p})),G.a.createElement(i.a,{className:"m-codemodal",title:G.a.createElement("span",null,"建表语句",G.a.createElement(Z.a,{style:{marginLeft:"8px"},copyText:ee.a})),maskClosable:!1,style:{height:424},visible:this.state.visible,onCancel:this.handleCancel,onOk:this.createTable},G.a.createElement($.a,{placeholder:ee.a,onChange:this.ddlChange})))}}]),t}(W.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(te,"RadioGroup","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/target.js"),__REACT_HOT_LOADER__.register(ae,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/target.js"),__REACT_HOT_LOADER__.register(ne,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/target.js"),__REACT_HOT_LOADER__.register(re,"ImportTarget","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/target.js"))}()},2002:function(e,t,a){"use strict";var n,r,i=a(8),s=a.n(i),o=a(1),l=a.n(o),c=a(4),u=a.n(c),d=a(3),p=a.n(d),_=a(2),h=a.n(_),f=a(0),m=a.n(f),g=a(16),E=a(18),v=(a.n(E),a(12)),y=(a(45),a(51)),k=a(920),T=a(2003),A=a(298),C=a(1110),b=(n=a.i(g.connect)(function(e){return{project:e.project,user:e.user}},function(e){return{dispatch:e,updateTaskFields:function(t){e({type:A.h.SET_TASK_FIELDS_VALUE,payload:t})},setSelection:function(t){e(a.i(C.e)(t))},getTab:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(t){e(getTab(t))})}}))(r=function(e){function t(){var e,n,r,i;l()(this,t);for(var o=arguments.length,c=Array(o),u=0;u<o;u++)c[u]=arguments[u];return n=r=p()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(c))),r.handleEditorTxtChange=function(){var e;return(e=r).__handleEditorTxtChange__REACT_HOT_LOADER__.apply(e,arguments)},r.onEditorSelection=function(){var e;return(e=r).__onEditorSelection__REACT_HOT_LOADER__.apply(e,arguments)},r.debounceChange=a.i(E.debounce)(r.handleEditorTxtChange,300,{maxWait:2e3}),i=n,p()(r,i)}return h()(t,e),u()(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){}},{key:"__handleEditorTxtChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this.props.taskType,r={merged:!1,cursor:a.getCursor()};v.a.checkExist(n)&&(r.sqlText=t),this.props.updateTaskFields(r)}},{key:"__onEditorSelection__REACT_HOT_LOADER__",value:function(e,t){var a=t.getSelection();if(t.somethingSelected())this.props.setSelection(a);else{""!==this.props.sqlEditor.selection&&this.props.setSelection("")}}},{key:"render",value:function(){var e=this.props,t=e.merged,a=e.sqlText,n=e.cursor;return m.a.createElement("div",{className:"ide-sql"},m.a.createElement("div",{className:"ide-header bd-bottom"},m.a.createElement(T.a,this.props)),m.a.createElement("div",{className:"ide-content"},m.a.createElement("div",{className:"ide-editor bd-bottom"},m.a.createElement(k.a,{key:"jsonEditor",sync:t||void 0,options:y.r,cursor:n,onChange:this.debounceChange,value:a}))))}}]),t}(f.Component))||r,O=b;t.a=O;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(b,"DataSyncScript","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/dataSyncScript/index.js"),__REACT_HOT_LOADER__.register(O,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/dataSyncScript/index.js"))}()},2003:function(e,t,a){"use strict";var n,r,i=a(37),s=(a.n(i),a(15)),o=a.n(s),l=a(23),c=(a.n(l),a(22)),u=a.n(c),d=a(41),p=(a.n(d),a(40)),_=a.n(p),h=a(5),f=a.n(h),m=a(942),g=a.n(m),E=a(20),v=(a.n(E),a(19)),y=a.n(v),k=a(8),T=a.n(k),A=a(1),C=a.n(A),b=a(4),O=a.n(b),D=a(3),R=a.n(D),w=a(2),S=a.n(w),L=a(27),x=(a.n(L),a(26)),M=a.n(x),H=a(34),F=(a.n(H),a(33)),N=a.n(F),I=a(0),V=a.n(I),U=a(13),P=(a.n(U),a(21)),B=a(16),z=a(12),j=a(45),q=a(204),K=a(51),W=a(298),G=N.a.Item,Y=M.a.Option,Q=function(e){function t(){var e,a,n,r;C()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=R()(this,(e=t.__proto__||T()(t)).call.apply(e,[this].concat(s))),n.state={sourceType:void 0,targetType:void 0},r=a,R()(n,r)}return S()(t,e),O()(t,[{key:"newSource",value:function(){P.hashHistory.push("/database")}},{key:"sourceTypeChange",value:function(e){var t=this.props.form.setFieldsValue;this.setState({sourceType:e},function(){t({sourceId:void 0})})}},{key:"targetTypeChange",value:function(e){var t=this.props.form.setFieldsValue;this.setState({targetType:e},function(){t({targetSourceId:void 0})})}},{key:"getSourceList",value:function(){var e=this.state.sourceType;return this.props.dataSourceList.filter(function(t){return t.type==e}).map(function(e){return V.a.createElement(Y,{key:e.id,name:e.dataName,value:""+e.id},e.dataName,"( ",V.a.createElement(q.b,{value:e.type}),"  )")})}},{key:"getTargetList",value:function(){var e=this.state.targetType;return this.props.dataSourceList.filter(function(t){return t.type==e}).map(function(e){return V.a.createElement(Y,{key:e.id,name:e.dataName,value:""+e.id},e.dataName,"( ",V.a.createElement(q.b,{value:e.type})," )")})}},{key:"getTemplateFromNet",value:function(){var e=this,t=this.props.form.validateFields,a=this.props.id;t(function(t,n){if(!t){var r={id:a,sourceMap:{sourceId:n.sourceId,type:n.sourceType},targetMap:{sourceId:n.targetSourceId,type:n.targetType},taskId:a};j.a.getSyncTemplate(r).then(function(t){1==t.code&&(y.a.success("导入成功"),e.props.onSuccess(t.data))})}})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=(t.dataSourceList,t.execConfirmVisible),n=g()(K.n).map(function(e){var t=K.n[e];return V.a.createElement(Y,{key:t,value:t.toString()},V.a.createElement(q.b,{value:t}))});return V.a.createElement(_.a,{maskClosable:!0,visible:a,title:"导入模版",onCancel:this.props.onCancel,onOk:this.getTemplateFromNet.bind(this)},V.a.createElement(N.a,null,V.a.createElement(G,f()({},K.i,{label:"来源类型",hasFeedback:!0}),e("sourceType",{rules:[{required:!0,message:"来源类型不可为空！"}]})(V.a.createElement(M.a,{placeholder:"请选择来源类型",onChange:this.sourceTypeChange.bind(this)},n))),V.a.createElement(G,f()({style:{marginBottom:"35px"}},K.i,{label:"数据源",hasFeedback:!0}),e("sourceId",{rules:[{required:!0,message:"数据源不可为空！"}]})(V.a.createElement(M.a,{placeholder:"请选择数据源"},this.getSourceList()))),V.a.createElement(G,f()({},K.i,{label:"目标类型",hasFeedback:!0}),e("targetType",{rules:[{required:!0,message:"目标类型不可为空！"}]})(V.a.createElement(M.a,{placeholder:"请选择目标类型",onChange:this.targetTypeChange.bind(this)},n))),V.a.createElement(G,f()({},K.i,{label:"数据源",hasFeedback:!0}),e("targetSourceId",{rules:[{required:!0,message:"数据源不可为空！"}]})(V.a.createElement(M.a,{placeholder:"请选择目标数据源"},this.getTargetList())))))}}]),t}(I.Component),J=N.a.create()(Q),$=(n=a.i(B.connect)(function(e){return{dataSourceList:e.offlineTask.dataSync.dataSourceList}},function(e){return{getDataSource:function(){j.a.getOfflineDataSource().then(function(t){var a=[];1===t.code&&(a=t.data),e({type:W.b.LOAD_DATASOURCE,payload:a})})}}}))(r=function(e){function t(){var e,a,n,r;C()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=R()(this,(e=t.__proto__||T()(t)).call.apply(e,[this].concat(s))),n.state={execConfirmVisible:!1},n.sqlFormat=function(){var e;return(e=n).__sqlFormat__REACT_HOT_LOADER__.apply(e,arguments)},n.onSuccess=function(){var e;return(e=n).__onSuccess__REACT_HOT_LOADER__.apply(e,arguments)},r=a,R()(n,r)}return S()(t,e),O()(t,[{key:"componentDidMount",value:function(){(0,this.props.getDataSource)()}},{key:"importTemplate",value:function(){this.setState({execConfirmVisible:!0})}},{key:"__sqlFormat__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.sqlText,a=e.dispatch,n={merged:!0};if(n.sqlText=z.a.jsonFormat(t),!n.sqlText)return void y.a.error("您的JSON格式有误");a({type:W.h.SET_TASK_SQL_FIELD_VALUE,payload:n})}},{key:"__onSuccess__REACT_HOT_LOADER__",value:function(e){var t=this.props.dispatch,a={merged:!0};a.sqlText=z.a.jsonFormat(e),this.setState({execConfirmVisible:!1}),t({type:W.h.SET_TASK_SQL_FIELD_VALUE,payload:a})}},{key:"render",value:function(){var e=this,t=this.state.execConfirmVisible;this.props.currentTabData;return V.a.createElement("div",{className:"ide-toolbar toolbar",style:{position:"relative"}},V.a.createElement(u.a,{onClick:this.importTemplate.bind(this),title:"导入模版",icon:"plus-circle-o",style:{marginLeft:"0px"}},"导入模版"),V.a.createElement(u.a,{icon:"appstore-o",title:"格式化",onClick:this.sqlFormat},"格式化"),V.a.createElement("span",{style:{float:"right",position:"relative",marginRight:"18px",lineHeight:"28px",zIndex:"901"}},V.a.createElement(o.a,{style:{color:"#2491F7",marginRight:"2px"},type:"question-circle-o"}),V.a.createElement("a",{href:K.l.DATA_SYNC,target:"blank"},"帮助文档")),V.a.createElement(J,f()({execConfirmVisible:t,onCancel:function(){e.setState({execConfirmVisible:!1})},onSuccess:this.onSuccess.bind(this)},this.props)))}}]),t}(I.Component))||r,Z=$;t.a=Z;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(G,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/dataSyncScript/toolbar.js"),__REACT_HOT_LOADER__.register(Y,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/dataSyncScript/toolbar.js"),__REACT_HOT_LOADER__.register(Q,"ImportTemplateForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/dataSyncScript/toolbar.js"),__REACT_HOT_LOADER__.register(J,"WrapTemplateForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/dataSyncScript/toolbar.js"),__REACT_HOT_LOADER__.register($,"SyncToolbar","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/dataSyncScript/toolbar.js"),__REACT_HOT_LOADER__.register(Z,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/dataSyncScript/toolbar.js"))}()},2004:function(e,t,a){"use strict";var n=a(20),r=(a.n(n),a(19)),i=a.n(r),s=a(8),o=a.n(s),l=a(1),c=a.n(l),u=a(4),d=a.n(u),p=a(3),_=a.n(p),h=a(2),f=a.n(h),m=a(353),g=(a.n(m),a(352)),E=a.n(g),v=a(0),y=a.n(v),k=a(16),T=a(18),A=(a.n(T),a(1983)),C=a(1984),b=a(1982),O=a(1981),D=a(2008),R=a(45),w=a(298),S=E.a.Step,L=function(e){function t(e){c()(this,t);var a=_()(this,(t.__proto__||o()(t)).call(this,e));return a.state={currentStep:0,loading:!0},a}return f()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.getDataSource,n=t.getJobData,r=t.id;t.currentTab;a(),n({taskId:r}).then(function(t){t?e.setState({currentStep:4,loading:!1}):e.setState({loading:!1})})}},{key:"next",value:function(){this.setState({currentStep:this.state.currentStep+1})}},{key:"prev",value:function(){this.setState({currentStep:this.state.currentStep-1})}},{key:"navtoStep",value:function(e){this.setState({currentStep:e})}},{key:"save",value:function(){var e=this.props,t=e.saveJobData,a=e.dataSync;t(this.generateRqtBody(a))}},{key:"generateRqtBody",value:function(e){var t=a.i(T.cloneDeep)(e),n=this.props,r=n.tabs,i=n.currentTab,s=t.keymap,o=t.sourceMap,l=t.targetMap,c=s.source,u=s.target,d=this.props,p=d.name,_=d.id;t.sourceMap.column=c,t.targetMap.column=u,t.settingMap=t.setting,t.name=p,t.taskId=_;var h=l.type,f=o.type;for(var m in f)f.hasOwnProperty(m)&&(o[m]=f[m]);for(var g in h)h.hasOwnProperty(g)&&(l[g]=h[g]);delete t.keymap,delete t.setting,delete t.dataSourceList,delete t.currentStep;var E=a.i(T.cloneDeep)(r.filter(function(e){return e.id===i})[0]);for(var v in t)t.hasOwnProperty(v)&&(E[v]=t[v]);return E.preSave=!0,E.taskVOS&&(E.dependencyTasks=E.taskVOS.map(function(e){return e}),E.taskVOS=null),E}},{key:"render",value:function(){var e=this.state,t=e.currentStep,a=e.loading,n=this.props,r=n.readWriteLockVO,i=n.notSynced,s=r&&!r.getLock,o=[{title:"数据来源",content:y.a.createElement(A.a,{currentStep:t,navtoStep:this.navtoStep.bind(this)})},{title:"选择目标",content:y.a.createElement(C.a,{currentStep:t,navtoStep:this.navtoStep.bind(this)})},{title:"字段映射",content:y.a.createElement(b.a,{currentStep:t,navtoStep:this.navtoStep.bind(this)})},{title:"通道控制",content:y.a.createElement(O.a,{currentStep:t,navtoStep:this.navtoStep.bind(this)})},{title:"预览保存",content:y.a.createElement(D.a,{currentStep:t,notSynced:i,navtoStep:this.navtoStep.bind(this),saveJob:this.save.bind(this)})}];return a?null:y.a.createElement("div",{className:"m-datasync"},y.a.createElement(E.a,{current:t},o.map(function(e){return y.a.createElement(S,{key:e.title,title:e.title})})),y.a.createElement("div",{className:"steps-content",style:{position:"relative"}},s?y.a.createElement("div",{className:"steps-mask"}):null,o[t].content))}}]),t}(y.a.Component),x=function(e){var t=e.offlineTask.workbench.currentTab;return{dataSync:e.offlineTask.dataSync,tabs:e.offlineTask.workbench.tabs,currentTab:t}},M=function(e){return{getDataSource:function(){R.a.getOfflineDataSource().then(function(t){var a=[];1===t.code&&(a=t.data),e({type:w.b.LOAD_DATASOURCE,payload:a})})},getJobData:function(t){return R.a.getOfflineJobData(t).then(function(t){if(e({type:w.c.INIT_JOBDATA,payload:t.data}),null!==t.data)return e({type:w.h.SET_CURRENT_TAB_SAVED}),t.data;e({type:w.h.SET_CURRENT_TAB_NEW})})},saveJobData:function(t){R.a.saveOfflineJobData(t).then(function(t){1===t.code&&(i.a.success("保存成功！"),e({type:w.h.SET_CURRENT_TAB_SAVED}),e({type:w.h.MAKE_TAB_CLEAN}))})}}},H=a.i(k.connect)(x,M)(L);t.a=H;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(S,"Step","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/index.js"),__REACT_HOT_LOADER__.register(L,"DataSync","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/index.js"),__REACT_HOT_LOADER__.register(x,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/index.js"),__REACT_HOT_LOADER__.register(M,"mapDispatch","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/index.js"),__REACT_HOT_LOADER__.register(H,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/index.js"))}()},2005:function(e,t,a){"use strict";function n(e){var t=e.title,a=e.desc,n=e.visible,r=e.onOk,i=e.placeholder,o=e.value,l=e.onCancel,u=e.onChange,_=e.columnFamily;return d.a.createElement(s.a,{title:t,onOk:r,onCancel:l,visible:n},d.a.createElement("p",null,"批量导入的语法格式：",d.a.createElement("b",{style:{color:"rgb(255, 102, 0)"}},a)),d.a.createElement("p",null,"常用数据类型：",d.a.createElement("span",{style:{color:"rgb(255, 102, 0)"}},p())),_?d.a.createElement("p",null,"已有列族：",d.a.createElement("span",{style:{color:"rgb(255, 102, 0)"}},_.map(function(e){return e+","}))):"",d.a.createElement("br",null),d.a.createElement(c.a,{type:"textarea",rows:6,value:o,onChange:u,placeholder:i}))}var r=a(41),i=(a.n(r),a(40)),s=a.n(i),o=a(25),l=(a.n(o),a(28)),c=a.n(l),u=a(0),d=a.n(u);t.a=n;var p=function(){return d.a.createElement("span",null,d.a.createElement("b",null,"STRING"),",",d.a.createElement("b",null,"VARCHAR"),",",d.a.createElement("b",null,"CHAR"),",",d.a.createElement("b",null,"TINYINT"),",",d.a.createElement("b",null,"SMALLINT"),",",d.a.createElement("b",null,"DECIMAL"),",",d.a.createElement("br",null),d.a.createElement("b",null,"INT"),",",d.a.createElement("b",null,"BIGINT"),",",d.a.createElement("b",null,"FLOAT"),",",d.a.createElement("b",null,"DOUBLE"),",",d.a.createElement("b",null,"TIMESTAMP"),",",d.a.createElement("b",null,"DATE"))};!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(p,"renderHDFSTypes","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/batchModal.js"),__REACT_HOT_LOADER__.register(n,"BatchModal","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/batchModal.js"))}()},2006:function(e,t,a){"use strict";var n=a(41),r=(a.n(n),a(40)),i=a.n(r),s=a(25),o=(a.n(s),a(28)),l=a.n(o),c=a(20),u=(a.n(c),a(19)),d=a.n(u),p=a(8),_=a.n(p),h=a(1),f=a.n(h),m=a(4),g=a.n(m),E=a(3),v=a.n(E),y=a(2),k=a.n(y),T=a(0),A=a.n(T),C=a(12);a.d(t,"a",function(){return b});var b=function(e){function t(){var e,a,n,r;f()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=v()(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(s))),n.state={constValue:""},n.onChange=function(){var e;return(e=n).__onChange__REACT_HOT_LOADER__.apply(e,arguments)},n.submit=function(){var e;return(e=n).__submit__REACT_HOT_LOADER__.apply(e,arguments)},n.close=function(){var e;return(e=n).__close__REACT_HOT_LOADER__.apply(e,arguments)},r=a,v()(n,r)}return k()(t,e),g()(t,[{key:"__onChange__REACT_HOT_LOADER__",value:function(e){this.setState({constValue:e.target.value})}},{key:"__submit__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.onOk,a=e.onCancel,n=C.a.trim(this.state.constValue);if(""!==n){var r={type:"string",key:n,value:n};t&&(t(r),a())}else d.a.error("常量字段不可为空！")}},{key:"__close__REACT_HOT_LOADER__",value:function(){var e=this.props.onCancel;this.setState({constValue:""},function(){e&&e()})}},{key:"render",value:function(){var e=this.state.constValue,t=this.props,a=t.visible;t.onCancel;return A.a.createElement(i.a,{title:"添加常量",onOk:this.submit,onCancel:this.close,visible:a},A.a.createElement(l.a,{value:e,onChange:this.onChange,placeholder:"请输入常量值"}))}}]),t}(A.a.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(b,"ConstModal","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/constModal.js")}()},2007:function(e,t,a){"use strict";var n=a(41),r=(a.n(n),a(40)),i=a.n(r),s=a(25),o=(a.n(s),a(28)),l=a.n(o),c=a(5),u=a.n(c),d=a(310),p=(a.n(d),a(309)),_=a.n(p),h=a(8),f=a.n(h),m=a(1),g=a.n(m),E=a(4),v=a.n(E),y=a(3),k=a.n(y),T=a(2),A=a.n(T),C=a(27),b=(a.n(C),a(26)),O=a.n(b),D=a(34),R=(a.n(D),a(33)),w=a.n(R),S=a(0),L=a.n(S),x=a(51),M=w.a.Item,H=O.a.Option,F=function(e){function t(){var e,a,n,r;g()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=k()(this,(e=t.__proto__||f()(t)).call.apply(e,[this].concat(s))),n.columnFamily=function(){var e;return(e=n).__columnFamily__REACT_HOT_LOADER__.apply(e,arguments)},n.renderFormItems=function(){var e;return(e=n).__renderFormItems__REACT_HOT_LOADER__.apply(e,arguments)},r=a,k()(n,r)}return A()(t,e),v()(t,[{key:"shouldComponentUpdate",value:function(e){return this.props!==e}},{key:"__columnFamily__REACT_HOT_LOADER__",value:function(e){return e&&e.map(function(e){return L.a.createElement(H,{value:e},e)})}},{key:"__renderFormItems__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.keyModal,a=e.dataType,n=e.sourceColumnFamily,r=e.targetColumnFamily,i=t.isReader,s=(t.fileType,t.editField),o=this.props.form.getFieldDecorator;if(i)switch(a){case x.n.FTP:case x.n.HDFS:return[L.a.createElement(M,u()({},x.i,{label:"索引值",key:"index"}),o("index",{rules:[{required:!0,type:"integer",message:"请按要求填写索引值！"}],initialValue:s&&s.index||""})(L.a.createElement(_.a,{style:{width:"100%"},min:0}))),L.a.createElement(M,u()({},x.i,{label:"选择类型",key:"type"}),o("type",{rules:[{required:!0}],initialValue:s&&s.type||"STRING"})(L.a.createElement(O.a,null,L.a.createElement(H,{value:"STRING"},"STRING"),L.a.createElement(H,{value:"LONG"},"LONG"),L.a.createElement(H,{value:"BOOLEAN"},"BOOLEAN"),L.a.createElement(H,{value:"DOUBLE"},"DOUBLE"),L.a.createElement(H,{value:"DATE"},"DATE"))))];case x.n.HBASE:var c=s&&"rowkey"===s.key;return[L.a.createElement(M,u()({},x.i,{label:"列名",key:"key"}),o("key",{rules:[{required:!0,type:"string"}],initialValue:s&&s.key||""})(L.a.createElement(l.a,{style:{width:"100%"},disabled:c}))),L.a.createElement(M,u()({},x.i,{label:"列族",key:"cf"}),o("cf",{rules:[{required:!0}],initialValue:s&&s.cf||""})(L.a.createElement(O.a,{placeHolder:"请选择列族",disabled:c},this.columnFamily(n)))),L.a.createElement(M,u()({},x.i,{label:"选择类型",key:"type"}),o("type",{rules:[{required:!0}],initialValue:s&&s.type||"STRING"})(L.a.createElement(O.a,null,L.a.createElement(H,{value:"STRING"},"STRING"),L.a.createElement(H,{value:"BOOLEAN"},"BOOLEAN"),L.a.createElement(H,{value:"SHORT"},"SHORT"),L.a.createElement(H,{value:"INT"},"INT"),L.a.createElement(H,{value:"LONG"},"LONG"),L.a.createElement(H,{value:"FLOAT"},"FLOAT"),L.a.createElement(H,{value:"DOUBLE"},"DOUBLE"))))]}else switch(a){case x.n.FTP:case x.n.HDFS:return[L.a.createElement(M,u()({},x.i,{label:"选择类型",key:"type"}),o("type",{rules:[{required:!0}],initialValue:s&&s.type||"STRING"})(L.a.createElement(O.a,null,L.a.createElement(H,{value:"STRING"},"STRING"),L.a.createElement(H,{value:"BIGINT"},"BIGINT"),L.a.createElement(H,{value:"TIMESTAMP"},"TIMESTAMP"),L.a.createElement(H,{value:"VARCHAR"},"VARCHAR"),L.a.createElement(H,{value:"CHAR"},"CHAR"),L.a.createElement(H,{value:"TINYINT"},"TINYINT"),L.a.createElement(H,{value:"SMALLINT"},"SMALLINT"),L.a.createElement(H,{value:"DECIMAL"},"DECIMAL"),L.a.createElement(H,{value:"INT"},"INT"),L.a.createElement(H,{value:"FLOAT"},"FLOAT"),L.a.createElement(H,{value:"DOUBLE"},"DOUBLE"),L.a.createElement(H,{value:"DATE"},"DATE")))),L.a.createElement(M,u()({},x.i,{label:"字段名",key:"keyName"}),o("key",{rules:[{required:!0}],initialValue:s&&s.key||""})(L.a.createElement(l.a,null)))];case x.n.HBASE:return[L.a.createElement(M,u()({},x.i,{label:"列名",key:"key"}),o("key",{rules:[{required:!0,type:"string"}],initialValue:s&&s.key||""})(L.a.createElement(l.a,{style:{width:"100%"}}))),L.a.createElement(M,u()({},x.i,{label:"列族",key:"cf"}),o("cf",{rules:[{required:!0}],initialValue:s&&s.cf||""})(L.a.createElement(O.a,{placeHolder:"请选择列族"},this.columnFamily(r)))),L.a.createElement(M,u()({},x.i,{label:"选择类型",key:"type"}),o("type",{rules:[{required:!0}],initialValue:s&&s.type||"STRING"})(L.a.createElement(O.a,null,L.a.createElement(H,{value:"STRING"},"STRING"),L.a.createElement(H,{value:"BOOLEAN"},"BOOLEAN"),L.a.createElement(H,{value:"SHORT"},"SHORT"),L.a.createElement(H,{value:"INT"},"INT"),L.a.createElement(H,{value:"LONG"},"LONG"),L.a.createElement(H,{value:"FLOAT"},"FLOAT"),L.a.createElement(H,{value:"DOUBLE"},"DOUBLE"))))]}return[]}},{key:"render",value:function(){return L.a.createElement(w.a,null,this.renderFormItems())}}]),t}(L.a.Component),N=w.a.create()(F),I=function(e){function t(){var e,a,n,r;g()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=k()(this,(e=t.__proto__||f()(t)).call.apply(e,[this].concat(s))),n.submit=function(){var e;return(e=n).__submit__REACT_HOT_LOADER__.apply(e,arguments)},n.cancel=function(){var e;return(e=n).__cancel__REACT_HOT_LOADER__.apply(e,arguments)},r=a,k()(n,r)}return A()(t,e),v()(t,[{key:"__submit__REACT_HOT_LOADER__",value:function(){var e=this,t=this.props.onOk;this.Form.validateFields(function(a,n){a?t(null,a):(setTimeout(function(){e.Form.resetFields()},200),t(n))})}},{key:"__cancel__REACT_HOT_LOADER__",value:function(){(0,this.props.onCancel)(),this.Form.resetFields()}},{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.visible,r=t.keyModal,s=t.dataType,o=t.sourceColumnFamily,l=t.targetColumnFamily;return L.a.createElement(i.a,{title:a,visible:n,onOk:this.submit,onCancel:this.cancel},L.a.createElement(N,{sourceColumnFamily:o,targetColumnFamily:l,dataType:s,keyModal:r,ref:function(t){return e.Form=t}}))}}]),t}(L.a.Component),V=I;t.a=V;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(M,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/keymapModal.js"),__REACT_HOT_LOADER__.register(H,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/keymapModal.js"),__REACT_HOT_LOADER__.register(F,"KeyForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/keymapModal.js"),__REACT_HOT_LOADER__.register(N,"KeyFormWrapper","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/keymapModal.js"),__REACT_HOT_LOADER__.register(I,"KeyMapModal","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/keymapModal.js"),__REACT_HOT_LOADER__.register(V,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/keymapModal.js"))}()},2008:function(e,t,a){"use strict";function n(){return k.a.createElement("div",{style:{position:"absolute",top:48,left:0,bottom:0,right:0,zIndex:3,background:"rgba(255, 255, 255, 0.4)",cursor:"not-allowed"}})}var r=a(23),i=(a.n(r),a(22)),s=a.n(i),o=a(36),l=(a.n(o),a(35)),c=a.n(l),u=a(8),d=a.n(u),p=a(1),_=a.n(p),h=a(4),f=a.n(h),m=a(3),g=a.n(m),E=a(2),v=a.n(E),y=a(0),k=a.n(y),T=a(1983),A=a(1984),C=a(1982),b=a(1981);a.d(t,"a",function(){return O});var O=function(e){function t(e){_()(this,t);var a=g()(this,(t.__proto__||d()(t)).call(this,e));return a.navtoStep=a.props.navtoStep,a}return v()(t,e),f()(t,[{key:"render",value:function(){var e=this,t=this.navtoStep,a=this.props.notSynced;return k.a.createElement("div",{className:"g-step5"},k.a.createElement("div",{className:"m-preview",style:{padding:"0 20"}},k.a.createElement(c.a,{bordered:!1,style:{marginBottom:10},title:"选择来源",extra:k.a.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.navtoStep(0)}},"修改")},k.a.createElement(T.a,{readonly:!0}),k.a.createElement(n,null)),k.a.createElement(c.a,{bordered:!1,style:{marginBottom:10},title:"选择目标",extra:k.a.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.navtoStep(1)}},"修改")},k.a.createElement(A.a,{readonly:!0}),k.a.createElement(n,null)),k.a.createElement(c.a,{bordered:!1,style:{marginBottom:10},title:"字段映射",extra:k.a.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.navtoStep(2)}},"修改")},k.a.createElement(C.a,{readonly:!0}),k.a.createElement(n,null)),k.a.createElement(c.a,{bordered:!1,style:{marginBottom:10},title:"通道控制",extra:k.a.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.navtoStep(3)}},"修改")},k.a.createElement(b.a,{readonly:!0}),k.a.createElement(n,null))),k.a.createElement("div",{className:"steps-action"},k.a.createElement(s.a,{style:{marginRight:8},onClick:function(){return e.prev(t)}},"上一步"),k.a.createElement(s.a,{type:"primary",disabled:!a,onClick:function(){return e.save(t)}},"保存")))}},{key:"prev",value:function(e){e.call(null,3)}},{key:"save",value:function(e){this.props.saveJob(e)}}]),t}(k.a.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(n,"Mask","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/save.js"),__REACT_HOT_LOADER__.register(O,"Save","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/save.js"))}()},2009:function(e,t,a){"use strict";var n=a(41),r=(a.n(n),a(40)),i=a.n(r),s=a(23),o=(a.n(s),a(22)),l=a.n(o),c=a(5),u=a.n(c),d=a(25),p=(a.n(d),a(28)),_=a.n(p),h=a(8),f=a.n(h),m=a(1),g=a.n(m),E=a(4),v=a.n(E),y=a(3),k=a.n(y),T=a(2),A=a.n(T),C=a(27),b=(a.n(C),a(26)),O=a.n(b),D=a(34),R=(a.n(D),a(33)),w=a.n(R),S=a(0),L=a.n(S),x=a(16),M=a(1357),H=a(45),F=a(51),N=a(298),I=w.a.Item,V=O.a.Option,U=function(e){function t(e){return g()(this,t),k()(this,(t.__proto__||f()(t)).call(this,e))}return A()(t,e),v()(t,[{key:"handleSelectTreeChange",value:function(e){this.props.form.setFieldsValue({nodePid:e})}},{key:"handleResSelectTreeChange",value:function(e){this.props.form.setFieldsValue({resources:e}),this.props.form.validateFields(["resources"])}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.defaultData,n=(t.isEditExist,t.isCreateFromMenu),r=t.isCreateNormal,i={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}};return L.a.createElement(w.a,null,L.a.createElement(I,u()({},i,{label:"函数名称",hasFeedback:!0}),e("name",{rules:[{required:!0,message:"函数名称不可为空！"},{pattern:/^[A-Za-z0-9_-]+$/,message:"函数名称只能由字母、数字、下划线组成!"},{max:20,message:"函数名称不得超过20个字符！"}]})(L.a.createElement(_.a,{placeholder:"请输入函数名称"}))),L.a.createElement(I,u()({},i,{label:"类名",hasFeedback:!0}),e("className",{rules:[{required:!0,message:"类名不能为空"},{pattern:/^[a-zA-Z]+[0-9a-zA-Z_]*(\.[a-zA-Z]+[0-9a-zA-Z_]*)*$/,message:"请输入有效的类名!"}]})(L.a.createElement(_.a,{placeholder:"请输入类名"}))),L.a.createElement(I,u()({},i,{label:"资源",hasFeedback:!0}),e("resources",{rules:[{required:!0,message:"请选择关联资源"},{validator:this.checkNotDir.bind(this)}]})(L.a.createElement(_.a,{type:"hidden"})),L.a.createElement(M.a,{type:F.f.RESOURCE,ispicker:!0,isFilepicker:!0,treeData:this.props.resTreeData,onChange:this.handleResSelectTreeChange.bind(this)})),L.a.createElement(I,u()({},i,{label:"用途",hasFeedback:!0}),e("purpose")(L.a.createElement(_.a,{placeholder:""}))),L.a.createElement(I,u()({},i,{label:"命令格式",hasFeedback:!0}),e("commandFormate",{rules:[{max:200,message:"描述请控制在200个字符以内！"}]})(L.a.createElement(_.a,{type:"textarea",rows:4,placeholder:"请输入函数的命令格式，例如：datetime dateadd(datetime date, bigint delta, string datepart)"}))),L.a.createElement(I,u()({},i,{label:"参数说明",hasFeedback:!0}),e("paramDesc",{rules:[{max:200,message:"描述请控制在200个字符以内！"}]})(L.a.createElement(_.a,{type:"textarea",rows:4,placeholder:"请输入函数的参数说明"}))),L.a.createElement(I,u()({},i,{label:"选择存储位置",hasFeedback:!0}),e("nodePid",{rules:[{required:!0,message:"存储位置必选！"}],initialValue:r?this.props.functionTreeData.id:n?a.parentId:void 0})(L.a.createElement(_.a,{type:"hidden"})),L.a.createElement(M.a,{type:F.f.FUNCTION,ispicker:!0,treeData:this.props.functionTreeData,onChange:this.handleSelectTreeChange.bind(this),defaultNode:r?this.props.functionTreeData.name:n?this.getFolderName(a.parentId):void 0})))}},{key:"checkNotDir",value:function(e,t,a){var n=this.props.resTreeData,r=void 0;(function e(a){a.forEach(function(a,n){a.id===t?r=a.type:e(a.children||[])})})([n]),"folder"===r&&a("请选择具体文件, 而非文件夹"),a()}},{key:"getFolderName",value:function(e){var t=this.props.functionTreeData,a=void 0;return function t(n){n.forEach(function(n,r){n.id===e?a=n.name:t(n.children||[])})}([t]),a}}]),t}(L.a.Component),P=w.a.create()(U),B=function(e){function t(e){g()(this,t);var a=k()(this,(t.__proto__||f()(t)).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.handleCancel=a.handleCancel.bind(a),a.dtcount=0,a}return A()(t,e),v()(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e}},{key:"handleSubmit",value:function(){var e=this,t=this.props,a=(t.isModalShow,t.toggleCreateFn,t.addFn),n=this.form;n.validateFields(function(t,r){t||a(r).then(function(t){t&&(e.closeModal(),n.resetFields())})})}},{key:"handleCancel",value:function(){this.props.toggleCreateFn;this.closeModal()}},{key:"closeModal",value:function(){this.dtcount++,this.props.emptyModalDefault(),this.props.toggleCreateFn()}},{key:"render",value:function(){var e=this,t=this.props,a=t.isModalShow,n=(t.toggleCreateFn,t.functionTreeData),r=t.resTreeData,s=t.defaultData,o=void 0===s,c=!o&&void 0===s.id,u=!o&&!c;return L.a.createElement("div",null,L.a.createElement(i.a,{title:"创建函数",visible:a,footer:[L.a.createElement(l.a,{key:"back",size:"large",onClick:this.handleCancel},"取消"),L.a.createElement(l.a,{key:"submit",type:"primary",size:"large",onClick:this.handleSubmit}," 确认 ")],key:this.dtcount,onCancel:this.handleCancel},L.a.createElement(P,{ref:function(t){return e.form=t},functionTreeData:n,resTreeData:r,isCreateFromMenu:c,isCreateNormal:o,isEditExist:u,defaultData:s})))}}]),t}(L.a.Component),z=a.i(x.connect)(function(e){return{isModalShow:e.offlineTask.modalShow.createFn,functionTreeData:e.offlineTask.functionTree,resTreeData:e.offlineTask.resourceTree,defaultData:e.offlineTask.modalShow.defaultData}},function(e){return{toggleCreateFn:function(){e({type:N.o.TOGGLE_CREATE_FN})},addFn:function(t){return H.a.addOfflineFunction(t).then(function(t){var a=t.data;if(1===t.code)return e({type:N.l.ADD_FOLDER_CHILD,payload:a}),!0})},emptyModalDefault:function(){e({type:N.o.EMPTY_MODAL_DEFAULT})}}})(B);t.a=z;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(I,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/fnModal.js"),__REACT_HOT_LOADER__.register(V,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/fnModal.js"),__REACT_HOT_LOADER__.register(U,"FnForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/fnModal.js"),__REACT_HOT_LOADER__.register(P,"FnFormWrapper","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/fnModal.js"),__REACT_HOT_LOADER__.register(B,"FnModal","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/fnModal.js"),__REACT_HOT_LOADER__.register(z,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/fnModal.js"))}()},2010:function(e,t,a){"use strict";var n=a(41),r=(a.n(n),a(40)),i=a.n(r),s=a(23),o=(a.n(s),a(22)),l=a.n(o),c=a(5),u=a.n(c),d=a(25),p=(a.n(d),a(28)),_=a.n(p),h=a(8),f=a.n(h),m=a(1),g=a.n(m),E=a(4),v=a.n(E),y=a(3),k=a.n(y),T=a(2),A=a.n(T),C=a(27),b=(a.n(C),a(26)),O=a.n(b),D=a(34),R=(a.n(D),a(33)),w=a.n(R),S=a(0),L=a.n(S),x=a(16),M=a(45),H=a(1357),F=a(51),N=a(298),I=w.a.Item,V=O.a.Option,U=function(e){function t(e){return g()(this,t),k()(this,(t.__proto__||f()(t)).call(this,e))}return A()(t,e),v()(t,[{key:"handleSelectTreeChange",value:function(e){this.props.form.setFieldsValue({nodePid:e})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.originFn,n=t.isVisible,r=a.parentId,i=a.name;a.functionId;return n?L.a.createElement(w.a,null,L.a.createElement(I,u()({},F.i,{label:"函数名称",hasFeedback:!0}),e("name",{rules:[{required:!0,message:"函数名称不可为空！"},{max:20,message:"函数名称不得超过20个字符！"}],initialValue:i})(L.a.createElement(_.a,{disabled:!0,placeholder:"请输入函数名称"}))),L.a.createElement(I,u()({},F.i,{label:"选择存储位置",hasFeedback:!0}),e("nodePid",{rules:[{required:!0,message:"存储位置必选！"}],initialValue:r})(L.a.createElement(_.a,{type:"hidden"})),L.a.createElement(H.a,{type:F.f.FUNCTION,ispicker:!0,treeData:this.props.functionTreeData,onChange:this.handleSelectTreeChange.bind(this),defaultNode:this.getFolderName(r)}))):null}},{key:"getFolderName",value:function(e){var t=this.props.functionTreeData,a=void 0;return function t(n){n.forEach(function(n,r){n.id===e?a=n.name:t(n.children||[])})}([t]),a}}]),t}(L.a.Component),P=w.a.create()(U),B=function(e){function t(e){g()(this,t);var a=k()(this,(t.__proto__||f()(t)).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.handleCancel=a.handleCancel.bind(a),a.dtcount=0,a}return A()(t,e),v()(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e}},{key:"handleSubmit",value:function(){var e=this,t=this.props,a=t.doMoveFn,n=t.moveFnData,r=n.originFn.id;this.form.validateFields(function(t,i){t||(i.functionId=r,delete i.name,a(i,n.originFn).then(function(t){t&&e.closeModal()}))})}},{key:"handleCancel",value:function(){this.closeModal()}},{key:"closeModal",value:function(){this.dtcount++,this.props.toggleMoveFn()}},{key:"render",value:function(){var e=this,t=this.props,a=t.moveFnData,n=(t.toggleMoveFn,t.functionTreeData),r=void 0!==a;return L.a.createElement("div",null,L.a.createElement(i.a,{title:"移动函数",visible:r,footer:[L.a.createElement(l.a,{key:"back",size:"large",onClick:this.handleCancel},"取消"),L.a.createElement(l.a,{key:"submit",type:"primary",size:"large",onClick:this.handleSubmit}," 确认 ")],key:this.dtcount,onCancel:this.handleCancel},L.a.createElement(P,u()({ref:function(t){return e.form=t},functionTreeData:n},a))))}}]),t}(L.a.Component),z=a.i(x.connect)(function(e){return{moveFnData:e.offlineTask.modalShow.moveFnData,functionTreeData:e.offlineTask.functionTree}},function(e){return{toggleMoveFn:function(){e({type:N.o.TOGGLE_MOVE_FN})},doMoveFn:function(t,a){return M.a.moveOfflineFn(t).then(function(n){if(1===n.code){var r=a;return r.originPid=a.parentId,r.parentId=t.nodePid,e({type:N.l.EDIT_FOLDER_CHILD,payload:r}),!0}})}}})(B);t.a=z;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(I,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/fnMoveModal.js"),__REACT_HOT_LOADER__.register(V,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/fnMoveModal.js"),__REACT_HOT_LOADER__.register(U,"FnMoveForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/fnMoveModal.js"),__REACT_HOT_LOADER__.register(P,"FnMoveFormWrapper","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/fnMoveModal.js"),__REACT_HOT_LOADER__.register(B,"FnMoveModal","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/fnMoveModal.js"),__REACT_HOT_LOADER__.register(z,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/fnMoveModal.js"))}()},2011:function(e,t,a){"use strict";var n=a(41),r=(a.n(n),a(40)),i=a.n(r),s=a(115),o=(a.n(s),a(114)),l=a.n(o),c=a(23),u=(a.n(c),a(22)),d=a.n(u),p=a(8),_=a.n(p),h=a(1),f=a.n(h),m=a(4),g=a.n(m),E=a(3),v=a.n(E),y=a(2),k=a.n(y),T=a(0),A=a.n(T),C=a(16),b=a(13),O=a.n(b),D=a(45),R=a(298),w=function(e){function t(e){f()(this,t);var a=v()(this,(t.__proto__||_()(t)).call(this,e));return a.state={loading:!0,data:void 0},a}return k()(t,e),g()(t,[{key:"componentWillReceiveProps",value:function(e){e.fnId!==this.props.fnId&&this.getFnDetail(e.fnId)}},{key:"getFnDetail",value:function(e){var t=this;e&&D.a.getOfflineFn({functionId:e}).then(function(e){1===e.code&&t.setState({data:e.data}),t.setState({loading:!1})})}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.fnId,n=e.closeModal,r=this.state,s=r.data,o=r.loading;return A.a.createElement(i.a,{title:"函数详情",visible:t,onCancel:n,key:a,footer:[A.a.createElement(d.a,{size:"large",onClick:n,key:"cancel"},"取消")]},o?A.a.createElement(l.a,null):null===s?"系统异常":A.a.createElement("table",{className:"ant-table ant-table-bordered bd-top bd-left",style:{width:"100%"}},A.a.createElement("tbody",{className:"ant-table-tbody"},A.a.createElement("tr",null,A.a.createElement("td",{width:"15%"},"函数名称"),A.a.createElement("td",null,s.name)),A.a.createElement("tr",null,A.a.createElement("td",null,"用途"),A.a.createElement("td",null,s.purpose)),A.a.createElement("tr",null,A.a.createElement("td",null,"命令格式"),A.a.createElement("td",null,s.commandFormate||"/")),A.a.createElement("tr",null,A.a.createElement("td",null,"参数说明"),A.a.createElement("td",null,s.paramDesc||"/")),A.a.createElement("tr",null,A.a.createElement("td",null,"创建"),A.a.createElement("td",null,s.createUser.userName," 于 ",O()(s.gmtCreate).format("YYYY-MM-DD hh:mm:ss"))),A.a.createElement("tr",null,A.a.createElement("td",null,"最后修改"),A.a.createElement("td",null,s.modifyUser.userName," 于 ",O()(s.gmtModified).format("YYYY-MM-DD hh:mm:ss"))))))}}]),t}(A.a.Component),S=a.i(C.connect)(function(e){var t=e.offlineTask.modalShow;return{visible:t.fnViewModal,fnId:t.fnId}},function(e){return{closeModal:function(){e({type:R.o.HIDE_FNVIEW_MODAL})}}})(w);t.a=S;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(w,"FnViewModal","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/fnViewModal.js"),__REACT_HOT_LOADER__.register(S,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/fnViewModal.js"))}()},2012:function(e,t,a){"use strict";var n=a(41),r=(a.n(n),a(40)),i=a.n(r),s=a(23),o=(a.n(s),a(22)),l=a.n(o),c=a(5),u=a.n(c),d=a(25),p=(a.n(d),a(28)),_=a.n(p),h=a(8),f=a.n(h),m=a(1),g=a.n(m),E=a(4),v=a.n(E),y=a(3),k=a.n(y),T=a(2),A=a.n(T),C=a(34),b=(a.n(C),a(33)),O=a.n(b),D=a(0),R=a.n(D),w=a(16),S=a(61),L=a.n(S),x=a(1357),M=a(45),H=a(298),F=a(350),N=a(51),I=O.a.Item,V=function(e){function t(e){return g()(this,t),k()(this,(t.__proto__||f()(t)).call(this,e))}return A()(t,e),v()(t,[{key:"handleSelectTreeChange",value:function(e){this.props.form.setFieldsValue({nodePid:e})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.defaultData,a=void 0===t;return R.a.createElement(O.a,null,R.a.createElement(I,u()({label:"目录名称"},N.i,{hasFeedback:!0}),e("nodeName",{rules:[{max:20,message:"项目名称不得超过20个字符！"},{required:!0,message:"文件夹名称不能为空"}],initialValue:a?void 0:t.name})(R.a.createElement(_.a,{type:"text",placeholder:"文件夹名称"}))),R.a.createElement(I,u()({label:"选择目录位置"},N.i),e("nodePid",{rules:[{required:!0,message:"请选择目录位置"}],initialValue:a?this.props.treeData.id:t.parentId})(R.a.createElement(_.a,{type:"hidden"})),R.a.createElement(x.a,{type:this.props.cateType,ispicker:!0,treeData:this.props.treeData,onChange:this.handleSelectTreeChange.bind(this),defaultNode:a?this.props.treeData.name:this.getFolderName(t.parentId)})))}},{key:"getFolderName",value:function(e){var t=this.props.treeData,a=void 0;return function t(n){n.forEach(function(n,r){n.id===e?a=n.name:t(n.children||[])})}([t]),a}}]),t}(R.a.Component),U=O.a.create()(V),P=function(e){function t(e){g()(this,t);var a=k()(this,(t.__proto__||f()(t)).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.handleCancel=a.handleCancel.bind(a),a.dtcount=0,a}return A()(t,e),v()(t,[{key:"handleSubmit",value:function(){var e=this,t=this.props,a=(t.isModalShow,t.toggleCreateFolder,t.addOfflineCatelogue),n=t.cateType,r=t.editOfflineCatelogue,i=t.defaultData,s=this.form;s.validateFields(function(t,o){t||(e.isCreate?a(o,n):r(L()(o,{id:i.id}),i,n),e.closeModal(),setTimeout(function(){s.resetFields()},500))})}},{key:"handleCancel",value:function(){var e=this.props;e.isModalShow,e.toggleCreateFolder;this.closeModal()}},{key:"closeModal",value:function(){var e=this.props,t=e.toggleCreateFolder,a=e.emptyModalDefault;this.dtcount++,a(),t()}},{key:"getTreeData",value:function(e){switch(e){case N.f.TASK:case N.f.TASK_DEV:return this.props.taskTreeData;case N.f.RESOURCE:return this.props.resourceTreeData;case N.f.COSTOMFUC:case N.f.FUNCTION:case N.f.SYSFUC:return this.props.functionTreeData;case N.f.SCRIPT:return this.props.scriptTreeData;default:return this.props.taskTreeData}}},{key:"render",value:function(){var e=this,t=this.props,a=t.isModalShow,n=(t.toggleCreateFolder,t.cateType),r=t.defaultData;return r&&r.name?this.isCreate=!1:this.isCreate=!0,R.a.createElement("div",null,R.a.createElement(i.a,{title:this.isCreate?"新建文件夹":"编辑文件夹",visible:a,key:this.dtcount,footer:[R.a.createElement(l.a,{key:"back",size:"large",onClick:this.handleCancel},"取消"),R.a.createElement(l.a,{key:"submit",type:"primary",size:"large",onClick:this.handleSubmit}," 确认 ")],onCancel:this.handleCancel},R.a.createElement(U,{ref:function(t){return e.form=t},treeData:this.getTreeData(n),defaultData:r})))}}]),t}(R.a.Component),B=a.i(w.connect)(function(e){var t=e.offlineTask;return{isModalShow:e.offlineTask.modalShow.createFolder,cateType:e.offlineTask.modalShow.cateType,defaultData:e.offlineTask.modalShow.defaultData,taskTreeData:t.taskTree,resourceTreeData:t.resourceTree,functionTreeData:t.functionTree,scriptTreeData:t.scriptTree}},function(e){var t=a.i(F.a)(e);return{toggleCreateFolder:function(){e({type:H.o.TOGGLE_CREATE_FOLDER})},addOfflineCatelogue:function(e,a){M.a.addOfflineCatelogue(e).then(function(n){1===n.code&&t.loadTreeNode(e.nodePid,a)})},editOfflineCatelogue:function(e,a,n){M.a.editOfflineCatelogue(e).then(function(r){if(1===r.code){var i=a;switch(n){case N.f.TASK:case N.f.TASK_DEV:H.j;break;case N.f.RESOURCE:H.k;break;case N.f.FUNCTION:case N.f.SYSFUC:case N.f.COSTOMFUC:H.l;break;case N.f.SCRIPT:H.i;break;default:H.j}i.name=e.nodeName,i.originPid=a.parentId,i.parentId=e.nodePid,t.loadTreeNode(e.nodePid,N.f.TASK_DEV)}})},emptyModalDefault:function(){e({type:H.o.EMPTY_MODAL_DEFAULT})}}})(P);t.a=B;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(I,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/folderModal.js"),__REACT_HOT_LOADER__.register(V,"FolderForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/folderModal.js"),__REACT_HOT_LOADER__.register(U,"FolderFormWrapper","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/folderModal.js"),__REACT_HOT_LOADER__.register(P,"FolderModal","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/folderModal.js"),__REACT_HOT_LOADER__.register(B,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/folderModal.js"))}()},2013:function(e,t,a){"use strict";var n=a(5),r=a.n(n),i=a(1018),s=(a.n(i),a(1017)),o=a.n(s),l=a(20),c=(a.n(l),a(19)),u=a.n(c),d=a(8),p=a.n(d),_=a(1),h=a.n(_),f=a(4),m=a.n(f),g=a(3),E=a.n(g),v=a(2),y=a.n(v),k=a(41),T=(a.n(k),a(40)),A=a.n(T),C=a(0),b=a.n(C),O=(a(16),a(12)),D=a(45),R=a(51),w=a(2004),S=a(2002),L=a(2014),x=a(2021);a.d(t,"a",function(){return H});var M=A.a.confirm,H=function(e){function t(e){h()(this,t);var a=E()(this,(t.__proto__||p()(t)).call(this,e));return a.unLock=function(){return a.__unLock__REACT_HOT_LOADER__.apply(a,arguments)},a}return y()(t,e),m()(t,[{key:"__unLock__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.tabData,a=e.updateTaskFields,n=e.updateCatalogue,r=t.readWriteLockVO;M({title:"解锁提醒",content:"文件正在被"+r.lastKeepLockUserName+"编辑中，开始编辑时间\n                "+O.a.formatDateTime(r.gmtModified)+"。\n                强制编辑可能导致"+r.lastKeepLockUserName+"对该文件的修改无法保存！\n            ",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){var e={fileId:t.id,lockVersion:r.version};O.a.checkExist(t.taskType)?e.type=R.p.OFFLINE_TASK:O.a.checkExist(t.type)&&(e.type=R.p.OFFLINE_SCRIPT),D.a.unlockFile(e).then(function(r){if(1===r.code){var i=r.data;i.getLock?u.a.success("文件解锁成功！"):A.a.error({title:"解锁失败",content:"文件正在被"+i.lastKeepLockUserName+"编辑中!开始编辑时间\n                                "+O.a.formatDateTime(i.gmtModified)+"."});var s={id:t.id};e.type===R.p.OFFLINE_TASK?D.a.getOfflineTaskDetail(s).then(function(e){if(1===e.code){var r=e.data;r.merged=!0;var i={id:t.id,readWriteLockVO:r.readWriteLockVO};n(i),a(r)}}):e.type===R.p.OFFLINE_SCRIPT&&D.a.getScriptById(s).then(function(e){if(1===e.code){var r=e.data;r.merged=!0;var i={id:t.id,readWriteLockVO:r.readWriteLockVO};n(i),a(r)}})}})},onCancel:function(){}})}},{key:"render",value:function(){var e=this.props.tabData;return b.a.createElement("div",{className:"m-mainbench editor-container"},e&&this.renderBench(e),e&&this.renderLock(e))}},{key:"renderLock",value:function(e){var t=e.readWriteLockVO&&!e.readWriteLockVO.getLock,a=e.createModel&&e.createModel==R.h.SCRIPT,n=e.taskType==R.b.SQL||a||O.a.checkExist(e&&e.type),r="0px";e.taskType&&e.taskType!==R.b.SQL&&!a&&(r="10px");var i="lock-layer";return n?i="lock-layer-editor":e.taskType==R.b.SYNC&&(i="lock-layer-sync"),t?b.a.createElement("div",{className:i},b.a.createElement(o.a,{style:{position:"absolute",top:r,left:"35%",zIndex:"999"},showIcon:!0,message:b.a.createElement("span",null,"当前文件为只读状态！",b.a.createElement("a",{onClick:this.unLock},"解锁")),type:"warning"})):""}},{key:"renderBench",value:function(e){var t=this.props.taskCustomParams;if(R.j.autofocus=!0,R.j.indentUnit=4,R.j.indentWithTabs=!1,O.a.checkExist(e&&e.taskType))switch(e.taskType){case R.b.MR:case R.b.PYTHON:case R.b.VIRTUAL_NODE:return b.a.createElement(L.a,r()({key:e.id},e));case R.b.SYNC:return e.createModel&&e.createModel==R.h.SCRIPT?b.a.createElement(S.a,r()({key:e.id},e)):b.a.createElement(w.a,r()({key:e.id},e));case R.b.SQL:return b.a.createElement(x.a,{options:R.j,taskCustomParams:t,key:e.id,value:e.sqlText,currentTab:e.id,currentTabData:e});default:return b.a.createElement("p",{className:"txt-center",style:{lineHeight:"60px"}},"未知任务类型")}else if(O.a.checkExist(e&&e.type))return b.a.createElement(x.a,{options:R.j,key:e.id,value:e.scriptText,currentTab:e.id,currentTabData:e})}}]),t}(b.a.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(M,"confirm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/mainBench.js"),__REACT_HOT_LOADER__.register(H,"MainBench","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/mainBench.js"))}()},2014:function(e,t,a){"use strict";var n=a(5),r=a.n(n),i=a(25),s=(a.n(i),a(28)),o=a.n(s),l=a(8),c=a.n(l),u=a(1),d=a.n(u),p=a(4),_=a.n(p),h=a(3),f=a.n(h),m=a(2),g=a.n(m),E=a(80),v=(a.n(E),a(75)),y=a.n(v),k=a(27),T=(a.n(k),a(26)),A=a.n(T),C=a(34),b=(a.n(C),a(33)),O=a.n(b),D=a(0),R=a.n(D),w=a(16),S=a(921),L=a(51),x=a(298),M=a(1357),H=O.a.Item,F=A.a.Option,N=y.a.Group,I=function(e){function t(){return d()(this,t),f()(this,(t.__proto__||c()(t)).apply(this,arguments))}return g()(t,e),_()(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.taskType,n=a===L.b.MR,i=a===L.b.PYTHON,s=n?L.c.JAR:i?L.c.PY:"";return R.a.createElement(O.a,null,R.a.createElement(H,r()({},L.i,{label:"任务名称"}),e("name",{rules:[{max:64,message:"任务名称不得超过20个字符！"}],initialValue:t.name})(R.a.createElement(o.a,{disabled:!0}))),R.a.createElement(H,r()({},L.i,{label:"任务类型"}),e("taskType",{rules:[{}],initialValue:a})(R.a.createElement(N,{disabled:!0,onChange:this.handleRadioChange},R.a.createElement(y.a,{value:L.b.SQL},"SQL"),R.a.createElement(y.a,{value:L.b.MR},"MR"),R.a.createElement(y.a,{value:L.b.SYNC},"数据同步"),R.a.createElement(y.a,{value:L.b.PYTHON},"Python"),R.a.createElement(y.a,{value:L.b.VIRTUAL_NODE},"虚节点")))),a!==L.b.VIRTUAL_NODE&&R.a.createElement(H,r()({},L.i,{label:"资源"}),e("resourceIdList",{rules:[{required:!0,message:"请选择关联资源"}],initialValue:t.resourceList.length?t.resourceList[0].id:""})(R.a.createElement(o.a,{type:"hidden"})),R.a.createElement(M.a,{ispicker:!0,isFilepicker:!0,acceptRes:s,type:L.f.RESOURCE,treeData:this.props.resTreeData,onChange:this.handleResChange.bind(this),defaultNode:t.resourceList.length?t.resourceList[0].resourceName:""})),a!==L.b.PYTHON&&a!==L.b.VIRTUAL_NODE&&R.a.createElement(H,r()({},L.i,{label:"mainClass",hasFeedback:!0}),e("mainClass",{rules:[{required:!0,message:"mainClass 不可为空！"}],initialValue:t.mainClass})(R.a.createElement(o.a,{placeholder:"请输入 mainClass"}))),a!==L.b.VIRTUAL_NODE&&R.a.createElement("span",null,R.a.createElement(H,r()({},L.i,{label:"参数"}),e("exeArgs",{initialValue:t.exeArgs})(R.a.createElement(o.a,{placeholder:"请输入任务参数"}))),R.a.createElement(H,r()({},L.i,{label:"存储位置"}),e("nodePid",{rules:[{required:!0,message:"存储位置必选！"}],initialValue:t.nodePid})(R.a.createElement(o.a,{type:"hidden"})),R.a.createElement(M.a,{type:L.f.TASK,ispicker:!0,isFilepicker:!1,treeData:this.props.pathTreeData,onChange:this.handlePathChange.bind(this),defaultNode:t.nodePName}))),R.a.createElement(H,r()({},L.i,{label:"描述",hasFeedback:!0}),e("taskDesc",{rules:[{max:200,message:"描述请控制在200个字符以内！"}],initialValue:t.taskDesc})(R.a.createElement(o.a,{type:"textarea",rows:4,placeholder:"请输入任务描述"}))),R.a.createElement(H,{style:{display:"none"}},e("computeType",{initialValue:1})(R.a.createElement(o.a,{type:"hidden"}))))}},{key:"handleResChange",value:function(e){this.props.form.setFieldsValue({resourceIdList:[e]})}},{key:"handlePathChange",value:function(e){this.props.form.setFieldsValue({nodePid:e})}}]),t}(R.a.Component),V=O.a.create({onValuesChange:function(e,t){var n=e.setFieldsValue,r=e.taskCustomParams,i=!1;""===t.mainClass&&(i=!0),t.invalid=i,""!==t.exeArgs&&(t.taskVariables=a.i(S.d)(r,t.exeArgs)),n(t)}})(I),U=function(e){function t(e){return d()(this,t),f()(this,(t.__proto__||c()(t)).call(this,e))}return g()(t,e),_()(t,[{key:"render",value:function(){return R.a.createElement("div",{className:"m-taskedit",style:{padding:60}},R.a.createElement(V,this.props))}}]),t}(R.a.Component),P=function(e,t){var a=e.offlineTask;return{resTreeData:a.resourceTree,pathTreeData:a.taskTree,taskCustomParams:a.workbench.taskCustomParams}},B=function(e){return{setFieldsValue:function(t){e({type:x.h.SET_TASK_FIELDS_VALUE,payload:t})}}},z=a.i(w.connect)(P,B)(U);t.a=z;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(H,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(F,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(N,"RadioGroup","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(I,"NormalTaskForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(V,"NormalTaskFormWrapper","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(U,"NormalTaskEditor","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(P,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(B,"mapDispatch","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(z,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"))}()},2015:function(e,t,a){"use strict";var n=a(41),r=(a.n(n),a(40)),i=a.n(r),s=a(115),o=(a.n(s),a(114)),l=a.n(o),c=a(23),u=(a.n(c),a(22)),d=a.n(u),p=a(8),_=a.n(p),h=a(1),f=a.n(h),m=a(4),g=a.n(m),E=a(3),v=a.n(E),y=a(2),k=a.n(y),T=a(0),A=a.n(T),C=a(16),b=a(13),O=(a.n(b),a(12)),D=a(45),R=(a(51),a(204)),w=a(298),S=function(e){function t(e){f()(this,t);var a=v()(this,(t.__proto__||_()(t)).call(this,e));return a.state={loading:!0,data:void 0},a}return k()(t,e),g()(t,[{key:"componentWillReceiveProps",value:function(e){e.resId!==this.props.resId&&this.getResDetail(e.resId)}},{key:"getResDetail",value:function(e){var t=this;e&&D.a.getOfflineRes({resourceId:e}).then(function(e){1===e.code&&t.setState({loading:!1,data:e.data})})}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.resId,n=e.closeModal,r=this.state,s=r.data,o=r.loading;return A.a.createElement(i.a,{title:"资源详情",visible:t,onCancel:n,key:a,footer:[A.a.createElement(d.a,{size:"large",onClick:n,key:"cancel"},"取消")]},o?A.a.createElement(l.a,null):null===s?"系统异常":A.a.createElement("table",{className:"ant-table ant-table-bordered bd-top bd-left",style:{width:"100%"}},A.a.createElement("tbody",{className:"ant-table-tbody"},A.a.createElement("tr",null,A.a.createElement("td",{width:"15%"},"资源名称"),A.a.createElement("td",null,s.resourceName)),A.a.createElement("tr",null,A.a.createElement("td",null,"资源描述"),A.a.createElement("td",null,s.resourceDesc)),A.a.createElement("tr",null,A.a.createElement("td",null,"资源类型"),A.a.createElement("td",null," ",A.a.createElement(R.c,{value:s.resourceType}))),A.a.createElement("tr",null,A.a.createElement("td",null,"创建"),A.a.createElement("td",null,s.createUser.userName," 于 ",O.a.formatDateTime(s.gmtCreate))),A.a.createElement("tr",null,A.a.createElement("td",null,"修改时间"),A.a.createElement("td",null,O.a.formatDateTime(s.gmtModified))))))}}]),t}(A.a.Component),L=a.i(C.connect)(function(e){var t=e.offlineTask.modalShow;return{visible:t.resViewModal,resId:t.resId}},function(e){return{closeModal:function(){e({type:w.o.HIDE_RESVIEW_MODAL})}}})(S);t.a=L;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(S,"ResViewModal","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/resViewModal.js"),__REACT_HOT_LOADER__.register(L,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/resViewModal.js"))}()},2016:function(e,t,a){"use strict";var n=a(20),r=(a.n(n),a(19)),i=a.n(r),s=a(55),o=(a.n(s),a(54)),l=a.n(o),c=a(30),u=(a.n(c),a(29)),d=a.n(u),p=a(59),_=a.n(p),h=a(25),f=(a.n(h),a(28)),m=a.n(f),g=a(74),E=(a.n(g),a(73)),v=a.n(E),y=a(122),k=(a.n(y),a(121)),T=a.n(k),A=a(5),C=a.n(A),b=a(56),O=(a.n(b),a(52)),D=a.n(O),R=a(8),w=a.n(R),S=a(1),L=a.n(S),x=a(4),M=a.n(x),H=a(3),F=a.n(H),N=a(2),I=a.n(N),V=a(80),U=(a.n(V),a(75)),P=a.n(U),B=a(34),z=(a.n(B),a(33)),j=a.n(z),q=a(27),K=(a.n(q),a(26)),W=a.n(K),G=a(1359),Y=(a.n(G),a(1358)),Q=a.n(Y),J=a(0),$=a.n(J),Z=a(16),X=a(13),ee=a.n(X),te=a(61),ae=a.n(te),ne=a(45),re=a(298),ie=a(51),se=a(921),oe=a(1362),le=Q.a.Panel,ce=W.a.Option,ue=j.a.Item,de=P.a.Group,pe={labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:18}}},_e=function(e){function t(e){L()(this,t);var a=F()(this,(t.__proto__||w()(t)).call(this,e));return a.changeScheduleStatus=a.props.handleScheduleStatus,a.changeScheduleConf=a.props.handleScheduleConf,a.changeScheduleType=a.props.handleScheduleType,a}return I()(t,e),M()(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,n=a.status,r=a.scheduleConf,i=r.periodType,s=function(){for(var t=[],a=0;a<=23;a++)t.push($.a.createElement(ce,{key:a,value:""+a},a<10?"0"+a:a));return $.a.createElement(W.a,{onChange:e.changeScheduleConf.bind(e)},t)},o=function(){for(var t=[],a=0,n=59;a<=n;a++)t.push($.a.createElement(ce,{key:a,value:""+a},a<10?"0"+a:a));return $.a.createElement(W.a,{onChange:e.changeScheduleConf.bind(e)},t)},l=function(){for(var t=[],a=1;a<=31;a++)t.push($.a.createElement(ce,{key:a,value:""+a},"每月"+a+"号"));return $.a.createElement(W.a,{mode:"multiple",style:{width:"100%"},onChange:e.changeScheduleConf.bind(e)},t)},c=function(){return $.a.createElement(W.a,{mode:"multiple",style:{width:"100%"},onChange:e.changeScheduleConf.bind(e)},$.a.createElement(ce,{key:1,value:"1"},"星期一"),$.a.createElement(ce,{key:2,value:"2"},"星期二"),$.a.createElement(ce,{key:3,value:"3"},"星期三"),$.a.createElement(ce,{key:4,value:"4"},"星期四"),$.a.createElement(ce,{key:5,value:"5"},"星期五"),$.a.createElement(ce,{key:6,value:"6"},"星期六"),$.a.createElement(ce,{key:7,value:"7"},"星期天"))};return $.a.createElement(j.a,{key:i},$.a.createElement(ue,C()({},pe,{label:"调度状态"}),t("scheduleStatus",{valuePropName:"checked",initialValue:0===n||2===n})($.a.createElement(D.a,{onChange:this.changeScheduleStatus.bind(this)},"冻结"))),$.a.createElement(ue,C()({},pe,{label:"生效日期"}),t("beginDate",{initialValue:ee()(r.beginDate,"YYYY-MM-DD")})($.a.createElement(T.a,{onChange:this.changeScheduleConf.bind(this)})),$.a.createElement("span",{className:"split-text",style:{float:"none"}},"-"),t("endDate",{initialValue:ee()(r.endDate,"YYYY-MM-DD")})($.a.createElement(T.a,{onChange:this.changeScheduleConf.bind(this)}))),$.a.createElement(ue,C()({},pe,{label:"调度周期"}),$.a.createElement(v.a,{span:"6"},t("periodType",{initialValue:""+r.periodType,rules:[{required:!0}]})($.a.createElement(W.a,{onChange:this.changeScheduleType.bind(this)},$.a.createElement(ce,{key:0,value:"0"},"分钟"),$.a.createElement(ce,{key:1,value:"1"},"小时"),$.a.createElement(ce,{key:2,value:"2"},"天"),$.a.createElement(ce,{key:3,value:"3"},"周"),$.a.createElement(ce,{key:4,value:"4"},"月"))))),$.a.createElement(ue,{style:{display:"none"}},t("selfReliance",{initialValue:r.selfReliance})($.a.createElement(m.a,{type:"hidden"}))),function(e,a){var n=void 0;switch(e){case 0:n=$.a.createElement("span",{key:e},$.a.createElement(ue,C()({},pe,{label:"开始时间"}),$.a.createElement(v.a,{span:"6"},t("beginHour",{rules:[{required:!0},{validator:a.checkTimeS.bind(a)}],initialValue:""+r.beginHour})(s())),$.a.createElement("span",{className:"split-text"},"时"),$.a.createElement(v.a,{span:"6"},t("beginMin",{rules:[{required:!0}],initialValue:"0"})($.a.createElement(W.a,{disabled:!0},$.a.createElement(ce,{value:"0"},"0")))),$.a.createElement("span",{className:"split-text"},"分")),$.a.createElement(ue,C()({},pe,{label:"间隔时间"}),$.a.createElement(v.a,{span:"6"},t("gapMin",{rules:[{required:!0}],initialValue:""+r.gapMin})($.a.createElement(W.a,{onChange:a.changeScheduleConf.bind(a)},function(){for(var e=[],t=5;t<=55;t+=5)e.push($.a.createElement(ce,{key:t,value:""+t},t,"分钟"));return e}())))),$.a.createElement(ue,C()({},pe,{label:"结束时间"}),$.a.createElement(v.a,{span:"6"},t("endHour",{rules:[{required:!0},{validator:a.checkTimeE.bind(a)}],initialValue:""+r.endHour})(s())),$.a.createElement("span",{className:"split-text"},"时"),$.a.createElement(v.a,{span:"6"},t("endMin",{initialValue:"59"})($.a.createElement(W.a,{disabled:!0},$.a.createElement(ce,{value:"59"},"59")))),$.a.createElement("span",{className:"split-text"},"分")));break;case 1:n=$.a.createElement("span",{key:e},$.a.createElement(ue,C()({},pe,{label:"开始时间"}),$.a.createElement(v.a,{span:"6"},t("beginHour",{rules:[{required:!0},{validator:a.checkTimeS1.bind(a)}],initialValue:""+r.beginHour})(s())),$.a.createElement("span",{className:"split-text"},"时"),$.a.createElement(v.a,{span:"6"},t("beginMin",{rules:[{required:!0},{validator:a.checkTimeS1.bind(a)}],initialValue:""+r.beginMin})(o())),$.a.createElement("span",{className:"split-text"},"分")),$.a.createElement(ue,C()({},pe,{label:"间隔时间"}),$.a.createElement(v.a,{span:"6"},t("gapHour",{rules:[{required:!0}],initialValue:""+r.gapHour})($.a.createElement(W.a,{onChange:a.changeScheduleConf.bind(a)},function(){for(var e=[],t=1,a=23;t<=a;t++)e.push($.a.createElement(ce,{key:t,value:""+t},t,"小时"));return e}())))),$.a.createElement(ue,C()({},pe,{label:"结束时间"}),$.a.createElement(v.a,{span:"6"},t("endHour",{rules:[{required:!0},{validator:a.checkTimeE1.bind(a)}],initialValue:""+r.endHour})(s())),$.a.createElement("span",{className:"split-text"},"时"),$.a.createElement(v.a,{span:"6"},t("endMin",{rules:[{required:!0}],initialValue:"59"})($.a.createElement(W.a,{disabled:!0},$.a.createElement(ce,{value:"59"},"59")))),$.a.createElement("span",{className:"split-text"},"分")));break;case 2:n=$.a.createElement("span",{key:e},$.a.createElement(ue,C()({},pe,{label:"具体时间"}),$.a.createElement(v.a,{span:"6"},t("hour",{rules:[{required:!0}],initialValue:""+r.hour})(s())),$.a.createElement("span",{className:"split-text"},"时"),$.a.createElement(v.a,{span:"6"},t("min",{rules:[{required:!0}],initialValue:""+r.min})(o())),$.a.createElement("span",{className:"split-text"},"分")));break;case 3:n=$.a.createElement("span",{key:e},$.a.createElement(ue,C()({},pe,{label:"选择时间"}),$.a.createElement(v.a,{span:"13"},t("weekDay",{rules:[{required:!0}],initialValue:(""+r.weekDay).split(",")})(c()))),$.a.createElement(ue,C()({},pe,{label:"具体时间"}),$.a.createElement(v.a,{span:"6"},t("hour",{rules:[{required:!0}],initialValue:""+r.hour})(s())),$.a.createElement("span",{className:"split-text"},"时"),$.a.createElement(v.a,{span:"6"},t("min",{rules:[{required:!0}],initialValue:""+r.min})(o())),$.a.createElement("span",{className:"split-text"},"分")));break;case 4:n=$.a.createElement("span",{key:e},$.a.createElement(ue,C()({},pe,{label:"选择时间"}),$.a.createElement(v.a,{span:"13"},t("day",{rules:[{required:!0}],initialValue:(""+r.day).split(",")})(l()))),$.a.createElement(ue,C()({},pe,{label:"具体时间"}),$.a.createElement(v.a,{span:"6"},t("hour",{rules:[{required:!0}],initialValue:""+r.hour})(s())),$.a.createElement("span",{className:"split-text"},"时"),$.a.createElement(v.a,{span:"6"},t("min",{rules:[{required:!0}],initialValue:""+r.min})(o())),$.a.createElement("span",{className:"split-text"},"分")));break;default:n=$.a.createElement("span",null,"something wrong")}return n}(+i,this))}},{key:"checkTimeS",value:function(e,t,a){+t>+this.props.form.getFieldValue("endHour")&&a("开始时间不能晚于结束时间"),a()}},{key:"checkTimeE",value:function(e,t,a){+t<+this.props.form.getFieldValue("beginHour")&&a("结束时间不能早于开始时间"),a()}},{key:"checkTimeS1",value:function(e,t,a){var n=this.props.form;60*+n.getFieldValue("beginHour")+ +n.getFieldValue("beginMin")>60*+n.getFieldValue("endHour")+59&&a("开始时间不能晚于结束时间"),a()}},{key:"checkTimeE1",value:function(e,t,a){var n=this.props.form;60*+n.getFieldValue("beginHour")+ +n.getFieldValue("beginMin")>60*+n.getFieldValue("endHour")+59&&a("结束时间不能早于开始时间"),a()}}]),t}($.a.Component),he=j.a.create()(_e),fe=function(e){function t(e){L()(this,t);var a=F()(this,(t.__proto__||w()(t)).call(this,e)),n=a.props.tabData,r=n.scheduleConf,i=""===r?_()(a.getDefaultScheduleConf(0),{beginDate:"2001-01-01",endDate:"2021-01-01"}):JSON.parse(r);return"undefined"!==i.selfReliance?!1===i.selfReliance?a._selfReliance=0:!0===i.selfReliance?a._selfReliance=1:a._selfReliance=i.selfReliance:a._selfReliance=0,a}return I()(t,e),M()(t,[{key:"handleScheduleStatus",value:function(e){var t=e.target.checked;this.props.changeScheduleStatus(t?2:1)}},{key:"handleScheduleConf",value:function(){var e=this;setTimeout(function(){e.form.validateFields(function(t,a){if(!t){var n=e.form.getFieldsValue();n.selfReliance=e._selfReliance,delete n.scheduleStatus,e.props.changeScheduleConf(n)}})},0)}},{key:"handleScheduleType",value:function(e){var t=this.getDefaultScheduleConf(e),a=ae()({},t,{scheduleStatus:this.form.getFieldValue("scheduleStatus"),beginDate:this.form.getFieldValue("beginDate"),endDate:this.form.getFieldValue("endDate"),periodType:e,selfReliance:this.form.getFieldValue("selfReliance")});this.props.changeScheduleConf(a)}},{key:"getDefaultScheduleConf",value:function(e){return{0:{beginHour:0,gapMin:5,endHour:23,periodType:0},1:{beginHour:0,beginMin:0,endHour:23,gapHour:5,periodType:1},2:{min:0,hour:0,periodType:2},3:{weekDay:3,min:0,hour:23,periodType:3},4:{day:5,hour:0,min:23,periodType:4}}[e]}},{key:"handleDelVOS",value:function(e){this.props.delVOS(e.id)}},{key:"handleAddVOS",value:function(e){this.props.addVOS(e)}},{key:"goEdit",value:function(e){this.props.getTaskDetail(e.id)}},{key:"setSelfReliance",value:function(e){var t=e.target.value;this._selfReliance=t,this.handleScheduleConf()}},{key:"render",value:function(){var e=this,t=this.props.tabData,a=t.readWriteLockVO&&!t.readWriteLockVO.getLock,n=t.scheduleConf,r=""===n?_()(this.getDefaultScheduleConf(0),{beginDate:"2001-01-01",endDate:"2021-01-01"}):JSON.parse(n),i=[{title:"任务名称",dataIndex:"name",key:"name",render:function(t,a){return $.a.createElement("a",{href:"javascript:void(0)",onClick:e.goEdit.bind(e,a)},t)}},{title:"责任人",dataIndex:"createUser.userName",key:"createUser.userName"},{title:"操作",key:"action",render:function(t,a){return $.a.createElement("span",null,$.a.createElement("a",{href:"javascript:void(0)",onClick:e.handleDelVOS.bind(e,a)},"删除"))}}],s={display:"block",height:"30px",lineHeight:"30px"};return $.a.createElement("div",{className:"m-scheduling",style:{position:"relative"}},a?$.a.createElement("div",{className:"cover-mask"}):null,$.a.createElement(Q.a,{bordered:!1,defaultActiveKey:["1","2","3"]},$.a.createElement(le,{key:"1",header:"调度属性"},$.a.createElement(he,{scheduleConf:r,status:t.scheduleStatus,handleScheduleStatus:this.handleScheduleStatus.bind(this),handleScheduleConf:this.handleScheduleConf.bind(this),handleScheduleType:this.handleScheduleType.bind(this),ref:function(t){return e.form=t},key:t.id+" - "+r.periodType})),t.taskType!==ie.b.VIRTUAL_NODE&&$.a.createElement(le,{key:"2",header:"任务间依赖"},$.a.createElement(j.a,null,$.a.createElement(ue,C()({},pe,{label:"上游任务"}),$.a.createElement(me,{onSelect:this.handleAddVOS.bind(this),taskId:t.id}))),$.a.createElement(l.a,null,$.a.createElement(v.a,null,$.a.createElement(d.a,{className:"m-table",columns:i,bordered:!1,dataSource:t.taskVOS,rowKey:function(e){return e.id.lable}})))),$.a.createElement(le,{key:"3",header:"跨周期依赖"},$.a.createElement(l.a,null,$.a.createElement(v.a,{span:"1"}),$.a.createElement(v.a,null,$.a.createElement(de,{onChange:this.setSelfReliance.bind(this),value:this._selfReliance},$.a.createElement(P.a,{style:s,value:0},"不依赖上一调度周期"),$.a.createElement(P.a,{style:s,value:1},"自依赖，等待上一调度周期成功，才能继续运行"),$.a.createElement(P.a,{style:s,value:3},"自依赖，等待上一调度周期结束，才能继续运行 ",$.a.createElement(oe.a,{style:{position:"inherit"},doc:"taskDependentTypeDesc"})),$.a.createElement(P.a,{style:s,value:2},"等待下游任务的上一周期成功，才能继续运行"),$.a.createElement(P.a,{style:s,value:4},"等待下游任务的上一周期结束，才能继续运行 ",$.a.createElement(oe.a,{style:{position:"inherit"},doc:"taskDependentTypeDesc"}))))))))}}]),t}($.a.Component),me=function(e){function t(e){L()(this,t);var a=F()(this,(t.__proto__||w()(t)).call(this,e));return a.searchVOS=a.fetchVOS.bind(a),a.handleClick=a.handleClick.bind(a),a.selectVOS=a.props.onSelect,a.taskId=a.props.taskId,a.state={list:[]},a}return I()(t,e),M()(t,[{key:"fetchVOS",value:function(e){var t=this,a=e.target.value;if(""===a.trim())return void this.setState({list:[]});ne.a.getOfflineTaskByName({name:a,taskId:this.taskId}).then(function(e){1===e.code&&(0===e.data.length&&i.a.error("没有符合条件的任务"),t.setState({list:e.data,fetching:!1}))})}},{key:"handleClick",value:function(e){var t=this;ne.a.checkIsLoop({taskId:this.taskId,dependencyTaskId:e.id}).then(function(a){1===a.code&&(a.data?i.a.error("添加失败，该任务循环依赖任务"+(a.data.name||"")+"!"):(t.selectVOS(e),t.$input.value="",t.setState({list:[]})))})}},{key:"render",value:function(){var e=this,t=this.state.list;return $.a.createElement("div",{className:"m-taskselector"},$.a.createElement("input",{onInput:a.i(se.c)(this.searchVOS,500,{maxWait:2e3}),ref:function(t){return e.$input=t},className:"ant-input"}),t.length>0&&$.a.createElement("ul",{className:"tasklist"},t.map(function(t){return $.a.createElement("li",{className:"taskitem",onClick:function(){e.handleClick(t)},key:t.id},t.name)})))}}]),t}($.a.Component),ge=function(e,t){return C()({},t)},Ee=function(e){return{changeScheduleConf:function(t){e({type:re.h.CHANGE_SCHEDULE_CONF,payload:t})},changeScheduleStatus:function(t){e({type:re.h.CHANGE_SCHEDULE_STATUS,payload:t})},addVOS:function(t){e({type:re.h.ADD_VOS,payload:t})},delVOS:function(t){e({type:re.h.DEL_VOS,payload:t})},getTaskDetail:function(t){ne.a.getOfflineTaskDetail({id:t}).then(function(a){1===a.code&&(e({type:re.h.LOAD_TASK_DETAIL,payload:a.data}),e({type:re.h.OPEN_TASK_TAB,payload:t}))})}}},ve=a.i(Z.connect)(ge,Ee)(fe);t.a=ve;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(le,"Panel","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(ce,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(ue,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(de,"RadioGroup","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(pe,"formItemLayout","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(_e,"ScheduleForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(he,"FormWrap","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(fe,"SchedulingConfig","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(me,"TaskSelector","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(ge,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(Ee,"mapDispatch","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(ve,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"))}()},2017:function(e,t,a){"use strict";var n=a(55),r=(a.n(n),a(54)),i=a.n(r),s=a(74),o=(a.n(s),a(73)),l=a.n(o),c=a(8),u=a.n(c),d=a(1),p=a.n(d),_=a(4),h=a.n(_),f=a(3),m=a.n(f),g=a(2),E=a.n(g),v=a(1359),y=(a.n(v),a(1358)),k=a.n(y),T=a(0),A=a.n(T),C=a(12);a(298);a.d(t,"a",function(){return O});var b=k.a.Panel,O=function(e){function t(e){return p()(this,t),m()(this,(t.__proto__||u()(t)).call(this,e))}return E()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.tabData;return A.a.createElement("div",{className:"m-taksdetail"},A.a.createElement(k.a,{bordered:!1,defaultActiveKey:["1","2"]},A.a.createElement(b,{key:"1",header:"脚本属性"},A.a.createElement(i.a,{className:"task-info"},A.a.createElement(i.a,null,A.a.createElement(l.a,{span:"10",className:"txt-right"},"脚本名称："),A.a.createElement(l.a,{span:"14"},e.name)),A.a.createElement(i.a,null,A.a.createElement(l.a,{span:"10",className:"txt-right"},"创建人员："),A.a.createElement(l.a,{span:"14"},e.createUser.userName)),A.a.createElement(i.a,null,A.a.createElement(l.a,{span:"10",className:"txt-right"},"创建时间："),A.a.createElement(l.a,{span:"14"},C.a.formatDateTime(e.gmtCreate))),A.a.createElement(i.a,null,A.a.createElement(l.a,{span:"10",className:"txt-right"},"最近修改人员："),A.a.createElement(l.a,{span:"14"},e.modifyUser.userName)),A.a.createElement(i.a,null,A.a.createElement(l.a,{span:"10",className:"txt-right"},"最近修改时间："),A.a.createElement(l.a,{span:"14"},C.a.formatDateTime(e.gmtModified))),A.a.createElement(i.a,null,A.a.createElement(l.a,{span:"10",className:"txt-right"},"描述："),A.a.createElement(l.a,{span:"14",style:{lineHeight:"20px",padding:"10 0"}},e.scriptDesc))))))}}]),t}(A.a.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(b,"Panel","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/scriptDetail.js"),__REACT_HOT_LOADER__.register(O,"ScriptDetail","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/scriptDetail.js"))}()},2018:function(e,t,a){"use strict";var n=a(41),r=(a.n(n),a(40)),i=a.n(r),s=a(23),o=(a.n(s),a(22)),l=a.n(o),c=a(59),u=a.n(c),d=a(5),p=a.n(d),_=a(25),h=(a.n(_),a(28)),f=a.n(h),m=a(8),g=a.n(m),E=a(1),v=a.n(E),y=a(4),k=a.n(y),T=a(3),A=a.n(T),C=a(2),b=a.n(C),O=a(80),D=(a.n(O),a(75)),R=a.n(D),w=a(27),S=(a.n(w),a(26)),L=a.n(S),x=a(34),M=(a.n(x),a(33)),H=a.n(M),F=a(0),N=a.n(F),I=a(16),V=a(45),U=a(298),P=a(51),B=a(1357),z=H.a.Item,j=L.a.Optioin,q=R.a.Group,K=function(e){function t(e){v()(this,t);var a=A()(this,(t.__proto__||g()(t)).call(this,e));return a.loadScritTypes=function(){return a.__loadScritTypes__REACT_HOT_LOADER__.apply(a,arguments)},a.handleRadioChange=a.handleRadioChange.bind(a),a.isEditExist=!1,a.state={value:0,types:[]},a}return b()(t,e),k()(t,[{key:"componentDidMount",value:function(){this.loadScritTypes()}},{key:"__loadScritTypes__REACT_HOT_LOADER__",value:function(){var e=this;V.a.getScriptTypes().then(function(t){e.setState({types:t.data||[]})})}},{key:"handleSelectTreeChange",value:function(e){this.props.form.setFieldsValue({nodePid:e})}},{key:"handleRadioChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.defaultData,a=this.state.types,n=void 0===t,r=!n&&void 0===t.id;this.isEditExist=!n&&!r;var i=n?this.state.value:r?this.state.value:t.taskType,s=a.map(function(e){return N.a.createElement(R.a,{key:e.value,value:e.value},e.name)});return N.a.createElement(H.a,null,N.a.createElement(z,p()({},P.i,{label:"脚本名称",hasFeedback:!0}),e("name",{rules:[{required:!0,message:"脚本名称不可为空！"},{max:64,message:"脚本名称不得超过20个字符！"},{pattern:/^[A-Za-z0-9_-]+$/,message:"脚本名称只能由字母、数字、下划线组成!"}],initialValue:n?void 0:r?void 0:t.name})(N.a.createElement(f.a,{placeholder:"请输入脚本名称"}))),N.a.createElement(z,p()({},P.i,{label:"脚本类型"}),e("type",{rules:[{required:!0,message:"请选择任务类型"}],initialValue:a.length>0?a[0].value:i})(N.a.createElement(q,{disabled:!n&&!r,onChange:this.handleRadioChange},s))),N.a.createElement(z,p()({},P.i,{label:"存储位置"}),e("nodePid",{rules:[{required:!0,message:"存储位置必选！"}],initialValue:n?this.props.treeData.id:r?t.parentId:t.nodePid})(N.a.createElement(f.a,{type:"hidden"})),N.a.createElement(B.a,{type:P.f.SCRIPT,ispicker:!0,treeData:this.props.treeData,onChange:this.handleSelectTreeChange.bind(this),defaultNode:n?this.props.treeData.name:r?this.getFolderName(t.parentId):this.getFolderName(t.nodePid)})),N.a.createElement(z,p()({},P.i,{label:"描述",hasFeedback:!0}),e("scriptDesc",{rules:[{max:200,message:"描述请控制在200个字符以内！"}],initialValue:n?void 0:r?void 0:t.scriptDesc})(N.a.createElement(f.a,{type:"textarea",rows:4,placeholder:"请输入脚本描述"}))))}},{key:"checkNotDir",value:function(e,t,a){var n=this.props.resTreeData,r=void 0;(function e(a){a.forEach(function(a,n){a.id===t?r=a.type:e(a.children||[])})})([n]),"folder"===r&&a("请选择具体文件, 而非文件夹"),a()}},{key:"getFolderName",value:function(e){var t=this.props.treeData,a=void 0;return function t(n){n.forEach(function(n,r){n.id===e?a=n.name:t(n.children||[])})}([t]),a}}]),t}(N.a.Component),W=H.a.create()(K),G=function(e){function t(e){v()(this,t);var a=A()(this,(t.__proto__||g()(t)).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.closeModal=a.closeModal.bind(a),a.dtcount=0,a}return b()(t,e),k()(t,[{key:"handleSubmit",value:function(){var e=this,t=this.props,a=(t.isModalShow,t.toggleCreateScript,t.createScript),n=t.defaultData,r=this.form,i=void 0===n,s=!i&&void 0===n.id,o=!i&&!s;r.validateFields(function(t,i){t||(i.resourceIdList&&(i.resourceIdList=[i.resourceIdList]),void 0!==n&&void 0!==n.id&&(i.id=n.id,i.version=n.version,i.readWriteLockVO=u()({},n.readWriteLockVO)),e.closeModal(),a(i,o,n),setTimeout(function(){r.resetFields()},500))})}},{key:"closeModal",value:function(){this.dtcount++,this.props.emptyModalDefault(),this.props.toggleCreateScript()}},{key:"render",value:function(){var e=this,t=this.props,a=t.isModalShow,n=t.scriptTreeData,r=t.defaultData;return r&&r.name?this.isCreate=!1:this.isCreate=!0,N.a.createElement("div",null,N.a.createElement(i.a,{title:this.isCreate?"新建脚本":"编辑脚本",visible:a,footer:[N.a.createElement(l.a,{key:"back",size:"large",onClick:this.closeModal},"取消"),N.a.createElement(l.a,{key:"submit",type:"primary",size:"large",onClick:this.handleSubmit}," 确认 ")],onCancel:this.closeModal},N.a.createElement(W,{ref:function(t){return e.form=t},treeData:n,defaultData:r})))}}]),t}(N.a.Component),Y=a.i(I.connect)(function(e){return{isModalShow:e.offlineTask.modalShow.createScript,scriptTreeData:e.offlineTask.scriptTree,defaultData:e.offlineTask.modalShow.defaultData}},function(e){return{toggleCreateScript:function(){e({type:U.o.TOGGLE_CREATE_SCRIPT})},createScript:function(t,a,n){V.a.saveScript(t).then(function(t){V.a.getScriptById({id:t.data.id}).then(function(r){if(a){var i=u()(n,t.data);i.originPid=n.nodePid,e({type:U.i.EDIT_FOLDER_CHILD,payload:i}),e({type:U.h.SET_TASK_FIELDS_VALUE,payload:r.data})}else{var s=t.data;s.catalogueType&&(s.catalogueType=P.f.SCRIPT),e({type:U.i.ADD_FOLDER_CHILD,payload:s}),e({type:U.h.LOAD_TASK_DETAIL,payload:r.data}),e({type:U.h.OPEN_TASK_TAB,payload:r.data.id})}})})},emptyModalDefault:function(){e({type:U.o.EMPTY_MODAL_DEFAULT})}}})(G);t.a=Y;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(z,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/scriptModal.js"),__REACT_HOT_LOADER__.register(j,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/scriptModal.js"),__REACT_HOT_LOADER__.register(q,"RadioGroup","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/scriptModal.js"),__REACT_HOT_LOADER__.register(K,"ScriptForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/scriptModal.js"),__REACT_HOT_LOADER__.register(W,"ScriptFormWrapper","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/scriptModal.js"),__REACT_HOT_LOADER__.register(G,"ScriptModal","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/scriptModal.js"),__REACT_HOT_LOADER__.register(Y,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/scriptModal.js"))}()},2019:function(e,t,a){"use strict";var n=a(5),r=a.n(n),i=a(8),s=a.n(i),o=a(1),l=a.n(o),c=a(4),u=a.n(c),d=a(3),p=a.n(d),_=a(2),h=a.n(_),f=a(68),m=(a.n(f),a(67)),g=a.n(m),E=a(0),v=a.n(E),y=a(16),k=a(12),T=a(920),A=a(51),C=a(298),b=a(2023),O=a(2017),D=a(2016),R=a(2026),w=a(2025),S=g.a.TabPane,L=function(e){function t(e){l()(this,t);var a=p()(this,(t.__proto__||s()(t)).call(this,e));return a.state={selected:"",expanded:!1},a.handleCustomParamsChange=function(){return a.__handleCustomParamsChange__REACT_HOT_LOADER__.apply(a,arguments)},a.tabClick=function(){return a.__tabClick__REACT_HOT_LOADER__.apply(a,arguments)},a.getTabPanes=function(){return a.__getTabPanes__REACT_HOT_LOADER__.apply(a,arguments)},a}return h()(t,e),u()(t,[{key:"handleTaskParamChange",value:function(e,t){e!==t&&this.props.setTaskParams({taskParams:t})}},{key:"__handleCustomParamsChange__REACT_HOT_LOADER__",value:function(e){this.props.setTaskParams(e)}},{key:"__tabClick__REACT_HOT_LOADER__",value:function(e){var t=this.state,a=t.selected,n=t.expanded;e===a&&n?(this.setState({selected:"",expanded:!1}),this.SideBench.style.width="30px"):e!==a&&(this.SideBench.style.width="500px",this.setState({selected:e,expanded:!0}))}},{key:"__getTabPanes__REACT_HOT_LOADER__",value:function(){var e=this.props.tabData,t=e.readWriteLockVO&&!e.readWriteLockVO.getLock,a=[v.a.createElement(S,{tab:v.a.createElement("span",{className:"title-vertical"},"任务属性"),key:"params1"},v.a.createElement(b.a,{tabData:e})),v.a.createElement(S,{tab:v.a.createElement("span",{className:"title-vertical"},"调度依赖"),key:"params2"},v.a.createElement(D.a,{tabData:e})),v.a.createElement(S,{tab:v.a.createElement("span",{className:"title-vertical"},"依赖视图"),key:"params4"},v.a.createElement(R.a,{tabData:e}))];if(e&&k.a.checkExist(e.taskType)&&e.taskType!==A.b.VIRTUAL_NODE)a.push([v.a.createElement(S,{tab:v.a.createElement("span",{className:"title-vertical"},"任务参数"),key:"params5"},v.a.createElement(w.a,{tabData:e,onChange:this.handleCustomParamsChange})),v.a.createElement(S,{tab:v.a.createElement("span",{className:"title-vertical"},"环境参数"),key:"params3"},v.a.createElement(T.a,{options:r()({},A.k,{readOnly:t}),key:"params"+e.id,value:e.taskParams,onFocus:function(){},focusOut:function(){},onChange:this.handleTaskParamChange.bind(this)}))]);else if(k.a.checkExist(e.type))return v.a.createElement(S,{tab:v.a.createElement("span",{className:"title-vertical"},"脚本属性"),key:"params1"},v.a.createElement(O.a,{tabData:e}));return a}},{key:"render",value:function(){var e=this;return v.a.createElement("div",{className:"m-siderbench bd-left padding-r0",ref:function(t){e.SideBench=t}},v.a.createElement(g.a,{activeKey:this.state.selected,type:"card",className:"task-params",tabPosition:"right",onTabClick:this.tabClick},this.getTabPanes()))}}]),t}(v.a.Component),x=a.i(y.connect)(function(e){return{}},function(e){return{setTaskParams:function(t){e({type:C.h.SET_TASK_FIELDS_VALUE_SILENT,payload:t})}}})(L);t.a=x;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(S,"TabPane","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/siderBench.js"),__REACT_HOT_LOADER__.register(L,"SiderBench","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/siderBench.js"),__REACT_HOT_LOADER__.register(x,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/siderBench.js"))}()},2020:function(e,t,a){"use strict";var n=a(92),r=(a.n(n),a(81)),i=a.n(r),s=a(37),o=(a.n(s),a(15)),l=a.n(o),c=a(23),u=(a.n(c),a(22)),d=a.n(u),p=a(30),_=(a.n(p),a(29)),h=a.n(_),f=a(8),m=a.n(f),g=a(1),E=a.n(g),v=a(4),y=a.n(v),k=a(3),T=a.n(k),A=a(2),C=a.n(A),b=a(68),O=(a.n(b),a(67)),D=a.n(O),R=a(0),w=a.n(R),S=a(18),L=(a.n(S),a(366)),x=a(920),M=a(1110),H=D.a.TabPane,F={mode:"text/x-sql",lineNumbers:!1,readOnly:!0,autofocus:!1,indentWithTabs:!0,smartIndent:!0},N={position:"absolute",bottom:"0px",height:"30px"},I=function(e){function t(){var e,a,n,r;E()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=T()(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(s))),n.state={currentPage:1},n.onChange=function(){var e;return(e=n).__onChange__REACT_HOT_LOADER__.apply(e,arguments)},r=a,T()(n,r)}return C()(t,e),y()(t,[{key:"__onChange__REACT_HOT_LOADER__",value:function(e){this.setState({currentPage:e.current})}},{key:"generateCols",value:function(e){var t=this.state.currentPage;if(e&&e.length>0){var a=[{title:"序号",key:"t-id",render:function(e,a,n){return 10*(t-1)+(n+1)}}];return e.forEach(function(e,t){a.push({title:e,key:t+e,render:function(e,a){return w.a.createElement("textarea",{title:a[t],value:a[t]})}})}),a}return[]}},{key:"render",value:function(){var e=this.props.data,t=e.slice(1,e.length),a=this.generateCols(e[0]);return w.a.createElement(h.a,{rowKey:"id",scroll:{x:!0},className:"console-table",bordered:!0,dataSource:t,onChange:this.onChange,columns:a})}}]),t}(R.Component),V=function(e){function t(){var e,a,n,r;E()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=T()(this,(e=t.__proto__||m()(t)).call.apply(e,[this].concat(s))),n.state={activeKey:"console-log"},n.onEdit=function(){var e;return(e=n).__onEdit__REACT_HOT_LOADER__.apply(e,arguments)},n.onChange=function(){var e;return(e=n).__onChange__REACT_HOT_LOADER__.apply(e,arguments)},n.focusEditor=function(){var e;return(e=n).__focusEditor__REACT_HOT_LOADER__.apply(e,arguments)},n.remove=function(){var e;return(e=n).__remove__REACT_HOT_LOADER__.apply(e,arguments)},n.closeConsole=function(){var e;return(e=n).__closeConsole__REACT_HOT_LOADER__.apply(e,arguments)},n.appendLog=function(){var e;return(e=n).__appendLog__REACT_HOT_LOADER__.apply(e,arguments)},n.exportCsv=function(){var e;return(e=n).__exportCsv__REACT_HOT_LOADER__.apply(e,arguments)},r=a,T()(n,r)}return C()(t,e),y()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.data,n=this.props.data;t.showRes&&t.results.length>0&&!a.i(S.isEqual)(t.results,n.results)?this.setState({activeKey:""+(t.results.length-1)}):0===t.results.length&&this.setState({activeKey:"console-log"},this.focusEditor)}},{key:"__onEdit__REACT_HOT_LOADER__",value:function(e,t){this[t](e)}},{key:"__onChange__REACT_HOT_LOADER__",value:function(e){var t=this;this.setState({activeKey:e},function(){"console-log"===e&&t.focusEditor()})}},{key:"__focusEditor__REACT_HOT_LOADER__",value:function(){var e=this.editor.self;e.doc.setCursor(e.lineCount(),null)}},{key:"__remove__REACT_HOT_LOADER__",value:function(e){var t=this.props,n=t.currentTab;(0,t.dispatch)(a.i(M.g)(n,parseInt(e,10)))}},{key:"__closeConsole__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.currentTab;(0,e.dispatch)(a.i(M.h)(t))}},{key:"__appendLog__REACT_HOT_LOADER__",value:function(e){if(e){var t=this.editor.self,a=t.doc;a.setValue(e),a.setCursor(a.lineCount(),null)}}},{key:"__exportCsv__REACT_HOT_LOADER__",value:function(){var e=this.props.data.results,t=parseInt(this.state.activeKey,10),a=e[t],n="",r="结果"+(parseInt(t)+1)+".csv";a.forEach(function(e,t){var r=e.join(",");n+=t<a.length?r+"\n":r});var i=new Blob([n]);if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(i,r);else{var s=window.document.createElement("a");s.href=window.URL.createObjectURL(i,{type:"text/plain"}),s.download=r,document.body.appendChild(s),s.click(),document.body.removeChild(s)}}},{key:"renderTabs",value:function(e){return e&&e.length>0?e.map(function(e,t){var a=w.a.createElement("span",null,"结果",t+1);return w.a.createElement(H,{style:{minHeight:"100%",position:"relative"},tab:a,key:""+t},w.a.createElement(I,{data:e.data}),e.jobId?w.a.createElement("a",{href:L.a.DOWNLOAD_SQL_RESULT+"?jobId="+e.jobId,download:!0},w.a.createElement(d.a,{style:N},"下载")):null)}):[]}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=(t.dispatch,t.setMax),r=t.setMin;return w.a.createElement("div",{className:"ide-console"},w.a.createElement(D.a,{hideAdd:!0,type:"editable-card",activeKey:this.state.activeKey,onChange:this.onChange,onEdit:this.onEdit},w.a.createElement(H,{tab:"日志",key:"console-log"},w.a.createElement("div",{style:{position:"relative"}},w.a.createElement(x.a,{cursorAlwaysInEnd:!0,style:{minHeight:"auto"},ref:function(t){e.editor=t},options:F,key:"output-log",sync:!0,value:a.log}))),this.renderTabs(a.results)),w.a.createElement(l.a,{onClick:n,className:"console-icon up",type:"up-square-o"}),w.a.createElement(l.a,{onClick:r,className:"console-icon down",type:"down-square-o"}),w.a.createElement(i.a,{placement:"top",title:"关闭控制台"},w.a.createElement(l.a,{className:"close-console",type:"close",onClick:this.closeConsole})))}}]),t}(R.Component),U=V;t.a=U;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(H,"TabPane","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/console.js"),__REACT_HOT_LOADER__.register(F,"editorOptions","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/console.js"),__REACT_HOT_LOADER__.register(N,"exportStyle","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/console.js"),__REACT_HOT_LOADER__.register(I,"Result","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/console.js"),__REACT_HOT_LOADER__.register(V,"Console","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/console.js"),__REACT_HOT_LOADER__.register(U,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/console.js"))}()},2021:function(e,t,a){"use strict";var n=a(5),r=a.n(n),i=a(8),s=a.n(i),o=a(1),l=a.n(o),c=a(4),u=a.n(c),d=a(3),p=a.n(d),_=a(2),h=a.n(_),f=a(0),m=a.n(f),g=a(812),E=a.n(g),v=a(16),y=a(18),k=(a.n(y),a(12)),T=a(146),A=a(2022),C=a(2020),b=(a(45),a(921)),O=a(920),D=a(298),R=a(1110),w=function(e){function t(){var e,n,r,i;l()(this,t);for(var o=arguments.length,c=Array(o),u=0;u<o;u++)c[u]=arguments[u];return n=r=p()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(c))),r.state={customHeight:null},r.handleEditorTxtChange=function(){var e;return(e=r).__handleEditorTxtChange__REACT_HOT_LOADER__.apply(e,arguments)},r.onEditorSelection=function(){var e;return(e=r).__onEditorSelection__REACT_HOT_LOADER__.apply(e,arguments)},r.debounceChange=a.i(y.debounce)(r.handleEditorTxtChange,300,{maxWait:2e3}),r.debounceSelectionChange=a.i(y.debounce)(r.onEditorSelection,200,{maxWait:2e3}),i=n,p()(r,i)}return h()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props.currentTabData;e&&this.props.getTab(e.id)}},{key:"componentWillReceiveProps",value:function(e){var t=e.currentTabData,a=this.props.currentTabData;t&&t.id!==a.id&&this.props.getTab(t.id)}},{key:"__handleEditorTxtChange__REACT_HOT_LOADER__",value:function(e,t,n){var r=this.props.currentTabData,i=this.props.taskCustomParams,s={merged:!1,cursor:n.getCursor()};if(k.a.checkExist(r.taskType)){s.sqlText=t;var o=a.i(T.c)(t);s.taskVariables=a.i(b.d)(i,o)}else k.a.checkExist(r.type)&&(s.scriptText=t);this.props.updateTaskFields(s)}},{key:"__onEditorSelection__REACT_HOT_LOADER__",value:function(e,t){var a=t.getSelection();if(t.somethingSelected())this.props.setSelection(a);else{""!==this.props.sqlEditor.selection&&this.props.setSelection("")}}},{key:"render",value:function(){var e=this,t=this.props,a=t.sqlEditor,n=t.currentTabData,i=t.options,s=t.value,o=n.id,l=a.console,c=l&&l[o]?l[o]:{results:[]},u=this.state.size,d=n.cursor||void 0,p=n.readWriteLockVO&&!n.readWriteLockVO.getLock;return m.a.createElement("div",{className:"ide-sql"},m.a.createElement("div",{className:"ide-header bd-bottom"},m.a.createElement(A.a,this.props)),m.a.createElement("div",{className:"ide-content"},c.log?m.a.createElement(E.a,{split:"horizontal",minSize:100,maxSize:-77,style:{paddingBottom:"40px"},defaultSize:"60%",primary:"first",size:u,onDragStarted:function(){e.setState({size:void 0})}},m.a.createElement("div",{className:"ide-editor bd-bottom"},m.a.createElement(O.a,{key:"sqlEditor",sync:n.merged||void 0,options:r()({},i,{readOnly:p}),value:s,cursor:d,cursorActivity:this.debounceSelectionChange,onChange:this.debounceChange})),m.a.createElement(C.a,{data:c,currentTab:o,dispatch:this.props.dispatch,setMax:function(){e.setState({size:"100px"})},setMin:function(){e.setState({size:"calc(100% - 40px)"})}})):m.a.createElement("div",{className:"ide-editor bd-bottom"},m.a.createElement(O.a,{key:"sqlEditor",sync:n.merged||void 0,options:r()({},i,{readOnly:p}),cursor:d,cursorActivity:this.debounceSelectionChange,onChange:this.debounceChange,value:s}))))}}]),t}(f.Component),S=a.i(v.connect)(function(e){return{sqlEditor:e.sqlEditor,project:e.project,user:e.user}},function(e){return{dispatch:e,updateTaskFields:function(t){e({type:D.h.SET_TASK_FIELDS_VALUE,payload:t})},setSelection:function(t){e(a.i(R.e)(t))},getTab:function(t){e(a.i(R.f)(t))}}})(w);t.a=S;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(w,"SQLEditor","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/index.js"),__REACT_HOT_LOADER__.register(S,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/index.js"))}()},2022:function(e,t,a){"use strict";var n=a(56),r=(a.n(n),a(52)),i=a.n(r),s=a(23),o=(a.n(s),a(22)),l=a.n(o),c=a(8),u=a.n(c),d=a(1),p=a.n(d),_=a(4),h=a.n(_),f=a(3),m=a.n(f),g=a(2),E=a.n(g),v=a(41),y=(a.n(v),a(40)),k=a.n(y),T=a(0),A=a.n(T),C=a(13),b=a.n(C),O=a(12),D=a(146),R=a(45),w=(a(665),a(920)),S=(a(921),a(941)),L=a(1110),x=a(1365),M=a(298);a.d(t,"a",function(){return F});var H=k.a.confirm,F=function(e){function t(){var e,a,n,r;p()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=m()(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(s))),n.state={confirmCode:"",execConfirmVisible:!1},n.onNeverWarning=function(){var e;return(e=n).__onNeverWarning__REACT_HOT_LOADER__.apply(e,arguments)},n.filterSql=function(){var e;return(e=n).__filterSql__REACT_HOT_LOADER__.apply(e,arguments)},n.execSQL=function(){var e;return(e=n).__execSQL__REACT_HOT_LOADER__.apply(e,arguments)},n.reqExecSQL=function(){var e;return(e=n).__reqExecSQL__REACT_HOT_LOADER__.apply(e,arguments)},n.stopSQL=function(){var e;return(e=n).__stopSQL__REACT_HOT_LOADER__.apply(e,arguments)},n.execConfirm=function(){var e;return(e=n).__execConfirm__REACT_HOT_LOADER__.apply(e,arguments)},n.sqlFormat=function(){var e;return(e=n).__sqlFormat__REACT_HOT_LOADER__.apply(e,arguments)},r=a,m()(n,r)}return E()(t,e),h()(t,[{key:"__onNeverWarning__REACT_HOT_LOADER__",value:function(e){var t=e.target.checked?1:0;this.props.dispatch(a.i(S.e)({isCheckDDL:t}))}},{key:"__filterSql__REACT_HOT_LOADER__",value:function(e){var t=[],n=a.i(D.c)(e);if(n&&(n=a.i(D.d)(n)),n&&n.length>0)for(var r=0;r<n.length;r++){var i=n[r],s=O.a.trim(i);""!==s&&t.push(O.a.trimlr(i))}return t}},{key:"__execSQL__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.currentTab,n=e.sqlEditor,r=e.user,i=e.currentTabData,s=e.project,o=e.dispatch,l={projectId:s.id,isCheckDDL:r.isCheckDDL,taskVariables:i.taskVariables};this.setState({execConfirmVisible:!1});var c=n.selection||i.sqlText||i.scriptText,u=this.filterSql(c);if(u&&u.length>0){o(a.i(L.i)(t,"正在提交...")),o(a.i(L.j)(t)),this.reqExecSQL(i,l,u,0)}}},{key:"__reqExecSQL__REACT_HOT_LOADER__",value:function(e,t,n,r){var i=this.props,s=i.dispatch,o=i.currentTab;s(a.i(x.b)(o,e,t,n))}},{key:"__stopSQL__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.currentTabData,n=e.dispatch,r=e.currentTab;n(a.i(x.a)(r,t))}},{key:"__execConfirm__REACT_HOT_LOADER__",value:function(){var e=this.props,t=(e.currentTab,e.currentTabData),n=(e.dispatch,e.user),r=e.sqlEditor;if(1===n.isCheckDDL)return void this.execSQL();var i=r.selection||t.sqlText||t.scriptText;i=a.i(D.c)(i);var s=i.replace(/show\s+create/gi,"show"),o=/(create|alter|drop|truncate)+\s+(external|temporary)?\s?(table)+\s+([\s\S]*?)/gi;o.test(s)?this.setState({execConfirmVisible:!0,confirmCode:i}):(this.execSQL(),this.setState({execConfirmVisible:!1}))}},{key:"__sqlFormat__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.currentTabData,a=e.dispatch,n={sql:t.sqlText||t.scriptText||""};R.a.sqlFormat(n).then(function(e){if(e.data){var n={merged:!0};t.scriptText?n.scriptText=e.data:n.sqlText=e.data,a({type:M.h.SET_TASK_SQL_FIELD_VALUE,payload:n})}})}},{key:"getUniqueKey",value:function(e){return e+"_"+b()().valueOf()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.running,t.execConfirmVisible),n=t.confirmCode,r=this.props,s=r.currentTab,o=r.sqlEditor,c=o.running.indexOf(s)>-1,u=!c;this.props.currentTabData;return A.a.createElement("div",{className:"ide-toolbar toolbar clear-offset"},A.a.createElement(l.a,{onClick:this.execConfirm,loading:!u,disabled:!u,title:"立即运行",icon:"play-circle-o",style:{marginLeft:"0px"}}," 运行"),A.a.createElement(l.a,{onClick:this.stopSQL,icon:"pause-circle-o",title:"立即停止",disabled:u},"停止"),A.a.createElement(l.a,{icon:"appstore-o",title:"格式化",onClick:this.sqlFormat},"格式化"),A.a.createElement(k.a,{maskClosable:!0,visible:a,title:"执行的语句中包含DDL语句，是否确认执行？",wrapClassName:"vertical-center-modal modal-body-nopadding",onCancel:function(){e.setState({execConfirmVisible:!1})},footer:A.a.createElement("div",null,A.a.createElement(i.a,{onChange:this.onNeverWarning},"不再提示"),A.a.createElement(l.a,{onClick:function(){e.setState({execConfirmVisible:!1})}},"取消"),A.a.createElement(l.a,{type:"primary",onClick:this.execSQL},"执行"))},A.a.createElement("div",{style:{height:"400px"}},A.a.createElement(w.a,{value:n,sync:!0}))))}}]),t}(T.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(H,"confirm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/toolbar.js"),__REACT_HOT_LOADER__.register(F,"Toolbar","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/toolbar.js"))}()},2023:function(e,t,a){"use strict";function n(e){var t=e.taskInfo;return w.a.createElement(k.a,{className:"task-info"},w.a.createElement(k.a,null,w.a.createElement(C.a,{span:"10",className:"txt-right"},"任务名称："),w.a.createElement(C.a,{span:"14"},t.name)),w.a.createElement(k.a,null,w.a.createElement(C.a,{span:"10",className:"txt-right"},"任务类型："),w.a.createElement(C.a,{span:"14"},w.a.createElement(x.a,{value:t.taskType}))),t.resourceList.length&&w.a.createElement(k.a,null,w.a.createElement(C.a,{span:"10",className:"txt-right"},"资源："),w.a.createElement(C.a,{span:"14t"},t.resourceList.map(function(e){return w.a.createElement(E.a,{key:e.id,color:"blue",style:{marginTop:10}},e.resourceName)}))),w.a.createElement(k.a,null,w.a.createElement(C.a,{span:"10",className:"txt-right"},"创建人员："),w.a.createElement(C.a,{span:"14"},t.createUser.userName)),w.a.createElement(k.a,null,w.a.createElement(C.a,{span:"10",className:"txt-right"},"创建时间："),w.a.createElement(C.a,{span:"14"},L.a.formatDateTime(t.gmtCreate))),w.a.createElement(k.a,null,w.a.createElement(C.a,{span:"10",className:"txt-right"},"最近修改人员："),w.a.createElement(C.a,{span:"14"},t.modifyUser.userName)),w.a.createElement(k.a,null,w.a.createElement(C.a,{span:"10",className:"txt-right"},"最近修改时间："),w.a.createElement(C.a,{span:"14"},L.a.formatDateTime(t.gmtModified))),w.a.createElement(k.a,null,w.a.createElement(C.a,{span:"10",className:"txt-right"},"描述："),w.a.createElement(C.a,{span:"14",style:{lineHeight:"20px",padding:"10 0"}},t.taskDesc)))}var r=a(5),i=a.n(r),s=a(8),o=a.n(s),l=a(1),c=a.n(l),u=a(4),d=a.n(u),p=a(3),_=a.n(p),h=a(2),f=a.n(h),m=a(1364),g=(a.n(m),a(1363)),E=a.n(g),v=a(55),y=(a.n(v),a(54)),k=a.n(y),T=a(74),A=(a.n(T),a(73)),C=a.n(A),b=a(1359),O=(a.n(b),a(1358)),D=a.n(O),R=a(0),w=a.n(R),S=a(16),L=a(12),x=a(204),M=(a(51),a(1985)),H=a(298),F=D.a.Panel,N=function(e){function t(e){return c()(this,t),_()(this,(t.__proto__||o()(t)).call(this,e))}return f()(t,e),d()(t,[{key:"render",value:function(){var e=this.props.tabData;return w.a.createElement("div",{className:"m-taksdetail"},w.a.createElement(D.a,{bordered:!1,defaultActiveKey:["1","2"]},w.a.createElement(F,{key:"1",header:"任务属性"},w.a.createElement(n,{taskInfo:e})),w.a.createElement(F,{key:"2",header:"历史发布版本"},w.a.createElement(M.a,{taskInfo:e,changeSql:this.props.setSqlText}))))}}]),t}(w.a.Component),I=a.i(S.connect)(function(e,t){return i()({},t)},function(e){return{setSqlText:function(t){e({type:H.h.SET_TASK_FIELDS_VALUE,payload:{sqlText:t,merged:!0}})}}})(N);t.a=I;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(F,"Panel","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskDetail.js"),__REACT_HOT_LOADER__.register(n,"TaskInfo","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskDetail.js"),__REACT_HOT_LOADER__.register(N,"TaskDetail","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskDetail.js"),__REACT_HOT_LOADER__.register(I,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskDetail.js"))}()},2024:function(e,t,a){"use strict";var n=a(41),r=(a.n(n),a(40)),i=a.n(r),s=a(23),o=(a.n(s),a(22)),l=a.n(o),c=a(59),u=a.n(c),d=a(92),p=(a.n(d),a(81)),_=a.n(p),h=a(37),f=(a.n(h),a(15)),m=a.n(f),g=a(5),E=a.n(g),v=a(25),y=(a.n(v),a(28)),k=a.n(y),T=a(8),A=a.n(T),C=a(1),b=a.n(C),O=a(4),D=a.n(O),R=a(3),w=a.n(R),S=a(2),L=a.n(S),x=a(80),M=(a.n(x),a(75)),H=a.n(M),F=a(27),N=(a.n(F),a(26)),I=a.n(N),V=a(34),U=(a.n(V),a(33)),P=a.n(U),B=a(0),z=a.n(B),j=a(16),q=a(45),K=a(298),W=a(350),G=a(51),Y=a(1357),Q=P.a.Item,J=I.a.Optioin,$=H.a.Group,Z=function(e){function t(e){b()(this,t);var a=w()(this,(t.__proto__||A()(t)).call(this,e));return a.loadTaskTypes=function(){return a.__loadTaskTypes__REACT_HOT_LOADER__.apply(a,arguments)},a.handleRadioChange=a.handleRadioChange.bind(a),a.isEditExist=!1,a.state={value:0,taskTypes:[]},a._resChange=!1,a}return L()(t,e),D()(t,[{key:"componentDidMount",value:function(){this.loadTaskTypes()}},{key:"handleSelectTreeChange",value:function(e){this.props.form.setFieldsValue({nodePid:e})}},{key:"handleResSelectTreeChange",value:function(e){this._resChange=!0,this.props.form.setFieldsValue({resourceIdList:e}),this.props.form.validateFields(["resourceIdList"])}},{key:"__loadTaskTypes__REACT_HOT_LOADER__",value:function(){var e=this;q.a.getTaskTypes().then(function(t){1===t.code&&e.setState({taskTypes:t.data||[]})})}},{key:"handleRadioChange",value:function(e){this.setState({value:e.target.value})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.defaultData,a=this.state.taskTypes,n=void 0===t,r=!n&&void 0===t.id;this.isEditExist=!n&&!r;var i=n?this.state.value:r?this.state.value:t.taskType,s=a.map(function(e){return z.a.createElement(H.a,{key:e.key,value:e.key},e.value)}),o=z.a.createElement("div",null,"功能释义：",z.a.createElement("br",null),"向导模式：便捷、简单，可视化字段映射，快速完成同步任务配置",z.a.createElement("br",null),"脚本模式：全能 高效，可深度调优，支持全部数据源",z.a.createElement("br",null),z.a.createElement("a",{href:G.l.DATA_SOURCE,target:"blank"},"查看支持的数据源")),l=i===G.b.MR,c=i===G.b.PYTHON,u=i==G.b.SYNC,d=l?G.c.JAR:c?G.c.PY:"";return z.a.createElement(P.a,null,z.a.createElement(Q,E()({},G.i,{label:"任务名称",hasFeedback:!0}),e("name",{rules:[{required:!0,message:"任务名称不可为空！"},{max:64,message:"任务名称不得超过64个字符！"},{pattern:/^[A-Za-z0-9_]+$/,message:"任务名称只能由字母、数字、下划线组成!"}],initialValue:n?void 0:r?void 0:t.name})(z.a.createElement(k.a,{placeholder:"请输入任务名称"}))),z.a.createElement(Q,E()({},G.i,{label:"任务类型"}),e("taskType",{rules:[{required:!0,message:"请选择任务类型"}],initialValue:this.isEditExist?t.taskType:a.length>0&&a[0].key})(z.a.createElement($,{disabled:!n&&!r,onChange:this.handleRadioChange},s))),(l||c)&&z.a.createElement("span",null,z.a.createElement(Q,E()({},G.i,{label:"资源",hasFeedback:!0}),e("resourceIdList",{rules:[{required:!0,message:"请选择关联资源"},{validator:this.checkNotDir.bind(this)}],initialValue:n?void 0:r?void 0:t.resourceList[0].id})(z.a.createElement(k.a,{type:"hidden"})),z.a.createElement(Y.a,{type:G.f.RESOURCE,ispicker:!0,placeholder:"请选择关联资源",isFilepicker:!0,acceptRes:d,treeData:this.props.resTreeData,onChange:this.handleResSelectTreeChange.bind(this),defaultNode:n?void 0:r?void 0:t.resourceList[0].resourceName})),l&&z.a.createElement(Q,E()({},G.i,{label:"mainClass",hasFeedback:!0}),e("mainClass",{rules:[{required:!0,message:"mainClass 不可为空！"},{pattern:/^[A-Za-z0-9_.-]+$/,message:"mainClass 只能由字母、数字、下划线、分隔点组成!"}],initialValue:n?void 0:r?void 0:t.mainClass})(z.a.createElement(k.a,{placeholder:"请输入 mainClass"}))),z.a.createElement(Q,E()({},G.i,{label:"参数",hasFeedback:!0}),e("exeArgs",{rules:[{pattern:/^[A-Za-z0-9_\/-]+$/,message:"任务参数只能由字母、数字、下划线、斜杠组成!"}],initialValue:n?void 0:r?void 0:t.exeArgs})(z.a.createElement(k.a,{placeholder:"请输入任务参数"})))),u&&z.a.createElement(Q,E()({},G.i,{label:"配置模式"}),e("createModel",{rules:[{required:!0,message:"请选择配置模式"}],initialValue:this.isEditExist?t.createModel:G.h.GUIDE})(z.a.createElement($,{disabled:!n&&!r},z.a.createElement(H.a,{key:G.h.GUIDE,value:G.h.GUIDE},"向导模式"),z.a.createElement(H.a,{key:G.h.SCRIPT,value:G.h.SCRIPT},"脚本模式"))),z.a.createElement(_.a,{placement:"right",title:o},z.a.createElement(m.a,{type:"question-circle-o"}))),z.a.createElement(Q,E()({},G.i,{label:"存储位置"}),e("nodePid",{rules:[{required:!0,message:"存储位置必选！"}],initialValue:n?this.props.treeData.id:r?t.parentId:t.nodePid})(z.a.createElement(Y.a,{type:G.f.TASK_DEV,ispicker:!0,treeData:this.props.treeData,onChange:this.handleSelectTreeChange.bind(this),defaultNode:n?this.props.treeData.name:r?this.getFolderName(t.parentId):this.getFolderName(t.nodePid)}))),z.a.createElement(Q,E()({},G.i,{label:"描述",hasFeedback:!0}),e("taskDesc",{rules:[{max:200,message:"描述请控制在200个字符以内！"}],initialValue:n?void 0:r?void 0:t.taskDesc})(z.a.createElement(k.a,{type:"textarea",rows:4,placeholder:"请输入任务描述"}))),z.a.createElement(Q,{style:{display:"none"}},e("computeType",{initialValue:1})(z.a.createElement(k.a,{type:"hidden"}))))}},{key:"checkNotDir",value:function(e,t,a){var n=this.props.resTreeData,r=void 0;(function e(a){a.forEach(function(a,n){a.id===t?r=a.type:e(a.children||[])})})([n]),"folder"===r&&a("请选择具体文件, 而非文件夹"),a()}},{key:"getFolderName",value:function(e){var t=this.props.treeData,a=void 0;return function t(n){n.forEach(function(n,r){n.id===e?a=n.name:t(n.children||[])})}([t]),a}}]),t}(z.a.Component),X=P.a.create()(Z),ee=function(e){function t(e){b()(this,t);var a=w()(this,(t.__proto__||A()(t)).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.handleCancel=a.handleCancel.bind(a),a.dtcount=0,a}return L()(t,e),D()(t,[{key:"handleSubmit",value:function(){var e=this,t=this.props,a=t.addOfflineTask,n=t.defaultData,r=this.form,i=void 0===n,s=!i&&void 0===n.id,o=!i&&!s;r.validateFields(function(t,i){t||(i.lockVersion=0,i.version=0,i.resourceIdList&&(i.resourceIdList=[i.resourceIdList]),n&&n.id&&(i.id=n.id,i.version=n.version,i.readWriteLockVO=u()({},n.readWriteLockVO)),a(i,o,n).then(function(t){t&&(e.closeModal(),setTimeout(function(){r.resetFields()},300))}))})}},{key:"handleCancel",value:function(){this.closeModal()}},{key:"closeModal",value:function(){this.dtcount++,this.props.emptyModalDefault(),this.props.toggleCreateTask()}},{key:"render",value:function(){var e=this,t=this.props,a=t.isModalShow,n=t.taskTreeData,r=t.resourceTreeData,s=t.defaultData;return s&&s.name?this.isCreate=!1:this.isCreate=!0,z.a.createElement("div",null,z.a.createElement(i.a,{title:this.isCreate?"新建离线任务":"编辑离线任务",visible:a,footer:[z.a.createElement(l.a,{key:"back",size:"large",onClick:this.handleCancel},"取消"),z.a.createElement(l.a,{key:"submit",type:"primary",size:"large",onClick:this.handleSubmit}," 确认 ")],onCancel:this.handleCancel},z.a.createElement(X,{ref:function(t){return e.form=t},treeData:n,resTreeData:r,defaultData:s})))}}]),t}(z.a.Component),te=a.i(j.connect)(function(e){return{isModalShow:e.offlineTask.modalShow.createTask,taskTreeData:e.offlineTask.taskTree,defaultData:e.offlineTask.modalShow.defaultData,resourceTreeData:e.offlineTask.resourceTree}},function(e){var t=a.i(W.a)(e);return{toggleCreateTask:function(){t.toggleCreateTask()},addOfflineTask:function(a,n,r){return q.a.addOfflineTask(a).then(function(i){if(1===i.code){if(n){var s=u()(r,i.data);s.originPid=r.nodePid,q.a.getOfflineTaskDetail({id:s.id}).then(function(t){1===t.code&&e({type:K.h.SET_TASK_FIELDS_VALUE,payload:t.data})})}else t.openTaskInDev(i.data.id);return t.loadTreeNode(a.nodePid,G.f.TASK_DEV),!0}})},emptyModalDefault:function(){e({type:K.o.EMPTY_MODAL_DEFAULT})}}})(ee);t.a=te;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Q,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskModal.js"),__REACT_HOT_LOADER__.register(J,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskModal.js"),__REACT_HOT_LOADER__.register($,"RadioGroup","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskModal.js"),__REACT_HOT_LOADER__.register(Z,"TaskForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskModal.js"),__REACT_HOT_LOADER__.register(X,"TaskFormWrapper","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskModal.js"),__REACT_HOT_LOADER__.register(ee,"TaskModal","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskModal.js"),__REACT_HOT_LOADER__.register(te,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskModal.js"))}()},2025:function(e,t,a){"use strict";var n=a(5),r=a.n(n),i=a(25),s=(a.n(i),a(28)),o=a.n(s),l=a(47),c=a.n(l),u=a(8),d=a.n(u),p=a(1),_=a.n(p),h=a(4),f=a.n(h),m=a(3),g=a.n(m),E=a(2),v=a.n(E),y=a(1359),k=(a.n(y),a(1358)),T=a.n(k),A=a(34),C=(a.n(A),a(33)),b=a.n(C),O=a(0),D=a.n(O),R=(a(16),a(61)),w=(a.n(R),a(1362)),S=b.a.Item,L=T.a.Panel,x={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:16}}},M=function(e){function t(){var e,a,n,r;_()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=g()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.onChange=function(){var e;return(e=n).__onChange__REACT_HOT_LOADER__.apply(e,arguments)},n.getFormItems=function(){var e;return(e=n).__getFormItems__REACT_HOT_LOADER__.apply(e,arguments)},r=a,g()(n,r)}return v()(t,e),f()(t,[{key:"__onChange__REACT_HOT_LOADER__",value:function(e,t){var a=this.props,n=a.tabData,r=a.onChange;if(/(^\$\[(\S+\(\S*\)|[a-z0-9\+\-\/\\\*]{2,})\]$)|(^(?!\$)\S+$)/i.test(t)){var i=[].concat(c()(n.taskVariables));i[e].paramCommand=t,r({taskVariables:i})}}},{key:"__getFormItems__REACT_HOT_LOADER__",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props.tabData.taskVariables,n=[],i=[],s=function(a,n){return D.a.createElement(S,r()({key:n.paramName},x,{label:n.paramName}),t(n.paramName,{rules:[{pattern:/(^\$\[(\S+\(\S*\)|[a-z0-9\+\-\/\\\*]{2,})\]$)|(^(?!\$)\S+$)/i,message:"参数格式不正确"}],initialValue:n.paramCommand})(D.a.createElement(o.a,{disabled:0===n.type,onChange:function(t){e.onChange(a,t.target.value)}})))};if(a)for(var l=0;l<a.length;l++){var c=a[l],u=s(l,c);0===c.type?n.push(u):1===c.type&&i.push(u)}return{sysItems:n,customItems:i}}},{key:"render",value:function(){var e=this.props.tabData,t=e.readWriteLockVO&&!e.readWriteLockVO.getLock,a=this.getFormItems();return D.a.createElement(b.a,{style:{position:"relative"}},t?D.a.createElement("div",{className:"cover-mask"}):null,D.a.createElement(T.a,{bordered:!1,defaultActiveKey:["1","2"]},D.a.createElement(L,{key:"1",header:D.a.createElement("span",null,"系统参数配置 ",D.a.createElement(w.a,{style:{position:"inherit"},doc:"customSystemParams"}))},a.sysItems),D.a.createElement(L,{key:"2",header:D.a.createElement("span",null,"自定义参数配置 ",D.a.createElement(w.a,{style:{position:"inherit"},doc:"customParams"}))},a.customItems)))}}]),t}(D.a.Component),H=b.a.create()(M),F=H;t.a=F;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(S,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskParams.js"),__REACT_HOT_LOADER__.register(L,"Panel","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskParams.js"),__REACT_HOT_LOADER__.register(x,"formItemLayout","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskParams.js"),__REACT_HOT_LOADER__.register(M,"TaskParams","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskParams.js"),__REACT_HOT_LOADER__.register(H,"FormWrapper","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskParams.js"),__REACT_HOT_LOADER__.register(F,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskParams.js"))}()},2026:function(e,t,a){"use strict";var n=a(92),r=(a.n(n),a(81)),i=a.n(r),s=a(37),o=(a.n(s),a(15)),l=a.n(o),c=a(115),u=(a.n(c),a(114)),d=a.n(u),p=a(82),_=a.n(p),h=a(8),f=a.n(h),m=a(1),g=a.n(m),E=a(4),v=a.n(E),y=a(3),k=a.n(y),T=a(2),A=a.n(T),C=a(0),b=a.n(C),O=a(45),D=a(665),R=a(924);a.d(t,"a",function(){return K});var w=a(1019)({mxImageBasePath:"public/rdos/mxgraph/images",mxBasePath:"public/rdos/mxgraph"}),S=w.mxGraph,L=w.mxShape,x=w.mxConnectionConstraint,M=w.mxPoint,H=w.mxPolyline,F=w.mxEvent,N=w.mxRubberband,I=w.mxConstants,V=w.mxEdgeStyle,U=w.mxPerimeter,P=w.mxCompactTreeLayout,B=w.mxHierarchicalLayout,z=w.mxUtils,j={width:150,height:36},q=function(e){return e},K=function(e){function t(){var e,a,n,r;g()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=k()(this,(e=t.__proto__||f()(t)).call.apply(e,[this].concat(s))),n.state={selectedTask:"",data:{},loading:"success",lastVertex:"",visible:!1},n.loadTaskChidren=function(){var e;return(e=n).__loadTaskChidren__REACT_HOT_LOADER__.apply(e,arguments)},n.insertVertex=function(){var e;return(e=n).__insertVertex__REACT_HOT_LOADER__.apply(e,arguments)},n.loopTree=function(){var e;return(e=n).__loopTree__REACT_HOT_LOADER__.apply(e,arguments)},n.doInsertVertex=function(){var e;return(e=n).__doInsertVertex__REACT_HOT_LOADER__.apply(e,arguments)},n.loadEditor=function(){var e;return(e=n).__loadEditor__REACT_HOT_LOADER__.apply(e,arguments)},n.getStyles=function(){var e;return(e=n).__getStyles__REACT_HOT_LOADER__.apply(e,arguments)},n.formatTooltip=function(){var e;return(e=n).__formatTooltip__REACT_HOT_LOADER__.apply(e,arguments)},n.corvertValueToString=function(){var e;return(e=n).__corvertValueToString__REACT_HOT_LOADER__.apply(e,arguments)},n.refresh=function(){var e;return(e=n).__refresh__REACT_HOT_LOADER__.apply(e,arguments)},n.zoomIn=function(){var e;return(e=n).__zoomIn__REACT_HOT_LOADER__.apply(e,arguments)},n.zoomOut=function(){var e;return(e=n).__zoomOut__REACT_HOT_LOADER__.apply(e,arguments)},n.hideMenu=function(){var e;return(e=n).__hideMenu__REACT_HOT_LOADER__.apply(e,arguments)},r=a,k()(n,r)}return A()(t,e),v()(t,[{key:"componentDidMount",value:function(){this.Container.innerHTML="",this.graph="";var e=this.Container,t=this.props.tabData;this.initEditor(),this.loadEditor(e),this.hideMenu(),this.loadTaskChidren({taskId:t.id,level:6})}},{key:"__loadTaskChidren__REACT_HOT_LOADER__",value:function(e){var t=this;this.setState({loading:"loading"}),O.a.getTaskChildren(e).then(function(e){if(1===e.code){var a=e.data;t.setState({selectedTask:a,data:a}),t.doInsertVertex(a)}t.setState({loading:"success"})})}},{key:"__insertVertex__REACT_HOT_LOADER__",value:function(e,t){var a=this.graph,n=a.getDefaultParent(),r=this._vertexCells.find(function(e){var a=e.getAttribute("data");return a?JSON.parse(a).id===t.id:null});if(r){return 0===a.getEdgesBetween(e,r).length&&a.insertEdge(n,null,"",e,r),r}var i=this.getStyles(t),s=z.createXmlDocument(),o=s.createElement("Task");o.setAttribute("id",t.id),o.setAttribute("data",_()(t));var l=a.insertVertex(n,null,o,1,1,j.width,j.height,i);return a.insertEdge(n,null,"",e,l),a.view.refresh(l),this._vertexCells.push(l),l}},{key:"__loopTree__REACT_HOT_LOADER__",value:function(e,t){if(t){var a=e.getDefaultParent(),n=t.taskVOS,r=t.subTaskVOS,i=q(t),s=this.insertVertex(a,i);if(n&&n.length>0)for(var o=0;o<n.length;o++){var l=q(n[o]),c=this.insertVertex(a,l);this.insertVertex(c,i);n[o].taskVOS&&this.loopTree(e,n[o])}if(r&&r.length>0)for(var u=0;u<r.length;u++){var d=q(r[u]);this.insertVertex(a,d),this.insertVertex(s,d);r[u].subTaskVOS&&this.loopTree(e,r[u])}}}},{key:"__doInsertVertex__REACT_HOT_LOADER__",value:function(e){var t=this,a=this.graph,n=(a.container.clientWidth-j.width)/2,r=200;this._vertexCells=[];var i=a.getModel(),s=a.getDefaultParent();this.executeLayout=function(e,t){i.beginUpdate();try{var n=new B(a,!1);n.orientation="north",n.disableEdgeStyle=!1,n.interRankCellSpacing=40,n.intraCellSpacing=10,null!=e&&e(),n.execute(s)}catch(e){throw e}finally{a.getModel().endUpdate(),null!=t&&t()}},this.executeLayout(function(){t.loopTree(a,e)},function(){a.view.setTranslate(n,r)})}},{key:"__loadEditor__REACT_HOT_LOADER__",value:function(e){F.disableContextMenu(e);var t=new S(e);this.graph=t,t.setPanning(!0),t.panningHandler.useLeftButtonForPanning=!0,t.setConnectable(!0),t.setTooltips(!0),t.view.setScale(1),t.setHtmlLabels(!0),t.setAllowDanglingEdges(!1),t.setConnectable(!1),t.isCellsMovable=function(e){var e=t.getSelectionCell();return!(e&&e.edge)},t.isCellEditable=function(){return!1};var a=this.getDefaultVertexStyle();t.getStylesheet().putDefaultVertexStyle(a),t.convertValueToString=this.corvertValueToString,t.getTooltipForCell=this.formatTooltip;var n=this.getDefaultEdgeStyle();t.getStylesheet().putDefaultEdgeStyle(n),I.HANDLE_FILLCOLOR="#ffffff",I.HANDLE_STROKECOLOR="#2491F7",I.VERTEX_SELECTION_COLOR="#2491F7",new N(t)}},{key:"__getStyles__REACT_HOT_LOADER__",value:function(e){return"whiteSpace=wrap;fillColor=#E6F7FF;strokeColor=#90D5FF;"}},{key:"__formatTooltip__REACT_HOT_LOADER__",value:function(e){var t=e.getAttribute("data"),a=t?JSON.parse(t):"";return a?a.name:""}},{key:"__corvertValueToString__REACT_HOT_LOADER__",value:function(e){if(z.isNode(e.value)&&"task"==e.value.nodeName.toLowerCase()){var t=e.getAttribute("data"),n=t?JSON.parse(t):"",r=a.i(R.a)(n.taskType);if(n)return'<div class="vertex"><span class="vertex-title">'+(n.name||"")+'</span>\n                    <span style="font-size:10px; color: #666666;">'+r+"</span>\n                    </div>"}return""}},{key:"listenDoubleClick",value:function(){this.graph.addListener(F.DOUBLE_CLICK,function(e,t){t.getProperty("cell")})}},{key:"listenOnClick",value:function(){var e=this;this.graph.addListener(F.onClick,function(t,a){var n=a.getProperty("cell");if(n){var r=n.getAttribute("data");r=r?JSON.parse(r):"",e.setState({selectedTask:r})}})}},{key:"__refresh__REACT_HOT_LOADER__",value:function(){this.componentDidMount()}},{key:"graphEnable",value:function(){var e=this.graph.isEnabled();this.graph.setEnabled(!e)}},{key:"__zoomIn__REACT_HOT_LOADER__",value:function(){this.graph.zoomIn()}},{key:"__zoomOut__REACT_HOT_LOADER__",value:function(){this.graph.zoomOut()}},{key:"__hideMenu__REACT_HOT_LOADER__",value:function(){var e=this;document.addEventListener("click",function(t){var a=e.graph;a.popupMenuHandler;a.popupMenuHandler.isMenuShowing()&&a.popupMenuHandler.hideMenu()})}},{key:"render",value:function(){var e=this;this.state.selectedTask,this.props.project;return b.a.createElement("div",{className:"graph-editor",style:{position:"relative"}},b.a.createElement("div",{className:"editor pointer",ref:function(t){e.Container=t}}),b.a.createElement(d.a,{tip:"Loading...",size:"large",spinning:"loading"===this.state.loading},b.a.createElement("div",{className:"absolute-middle",style:{width:"100%",height:"100%"}})),b.a.createElement("div",{className:"graph-toolbar"},b.a.createElement(i.a,{placement:"bottom",title:"刷新"},b.a.createElement(l.a,{type:"reload",onClick:this.refresh})),b.a.createElement(i.a,{placement:"bottom",title:"放大"},b.a.createElement(D.a,{onClick:this.zoomIn,type:"zoom-in"})),b.a.createElement(i.a,{placement:"bottom",title:"缩小"},b.a.createElement(D.a,{onClick:this.zoomOut,type:"zoom-out"}))))}},{key:"getDefaultVertexStyle",value:function(){var e=[];return e[I.STYLE_SHAPE]=I.SHAPE_RECTANGLE,e[I.STYLE_PERIMETER]=U.RectanglePerimeter,e[I.STYLE_STROKECOLOR]="#90D5FF",e[I.STYLE_FILLCOLOR]="#E6F7FF;",e[I.STYLE_FONTCOLOR]="#333333;",e[I.STYLE_ALIGN]=I.ALIGN_CENTER,e[I.STYLE_VERTICAL_ALIGN]=I.ALIGN_MIDDLE,e[I.STYLE_FONTSIZE]="12",e[I.STYLE_FONTSTYLE]=1,e}},{key:"getDefaultEdgeStyle",value:function(){var e=[];return e[I.STYLE_SHAPE]=I.SHAPE_CONNECTOR,e[I.STYLE_STROKECOLOR]="#9EABB2",e[I.STYLE_STROKEWIDTH]=1,e[I.STYLE_ALIGN]=I.ALIGN_CENTER,e[I.STYLE_VERTICAL_ALIGN]=I.ALIGN_MIDDLE,e[I.STYLE_EDGE]=V.TopToBottom,e[I.STYLE_ENDARROW]=I.ARROW_CLASSIC,e[I.STYLE_FONTSIZE]="10",e[I.STYLE_ROUNDED]=!0,e}},{key:"initEditor",value:function(){S.prototype.getAllConnectionConstraints=function(e,t){if(null!=e&&null!=e.shape)if(null!=e.shape.stencil){if(null!=e.shape.stencil)return e.shape.stencil.constraints}else if(null!=e.shape.constraints)return e.shape.constraints;return null},L.prototype.constraints=[new x(new M(.25,0),!0),new x(new M(.5,0),!0),new x(new M(.75,0),!0),new x(new M(0,.25),!0),new x(new M(0,.5),!0),new x(new M(0,.75),!0),new x(new M(1,.25),!0),new x(new M(1,.5),!0),new x(new M(1,.75),!0),new x(new M(.25,1),!0),new x(new M(.5,1),!0),new x(new M(.75,1),!0)],H.prototype.constraints=null}}]),t}(C.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(w,"Mx","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(S,"mxGraph","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(L,"mxShape","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(x,"mxConnectionConstraint","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(M,"mxPoint","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(H,"mxPolyline","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(F,"mxEvent","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(N,"mxRubberband","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(I,"mxConstants","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(V,"mxEdgeStyle","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(U,"mxPerimeter","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(P,"mxCompactTreeLayout","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(B,"mxHierarchicalLayout","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(z,"mxUtils","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(j,"VertexSize","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(q,"getVertexNode","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(K,"TaskView","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"))}()},2027:function(e,t,a){"use strict";var n=a(20),r=(a.n(n),a(19)),i=a.n(r),s=a(41),o=(a.n(s),a(40)),l=a.n(o),c=a(23),u=(a.n(c),a(22)),d=a.n(u),p=a(5),_=a.n(p),h=a(25),f=(a.n(h),a(28)),m=a.n(f),g=a(8),E=a.n(g),v=a(1),y=a.n(v),k=a(4),T=a.n(k),A=a(3),C=a.n(A),b=a(2),O=a.n(b),D=a(27),R=(a.n(D),a(26)),w=a.n(R),S=a(34),L=(a.n(S),a(33)),x=a.n(L),M=a(0),H=a.n(M),F=a(16),N=a(61),I=(a.n(N),a(45)),V=a(298),U=a(51),P=a(1357),B=x.a.Item,z=w.a.Option,j=function(e){function t(e){y()(this,t);var a=C()(this,(t.__proto__||E()(t)).call(this,e));return a.renderFormItem=function(){return a.__renderFormItem__REACT_HOT_LOADER__.apply(a,arguments)},a.changeFileType=a.changeFileType.bind(a),a.fileChange=a.fileChange.bind(a),a.state={file:"",accept:".jar",fileType:U.c.JAR},a}return O()(t,e),T()(t,[{key:"handleSelectTreeChange",value:function(e){this.props.form.setFieldsValue({nodePid:e})}},{key:"handleCoverTargetChange",value:function(e){this.props.form.setFieldsValue({id:e}),this.props.form.validateFields(["id"])}},{key:"validateFileType",value:function(e,t,a){var n=/\.(jar|sql|py)$/;t&&!n.test(t)&&a("资源文件只能是Jar、SQL或者Python文件!"),a()}},{key:"changeFileType",value:function(e){var t="";switch(e){case U.c.JAR:t=".jar";break;case U.c.PY:t=".py,.zip,.egg";break;default:t=""}this.setState({accept:t,fileType:e})}},{key:"fileChange",value:function(e){var t=e.target;this.setState({file:t}),this.props.handleFileChange(t)}},{key:"__renderFormItem__REACT_HOT_LOADER__",value:function(){var e=this.state.file,t=this.props.form.getFieldDecorator,a=this.props,n=a.defaultData,r=a.isEditExist,i=a.isCreateFromMenu,s=a.isCreateNormal;return a.isCoverUpload?[H.a.createElement(B,_()({},U.i,{label:"选择目标替换资源",key:"id",hasFeedback:!0}),t("id",{rules:[{required:!0,message:"替换资源为必选！"},{validator:this.checkNotDir.bind(this)}],initialValue:s?this.props.treeData.id:i?n.parentId:r?n.id:void 0})(H.a.createElement(m.a,{type:"hidden"})),H.a.createElement(P.a,{type:U.f.RESOURCE,ispicker:!0,isFilepicker:!0,treeData:this.props.treeData,onChange:this.handleCoverTargetChange.bind(this),defaultNode:s?this.props.treeData.name:i?this.getFolderName(n.parentId):r?n.name:void 0})),H.a.createElement(B,_()({},U.i,{label:"上传",key:"file",hasFeedback:!0}),t("file",{rules:[{required:!0,message:"请选择上传文件"},{validator:this.validateFileType}]})(H.a.createElement("div",null,H.a.createElement("label",{style:{lineHeight:"28px"},className:"ant-btn",htmlFor:"myOfflinFile"},"选择文件"),H.a.createElement("span",null," ",e.files&&e.files[0].name),H.a.createElement("input",{name:"file",type:"file",id:"myOfflinFile",onChange:this.fileChange,style:{display:"none"}})))),H.a.createElement(B,_()({},U.i,{label:"描述",key:"resourceDesc",hasFeedback:!0}),t("resourceDesc",{rules:[{max:200,message:"描述请控制在200个字符以内！"}],initialValue:""})(H.a.createElement(m.a,{type:"textarea",rows:4})))]:[H.a.createElement(B,_()({},U.i,{label:"资源名称",hasFeedback:!0,key:"resourceName"}),t("resourceName",{rules:[{required:!0,message:"资源名称不可为空!"},{pattern:/^[A-Za-z0-9_-]+$/,message:"资源名称只能由字母、数字、下划线组成!"},{max:20,message:"资源名称不得超过20个字符!"}]})(H.a.createElement(m.a,{placeholder:"请输入资源名称"}))),H.a.createElement(B,_()({},U.i,{label:"资源类型",key:"resourceType",hasFeedback:!0}),t("resourceType",{rules:[{required:!0,message:"资源类型必选！"}],initialValue:U.c.JAR})(H.a.createElement(w.a,{onChange:this.changeFileType},H.a.createElement(z,{key:U.c.JAR,value:U.c.JAR},"jar"),H.a.createElement(z,{key:U.c.PY,value:U.c.PY},"python")))),H.a.createElement(B,_()({},U.i,{label:"上传",key:"file",hasFeedback:!0}),t("file",{rules:[{required:!0,message:"请选择上传文件"},{validator:this.validateFileType}]})(H.a.createElement("div",null,H.a.createElement("label",{style:{lineHeight:"28px"},className:"ant-btn",htmlFor:"myOfflinFile"},"选择文件"),H.a.createElement("span",null," ",e.files&&e.files[0].name),H.a.createElement("input",{name:"file",type:"file",id:"myOfflinFile",accept:this.state.accept,onChange:this.fileChange,style:{display:"none"}})))),H.a.createElement(B,_()({},U.i,{label:"选择存储位置",key:"nodePid",hasFeedback:!0}),t("nodePid",{rules:[{required:!0,message:"存储位置必选！"}],initialValue:s?this.props.treeData.id:i?n.parentId:void 0})(H.a.createElement(m.a,{type:"hidden"})),H.a.createElement(P.a,{type:U.f.RESOURCE,ispicker:!0,treeData:this.props.treeData,onChange:this.handleSelectTreeChange.bind(this),defaultNode:s?this.props.treeData.name:i?this.getFolderName(n.parentId):void 0})),H.a.createElement(B,_()({},U.i,{label:"描述",key:"resourceDesc",hasFeedback:!0}),t("resourceDesc",{rules:[{max:200,message:"描述请控制在200个字符以内！"}],initialValue:""})(H.a.createElement(m.a,{type:"textarea",rows:4}))),H.a.createElement(B,{key:"computeType",style:{display:"none"}},t("computeType",{initialValue:1})(H.a.createElement(m.a,{type:"hidden"})))]}},{key:"render",value:function(){return H.a.createElement(x.a,null,this.renderFormItem())}},{key:"getFolderName",value:function(e){var t=this.props.treeData,a=void 0;return function t(n){n.forEach(function(n,r){n.id===e?a=n.name:t(n.children||[])})}([t]),a}},{key:"checkNotDir",value:function(e,t,a){var n=this.props.treeData,r=void 0;(function e(a){a.forEach(function(a,n){a.id===t?r=a.type:e(a.children||[])})})([n]),"folder"===r&&a("请选择具体文件, 而非文件夹"),a()}}]),t}(H.a.Component),q=x.a.create()(j),K=function(e){function t(e){y()(this,t);var a=C()(this,(t.__proto__||E()(t)).call(this,e));return a.handleSubmit=a.handleSubmit.bind(a),a.handleCancel=a.handleCancel.bind(a),a.state={file:""},a.dtcount=0,a}return O()(t,e),T()(t,[{key:"shouldComponentUpdate",value:function(e,t){return this.props!==e}},{key:"handleSubmit",value:function(){var e=this,t=this.props,a=(t.isModalShow,t.toggleUploadModal,t.addResource),n=this.form;n.validateFields(function(t,r){t||(e.closeModal(),r.file=e.state.file.files[0],a(r),setTimeout(function(){e.setState({file:""}),n.resetFields()},500))})}},{key:"handleCancel",value:function(){var e=this.props;e.isModalShow,e.toggleUploadModal;this.closeModal()}},{key:"closeModal",value:function(){this.dtcount++,this.props.toggleUploadModal(),this.props.emptyModalDefault()}},{key:"handleFileChange",value:function(e){this.setState({file:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.isModalShow,n=(t.toggleUploadModal,t.resourceTreeData),r=t.defaultData,i=t.isCoverUpload,s=void 0===r,o=!s&&void 0===r.id,c=!s&&!o;return H.a.createElement("div",null,H.a.createElement(l.a,{title:i?"替换离线资源":c?"编辑资源":"上传离线计算资源",visible:a,footer:[H.a.createElement(d.a,{key:"back",size:"large",onClick:this.handleCancel},"取消"),H.a.createElement(d.a,{key:"submit",type:"primary",size:"large",onClick:this.handleSubmit}," 确认 ")],key:this.dtcount,onCancel:this.handleCancel},H.a.createElement(q,{ref:function(t){return e.form=t},treeData:n,handleFileChange:this.handleFileChange.bind(this),defaultData:r,isCreateNormal:s,isCreateFromMenu:o,isCoverUpload:i,isEditExist:c})))}}]),t}(H.a.Component),W=a.i(F.connect)(function(e){return{isModalShow:e.offlineTask.modalShow.upload,isCoverUpload:e.offlineTask.modalShow.isCoverUpload,resourceTreeData:e.offlineTask.resourceTree,defaultData:e.offlineTask.modalShow.defaultData}},function(e){return{toggleUploadModal:function(){e({type:V.o.TOGGLE_UPLOAD})},addResource:function(t){I.a.addOfflineResource(t).then(function(t){var a=t.data;1===t.code&&(i.a.success("资源上传成功！"),e({type:V.k.ADD_FOLDER_CHILD,payload:a}))})},emptyModalDefault:function(){e({type:V.o.EMPTY_MODAL_DEFAULT})}}})(K);t.a=W;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(B,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/uploadModal.js"),__REACT_HOT_LOADER__.register(z,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/uploadModal.js"),__REACT_HOT_LOADER__.register(j,"ResForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/uploadModal.js"),__REACT_HOT_LOADER__.register(q,"ResFormWrapper","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/uploadModal.js"),__REACT_HOT_LOADER__.register(K,"ResModal","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/uploadModal.js"),__REACT_HOT_LOADER__.register(W,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/uploadModal.js"))}()},2028:function(e,t,a){"use strict";var n=a(1364),r=(a.n(n),a(1363)),i=a.n(r),s=a(351),o=a.n(s),l=a(25),c=(a.n(l),a(28)),u=a.n(c),d=a(5),p=a.n(d),_=a(55),h=(a.n(_),a(54)),f=a.n(h),m=a(74),g=(a.n(m),a(73)),E=a.n(g),v=a(198),y=(a.n(v),a(141)),k=a.n(y),T=a(23),A=(a.n(T),a(22)),C=a.n(A),b=a(37),O=(a.n(b),a(15)),D=a.n(O),R=a(20),w=(a.n(R),a(19)),S=a.n(w),L=a(151),x=(a.n(L),a(125)),M=a.n(x),H=a(8),F=a.n(H),N=a(1),I=a.n(N),V=a(4),U=a.n(V),P=a(3),B=a.n(P),z=a(2),j=a.n(z),q=a(34),K=(a.n(q),a(33)),W=a.n(K),G=a(41),Y=(a.n(G),a(40)),Q=a.n(Y),J=a(68),$=(a.n(J),a(67)),Z=a.n($),X=a(0),ee=a.n(X),te=a(16),ae=a(21),ne=a(812),re=(a.n(ne),a(18)),ie=(a.n(re),a(12)),se=a(45),oe=a(51),le=a(665),ce=a(1980),ue=a(2013),de=a(2019),pe=a(1999),_e=a(298),he=a(1365),fe=a(350),me=Z.a.TabPane,ge=Q.a.confirm,Ee=W.a.Item,ve=function(e){function t(e){I()(this,t);var a=B()(this,(t.__proto__||F()(t)).call(this,e));return a.state={visible:!1,showPublish:!1,theReqIsEnd:!0},a.handleMenuClick=function(){return a.__handleMenuClick__REACT_HOT_LOADER__.apply(a,arguments)},a.handleCreateClick=function(){return a.__handleCreateClick__REACT_HOT_LOADER__.apply(a,arguments)},a.createMenu=function(){return a.__createMenu__REACT_HOT_LOADER__.apply(a,arguments)},a.importMenu=function(){return a.__importMenu__REACT_HOT_LOADER__.apply(a,arguments)},a.renderPublish=function(){return a.__renderPublish__REACT_HOT_LOADER__.apply(a,arguments)},a.publishChange=function(){return a.__publishChange__REACT_HOT_LOADER__.apply(a,arguments)},a.closePublish=function(){return a.__closePublish__REACT_HOT_LOADER__.apply(a,arguments)},a}return j()(t,e),U()(t,[{key:"__handleMenuClick__REACT_HOT_LOADER__",value:function(e){if("1"===e.key){var t=document.getElementById("importFile");t&&t.click()}}},{key:"__handleCreateClick__REACT_HOT_LOADER__",value:function(e){"task"===e.key?this.props.toggleCreateTask():"script"===e.key&&this.props.toggleCreateScript()}},{key:"__createMenu__REACT_HOT_LOADER__",value:function(){var e=this.props.scriptTreeData;return ee.a.createElement(M.a,{onClick:this.handleCreateClick},ee.a.createElement(M.a.Item,{key:"task"},"创建任务"),e&&ee.a.createElement(M.a.Item,{key:"script"},"创建脚本"))}},{key:"__importMenu__REACT_HOT_LOADER__",value:function(){return ee.a.createElement(M.a,{onClick:this.handleMenuClick},ee.a.createElement(M.a.Item,{key:"1"},"导入本地数据"))}},{key:"showPublish",value:function(){var e=this.props.currentTabData,t=e.taskType,a=(e.createModel,!0);switch(t){case oe.b.SYNC:e.createModel==oe.h.SCRIPT&&(a=this.checkSyncScript(e))}a&&this.setState({showPublish:!0})}},{key:"checkSyncScript",value:function(e){var t=e.sqlText;return!!ie.a.jsonFormat(t)||(S.a.error("请确认JSON格式是否正确"),!1)}},{key:"render",value:function(){var e=this.props,t=e.tabs,n=e.currentTab,r=e.currentTabData,i=e.dataSync,s=e.taskCustomParams,o=i.sourceMap,l=i.targetMap,c=this.state.theReqIsEnd,u=!1;a.i(re.isEmpty)(o)||a.i(re.isEmpty)(l)||(u=!0),r&&(r.taskType!==oe.b.SYNC||r.createModel==oe.h.SCRIPT&&r.taskType==oe.b.SYNC)&&(u=!0),r&&r.readWriteLockVO&&!r.readWriteLockVO.getLock&&(u=!1);var d=r&&ie.a.checkExist(r.taskType),p=!d||r.notSynced,_=d;return ee.a.createElement(f.a,{className:"m-workbench task-editor"},ee.a.createElement("header",{className:"toolbar bd-bottom clear"},ee.a.createElement(E.a,{className:"left"},ee.a.createElement(k.a,{overlay:this.createMenu(),trigger:["click"]},ee.a.createElement(C.a,{title:"创建"},ee.a.createElement(le.a,{className:"my-icon",type:"focus"}),"新建",ee.a.createElement(D.a,{type:"down"}))),ee.a.createElement(C.a,{onClick:this.saveTab.bind(this,!0),title:"保存任务",disabled:!u||r.invalid||!c},ee.a.createElement(le.a,{className:"my-icon",type:"save"}),"保存"),ee.a.createElement(k.a,{overlay:this.importMenu(),trigger:["click"]},ee.a.createElement(C.a,null,ee.a.createElement(le.a,{className:"my-icon",type:"import"}),"导入",ee.a.createElement(D.a,{type:"down"})))),_?ee.a.createElement(E.a,{className:"right"},ee.a.createElement(C.a,{disabled:p,onClick:this.showPublish.bind(this),title:"发布任务"},ee.a.createElement(le.a,{className:"my-icon",type:"fly"}),"发布"),ee.a.createElement(ae.Link,{to:"/operation/offline-management?tname="+(r&&r.name)},ee.a.createElement(C.a,{disabled:!d},ee.a.createElement(le.a,{className:"my-icon",type:"goin"})," 运维"))):null),ee.a.createElement(f.a,{className:"task-browser"},ee.a.createElement("div",{className:"browser-content"},ee.a.createElement(Z.a,{hideAdd:!0,onTabClick:this.switchTab.bind(this,n),activeKey:""+n,type:"editable-card",className:"browser-tabs",onEdit:this.closeTab.bind(this),tabBarExtraContent:ee.a.createElement(k.a,{overlay:ee.a.createElement(M.a,{style:{marginRight:2},onClick:this.closeAllorOthers.bind(this)},ee.a.createElement(M.a.Item,{key:"OHTERS"},"关闭其他"),ee.a.createElement(M.a.Item,{key:"ALL"},"关闭所有"))},ee.a.createElement(D.a,{type:"bars",style:{margin:"10 0 0 0"}}))},this.renderTabs(t)),ee.a.createElement(ue.a,{tabData:r,taskCustomParams:s,updateTaskFields:this.props.updateTaskFields,updateCatalogue:this.props.updateCatalogue}),ee.a.createElement(de.a,{tabData:r,key:r&&r.id}))),ee.a.createElement(pe.a,{visible:this.state.visible}),this.renderPublish())}},{key:"__renderPublish__REACT_HOT_LOADER__",value:function(){var e=this.props.user,t=this.state.publishDesc;return ee.a.createElement(Q.a,{wrapClassName:"vertical-center-modal",title:"发布任务",style:{height:"600px",width:"600px"},visible:this.state.showPublish,onCancel:this.closePublish,onOk:this.submitTab.bind(this),cancelText:"关闭"},ee.a.createElement(W.a,null,ee.a.createElement(Ee,p()({},oe.i,{label:"发布人",hasFeedback:!0}),ee.a.createElement("span",null,e.userName)),ee.a.createElement(Ee,p()({},oe.i,{label:ee.a.createElement("span",{className:"ant-form-item-required"},"备注"),hasFeedback:!0}),ee.a.createElement(u.a,{type:"textarea",value:t,name:"publishDesc",rows:4,onChange:this.publishChange}))))}},{key:"__publishChange__REACT_HOT_LOADER__",value:function(e){this.setState({publishDesc:e.target.value})}},{key:"__closePublish__REACT_HOT_LOADER__",value:function(){this.setState({publishDesc:"",showPublish:!1})}},{key:"closeAllorOthers",value:function(e){var t=e.key,a=this.props,n=a.tabs,r=a.closeAll,i=a.currentTab,s=a.closeOthers;if("ALL"===t){var l=!0,c=!0,u=!1,d=void 0;try{for(var p,_=o()(n);!(c=(p=_.next()).done);c=!0){p.value.notSynced&&(l=!1);break}}catch(e){u=!0,d=e}finally{try{!c&&_.return&&_.return()}finally{if(u)throw d}}l?this.props.closeAll(n):ge({title:"部分任务修改尚未同步到服务器，是否强制关闭 ?",content:"强制关闭将丢弃所有修改数据",onOk:function(){r(n)},onCancel:function(){}})}else{var h=!0,f=!0,m=!1,g=void 0;try{for(var E,v=o()(n);!(f=(E=v.next()).done);f=!0){var y=E.value;y.notSynced&&y.id!==i&&(h=!1);break}}catch(e){m=!0,g=e}finally{try{!f&&v.return&&v.return()}finally{if(m)throw g}}h?s(i,n):ge({title:"部分任务修改尚未同步到服务器，是否强制关闭 ?",content:"强制关闭将丢弃这些修改数据",onOk:function(){s(i,n)},onCancel:function(){}})}}},{key:"renderTabs",value:function(e){return e&&e.length>0?e.map(function(e){var t=ee.a.createElement("span",null,ee.a.createElement(ce.a,{notSynced:e.notSynced}),e.name);return ee.a.createElement(me,{style:{height:"0px"},tab:t,key:e.id})}):[]}},{key:"saveTab",value:function(e){var t=this;this.setState({theReqIsEnd:!1});var a=this.props,n=a.saveTab,r=a.dataSync,i=a.currentTabData,s=(a.currentTab,this.generateRqtBody(r)),o="task";ie.a.checkExist(i.taskType)||(s=i,o="script"),s.preSave=!0,s.submitStatus=0,n(s,e,o),setTimeout(function(){t.setState({theReqIsEnd:!0})},500)}},{key:"submitTab",value:function(){var e=this.props,t=e.publishTask,a=e.dataSync,n=e.currentTabData,r=(e.currentTab,e.updateTaskFields),i=e.user,s=this.state.publishDesc,o=this.generateRqtBody(a);if(!s)return S.a.error("发布备注不可为空！"),!1;if(s.length>200)return S.a.error("备注信息不可超过200个字符！"),!1;o.publishDesc=s;var l=n.taskVersions||[],c=Date.now(),u=[{id:c,gmtCreate:c,userName:i.userName,publishDesc:s,sqlText:o.sqlText}].concat(l);u=u.length>=5?u.slice(0,5):u,r({taskVersions:u}),o.preSave=!0,o.submitStatus=1,t(o),this.closePublish()}},{key:"switchTab",value:function(e,t){var a=this.props.openTab;+t!==e&&a(+t)}},{key:"closeTab",value:function(e){var t=this.props,a=t.closeTab;t.tabs.filter(function(t){return t.id==e})[0].notSynced?ge({title:"修改尚未同步到服务器，是否强制关闭 ?",content:"强制关闭将丢弃当前修改数据",onOk:function(){a(+e)},onCancel:function(){}}):a(+e)}},{key:"generateRqtBody",value:function(e){var t=a.i(re.cloneDeep)(e),n=this.props,r=n.tabs,i=n.currentTab,s=n.currentTabData,o=t.keymap,l=t.sourceMap,c=t.targetMap,u=o.source,d=o.target,p=this.props;p.name,p.id;t.sourceMap.column=u,t.targetMap.column=d,t.settingMap=t.setting,t.name=s.name,t.taskId=s.id;var _=c.type,h=l.type;for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f]);for(var m in _)_.hasOwnProperty(m)&&(c[m]=_[m]);delete t.keymap,delete t.setting,delete t.dataSourceList;var g=a.i(re.cloneDeep)(r.filter(function(e){return e.id===i})[0]);for(var E in t)t.hasOwnProperty(E)&&(g[E]=t[E]);return g.preSave=!0,g.taskVOS&&(g.dependencyTasks=g.taskVOS.map(function(e){return e}),g.taskVOS=null),delete g.taskVersions,g}}]),t}(ee.a.Component),ye=function(e){var t=e.offlineTask,a=t.workbench,n=t.dataSync,r=t.scriptTree,i=a.currentTab,s=a.tabs,o=a.taskCustomParams,l=s.filter(function(e){return e.id===i})[0];return{currentTab:i,currentTabData:l,tabs:s,dataSync:n,taskCustomParams:o,user:e.user,scriptTreeData:r}},ke=function(e){var t=a.i(fe.a)(e);return{openTab:function(t){e({type:_e.h.OPEN_TASK_TAB,payload:t}),e({type:_e.a.SET_SELECTION_CONTENT,data:""})},updateTaskFields:function(t){return e({type:_e.h.SET_TASK_FIELDS_VALUE,payload:t})},updateCatalogue:function(t){e({type:_e.j.EDIT_FOLDER_CHILD_FIELDS,payload:t})},closeTab:function(t){e(a.i(he.a)(t,null,!0)),e({type:_e.h.CLOSE_TASK_TAB,payload:t})},closeAll:function(t){for(var n in t)e(a.i(he.a)(t[n].id,null,!0));e({type:_e.h.CLOSE_ALL_TABS})},closeOthers:function(t,n){for(var r in n)n[r].id!=t&&e(a.i(he.a)(n[r].id,null,!0));e({type:_e.h.CLOSE_OTHER_TABS,payload:t})},saveTab:function(t,a,n){var r=function(t){e({type:_e.h.SET_TASK_FIELDS_VALUE,payload:t}),e({type:_e.h.MAKE_TAB_CLEAN})},s=function(e){if(1===e.code){var s=e.data,o=s.readWriteLockVO,l=o.result;0===l?(S.a.success(a?"保存成功！":"发布成功！"),r({version:s.version,readWriteLockVO:s.readWriteLockVO})):1===l?ge({title:"锁定提醒",content:ee.a.createElement("span",null,"文件正在被",o.lastKeepLockUserName,"编辑中，开始编辑时间为",ie.a.formatDateTime(o.gmtModified),"。 强制保存可能导致",o.lastKeepLockUserName,"对文件的修改无法正常保存！"),okText:"确定保存",okType:"danger",cancelText:"取消",onOk:function(){var e=function(e){1===e.code&&(S.a.success("保存成功！"),r({version:e.data.version,readWriteLockVO:e.data.readWriteLockVO}))};"task"===n?se.a.forceUpdateOfflineTask(t).then(e):"script"===n&&se.a.forceUpdateOfflineScript(t).then(e)}}):2===l&&ge({title:"保存警告",content:ee.a.createElement("span",null,"文件已经被",o.lastKeepLockUserName,"编辑过，编辑时间为",ie.a.formatDateTime(o.gmtModified),"。 点击确认按钮会",ee.a.createElement(i.a,{color:"orange"},"覆盖"),"您本地的代码，请您提前做好备份！"),okText:"确定覆盖",okType:"danger",cancelText:"取消",onOk:function(){var e={id:t.id,lockVersion:o.version};"task"===n?se.a.getOfflineTaskDetail(e).then(function(e){if(1===e.code){var t=e.data;t.merged=!0,r(t)}}):"script"===n&&se.a.getScriptById(e).then(function(e){if(1===e.code){var t=e.data;t.merged=!0,r(t)}})}})}};t.lockVersion=t.readWriteLockVO.version,"task"===n?se.a.saveOfflineJobData(t).then(s):"script"===n&&se.a.saveScript(t).then(s)},goToTaskDev:function(e){t.openTaskInDev(e)},publishTask:function(t){var a=function(t){1===t.code&&(S.a.success("发布成功！"),e({type:_e.h.CHANGE_TASK_SUBMITSTATUS,payload:t.data&&t.data.submitStatus||1}),e({type:_e.h.MAKE_TAB_CLEAN}))};se.a.publishOfflineTask(t).then(a)},toggleCreateTask:function(){e({type:_e.o.TOGGLE_CREATE_TASK})},toggleCreateFolder:function(t){e({type:_e.o.TOGGLE_CREATE_FOLDER,payload:t})},toggleCreateScript:function(){e({type:_e.o.TOGGLE_CREATE_SCRIPT})}}},Te=a.i(te.connect)(ye,ke)(ve);t.a=Te;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(me,"TabPane","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/workbench.js"),__REACT_HOT_LOADER__.register(ge,"confirm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/workbench.js"),__REACT_HOT_LOADER__.register(Ee,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/workbench.js"),__REACT_HOT_LOADER__.register(ve,"Workbench","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/workbench.js"),__REACT_HOT_LOADER__.register(ye,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/workbench.js"),__REACT_HOT_LOADER__.register(ke,"mapDispatch","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/workbench.js"),__REACT_HOT_LOADER__.register(Te,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/workbench.js"))}()},2029:function(e,t,a){"use strict";var n=a(8),r=a.n(n),i=a(1),s=a.n(i),o=a(4),l=a.n(o),c=a(3),u=a.n(c),d=a(2),p=a.n(d),_=a(0),h=a.n(_),f=a(2030),m=a(51),g=a(920);a.d(t,"a",function(){return E});var E=function(e){function t(){return s()(this,t),u()(this,(t.__proto__||r()(t)).apply(this,arguments))}return p()(t,e),l()(t,[{key:"render",value:function(){var e=this.props,t=e.currentPage,a=e.editorChange,n=e.editorFocus,r=e.editorFocusOut,i=t.taskType===m.b.SQL?h.a.createElement(g.a,{key:"main-editor-"+t.id,value:t.sqlText,sync:t.merged||void 0,onFocus:n,focusOut:r,onChange:a}):h.a.createElement(f.a,this.props);return h.a.createElement("div",{className:"editor-container"},i)}}]),t}(_.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(E,"EditorContainer","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/editorContainer.js")}()},2030:function(e,t,a){"use strict";var n=a(59),r=a.n(n),i=a(5),s=a.n(i),o=a(25),l=(a.n(o),a(28)),c=a.n(l),u=a(8),d=a.n(u),p=a(1),_=a.n(p),h=a(4),f=a.n(h),m=a(3),g=a.n(m),E=a(2),v=a.n(E),y=a(80),k=(a.n(y),a(75)),T=a.n(k),A=a(34),C=(a.n(A),a(33)),b=a.n(C),O=a(0),D=a.n(O),R=a(51),w=a(922),S=b.a.Item,L=T.a.Group,x=function(e){function t(){return _()(this,t),g()(this,(t.__proto__||d()(t)).apply(this,arguments))}return v()(t,e),f()(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.currentPage,n=t.getFieldDecorator;return D.a.createElement("div",{style:{padding:"60px"}},D.a.createElement(b.a,null,D.a.createElement(S,s()({},R.i,{label:"任务名称",hasFeedback:!0}),n("name",{rules:[{required:!0,message:"任务名称不可为空！"},{max:64,message:"任务名称不得超过64个字符！"}],initialValue:a?a.name:""})(D.a.createElement(c.a,null))),D.a.createElement(S,s()({},R.i,{label:"任务类型"}),n("taskType",{rules:[],initialValue:a?a.taskType:0})(D.a.createElement(L,{disabled:!0},D.a.createElement(T.a,{value:0},"SQL任务"),D.a.createElement(T.a,{value:1},"MR任务")))),D.a.createElement(S,s()({},R.i,{label:"资源",hasFeedback:!0}),a&&a.resourceList&&a.resourceList.length>0?a.resourceList[0].resourceName:""),D.a.createElement(S,s()({},R.i,{label:"mainClass"}),n("mainClass",{rules:[{}],initialValue:a&&a.mainClass})(D.a.createElement(c.a,{placeholder:"请输入mainClass"}))),D.a.createElement(S,s()({},R.i,{label:"参数"}),n("exeArgs",{rules:[{}],initialValue:a&&a.exeArgs})(D.a.createElement(c.a,{placeholder:"请输入任务参数"}))),D.a.createElement(S,s()({},R.i,{label:"描述",hasFeedback:!0}),n("taskDesc",{rules:[],initialValue:a?a.taskDesc:""})(D.a.createElement(c.a,{type:"textarea",rows:4})))))}}]),t}(O.Component),M=function(e,t){var a=e.dispatch,n=e.currentPage,i=!1;""===t.name&&(i=!0),t.invalid=i;var s=r()(n,t);a(w.d(s)),a(w.h(s))},H=b.a.create({onValuesChange:M})(x),F=H;t.a=F;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(S,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/mrEditor.js"),__REACT_HOT_LOADER__.register(L,"RadioGroup","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/mrEditor.js"),__REACT_HOT_LOADER__.register(x,"MrEditor","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/mrEditor.js"),__REACT_HOT_LOADER__.register(M,"taskValueChange","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/mrEditor.js"),__REACT_HOT_LOADER__.register(H,"wrappedForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/mrEditor.js"),__REACT_HOT_LOADER__.register(F,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/mrEditor.js"))}()},2031:function(e,t,a){"use strict";var n=a(55),r=(a.n(n),a(54)),i=a.n(r),s=a(198),o=(a.n(s),a(141)),l=a.n(o),c=a(37),u=(a.n(c),a(15)),d=a.n(u),p=a(151),_=(a.n(p),a(125)),h=a.n(_),f=a(351),m=a.n(f),g=a(59),E=a.n(g),v=a(1018),y=(a.n(v),a(1017)),k=a.n(y),T=a(20),A=(a.n(T),a(19)),C=a.n(A),b=a(8),O=a.n(b),D=a(1),R=a.n(D),w=a(4),S=a.n(w),L=a(3),x=a.n(L),M=a(2),H=a.n(M),F=a(41),N=(a.n(F),a(40)),I=a.n(N),V=a(68),U=(a.n(V),a(67)),P=a.n(U),B=a(0),z=a.n(B),j=a(812),q=(a.n(j),a(12)),K=a(45),W=a(51),G=a(1980),Y=a(920),Q=(a(204),a(922)),J=a(1116),$=a(2029),Z=a(2032);a(923);a.d(t,"a",function(){return te});var X=P.a.TabPane,ee=I.a.confirm,te=function(e){function t(){var e,a,n,r;R()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=x()(this,(e=t.__proto__||O()(t)).call.apply(e,[this].concat(s))),n.state={selected:"",expanded:!1},n.onChange=function(){var e;return(e=n).__onChange__REACT_HOT_LOADER__.apply(e,arguments)},n.onEdit=function(){var e;return(e=n).__onEdit__REACT_HOT_LOADER__.apply(e,arguments)},n.mapPanels=function(){var e;return(e=n).__mapPanels__REACT_HOT_LOADER__.apply(e,arguments)},n.tabClick=function(){var e;return(e=n).__tabClick__REACT_HOT_LOADER__.apply(e,arguments)},n.unLock=function(){var e;return(e=n).__unLock__REACT_HOT_LOADER__.apply(e,arguments)},n.handleCustomParamsChange=function(){var e;return(e=n).__handleCustomParamsChange__REACT_HOT_LOADER__.apply(e,arguments)},r=a,x()(n,r)}return H()(t,e),S()(t,[{key:"__onChange__REACT_HOT_LOADER__",value:function(e){var t=this.props,a=t.dispatch,n=t.pages,r=parseInt(e,10),i=n&&n.find(function(e){return e.id===r});i&&a(Q.d(i))}},{key:"__onEdit__REACT_HOT_LOADER__",value:function(e,t){var a=this.props,n=a.pages,r=a.currentPage,i=a.dispatch;switch(t){case"remove":r.notSynced?ee({title:"部分任务修改尚未同步到服务器，是否强制关闭 ?",content:"强制关闭将丢弃这些修改数据",onOk:function(){i(Q.f(parseInt(e,10),n,r))},onCancel:function(){}}):i(Q.f(parseInt(e,10),n,r))}}},{key:"__mapPanels__REACT_HOT_LOADER__",value:function(e){return e&&e.length>0?e.map(function(e){var t=z.a.createElement("span",null,z.a.createElement(G.a,{notSynced:e.notSynced}),e.name);return z.a.createElement(X,{style:{height:"0px"},tab:t,key:e.id})}):[]}},{key:"__tabClick__REACT_HOT_LOADER__",value:function(e){var t=this.state,a=t.selected,n=t.expanded;e===a&&n?(this.setState({selected:"",expanded:!1}),this.SideBench.style.width="30px"):e!==a&&(this.SideBench.style.width="500px",this.setState({selected:e,expanded:!0}))}},{key:"__unLock__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.currentPage,n=e.dispatch,r=t.readWriteLockVO;ee({title:"解锁提醒",content:"文件正在被"+r.lastKeepLockUserName+"编辑中，开始编辑时间\n                "+q.a.formatDateTime(r.gmtModified)+"。\n                强制编辑可能导致"+r.lastKeepLockUserName+"对该文件的修改无法保存！\n            ",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){var e={fileId:t.id,type:W.p.STREAM_TASK,lockVersion:r.version};K.a.unlockFile(e).then(function(e){if(1===e.code){var r=e.data;r.getLock?C.a.success("文件解锁成功！"):I.a.error({title:"解锁失败",content:"文件正在被"+r.lastKeepLockUserName+"编辑中!开始编辑时间\n                                "+q.a.formatDateTime(r.gmtModified)+"."});var i={id:t.id};K.a.getTask(i).then(function(e){if(1===e.code){var r=e.data;r.merged=!0;var i={id:t.id,readWriteLockVO:r.readWriteLockVO};n(Q.d(r)),n(a.i(J.c)(i))}})}})},onCancel:function(){}})}},{key:"renderLock",value:function(e){return e.readWriteLockVO&&!e.readWriteLockVO.getLock?z.a.createElement("div",{className:"lock-layer"},z.a.createElement(k.a,{style:{position:"absolute",top:"10px",left:"35%",zIndex:"999"},showIcon:!0,message:z.a.createElement("span",null,"当前文件为只读状态！",z.a.createElement("a",{onClick:this.unLock},"解锁")),type:"warning"})):null}},{key:"__handleCustomParamsChange__REACT_HOT_LOADER__",value:function(e){var t=this.props,a=t.currentPage,n=t.dispatch,r=E()(a,e);n(Q.d(r))}},{key:"closeAllorOthers",value:function(e){var t=e.key,a=this.props,n=a.pages,r=a.currentPage,i=a.dispatch;if("ALL"===t){var s=!0,o=!0,l=!1,c=void 0;try{for(var u,d=m()(n);!(o=(u=d.next()).done);o=!0){u.value.notSynced&&(s=!1);break}}catch(e){l=!0,c=e}finally{try{!o&&d.return&&d.return()}finally{if(l)throw c}}s?i(Q.c()):ee({title:"部分任务修改尚未同步到服务器，是否强制关闭 ?",content:"强制关闭将丢弃所有修改数据",onOk:function(){i(Q.c())},onCancel:function(){}})}else{var p=!0,_=!0,h=!1,f=void 0;try{for(var g,E=m()(n);!(_=(g=E.next()).done);_=!0){var v=g.value;v.notSynced&&v.id!==r.id&&(p=!1);break}}catch(e){h=!0,f=e}finally{try{!_&&E.return&&E.return()}finally{if(h)throw f}}p?i(Q.g(r)):ee({title:"部分任务修改尚未同步到服务器，是否强制关闭 ?",content:"强制关闭将丢弃这些修改数据",onOk:function(){i(Q.g(r))},onCancel:function(){}})}}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentPage,n=t.pages,r=t.router,s=t.editorFocus,o=t.editorFocusOut,c=t.editorParamsChange;0===n.length&&r.push("/realtime");var u=this.mapPanels(n);return z.a.createElement(i.a,{className:"task-browser"},z.a.createElement("div",{className:"browser-content"},z.a.createElement(P.a,{hideAdd:!0,onTabClick:this.onChange,activeKey:""+a.id,type:"editable-card",className:"browser-tabs",onEdit:this.onEdit,tabBarExtraContent:z.a.createElement(l.a,{overlay:z.a.createElement(h.a,{style:{marginRight:2},onClick:this.closeAllorOthers.bind(this)},z.a.createElement(h.a.Item,{key:"OHTERS"},"关闭其他"),z.a.createElement(h.a.Item,{key:"ALL"},"关闭所有"))},z.a.createElement(d.a,{type:"bars",style:{margin:"10 0 0 0"}}))},u),this.renderLock(a),z.a.createElement($.a,this.props),z.a.createElement("div",{className:"m-siderbench bd-left",ref:function(t){e.SideBench=t}},z.a.createElement(P.a,{activeKey:this.state.selected,type:"card",className:"task-params",tabPosition:"right",onTabClick:this.tabClick},z.a.createElement(X,{tab:z.a.createElement("span",{className:"title-vertical"},"任务详情"),key:"params1"},z.a.createElement(Z.a,this.props)),z.a.createElement(X,{tab:z.a.createElement("span",{className:"title-vertical"},"环境参数"),key:"params2"},z.a.createElement(Y.a,{key:"params-editor",options:W.k,onFocus:s,focusOut:o,value:a.taskParams,onChange:c}))))))}}]),t}(B.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(X,"TabPane","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/taskBrowser.js"),__REACT_HOT_LOADER__.register(ee,"confirm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/taskBrowser.js"),__REACT_HOT_LOADER__.register(te,"TaskBrowser","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/taskBrowser.js"))}()},2032:function(e,t,a){"use strict";var n=a(41),r=(a.n(n),a(40)),i=a.n(r),s=a(55),o=(a.n(s),a(54)),l=a.n(o),c=a(74),u=(a.n(c),a(73)),d=a.n(u),p=a(1364),_=(a.n(p),a(1363)),h=a.n(_),f=a(20),m=(a.n(f),a(19)),g=a.n(m),E=a(8),v=a.n(E),y=a(1),k=a.n(y),T=a(4),A=a.n(T),C=a(3),b=a.n(C),O=a(2),D=a.n(O),R=a(1359),w=(a.n(R),a(1358)),S=a.n(w),L=a(27),x=(a.n(L),a(26)),M=a.n(x),H=a(0),F=a.n(H),N=a(12),I=a(45),V=a(922),U=a(1985);a.d(t,"a",function(){return z});var P=M.a.Option,B=S.a.Panel,z=function(e){function t(){var e,a,n,r;k()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=b()(this,(e=t.__proto__||v()(t)).call.apply(e,[this].concat(s))),n.state={visibleAlterRes:!1,resList:[]},n.handleChange=function(){var e;return(e=n).__handleChange__REACT_HOT_LOADER__.apply(e,arguments)},n.alterRes=function(){var e;return(e=n).__alterRes__REACT_HOT_LOADER__.apply(e,arguments)},r=a,b()(n,r)}return D()(t,e),A()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.currentPage,a=this.props.currentPage;if(t.id!==a.id){var n=t.resourceList.length>0?t.resourceList.map(function(e){return e.id}):[];this.setState({resList:n})}}},{key:"__handleChange__REACT_HOT_LOADER__",value:function(e){this.setState({resList:e})}},{key:"__alterRes__REACT_HOT_LOADER__",value:function(){var e=this,t=this.props.currentPage,a=this.state.resList;if(a=Array.isArray(a)?a:[a],0===a.length)return void g.a.info("您没有选择任何资源！");t&&t.id&&a.length>0&&I.a.updateTaskRes({id:t.id,resources:a}).then(function(a){1===a.code&&(g.a.success("资源修改成功！"),e.reloadTask(t.id),e.setState({visibleAlterRes:!1,resList:[]}))})}},{key:"reloadTask",value:function(e){var t=this.props.dispatch;I.a.getTask({taskId:e}).then(function(e){1===e.code&&(t(V.d(e.data)),t(V.h(e.data)))})}},{key:"render",value:function(){var e=this,t=this.state,a=t.visibleAlterRes,n=t.resList,r=this.props,s=r.resources,o=r.currentPage,c=r.editorChange,u=(r.versionEditorChange,o.resourceList&&o.resourceList.map(function(e){return F.a.createElement(h.a,{key:e.id,color:"blue"},e.resourceName)})),p=s&&s.map(function(e){return F.a.createElement(P,{value:e.id,key:e.id,name:e.resourceName},e.resourceName)});return F.a.createElement("div",{className:"m-taksdetail"},F.a.createElement(S.a,{bordered:!1,defaultActiveKey:["1","2"]},F.a.createElement(B,{key:"1",header:"任务属性"},F.a.createElement(l.a,{className:"task-info"},F.a.createElement(l.a,null,F.a.createElement(d.a,{span:"10",className:"txt-right"},"任务名称："),F.a.createElement(d.a,{span:"14"},o.name)),F.a.createElement(l.a,null,F.a.createElement(d.a,{span:"10",className:"txt-right"},"任务类型："),F.a.createElement(d.a,{span:"14"},0===o.taskType?"SQL任务":"MR任务")),F.a.createElement(l.a,null,F.a.createElement(d.a,{span:"10",className:"txt-right"},"资源："),F.a.createElement(d.a,{span:"14",style:{marginTop:"10px"}},u)),F.a.createElement(l.a,null,F.a.createElement(d.a,{span:"10",className:"txt-right"},"创建人员："),F.a.createElement(d.a,{span:"14"},o.createUserName)),F.a.createElement(l.a,null,F.a.createElement(d.a,{span:"10",className:"txt-right"},"创建时间："),F.a.createElement(d.a,{span:"14"},N.a.formatDateTime(o.gmtCreate))),F.a.createElement(l.a,null,F.a.createElement(d.a,{span:"10",className:"txt-right"},"最近修改时间："),F.a.createElement(d.a,{span:"14"},N.a.formatDateTime(o.gmtModified))),F.a.createElement(l.a,null,F.a.createElement(d.a,{span:"10",className:"txt-right"},"描述："),F.a.createElement(d.a,{span:"14"},o.taskDesc)),F.a.createElement(i.a,{title:"修改任务资源",wrapClassName:"vertical-center-modal",visible:a,onCancel:function(){e.setState({visibleAlterRes:!1})},onOk:this.alterRes},F.a.createElement(M.a,{mode:0===o.taskType?"multiple":"",style:{width:"100%"},showSearch:!0,value:n,placeholder:"请选择资源",optionFilterProp:"name",onChange:this.handleChange},p)))),F.a.createElement(B,{key:"2",header:"历史发布版本"},F.a.createElement(U.a,{taskInfo:o,changeSql:c.bind(null,!0)}))))}}]),t}(H.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(P,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/taskDetail.js"),__REACT_HOT_LOADER__.register(B,"Panel","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/taskDetail.js"),__REACT_HOT_LOADER__.register(z,"TaskDetail","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/realtime/taskDetail.js"))}()},2033:function(e,t,a){var n=a(2036);"string"==typeof n&&(n=[[e.i,n,""]]);a(1969)(n,{});n.locals&&(e.exports=n.locals)},2034:function(e,t,a){var n=a(2039);"string"==typeof n&&(n=[[e.i,n,""]]);a(1969)(n,{});n.locals&&(e.exports=n.locals)},2036:function(e,t,a){t=e.exports=a(1016)(),t.push([e.i,'.CodeMirror-merge{position:relative;border:1px solid #ddd;white-space:pre}.CodeMirror-merge,.CodeMirror-merge .CodeMirror{height:350px}.CodeMirror-merge-2pane .CodeMirror-merge-pane{width:47%}.CodeMirror-merge-2pane .CodeMirror-merge-gap{width:6%}.CodeMirror-merge-3pane .CodeMirror-merge-pane{width:31%}.CodeMirror-merge-3pane .CodeMirror-merge-gap{width:3.5%}.CodeMirror-merge-pane{display:inline-block;white-space:normal;vertical-align:top}.CodeMirror-merge-pane-rightmost{position:absolute;right:0;z-index:1}.CodeMirror-merge-gap{z-index:2;display:inline-block;height:100%;box-sizing:border-box;overflow:hidden;border-left:1px solid #ddd;border-right:1px solid #ddd;position:relative;background:#f8f8f8}.CodeMirror-merge-scrolllock-wrap{position:absolute;bottom:0;left:50%}.CodeMirror-merge-scrolllock{position:relative;left:-50%;cursor:pointer;color:#555;line-height:1}.CodeMirror-merge-copybuttons-left,.CodeMirror-merge-copybuttons-right{position:absolute;left:0;top:0;right:0;bottom:0;line-height:1}.CodeMirror-merge-copy{z-index:3}.CodeMirror-merge-copy,.CodeMirror-merge-copy-reverse{position:absolute;cursor:pointer;color:#44c}.CodeMirror-merge-copybuttons-left .CodeMirror-merge-copy{left:2px}.CodeMirror-merge-copybuttons-right .CodeMirror-merge-copy{right:2px}.CodeMirror-merge-l-inserted,.CodeMirror-merge-r-inserted{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAYAAACddGYaAAAAGUlEQVQI12MwuCXy3+CWyH8GBgYGJgYkAABZbAQ9ELXurwAAAABJRU5ErkJggg==);background-position:0 100%;background-repeat:repeat-x}.CodeMirror-merge-l-deleted,.CodeMirror-merge-r-deleted{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAYAAACddGYaAAAAGUlEQVQI12M4Kyb2/6yY2H8GBgYGJgYkAABURgPz6Ks7wQAAAABJRU5ErkJggg==);background-position:0 100%;background-repeat:repeat-x}.CodeMirror-merge-r-chunk{background:#ffffe0}.CodeMirror-merge-r-chunk-start{border-top:1px solid #ee8}.CodeMirror-merge-r-chunk-end{border-bottom:1px solid #ee8}.CodeMirror-merge-r-connect{fill:#ffffe0;stroke:#ee8;stroke-width:1px}.CodeMirror-merge-l-chunk{background:#eef}.CodeMirror-merge-l-chunk-start{border-top:1px solid #88e}.CodeMirror-merge-l-chunk-end{border-bottom:1px solid #88e}.CodeMirror-merge-l-connect{fill:#eef;stroke:#88e;stroke-width:1px}.CodeMirror-merge-l-chunk.CodeMirror-merge-r-chunk{background:#dfd}.CodeMirror-merge-l-chunk-start.CodeMirror-merge-r-chunk-start{border-top:1px solid #4e4}.CodeMirror-merge-l-chunk-end.CodeMirror-merge-r-chunk-end{border-bottom:1px solid #4e4}.CodeMirror-merge-collapsed-widget:before{content:"(...)"}.CodeMirror-merge-collapsed-widget{cursor:pointer;color:#88b;background:#eef;border:1px solid #ddf;font-size:90%;padding:0 3px;border-radius:4px}.CodeMirror-merge-collapsed-line .CodeMirror-gutter-elt{display:none}',"",{version:3,sources:["/./node_modules/codemirror/addon/merge/merge.css"],names:[],mappings:"AAAA,kBACE,kBAAmB,AACnB,sBAAuB,AACvB,eAAiB,CAClB,AAED,gDACE,YAAc,CACf,AAED,+CAAiD,SAAW,CAAE,AAC9D,8CAAgD,QAAU,CAAE,AAC5D,+CAAiD,SAAW,CAAE,AAC9D,8CAAgD,UAAY,CAAE,AAE9D,uBACE,qBAAsB,AACtB,mBAAoB,AACpB,kBAAoB,CACrB,AACD,iCACE,kBAAmB,AACnB,QAAW,AACX,SAAW,CACZ,AAED,sBACE,UAAW,AACX,qBAAsB,AACtB,YAAa,AAEb,sBAAuB,AACvB,gBAAiB,AACjB,2BAA4B,AAC5B,4BAA6B,AAC7B,kBAAmB,AACnB,kBAAoB,CACrB,AAED,kCACE,kBAAmB,AACnB,SAAU,AAAC,QAAU,CACtB,AACD,6BACE,kBAAmB,AACnB,UAAW,AACX,eAAgB,AAChB,WAAY,AACZ,aAAe,CAChB,AAED,uEACE,kBAAmB,AACnB,OAAQ,AAAC,MAAO,AAChB,QAAS,AAAC,SAAU,AACpB,aAAe,CAChB,AAED,uBAIE,SAAW,CACZ,AAED,sDANE,kBAAmB,AACnB,eAAgB,AAChB,UAAY,CAQb,AAED,0DAA4D,QAAU,CAAE,AACxE,2DAA6D,SAAW,CAAE,AAE1E,0DACE,6JAA8J,AAC9J,2BAAiC,AACjC,0BAA4B,CAC7B,AAED,wDACE,6JAA8J,AAC9J,2BAAiC,AACjC,0BAA4B,CAC7B,AAED,0BAA4B,kBAAoB,CAAE,AAClD,gCAAkC,yBAA2B,CAAE,AAC/D,8BAAgC,4BAA8B,CAAE,AAChE,4BAA8B,aAAc,AAAC,YAAa,AAAC,gBAAkB,CAAE,AAE/E,0BAA4B,eAAiB,CAAE,AAC/C,gCAAkC,yBAA2B,CAAE,AAC/D,8BAAgC,4BAA8B,CAAE,AAChE,4BAA8B,UAAW,AAAC,YAAa,AAAC,gBAAkB,CAAE,AAE5E,mDAAqD,eAAiB,CAAE,AACxE,+DAAiE,yBAA2B,CAAE,AAC9F,2DAA6D,4BAA8B,CAAE,AAE7F,0CACE,eAAiB,CAClB,AACD,mCACE,eAAgB,AAChB,WAAY,AACZ,gBAAiB,AACjB,sBAAuB,AACvB,cAAe,AACf,cAAe,AACf,iBAAmB,CACpB,AACD,wDAA0D,YAAc,CAAE",file:"merge.css",sourcesContent:['.CodeMirror-merge {\n  position: relative;\n  border: 1px solid #ddd;\n  white-space: pre;\n}\n\n.CodeMirror-merge, .CodeMirror-merge .CodeMirror {\n  height: 350px;\n}\n\n.CodeMirror-merge-2pane .CodeMirror-merge-pane { width: 47%; }\n.CodeMirror-merge-2pane .CodeMirror-merge-gap { width: 6%; }\n.CodeMirror-merge-3pane .CodeMirror-merge-pane { width: 31%; }\n.CodeMirror-merge-3pane .CodeMirror-merge-gap { width: 3.5%; }\n\n.CodeMirror-merge-pane {\n  display: inline-block;\n  white-space: normal;\n  vertical-align: top;\n}\n.CodeMirror-merge-pane-rightmost {\n  position: absolute;\n  right: 0px;\n  z-index: 1;\n}\n\n.CodeMirror-merge-gap {\n  z-index: 2;\n  display: inline-block;\n  height: 100%;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n  border-left: 1px solid #ddd;\n  border-right: 1px solid #ddd;\n  position: relative;\n  background: #f8f8f8;\n}\n\n.CodeMirror-merge-scrolllock-wrap {\n  position: absolute;\n  bottom: 0; left: 50%;\n}\n.CodeMirror-merge-scrolllock {\n  position: relative;\n  left: -50%;\n  cursor: pointer;\n  color: #555;\n  line-height: 1;\n}\n\n.CodeMirror-merge-copybuttons-left, .CodeMirror-merge-copybuttons-right {\n  position: absolute;\n  left: 0; top: 0;\n  right: 0; bottom: 0;\n  line-height: 1;\n}\n\n.CodeMirror-merge-copy {\n  position: absolute;\n  cursor: pointer;\n  color: #44c;\n  z-index: 3;\n}\n\n.CodeMirror-merge-copy-reverse {\n  position: absolute;\n  cursor: pointer;\n  color: #44c;\n}\n\n.CodeMirror-merge-copybuttons-left .CodeMirror-merge-copy { left: 2px; }\n.CodeMirror-merge-copybuttons-right .CodeMirror-merge-copy { right: 2px; }\n\n.CodeMirror-merge-r-inserted, .CodeMirror-merge-l-inserted {\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAYAAACddGYaAAAAGUlEQVQI12MwuCXy3+CWyH8GBgYGJgYkAABZbAQ9ELXurwAAAABJRU5ErkJggg==);\n  background-position: bottom left;\n  background-repeat: repeat-x;\n}\n\n.CodeMirror-merge-r-deleted, .CodeMirror-merge-l-deleted {\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAYAAACddGYaAAAAGUlEQVQI12M4Kyb2/6yY2H8GBgYGJgYkAABURgPz6Ks7wQAAAABJRU5ErkJggg==);\n  background-position: bottom left;\n  background-repeat: repeat-x;\n}\n\n.CodeMirror-merge-r-chunk { background: #ffffe0; }\n.CodeMirror-merge-r-chunk-start { border-top: 1px solid #ee8; }\n.CodeMirror-merge-r-chunk-end { border-bottom: 1px solid #ee8; }\n.CodeMirror-merge-r-connect { fill: #ffffe0; stroke: #ee8; stroke-width: 1px; }\n\n.CodeMirror-merge-l-chunk { background: #eef; }\n.CodeMirror-merge-l-chunk-start { border-top: 1px solid #88e; }\n.CodeMirror-merge-l-chunk-end { border-bottom: 1px solid #88e; }\n.CodeMirror-merge-l-connect { fill: #eef; stroke: #88e; stroke-width: 1px; }\n\n.CodeMirror-merge-l-chunk.CodeMirror-merge-r-chunk { background: #dfd; }\n.CodeMirror-merge-l-chunk-start.CodeMirror-merge-r-chunk-start { border-top: 1px solid #4e4; }\n.CodeMirror-merge-l-chunk-end.CodeMirror-merge-r-chunk-end { border-bottom: 1px solid #4e4; }\n\n.CodeMirror-merge-collapsed-widget:before {\n  content: "(...)";\n}\n.CodeMirror-merge-collapsed-widget {\n  cursor: pointer;\n  color: #88b;\n  background: #eef;\n  border: 1px solid #ddf;\n  font-size: 90%;\n  padding: 0 3px;\n  border-radius: 4px;\n}\n.CodeMirror-merge-collapsed-line .CodeMirror-gutter-elt { display: none; }\n'],sourceRoot:"webpack://"}])},2037:function(e,t,a){t=e.exports=a(1016)(),t.push([e.i,".ant-select-auto-complete.ant-select .ant-select-selection{border:0;box-shadow:none}.ant-select-auto-complete.ant-select .ant-select-selection__rendered{margin-left:0;margin-right:0;height:100%;line-height:28px}.ant-select-auto-complete.ant-select .ant-select-selection__placeholder{margin-left:8px;margin-right:8px}.ant-select-auto-complete.ant-select .ant-select-selection--single{height:auto}.ant-select-auto-complete.ant-select .ant-select-search--inline{position:static;float:left}.ant-select-auto-complete.ant-select-allow-clear .ant-select-selection:hover .ant-select-selection__rendered{margin-right:0!important}.ant-select-auto-complete.ant-select .ant-input{background:transparent;border-width:1px;line-height:1.5;height:28px}.ant-select-auto-complete.ant-select .ant-input:focus,.ant-select-auto-complete.ant-select .ant-input:hover{border-color:#49a9ee}.ant-select-auto-complete.ant-select-lg .ant-select-selection__rendered{line-height:32px}.ant-select-auto-complete.ant-select-lg .ant-input{padding-top:6px;padding-bottom:6px;height:32px}.ant-select-auto-complete.ant-select-sm .ant-select-selection__rendered{line-height:22px}.ant-select-auto-complete.ant-select-sm .ant-input{padding-top:1px;padding-bottom:1px;height:22px}","",{version:3,sources:["/./node_modules/antd/lib/auto-complete/style/index.less"],names:[],mappings:"AAAA,2DAA2D,SAAS,eAAe,CAAC,qEAAqE,cAAc,eAAe,YAAY,gBAAgB,CAAC,wEAAwE,gBAAgB,gBAAgB,CAAC,mEAAmE,WAAW,CAAC,gEAAgE,gBAAgB,UAAU,CAAC,6GAA6G,wBAAyB,CAAC,gDAAgD,uBAAuB,iBAAiB,gBAAgB,WAAW,CAAC,4GAA4G,oBAAoB,CAAC,wEAAwE,gBAAgB,CAAC,mDAAmD,gBAAgB,mBAAmB,WAAW,CAAC,wEAAwE,gBAAgB,CAAC,mDAAmD,gBAAgB,mBAAmB,WAAW,CAAC",file:"index.less",sourcesContent:[".ant-select-auto-complete.ant-select .ant-select-selection{border:0;box-shadow:none}.ant-select-auto-complete.ant-select .ant-select-selection__rendered{margin-left:0;margin-right:0;height:100%;line-height:28px}.ant-select-auto-complete.ant-select .ant-select-selection__placeholder{margin-left:8px;margin-right:8px}.ant-select-auto-complete.ant-select .ant-select-selection--single{height:auto}.ant-select-auto-complete.ant-select .ant-select-search--inline{position:static;float:left}.ant-select-auto-complete.ant-select-allow-clear .ant-select-selection:hover .ant-select-selection__rendered{margin-right:0 !important}.ant-select-auto-complete.ant-select .ant-input{background:transparent;border-width:1px;line-height:1.5;height:28px}.ant-select-auto-complete.ant-select .ant-input:focus,.ant-select-auto-complete.ant-select .ant-input:hover{border-color:#49a9ee}.ant-select-auto-complete.ant-select-lg .ant-select-selection__rendered{line-height:32px}.ant-select-auto-complete.ant-select-lg .ant-input{padding-top:6px;padding-bottom:6px;height:32px}.ant-select-auto-complete.ant-select-sm .ant-select-selection__rendered{line-height:22px}.ant-select-auto-complete.ant-select-sm .ant-input{padding-top:1px;padding-bottom:1px;height:22px}"],sourceRoot:"webpack://"}])},2039:function(e,t,a){t=e.exports=a(1016)(),t.push([e.i,'.merge-text .CodeMirror-merge-editor{position:relative}.merge-text .CodeMirror-merge-editor:before{content:"\\5F53\\524D\\7248\\672C";position:absolute;top:-20px;left:30px;color:#8c8c8c}.merge-text .CodeMirror-merge-right:before{content:"\\5386\\53F2\\7248\\672C";position:absolute;top:-20px;left:30px;color:#8c8c8c}',"",{version:3,sources:["/./src/webapps/rdos/components/diff-code-editor/style.css"],names:[],mappings:"AAAA,qCACI,iBAAmB,CACtB,AACD,4CACI,+BAAe,AACf,kBAAmB,AACnB,UAAU,AACV,UAAU,AACV,aAAc,CACjB,AACD,2CACI,+BAAe,AACf,kBAAmB,AACnB,UAAU,AACV,UAAU,AACV,aAAc,CACjB",file:"style.css",sourcesContent:['.merge-text .CodeMirror-merge-editor{\n    position: relative;\n}\n.merge-text .CodeMirror-merge-editor:before{\n    content:"当前版本";\n    position: absolute;\n    top:-20px;\n    left:30px;\n    color:#8c8c8c;\n}\n.merge-text .CodeMirror-merge-right:before{\n    content:"历史版本";\n    position: absolute;\n    top:-20px;\n    left:30px;\n    color:#8c8c8c;\n}'],sourceRoot:"webpack://"}])},2040:function(e,t,a){"use strict";function n(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var r=-1,i=1,s=0;n.Diff,n.prototype.diff_main=function(e,t,a,n){void 0===n&&(n=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var r=n;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[s,e]]:[];void 0===a&&(a=!0);var i=a,o=this.diff_commonPrefix(e,t),l=e.substring(0,o);e=e.substring(o),t=t.substring(o),o=this.diff_commonSuffix(e,t);var c=e.substring(e.length-o);e=e.substring(0,e.length-o),t=t.substring(0,t.length-o);var u=this.diff_compute_(e,t,i,r);return l&&u.unshift([s,l]),c&&u.push([s,c]),this.diff_cleanupMerge(u),u},n.prototype.diff_compute_=function(e,t,a,n){var o;if(!e)return[[i,t]];if(!t)return[[r,e]];var l=e.length>t.length?e:t,c=e.length>t.length?t:e,u=l.indexOf(c);if(-1!=u)return o=[[i,l.substring(0,u)],[s,c],[i,l.substring(u+c.length)]],e.length>t.length&&(o[0][0]=o[2][0]=r),o;if(1==c.length)return[[r,e],[i,t]];var d=this.diff_halfMatch_(e,t);if(d){var p=d[0],_=d[1],h=d[2],f=d[3],m=d[4],g=this.diff_main(p,h,a,n),E=this.diff_main(_,f,a,n);return g.concat([[s,m]],E)}return a&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,n):this.diff_bisect_(e,t,n)},n.prototype.diff_lineMode_=function(e,t,a){var n=this.diff_linesToChars_(e,t);e=n.chars1,t=n.chars2;var o=n.lineArray,l=this.diff_main(e,t,!1,a);this.diff_charsToLines_(l,o),this.diff_cleanupSemantic(l),l.push([s,""]);for(var c=0,u=0,d=0,p="",_="";c<l.length;){switch(l[c][0]){case i:d++,_+=l[c][1];break;case r:u++,p+=l[c][1];break;case s:if(u>=1&&d>=1){l.splice(c-u-d,u+d),c=c-u-d;for(var n=this.diff_main(p,_,!1,a),h=n.length-1;h>=0;h--)l.splice(c,0,n[h]);c+=n.length}d=0,u=0,p="",_=""}c++}return l.pop(),l},n.prototype.diff_bisect_=function(e,t,a){for(var n=e.length,s=t.length,o=Math.ceil((n+s)/2),l=o,c=2*o,u=new Array(c),d=new Array(c),p=0;p<c;p++)u[p]=-1,d[p]=-1;u[l+1]=0,d[l+1]=0;for(var _=n-s,h=_%2!=0,f=0,m=0,g=0,E=0,v=0;v<o&&!((new Date).getTime()>a);v++){for(var y=-v+f;y<=v-m;y+=2){var k,T=l+y;k=y==-v||y!=v&&u[T-1]<u[T+1]?u[T+1]:u[T-1]+1;for(var A=k-y;k<n&&A<s&&e.charAt(k)==t.charAt(A);)k++,A++;if(u[T]=k,k>n)m+=2;else if(A>s)f+=2;else if(h){var C=l+_-y;if(C>=0&&C<c&&-1!=d[C]){var b=n-d[C];if(k>=b)return this.diff_bisectSplit_(e,t,k,A,a)}}}for(var O=-v+g;O<=v-E;O+=2){var b,C=l+O;b=O==-v||O!=v&&d[C-1]<d[C+1]?d[C+1]:d[C-1]+1;for(var D=b-O;b<n&&D<s&&e.charAt(n-b-1)==t.charAt(s-D-1);)b++,D++;if(d[C]=b,b>n)E+=2;else if(D>s)g+=2;else if(!h){var T=l+_-O;if(T>=0&&T<c&&-1!=u[T]){var k=u[T],A=l+k-T;if(b=n-b,k>=b)return this.diff_bisectSplit_(e,t,k,A,a)}}}}return[[r,e],[i,t]]},n.prototype.diff_bisectSplit_=function(e,t,a,n,r){var i=e.substring(0,a),s=t.substring(0,n),o=e.substring(a),l=t.substring(n),c=this.diff_main(i,s,!1,r),u=this.diff_main(o,l,!1,r);return c.concat(u)},n.prototype.diff_linesToChars_=function(e,t){function a(e){for(var t="",a=0,i=-1,s=n.length;i<e.length-1;){i=e.indexOf("\n",a),-1==i&&(i=e.length-1);var o=e.substring(a,i+1);a=i+1,(r.hasOwnProperty?r.hasOwnProperty(o):void 0!==r[o])?t+=String.fromCharCode(r[o]):(t+=String.fromCharCode(s),r[o]=s,n[s++]=o)}return t}var n=[],r={};return n[0]="",{chars1:a(e),chars2:a(t),lineArray:n}},n.prototype.diff_charsToLines_=function(e,t){for(var a=0;a<e.length;a++){for(var n=e[a][1],r=[],i=0;i<n.length;i++)r[i]=t[n.charCodeAt(i)];e[a][1]=r.join("")}},n.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var a=0,n=Math.min(e.length,t.length),r=n,i=0;a<r;)e.substring(i,r)==t.substring(i,r)?(a=r,i=a):n=r,r=Math.floor((n-a)/2+a);return r},n.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var a=0,n=Math.min(e.length,t.length),r=n,i=0;a<r;)e.substring(e.length-r,e.length-i)==t.substring(t.length-r,t.length-i)?(a=r,i=a):n=r,r=Math.floor((n-a)/2+a);return r},n.prototype.diff_commonOverlap_=function(e,t){var a=e.length,n=t.length;if(0==a||0==n)return 0;a>n?e=e.substring(a-n):a<n&&(t=t.substring(0,a));var r=Math.min(a,n);if(e==t)return r;for(var i=0,s=1;;){var o=e.substring(r-s),l=t.indexOf(o);if(-1==l)return i;s+=l,0!=l&&e.substring(r-s)!=t.substring(0,s)||(i=s,s++)}},n.prototype.diff_halfMatch_=function(e,t){function a(e,t,a){for(var n,r,i,o,l=e.substring(a,a+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(l,c+1));){var d=s.diff_commonPrefix(e.substring(a),t.substring(c)),p=s.diff_commonSuffix(e.substring(0,a),t.substring(0,c));u.length<p+d&&(u=t.substring(c-p,c)+t.substring(c,c+d),n=e.substring(0,a-p),r=e.substring(a+d),i=t.substring(0,c-p),o=t.substring(c+d))}return 2*u.length>=e.length?[n,r,i,o,u]:null}if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;var i,s=this,o=a(n,r,Math.ceil(n.length/4)),l=a(n,r,Math.ceil(n.length/2));if(!o&&!l)return null;i=l?o&&o[4].length>l[4].length?o:l:o;var c,u,d,p;return e.length>t.length?(c=i[0],u=i[1],d=i[2],p=i[3]):(d=i[0],p=i[1],c=i[2],u=i[3]),[c,u,d,p,i[4]]},n.prototype.diff_cleanupSemantic=function(e){for(var t=!1,a=[],n=0,o=null,l=0,c=0,u=0,d=0,p=0;l<e.length;)e[l][0]==s?(a[n++]=l,c=d,u=p,d=0,p=0,o=e[l][1]):(e[l][0]==i?d+=e[l][1].length:p+=e[l][1].length,o&&o.length<=Math.max(c,u)&&o.length<=Math.max(d,p)&&(e.splice(a[n-1],0,[r,o]),e[a[n-1]+1][0]=i,n--,n--,l=n>0?a[n-1]:-1,c=0,u=0,d=0,p=0,o=null,t=!0)),l++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),l=1;l<e.length;){if(e[l-1][0]==r&&e[l][0]==i){var _=e[l-1][1],h=e[l][1],f=this.diff_commonOverlap_(_,h),m=this.diff_commonOverlap_(h,_);f>=m?(f>=_.length/2||f>=h.length/2)&&(e.splice(l,0,[s,h.substring(0,f)]),e[l-1][1]=_.substring(0,_.length-f),e[l+1][1]=h.substring(f),l++):(m>=_.length/2||m>=h.length/2)&&(e.splice(l,0,[s,_.substring(0,m)]),e[l-1][0]=i,e[l-1][1]=h.substring(0,h.length-m),e[l+1][0]=r,e[l+1][1]=_.substring(m),l++),l++}l++}},n.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var a=e.charAt(e.length-1),r=t.charAt(0),i=a.match(n.nonAlphaNumericRegex_),s=r.match(n.nonAlphaNumericRegex_),o=i&&a.match(n.whitespaceRegex_),l=s&&r.match(n.whitespaceRegex_),c=o&&a.match(n.linebreakRegex_),u=l&&r.match(n.linebreakRegex_),d=c&&e.match(n.blanklineEndRegex_),p=u&&t.match(n.blanklineStartRegex_);return d||p?5:c||u?4:i&&!o&&l?3:o||l?2:i||s?1:0}for(var a=1;a<e.length-1;){if(e[a-1][0]==s&&e[a+1][0]==s){var r=e[a-1][1],i=e[a][1],o=e[a+1][1],l=this.diff_commonSuffix(r,i);if(l){var c=i.substring(i.length-l);r=r.substring(0,r.length-l),i=c+i.substring(0,i.length-l),o=c+o}for(var u=r,d=i,p=o,_=t(r,i)+t(i,o);i.charAt(0)===o.charAt(0);){r+=i.charAt(0),i=i.substring(1)+o.charAt(0),o=o.substring(1);var h=t(r,i)+t(i,o);h>=_&&(_=h,u=r,d=i,p=o)}e[a-1][1]!=u&&(u?e[a-1][1]=u:(e.splice(a-1,1),a--),e[a][1]=d,p?e[a+1][1]=p:(e.splice(a+1,1),a--))}a++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,a=[],n=0,o=null,l=0,c=!1,u=!1,d=!1,p=!1;l<e.length;)e[l][0]==s?(e[l][1].length<this.Diff_EditCost&&(d||p)?(a[n++]=l,c=d,u=p,o=e[l][1]):(n=0,o=null),d=p=!1):(e[l][0]==r?p=!0:d=!0,o&&(c&&u&&d&&p||o.length<this.Diff_EditCost/2&&c+u+d+p==3)&&(e.splice(a[n-1],0,[r,o]),e[a[n-1]+1][0]=i,n--,o=null,c&&u?(d=p=!0,n=0):(n--,l=n>0?a[n-1]:-1,d=p=!1),t=!0)),l++;t&&this.diff_cleanupMerge(e)},n.prototype.diff_cleanupMerge=function(e){e.push([s,""]);for(var t,a=0,n=0,o=0,l="",c="";a<e.length;)switch(e[a][0]){case i:o++,c+=e[a][1],a++;break;case r:n++,l+=e[a][1],a++;break;case s:n+o>1?(0!==n&&0!==o&&(t=this.diff_commonPrefix(c,l),0!==t&&(a-n-o>0&&e[a-n-o-1][0]==s?e[a-n-o-1][1]+=c.substring(0,t):(e.splice(0,0,[s,c.substring(0,t)]),a++),c=c.substring(t),l=l.substring(t)),0!==(t=this.diff_commonSuffix(c,l))&&(e[a][1]=c.substring(c.length-t)+e[a][1],c=c.substring(0,c.length-t),l=l.substring(0,l.length-t))),0===n?e.splice(a-o,n+o,[i,c]):0===o?e.splice(a-n,n+o,[r,l]):e.splice(a-n-o,n+o,[r,l],[i,c]),a=a-n-o+(n?1:0)+(o?1:0)+1):0!==a&&e[a-1][0]==s?(e[a-1][1]+=e[a][1],e.splice(a,1)):a++,o=0,n=0,l="",c=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(a=1;a<e.length-1;)e[a-1][0]==s&&e[a+1][0]==s&&(e[a][1].substring(e[a][1].length-e[a-1][1].length)==e[a-1][1]?(e[a][1]=e[a-1][1]+e[a][1].substring(0,e[a][1].length-e[a-1][1].length),e[a+1][1]=e[a-1][1]+e[a+1][1],e.splice(a-1,1),u=!0):e[a][1].substring(0,e[a+1][1].length)==e[a+1][1]&&(e[a-1][1]+=e[a+1][1],e[a][1]=e[a][1].substring(e[a+1][1].length)+e[a+1][1],e.splice(a+1,1),u=!0)),a++;u&&this.diff_cleanupMerge(e)},n.prototype.diff_xIndex=function(e,t){var a,n=0,s=0,o=0,l=0;for(a=0;a<e.length&&(e[a][0]!==i&&(n+=e[a][1].length),e[a][0]!==r&&(s+=e[a][1].length),!(n>t));a++)o=n,l=s;return e.length!=a&&e[a][0]===r?l:l+(t-o)},n.prototype.diff_prettyHtml=function(e){for(var t=[],a=/&/g,n=/</g,o=/>/g,l=/\n/g,c=0;c<e.length;c++){var u=e[c][0],d=e[c][1],p=d.replace(a,"&amp;").replace(n,"&lt;").replace(o,"&gt;").replace(l,"&para;<br>");switch(u){case i:t[c]='<ins style="background:#e6ffe6;">'+p+"</ins>";break;case r:t[c]='<del style="background:#ffe6e6;">'+p+"</del>";break;case s:t[c]="<span>"+p+"</span>"}}return t.join("")},n.prototype.diff_text1=function(e){for(var t=[],a=0;a<e.length;a++)e[a][0]!==i&&(t[a]=e[a][1]);return t.join("")},n.prototype.diff_text2=function(e){for(var t=[],a=0;a<e.length;a++)e[a][0]!==r&&(t[a]=e[a][1]);return t.join("")},n.prototype.diff_levenshtein=function(e){for(var t=0,a=0,n=0,o=0;o<e.length;o++){var l=e[o][0],c=e[o][1];switch(l){case i:a+=c.length;break;case r:n+=c.length;break;case s:t+=Math.max(a,n),a=0,n=0}}return t+=Math.max(a,n)},n.prototype.diff_toDelta=function(e){for(var t=[],a=0;a<e.length;a++)switch(e[a][0]){case i:t[a]="+"+encodeURI(e[a][1]);break;case r:t[a]="-"+e[a][1].length;break;case s:t[a]="="+e[a][1].length}return t.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(e,t){for(var a=[],n=0,o=0,l=t.split(/\t/g),c=0;c<l.length;c++){var u=l[c].substring(1);switch(l[c].charAt(0)){case"+":try{a[n++]=[i,decodeURI(u)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var d=parseInt(u,10);if(isNaN(d)||d<0)throw new Error("Invalid number in diff_fromDelta: "+u);var p=e.substring(o,o+=d);"="==l[c].charAt(0)?a[n++]=[s,p]:a[n++]=[r,p];break;default:if(l[c])throw new Error("Invalid diff operation in diff_fromDelta: "+l[c])}}if(o!=e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+").");return a},n.prototype.match_main=function(e,t,a){if(null==e||null==t||null==a)throw new Error("Null input. (match_main)");return a=Math.max(0,Math.min(a,e.length)),e==t?0:e.length?e.substring(a,a+t.length)==t?a:this.match_bitap_(e,t,a):-1},n.prototype.match_bitap_=function(e,t,a){function n(e,n){var r=e/t.length,s=Math.abs(a-n);return i.Match_Distance?r+s/i.Match_Distance:s?1:r}if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),i=this,s=this.Match_Threshold,o=e.indexOf(t,a);-1!=o&&(s=Math.min(n(0,o),s),-1!=(o=e.lastIndexOf(t,a+t.length))&&(s=Math.min(n(0,o),s)));var l=1<<t.length-1;o=-1;for(var c,u,d,p=t.length+e.length,_=0;_<t.length;_++){for(c=0,u=p;c<u;)n(_,a+u)<=s?c=u:p=u,u=Math.floor((p-c)/2+c);p=u;var h=Math.max(1,a-u+1),f=Math.min(a+u,e.length)+t.length,m=Array(f+2);m[f+1]=(1<<_)-1;for(var g=f;g>=h;g--){var E=r[e.charAt(g-1)];if(m[g]=0===_?(m[g+1]<<1|1)&E:(m[g+1]<<1|1)&E|(d[g+1]|d[g])<<1|1|d[g+1],m[g]&l){var v=n(_,g-1);if(v<=s){if(s=v,!((o=g-1)>a))break;h=Math.max(1,2*a-o)}}}if(n(_+1,a)>s)break;d=m}return o},n.prototype.match_alphabet_=function(e){for(var t={},a=0;a<e.length;a++)t[e.charAt(a)]=0;for(var a=0;a<e.length;a++)t[e.charAt(a)]|=1<<e.length-a-1;return t},n.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var a=t.substring(e.start2,e.start2+e.length1),n=0;t.indexOf(a)!=t.lastIndexOf(a)&&a.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)n+=this.Patch_Margin,a=t.substring(e.start2-n,e.start2+e.length1+n);n+=this.Patch_Margin;var r=t.substring(e.start2-n,e.start2);r&&e.diffs.unshift([s,r]);var i=t.substring(e.start2+e.length1,e.start2+e.length1+n);i&&e.diffs.push([s,i]),e.start1-=r.length,e.start2-=r.length,e.length1+=r.length+i.length,e.length2+=r.length+i.length}},n.prototype.patch_make=function(e,t,a){var o,l;if("string"==typeof e&&"string"==typeof t&&void 0===a)o=e,l=this.diff_main(o,t,!0),l.length>2&&(this.diff_cleanupSemantic(l),this.diff_cleanupEfficiency(l));else if(e&&"object"==typeof e&&void 0===t&&void 0===a)l=e,o=this.diff_text1(l);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===a)o=e,l=t;else{if("string"!=typeof e||"string"!=typeof t||!a||"object"!=typeof a)throw new Error("Unknown call format to patch_make.");o=e,l=a}if(0===l.length)return[];for(var c=[],u=new n.patch_obj,d=0,p=0,_=0,h=o,f=o,m=0;m<l.length;m++){var g=l[m][0],E=l[m][1];switch(d||g===s||(u.start1=p,u.start2=_),g){case i:u.diffs[d++]=l[m],u.length2+=E.length,f=f.substring(0,_)+E+f.substring(_);break;case r:u.length1+=E.length,u.diffs[d++]=l[m],f=f.substring(0,_)+f.substring(_+E.length);break;case s:E.length<=2*this.Patch_Margin&&d&&l.length!=m+1?(u.diffs[d++]=l[m],u.length1+=E.length,u.length2+=E.length):E.length>=2*this.Patch_Margin&&d&&(this.patch_addContext_(u,h),c.push(u),u=new n.patch_obj,d=0,h=f,p=_)}g!==i&&(p+=E.length),g!==r&&(_+=E.length)}return d&&(this.patch_addContext_(u,h),c.push(u)),c},n.prototype.patch_deepCopy=function(e){for(var t=[],a=0;a<e.length;a++){var r=e[a],i=new n.patch_obj;i.diffs=[];for(var s=0;s<r.diffs.length;s++)i.diffs[s]=r.diffs[s].slice();i.start1=r.start1,i.start2=r.start2,i.length1=r.length1,i.length2=r.length2,t[a]=i}return t},n.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var a=this.patch_addPadding(e);t=a+t+a,this.patch_splitMax(e);for(var n=0,o=[],l=0;l<e.length;l++){var c,u=e[l].start2+n,d=this.diff_text1(e[l].diffs),p=-1;if(d.length>this.Match_MaxBits?-1!=(c=this.match_main(t,d.substring(0,this.Match_MaxBits),u))&&(-1==(p=this.match_main(t,d.substring(d.length-this.Match_MaxBits),u+d.length-this.Match_MaxBits))||c>=p)&&(c=-1):c=this.match_main(t,d,u),-1==c)o[l]=!1,n-=e[l].length2-e[l].length1;else{o[l]=!0,n=c-u;var _;if(_=-1==p?t.substring(c,c+d.length):t.substring(c,p+this.Match_MaxBits),d==_)t=t.substring(0,c)+this.diff_text2(e[l].diffs)+t.substring(c+d.length);else{var h=this.diff_main(d,_,!1);if(d.length>this.Match_MaxBits&&this.diff_levenshtein(h)/d.length>this.Patch_DeleteThreshold)o[l]=!1;else{this.diff_cleanupSemanticLossless(h);for(var f,m=0,g=0;g<e[l].diffs.length;g++){var E=e[l].diffs[g];E[0]!==s&&(f=this.diff_xIndex(h,m)),E[0]===i?t=t.substring(0,c+f)+E[1]+t.substring(c+f):E[0]===r&&(t=t.substring(0,c+f)+t.substring(c+this.diff_xIndex(h,m+E[1].length))),E[0]!==r&&(m+=E[1].length)}}}}}return t=t.substring(a.length,t.length-a.length),[t,o]},n.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,a="",n=1;n<=t;n++)a+=String.fromCharCode(n);for(var n=0;n<e.length;n++)e[n].start1+=t,e[n].start2+=t;var r=e[0],i=r.diffs;if(0==i.length||i[0][0]!=s)i.unshift([s,a]),r.start1-=t,r.start2-=t,r.length1+=t,r.length2+=t;else if(t>i[0][1].length){var o=t-i[0][1].length;i[0][1]=a.substring(i[0][1].length)+i[0][1],r.start1-=o,r.start2-=o,r.length1+=o,r.length2+=o}if(r=e[e.length-1],i=r.diffs,0==i.length||i[i.length-1][0]!=s)i.push([s,a]),r.length1+=t,r.length2+=t;else if(t>i[i.length-1][1].length){var o=t-i[i.length-1][1].length;i[i.length-1][1]+=a.substring(0,o),r.length1+=o,r.length2+=o}return a},n.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,a=0;a<e.length;a++)if(!(e[a].length1<=t)){var o=e[a];e.splice(a--,1);for(var l=o.start1,c=o.start2,u="";0!==o.diffs.length;){var d=new n.patch_obj,p=!0;for(d.start1=l-u.length,d.start2=c-u.length,""!==u&&(d.length1=d.length2=u.length,d.diffs.push([s,u]));0!==o.diffs.length&&d.length1<t-this.Patch_Margin;){var _=o.diffs[0][0],h=o.diffs[0][1];_===i?(d.length2+=h.length,c+=h.length,d.diffs.push(o.diffs.shift()),p=!1):_===r&&1==d.diffs.length&&d.diffs[0][0]==s&&h.length>2*t?(d.length1+=h.length,l+=h.length,p=!1,d.diffs.push([_,h]),o.diffs.shift()):(h=h.substring(0,t-d.length1-this.Patch_Margin),d.length1+=h.length,l+=h.length,_===s?(d.length2+=h.length,c+=h.length):p=!1,d.diffs.push([_,h]),h==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(h.length))}u=this.diff_text2(d.diffs),u=u.substring(u.length-this.Patch_Margin);var f=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);""!==f&&(d.length1+=f.length,d.length2+=f.length,0!==d.diffs.length&&d.diffs[d.diffs.length-1][0]===s?d.diffs[d.diffs.length-1][1]+=f:d.diffs.push([s,f])),p||e.splice(++a,0,d)}}},n.prototype.patch_toText=function(e){for(var t=[],a=0;a<e.length;a++)t[a]=e[a];return t.join("")},n.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var a=e.split("\n"),o=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<a.length;){var c=a[o].match(l);if(!c)throw new Error("Invalid patch string: "+a[o]);var u=new n.patch_obj;for(t.push(u),u.start1=parseInt(c[1],10),""===c[2]?(u.start1--,u.length1=1):"0"==c[2]?u.length1=0:(u.start1--,u.length1=parseInt(c[2],10)),u.start2=parseInt(c[3],10),""===c[4]?(u.start2--,u.length2=1):"0"==c[4]?u.length2=0:(u.start2--,u.length2=parseInt(c[4],10)),o++;o<a.length;){var d=a[o].charAt(0);try{var p=decodeURI(a[o].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+p)}if("-"==d)u.diffs.push([r,p]);else if("+"==d)u.diffs.push([i,p]);else if(" "==d)u.diffs.push([s,p]);else{if("@"==d)break;if(""!==d)throw new Error('Invalid patch mode "'+d+'" in: '+p)}o++}}return t},n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},n.patch_obj.prototype.toString=function(){var e,t;e=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,t=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var a,n=["@@ -"+e+" +"+t+" @@\n"],o=0;o<this.diffs.length;o++){switch(this.diffs[o][0]){case i:a="+";break;case r:a="-";break;case s:a=" "}n[o+1]=a+encodeURI(this.diffs[o][1])+"\n"}return n.join("").replace(/%20/g," ")},e.exports=n,e.exports.diff_match_patch=n,e.exports.DIFF_DELETE=r,e.exports.DIFF_INSERT=i,e.exports.DIFF_EQUAL=s},2041:function(e,t,a){var n=a(2037);"string"==typeof n&&(n=[[e.i,n,""]]);a(1969)(n,{});n.locals&&(e.exports=n.locals)},2042:function(e,t,a){var n=a(2040),r=(a(813),-1),i=1,s=0;!function(e){e(a(813))}(function(e){"use strict";function t(e,t){this.mv=e,this.type=t,this.classes="left"==t?{chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect"}:{chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect"}}function a(t){t.diffOutOfDate&&(t.diff=w(t.orig.getValue(),t.edit.getValue(),t.mv.options.ignoreWhitespace),t.chunks=S(t.diff),t.diffOutOfDate=!1,e.signal(t.edit,"updateDiff",t.diff))}function o(t){function n(e){Z=!0,m=!1,"full"==e&&(t.svg&&U(t.svg),t.copyButtons&&U(t.copyButtons),_(t.edit,p.marked,t.classes),_(t.orig,f.marked,t.classes),p.from=p.to=f.from=f.to=0),a(t),t.showDifferences&&(h(t.edit,t.diff,p,i,t.classes),h(t.orig,t.diff,f,r,t.classes)),"align"==t.mv.options.connect&&T(t),g(t),null!=t.needsScrollSync&&c(t,t.needsScrollSync),Z=!1}function s(e){Z||(t.dealigned=!0,o(e))}function o(e){Z||m||(clearTimeout(d),!0===e&&(m=!0),d=setTimeout(n,!0===e?20:250))}function l(e,a){t.diffOutOfDate||(t.diffOutOfDate=!0,p.from=p.to=f.from=f.to=0),s(a.text.length-1!=a.to.line-a.from.line)}function u(){t.diffOutOfDate=!0,t.dealigned=!0,n("full")}var d,p={from:0,to:0,marked:[]},f={from:0,to:0,marked:[]},m=!1;return t.edit.on("change",l),t.orig.on("change",l),t.edit.on("swapDoc",u),t.orig.on("swapDoc",u),"align"==t.mv.options.connect&&(e.on(t.edit.state.trackAlignable,"realign",s),e.on(t.orig.state.trackAlignable,"realign",s)),t.edit.on("viewportChange",function(){o(!1)}),t.orig.on("viewportChange",function(){o(!1)}),n(),n}function l(e,t){e.edit.on("scroll",function(){c(e,!0)&&g(e)}),e.orig.on("scroll",function(){c(e,!1)&&g(e),t&&c(t,!0)&&g(t)})}function c(e,t){if(e.diffOutOfDate)return e.lockScroll&&null==e.needsScrollSync&&(e.needsScrollSync=t),!1;if(e.needsScrollSync=null,!e.lockScroll)return!0;var a,n,r=+new Date;if(t?(a=e.edit,n=e.orig):(a=e.orig,n=e.edit),a.state.scrollSetBy==e&&(a.state.scrollSetAt||0)+250>r)return!1;var i=a.getScrollInfo();if("align"==e.mv.options.connect)m=i.top;else{var s,o,l=.5*i.clientHeight,c=i.top+l,d=a.lineAtHeight(c,"local"),p=M(e.chunks,d,t),_=u(a,t?p.edit:p.orig),h=u(n,t?p.orig:p.edit),f=(c-_.top)/(_.bot-_.top),m=h.top-l+f*(h.bot-h.top);if(m>i.top&&(o=i.top/l)<1)m=m*o+i.top*(1-o);else if((s=i.height-i.clientHeight-i.top)<l){var g=n.getScrollInfo(),E=g.height-g.clientHeight-m;E>s&&(o=s/l)<1&&(m=m*o+(g.height-g.clientHeight-s)*(1-o))}}return n.scrollTo(i.left,m),n.state.scrollSetAt=r,n.state.scrollSetBy=e,!0}function u(e,t){var a=t.after;return null==a&&(a=e.lastLine()+1),{top:e.heightAtLine(t.before||0,"local"),bot:e.heightAtLine(a,"local")}}function d(e,t,a){e.lockScroll=t,t&&0!=a&&c(e,i)&&g(e),e.lockButton.innerHTML=t?"⇛⇚":"⇛&nbsp;&nbsp;⇚"}function p(e,t,a){for(var n=a.classLocation,r=0;r<n.length;r++)e.removeLineClass(t,n[r],a.chunk),e.removeLineClass(t,n[r],a.start),e.removeLineClass(t,n[r],a.end)}function _(t,a,n){for(var r=0;r<a.length;++r){var i=a[r];i instanceof e.TextMarker?i.clear():i.parent&&p(t,i,n)}a.length=0}function h(e,t,a,n,r){var i=e.getViewport();e.operation(function(){a.from==a.to||i.from-a.to>20||a.from-i.to>20?(_(e,a.marked,r),m(e,t,n,a.marked,i.from,i.to,r),a.from=i.from,a.to=i.to):(i.from<a.from&&(m(e,t,n,a.marked,i.from,a.from,r),a.from=i.from),i.to>a.to&&(m(e,t,n,a.marked,a.to,i.to,r),a.to=i.to))})}function f(e,t,a,n,r,i){for(var s=a.classLocation,o=e.getLineHandle(t),l=0;l<s.length;l++)n&&e.addLineClass(o,s[l],a.chunk),r&&e.addLineClass(o,s[l],a.start),i&&e.addLineClass(o,s[l],a.end);return o}function m(e,t,a,n,i,o,l){function c(t,a){for(var r=Math.max(i,t),s=Math.min(o,a),c=r;c<s;++c)n.push(f(e,c,l,!0,c==t,c==a-1));t==a&&r==a&&s==a&&(r?n.push(f(e,r-1,l,!1,!1,!0)):n.push(f(e,r,l,!1,!0,!1)))}for(var u=J(0,0),d=J(i,0),p=e.clipPos(J(o-1)),_=a==r?l.del:l.insert,h=0,m=!1,g=0;g<t.length;++g){var E=t[g],v=E[0],y=E[1];if(v==s){var k=u.line+(x(t,g)?0:1);z(u,y);var T=u.line+(L(t,g)?1:0);T>k&&(m&&(c(h,k),m=!1),h=T)}else if(m=!0,v==a){var A=z(u,y,!0),C=K(d,u),b=q(p,A);W(C,b)||n.push(e.markText(C,b,{className:_})),u=A}}m&&c(h,u.line+1)}function g(e){if(e.showDifferences){if(e.svg){U(e.svg);var t=e.gap.offsetWidth;P(e.svg,"width",t,"height",e.gap.offsetHeight)}e.copyButtons&&U(e.copyButtons);for(var a=e.edit.getViewport(),n=e.orig.getViewport(),r=e.mv.wrap.getBoundingClientRect().top,i=r-e.edit.getScrollerElement().getBoundingClientRect().top+e.edit.getScrollInfo().top,s=r-e.orig.getScrollerElement().getBoundingClientRect().top+e.orig.getScrollInfo().top,o=0;o<e.chunks.length;o++){var l=e.chunks[o];l.editFrom<=a.to&&l.editTo>=a.from&&l.origFrom<=n.to&&l.origTo>=n.from&&b(e,l,s,i,t)}}}function E(e,t){for(var a=0,n=0,r=0;r<t.length;r++){var i=t[r];if(i.editTo>e&&i.editFrom<=e)return null;if(i.editFrom>e)break;a=i.editTo,n=i.origTo}return n+(e-a)}function v(e,t,a){for(var n=e.state.trackAlignable,r=e.firstLine(),i=0,s=[],o=0;;o++){for(var l=t[o],c=l?a?l.origFrom:l.editFrom:1e9;i<n.alignable.length;i+=2){var u=n.alignable[i]+1;if(!(u<=r)){if(!(u<=c))break;s.push(u)}}if(!l)break;s.push(r=a?l.origTo:l.editTo)}return s}function y(e,t,a,n){var r=0,i=0,s=0,o=0;e:for(;;r++){var l=e[r],c=t[i];if(!l&&null==c)break;for(var u=l?l[0]:1e9,d=null==c?1e9:c;s<a.length;){var p=a[s];if(p.origFrom<=d&&p.origTo>d){i++,r--;continue e}if(p.editTo>u){if(p.editFrom<=u)continue e;break}o+=p.origTo-p.origFrom-(p.editTo-p.editFrom),s++}if(u==d-o)l[n]=d,i++;else if(u<d-o)l[n]=u+o;else{var _=[d-o,null,null];_[n]=d,e.splice(r,0,_),i++}}}function k(e,t){var a=v(e.edit,e.chunks,!1),n=[];if(t)for(var r=0,i=0;r<t.chunks.length;r++){for(var s=t.chunks[r].editTo;i<a.length&&a[i]<s;)i++;i!=a.length&&a[i]==s||a.splice(i++,0,s)}for(var r=0;r<a.length;r++)n.push([a[r],null,null]);return y(n,v(e.orig,e.chunks,!0),e.chunks,1),t&&y(n,v(t.orig,t.chunks,!0),t.chunks,2),n}function T(e,t){if(e.dealigned||t){if(!e.orig.curOp)return e.orig.operation(function(){T(e,t)});e.dealigned=!1;var n=e.mv.left==e?e.mv.right:e.mv.left;n&&(a(n),n.dealigned=!1);for(var r=k(e,n),i=e.mv.aligners,s=0;s<i.length;s++)i[s].clear();i.length=0;var o=[e.edit,e.orig],l=[];n&&o.push(n.orig);for(var s=0;s<o.length;s++)l.push(o[s].getScrollInfo().top);for(var c=0;c<r.length;c++)A(o,r[c],i);for(var s=0;s<o.length;s++)o[s].scrollTo(null,l[s])}}function A(e,t,a){for(var n=0,r=[],i=0;i<e.length;i++)if(null!=t[i]){var s=e[i].heightAtLine(t[i],"local");r[i]=s,n=Math.max(n,s)}for(var i=0;i<e.length;i++)if(null!=t[i]){var o=n-r[i];o>1&&a.push(C(e[i],t[i],o))}}function C(e,t,a){var n=!0;t>e.lastLine()&&(t--,n=!1);var r=document.createElement("div");return r.className="CodeMirror-merge-spacer",r.style.height=a+"px",r.style.minWidth="1px",e.addLineWidget(t,r,{height:a,above:n,mergeSpacer:!0,handleMouseEvents:!0})}function b(e,t,a,n,r){var i="left"==e.type,s=e.orig.heightAtLine(t.origFrom,"local",!0)-a;if(e.svg){var o=s,l=e.edit.heightAtLine(t.editFrom,"local",!0)-n;if(i){var c=o;o=l,l=c}var u=e.orig.heightAtLine(t.origTo,"local",!0)-a,d=e.edit.heightAtLine(t.editTo,"local",!0)-n;if(i){var c=u;u=d,d=c}var p=" C "+r/2+" "+l+" "+r/2+" "+o+" "+(r+2)+" "+o,_=" C "+r/2+" "+u+" "+r/2+" "+d+" -1 "+d;P(e.svg.appendChild(document.createElementNS($,"path")),"d","M -1 "+l+p+" L "+(r+2)+" "+u+_+" z","class",e.classes.connect)}if(e.copyButtons){var h=e.copyButtons.appendChild(V("div","left"==e.type?"⇝":"⇜","CodeMirror-merge-copy")),f=e.mv.options.allowEditingOriginals;if(h.title=f?"Push to left":"Revert chunk",h.chunk=t,h.style.top=(t.origTo>t.origFrom?s:e.edit.heightAtLine(t.editFrom,"local")-n)+"px",f){var m=e.edit.heightAtLine(t.editFrom,"local")-n,g=e.copyButtons.appendChild(V("div","right"==e.type?"⇝":"⇜","CodeMirror-merge-copy-reverse"));g.title="Push to right",g.chunk={editFrom:t.origFrom,editTo:t.origTo,origFrom:t.editFrom,origTo:t.editTo},g.style.top=m+"px","right"==e.type?g.style.left="2px":g.style.right="2px"}}}function O(e,t,a,n){if(!e.diffOutOfDate){var r=n.origTo>a.lastLine()?J(n.origFrom-1):J(n.origFrom,0),i=J(n.origTo,0),s=n.editTo>t.lastLine()?J(n.editFrom-1):J(n.editFrom,0),o=J(n.editTo,0),l=e.mv.options.revertChunk;l?l(e.mv,a,r,i,t,s,o):t.replaceRange(a.getRange(r,i),s,o)}}function D(t){var a=t.lockButton=V("div",null,"CodeMirror-merge-scrolllock");a.title="Toggle locked scrolling";var n=V("div",[a],"CodeMirror-merge-scrolllock-wrap");e.on(a,"click",function(){d(t,!t.lockScroll)});var r=[n];if(!1!==t.mv.options.revertButtons&&(t.copyButtons=V("div",null,"CodeMirror-merge-copybuttons-"+t.type),e.on(t.copyButtons,"click",function(e){var a=e.target||e.srcElement;if(a.chunk)return"CodeMirror-merge-copy-reverse"==a.className?void O(t,t.orig,t.edit,a.chunk):void O(t,t.edit,t.orig,a.chunk)}),r.unshift(t.copyButtons)),"align"!=t.mv.options.connect){var i=document.createElementNS&&document.createElementNS($,"svg");i&&!i.createSVGRect&&(i=null),t.svg=i,i&&r.push(i)}return t.gap=V("div",r,"CodeMirror-merge-gap")}function R(e){return"string"==typeof e?e:e.getValue()}function w(e,t,a){for(var n=ee.diff_main(e,t),r=0;r<n.length;++r){var i=n[r];(a?/[^ \t]/.test(i[1]):i[1])?r&&n[r-1][0]==i[0]&&(n.splice(r--,1),n[r][1]+=i[1]):n.splice(r--,1)}return n}function S(e){for(var t=[],a=0,n=0,r=J(0,0),o=J(0,0),l=0;l<e.length;++l){var c=e[l],u=c[0];if(u==s){var d=!x(e,l)||r.line<a||o.line<n?1:0,p=r.line+d,_=o.line+d;z(r,c[1],null,o);var h=L(e,l)?1:0,f=r.line+h,m=o.line+h;f>p&&(l&&t.push({origFrom:n,origTo:_,editFrom:a,editTo:p}),a=f,n=m)}else z(u==i?r:o,c[1])}return(a<=r.line||n<=o.line)&&t.push({origFrom:n,origTo:o.line+1,editFrom:a,editTo:r.line+1}),t}function L(e,t){if(t==e.length-1)return!0;var a=e[t+1][1];return!(1==a.length&&t<e.length-2||10!=a.charCodeAt(0))&&(t==e.length-2||(a=e[t+2][1],(a.length>1||t==e.length-3)&&10==a.charCodeAt(0)))}function x(e,t){if(0==t)return!0;var a=e[t-1][1];return 10==a.charCodeAt(a.length-1)&&(1==t||(a=e[t-2][1],10==a.charCodeAt(a.length-1)))}function M(e,t,a){for(var n,r,i,s,o=0;o<e.length;o++){var l=e[o],c=a?l.editFrom:l.origFrom,u=a?l.editTo:l.origTo;null==r&&(c>t?(r=l.editFrom,s=l.origFrom):u>t&&(r=l.editTo,s=l.origTo)),u<=t?(n=l.editTo,i=l.origTo):c<=t&&(n=l.editFrom,i=l.origFrom)}return{edit:{before:n,after:r},orig:{before:i,after:s}}}function H(t,a,n){function r(){s.clear(),t.removeLineClass(a,"wrap","CodeMirror-merge-collapsed-line")}t.addLineClass(a,"wrap","CodeMirror-merge-collapsed-line");var i=document.createElement("span");i.className="CodeMirror-merge-collapsed-widget",i.title="Identical text collapsed. Click to expand.";var s=t.markText(J(a,0),J(n-1),{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:i,clearOnEnter:!0});return e.on(i,"click",r),{mark:s,clear:r}}function F(e,t){function a(){for(var e=0;e<n.length;e++)n[e].clear()}for(var n=[],r=0;r<t.length;r++){var i=t[r],s=H(i.cm,i.line,i.line+e);n.push(s),s.mark.on("clear",a)}return n[0].mark}function N(e,t,a,n){for(var r=0;r<e.chunks.length;r++)for(var i=e.chunks[r],s=i.editFrom-t;s<i.editTo+t;s++){var o=s+a;o>=0&&o<n.length&&(n[o]=!1)}}function I(e,t){"number"!=typeof t&&(t=2);for(var a=[],n=e.editor(),r=n.firstLine(),i=r,s=n.lastLine();i<=s;i++)a.push(!0);e.left&&N(e.left,t,r,a),e.right&&N(e.right,t,r,a);for(var o=0;o<a.length;o++)if(a[o]){for(var l=o+r,c=1;o<a.length-1&&a[o+1];o++,c++);if(c>t){var u=[{line:l,cm:n}];e.left&&u.push({line:E(l,e.left.chunks),cm:e.left.orig}),e.right&&u.push({line:E(l,e.right.chunks),cm:e.right.orig});var d=F(c,u);e.options.onCollapse&&e.options.onCollapse(e,l,c,d)}}}function V(e,t,a,n){var r=document.createElement(e);if(a&&(r.className=a),n&&(r.style.cssText=n),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var i=0;i<t.length;++i)r.appendChild(t[i]);return r}function U(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild)}function P(e){for(var t=1;t<arguments.length;t+=2)e.setAttribute(arguments[t],arguments[t+1])}function B(e,t){t||(t={});for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t}function z(e,t,a,n){for(var r=a?J(e.line,e.ch):e,i=0;;){var s=t.indexOf("\n",i);if(-1==s)break;++r.line,n&&++n.line,i=s+1}return r.ch=(i?0:r.ch)+(t.length-i),n&&(n.ch=(i?0:n.ch)+(t.length-i)),r}function j(e){this.cm=e,this.alignable=[],this.height=e.doc.height;var t=this;e.on("markerAdded",function(e,a){if(a.collapsed){var n=a.find(1);null!=n&&t.set(n.line,ne)}}),e.on("markerCleared",function(e,a,n,r){null!=r&&a.collapsed&&t.check(r,ne,t.hasMarker)}),e.on("markerChanged",this.signal.bind(this)),e.on("lineWidgetAdded",function(e,a,n){a.mergeSpacer||(a.above?t.set(n-1,ae):t.set(n,te))}),e.on("lineWidgetCleared",function(e,a,n){a.mergeSpacer||(a.above?t.check(n-1,ae,t.hasWidgetBelow):t.check(n,te,t.hasWidget))}),e.on("lineWidgetChanged",this.signal.bind(this)),e.on("change",function(e,a){var n=a.from.line,r=a.to.line-a.from.line,i=a.text.length-1,s=n+i;(r||i)&&t.map(n,r,i),t.check(s,ne,t.hasMarker),(r||i)&&t.check(a.from.line,ne,t.hasMarker)}),e.on("viewportChange",function(){t.cm.doc.height!=t.height&&t.signal()})}function q(e,t){return(e.line-t.line||e.ch-t.ch)<0?e:t}function K(e,t){return(e.line-t.line||e.ch-t.ch)>0?e:t}function W(e,t){return e.line==t.line&&e.ch==t.ch}function G(e,t,a){for(var n=e.length-1;n>=0;n--){var r=e[n],i=(a?r.origTo:r.editTo)-1;if(i<t)return i}}function Y(e,t,a){for(var n=0;n<e.length;n++){var r=e[n],i=a?r.origFrom:r.editFrom;if(i>t)return i}}function Q(t,n){var r=null,i=t.state.diffViews,s=t.getCursor().line;if(i)for(var o=0;o<i.length;o++){var l=i[o],c=t==l.orig;a(l);var u=n<0?G(l.chunks,s,c):Y(l.chunks,s,c);null==u||null!=r&&!(n<0?u>r:u<r)||(r=u)}if(null==r)return e.Pass;t.setCursor(r,0)}var J=e.Pos,$="http://www.w3.org/2000/svg";t.prototype={constructor:t,init:function(t,a,n){this.edit=this.mv.edit,(this.edit.state.diffViews||(this.edit.state.diffViews=[])).push(this),this.orig=e(t,B({value:a,readOnly:!this.mv.options.allowEditingOriginals},B(n))),"align"==this.mv.options.connect&&(this.edit.state.trackAlignable||(this.edit.state.trackAlignable=new j(this.edit)),this.orig.state.trackAlignable=new j(this.orig)),this.orig.state.diffViews=[this];var r=n.chunkClassLocation||"background";"[object Array]"!=Object.prototype.toString.call(r)&&(r=[r]),this.classes.classLocation=r,this.diff=w(R(a),R(n.value),this.mv.options.ignoreWhitespace),this.chunks=S(this.diff),this.diffOutOfDate=this.dealigned=!1,this.needsScrollSync=null,this.showDifferences=!1!==n.showDifferences},registerEvents:function(e){this.forceUpdate=o(this),d(this,!0,!1),l(this,e)},setShowDifferences:function(e){(e=!1!==e)!=this.showDifferences&&(this.showDifferences=e,this.forceUpdate("full"))}};var Z=!1,X=e.MergeView=function(a,n){if(!(this instanceof X))return new X(a,n);this.options=n;var r=n.origLeft,i=null==n.origRight?n.orig:n.origRight,s=null!=r,o=null!=i,l=1+(s?1:0)+(o?1:0),c=[],u=this.left=null,d=this.right=null,p=this;if(s){u=this.left=new t(this,"left");var _=V("div",null,"CodeMirror-merge-pane CodeMirror-merge-left");c.push(_),c.push(D(u))}var h=V("div",null,"CodeMirror-merge-pane CodeMirror-merge-editor");if(c.push(h),o){d=this.right=new t(this,"right"),c.push(D(d));var f=V("div",null,"CodeMirror-merge-pane CodeMirror-merge-right");c.push(f)}(o?f:h).className+=" CodeMirror-merge-pane-rightmost",c.push(V("div",null,null,"height: 0; clear: both;"));var m=this.wrap=a.appendChild(V("div",c,"CodeMirror-merge CodeMirror-merge-"+l+"pane"));this.edit=e(h,B(n)),u&&u.init(_,r,n),d&&d.init(f,i,n),n.collapseIdentical&&this.editor().operation(function(){I(p,n.collapseIdentical)}),"align"==n.connect&&(this.aligners=[],T(this.left||this.right,!0)),u&&u.registerEvents(d),d&&d.registerEvents(u);var E=function(){u&&g(u),d&&g(d)};e.on(window,"resize",E);var v=setInterval(function(){for(var t=m.parentNode;t&&t!=document.body;t=t.parentNode);t||(clearInterval(v),e.off(window,"resize",E))},5e3)};X.prototype={constructor:X,editor:function(){return this.edit},rightOriginal:function(){return this.right&&this.right.orig},leftOriginal:function(){return this.left&&this.left.orig},setShowDifferences:function(e){this.right&&this.right.setShowDifferences(e),this.left&&this.left.setShowDifferences(e)},rightChunks:function(){if(this.right)return a(this.right),this.right.chunks},leftChunks:function(){if(this.left)return a(this.left),this.left.chunks}};var ee=new n,te=1,ae=2,ne=4;j.prototype={signal:function(){e.signal(this,"realign"),this.height=this.cm.doc.height},set:function(e,t){for(var a=-1;a<this.alignable.length;a+=2){var n=this.alignable[a]-e;if(0==n){if((this.alignable[a+1]&t)==t)return;return this.alignable[a+1]|=t,void this.signal()}if(n>0)break}this.signal(),this.alignable.splice(a,0,e,t)},find:function(e){for(var t=0;t<this.alignable.length;t+=2)if(this.alignable[t]==e)return t;return-1},check:function(e,t,a){var n=this.find(e);if(-1!=n&&this.alignable[n+1]&t&&!a.call(this,e)){this.signal();var r=this.alignable[n+1]&~t;r?this.alignable[n+1]=r:this.alignable.splice(n,2)}},hasMarker:function(e){var t=this.cm.getLineHandle(e);if(t.markedSpans)for(var a=0;a<t.markedSpans.length;a++)if(t.markedSpans[a].mark.collapsed&&null!=t.markedSpans[a].to)return!0;return!1},hasWidget:function(e){var t=this.cm.getLineHandle(e);if(t.widgets)for(var a=0;a<t.widgets.length;a++)if(!t.widgets[a].above&&!t.widgets[a].mergeSpacer)return!0;return!1},hasWidgetBelow:function(e){if(e==this.cm.lastLine())return!1;var t=this.cm.getLineHandle(e+1);if(t.widgets)for(var a=0;a<t.widgets.length;a++)if(t.widgets[a].above&&!t.widgets[a].mergeSpacer)return!0;return!1},map:function(e,t,a){for(var n=a-t,r=e+t,i=-1,s=-1,o=0;o<this.alignable.length;o+=2){var l=this.alignable[o];l==e&&this.alignable[o+1]&ae&&(i=o),l==r&&this.alignable[o+1]&ae&&(s=o),l<=e||(l<r?this.alignable.splice(o--,2):this.alignable[o]+=n)}if(i>-1){var c=this.alignable[i+1];c==ae?this.alignable.splice(i,2):this.alignable[i+1]=c&~ae}s>-1&&a&&this.set(e+a,ae)}},e.commands.goNextDiff=function(e){return Q(e,1)},e.commands.goPrevDiff=function(e){return Q(e,-1)}})},308:function(e,t,a){"use strict";function n(e,t){this._groups=e,this._parents=t}function r(){return new n([[document.documentElement]],H)}var i=a(1394),s=a(1395),o=a(1383),l=a(1377),c=a(1112),u=a(1382),d=a(1387),p=a(1390),_=a(1397),h=a(1375),f=a(1389),m=a(1388),g=a(1396),E=a(1381),v=a(1380),y=a(1374),k=a(1114),T=a(1391),A=a(1376),C=a(1398),b=a(1384),O=a(1392),D=a(1386),R=a(1373),w=a(1385),S=a(1393),L=a(1378),x=a(1037),M=a(1379);a.d(t,"b",function(){return H}),t.a=n;var H=[null];n.prototype=r.prototype={constructor:n,select:i.a,selectAll:s.a,filter:o.a,data:l.a,enter:c.a,exit:u.a,merge:d.a,order:p.a,sort:_.a,call:h.a,nodes:f.a,node:m.a,size:g.a,empty:E.a,each:v.a,attr:y.a,style:k.a,property:T.a,classed:A.a,text:C.a,html:b.a,raise:O.a,lower:D.a,append:R.a,insert:w.a,remove:S.a,datum:L.a,on:x.b,dispatch:M.a}}});