webpackJsonp([4],{1561:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(11),r=a.n(n),o=a(1),i=a.n(o),s=a(4),c=a.n(s),l=a(3),_=a.n(l),m=a(2),u=a.n(m),p=a(0),d=a.n(p),E=a(1655),T=a(1654),f=a(1653);a.d(t,"default",function(){return v});var v=function(e){function t(){return i()(this,t),_()(this,(t.__proto__||r()(t)).apply(this,arguments))}return u()(t,e),c()(t,[{key:"render",value:function(){return d.a.createElement("div",{className:"operation-overview",style:{background:"#f2f7fa"}},d.a.createElement(E.a,null),d.a.createElement(T.a,null),d.a.createElement(f.a,null))}}]),t}(p.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(v,"Index","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/operation/overview.js")}()},1653:function(e,t,a){"use strict";var n=a(63),r=(a.n(n),a(62)),o=a.n(r),i=a(71),s=(a.n(i),a(70)),c=a.n(s),l=a(44),_=(a.n(l),a(43)),m=a.n(_),u=a(111),p=(a.n(u),a(110)),d=a.n(p),E=a(56),T=(a.n(E),a(55)),f=a.n(T),v=a(11),h=a.n(v),g=a(1),y=a.n(g),A=a(4),O=a.n(A),D=a(3),R=a.n(D),k=a(2),N=a.n(k),C=a(0),L=a.n(C),H=(a(18),a(22)),b=a(10),x=a.n(b),I=a(30),w=(a.n(I),a(751)),S=a(19),j=a(32),U=a(196),z=a(96);a(752),a(754),a(753);var J=function(e){function t(){var e,a,n,r;y()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=R()(this,(e=t.__proto__||h()(t)).call.apply(e,[this].concat(i))),n.state={offline:"",topTiming:[],topError:[],handleTiming:x()(),lineChart:""},n.resize=function(){var e;return(e=n).__resize__REACT_HOT_LOADER__.apply(e,arguments)},n.loadOfflineData=function(){var e;return(e=n).__loadOfflineData__REACT_HOT_LOADER__.apply(e,arguments)},n.loadChartData=function(){var e;return(e=n).__loadChartData__REACT_HOT_LOADER__.apply(e,arguments)},n.getTopTaskTime=function(){var e;return(e=n).__getTopTaskTime__REACT_HOT_LOADER__.apply(e,arguments)},n.getTopJobError=function(){var e;return(e=n).__getTopJobError__REACT_HOT_LOADER__.apply(e,arguments)},n.getSeries=function(){var e;return(e=n).__getSeries__REACT_HOT_LOADER__.apply(e,arguments)},n.changeHandleTiming=function(){var e;return(e=n).__changeHandleTiming__REACT_HOT_LOADER__.apply(e,arguments)},n.topTaskTiming=function(){var e;return(e=n).__topTaskTiming__REACT_HOT_LOADER__.apply(e,arguments)},n.topTaskError=function(){var e;return(e=n).__topTaskError__REACT_HOT_LOADER__.apply(e,arguments)},n.disabledDate=function(){var e;return(e=n).__disabledDate__REACT_HOT_LOADER__.apply(e,arguments)},r=a,R()(n,r)}return N()(t,e),O()(t,[{key:"componentDidMount",value:function(){this.loadOfflineData(),this.loadChartData(),this.getTopTaskTime(),this.getTopJobError()}},{key:"componentWillReceiveProps",value:function(e){var t=e.project,a=this.props.project;a&&t&&a.id!==t.id&&(this.loadOfflineData(),this.loadChartData(),this.getTopTaskTime(),this.getTopJobError())}},{key:"__resize__REACT_HOT_LOADER__",value:function(){this.state.lineChart&&this.state.lineChart.resize()}},{key:"__loadOfflineData__REACT_HOT_LOADER__",value:function(){var e=this;S.a.getJobStatistics().then(function(t){1===t.code&&e.setState({offline:t.data})})}},{key:"__loadChartData__REACT_HOT_LOADER__",value:function(){var e=this;S.a.getJobGraph().then(function(t){1===t.code&&e.initLineChart(t.data)})}},{key:"__getTopTaskTime__REACT_HOT_LOADER__",value:function(e){var t=this,a=this.state.handleTiming,n={startTime:a.set({hour:0,minute:0,second:0}).unix(),endTime:a.set({hour:23,minute:59,second:59}).unix()};S.a.getJobTopTime(n).then(function(e){1===e.code&&t.setState({topTiming:e.data})})}},{key:"__getTopJobError__REACT_HOT_LOADER__",value:function(){var e=this;S.a.getJobTopError().then(function(t){1===t.code&&e.setState({topError:t.data})})}},{key:"__getSeries__REACT_HOT_LOADER__",value:function(e){var t=[];if(e&&e.y)for(var a=e&&e.type?e.type.data:[],n=0;n<a.length;n++)t.push({name:a[n],symbol:"none",type:"line",data:e.y[n].data});return t}},{key:"initLineChart",value:function(e){var t=z.init(document.getElementById("TaskTrend")),n=a.i(I.cloneDeep)(j.c);n.title.text="",n.tooltip.axisPointer.label.formatter="{value}: 00",n.yAxis[0].minInterval=1,n.xAxis[0].axisLabel.formatter="{value} 时",n.legend.data=e&&e.type?e.type.data:[],n.xAxis[0].data=e&&e.x?e.x.data:[],n.series=this.getSeries(e),t.setOption(n),this.setState({lineChart:t})}},{key:"__changeHandleTiming__REACT_HOT_LOADER__",value:function(e){var t=this;this.setState({handleTiming:e},function(){t.getTopTaskTime()})}},{key:"__topTaskTiming__REACT_HOT_LOADER__",value:function(){var e=this;return[{title:"任务名称",dataIndex:"taskName",key:"taskName",render:function(t,a){return L.a.createElement("a",{onClick:e.props.goToTaskDev.bind(e,a.taskId)},t)}},{title:"任务类型",dataIndex:"type",key:"type",render:function(e,t){return 1===t.type?"补数据":"周期调度"}},{title:"调度时间",dataIndex:"cycTime",key:"cycTime"},{title:"责任人",dataIndex:"createUser",key:"createUser"},{title:"执行时长",dataIndex:"runTime",key:"runTime"}]}},{key:"__topTaskError__REACT_HOT_LOADER__",value:function(){var e=this;return[{title:"任务名称",dataIndex:"taskName",key:"taskName",render:function(t,a){return L.a.createElement("a",{onClick:e.props.goToTaskDev.bind(e,a.taskId)},t)}},{title:"责任人",dataIndex:"createUser",key:"createUser"},{title:"出错次数",dataIndex:"errorCount",key:"errorCount"}]}},{key:"__disabledDate__REACT_HOT_LOADER__",value:function(e){return e&&e.valueOf()>x()().add(1,"days").valueOf()}},{key:"render",value:function(){var e=this.state,t=(e.offline,e.topTiming),a=e.topError,n=e.handleTiming;return L.a.createElement("div",{className:"box-card",style:{marginTop:"20px"}},L.a.createElement(f.a,{noHovering:!0,bordered:!1,loading:!1,className:"shadow",title:"今日任务完成情况（12：00）"},L.a.createElement(w.a,{onResize:this.resize},L.a.createElement("article",{id:"TaskTrend",style:{width:"100%",height:"300px"}}))),L.a.createElement(o.a,{className:"m-card",style:{marginTop:"20px"}},L.a.createElement(c.a,{span:"12",style:{paddingRight:"10px"}},L.a.createElement(f.a,{noHovering:!0,bordered:!1,loading:!1,className:"shadow",title:"执行时长排行",extra:L.a.createElement(d.a,{style:{width:100,float:"right",marginTop:"10px"},format:"YYYY-MM-DD",value:n,disabledDate:this.disabledDate,onChange:this.changeHandleTiming})},L.a.createElement(m.a,{rowKey:"id",pagination:!1,className:"m-table",style:{minHeight:"0"},columns:this.topTaskTiming(),dataSource:t||[]}))),L.a.createElement(c.a,{span:"12",style:{paddingLeft:"10px"}},L.a.createElement(f.a,{noHovering:!0,bordered:!1,loading:!1,className:"shadow",title:"近30天出错排行"},L.a.createElement(m.a,{rowKey:"id",className:"m-table",pagination:!1,style:{minHeight:"0"},columns:this.topTaskError(),dataSource:a||[]})))))}}]),t}(C.Component),G=a.i(H.connect)(function(e){return{project:e.project}},function(e){var t=a.i(U.a)(e);return{goToTaskDev:function(e){t.openTaskInDev(e)}}})(J);t.a=G;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(J,"OfflineStatistics","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/operation/offline/index.js"),__REACT_HOT_LOADER__.register(G,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/operation/offline/index.js"))}()},1654:function(e,t,a){"use strict";var n=a(56),r=(a.n(n),a(55)),o=a.n(r),i=a(63),s=(a.n(i),a(62)),c=a.n(s),l=a(71),_=(a.n(l),a(70)),m=a.n(_),u=a(24),p=(a.n(u),a(23)),d=a.n(p),E=a(11),T=a.n(E),f=a(1),v=a.n(f),h=a(4),g=a.n(h),y=a(3),A=a.n(y),O=a(2),D=a.n(O),R=a(0),k=a.n(R),N=a(18),C=a(22),L=a(10),H=(a.n(L),a(19)),b=function(e){function t(){var e,a,n,r;v()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=A()(this,(e=t.__proto__||T()(t)).call.apply(e,[this].concat(i))),n.state={data:""},n.loadOfflineData=function(){var e;return(e=n).__loadOfflineData__REACT_HOT_LOADER__.apply(e,arguments)},n.getSeriesData=function(){var e;return(e=n).__getSeriesData__REACT_HOT_LOADER__.apply(e,arguments)},r=a,A()(n,r)}return D()(t,e),g()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.project,a=this.props.project;a&&t&&a.id!==t.id&&this.loadOfflineData()}},{key:"__loadOfflineData__REACT_HOT_LOADER__",value:function(){var e=this;H.a.getJobStatistics().then(function(t){1===t.code&&e.setState({data:t.data})})}},{key:"__getSeriesData__REACT_HOT_LOADER__",value:function(e){return e?[{name:"失败",value:e.FAILED||0},{name:"运行中",value:e.RUNNING||0},{name:"已完成",value:e.FINISHED||0},{name:"等待运行",value:e.WAITENGINE||0},{name:"提交中",value:e.SUBMITTING||0},{name:"等待提交",value:e.UNSUBMIT||0},{name:"冻结",value:e.FROZEN||0}]:[]}},{key:"render",value:function(){var e=this.state.data;return k.a.createElement("div",{style:{marginTop:"10px"}},k.a.createElement("h1",{className:"box-title box-title-bolder"},"离线任务",k.a.createElement(d.a,{type:"primary",className:"right",style:{marginTop:"8px"}},k.a.createElement(N.Link,{to:"/offline/operation"},"离线任务运维"))),k.a.createElement("div",{className:"box-4 m-card m-card-small"},k.a.createElement(o.a,{noHovering:!0,bordered:!1,loading:!1,title:"今日任务完成情况（12：00）"},k.a.createElement(c.a,{className:"m-count"},k.a.createElement(m.a,{span:4},k.a.createElement("section",{className:"m-count-section"},k.a.createElement("span",{className:"m-count-title"},"失败"),k.a.createElement("span",{className:"m-count-content font-red"},e.FAILED||0))),k.a.createElement(m.a,{span:8},k.a.createElement("section",{className:"m-count-section"},k.a.createElement("span",{className:"m-count-title"},"运行"),k.a.createElement("span",{className:"m-count-content font-organge"},e.RUNNING||0))),k.a.createElement(m.a,{span:8},k.a.createElement("section",{className:"m-count-section"},k.a.createElement("span",{className:"m-count-title"},"未运行"),k.a.createElement("span",{className:"m-count-content font-gray"},e.WAITENGINE||0))),k.a.createElement(m.a,{span:4},k.a.createElement("section",{className:"m-count-section"},k.a.createElement("span",{className:"m-count-title"},"成功"),k.a.createElement("span",{className:"m-count-content font-green"},e.FINISHED||0)))))))}}]),t}(R.Component),x=a.i(C.connect)(function(e){return{project:e.project}})(b);t.a=x;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(b,"OfflineCount","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/operation/offline/offlineCount.js"),__REACT_HOT_LOADER__.register(x,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/operation/offline/offlineCount.js"))}()},1655:function(e,t,a){"use strict";var n=a(56),r=(a.n(n),a(55)),o=a.n(r),i=a(63),s=(a.n(i),a(62)),c=a.n(s),l=a(71),_=(a.n(l),a(70)),m=a.n(_),u=a(24),p=(a.n(u),a(23)),d=a.n(p),E=a(11),T=a.n(E),f=a(1),v=a.n(f),h=a(4),g=a.n(h),y=a(3),A=a.n(y),O=a(2),D=a.n(O),R=a(0),k=a.n(R),N=a(18),C=a(22),L=a(10),H=(a.n(L),a(19)),b=function(e){function t(){var e,a,n,r;v()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=A()(this,(e=t.__proto__||T()(t)).call.apply(e,[this].concat(i))),n.state={data:{},chart:""},n.getSeriesData=function(){var e;return(e=n).__getSeriesData__REACT_HOT_LOADER__.apply(e,arguments)},r=a,A()(n,r)}return D()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.loadRealtimeData()}},{key:"componentWillReceiveProps",value:function(e){var t=e.project,a=this.props.project;a&&t&&a.id!==t.id&&this.loadRealtimeData()}},{key:"loadRealtimeData",value:function(){var e=this;H.a.taskStatistics().then(function(t){1===t.code&&e.setState({data:t.data})})}},{key:"__getSeriesData__REACT_HOT_LOADER__",value:function(e){return e?[{name:"失败",value:e.FAILED||0},{name:"运行中",value:e.RUNNING||0},{name:"停止",value:e.CANCELED||0},{name:"等待运行",value:e.WAITENGINE||0},{name:"等待提交",value:e.UNSUBMIT||0}]:[]}},{key:"render",value:function(){var e=this.state.data;return k.a.createElement("div",null,k.a.createElement("h1",{className:"box-title box-title-bolder"},"实时任务",k.a.createElement(d.a,{type:"primary",className:"right",style:{marginTop:"8px"}},k.a.createElement(N.Link,{to:"/realtime/operation"},"实时任务运维"))),k.a.createElement("div",{className:"box-4 m-card m-card-small"},k.a.createElement(o.a,{noHovering:!0,bordered:!1,loading:!1,title:"任务数量"},k.a.createElement(c.a,{className:"m-count"},k.a.createElement(m.a,{span:4},k.a.createElement("section",{className:"m-count-section"},k.a.createElement("span",{className:"m-count-title"},"全部"),k.a.createElement("span",{className:"m-count-content font-black"},e.ALL||0))),k.a.createElement(m.a,{span:8},k.a.createElement("section",{className:"m-count-section"},k.a.createElement("span",{className:"m-count-title"},"失败"),k.a.createElement("span",{className:"m-count-content font-red"},e.FAILED||0))),k.a.createElement(m.a,{span:8},k.a.createElement("section",{className:"m-count-section"},k.a.createElement("span",{className:"m-count-title"},"运行"),k.a.createElement("span",{className:"m-count-content font-organge"},e.RUNNING||0))),k.a.createElement(m.a,{span:4},k.a.createElement("section",{className:"m-count-section"},k.a.createElement("span",{className:"m-count-title"},"停止"),k.a.createElement("span",{className:"m-count-content font-darkgreen"},e.CANCELED||0)))))))}}]),t}(R.Component),x=a.i(C.connect)(function(e){return{project:e.project}})(b);t.a=x;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(b,"RealtimeCount","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/operation/realtime/realtimeCount.js"),__REACT_HOT_LOADER__.register(x,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/operation/realtime/realtimeCount.js"))}()}});