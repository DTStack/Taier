(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1453:function(e,t,i){"use strict";i(58);var r=i(30),n=i.n(r),o=(i(44),i(25)),a=i.n(o),l=i(8),s=i.n(l),c=i(5),f=i.n(c),h=i(7),g=i.n(h),u=i(1),d=i.n(u),p=i(6),v=i.n(p),m=i(0),k=i.n(m),_=(i(20),i(12)),C=i(40),T=i.n(C),y=i(11),w=(i(1467),i(1465),i(222));i(826),i(1463);var b=function(e){function t(){var e,i,r,n;f()(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return i=r=d()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(a))),r.initUI=function(){var e;return(e=r).__initUI__REACT_HOT_LOADER__.apply(e,arguments)},n=i,d()(r,n)}return v()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.value,i=e.compareTo;this.initUI(t,i)}},{key:"componentWillReceiveProps",value:function(e){var t=e.value,i=e.compareTo;t&&this.props.value!==t&&this._self.edit.doc.setValue(t),i&&this.props.compareTo!==i&&this._self.right.orig.doc.setValue(i)}},{key:"__initUI__REACT_HOT_LOADER__",value:function(e,t){var i=this.props,r=i.onChange,n=i.readOnly,o=this.getCodeMirrorIns().MergeView(this.diffView,{value:e,origLeft:null,orig:t,lineNumbers:!0,mode:"text/x-sql",highlightDifferences:!0,connect:null,collapseIdentical:!1,readOnly:n});o.edit.doc.on("change",function(t){r&&r(e,t.getValue())}),o.wrap.style.height="500px",this._self=o}},{key:"mergeViewHeight",value:function(e){function t(e){return e?e.getScrollInfo().height:0}return Math.max(t(e.leftOriginal()),t(e.editor()),t(e.rightOriginal()))}},{key:"resize",value:function(e){for(var t=this.mergeViewHeight(e);;){e.leftOriginal()&&e.leftOriginal().setSize(null,t),e.editor().setSize(null,t),e.rightOriginal()&&e.rightOriginal().setSize(null,t);var i=this.mergeViewHeight(e);if(i>=t)break;t=i}e.wrap.style.height=t+"px"}},{key:"getCodeMirrorIns",value:function(){return this._self||w}},{key:"render",value:function(){var e=this,t=this.props,i=t.className,r=t.style,n="code-editor merge-text";n=i?n+" "+i:n;var o={position:"relative",borderTop:"1px solid #e9e9e9",marginTop:"20px"};return o=r?T()(o,r):o,k.a.createElement("div",{ref:function(t){e.diffView=t},className:n,style:o})}}]),t}(m.Component),O=b,A=O;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(b,"DiffEditor","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/components/diff-code-editor/index.js"),__REACT_HOT_LOADER__.register(O,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/components/diff-code-editor/index.js"));i.d(t,"a",function(){return E});var E=function(e){function t(e){f()(this,t);var i=d()(this,(t.__proto__||s()(t)).call(this,e));return i.state={showDiff:!1,campareTo:""},i.diffCode=function(){return i.__diffCode__REACT_HOT_LOADER__.apply(i,arguments)},i.close=function(){return i.__close__REACT_HOT_LOADER__.apply(i,arguments)},i.codeChange=function(){return i.__codeChange__REACT_HOT_LOADER__.apply(i,arguments)},i.taskVersionCols=function(){return i.__taskVersionCols__REACT_HOT_LOADER__.apply(i,arguments)},i}return v()(t,e),g()(t,[{key:"__diffCode__REACT_HOT_LOADER__",value:function(e){this.setState({showDiff:!0,campareTo:e})}},{key:"__close__REACT_HOT_LOADER__",value:function(){this.setState({showDiff:!1,campareTo:""})}},{key:"__codeChange__REACT_HOT_LOADER__",value:function(e,t){this.props.changeSql(t)}},{key:"render",value:function(){var e=this.props.taskInfo,t=this.state,i=t.showDiff,r=t.campareTo,o=e.readWriteLockVO&&!e.readWriteLockVO.getLock;return k.a.createElement("div",null,k.a.createElement(a.a,{className:"m-table",rowKey:"id",dataSource:e.taskVersions||[],columns:this.taskVersionCols(),pagination:!1}),k.a.createElement(n.a,{wrapClassName:"vertical-center-modal modal-body-nopadding",title:"历史版本对比",width:"900px",bodyStyle:{height:"500px"},visible:i,onCancel:this.close,cancelText:"关闭",footer:null},k.a.createElement(A,{readOnly:o,value:e.sqlText,compareTo:r.sqlText,onChange:this.codeChange})))}},{key:"__taskVersionCols__REACT_HOT_LOADER__",value:function(){var e=this,t=this.props.taskInfo;return[{width:120,title:"发布时间",dataIndex:"gmtCreate",key:"gmtCreate",render:function(e){return _.a.formatDateTime(e)}},{title:"发布人",dataIndex:"userName",key:"userName"},{width:120,title:"描述",dataIndex:"publishDesc",key:"publishDesc"},{title:"操作",dataIndex:"id",width:80,key:"operation",render:function(i,r){return k.a.createElement("span",null,t.taskType===y.p.SQL?k.a.createElement("a",{onClick:function(){return e.diffCode(r)}},"代码"):"-")}}]}}]),t}(k.a.Component);"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(E,"TaskVersion","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskVersion.js")},1454:function(e,t,i){"use strict";i.d(t,"a",function(){return m});i(96);var r=i(51),n=i.n(r),o=i(8),a=i.n(o),l=i(5),s=i.n(l),c=i(7),f=i.n(c),h=i(1),g=i.n(h),u=i(6),d=i.n(u),p=i(0),v=i.n(p),m=function(e){function t(e){return s()(this,t),g()(this,(t.__proto__||a()(t)).call(this,e))}return d()(t,e),f()(t,[{key:"render",value:function(){return this.props.notSynced?v.a.createElement(n.a,{title:"修改已保存至本地存储但尚未同步到服务器，你可以点击上面的保存按钮立即同步。"},v.a.createElement("span",{style:{display:"inline-block",marginRight:8,borderRadius:"50%",border:"4px solid ",borderColor:"#EF5350"}})):v.a.createElement("span",{style:{display:"inline-block",marginRight:8,borderRadius:"50%",border:"4px solid ",borderColor:"#00A755"}})}}]),t}(v.a.Component);"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(m,"SyncBadge","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/components/sync-badge/index.js")},1463:function(e,t,i){var r=i(1462),n=(i(222),-1),o=1,a=0;!function(e){"use strict";var t=e.Pos,i="http://www.w3.org/2000/svg";function l(e,t){this.mv=e,this.type=t,this.classes="left"==t?{chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect"}:{chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect"}}function s(t){t.diffOutOfDate&&(t.diff=M(t.orig.getValue(),t.edit.getValue(),t.mv.options.ignoreWhitespace),t.chunks=R(t.diff),t.diffOutOfDate=!1,e.signal(t.edit,"updateDiff",t.diff))}l.prototype={constructor:l,init:function(t,i,r){this.edit=this.mv.edit,(this.edit.state.diffViews||(this.edit.state.diffViews=[])).push(this),this.orig=e(t,z({value:i,readOnly:!this.mv.options.allowEditingOriginals},z(r))),"align"==this.mv.options.connect&&(this.edit.state.trackAlignable||(this.edit.state.trackAlignable=new J(this.edit)),this.orig.state.trackAlignable=new J(this.orig)),this.orig.state.diffViews=[this];var n=r.chunkClassLocation||"background";"[object Array]"!=Object.prototype.toString.call(n)&&(n=[n]),this.classes.classLocation=n,this.diff=M(S(i),S(r.value),this.mv.options.ignoreWhitespace),this.chunks=R(this.diff),this.diffOutOfDate=this.dealigned=!1,this.needsScrollSync=null,this.showDifferences=!1!==r.showDifferences},registerEvents:function(t){this.forceUpdate=function(t){var i,r={from:0,to:0,marked:[]},a={from:0,to:0,marked:[]},l=!1;function h(e){c=!0,l=!1,"full"==e&&(t.svg&&N(t.svg),t.copyButtons&&N(t.copyButtons),d(t.edit,r.marked,t.classes),d(t.orig,a.marked,t.classes),r.from=r.to=a.from=a.to=0),s(t),t.showDifferences&&(p(t.edit,t.diff,r,o,t.classes),p(t.orig,t.diff,a,n,t.classes)),"align"==t.mv.options.connect&&y(t),k(t),null!=t.needsScrollSync&&f(t,t.needsScrollSync),c=!1}function g(e){c||(t.dealigned=!0,u(e))}function u(e){c||l||(clearTimeout(i),!0===e&&(l=!0),i=setTimeout(h,!0===e?20:250))}function v(e,i){t.diffOutOfDate||(t.diffOutOfDate=!0,r.from=r.to=a.from=a.to=0),g(i.text.length-1!=i.to.line-i.from.line)}function m(){t.diffOutOfDate=!0,t.dealigned=!0,h("full")}return t.edit.on("change",v),t.orig.on("change",v),t.edit.on("swapDoc",m),t.orig.on("swapDoc",m),"align"==t.mv.options.connect&&(e.on(t.edit.state.trackAlignable,"realign",g),e.on(t.orig.state.trackAlignable,"realign",g)),t.edit.on("viewportChange",function(){u(!1)}),t.orig.on("viewportChange",function(){u(!1)}),h(),h}(this),g(this,!0,!1),function(e,t){e.edit.on("scroll",function(){f(e,!0)&&k(e)}),e.orig.on("scroll",function(){f(e,!1)&&k(e),t&&f(t,!0)&&k(t)})}(this,t)},setShowDifferences:function(e){(e=!1!==e)!=this.showDifferences&&(this.showDifferences=e,this.forceUpdate("full"))}};var c=!1;function f(e,t){if(e.diffOutOfDate)return e.lockScroll&&null==e.needsScrollSync&&(e.needsScrollSync=t),!1;if(e.needsScrollSync=null,!e.lockScroll)return!0;var i,r,n=+new Date;if(t?(i=e.edit,r=e.orig):(i=e.orig,r=e.edit),i.state.scrollSetBy==e&&(i.state.scrollSetAt||0)+250>n)return!1;var o=i.getScrollInfo();if("align"==e.mv.options.connect)v=o.top;else{var a,l,s=.5*o.clientHeight,c=o.top+s,f=i.lineAtHeight(c,"local"),g=function(e,t,i){for(var r,n,o,a,l=0;l<e.length;l++){var s=e[l],c=i?s.editFrom:s.origFrom,f=i?s.editTo:s.origTo;null==n&&(c>t?(n=s.editFrom,a=s.origFrom):f>t&&(n=s.editTo,a=s.origTo)),f<=t?(r=s.editTo,o=s.origTo):c<=t&&(r=s.editFrom,o=s.origFrom)}return{edit:{before:r,after:n},orig:{before:o,after:a}}}(e.chunks,f,t),u=h(i,t?g.edit:g.orig),d=h(r,t?g.orig:g.edit),p=(c-u.top)/(u.bot-u.top),v=d.top-s+p*(d.bot-d.top);if(v>o.top&&(l=o.top/s)<1)v=v*l+o.top*(1-l);else if((a=o.height-o.clientHeight-o.top)<s){var m=r.getScrollInfo(),k=m.height-m.clientHeight-v;k>a&&(l=a/s)<1&&(v=v*l+(m.height-m.clientHeight-a)*(1-l))}}return r.scrollTo(o.left,v),r.state.scrollSetAt=n,r.state.scrollSetBy=e,!0}function h(e,t){var i=t.after;return null==i&&(i=e.lastLine()+1),{top:e.heightAtLine(t.before||0,"local"),bot:e.heightAtLine(i,"local")}}function g(e,t,i){e.lockScroll=t,t&&0!=i&&f(e,o)&&k(e),e.lockButton.innerHTML=t?"⇛⇚":"⇛&nbsp;&nbsp;⇚"}function u(e,t,i){for(var r=i.classLocation,n=0;n<r.length;n++)e.removeLineClass(t,r[n],i.chunk),e.removeLineClass(t,r[n],i.start),e.removeLineClass(t,r[n],i.end)}function d(t,i,r){for(var n=0;n<i.length;++n){var o=i[n];o instanceof e.TextMarker?o.clear():o.parent&&u(t,o,r)}i.length=0}function p(e,t,i,r,n){var o=e.getViewport();e.operation(function(){i.from==i.to||o.from-i.to>20||i.from-o.to>20?(d(e,i.marked,n),m(e,t,r,i.marked,o.from,o.to,n),i.from=o.from,i.to=o.to):(o.from<i.from&&(m(e,t,r,i.marked,o.from,i.from,n),i.from=o.from),o.to>i.to&&(m(e,t,r,i.marked,i.to,o.to,n),i.to=o.to))})}function v(e,t,i,r,n,o){for(var a=i.classLocation,l=e.getLineHandle(t),s=0;s<a.length;s++)r&&e.addLineClass(l,a[s],i.chunk),n&&e.addLineClass(l,a[s],i.start),o&&e.addLineClass(l,a[s],i.end);return l}function m(e,i,r,o,l,s,c){var f=t(0,0),h=t(l,0),g=e.clipPos(t(s-1)),u=r==n?c.del:c.insert;function d(t,i){for(var r=Math.max(l,t),n=Math.min(s,i),a=r;a<n;++a)o.push(v(e,a,c,!0,a==t,a==i-1));t==i&&r==i&&n==i&&(r?o.push(v(e,r-1,c,!1,!1,!0)):o.push(v(e,r,c,!1,!0,!1)))}for(var p=0,m=!1,k=0;k<i.length;++k){var _=i[k],C=_[0],T=_[1];if(C==a){var y=f.line+(F(i,k)?0:1);U(f,T);var w=f.line+(x(i,k)?1:0);w>y&&(m&&(d(p,y),m=!1),p=w)}else if(m=!0,C==r){var b=U(f,T,!0),O=K(h,f),A=G(g,b);Q(O,A)||o.push(e.markText(O,A,{className:u})),f=b}}m&&d(p,f.line+1)}function k(e){if(e.showDifferences){if(e.svg){N(e.svg);var t=e.gap.offsetWidth;W(e.svg,"width",t,"height",e.gap.offsetHeight)}e.copyButtons&&N(e.copyButtons);for(var i=e.edit.getViewport(),r=e.orig.getViewport(),n=e.mv.wrap.getBoundingClientRect().top,o=n-e.edit.getScrollerElement().getBoundingClientRect().top+e.edit.getScrollInfo().top,a=n-e.orig.getScrollerElement().getBoundingClientRect().top+e.orig.getScrollInfo().top,l=0;l<e.chunks.length;l++){var s=e.chunks[l];s.editFrom<=i.to&&s.editTo>=i.from&&s.origFrom<=r.to&&s.origTo>=r.from&&O(e,s,a,o,t)}}}function _(e,t){for(var i=0,r=0,n=0;n<t.length;n++){var o=t[n];if(o.editTo>e&&o.editFrom<=e)return null;if(o.editFrom>e)break;i=o.editTo,r=o.origTo}return r+(e-i)}function C(e,t,i){for(var r=e.state.trackAlignable,n=e.firstLine(),o=0,a=[],l=0;;l++){for(var s=t[l],c=s?i?s.origFrom:s.editFrom:1e9;o<r.alignable.length;o+=2){var f=r.alignable[o]+1;if(!(f<=n)){if(!(f<=c))break;a.push(f)}}if(!s)break;a.push(n=i?s.origTo:s.editTo)}return a}function T(e,t,i,r){var n=0,o=0,a=0,l=0;e:for(;;n++){var s=e[n],c=t[o];if(!s&&null==c)break;for(var f=s?s[0]:1e9,h=null==c?1e9:c;a<i.length;){var g=i[a];if(g.origFrom<=h&&g.origTo>h){o++,n--;continue e}if(g.editTo>f){if(g.editFrom<=f)continue e;break}l+=g.origTo-g.origFrom-(g.editTo-g.editFrom),a++}if(f==h-l)s[r]=h,o++;else if(f<h-l)s[r]=f+l;else{var u=[h-l,null,null];u[r]=h,e.splice(n,0,u),o++}}}function y(e,t){if(e.dealigned||t){if(!e.orig.curOp)return e.orig.operation(function(){y(e,t)});e.dealigned=!1;var i=e.mv.left==e?e.mv.right:e.mv.left;i&&(s(i),i.dealigned=!1);for(var r=function(e,t){var i=C(e.edit,e.chunks,!1),r=[];if(t)for(var n=0,o=0;n<t.chunks.length;n++){for(var a=t.chunks[n].editTo;o<i.length&&i[o]<a;)o++;o!=i.length&&i[o]==a||i.splice(o++,0,a)}for(var n=0;n<i.length;n++)r.push([i[n],null,null]);return T(r,C(e.orig,e.chunks,!0),e.chunks,1),t&&T(r,C(t.orig,t.chunks,!0),t.chunks,2),r}(e,i),n=e.mv.aligners,o=0;o<n.length;o++)n[o].clear();n.length=0;var a=[e.edit,e.orig],l=[];i&&a.push(i.orig);for(var o=0;o<a.length;o++)l.push(a[o].getScrollInfo().top);for(var c=0;c<r.length;c++)w(a,r[c],n);for(var o=0;o<a.length;o++)a[o].scrollTo(null,l[o])}}function w(e,t,i){for(var r=0,n=[],o=0;o<e.length;o++)if(null!=t[o]){var a=e[o].heightAtLine(t[o],"local");n[o]=a,r=Math.max(r,a)}for(var o=0;o<e.length;o++)if(null!=t[o]){var l=r-n[o];l>1&&i.push(b(e[o],t[o],l))}}function b(e,t,i){var r=!0;t>e.lastLine()&&(t--,r=!1);var n=document.createElement("div");return n.className="CodeMirror-merge-spacer",n.style.height=i+"px",n.style.minWidth="1px",e.addLineWidget(t,n,{height:i,above:r,mergeSpacer:!0,handleMouseEvents:!0})}function O(e,t,r,n,o){var a="left"==e.type,l=e.orig.heightAtLine(t.origFrom,"local",!0)-r;if(e.svg){var s=l,c=e.edit.heightAtLine(t.editFrom,"local",!0)-n;if(a){var f=s;s=c,c=f}var h=e.orig.heightAtLine(t.origTo,"local",!0)-r,g=e.edit.heightAtLine(t.editTo,"local",!0)-n;if(a){var f=h;h=g,g=f}var u=" C "+o/2+" "+c+" "+o/2+" "+s+" "+(o+2)+" "+s,d=" C "+o/2+" "+h+" "+o/2+" "+g+" -1 "+g;W(e.svg.appendChild(document.createElementNS(i,"path")),"d","M -1 "+c+u+" L "+(o+2)+" "+h+d+" z","class",e.classes.connect)}if(e.copyButtons){var p=e.copyButtons.appendChild(B("div","left"==e.type?"⇝":"⇜","CodeMirror-merge-copy")),v=e.mv.options.allowEditingOriginals;if(p.title=v?"Push to left":"Revert chunk",p.chunk=t,p.style.top=(t.origTo>t.origFrom?l:e.edit.heightAtLine(t.editFrom,"local")-n)+"px",v){var m=e.edit.heightAtLine(t.editFrom,"local")-n,k=e.copyButtons.appendChild(B("div","right"==e.type?"⇝":"⇜","CodeMirror-merge-copy-reverse"));k.title="Push to right",k.chunk={editFrom:t.origFrom,editTo:t.origTo,origFrom:t.editFrom,origTo:t.editTo},k.style.top=m+"px","right"==e.type?k.style.left="2px":k.style.right="2px"}}}function A(e,i,r,n){if(!e.diffOutOfDate){var o=n.origTo>r.lastLine()?t(n.origFrom-1):t(n.origFrom,0),a=t(n.origTo,0),l=n.editTo>i.lastLine()?t(n.editFrom-1):t(n.editFrom,0),s=t(n.editTo,0),c=e.mv.options.revertChunk;c?c(e.mv,r,o,a,i,l,s):i.replaceRange(r.getRange(o,a),l,s)}}var E=e.MergeView=function(t,i){if(!(this instanceof E))return new E(t,i);this.options=i;var r=i.origLeft,n=null==i.origRight?i.orig:i.origRight,o=null!=r,a=null!=n,s=1+(o?1:0)+(a?1:0),c=[],f=this.left=null,h=this.right=null,g=this;if(o){f=this.left=new l(this,"left");var u=B("div",null,"CodeMirror-merge-pane CodeMirror-merge-left");c.push(u),c.push(L(f))}var d=B("div",null,"CodeMirror-merge-pane CodeMirror-merge-editor");if(c.push(d),a){h=this.right=new l(this,"right"),c.push(L(h));var p=B("div",null,"CodeMirror-merge-pane CodeMirror-merge-right");c.push(p)}(a?p:d).className+=" CodeMirror-merge-pane-rightmost",c.push(B("div",null,null,"height: 0; clear: both;"));var v=this.wrap=t.appendChild(B("div",c,"CodeMirror-merge CodeMirror-merge-"+s+"pane"));this.edit=e(d,z(i)),f&&f.init(u,r,i),h&&h.init(p,n,i),i.collapseIdentical&&this.editor().operation(function(){!function(e,t){"number"!=typeof t&&(t=2);for(var i=[],r=e.editor(),n=r.firstLine(),o=n,a=r.lastLine();o<=a;o++)i.push(!0);e.left&&I(e.left,t,n,i),e.right&&I(e.right,t,n,i);for(var l=0;l<i.length;l++)if(i[l]){for(var s=l+n,c=1;l<i.length-1&&i[l+1];l++,c++);if(c>t){var f=[{line:s,cm:r}];e.left&&f.push({line:_(s,e.left.chunks),cm:e.left.orig}),e.right&&f.push({line:_(s,e.right.chunks),cm:e.right.orig});var h=V(c,f);e.options.onCollapse&&e.options.onCollapse(e,s,c,h)}}}(g,i.collapseIdentical)}),"align"==i.connect&&(this.aligners=[],y(this.left||this.right,!0)),f&&f.registerEvents(h),h&&h.registerEvents(f);var m=function(){f&&k(f),h&&k(h)};e.on(window,"resize",m);var C=setInterval(function(){for(var t=v.parentNode;t&&t!=document.body;t=t.parentNode);t||(clearInterval(C),e.off(window,"resize",m))},5e3)};function L(t){var r=t.lockButton=B("div",null,"CodeMirror-merge-scrolllock");r.title="Toggle locked scrolling";var n=B("div",[r],"CodeMirror-merge-scrolllock-wrap");e.on(r,"click",function(){g(t,!t.lockScroll)});var o=[n];if(!1!==t.mv.options.revertButtons&&(t.copyButtons=B("div",null,"CodeMirror-merge-copybuttons-"+t.type),e.on(t.copyButtons,"click",function(e){var i=e.target||e.srcElement;i.chunk&&("CodeMirror-merge-copy-reverse"!=i.className?A(t,t.edit,t.orig,i.chunk):A(t,t.orig,t.edit,i.chunk))}),o.unshift(t.copyButtons)),"align"!=t.mv.options.connect){var a=document.createElementNS&&document.createElementNS(i,"svg");a&&!a.createSVGRect&&(a=null),t.svg=a,a&&o.push(a)}return t.gap=B("div",o,"CodeMirror-merge-gap")}function S(e){return"string"==typeof e?e:e.getValue()}E.prototype={constructor:E,editor:function(){return this.edit},rightOriginal:function(){return this.right&&this.right.orig},leftOriginal:function(){return this.left&&this.left.orig},setShowDifferences:function(e){this.right&&this.right.setShowDifferences(e),this.left&&this.left.setShowDifferences(e)},rightChunks:function(){if(this.right)return s(this.right),this.right.chunks},leftChunks:function(){if(this.left)return s(this.left),this.left.chunks}};var D=new r;function M(e,t,i){for(var r=D.diff_main(e,t),n=0;n<r.length;++n){var o=r[n];(i?/[^ \t]/.test(o[1]):o[1])?n&&r[n-1][0]==o[0]&&(r.splice(n--,1),r[n][1]+=o[1]):r.splice(n--,1)}return r}function R(e){for(var i=[],r=0,n=0,l=t(0,0),s=t(0,0),c=0;c<e.length;++c){var f=e[c],h=f[0];if(h==a){var g=!F(e,c)||l.line<r||s.line<n?1:0,u=l.line+g,d=s.line+g;U(l,f[1],null,s);var p=x(e,c)?1:0,v=l.line+p,m=s.line+p;v>u&&(c&&i.push({origFrom:n,origTo:d,editFrom:r,editTo:u}),r=v,n=m)}else U(h==o?l:s,f[1])}return(r<=l.line||n<=s.line)&&i.push({origFrom:n,origTo:s.line+1,editFrom:r,editTo:l.line+1}),i}function x(e,t){if(t==e.length-1)return!0;var i=e[t+1][1];return!(1==i.length&&t<e.length-2||10!=i.charCodeAt(0))&&(t==e.length-2||((i=e[t+2][1]).length>1||t==e.length-3)&&10==i.charCodeAt(0))}function F(e,t){if(0==t)return!0;var i=e[t-1][1];return 10==i.charCodeAt(i.length-1)&&(1==t||10==(i=e[t-2][1]).charCodeAt(i.length-1))}function H(i,r,n){i.addLineClass(r,"wrap","CodeMirror-merge-collapsed-line");var o=document.createElement("span");o.className="CodeMirror-merge-collapsed-widget",o.title="Identical text collapsed. Click to expand.";var a=i.markText(t(r,0),t(n-1),{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:o,clearOnEnter:!0});function l(){a.clear(),i.removeLineClass(r,"wrap","CodeMirror-merge-collapsed-line")}return e.on(o,"click",l),{mark:a,clear:l}}function V(e,t){var i=[];function r(){for(var e=0;e<i.length;e++)i[e].clear()}for(var n=0;n<t.length;n++){var o=t[n],a=H(o.cm,o.line,o.line+e);i.push(a),a.mark.on("clear",r)}return i[0].mark}function I(e,t,i,r){for(var n=0;n<e.chunks.length;n++)for(var o=e.chunks[n],a=o.editFrom-t;a<o.editTo+t;a++){var l=a+i;l>=0&&l<r.length&&(r[l]=!1)}}function B(e,t,i,r){var n=document.createElement(e);if(i&&(n.className=i),r&&(n.style.cssText=r),"string"==typeof t)n.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)n.appendChild(t[o]);return n}function N(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild)}function W(e){for(var t=1;t<arguments.length;t+=2)e.setAttribute(arguments[t],arguments[t+1])}function z(e,t){for(var i in t||(t={}),e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function U(e,i,r,n){for(var o=r?t(e.line,e.ch):e,a=0;;){var l=i.indexOf("\n",a);if(-1==l)break;++o.line,n&&++n.line,a=l+1}return o.ch=(a?0:o.ch)+(i.length-a),n&&(n.ch=(a?0:n.ch)+(i.length-a)),o}var P=1,j=2,q=4;function J(e){this.cm=e,this.alignable=[],this.height=e.doc.height;var t=this;e.on("markerAdded",function(e,i){if(i.collapsed){var r=i.find(1);null!=r&&t.set(r.line,q)}}),e.on("markerCleared",function(e,i,r,n){null!=n&&i.collapsed&&t.check(n,q,t.hasMarker)}),e.on("markerChanged",this.signal.bind(this)),e.on("lineWidgetAdded",function(e,i,r){i.mergeSpacer||(i.above?t.set(r-1,j):t.set(r,P))}),e.on("lineWidgetCleared",function(e,i,r){i.mergeSpacer||(i.above?t.check(r-1,j,t.hasWidgetBelow):t.check(r,P,t.hasWidget))}),e.on("lineWidgetChanged",this.signal.bind(this)),e.on("change",function(e,i){var r=i.from.line,n=i.to.line-i.from.line,o=i.text.length-1,a=r+o;(n||o)&&t.map(r,n,o),t.check(a,q,t.hasMarker),(n||o)&&t.check(i.from.line,q,t.hasMarker)}),e.on("viewportChange",function(){t.cm.doc.height!=t.height&&t.signal()})}function G(e,t){return(e.line-t.line||e.ch-t.ch)<0?e:t}function K(e,t){return(e.line-t.line||e.ch-t.ch)>0?e:t}function Q(e,t){return e.line==t.line&&e.ch==t.ch}function X(e,t,i){for(var r=e.length-1;r>=0;r--){var n=e[r],o=(i?n.origTo:n.editTo)-1;if(o<t)return o}}function Y(e,t,i){for(var r=0;r<e.length;r++){var n=e[r],o=i?n.origFrom:n.editFrom;if(o>t)return o}}function Z(t,i){var r=null,n=t.state.diffViews,o=t.getCursor().line;if(n)for(var a=0;a<n.length;a++){var l=n[a],c=t==l.orig;s(l);var f=i<0?X(l.chunks,o,c):Y(l.chunks,o,c);null==f||null!=r&&!(i<0?f>r:f<r)||(r=f)}if(null==r)return e.Pass;t.setCursor(r,0)}J.prototype={signal:function(){e.signal(this,"realign"),this.height=this.cm.doc.height},set:function(e,t){for(var i=-1;i<this.alignable.length;i+=2){var r=this.alignable[i]-e;if(0==r){if((this.alignable[i+1]&t)==t)return;return this.alignable[i+1]|=t,void this.signal()}if(r>0)break}this.signal(),this.alignable.splice(i,0,e,t)},find:function(e){for(var t=0;t<this.alignable.length;t+=2)if(this.alignable[t]==e)return t;return-1},check:function(e,t,i){var r=this.find(e);if(-1!=r&&this.alignable[r+1]&t&&!i.call(this,e)){this.signal();var n=this.alignable[r+1]&~t;n?this.alignable[r+1]=n:this.alignable.splice(r,2)}},hasMarker:function(e){var t=this.cm.getLineHandle(e);if(t.markedSpans)for(var i=0;i<t.markedSpans.length;i++)if(t.markedSpans[i].mark.collapsed&&null!=t.markedSpans[i].to)return!0;return!1},hasWidget:function(e){var t=this.cm.getLineHandle(e);if(t.widgets)for(var i=0;i<t.widgets.length;i++)if(!t.widgets[i].above&&!t.widgets[i].mergeSpacer)return!0;return!1},hasWidgetBelow:function(e){if(e==this.cm.lastLine())return!1;var t=this.cm.getLineHandle(e+1);if(t.widgets)for(var i=0;i<t.widgets.length;i++)if(t.widgets[i].above&&!t.widgets[i].mergeSpacer)return!0;return!1},map:function(e,t,i){for(var r=i-t,n=e+t,o=-1,a=-1,l=0;l<this.alignable.length;l+=2){var s=this.alignable[l];s==e&&this.alignable[l+1]&j&&(o=l),s==n&&this.alignable[l+1]&j&&(a=l),s<=e||(s<n?this.alignable.splice(l--,2):this.alignable[l]+=r)}if(o>-1){var c=this.alignable[o+1];c==j?this.alignable.splice(o,2):this.alignable[o+1]=c&~j}a>-1&&i&&this.set(e+i,j)}},e.commands.goNextDiff=function(e){return Z(e,1)},e.commands.goPrevDiff=function(e){return Z(e,-1)}}(i(222))},1465:function(e,t,i){}}]);