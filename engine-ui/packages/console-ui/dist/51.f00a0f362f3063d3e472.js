(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{aYiL:function(e,t,n){"use strict";n.r(t);var l=n("Yz+Y"),r=n.n(l),a=n("iCc5"),i=n.n(a),o=n("V7oC"),u=n.n(o),s=n("FYw3"),c=n.n(s),h=n("mRg0"),d=n.n(h),p=n("sbe7"),g=n.n(p),E=(n("hJue"),n("YEIV")),m=n.n(E),f=(n("hkK3"),n("WydL")({mxImageBasePath:"public/rdos/mxgraph/images",mxBasePath:"public/rdos/mxgraph"})),v=f.mxGraph,C=f.mxShape,y=f.mxConnectionConstraint,w=f.mxPoint,b=f.mxPolyline,S=f.mxEvent,x=f.mxRubberband,L=f.mxCellState,k=f.mxConstants,T=f.mxEdgeStyle,I=f.mxPopupMenu,_=f.mxGraphHandler,D=f.mxCell,M=f.mxGeometry,O=f.mxPerimeter,R=f.mxUndoManager,N=f.mxUtils,A=f.mxDragSource,Y=91,P=17,G=8,V=65,H={width:120,height:60},U=function(e){function t(){var e,n,l,a;i()(this,t);for(var o=arguments.length,u=Array(o),s=0;s<o;s++)u[s]=arguments[s];return n=l=c()(this,(e=t.__proto__||r()(t)).call.apply(e,[this].concat(u))),l.insertItemVertex=function(e,t,n,l,r){var a=new D("new Cell",new M(0,0,H.width,H.height));a.vertex=!0;var i=e.importCells([a],l,r,n);null!=i&&i.length>0&&(e.scrollCellToVisible(i[0]),e.setSelectionCells(i))},l.getUnderMouseGraph=function(e){var t=S.getClientX(e),n=S.getClientY(e),r=document.elementFromPoint(t,n);return N.isAncestorNode(l.graph.container,r)?l.graph:null},a=n,c()(l,a)}return d()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.Container;this.initEditor(),this.loadEditor(e),this.listenKeyboard(),this.listenDoubleClick(),this.listenConnection(),this.undoManager()}},{key:"initEditor",value:function(){v.prototype.getAllConnectionConstraints=function(e,t){if(null!=e&&null!=e.shape)if(null!=e.shape.stencil){if(null!=e.shape.stencil)return e.shape.stencil.constraints}else if(null!=e.shape.constraints)return e.shape.constraints;return null},C.prototype.constraints=[new y(new w(.25,0),!0),new y(new w(.5,0),!0),new y(new w(.75,0),!0),new y(new w(0,.25),!0),new y(new w(0,.5),!0),new y(new w(0,.75),!0),new y(new w(1,.25),!0),new y(new w(1,.5),!0),new y(new w(1,.75),!0),new y(new w(.25,1),!0),new y(new w(.5,1),!0),new y(new w(.75,1),!0)],b.prototype.constraints=null}},{key:"loadEditor",value:function(e){S.disableContextMenu(e);var t=new v(e);this.graph=t,t.setConnectable(!0),t.setTooltips(!0),t.view.setScale(1),_.prototype.guidesEnabled=!0,t.isCellsMovable=function(e){return!((e=t.getSelectionCell())&&e.edge)};var n=this.getDefaultVertexStyle();t.getStylesheet().putDefaultVertexStyle(n);var l=this.getDefaultEdgeStyle();t.getStylesheet().putDefaultEdgeStyle(l),new x(t);var r=t.getDefaultParent(),a=t.getModel();a.beginUpdate();try{var i=t.insertVertex(r,null,"block1",20,20,H.width,H.height),o=t.insertVertex(r,null,"block2",200,150,H.width,H.height),u=t.insertVertex(r,null,"block3",300,150,H.width,H.height);t.insertEdge(r,null,"",i,u),t.insertEdge(r,null,"",o,u)}finally{a.endUpdate()}this.initContextMenu(t),this.initDragItem()}},{key:"getDefaultVertexStyle",value:function(){var e=[];return e[k.STYLE_SHAPE]=k.SHAPE_RECTANGLE,e[k.STYLE_PERIMETER]=O.RectanglePerimeter,e[k.STYLE_STROKECOLOR]="#fff",e[k.STYLE_ROUNDED]=!0,e[k.STYLE_FILLCOLOR]="#18a689",e[k.STYLE_FONTCOLOR]="#ffffff",e[k.STYLE_ALIGN]=k.ALIGN_CENTER,e[k.STYLE_VERTICAL_ALIGN]=k.ALIGN_MIDDLE,e[k.STYLE_FONTSIZE]="12",e[k.STYLE_FONTSTYLE]=1,e}},{key:"getDefaultEdgeStyle",value:function(){var e=[];return e[k.STYLE_SHAPE]=k.SHAPE_CONNECTOR,e[k.STYLE_STROKECOLOR]="#18a689",e[k.STYLE_ALIGN]=k.ALIGN_CENTER,e[k.STYLE_VERTICAL_ALIGN]=k.ALIGN_MIDDLE,e[k.STYLE_EDGE]=T.ElbowConnector,e[k.STYLE_ENDARROW]=k.ARROW_CLASSIC,e[k.STYLE_FONTSIZE]="10",e}},{key:"initContextMenu",value:function(e){var t=I.prototype.showMenu;I.prototype.showMenu=function(){var e=this.graph.getSelectionCells();if(!(e.length>0&&e[0].vertex))return!1;t.apply(this,arguments)},e.popupMenuHandler.autoExpand=!0,e.popupMenuHandler.factoryMethod=function(t,n,l){t.addItem("Item1",null,function(){alert("item 1")}),t.addItem("移除",null,function(){e.removeCells([n])}),t.addSeparator();var r=t.addItem("SubMen",null,null);t.addItem("Item2",null,function(){alert("item 1")},r)}}},{key:"initDragItem",value:function(){var e=this,t=document.createElement("div");t.style.border="1px solid blue",t.style.width=H.width+"px",t.style.height=H.height+"px";var n=N.makeDraggable(this.btn1,this.getUnderMouseGraph,this.insertItemVertex,t,null,null,this.graph.autoscroll,!0),l=N.makeDraggable(this.btn2,this.getUnderMouseGraph,this.insertItemVertex,t,null,null,this.graph.autoscroll,!0);n.isGuidesEnabled=function(){return e.graph.graphHandler.guidesEnabled},n.createDragElement=A.prototype.createDragElement,l.isGuidesEnabled=function(){return e.graph.graphHandler.guidesEnabled},l.createDragElement=A.prototype.createDragElement}},{key:"zoomIn",value:function(){this.graph.zoomIn()}},{key:"zoomOut",value:function(){this.graph.zoomOut()}},{key:"removeCell",value:function(e){var t=e||this.graph.getSelectionCells();t&&t.length>0&&this.graph.removeCells(t)}},{key:"insert",value:function(){var e=this.graph.getDefaultParent();this.graph.insertVertex(e,null,(new Date).getTime(),null,150,80,30)}},{key:"outputRoot",value:function(){this.graph.getDefaultParent()}},{key:"disableConnection",value:function(){this.graph.setConnectable(!1)}},{key:"resetView",value:function(){this.graph.view.scaleAndTranslate(1,0,0)}},{key:"listenDoubleClick",value:function(){this.graph.addListener(S.DOUBLE_CLICK,function(e,t){t.getProperty("cell")&&window.open("http://www.google.com")})}},{key:"listenConnection",value:function(){var e=this.graph;e.connectionHandler.createEdgeState=function(t){var n=e.createEdge(null,null,null,null,null);return new L(e.view,n,e.getCellStyle(n))},e.connectionHandler.addListener(S.CONNECT,function(t,n){var l=n.getProperty("cell"),r=e.getModel().getTerminal(l,!0),a=e.getModel().getTerminal(l,!1);r&&a||e.removeCells([l])}),e.connectionHandler.addListener(S.RESET,function(t,n){var l=n.getProperty("cell"),r=e.getModel().getTerminal(l,!0),a=e.getModel().getTerminal(l,!1);r&&a||e.removeCells([l])})}},{key:"listenKeyboard",value:function(){var e,t=this,n=(e={},m()(e,Y,!1),m()(e,V,!1),m()(e,P,!1),e);document.addEventListener("keydown",function(e){switch(e.keyCode){case G:t.removeCell();break;case Y:n[Y]=!0;break;case V:n[V]=!0;break;case P:n[P]=!0}(n[Y]&&n[V]||n[V]&&n[P])&&(t.graph.selectAll(),n[Y]=!1,n[V]=!1,n[P]=!1)})}},{key:"graphEnable",value:function(){var e=this.graph.isEnabled();this.graph.setEnabled(!e)}},{key:"undoManager",value:function(){var e=new R,t=this.graph;this.undoMana=e;var n=function(t,n){e.undoableEditHappened(n.getProperty("edit"))};t.getModel().addListener(S.UNDO,n),t.getView().addListener(S.UNDO,n)}},{key:"undo",value:function(){this.undoMana.undo()}},{key:"render",value:function(){var e=this;return g.a.createElement("div",{style:{height:"100%",width:"90%",marginLeft:"10%",position:"relative"}},g.a.createElement("div",{className:"editor",ref:function(t){e.Container=t}}),g.a.createElement("div",{style:{position:"absolute",zIndex:"2",right:"20px",top:"30px"}},g.a.createElement("button",{onClick:function(){return e.zoomIn()}},"放大"),g.a.createElement("button",{onClick:function(){return e.zoomOut()}},"缩小"),g.a.createElement("button",{onClick:function(){return e.resetView()}},"重置"),g.a.createElement("button",{onClick:function(){return e.insert()}},"添加"),g.a.createElement("button",{onClick:function(){return e.outputRoot()}},"Root节点"),g.a.createElement("button",{onClick:function(){return e.disableConnection()}},"禁止链接"),g.a.createElement("button",{onClick:function(){return e.currentState()}},"状态"),g.a.createElement("button",{onClick:function(){return e.graphEnable()}},"禁止编辑"),g.a.createElement("button",{onClick:function(){return e.undo()}},"撤销")),g.a.createElement("ul",{style:{position:"absolute",zIndex:"2",left:"-10%",top:"30px"}},g.a.createElement("li",null,g.a.createElement("button",{ref:function(t){return e.btn1=t},style:{padding:"10px"}},"Tool-1")),g.a.createElement("li",{style:{marginTop:"10px"}},g.a.createElement("button",{ref:function(t){return e.btn2=t},style:{padding:"10px"}},"Tool-2"))))}}]),t}(p.Component);n.d(t,"default",function(){return z});var z=function(e){function t(){var e,n,l,a;i()(this,t);for(var o=arguments.length,u=Array(o),s=0;s<o;s++)u[s]=arguments[s];return n=l=c()(this,(e=t.__proto__||r()(t)).call.apply(e,[this].concat(u))),l.onEditorChange=function(e){},a=n,c()(l,a)}return d()(t,e),u()(t,[{key:"render",value:function(){return g.a.createElement("div",{style:{height:"100%",width:"100%"}},g.a.createElement(U,null))}}]),t}(p.Component)},hkK3:function(e,t,n){}}]);