(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"/AHB":function(e,t,a){"use strict";a.r(t);var n=a("fvjX"),r=a("L3Ur"),i=a("Aqym"),o=a("LvDl"),l={userList:[]},s=a("6EK8"),c=a("+JEa"),u=Object(n.c)({routing:r.routerReducer,user:s.a,apps:c.b,app:c.a,consoleUser:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments[1];switch(t.type){case i.a.SET_USER_LIST:var a=t.data,n=Object(o.cloneDeep)(e);return n.userList=a,n;default:return e}}});t.default=u},"1ZXz":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=t.createLogger=t.defaults=void 0;var n,r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},i=a("MetC"),o=a("K17/"),l=a("BTjJ"),s=(n=l)&&n.__esModule?n:{default:n};function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r({},s.default,e),a=t.logger,n=t.stateTransformer,l=t.errorTransformer,c=t.predicate,u=t.logErrors,d=t.diffPredicate;if(void 0===a)return function(){return function(e){return function(t){return e(t)}}};if(e.getState&&e.dispatch)return function(){return function(e){return function(t){return e(t)}}};var p=[];return function(e){var a=e.getState;return function(e){return function(s){if("function"==typeof c&&!c(a,s))return e(s);var f={};p.push(f),f.started=o.timer.now(),f.startedTime=new Date,f.prevState=n(a()),f.action=s;var m=void 0;if(u)try{m=e(s)}catch(e){f.error=l(e)}else m=e(s);f.took=o.timer.now()-f.started,f.nextState=n(a());var h=t.diff&&"function"==typeof d?d(a,s):t.diff;if((0,i.printBuffer)(p,r({},t,{diff:h})),p.length=0,f.error)throw f.error;return m}}}}var u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.dispatch,a=e.getState;if("function"==typeof t||"function"==typeof a)return c()({dispatch:t,getState:a})};t.defaults=s.default,t.createLogger=c,t.logger=u,t.default=u},"2NsA":function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a("dtw8"),r=(a("1ZXz"),a("TdMD")),i=a.n(r),o=a("fvjX"),l=a("L3Ur");function s(e,t){var a=function(e){return Object(o.e)(e,Object(o.a)(i.a))}(e),r=t&&"hash"===t?n.g:n.f;return{store:a,history:Object(l.syncHistoryWithStore)(r,a)}}},"3J6H":function(e,t,a){},"6EK8":function(e,t,a){"use strict";a.d(t,"a",function(){return l});var n=a("QbLZ"),r=a.n(n),i=(a("LvDl"),a("CMun")),o={id:0,dtuicUserId:0,userName:"未登录",isRoot:!1};function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments[1];switch(t.type){case i.a.GET_USER:return t.data;case i.a.UPDATE_USER:return null!==t.data?r()({},e,t.data):e;default:return e}}},"95Qq":function(e,t,a){},Aqym:function(e,t,a){"use strict";var n=a("zbcj"),r=a.n(n)()(["SET_USER_LIST"],{prefix:"console/"});t.a=r},BTjJ:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={level:"log",logger:console,logErrors:!0,collapsed:void 0,predicate:void 0,duration:!1,timestamp:!0,stateTransformer:function(e){return e},actionTransformer:function(e){return e},errorTransformer:function(e){return e},colors:{title:function(){return"inherit"},prevState:function(){return"#9E9E9E"},action:function(){return"#03A9F4"},nextState:function(){return"#4CAF50"},error:function(){return"#F20404"}},diff:!1,diffPredicate:void 0,transformer:void 0},e.exports=t.default},EMQV:function(e,t,a){},FdzR:function(e,t,a){},"K17/":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=t.repeat=function(e,t){return new Array(t+1).join(e)},r=t.pad=function(e,t){return n("0",t-e.toString().length)+e};t.formatTime=function(e){return r(e.getHours(),2)+":"+r(e.getMinutes(),2)+":"+r(e.getSeconds(),2)+"."+r(e.getMilliseconds(),3)},t.timer="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance:Date},MetC:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.printBuffer=function(e,t){var a=t.logger,n=t.actionTransformer,r=t.titleFormatter,o=void 0===r?function(e){var t=e.timestamp,a=e.duration;return function(e,n,r){var i=["action"];return i.push("%c"+String(e.type)),t&&i.push("%c@ "+n),a&&i.push("%c(in "+r.toFixed(2)+" ms)"),i.join(" ")}}(t):r,c=t.collapsed,u=t.colors,d=t.level,p=t.diff,f=void 0===t.titleFormatter;e.forEach(function(r,m){var h=r.started,g=r.startedTime,v=r.action,y=r.prevState,E=r.error,b=r.took,k=r.nextState,C=e[m+1];C&&(k=C.prevState,b=C.started-h);var S=n(v),_="function"==typeof c?c(function(){return k},v,r):c,x=(0,i.formatTime)(g),T=u.title?"color: "+u.title(S)+";":"",U=["color: gray; font-weight: lighter;"];U.push(T),t.timestamp&&U.push("color: gray; font-weight: lighter;"),t.duration&&U.push("color: gray; font-weight: lighter;");var N=o(S,x,b);try{_?u.title&&f?a.groupCollapsed.apply(a,["%c "+N].concat(U)):a.groupCollapsed(N):u.title&&f?a.group.apply(a,["%c "+N].concat(U)):a.group(N)}catch(e){a.log(N)}var w=s(d,S,[y],"prevState"),D=s(d,S,[S],"action"),L=s(d,S,[E,y],"error"),P=s(d,S,[k],"nextState");w&&(u.prevState?a[w]("%c prev state","color: "+u.prevState(y)+"; font-weight: bold",y):a[w]("prev state",y)),D&&(u.action?a[D]("%c action    ","color: "+u.action(S)+"; font-weight: bold",S):a[D]("action    ",S)),E&&L&&(u.error?a[L]("%c error     ","color: "+u.error(E,y)+"; font-weight: bold;",E):a[L]("error     ",E)),P&&(u.nextState?a[P]("%c next state","color: "+u.nextState(k)+"; font-weight: bold",k):a[P]("next state",k)),p&&(0,l.default)(y,k,a,_);try{a.groupEnd()}catch(e){a.log("—— log end ——")}})};var r,i=a("K17/"),o=a("Zv7G"),l=(r=o)&&r.__esModule?r:{default:r};function s(e,t,a,r){switch(void 0===e?"undefined":n(e)){case"object":return"function"==typeof e[r]?e[r].apply(e,function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(a)):e[r];case"function":return e(t);default:return e}}},TmhF:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a("udPp");function r(e){return{type:n.a.UPDATE_APP,data:e}}},XoD3:function(e,t,a){},YHBf:function(e,t,a){"use strict";a.r(t);var n,r=a("sbe7"),i=a.n(r),o=a("i8i4"),l=a.n(o),s=a("0cfB"),c=a("2NsA"),u=a("Yz+Y"),d=a.n(u),p=a("iCc5"),f=a.n(p),m=a("V7oC"),h=a.n(m),g=a("FYw3"),v=a.n(g),y=a("mRg0"),E=a.n(y),b=a("dtw8"),k=a("/MKj"),C=(a("3J6H"),a("EMQV"),a("FdzR"),a("95Qq"),a("XoD3"),a("f7r7"),a("5012"),a("s9ml"),a("XLg0")),S=a("2BCK"),_=a("vFRS"),x=a("NX2S"),T=a("UopC"),U=a("X9CO"),N=a("dVc0"),w=a("2Ul7"),D=a("AVFO"),L=a("17x9"),P=a.n(L),O=a("7Qib"),A=a("QbLZ"),M=a.n(A),R=a("pLPX"),I=Object(k.b)(function(e){return{user:e.user,apps:e.apps,routing:e.routing,common:e.common,app:e.app}})(n=function(e){function t(e){f()(this,t);var a=v()(this,(t.__proto__||d()(t)).call(this,e));return a.state={},a}return E()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=(e.user,e.apps,"/console.html#/console"),a=[{id:"resourceManage",name:"资源管理",link:t+"/resourceManage",enable:!0},{id:"clusterManage",name:"多集群管理",link:t+"/clusterManage",enable:!0}],n=i.a.createElement("span",null,i.a.createElement("img",{style:{height:"20px",width:"20px",marginTop:"13px"},alt:"logo",src:"/public/console/img/logo.svg"}),i.a.createElement("span",{style:{fontSize:"14px",color:"#ffffff",position:"absolute",left:"80px",top:0}},"DTinsight.Console"));return i.a.createElement(R.c,M()({logoWidth:"170px",logo:n,menuItems:a},this.props))}}]),t}(r.Component))||n,j=a("4d7F"),F=a.n(j),H=(a("pjuD"),a("rR1Q")),q=a.n(H),B=a("gDS+"),V=a.n(B),z=(a("bZMm"),a("wFDc")),G=(a("tL+A"),a("QpBz")),Y=a.n(G),Z=a("OZjc");function Q(e){switch(e.status){case 402:case 200:return e;case 302:Y.a.info("登录超时, 请重新登录！");case 500:Y.a.error("服务器出现了点问题");default:return e}}function K(e){switch(e.code){case 1:return e;case 0:return te.openLogin(),F.a.reject(e);case 3:return q.a.error({message:"权限通知",description:e.message}),F.a.reject(e);case 16:hashHistory.push("/");default:return e.message&&Y.a.error(e.message,3),e}}var J=new(function(){function e(){f()(this,e)}return h()(e,[{key:"get",value:function(e,t){var a=t?this.build(e,t):e;return this.request(a,{method:"GET"})}},{key:"post",value:function(e,t){var a={method:"POST"};return t&&(a.body=V()(t)),this.request(e,a)}},{key:"postAsFormData",value:function(e,t){var a={method:"POST"};return t&&(a.body=this.buildFormData(t)),this.request(e,a)}},{key:"postForm",value:function(e,t){var a={method:"POST"};return t&&(a.body=new FormData(t)),this.request(e,a)}},{key:"request",value:function(e,t){return z.a.show(),t.credentials="same-origin",fetch(e,t).then(Q).then(function(e){return setTimeout(function(){z.a.hide()},300),e.json()}).then(K).catch(function(e){return z.a.hide(),q.a.error({message:"请求异常",description:"服务器可能出了点问题, 请稍后再试！"}),new F.a.reject(e)})}},{key:"defaultHeader",value:function(){return{Accept:"*/*","Content-Type":"application/json"}}},{key:"build",value:function(e,t){var a=[];if(t)for(var n in t)n&&a.push(n+"="+encodeURIComponent(t[n]));return e+"?"+a.join("&")}},{key:"buildFormData",value:function(e){if(e){var t=new FormData;for(var a in e)a&&t.append(a,e[a]);return t}}}]),e}()),X=a("PVY6"),W={DA_GET_USER_BY_ID:X.b+"/user/getUserById",DA_GET_USER_AUTH_BY_ID:X.b+"/user/getUserById",GET_USER_LIST:X.b+"/tenant/listTenant",GET_RESOURCE_USER_LIST:X.b+"/tenant/listByQueueId",BIND_USER_TO_RESOURCE:X.b+"/tenant/addToQueue",GET_RESOURCE_LIST:X.b+"/cluster/pageQueue",GET_CLUSTER_LIST:X.b+"/cluster/pageQuery",UPDATE_CLUSTER:X.a+"/upload/cluster/update",NEW_CLUSTER:X.a+"/upload/cluster/add",TEST_CLUSTER_CONNECT:X.b+"/cluster/testConnect",UPLOAD_CLUSTER_RESOURCE:X.a+"/upload/cluster/config",GET_CLUSTER:X.b+"/cluster/getOne"},$=APP_CONF.UIC_URL||"",ee=APP_CONF.UIC_DOMAIN||"",te={logout:function(){var e=this;J.post(W.APP_LOGOUT).then(function(t){1===t.code&&e.openLogin()})},openLogin:function(){Z.a.clear(),O.a.deleteCookie("dt_user_id",ee,"/"),O.a.deleteCookie("dt_token",ee,"/"),O.a.deleteCookie("dt_tenant_id",ee,"/"),O.a.deleteCookie("dt_tenant_name",ee,"/"),O.a.deleteCookie("dt_username",ee,"/"),O.a.deleteCookie("dt_is_tenant_admin",ee,"/"),O.a.deleteCookie("dt_is_tenant_creator",ee,"/"),O.a.deleteCookie("project_id",ee,"/"),window.location.href=$+"/#/login"},getLoginedUser:function(){return J.post(W.DA_GET_USER_BY_ID)},getUserList:function(){return J.post(W.DATA_API_GET_USER_LIST)}},ae=a("zbcj");a.n(ae)()(["GET_USER","UPDATE_USER","GET_NOT_PROJECT_USERS","GET_PROJECT_USERS","GET_USER_LIST"],{prefix:"user/"});var ne,re=a("TmhF"),ie={children:P.a.node},oe=Object(k.b)(function(e){return{common:e.common}})(ne=function(e){function t(){return f()(this,t),v()(this,(t.__proto__||d()(t)).apply(this,arguments))}return E()(t,e),h()(t,[{key:"componentWillMount",value:function(){this.props.dispatch}},{key:"componentDidMount",value:function(){(0,this.props.dispatch)(Object(re.a)(X.h))}},{key:"render",value:function(){var e=this.props.children,t=i.a.createElement(I,null);return i.a.createElement("div",{className:"main"},t,i.a.createElement("div",{className:"container overflow-x-hidden"},e||"加载中...."))}}]),t}(r.Component))||ne;oe.propTypes=ie,oe.defaultProps={children:[]};var le,se=oe,ce=(a("zmYW"),a("DtFj")),ue=a.n(ce),de=(a("mN36"),a("N9UN")),pe=a.n(de),fe=(a("ek7I"),a("FAat")),me=a.n(fe),he=a("wd/R"),ge=a.n(he),ve={getResourceList:function(e){return J.post(W.GET_RESOURCE_LIST,e)},getClusterList:function(e){return J.post(W.GET_CLUSTER_LIST,e)},uploadClusterResource:function(e){return J.postAsFormData(W.UPLOAD_CLUSTER_RESOURCE,e)},getTenantList:function(e){return J.post(W.GET_USER_LIST,e)},testCluster:function(e){return J.post(W.TEST_CLUSTER_CONNECT,e)},createCluster:function(e){return J.postAsFormData(W.NEW_CLUSTER,e)},bindUserToQuere:function(e){return J.post(W.BIND_USER_TO_RESOURCE,e)},getClusterInfo:function(e){return J.post(W.GET_CLUSTER,e)},updateCluster:function(e){return J.postAsFormData(W.UPDATE_CLUSTER,e)}},ye=(a("fwXI"),a("CC+v")),Ee=a.n(ye),be=(a("nTym"),a("qu0K")),ke=a.n(be),Ce=a("GQeE"),Se=a.n(Ce),_e=a("oF3Q"),xe=a.n(_e),Te=a("YEIV"),Ue=a.n(Te),Ne=a("LvDl"),we={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},De=a("Aqym");function Le(){return function(e){ve.getTenantList({pageSize:9999,currentPage:1}).then(function(t){if(1===t.code)return e({type:De.a.SET_USER_LIST,data:t.data.data})})}}var Pe=me.a.Option;var Oe,Ae=Object(k.b)(function(e){return{consoleUser:e.consoleUser}},function(e){return{getTenantList:function(){e(Le())}}})(le=function(e){function t(){var e,a,n,r;f()(this,t);for(var i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];return a=n=v()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(o))),n.state={loading:!1,selectUserMap:{},selectUser:"",selectHack:!1},r=a,v()(n,r)}return E()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this.props.resource;this.setState({selectUserMap:this.exchangeSelectMap(e.tenants)})}},{key:"componentWillReceiveProps",value:function(e){var t=e.resource,a=e.visible,n=this.props;n.resource;n.visible!=a&&a&&(this.setState({selectUserMap:this.exchangeSelectMap(t.tenants),loading:!1}),this.resetValueByHack(),this.props.getTenantList())}},{key:"exchangeSelectMap",value:function(){var e={};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(function(t){e[t.tenantId]={tenantName:t.tenantName}}),e}},{key:"changeUserValue",value:function(e){this.setState({selectUser:e})}},{key:"selectUser",value:function(e,t){var a=this.state.selectUserMap;this.setState({selectUser:"",selectUserMap:M()({},a,Ue()({},t.props.tenantid,{tenantName:t.props.children}))})}},{key:"removeUser",value:function(e){var t=this.state.selectUserMap;delete(t=Object(Ne.cloneDeep)(t))[e],this.setState({selectUserMap:t})}},{key:"getUserOptions",value:function(){var e=[],t=this.state.selectUserMap,a=this.props,n=a.consoleUser,r=a.resource,o=n.userList,l=r.tenants||[];o=Object(Ne.uniq)(o.concat(l),"tenantId");for(var s=0;s<o.length;s++){var c=o[s];t[c.tenantId]||e.push(i.a.createElement(Pe,{tenantid:c.tenantId,value:c.tenantName},c.tenantName))}return e}},{key:"initColumns",value:function(){return[{title:"租户名称",dataIndex:"name",className:"text-middle",render:function(e){return i.a.createElement("span",{className:"text-middle"},e)}}]}},{key:"getTableDataSource",value:function(){var e=this.state.selectUserMap;return xe()(e).map(function(e){return{id:e[0],name:e[1].tenantName}})}},{key:"getTenantsList",value:function(){var e=this.state.selectUserMap;return Se()(e)}},{key:"changeResource",value:function(){var e=this;this.setState({loading:!0});var t=this.props.resource;ve.bindUserToQuere({queueId:t.queueId,tenants:this.getTenantsList()}).then(function(t){e.setState({loading:!1}),1==t.code&&(Y.a.success("修改成功"),e.props.resourceUserChange())})}},{key:"onCancel",value:function(){this.props.onCancel()}},{key:"resetValueByHack",value:function(){var e=this;this.setState({selectHack:!0},function(){e.setState({selectHack:!1,selectUser:""})})}},{key:"render",value:function(){var e=this.state,t=e.selectUser,a=e.loading,n=e.selectHack,r=this.props,o=r.visible,l=r.resource,s=this.initColumns(),c=l.queueName;return i.a.createElement("div",{className:"contentBox"},i.a.createElement(Ee.a,{title:"修改 ("+c+")",visible:o,onCancel:this.onCancel.bind(this),onOk:this.changeResource.bind(this),confirmLoading:a,maskClosable:!1,className:"m-card"},i.a.createElement(ke.a.Item,M()({label:"绑定租户"},we),!n&&i.a.createElement(me.a,{mode:"combobox",style:{width:"100%"},placeholder:"请选择租户",onSelect:this.selectUser.bind(this),onSearch:this.changeUserValue.bind(this),value:t},this.getUserOptions())),i.a.createElement(ue.a,{className:"m-table",style:{margin:"0px 20px",marginTop:"30px"},columns:s,pagination:!1,dataSource:this.getTableDataSource(),scroll:{y:300}})))}}]),t}(i.a.Component))||le,Me=me.a.Option,Re=function(e){function t(){var e,a,n,r;f()(this,t);for(var i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];return a=n=v()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(o))),n.state={resource:{},dataSource:[],table:{pageIndex:1,total:0,loading:!0},changeModalVisible:!1},r=a,v()(n,r)}return E()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.getResourceList()}},{key:"getResourceList",value:function(){var e=this,t=this.state.table,a=t.pageIndex;ve.getResourceList({currentPage:a,pageSize:10}).then(function(a){1==a.code?e.setState({dataSource:e.exchangeDataSource(a.data.data),table:M()({},t,{loading:!1,total:a.data.totalCount})}):e.setState({table:M()({},t,{loading:!1})})})}},{key:"getPagination",value:function(){var e=this.state.table;return{current:e.pageIndex,pageSize:10,total:e.total}}},{key:"exchangeDataSource",value:function(e){for(var t=[],a=0;a<e.length;a++){var n=e[a];t.push(M()({},n,{type:"cluster",className:null,clusterId:n.id,children:r(n.queues,0)}))}function r(e,t){var a=[];if(!e)return null;for(var n=0;n<e.length;n++){var i=e[n];a.push(M()({},i,{queueId:i.id,deepLength:t,className:"table-row-color_level"+(t+1),children:r(i.childQueues,t+1)}))}return a.length>0?a:null}return t}},{key:"initTableColumns",value:function(){var e=this;return[{title:"集群名称",dataIndex:"clusterName",width:"200px"},{title:"资源队列",dataIndex:"queueName",width:"200px",render:function(e,t){return"cluster"==t.type?null:("STOPPED"==t.queueState&&(e+="(已停用)"),i.a.createElement("span",{style:{paddingLeft:10*t.deepLength+"px"}},e))}},{title:"最小容量（%）",dataIndex:"capacity",width:"120px",render:function(e,t){return"cluster"==t.type?null:100*e}},{title:"最大容量（%）",dataIndex:"maxCapacity",width:"120px",render:function(e,t){return"cluster"==t.type?null:100*e}},{title:"绑定租户",dataIndex:"tenants",render:function(e,t){return e?e.map(function(e){return e.tenantName}).join("，")||"无":null}},{title:"修改时间",dataIndex:"gmtModified",width:"200px",render:function(e){return new ge.a(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"操作",dataIndex:"deal",render:function(t,a){return"STOPPED"!=a.queueState&&a.tenants?i.a.createElement("a",{onClick:e.changeResource.bind(e,a)},"修改"):null},width:"80px"}]}},{key:"changeResource",value:function(e){this.setState({resource:e,changeModalVisible:!0})}},{key:"changeUserValue",value:function(e){this.setState({selectUser:e})}},{key:"selectUser",value:function(e){var t=this.state.selectUserList;this.setState({selectUser:"",selectUserList:t.concat(e)})}},{key:"closeModal",value:function(){this.setState({changeModalVisible:!1})}},{key:"resourceUserChange",value:function(){this.setState({changeModalVisible:!1}),this.getResourceList()}},{key:"getUserOptions",value:function(){for(var e=this.state,t=e.userList,a=e.selectUserList,n=[],r=0;r<t.length;r++){var o=t[r];-1==a.indexOf(o.id)&&n.push(i.a.createElement(Me,{value:o.id},o.name))}return n}},{key:"render",value:function(){var e=this.state,t=e.dataSource,a=e.table,n=e.changeModalVisible,r=e.resource,o=a.loading,l=this.initTableColumns();return i.a.createElement("div",{className:"contentBox"},i.a.createElement(pe.a,{style:{width:"900px",color:"rgba(1,1,1,0.84)"},noHovering:!0},i.a.createElement("h2",null,"什么是资源管理"),i.a.createElement("p",{style:{marginTop:"20px"}},"资源管理是以租户为单位进行计算资源的分配，当您需要多个租户，并且每个租户分配不同比例的资源容量时需要使用本功能，例如：您的集群有10个节点，每个节点的配置为8核16GB内存，总资源为80核160GB内存，那么您可以新建“销售”和“开发”2个租户，为销售租户分配30%的资源容量，为开发租户分配70%的资源容量。"),i.a.createElement("p",{style:{marginTop:"20px"}},"注意:"),i.a.createElement("ul",null,i.a.createElement("li",null,"1、“资源队列”仅包括集群的内存和CPU；"),i.a.createElement("li",null,"2、只支持将资源队列绑定到租户，暂时不支持绑定到项目；"),i.a.createElement("li",null,"3、每个资源队列的最小容量之和等于100%；"),i.a.createElement("li",null,"4、以资源队列的形式分配资源，资源队列的维护在配置文件中，本模块只是将资源队列绑定到租户；"),i.a.createElement("li",null,"5、可能已有的任务占用了较多的资源，导致更新配置后不会立即生效，需要等待已占用的资源释放；"))),i.a.createElement(ue.a,{rowClassName:function(e,t){return e.className},rowKey:function(e){return e.clusterId+"~"+e.queueId},style:{marginTop:"20px"},className:"m-table no-card-table",pagination:this.getPagination(),loading:o,dataSource:t,columns:l}),i.a.createElement(Ae,{visible:n,onCancel:this.closeModal.bind(this),resourceUserChange:this.resourceUserChange.bind(this),resource:r}))}}]),t}(i.a.Component),Ie=(a("MaXC"),a("4IMT")),je=a.n(Ie),Fe=function(e){function t(){var e,a,n,r;f()(this,t);for(var i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];return a=n=v()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(o))),n.state={dataSource:[],table:{pageIndex:1,total:0,loading:!0}},r=a,v()(n,r)}return E()(t,e),h()(t,[{key:"componentDidMount",value:function(){this.getResourceList()}},{key:"getResourceList",value:function(){var e=this,t=this.state.table,a=t.pageIndex;ve.getClusterList({currentPage:a,pageSize:10}).then(function(a){1==a.code?e.setState({dataSource:a.data.data,table:M()({},t,{loading:!1,total:a.data.totalCount})}):e.setState({table:M()({},t,{loading:!1})})})}},{key:"getPagination",value:function(){var e=this.state.table;return{current:e.pageIndex,pageSize:10,total:e.total}}},{key:"initTableColumns",value:function(){var e=this;return[{title:"集群名称",dataIndex:"clusterName"},{title:"节点数量",dataIndex:"totalNode"},{title:"总资源数",dataIndex:"totalCore",width:"200px",render:function(e,t){var a=t.totalMemory/1024,n=Math.floor(a)!=a;return t.totalCore+"VCore "+(n?a.toFixed(2):a)+"GB"}},{title:"修改时间",dataIndex:"gmtModified",width:"200px",render:function(e){return new ge.a(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"操作",dataIndex:"deal",render:function(t,a){return i.a.createElement("div",null,i.a.createElement("a",{onClick:e.editCluster.bind(e,a)},"修改"),i.a.createElement("span",{className:"ant-divider"}),i.a.createElement("a",{onClick:e.viewCluster.bind(e,a)},"查看"))}}]}},{key:"editCluster",value:function(e){b.g.push({pathname:"/console/clusterManage/editCluster",state:{cluster:e,mode:"edit"}})}},{key:"viewCluster",value:function(e){b.g.push({pathname:"/console/clusterManage/editCluster",state:{cluster:e,mode:"view"}})}},{key:"newCluster",value:function(){b.g.push({pathname:"/console/clusterManage/editCluster"})}},{key:"render",value:function(){var e=this.state,t=e.dataSource,a=e.table.loading,n=this.initTableColumns(),r=i.a.createElement("div",null,"多集群管理 ",i.a.createElement(je.a,{type:"primary",onClick:this.newCluster,style:{float:"right",marginTop:"9px"}},"新增集群"));return i.a.createElement("div",{className:"contentBox m-card"},i.a.createElement(pe.a,{noHovering:!0,title:r},i.a.createElement(ue.a,{rowKey:function(e){return e.id},className:"m-table",pagination:this.getPagination(),loading:a,dataSource:t,columns:n})))}}]),t}(i.a.Component),He=(a("FGdI"),a("Pbn2")),qe=a.n(He),Be=(a("93XW"),a("d1El")),Ve=a.n(Be),ze=(a("hr7U"),a("9xET")),Ge=a.n(ze),Ye=(a("fv9D"),a("ZPTe")),Ze=a.n(Ye),Qe=a("m1cH"),Ke=a.n(Qe),Je=(a("PAYn"),a("EQeY")),Xe=a.n(Je),We=a("sk9p"),$e=a.n(We),et=(a("cUip"),a("iJl9")),tt=a.n(et),at=a("ER3F"),nt=ke.a.Item,rt=(tt.a.TextArea,me.a.Option),it={NOTHING:0,SUCCESS:1,FAIL:2};function ot(){return(new Date).getTime()+""+~~(1e5*Math.random())}var lt,st,ct,ut,dt,pt=Object(k.b)(function(e){return{consoleUser:e.consoleUser}},function(e){return{getTenantList:function(){e(Le())}}})(Oe=function(e){function t(){var e,a,n,r;f()(this,t);for(var i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];return a=n=v()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(o))),n.state={selectUserMap:{},selectUser:"",file:"",zipConfig:"",uploadLoading:!1,testLoading:!1,testStatus:it.NOTHING,flink_params:[],spark_params:[],core:null,nodeNumber:null,memory:null,extDefaultValue:{},fileHaveChange:!1},r=a,v()(n,r)}return E()(t,e),h()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,a=t.location,n=t.form,r=a.state||{};"edit"!=r.mode&&"view"!=r.mode||ve.getClusterInfo({clusterId:r.cluster.id}).then(function(t){if(1==t.code){var a=t.data,r=a.clusterConf;r=JSON.parse(r);var i=e.exchangeServerParams(r);e.setState({core:a.totalCore,memory:a.totalMemory,nodeNumber:a.totalNode,zipConfig:V()({yarnConf:r.yarnConf,hadoopConf:r.hadoopConf,hiveMeta:r.hiveMeta}),flink_params:i.flinkKeys,spark_params:i.sparkKeys,extDefaultValue:i.default}),n.setFieldsValue({clusterName:a.clusterName,hiveConf:r.hiveConf,sparkConf:r.sparkConf,flinkConf:r.flinkConf})}})}},{key:"exchangeServerParams",value:function(e){var t={flinkKeys:[],sparkKeys:[],default:{}},a=e.sparkConf,n=e.flinkConf;function r(e,a,n,r){xe()(e).map(function(e){var n=$e()(e,2),i=n[0],o=n[1];if(!a.includes(i)){var l=ot();r.push({id:l}),t.default[l]={name:i,value:o}}})}return r(a,["typeName","sparkYarnArchive","sparkSqlProxyPath","sparkPythonExtLibPath"],0,t.sparkKeys),r(n,["typeName","flinkZkAddress","flinkHighAvailabilityStorageDir","flinkZkNamespace","jarTmpDir","flinkPluginRoot","remotePluginRootDir","clusterMode"],0,t.flinkKeys),t}},{key:"getUserOptions",value:function(){for(var e=this.props.consoleUser,t=this.state.selectUserMap,a=e.userList,n=[],r=0;r<a.length;r++){var o=a[r];t[o.tenantId]||n.push(i.a.createElement(rt,{value:o.tenantId+"$$"+o.tenantName},o.tenantName))}return n}},{key:"changeUserValue",value:function(e){this.setState({selectUser:e})}},{key:"selectUser",value:function(e,t){var a=this.state.selectUserMap;this.setState({selectUser:"",selectUserMap:M()({},a,Ue()({},e.split("$$")[0],{name:t.props.children}))})}},{key:"getTableDataSource",value:function(){var e=this.state.selectUserMap;return xe()(e).map(function(e){return{id:e[0],name:e[1].name}})}},{key:"removeUser",value:function(e){var t=this.state.selectUserMap;delete(t=Object(Ne.cloneDeep)(t))[e],this.setState({selectUserMap:t})}},{key:"initColumns",value:function(){var e=this;return[{title:"租户名称",dataIndex:"name",width:"150px"},{title:"操作",dataIndex:"deal",render:function(t,a){return i.a.createElement("a",{onClick:e.removeUser.bind(e,a.id)},"删除")}}]}},{key:"validateFileType",value:function(e,t,a){t&&!/\.(zip)$/.test(t.toLocaleLowerCase())&&a("配置文件只能是zip文件!"),a()}},{key:"fileChange",value:function(e){var t=this,a=e.target;this.setState({file:{},uploadLoading:!0,zipConfig:"",fileHaveChange:!0}),ve.uploadClusterResource({config:a.files[0]}).then(function(e){1==e.code?t.setState({uploadLoading:!1,file:a,zipConfig:e.data}):(t.props.form.setFieldsValue({file:null}),t.setState({uploadLoading:!1}))})}},{key:"renderTestResult",value:function(){switch(this.state.testStatus){case it.NOTHING:return null;case it.SUCCESS:return i.a.createElement(Xe.a,{color:"#87d068"},"连通成功");case it.FAIL:return i.a.createElement("span",null,i.a.createElement(Xe.a,{color:"red"},"连通失败"))}}},{key:"addParam",value:function(e){var t=this.state,a=t.flink_params,n=t.spark_params;"flink"==e?this.setState({flink_params:[].concat(Ke()(a),[{id:ot()}])}):this.setState({spark_params:[].concat(Ke()(n),[{id:ot()}])})}},{key:"deleteParam",value:function(e,t){var a=this.state,n=a.flink_params,r=a.spark_params,i=void 0,o=void 0;"flink"==t?(o="flink_params",i=n):(o="spark_params",i=r),i=i.filter(function(t){return t.id!=e}),this.setState(Ue()({},o,i))}},{key:"renderExtraParam",value:function(e){var t=this,a=this.state,n=a.flink_params,r=a.spark_params,o=a.extDefaultValue,l=this.props.form.getFieldDecorator,s="view"==(this.props.location.state||{}).mode;return("flink"==e?n:r).map(function(a){return i.a.createElement(Ge.a,{key:a.id},i.a.createElement(Ze.a,{span:we.labelCol.sm.span},i.a.createElement(nt,{key:a.id+"-name"},l(e+"%"+a.id+"-name",{rules:[{required:!0,message:"请输入参数属性名"}],initialValue:o[a.id]&&o[a.id].name})(i.a.createElement(tt.a,{disabled:s,style:{width:"calc(100% - 12px)"}})),":")),i.a.createElement(Ze.a,{span:we.wrapperCol.sm.span},i.a.createElement(nt,{key:a.id+"-value"},l(e+"%"+a.id+"-value",{rules:[{required:!0,message:"请输入参数属性值"}],initialValue:o[a.id]&&o[a.id].value})(i.a.createElement(tt.a,{disabled:s})))),s?null:i.a.createElement("a",{className:"formItem-right-text",onClick:t.deleteParam.bind(t,a.id,e)},"删除"))})}},{key:"renderZipConfig",value:function(e){var t=this.state.zipConfig;t=JSON.parse(t);var a=void 0;return"hdfs"==e?(a=xe()(t.hadoopConf),O.a.sortByCompareFunctions(a,function(e,t){var a=$e()(e,2),n=a[0],r=(a[1],$e()(t,2)),i=r[0];r[1];return"fs.defaultFS"==n?-1:"fs.defaultFS"==i?1:0},function(e,t){var a=$e()(e,2),n=a[0],r=(a[1],$e()(t,2)),i=r[0];r[1];return"dfs.nameservices"==n?-1:"dfs.nameservices"==i?1:0},function(e,t){var a=$e()(e,2),n=a[0],r=(a[1],$e()(t,2)),i=r[0];r[1];return n.indexOf("dfs.ha.namenodes")>-1?-1:i.indexOf("dfs.ha.namenodes")>-1?1:0},function(e,t){var a=$e()(e,2),n=a[0],r=(a[1],$e()(t,2)),i=r[0],o=(r[1],n.indexOf("dfs.namenode.rpc-address")>-1),l=i.indexOf("dfs.namenode.rpc-address")>-1;return o&&l?n>i?1:-1:o?-1:l?1:0})):(a=xe()(t.yarnConf),O.a.sortByCompareFunctions(a,function(e,t){var a=$e()(e,2),n=a[0],r=(a[1],$e()(t,2)),i=r[0];r[1];return"yarn.resourcemanager.ha.rm-ids"==n?-1:"yarn.resourcemanager.ha.rm-ids"==i?1:0},function(e,t){var a=$e()(e,2),n=a[0],r=(a[1],$e()(t,2)),i=r[0],o=(r[1],n.indexOf("yarn.resourcemanager.address")>-1),l=i.indexOf("yarn.resourcemanager.address")>-1;return o&&l?n>i?1:-1:o?-1:l?1:0},function(e,t){var a=$e()(e,2),n=a[0],r=(a[1],$e()(t,2)),i=r[0],o=(r[1],n.indexOf("yarn.resourcemanager.webapp.address")>-1),l=i.indexOf("yarn.resourcemanager.webapp.address")>-1;return o&&l?n>i?1:-1:o?-1:l?1:0})),a.map(function(e){var t=$e()(e,2),a=t[0],n=t[1];return i.a.createElement(Ge.a,{className:"zipConfig-item"},i.a.createElement(Ze.a,{className:"formitem-textname",span:we.labelCol.sm.span+4},a.length>40?i.a.createElement(Ve.a,{title:a},a.substr(0,40)+"..."):a,"："),i.a.createElement(Ze.a,{className:"formitem-textvalue",span:we.wrapperCol.sm.span-1},n))})}},{key:"exchangeMemory",value:function(e){if(!e)return"--";var t=e/1024;return(Math.floor(t)!=t?t.toFixed(2):t)+"GB"}},{key:"save",value:function(){var e=this,t=(this.props.location.state||{}).mode;this.props.form.validateFieldsAndScroll(null,{},function(a,n){if(!a){var r="createCluster";"edit"==t&&(r="updateCluster"),ve[r](e.getServerParams(n,!0)).then(function(t){1==t.code&&(Y.a.success("保存成功"),e.props.router.goBack())})}})}},{key:"test",value:function(){var e=this;this.props.form.validateFieldsAndScroll(null,{},function(t,a){t||(e.setState({testLoading:!0}),ve.testCluster(e.getServerParams(a)).then(function(t){1==t.code?(e.setState({testLoading:!1,testStatus:it.SUCCESS,nodeNumber:t.data.totalNode,core:t.data.totalCores,memory:t.data.totalMemory}),Y.a.success("连通成功")):e.setState({testLoading:!1,testStatus:it.FAIL})}))})}},{key:"getServerParams",value:function(e,t){var a=this.props.location.state||{},n=a.mode,r=a.cluster,i=this.getClusterConf(e),o={clusterName:e.clusterName,clusterConf:V()(i)};if(t){var l=this.state.file;l&&(o.config=l.files[0])}return"edit"==n&&(o.id=r.id),o}},{key:"getClusterConf",value:function(e){var t=this.state.zipConfig;t=JSON.parse(t);var a={},n=this.getCustomParams(e,"spark"),r=this.getCustomParams(e,"flink");return a.hadoopConf=t.hadoopConf,a.yarnConf=t.yarnConf,a.hiveMeta=t.hiveMeta,a.hiveConf=e.hiveConf,a.sparkConf=M()({},e.sparkConf,n),a.flinkConf=M()({},e.flinkConf,r),a.hiveConf.username=a.hiveConf.username||"",a.hiveConf.password=a.hiveConf.password||"",a}},{key:"getCustomParams",value:function(e,t){var a={},n={};for(var r in e)if(r.startsWith(t+"%")){var i=r.split("%")[1].split("-"),o=i[0],l=i[1];n[o]||(n[o]={}),n[o][l]=e[r]}for(var s in n){var c=n[s];a[c.name]=c.value}return a}},{key:"render",value:function(){var e=this.state,t=(e.selectUser,e.file),a=e.zipConfig,n=e.uploadLoading,r=e.core,o=e.nodeNumber,l=e.memory,s=e.testLoading,c=e.fileHaveChange,u=this.props.form,d=u.getFieldDecorator,p=(u.getFieldValue,(this.props.location.state||{}).mode),f="view"==p,m=!("view"==p||"edit"==p);this.initColumns();return i.a.createElement("div",{className:"contentBox"},i.a.createElement("p",{className:"box-title",style:{height:"auto",paddingLeft:"20px"}},i.a.createElement(at.a,{size:"default",type:"textButton"})),i.a.createElement(pe.a,{noHovering:!0,className:"contentBox shadow"},i.a.createElement("p",{className:"config-title"},"集群信息"),i.a.createElement("div",{className:"config-content",style:{width:"680px"}},i.a.createElement(nt,M()({label:"集群标识"},we),d("clusterName",{rules:[{required:!0,message:"请输入集群标识"},{pattern:/^[a-z0-9_]{1,64}$/i,message:"集群标识不能超过64字符，支持英文、数字、下划线"}]})(i.a.createElement(tt.a,{disabled:!m,placeholder:"请输入集群标识",style:{width:"40%"}})),i.a.createElement("span",{style:{marginLeft:"30px"}},"节点数：",o||"--"," "),i.a.createElement("span",{style:{marginLeft:"10px"}},"资源数：",r||"--","VCore ",this.exchangeMemory(l)," "))),f?null:i.a.createElement("div",null,i.a.createElement("p",{className:"config-title"},"上传配置文件"),i.a.createElement("div",{className:"config-content",style:{width:"750px"}},i.a.createElement("p",{style:{marginBottom:"24px"}},"您需要获取Hadoop、Spark、Flink集群的配置文件，至少包括：",i.a.createElement("strong",null,"core-site.xml、hdfs-site.xml、hive-site.xml、yarn-site.xml"),"文件"),i.a.createElement(nt,M()({label:"配置文件"},we),d("file",{rules:[{required:!(!c&&"edit"==p),message:"请选择上传文件"},{validator:this.validateFileType}]})(i.a.createElement("div",null,n?i.a.createElement("label",{style:{lineHeight:"28px"},className:"ant-btn disble"},"选择文件"):i.a.createElement("label",{style:{lineHeight:"28px"},className:"ant-btn",htmlFor:"myOfflinFile"},"选择文件"),n?i.a.createElement(qe.a,{className:"blue-loading",type:"loading"}):null,i.a.createElement("span",null," ",t.files&&t.files[0].name),i.a.createElement("input",{name:"file",type:"file",id:"myOfflinFile",onChange:this.fileChange.bind(this),accept:".zip",style:{display:"none"}}))),i.a.createElement("span",null,"支持扩展名：.zip")),"如何获取这些配置文件？请您参考",i.a.createElement("a",null,"《帮助文档》"))),a?i.a.createElement("div",null,i.a.createElement("p",{className:"config-title"},"HDFS"),i.a.createElement("div",{className:"config-content",style:{width:"800px"}},this.renderZipConfig("hdfs")),i.a.createElement("p",{className:"config-title"},"YARN"),i.a.createElement("div",{className:"config-content",style:{width:"800px"}},this.renderZipConfig("yarn"))):null,i.a.createElement("p",{className:"config-title"},"Hive JDBC信息"),i.a.createElement("div",{className:"config-content",style:{width:"680px"}},i.a.createElement(nt,M()({label:"JDBC URL"},we),d("hiveConf.jdbcUrl",{rules:[{required:!0,message:"请输入jdbcUrl"}]})(i.a.createElement(tt.a,{disabled:f}))),i.a.createElement(nt,M()({label:"用户名"},we),d("hiveConf.username")(i.a.createElement(tt.a,{disabled:f}))),i.a.createElement(nt,M()({label:"密码"},we),d("hiveConf.password")(i.a.createElement(tt.a,{disabled:f})))),i.a.createElement("p",{className:"config-title"},"Spark"),i.a.createElement("div",{className:"config-content",style:{width:"680px"}},i.a.createElement(nt,M()({label:"版本选择"},we),d("sparkConf.typeName",{rules:[{required:!0,message:"请选择Spark版本"}],initialValue:"spark_yarn"})(i.a.createElement(me.a,{disabled:f,style:{width:"100px"}},i.a.createElement(rt,{value:"spark_yarn"},"2.X")))),i.a.createElement(nt,M()({label:"sparkYarnArchive"},we),d("sparkConf.sparkYarnArchive",{rules:[{required:!0,message:"请输入sparkYarnArchive"}],initialValue:"/sparkjars/jars"})(i.a.createElement(tt.a,{disabled:f}))),i.a.createElement(nt,M()({label:"sparkSqlProxyPath"},we),d("sparkConf.sparkSqlProxyPath",{rules:[{required:!0,message:"请输入sparkSqlProxyPath"}],initialValue:"/user/spark/spark-0.0.1-SNAPSHOT.jar"})(i.a.createElement(tt.a,{disabled:f}))),i.a.createElement(nt,M()({label:"sparkPythonExtLibPath"},we),d("sparkConf.sparkPythonExtLibPath",{rules:[{required:!0,message:"请输入sparkPythonExtLibPath"}],initialValue:"/pythons/pyspark.zip,hdfs://ns1/pythons/py4j-0.10.4-src.zip"})(i.a.createElement(tt.a,{disabled:f}))),this.renderExtraParam("spark"),f?null:i.a.createElement(Ge.a,null,i.a.createElement(Ze.a,{span:we.labelCol.sm.span}),i.a.createElement(Ze.a,{className:"m-card",span:we.wrapperCol.sm.span},i.a.createElement("a",{onClick:this.addParam.bind(this,"spark")},"添加自定义参数")))),i.a.createElement("p",{className:"config-title"},"Flink"),i.a.createElement("div",{className:"config-content",style:{width:"680px"}},i.a.createElement(nt,M()({label:"版本选择"},we),d("flinkConf.typeName",{rules:[{required:!0,message:"请选择flink版本"}],initialValue:"flink140"})(i.a.createElement(me.a,{disabled:f,style:{width:"100px"}},i.a.createElement(rt,{value:"flink140"},"1.4"),i.a.createElement(rt,{value:"flink150"},"1.5")))),i.a.createElement(nt,M()({label:"clusterMode"},we),d("flinkConf.clusterMode",{rules:[{required:!0,message:"请选择clusterMode"}],initialValue:"yarn"})(i.a.createElement(me.a,{disabled:f,style:{width:"100px"}},i.a.createElement(rt,{value:"standalone"},"standalone"),i.a.createElement(rt,{value:"yarn"},"yarn")))),i.a.createElement(nt,M()({label:"flinkZkAddress"},we),d("flinkConf.flinkZkAddress",{rules:[{required:!0,message:"请输入flinkZkAddress"}]})(i.a.createElement(tt.a,{disabled:f,placeholder:"hostname1:port,hostname2:port，多个地址用英文逗号隔开"}))),i.a.createElement(nt,M()({label:i.a.createElement(Ve.a,{title:"flinkHighAvailabilityStorageDir"},"flinkHighAvailabilityStorageDir")},we),d("flinkConf.flinkHighAvailabilityStorageDir",{rules:[{required:!0,message:"请输入flinkHighAvailabilityStorageDir"}]})(i.a.createElement(tt.a,{disabled:f,placeholder:"Flink高可用存储地址，例如：/flink140/ha"}))),i.a.createElement(nt,M()({label:"flinkZkNamespace"},we),d("flinkConf.flinkZkNamespace",{rules:[{required:!0,message:"请输入flinkZkNamespace"}]})(i.a.createElement(tt.a,{disabled:f,placeholder:"Flink在Zookeeper的namespace，例如：/flink140"}))),i.a.createElement(nt,M()({label:"jarTmpDir"},we),d("flinkConf.jarTmpDir",{initialValue:"../tmp140"})(i.a.createElement(tt.a,{disabled:f}))),i.a.createElement(nt,M()({label:"flinkPluginRoot"},we),d("flinkConf.flinkPluginRoot",{initialValue:"/opt/dtstack/flinkplugin"})(i.a.createElement(tt.a,{disabled:f}))),i.a.createElement(nt,M()({label:"remotePluginRootDir"},we),d("flinkConf.remotePluginRootDir",{initialValue:"/opt/dtstack/flinkplugin"})(i.a.createElement(tt.a,{disabled:f}))),this.renderExtraParam("flink"),f?null:i.a.createElement(Ge.a,null,i.a.createElement(Ze.a,{span:we.labelCol.sm.span}),i.a.createElement(Ze.a,{className:"m-card",span:we.wrapperCol.sm.span},i.a.createElement("a",{onClick:this.addParam.bind(this,"flink")},"添加自定义参数")))),i.a.createElement("p",{className:"config-title"}),f?null:i.a.createElement("div",{className:"config-content",style:{width:"100%"}},i.a.createElement(je.a,{onClick:this.test.bind(this),loading:s,type:"primary"},"测试连通性"),i.a.createElement("span",{style:{marginLeft:"18px"}},this.renderTestResult()),i.a.createElement("span",{style:{float:"right",marginRight:"18px"}},i.a.createElement(je.a,{onClick:this.save.bind(this),type:"primary"},"保存"),i.a.createElement(je.a,{onClick:b.g.goBack,style:{marginLeft:"8px"}},"取消")))))}}]),t}(i.a.Component))||Oe,ft=ke.a.create()(pt),mt=i.a.createElement(b.d,{path:"/",component:C.a},i.a.createElement(b.a,{to:"/console"}),i.a.createElement(b.d,{path:"/message",component:S.a},i.a.createElement(b.b,{component:_.a}),i.a.createElement(b.d,{path:"list",component:_.a}),i.a.createElement(b.d,{path:"detail/:msgId",component:x.a})),i.a.createElement(b.d,{path:"/admin",component:T.a},i.a.createElement(b.b,{component:U.a}),i.a.createElement(b.d,{path:"user",component:U.a}),i.a.createElement(b.d,{path:"role",component:N.a}),i.a.createElement(b.d,{path:"role/add",component:w.a}),i.a.createElement(b.d,{path:"role/edit/:roleId",component:D.a})),i.a.createElement(b.d,{path:"/console",component:se},i.a.createElement(b.b,{component:Re}),i.a.createElement(b.d,{path:"resourceManage",component:Re}),i.a.createElement(b.d,{path:"clusterManage",component:Fe}),i.a.createElement(b.d,{path:"clusterManage/editCluster",component:ft}))),ht=function(e){function t(){return f()(this,t),v()(this,(t.__proto__||d()(t)).apply(this,arguments))}return E()(t,e),h()(t,[{key:"render",value:function(){var e=this.props,t=e.store,a=e.history;return i.a.createElement(k.a,{store:t},i.a.createElement(b.e,{routes:mt,history:a,key:Math.random(),onEnter:function(){}}))}}]),t}(i.a.Component);lt=ht,st=a("/AHB").default,ct=Object(c.a)(st,"hash"),ut=ct.store,dt=ct.history,l.a.render(i.a.createElement(s.AppContainer,null,i.a.createElement(lt,{store:ut,history:dt})),document.getElementById("app"))},Zv7G:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,a,n){var r=(0,i.default)(e,t);try{n?a.groupCollapsed("diff"):a.group("diff")}catch(e){a.log("diff")}r?r.forEach(function(e){var t=e.kind,n=function(e){var t=e.kind,a=e.path,n=e.lhs,r=e.rhs,i=e.index,o=e.item;switch(t){case"E":return[a.join("."),n,"→",r];case"N":return[a.join("."),r];case"D":return[a.join(".")];case"A":return[a.join(".")+"["+i+"]",o];default:return[]}}(e);a.log.apply(a,["%c "+o[t].text,function(e){return"color: "+o[e].color+"; font-weight: bold"}(t)].concat(function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}(n)))}):a.log("—— no diff ——");try{a.groupEnd()}catch(e){a.log("—— diff end —— ")}};var n,r=a("bo1M"),i=(n=r)&&n.__esModule?n:{default:n};var o={E:{color:"#2196F3",text:"CHANGED:"},N:{color:"#4CAF50",text:"ADDED:"},D:{color:"#F44336",text:"DELETED:"},A:{color:"#2196F3",text:"ARRAY:"}};e.exports=t.default},bo1M:function(e,t,a){(function(a){var n;
/*!
 * deep-diff.
 * Licensed under the MIT License.
 */!function(r,i){"use strict";void 0===(n=function(){return function(e){var t,n,r=[];t="object"==typeof a&&a?a:"undefined"!=typeof window?window:{};(n=t.DeepDiff)&&r.push(function(){void 0!==n&&t.DeepDiff===m&&(t.DeepDiff=n,n=e)});function i(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}function o(e,t){Object.defineProperty(this,"kind",{value:e,enumerable:!0}),t&&t.length&&Object.defineProperty(this,"path",{value:t,enumerable:!0})}function l(e,t,a){l.super_.call(this,"E",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0}),Object.defineProperty(this,"rhs",{value:a,enumerable:!0})}function s(e,t){s.super_.call(this,"N",e),Object.defineProperty(this,"rhs",{value:t,enumerable:!0})}function c(e,t){c.super_.call(this,"D",e),Object.defineProperty(this,"lhs",{value:t,enumerable:!0})}function u(e,t,a){u.super_.call(this,"A",e),Object.defineProperty(this,"index",{value:t,enumerable:!0}),Object.defineProperty(this,"item",{value:a,enumerable:!0})}function d(e,t,a){var n=e.slice((a||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,n),e}function p(e){var t=typeof e;return"object"!==t?t:e===Math?"math":null===e?"null":Array.isArray(e)?"array":"[object Date]"===Object.prototype.toString.call(e)?"date":void 0!==e.toString&&/^\/.*\//.test(e.toString())?"regexp":"object"}function f(t,a,n,r,i,o,m){var h=(i=i||[]).slice(0);if(void 0!==o){if(r){if("function"==typeof r&&r(h,o))return;if("object"==typeof r){if(r.prefilter&&r.prefilter(h,o))return;if(r.normalize){var g=r.normalize(h,o,t,a);g&&(t=g[0],a=g[1])}}}h.push(o)}"regexp"===p(t)&&"regexp"===p(a)&&(t=t.toString(),a=a.toString());var v=typeof t,y=typeof a;if("undefined"===v)"undefined"!==y&&n(new s(h,a));else if("undefined"===y)n(new c(h,t));else if(p(t)!==p(a))n(new l(h,t,a));else if("[object Date]"===Object.prototype.toString.call(t)&&"[object Date]"===Object.prototype.toString.call(a)&&t-a!=0)n(new l(h,t,a));else if("object"===v&&null!==t&&null!==a){if((m=m||[]).indexOf(t)<0){if(m.push(t),Array.isArray(t)){var E;t.length;for(E=0;E<t.length;E++)E>=a.length?n(new u(h,E,new c(e,t[E]))):f(t[E],a[E],n,r,h,E,m);for(;E<a.length;)n(new u(h,E,new s(e,a[E++])))}else{var b=Object.keys(t),k=Object.keys(a);b.forEach(function(i,o){var l=k.indexOf(i);l>=0?(f(t[i],a[i],n,r,h,i,m),k=d(k,l)):f(t[i],e,n,r,h,i,m)}),k.forEach(function(t){f(e,a[t],n,r,h,t,m)})}m.length=m.length-1}}else t!==a&&("number"===v&&isNaN(t)&&isNaN(a)||n(new l(h,t,a)))}function m(t,a,n,r){return r=r||[],f(t,a,function(e){e&&r.push(e)},n),r.length?r:e}function h(e,t,a){if(e&&t&&a&&a.kind){for(var n=e,r=-1,i=a.path?a.path.length-1:0;++r<i;)void 0===n[a.path[r]]&&(n[a.path[r]]="number"==typeof a.path[r]?[]:{}),n=n[a.path[r]];switch(a.kind){case"A":!function e(t,a,n){if(n.path&&n.path.length){var r,i=t[a],o=n.path.length-1;for(r=0;r<o;r++)i=i[n.path[r]];switch(n.kind){case"A":e(i[n.path[r]],n.index,n.item);break;case"D":delete i[n.path[r]];break;case"E":case"N":i[n.path[r]]=n.rhs}}else switch(n.kind){case"A":e(t[a],n.index,n.item);break;case"D":t=d(t,a);break;case"E":case"N":t[a]=n.rhs}return t}(a.path?n[a.path[r]]:n,a.index,a.item);break;case"D":delete n[a.path[r]];break;case"E":case"N":n[a.path[r]]=a.rhs}}}return i(l,o),i(s,o),i(c,o),i(u,o),Object.defineProperties(m,{diff:{value:m,enumerable:!0},observableDiff:{value:f,enumerable:!0},applyDiff:{value:function(e,t,a){e&&t&&f(e,t,function(n){a&&!a(e,t,n)||h(e,t,n)})},enumerable:!0},applyChange:{value:h,enumerable:!0},revertChange:{value:function(e,t,a){if(e&&t&&a&&a.kind){var n,r,i=e;for(r=a.path.length-1,n=0;n<r;n++)void 0===i[a.path[n]]&&(i[a.path[n]]={}),i=i[a.path[n]];switch(a.kind){case"A":!function e(t,a,n){if(n.path&&n.path.length){var r,i=t[a],o=n.path.length-1;for(r=0;r<o;r++)i=i[n.path[r]];switch(n.kind){case"A":e(i[n.path[r]],n.index,n.item);break;case"D":case"E":i[n.path[r]]=n.lhs;break;case"N":delete i[n.path[r]]}}else switch(n.kind){case"A":e(t[a],n.index,n.item);break;case"D":case"E":t[a]=n.lhs;break;case"N":t=d(t,a)}return t}(i[a.path[n]],a.index,a.item);break;case"D":case"E":i[a.path[n]]=a.lhs;break;case"N":delete i[a.path[n]]}}},enumerable:!0},isConflict:{value:function(){return void 0!==n},enumerable:!0},noConflict:{value:function(){return r&&(r.forEach(function(e){e()}),r=null),m},enumerable:!0}}),m}()}.apply(t,[]))||(e.exports=n)}()}).call(this,a("yLpj"))}},[["YHBf",19,22,21,20]]]);