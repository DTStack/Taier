(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1451:function(e,t,r){"use strict";r(58);var i=r(30),n=r.n(i),o=(r(44),r(25)),a=r.n(o),l=r(8),s=r.n(l),c=r(5),f=r.n(c),h=r(7),u=r.n(h),d=r(1),g=r.n(d),p=r(6),m=r.n(p),v=r(0),_=r.n(v),k=r(20),C=r(12),T=r(43),E=r.n(T),w=r(10),b=(r(1465),r(1463),r(222));r(825),r(1461);var y=function(e){function t(){var e,r,i,n;f()(this,t);for(var o=arguments.length,a=Array(o),l=0;l<o;l++)a[l]=arguments[l];return r=i=g()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(a))),i.initUI=function(){var e;return(e=i).__initUI__REACT_HOT_LOADER__.apply(e,arguments)},n=r,g()(i,n)}return m()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.value,r=e.compareTo;this.initUI(t,r)}},{key:"componentWillReceiveProps",value:function(e){var t=e.value,r=e.compareTo;t&&this.props.value!==t&&this._self.edit.doc.setValue(t),r&&this.props.compareTo!==r&&this._self.right.orig.doc.setValue(r)}},{key:"__initUI__REACT_HOT_LOADER__",value:function(e,t){var r=this.props,i=r.onChange,n=r.readOnly,o=this.getCodeMirrorIns().MergeView(this.diffView,{value:e,origLeft:null,orig:t,lineNumbers:!0,mode:"text/x-sql",highlightDifferences:!0,connect:null,collapseIdentical:!1,readOnly:n});o.edit.doc.on("change",function(t){i&&i(e,t.getValue())}),o.wrap.style.height="500px",this._self=o}},{key:"mergeViewHeight",value:function(e){function t(e){return e?e.getScrollInfo().height:0}return Math.max(t(e.leftOriginal()),t(e.editor()),t(e.rightOriginal()))}},{key:"resize",value:function(e){for(var t=this.mergeViewHeight(e);;){e.leftOriginal()&&e.leftOriginal().setSize(null,t),e.editor().setSize(null,t),e.rightOriginal()&&e.rightOriginal().setSize(null,t);var r=this.mergeViewHeight(e);if(r>=t)break;t=r}e.wrap.style.height=t+"px"}},{key:"getCodeMirrorIns",value:function(){return this._self||b}},{key:"render",value:function(){var e=this,t=this.props,r=t.className,i=t.style,n="code-editor merge-text";n=r?n+" "+r:n;var o={position:"relative",borderTop:"1px solid #e9e9e9",marginTop:"20px"};return o=i?E()(o,i):o,_.a.createElement("div",{ref:function(t){e.diffView=t},className:n,style:o})}}]),t}(v.Component),O=y,A=O,D=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(y,"DiffEditor","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/components/diff-code-editor/index.js"),__REACT_HOT_LOADER__.register(O,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/components/diff-code-editor/index.js")),r(69),r(31)),L=r.n(D),R=(r(74),r(27)),S=r.n(R),x=(r(78),r(36)),M=r.n(x),H=M.a.TabPane;function F(e,t){var r=t;function i(e,t){var i=t;return _.a.createElement(S.a,null,_.a.createElement("div",null,i),_.a.createElement("div",{className:"box-padding"},_.a.createElement(L.a,null,_.a.createElement(S.a,{span:"10",className:"txt-right"},"任务名称："),_.a.createElement(S.a,{span:"14"},r)),_.a.createElement(L.a,null,_.a.createElement(S.a,{span:"10",className:"txt-right"},"任务类型："),_.a.createElement(S.a,{span:"14"})),_.a.createElement(L.a,null,_.a.createElement(S.a,{span:"10",className:"txt-right"},"创建人员："),_.a.createElement(S.a,{span:"14"},r)),_.a.createElement(L.a,null,_.a.createElement(S.a,{span:"10",className:"txt-right"},"创建时间："),_.a.createElement(S.a,{span:"14"})),_.a.createElement(L.a,null,_.a.createElement(S.a,{span:"10",className:"txt-right"},"最近修改人员："),_.a.createElement(S.a,{span:"14"},r)),_.a.createElement(L.a,null,_.a.createElement(S.a,{span:"10",className:"txt-right"},"最近修改时间："),_.a.createElement(S.a,{span:"14"})),_.a.createElement(L.a,null,_.a.createElement(S.a,{span:"10",className:"txt-right"},"描述："),_.a.createElement(S.a,{span:"14",style:{lineHeight:"20px",padding:"10 0"}},r))))}return _.a.createElement(L.a,{gutter:16,className:"diff-params"},i(0,"当前版本"),i(0,"历史版本"))}var N=function(e){function t(e){f()(this,t);var r=g()(this,(t.__proto__||s()(t)).call(this,e));return r.callback=function(){return r.__callback__REACT_HOT_LOADER__.apply(r,arguments)},r}return m()(t,e),u()(t,[{key:"__callback__REACT_HOT_LOADER__",value:function(e){}},{key:"render",value:function(){this.props.tabData;return _.a.createElement("div",{className:"m-taksdetail"},_.a.createElement(M.a,{onChange:this.callback,type:"card"},_.a.createElement(H,{tab:"Tab 1",key:"config"},F()),_.a.createElement(H,{tab:"Tab 2",key:"params"},"Content of Tab Pane 2")))}}]),t}(_.a.Component),P=Object(k.b)(function(e){return{}},function(e){return{}})(N),V=P;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(H,"TabPane","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/diffParams.js"),__REACT_HOT_LOADER__.register(F,"TaskInfo","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/diffParams.js"),__REACT_HOT_LOADER__.register(N,"DiffParams","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/diffParams.js"),__REACT_HOT_LOADER__.register(P,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/diffParams.js"));r.d(t,"a",function(){return I});var I=function(e){function t(e){f()(this,t);var r=g()(this,(t.__proto__||s()(t)).call(this,e));return r.state={showDiff:!1,campareTo:"",diffParams:{showDiffparams:!1,tableInfo:""}},r.diffCode=function(){return r.__diffCode__REACT_HOT_LOADER__.apply(r,arguments)},r.diffParams=function(){return r.__diffParams__REACT_HOT_LOADER__.apply(r,arguments)},r.close=function(){return r.__close__REACT_HOT_LOADER__.apply(r,arguments)},r.closeParamsModal=function(){return r.__closeParamsModal__REACT_HOT_LOADER__.apply(r,arguments)},r.codeChange=function(){return r.__codeChange__REACT_HOT_LOADER__.apply(r,arguments)},r.taskVersionCols=function(){return r.__taskVersionCols__REACT_HOT_LOADER__.apply(r,arguments)},r}return m()(t,e),u()(t,[{key:"__diffCode__REACT_HOT_LOADER__",value:function(e){this.setState({showDiff:!0,campareTo:e})}},{key:"__diffParams__REACT_HOT_LOADER__",value:function(e){var t=this.state.diffParams;t.showDiffparams=!0,t.tableInfo=e,this.setState({diffParams:t})}},{key:"__close__REACT_HOT_LOADER__",value:function(){this.setState({showDiff:!1,campareTo:""})}},{key:"__closeParamsModal__REACT_HOT_LOADER__",value:function(){var e=this.state.diffParams;e.showDiffparams=!1,e.tableInfo="",this.setState({diffParams:e})}},{key:"__codeChange__REACT_HOT_LOADER__",value:function(e,t){this.props.changeSql(t)}},{key:"render",value:function(){var e=this.props.taskInfo,t=this.state,r=t.showDiff,i=t.campareTo,o=t.diffParams,l=e.readWriteLockVO&&!e.readWriteLockVO.getLock;return _.a.createElement("div",null,_.a.createElement(a.a,{className:"m-table",rowKey:"id",dataSource:e.taskVersions||[],columns:this.taskVersionCols(),pagination:!1}),_.a.createElement(n.a,{wrapClassName:"vertical-center-modal modal-body-nopadding",title:"代码对比",width:"900px",bodyStyle:{height:"500px"},visible:r,onCancel:this.close,cancelText:"关闭",footer:null},_.a.createElement(A,{readOnly:l,value:e.sqlText,compareTo:i.sqlText,onChange:this.codeChange})),_.a.createElement(n.a,{wrapClassName:"vertical-center-modal modal-body-nopadding",title:"参数对比",width:"900px",bodyStyle:{height:"500px"},visible:o.showDiffparams,onCancel:this.closeParamsModal,cancelText:"关闭",footer:null},_.a.createElement(V,this.props)))}},{key:"__taskVersionCols__REACT_HOT_LOADER__",value:function(){var e=this,t=this.props.taskInfo;return[{width:120,title:"发布时间",dataIndex:"gmtCreate",key:"gmtCreate",render:function(e){return C.a.formatDateTime(e)}},{title:"发布人",dataIndex:"userName",key:"userName"},{width:120,title:"描述",dataIndex:"publishDesc",key:"publishDesc"},{title:"操作",dataIndex:"id",width:80,key:"operation",render:function(r,i){return _.a.createElement("span",null,t.taskType===w.p.SQL?_.a.createElement("div",null,_.a.createElement("a",{onClick:function(){return e.diffCode(i)}},"代码"),_.a.createElement("span",{className:"ant-divider"}),_.a.createElement("a",{onClick:function(){return e.diffParams(i)}},"参数")):"-")}}]}}]),t}(_.a.Component);"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(I,"TaskVersion","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskVersion.js")},1452:function(e,t,r){"use strict";r.d(t,"a",function(){return v});r(91);var i=r(45),n=r.n(i),o=r(8),a=r.n(o),l=r(5),s=r.n(l),c=r(7),f=r.n(c),h=r(1),u=r.n(h),d=r(6),g=r.n(d),p=r(0),m=r.n(p),v=function(e){function t(e){return s()(this,t),u()(this,(t.__proto__||a()(t)).call(this,e))}return g()(t,e),f()(t,[{key:"render",value:function(){return this.props.notSynced?m.a.createElement(n.a,{title:"修改已保存至本地存储但尚未同步到服务器，你可以点击上面的保存按钮立即同步。"},m.a.createElement("span",{style:{display:"inline-block",marginRight:8,borderRadius:"50%",border:"4px solid ",borderColor:"#EF5350"}})):m.a.createElement("span",{style:{display:"inline-block",marginRight:8,borderRadius:"50%",border:"4px solid ",borderColor:"#00A755"}})}}]),t}(m.a.Component);"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(v,"SyncBadge","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/components/sync-badge/index.js")},1461:function(e,t,r){var i=r(1460),n=(r(222),-1),o=1,a=0;!function(e){"use strict";var t=e.Pos,r="http://www.w3.org/2000/svg";function l(e,t){this.mv=e,this.type=t,this.classes="left"==t?{chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect"}:{chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect"}}function s(t){t.diffOutOfDate&&(t.diff=S(t.orig.getValue(),t.edit.getValue(),t.mv.options.ignoreWhitespace),t.chunks=x(t.diff),t.diffOutOfDate=!1,e.signal(t.edit,"updateDiff",t.diff))}l.prototype={constructor:l,init:function(t,r,i){this.edit=this.mv.edit,(this.edit.state.diffViews||(this.edit.state.diffViews=[])).push(this),this.orig=e(t,W({value:r,readOnly:!this.mv.options.allowEditingOriginals},W(i))),"align"==this.mv.options.connect&&(this.edit.state.trackAlignable||(this.edit.state.trackAlignable=new J(this.edit)),this.orig.state.trackAlignable=new J(this.orig)),this.orig.state.diffViews=[this];var n=i.chunkClassLocation||"background";"[object Array]"!=Object.prototype.toString.call(n)&&(n=[n]),this.classes.classLocation=n,this.diff=S(L(r),L(i.value),this.mv.options.ignoreWhitespace),this.chunks=x(this.diff),this.diffOutOfDate=this.dealigned=!1,this.needsScrollSync=null,this.showDifferences=!1!==i.showDifferences},registerEvents:function(t){this.forceUpdate=function(t){var r,i={from:0,to:0,marked:[]},a={from:0,to:0,marked:[]},l=!1;function h(e){c=!0,l=!1,"full"==e&&(t.svg&&I(t.svg),t.copyButtons&&I(t.copyButtons),g(t.edit,i.marked,t.classes),g(t.orig,a.marked,t.classes),i.from=i.to=a.from=a.to=0),s(t),t.showDifferences&&(p(t.edit,t.diff,i,o,t.classes),p(t.orig,t.diff,a,n,t.classes)),"align"==t.mv.options.connect&&E(t),_(t),null!=t.needsScrollSync&&f(t,t.needsScrollSync),c=!1}function u(e){c||(t.dealigned=!0,d(e))}function d(e){c||l||(clearTimeout(r),!0===e&&(l=!0),r=setTimeout(h,!0===e?20:250))}function m(e,r){t.diffOutOfDate||(t.diffOutOfDate=!0,i.from=i.to=a.from=a.to=0),u(r.text.length-1!=r.to.line-r.from.line)}function v(){t.diffOutOfDate=!0,t.dealigned=!0,h("full")}return t.edit.on("change",m),t.orig.on("change",m),t.edit.on("swapDoc",v),t.orig.on("swapDoc",v),"align"==t.mv.options.connect&&(e.on(t.edit.state.trackAlignable,"realign",u),e.on(t.orig.state.trackAlignable,"realign",u)),t.edit.on("viewportChange",function(){d(!1)}),t.orig.on("viewportChange",function(){d(!1)}),h(),h}(this),u(this,!0,!1),function(e,t){e.edit.on("scroll",function(){f(e,!0)&&_(e)}),e.orig.on("scroll",function(){f(e,!1)&&_(e),t&&f(t,!0)&&_(t)})}(this,t)},setShowDifferences:function(e){(e=!1!==e)!=this.showDifferences&&(this.showDifferences=e,this.forceUpdate("full"))}};var c=!1;function f(e,t){if(e.diffOutOfDate)return e.lockScroll&&null==e.needsScrollSync&&(e.needsScrollSync=t),!1;if(e.needsScrollSync=null,!e.lockScroll)return!0;var r,i,n=+new Date;if(t?(r=e.edit,i=e.orig):(r=e.orig,i=e.edit),r.state.scrollSetBy==e&&(r.state.scrollSetAt||0)+250>n)return!1;var o=r.getScrollInfo();if("align"==e.mv.options.connect)m=o.top;else{var a,l,s=.5*o.clientHeight,c=o.top+s,f=r.lineAtHeight(c,"local"),u=function(e,t,r){for(var i,n,o,a,l=0;l<e.length;l++){var s=e[l],c=r?s.editFrom:s.origFrom,f=r?s.editTo:s.origTo;null==n&&(c>t?(n=s.editFrom,a=s.origFrom):f>t&&(n=s.editTo,a=s.origTo)),f<=t?(i=s.editTo,o=s.origTo):c<=t&&(i=s.editFrom,o=s.origFrom)}return{edit:{before:i,after:n},orig:{before:o,after:a}}}(e.chunks,f,t),d=h(r,t?u.edit:u.orig),g=h(i,t?u.orig:u.edit),p=(c-d.top)/(d.bot-d.top),m=g.top-s+p*(g.bot-g.top);if(m>o.top&&(l=o.top/s)<1)m=m*l+o.top*(1-l);else if((a=o.height-o.clientHeight-o.top)<s){var v=i.getScrollInfo(),_=v.height-v.clientHeight-m;_>a&&(l=a/s)<1&&(m=m*l+(v.height-v.clientHeight-a)*(1-l))}}return i.scrollTo(o.left,m),i.state.scrollSetAt=n,i.state.scrollSetBy=e,!0}function h(e,t){var r=t.after;return null==r&&(r=e.lastLine()+1),{top:e.heightAtLine(t.before||0,"local"),bot:e.heightAtLine(r,"local")}}function u(e,t,r){e.lockScroll=t,t&&0!=r&&f(e,o)&&_(e),e.lockButton.innerHTML=t?"⇛⇚":"⇛&nbsp;&nbsp;⇚"}function d(e,t,r){for(var i=r.classLocation,n=0;n<i.length;n++)e.removeLineClass(t,i[n],r.chunk),e.removeLineClass(t,i[n],r.start),e.removeLineClass(t,i[n],r.end)}function g(t,r,i){for(var n=0;n<r.length;++n){var o=r[n];o instanceof e.TextMarker?o.clear():o.parent&&d(t,o,i)}r.length=0}function p(e,t,r,i,n){var o=e.getViewport();e.operation(function(){r.from==r.to||o.from-r.to>20||r.from-o.to>20?(g(e,r.marked,n),v(e,t,i,r.marked,o.from,o.to,n),r.from=o.from,r.to=o.to):(o.from<r.from&&(v(e,t,i,r.marked,o.from,r.from,n),r.from=o.from),o.to>r.to&&(v(e,t,i,r.marked,r.to,o.to,n),r.to=o.to))})}function m(e,t,r,i,n,o){for(var a=r.classLocation,l=e.getLineHandle(t),s=0;s<a.length;s++)i&&e.addLineClass(l,a[s],r.chunk),n&&e.addLineClass(l,a[s],r.start),o&&e.addLineClass(l,a[s],r.end);return l}function v(e,r,i,o,l,s,c){var f=t(0,0),h=t(l,0),u=e.clipPos(t(s-1)),d=i==n?c.del:c.insert;function g(t,r){for(var i=Math.max(l,t),n=Math.min(s,r),a=i;a<n;++a)o.push(m(e,a,c,!0,a==t,a==r-1));t==r&&i==r&&n==r&&(i?o.push(m(e,i-1,c,!1,!1,!0)):o.push(m(e,i,c,!1,!0,!1)))}for(var p=0,v=!1,_=0;_<r.length;++_){var k=r[_],C=k[0],T=k[1];if(C==a){var E=f.line+(H(r,_)?0:1);z(f,T);var w=f.line+(M(r,_)?1:0);w>E&&(v&&(g(p,E),v=!1),p=w)}else if(v=!0,C==i){var b=z(f,T,!0),y=K(h,f),O=G(u,b);Q(y,O)||o.push(e.markText(y,O,{className:d})),f=b}}v&&g(p,f.line+1)}function _(e){if(e.showDifferences){if(e.svg){I(e.svg);var t=e.gap.offsetWidth;B(e.svg,"width",t,"height",e.gap.offsetHeight)}e.copyButtons&&I(e.copyButtons);for(var r=e.edit.getViewport(),i=e.orig.getViewport(),n=e.mv.wrap.getBoundingClientRect().top,o=n-e.edit.getScrollerElement().getBoundingClientRect().top+e.edit.getScrollInfo().top,a=n-e.orig.getScrollerElement().getBoundingClientRect().top+e.orig.getScrollInfo().top,l=0;l<e.chunks.length;l++){var s=e.chunks[l];s.editFrom<=r.to&&s.editTo>=r.from&&s.origFrom<=i.to&&s.origTo>=i.from&&y(e,s,a,o,t)}}}function k(e,t){for(var r=0,i=0,n=0;n<t.length;n++){var o=t[n];if(o.editTo>e&&o.editFrom<=e)return null;if(o.editFrom>e)break;r=o.editTo,i=o.origTo}return i+(e-r)}function C(e,t,r){for(var i=e.state.trackAlignable,n=e.firstLine(),o=0,a=[],l=0;;l++){for(var s=t[l],c=s?r?s.origFrom:s.editFrom:1e9;o<i.alignable.length;o+=2){var f=i.alignable[o]+1;if(!(f<=n)){if(!(f<=c))break;a.push(f)}}if(!s)break;a.push(n=r?s.origTo:s.editTo)}return a}function T(e,t,r,i){var n=0,o=0,a=0,l=0;e:for(;;n++){var s=e[n],c=t[o];if(!s&&null==c)break;for(var f=s?s[0]:1e9,h=null==c?1e9:c;a<r.length;){var u=r[a];if(u.origFrom<=h&&u.origTo>h){o++,n--;continue e}if(u.editTo>f){if(u.editFrom<=f)continue e;break}l+=u.origTo-u.origFrom-(u.editTo-u.editFrom),a++}if(f==h-l)s[i]=h,o++;else if(f<h-l)s[i]=f+l;else{var d=[h-l,null,null];d[i]=h,e.splice(n,0,d),o++}}}function E(e,t){if(e.dealigned||t){if(!e.orig.curOp)return e.orig.operation(function(){E(e,t)});e.dealigned=!1;var r=e.mv.left==e?e.mv.right:e.mv.left;r&&(s(r),r.dealigned=!1);for(var i=function(e,t){var r=C(e.edit,e.chunks,!1),i=[];if(t)for(var n=0,o=0;n<t.chunks.length;n++){for(var a=t.chunks[n].editTo;o<r.length&&r[o]<a;)o++;o!=r.length&&r[o]==a||r.splice(o++,0,a)}for(var n=0;n<r.length;n++)i.push([r[n],null,null]);return T(i,C(e.orig,e.chunks,!0),e.chunks,1),t&&T(i,C(t.orig,t.chunks,!0),t.chunks,2),i}(e,r),n=e.mv.aligners,o=0;o<n.length;o++)n[o].clear();n.length=0;var a=[e.edit,e.orig],l=[];r&&a.push(r.orig);for(var o=0;o<a.length;o++)l.push(a[o].getScrollInfo().top);for(var c=0;c<i.length;c++)w(a,i[c],n);for(var o=0;o<a.length;o++)a[o].scrollTo(null,l[o])}}function w(e,t,r){for(var i=0,n=[],o=0;o<e.length;o++)if(null!=t[o]){var a=e[o].heightAtLine(t[o],"local");n[o]=a,i=Math.max(i,a)}for(var o=0;o<e.length;o++)if(null!=t[o]){var l=i-n[o];l>1&&r.push(b(e[o],t[o],l))}}function b(e,t,r){var i=!0;t>e.lastLine()&&(t--,i=!1);var n=document.createElement("div");return n.className="CodeMirror-merge-spacer",n.style.height=r+"px",n.style.minWidth="1px",e.addLineWidget(t,n,{height:r,above:i,mergeSpacer:!0,handleMouseEvents:!0})}function y(e,t,i,n,o){var a="left"==e.type,l=e.orig.heightAtLine(t.origFrom,"local",!0)-i;if(e.svg){var s=l,c=e.edit.heightAtLine(t.editFrom,"local",!0)-n;if(a){var f=s;s=c,c=f}var h=e.orig.heightAtLine(t.origTo,"local",!0)-i,u=e.edit.heightAtLine(t.editTo,"local",!0)-n;if(a){var f=h;h=u,u=f}var d=" C "+o/2+" "+c+" "+o/2+" "+s+" "+(o+2)+" "+s,g=" C "+o/2+" "+h+" "+o/2+" "+u+" -1 "+u;B(e.svg.appendChild(document.createElementNS(r,"path")),"d","M -1 "+c+d+" L "+(o+2)+" "+h+g+" z","class",e.classes.connect)}if(e.copyButtons){var p=e.copyButtons.appendChild(V("div","left"==e.type?"⇝":"⇜","CodeMirror-merge-copy")),m=e.mv.options.allowEditingOriginals;if(p.title=m?"Push to left":"Revert chunk",p.chunk=t,p.style.top=(t.origTo>t.origFrom?l:e.edit.heightAtLine(t.editFrom,"local")-n)+"px",m){var v=e.edit.heightAtLine(t.editFrom,"local")-n,_=e.copyButtons.appendChild(V("div","right"==e.type?"⇝":"⇜","CodeMirror-merge-copy-reverse"));_.title="Push to right",_.chunk={editFrom:t.origFrom,editTo:t.origTo,origFrom:t.editFrom,origTo:t.editTo},_.style.top=v+"px","right"==e.type?_.style.left="2px":_.style.right="2px"}}}function O(e,r,i,n){if(!e.diffOutOfDate){var o=n.origTo>i.lastLine()?t(n.origFrom-1):t(n.origFrom,0),a=t(n.origTo,0),l=n.editTo>r.lastLine()?t(n.editFrom-1):t(n.editFrom,0),s=t(n.editTo,0),c=e.mv.options.revertChunk;c?c(e.mv,i,o,a,r,l,s):r.replaceRange(i.getRange(o,a),l,s)}}var A=e.MergeView=function(t,r){if(!(this instanceof A))return new A(t,r);this.options=r;var i=r.origLeft,n=null==r.origRight?r.orig:r.origRight,o=null!=i,a=null!=n,s=1+(o?1:0)+(a?1:0),c=[],f=this.left=null,h=this.right=null,u=this;if(o){f=this.left=new l(this,"left");var d=V("div",null,"CodeMirror-merge-pane CodeMirror-merge-left");c.push(d),c.push(D(f))}var g=V("div",null,"CodeMirror-merge-pane CodeMirror-merge-editor");if(c.push(g),a){h=this.right=new l(this,"right"),c.push(D(h));var p=V("div",null,"CodeMirror-merge-pane CodeMirror-merge-right");c.push(p)}(a?p:g).className+=" CodeMirror-merge-pane-rightmost",c.push(V("div",null,null,"height: 0; clear: both;"));var m=this.wrap=t.appendChild(V("div",c,"CodeMirror-merge CodeMirror-merge-"+s+"pane"));this.edit=e(g,W(r)),f&&f.init(d,i,r),h&&h.init(p,n,r),r.collapseIdentical&&this.editor().operation(function(){!function(e,t){"number"!=typeof t&&(t=2);for(var r=[],i=e.editor(),n=i.firstLine(),o=n,a=i.lastLine();o<=a;o++)r.push(!0);e.left&&P(e.left,t,n,r),e.right&&P(e.right,t,n,r);for(var l=0;l<r.length;l++)if(r[l]){for(var s=l+n,c=1;l<r.length-1&&r[l+1];l++,c++);if(c>t){var f=[{line:s,cm:i}];e.left&&f.push({line:k(s,e.left.chunks),cm:e.left.orig}),e.right&&f.push({line:k(s,e.right.chunks),cm:e.right.orig});var h=N(c,f);e.options.onCollapse&&e.options.onCollapse(e,s,c,h)}}}(u,r.collapseIdentical)}),"align"==r.connect&&(this.aligners=[],E(this.left||this.right,!0)),f&&f.registerEvents(h),h&&h.registerEvents(f);var v=function(){f&&_(f),h&&_(h)};e.on(window,"resize",v);var C=setInterval(function(){for(var t=m.parentNode;t&&t!=document.body;t=t.parentNode);t||(clearInterval(C),e.off(window,"resize",v))},5e3)};function D(t){var i=t.lockButton=V("div",null,"CodeMirror-merge-scrolllock");i.title="Toggle locked scrolling";var n=V("div",[i],"CodeMirror-merge-scrolllock-wrap");e.on(i,"click",function(){u(t,!t.lockScroll)});var o=[n];if(!1!==t.mv.options.revertButtons&&(t.copyButtons=V("div",null,"CodeMirror-merge-copybuttons-"+t.type),e.on(t.copyButtons,"click",function(e){var r=e.target||e.srcElement;r.chunk&&("CodeMirror-merge-copy-reverse"!=r.className?O(t,t.edit,t.orig,r.chunk):O(t,t.orig,t.edit,r.chunk))}),o.unshift(t.copyButtons)),"align"!=t.mv.options.connect){var a=document.createElementNS&&document.createElementNS(r,"svg");a&&!a.createSVGRect&&(a=null),t.svg=a,a&&o.push(a)}return t.gap=V("div",o,"CodeMirror-merge-gap")}function L(e){return"string"==typeof e?e:e.getValue()}A.prototype={constructor:A,editor:function(){return this.edit},rightOriginal:function(){return this.right&&this.right.orig},leftOriginal:function(){return this.left&&this.left.orig},setShowDifferences:function(e){this.right&&this.right.setShowDifferences(e),this.left&&this.left.setShowDifferences(e)},rightChunks:function(){if(this.right)return s(this.right),this.right.chunks},leftChunks:function(){if(this.left)return s(this.left),this.left.chunks}};var R=new i;function S(e,t,r){for(var i=R.diff_main(e,t),n=0;n<i.length;++n){var o=i[n];(r?/[^ \t]/.test(o[1]):o[1])?n&&i[n-1][0]==o[0]&&(i.splice(n--,1),i[n][1]+=o[1]):i.splice(n--,1)}return i}function x(e){for(var r=[],i=0,n=0,l=t(0,0),s=t(0,0),c=0;c<e.length;++c){var f=e[c],h=f[0];if(h==a){var u=!H(e,c)||l.line<i||s.line<n?1:0,d=l.line+u,g=s.line+u;z(l,f[1],null,s);var p=M(e,c)?1:0,m=l.line+p,v=s.line+p;m>d&&(c&&r.push({origFrom:n,origTo:g,editFrom:i,editTo:d}),i=m,n=v)}else z(h==o?l:s,f[1])}return(i<=l.line||n<=s.line)&&r.push({origFrom:n,origTo:s.line+1,editFrom:i,editTo:l.line+1}),r}function M(e,t){if(t==e.length-1)return!0;var r=e[t+1][1];return!(1==r.length&&t<e.length-2||10!=r.charCodeAt(0))&&(t==e.length-2||((r=e[t+2][1]).length>1||t==e.length-3)&&10==r.charCodeAt(0))}function H(e,t){if(0==t)return!0;var r=e[t-1][1];return 10==r.charCodeAt(r.length-1)&&(1==t||10==(r=e[t-2][1]).charCodeAt(r.length-1))}function F(r,i,n){r.addLineClass(i,"wrap","CodeMirror-merge-collapsed-line");var o=document.createElement("span");o.className="CodeMirror-merge-collapsed-widget",o.title="Identical text collapsed. Click to expand.";var a=r.markText(t(i,0),t(n-1),{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:o,clearOnEnter:!0});function l(){a.clear(),r.removeLineClass(i,"wrap","CodeMirror-merge-collapsed-line")}return e.on(o,"click",l),{mark:a,clear:l}}function N(e,t){var r=[];function i(){for(var e=0;e<r.length;e++)r[e].clear()}for(var n=0;n<t.length;n++){var o=t[n],a=F(o.cm,o.line,o.line+e);r.push(a),a.mark.on("clear",i)}return r[0].mark}function P(e,t,r,i){for(var n=0;n<e.chunks.length;n++)for(var o=e.chunks[n],a=o.editFrom-t;a<o.editTo+t;a++){var l=a+r;l>=0&&l<i.length&&(i[l]=!1)}}function V(e,t,r,i){var n=document.createElement(e);if(r&&(n.className=r),i&&(n.style.cssText=i),"string"==typeof t)n.appendChild(document.createTextNode(t));else if(t)for(var o=0;o<t.length;++o)n.appendChild(t[o]);return n}function I(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild)}function B(e){for(var t=1;t<arguments.length;t+=2)e.setAttribute(arguments[t],arguments[t+1])}function W(e,t){for(var r in t||(t={}),e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t}function z(e,r,i,n){for(var o=i?t(e.line,e.ch):e,a=0;;){var l=r.indexOf("\n",a);if(-1==l)break;++o.line,n&&++n.line,a=l+1}return o.ch=(a?0:o.ch)+(r.length-a),n&&(n.ch=(a?0:n.ch)+(r.length-a)),o}var U=1,j=2,q=4;function J(e){this.cm=e,this.alignable=[],this.height=e.doc.height;var t=this;e.on("markerAdded",function(e,r){if(r.collapsed){var i=r.find(1);null!=i&&t.set(i.line,q)}}),e.on("markerCleared",function(e,r,i,n){null!=n&&r.collapsed&&t.check(n,q,t.hasMarker)}),e.on("markerChanged",this.signal.bind(this)),e.on("lineWidgetAdded",function(e,r,i){r.mergeSpacer||(r.above?t.set(i-1,j):t.set(i,U))}),e.on("lineWidgetCleared",function(e,r,i){r.mergeSpacer||(r.above?t.check(i-1,j,t.hasWidgetBelow):t.check(i,U,t.hasWidget))}),e.on("lineWidgetChanged",this.signal.bind(this)),e.on("change",function(e,r){var i=r.from.line,n=r.to.line-r.from.line,o=r.text.length-1,a=i+o;(n||o)&&t.map(i,n,o),t.check(a,q,t.hasMarker),(n||o)&&t.check(r.from.line,q,t.hasMarker)}),e.on("viewportChange",function(){t.cm.doc.height!=t.height&&t.signal()})}function G(e,t){return(e.line-t.line||e.ch-t.ch)<0?e:t}function K(e,t){return(e.line-t.line||e.ch-t.ch)>0?e:t}function Q(e,t){return e.line==t.line&&e.ch==t.ch}function X(e,t,r){for(var i=e.length-1;i>=0;i--){var n=e[i],o=(r?n.origTo:n.editTo)-1;if(o<t)return o}}function Y(e,t,r){for(var i=0;i<e.length;i++){var n=e[i],o=r?n.origFrom:n.editFrom;if(o>t)return o}}function Z(t,r){var i=null,n=t.state.diffViews,o=t.getCursor().line;if(n)for(var a=0;a<n.length;a++){var l=n[a],c=t==l.orig;s(l);var f=r<0?X(l.chunks,o,c):Y(l.chunks,o,c);null==f||null!=i&&!(r<0?f>i:f<i)||(i=f)}if(null==i)return e.Pass;t.setCursor(i,0)}J.prototype={signal:function(){e.signal(this,"realign"),this.height=this.cm.doc.height},set:function(e,t){for(var r=-1;r<this.alignable.length;r+=2){var i=this.alignable[r]-e;if(0==i){if((this.alignable[r+1]&t)==t)return;return this.alignable[r+1]|=t,void this.signal()}if(i>0)break}this.signal(),this.alignable.splice(r,0,e,t)},find:function(e){for(var t=0;t<this.alignable.length;t+=2)if(this.alignable[t]==e)return t;return-1},check:function(e,t,r){var i=this.find(e);if(-1!=i&&this.alignable[i+1]&t&&!r.call(this,e)){this.signal();var n=this.alignable[i+1]&~t;n?this.alignable[i+1]=n:this.alignable.splice(i,2)}},hasMarker:function(e){var t=this.cm.getLineHandle(e);if(t.markedSpans)for(var r=0;r<t.markedSpans.length;r++)if(t.markedSpans[r].mark.collapsed&&null!=t.markedSpans[r].to)return!0;return!1},hasWidget:function(e){var t=this.cm.getLineHandle(e);if(t.widgets)for(var r=0;r<t.widgets.length;r++)if(!t.widgets[r].above&&!t.widgets[r].mergeSpacer)return!0;return!1},hasWidgetBelow:function(e){if(e==this.cm.lastLine())return!1;var t=this.cm.getLineHandle(e+1);if(t.widgets)for(var r=0;r<t.widgets.length;r++)if(t.widgets[r].above&&!t.widgets[r].mergeSpacer)return!0;return!1},map:function(e,t,r){for(var i=r-t,n=e+t,o=-1,a=-1,l=0;l<this.alignable.length;l+=2){var s=this.alignable[l];s==e&&this.alignable[l+1]&j&&(o=l),s==n&&this.alignable[l+1]&j&&(a=l),s<=e||(s<n?this.alignable.splice(l--,2):this.alignable[l]+=i)}if(o>-1){var c=this.alignable[o+1];c==j?this.alignable.splice(o,2):this.alignable[o+1]=c&~j}a>-1&&r&&this.set(e+r,j)}},e.commands.goNextDiff=function(e){return Z(e,1)},e.commands.goPrevDiff=function(e){return Z(e,-1)}}(r(222))},1463:function(e,t,r){}}]);