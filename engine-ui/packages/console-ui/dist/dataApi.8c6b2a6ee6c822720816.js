(window.webpackJsonp=window.webpackJsonp||[]).push([[24,18],{110:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(35),i=a.n(n)()(["CHANGE_LOADING","GET_DATA_SOURCES","GET_DATA_SOURCES_TYPE","GET_DATA_SOURCES_LIST","GET_DATA_SOURCES_TABLE","GET_DATA_SOURCES_COLUMN","GET_DATA_SOURCES_PART","RESET_DATA_SOURCES_PART","GET_DATA_SOURCES_PREVIEW"],{prefix:"dataSource/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"dataSourceActions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/dataSourceActions.js")},153:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(145);function i(e){return{type:n.a.UPDATE_APP,data:e}}"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"updateApp","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/main/actions/app.js")},154:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(4),i=a.n(n),s=(a(11),a(99)),r={id:0,dtuicUserId:0,userName:"未登录",isRoot:!1};function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case s.a.GET_USER:return t.data;case s.a.UPDATE_USER:return null!==t.data?i()({},e,t.data):e;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"initalUser","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/main/reducers/modules/user.js"),__REACT_HOT_LOADER__.register(o,"user","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/main/reducers/modules/user.js"))},155:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(14),i=a(163),s=a(135),r=a.n(s),o=a(62),l=a(107);function c(e){return Object(o.e)(e,Object(o.d)(Object(o.a)(r.a,Object(i.createLogger)()),window.devToolsExtension?window.devToolsExtension():function(e){return e}))}function p(e){return Object(o.e)(e,Object(o.a)(r.a))}function u(e,t){var a=p(e),i=t&&"hash"===t?n.g:n.f;return{store:a,history:Object(l.syncHistoryWithStore)(i,a)}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(c,"configureStoreDev","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/utils/reduxUtils.js"),__REACT_HOT_LOADER__.register(p,"configureStoreProd","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/utils/reduxUtils.js"),__REACT_HOT_LOADER__.register(u,"getStore","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/utils/reduxUtils.js"))},186:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(35),i=a.n(n)()(["GET_CATALOGUE","GET_API_MARKET_LIST","GET_MARKET_API_DETAIL","GET_API_EXT_INFO"],{prefix:"apiMarket/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"apiMarketActionType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/apiMarketActionType.js")},213:function(e,t,a){},215:function(e,t,a){},217:function(e,t,a){},356:function(e,t,a){},359:function(e,t,a){},372:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return i});var n={mode:"text/x-sql",lint:!0,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,autofocus:!1},i={mode:"text/x-properties",lint:!0,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,autofocus:!1},s={mode:"application/json",lint:!0,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,autofocus:!1,matchBrackets:!0};"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(n,"defaultEditorOptions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/widgets/code-editor/config.js"),__REACT_HOT_LOADER__.register(i,"propEditorOptions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/widgets/code-editor/config.js"),__REACT_HOT_LOADER__.register(s,"jsonEditorOptions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/widgets/code-editor/config.js"))},377:function(e,t,a){"use strict";var n=a(35),i=a.n(n)()(["GET_USER_LIST","GET_ALL_DICT","GET_ALL_MENU_LIST"],{prefix:"common/"}),s=i;t.a=s;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"commonActionType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/commonActionType.js"),__REACT_HOT_LOADER__.register(s,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/commonActionType.js"))},40:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"h",function(){return i}),a.d(t,"g",function(){return s}),a.d(t,"f",function(){return r}),a.d(t,"a",function(){return o}),a.d(t,"d",function(){return c}),a.d(t,"e",function(){return p}),a.d(t,"c",function(){return u}),a.d(t,"i",function(){return d}),a.d(t,"k",function(){return _}),a.d(t,"n",function(){return m}),a.d(t,"l",function(){return h}),a.d(t,"m",function(){return g}),a.d(t,"j",function(){return E});var n={MYSQL:1,ORACLE:2,SQLSERVER:3,HDFS:6,HIVE:7,HBASE:8,FTP:9,MAXCOMPUTE:10},i={1:"注册标签",2:"规则标签"},s={0:"新建",1:"等待运行",2:"更新中",3:"更新完成",4:"更新失败",5:"禁用"},r={0:"未发布",1:"已发布"},o={0:"启用",1:"禁用"},l={"-1":"NO_APPLY",0:"IN_HAND",1:"PASS",2:"REJECT",3:"STOPPED",4:"DISABLE"},c={"-1":"nothing",0:"inhand",1:"success",2:"notPass",3:"stop",4:"disabled"},p={0:"notApproved",1:"pass",2:"rejected",3:"stop",4:"disabled"},u={0:"success",1:"stop"},d=[{text:"MySQL",value:1},{text:"Oracle",value:2},{text:"SQLServer",value:3},{text:"Spark",value:7},{text:"MaxCompute",value:10}],_={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},m={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}},h={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:10}}},g={labelCol:{span:0},wrapperCol:{span:24}},A={title:{text:"堆叠区域图",textStyle:{fontSize:12},textAlign:"left"},tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985"}}},color:["#2491F7","#7460EF","#26DAD2","#79E079","#7A64F3","#FFDC53","#9a64fb"],legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},toolbox:{feature:{saveAsImage:{show:!1}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{show:!0},axisLine:{lineStyle:{color:"#DDDDDD"}},axisLabel:{textStyle:{color:"#666666"}},nameTextStyle:{color:"#666666"},splitLine:{color:"#666666"}}],yAxis:[{type:"value",axisLabel:{formatter:"{value} 个",textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",nameGap:20,axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#DDDDDD",type:"dashed"}}}],series:[]},E={tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985"}}},color:["#2491F7","#7460EF","#26DAD2","#79E079","#7A64F3","#FFDC53","#9a64fb"],legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},toolbox:{feature:{saveAsImage:{show:!1}}},grid:{left:"3%",right:"4%",bottom:"30",top:40,containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{show:!0},axisLine:{lineStyle:{color:"#DDDDDD"}},axisLabel:{textStyle:{color:"#666666"}},nameTextStyle:{color:"#666666"},splitLine:{color:"#666666"}}],yAxis:[{nameGap:25,type:"value",name:"调用次数",axisLabel:{textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",axisLine:{show:!1},axisTick:{show:!1},splitLine:!1,minInterval:1},{nameGap:25,type:"value",name:"失败率 (%)",axisLabel:{textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#DDDDDD",type:"dashed"}},max:100}],series:[]};"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(n,"DATA_SOURCE","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(i,"TAG_TYPE","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(s,"TAG_STATUS","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(r,"TAG_PUBLISH_STATUS","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(o,"API_OPEN_STATUS","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(l,"API_STATUS","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(c,"EXCHANGE_API_STATUS","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(p,"EXCHANGE_APPLY_STATUS","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(u,"EXCHANGE_ADMIN_API_STATUS","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(d,"dataSourceFilter","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(_,"formItemLayout","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(m,"tailFormItemLayout","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(h,"halfFormItemLayout","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(g,"rowFormItemLayout","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(A,"lineAreaChartOptions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(E,"doubleLineAreaChartOptions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataLabel/consts/index.js"))},402:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(35),i=a.n(n)()(["GET_APPLYING_LIST","GET_APPLYED_LIST"],{prefix:"mine/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"mineActionType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/mineActionType.js")},427:function(e,t,a){"use strict";var n,i=a(39),s=a.n(i),r=a(8),o=a.n(r),l=a(5),c=a.n(l),p=a(7),u=a.n(p),d=a(1),_=a.n(d),m=a(6),h=a.n(m),g=a(0),A=a.n(g),E=a(372),f=a(112),T=(a(633),a(632),a(600),a(140));a(387),a(447),a(446),a(445),a(444),a(443);var y=Object(f.a)(n=function(e){function t(){return c()(this,t),_()(this,(t.__proto__||o()(t)).apply(this,arguments))}return h()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.Editor,t=this.props.options||E.a,a=this.getCodeMirrorIns(),n=this.props,i=n.value,s=n.onChange,r=n.onFocus,o=n.cursor,l=n.focusOut,c=n.cursorActivity;e&&(this.self=a.fromTextArea(e,t),o&&this.self.doc.setCursor(o),this.self.on("change",function(e){s&&s(i,e.getValue(),e)}),this.self.on("focus",function(e){r&&r(i,e.getValue())}),this.self.on("blur",function(e){l&&l(i,e.getValue())}),this.self.on("cursorActivity",function(e){c&&c(i,e)}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.value,a=e.sync,n=e.cursor,i=(e.placeholder,e.cursorAlwaysInEnd),s=e.options;s&&this.self.setOption("readOnly",s.readOnly),this.props.value!==t&&(n&&this.self.doc.setCursor(n),a&&(t?this.self.setValue(t):this.self.setValue(""),i&&this.self.doc.setCursor(this.self.doc.lineCount(),null)))}},{key:"getCodeMirrorIns",value:function(){return this.self||T}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.style,i="code-editor";i=a?i+" "+a:i;var r={position:"relative",minHeight:"400px"};return r=n?s()(r,n):r,A.a.createElement("div",{className:i,style:r},A.a.createElement("textarea",{ref:function(t){e.Editor=t},name:"code",placeholder:this.props.placeholder||"",defaultValue:this.props.value||""}))}}]),t}(g.Component))||n,v=y;t.a=v;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(y,"CodeEditor","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/widgets/code-editor/index.js"),__REACT_HOT_LOADER__.register(v,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/widgets/code-editor/index.js"))},440:function(e,t,a){var n={"./af":344,"./af.js":344,"./ar":343,"./ar-dz":342,"./ar-dz.js":342,"./ar-kw":341,"./ar-kw.js":341,"./ar-ly":340,"./ar-ly.js":340,"./ar-ma":339,"./ar-ma.js":339,"./ar-sa":338,"./ar-sa.js":338,"./ar-tn":337,"./ar-tn.js":337,"./ar.js":343,"./az":336,"./az.js":336,"./be":335,"./be.js":335,"./bg":334,"./bg.js":334,"./bm":333,"./bm.js":333,"./bn":332,"./bn.js":332,"./bo":331,"./bo.js":331,"./br":330,"./br.js":330,"./bs":329,"./bs.js":329,"./ca":328,"./ca.js":328,"./cs":327,"./cs.js":327,"./cv":326,"./cv.js":326,"./cy":325,"./cy.js":325,"./da":324,"./da.js":324,"./de":323,"./de-at":322,"./de-at.js":322,"./de-ch":321,"./de-ch.js":321,"./de.js":323,"./dv":320,"./dv.js":320,"./el":319,"./el.js":319,"./en-au":318,"./en-au.js":318,"./en-ca":317,"./en-ca.js":317,"./en-gb":316,"./en-gb.js":316,"./en-ie":315,"./en-ie.js":315,"./en-nz":314,"./en-nz.js":314,"./eo":313,"./eo.js":313,"./es":312,"./es-do":311,"./es-do.js":311,"./es-us":310,"./es-us.js":310,"./es.js":312,"./et":309,"./et.js":309,"./eu":308,"./eu.js":308,"./fa":307,"./fa.js":307,"./fi":306,"./fi.js":306,"./fo":305,"./fo.js":305,"./fr":304,"./fr-ca":303,"./fr-ca.js":303,"./fr-ch":302,"./fr-ch.js":302,"./fr.js":304,"./fy":301,"./fy.js":301,"./gd":300,"./gd.js":300,"./gl":299,"./gl.js":299,"./gom-latn":298,"./gom-latn.js":298,"./gu":297,"./gu.js":297,"./he":296,"./he.js":296,"./hi":295,"./hi.js":295,"./hr":294,"./hr.js":294,"./hu":293,"./hu.js":293,"./hy-am":292,"./hy-am.js":292,"./id":291,"./id.js":291,"./is":290,"./is.js":290,"./it":289,"./it.js":289,"./ja":288,"./ja.js":288,"./jv":287,"./jv.js":287,"./ka":286,"./ka.js":286,"./kk":285,"./kk.js":285,"./km":284,"./km.js":284,"./kn":283,"./kn.js":283,"./ko":282,"./ko.js":282,"./ky":281,"./ky.js":281,"./lb":280,"./lb.js":280,"./lo":279,"./lo.js":279,"./lt":278,"./lt.js":278,"./lv":277,"./lv.js":277,"./me":276,"./me.js":276,"./mi":275,"./mi.js":275,"./mk":274,"./mk.js":274,"./ml":273,"./ml.js":273,"./mr":272,"./mr.js":272,"./ms":271,"./ms-my":270,"./ms-my.js":270,"./ms.js":271,"./mt":269,"./mt.js":269,"./my":268,"./my.js":268,"./nb":267,"./nb.js":267,"./ne":266,"./ne.js":266,"./nl":265,"./nl-be":264,"./nl-be.js":264,"./nl.js":265,"./nn":263,"./nn.js":263,"./pa-in":262,"./pa-in.js":262,"./pl":261,"./pl.js":261,"./pt":260,"./pt-br":259,"./pt-br.js":259,"./pt.js":260,"./ro":258,"./ro.js":258,"./ru":257,"./ru.js":257,"./sd":256,"./sd.js":256,"./se":255,"./se.js":255,"./si":254,"./si.js":254,"./sk":253,"./sk.js":253,"./sl":252,"./sl.js":252,"./sq":251,"./sq.js":251,"./sr":250,"./sr-cyrl":249,"./sr-cyrl.js":249,"./sr.js":250,"./ss":248,"./ss.js":248,"./sv":247,"./sv.js":247,"./sw":246,"./sw.js":246,"./ta":245,"./ta.js":245,"./te":244,"./te.js":244,"./tet":243,"./tet.js":243,"./th":242,"./th.js":242,"./tl-ph":241,"./tl-ph.js":241,"./tlh":240,"./tlh.js":240,"./tr":239,"./tr.js":239,"./tzl":238,"./tzl.js":238,"./tzm":237,"./tzm-latn":236,"./tzm-latn.js":236,"./tzm.js":237,"./uk":235,"./uk.js":235,"./ur":234,"./ur.js":234,"./uz":233,"./uz-latn":232,"./uz-latn.js":232,"./uz.js":233,"./vi":231,"./vi.js":231,"./x-pseudo":230,"./x-pseudo.js":230,"./yo":229,"./yo.js":229,"./zh-cn":210,"./zh-cn.js":210,"./zh-hk":228,"./zh-hk.js":228,"./zh-tw":227,"./zh-tw.js":227};function i(e){var t=s(e);return a(t)}function s(e){var t=n[e];if(!(t+1)){var a=new Error('Cannot find module "'+e+'".');throw a.code="MODULE_NOT_FOUND",a}return t}i.keys=function(){return Object.keys(n)},i.resolve=s,e.exports=i,i.id=440},589:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(35),i=a.n(n)()(["GET_ALL_API_LIST"],{prefix:"apiManage/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"apiManageActionType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/apiManageActionType.js")},590:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(35),i=a.n(n)()(["GET_ALL_APPLY_LIST"],{prefix:"approval/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"approvalActionType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/approvalActionType.js")},600:function(e,t,a){},82:function(e,t,a){"use strict";a(61);var n=a(23),i=a.n(n),s=a(8),r=a.n(s),o=a(5),l=a.n(o),c=a(7),p=a.n(c),u=a(1),d=a.n(u),_=a(6),m=a.n(_),h=a(2),g=a.n(h),A=a(11),E=a(0),f=a.n(E),T=(a(359),g.a.oneOfType([g.a.string,g.a.number])),y={children:g.a.node,left:T,width:T,visible:g.a.bool},v=function(e){function t(e){return l()(this,t),d()(this,(t.__proto__||r()(t)).call(this,e))}return m()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.visible,n=e.style,s=e.className,r=e.onClose,o="slide-pane",l={top:0,transform:a?"translate3d(0%, 0, 0)":"translate3d(150%, 0, 0)"};return s&&(o=o+" "+s),n&&(l=Object(A.assign)(l,n)),f.a.createElement("div",{className:o,style:l},f.a.createElement("div",{className:"slide-pane-conent"},t),f.a.createElement("span",{className:"slide-pane-toggle",onClick:r},f.a.createElement(i.a,{type:"double-right"})))}}]),t}(E.Component);v.propTypes=y;var C=v;t.a=C;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(T,"strOrNum","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/widgets/slidePane/index.js"),__REACT_HOT_LOADER__.register(y,"propType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/widgets/slidePane/index.js"),__REACT_HOT_LOADER__.register(v,"SlidePane","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/widgets/slidePane/index.js"),__REACT_HOT_LOADER__.register(C,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/widgets/slidePane/index.js"))},86:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(8),i=a.n(n),s=a(5),r=a.n(s),o=a(7),l=a.n(o),c=a(1),p=a.n(c),u=a(6),d=a.n(u),_=a(0),m=function(e){function t(){var e,a,n,s;r()(this,t);for(var o=arguments.length,l=Array(o),c=0;c<o;c++)l[c]=arguments[c];return a=n=p()(this,(e=t.__proto__||i()(t)).call.apply(e,[this].concat(l))),n.resize=function(){var e;return(e=n).__resize__REACT_HOT_LOADER__.apply(e,arguments)},s=a,p()(n,s)}return d()(t,e),l()(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resize,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize,!1)}},{key:"__resize__REACT_HOT_LOADER__",value:function(){var e=this.props.onResize;e&&e()}},{key:"render",value:function(){return this.props.children}}]),t}(_.Component);"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(m,"Resize","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/widgets/resize/index.js")},865:function(e,t,a){"use strict";a.r(t);var n=a(62),i=a(107),s=a(154),r=a(127),o=a(377),l=a(11),c={userList:[],allDict:{},menuList:null};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1],a=t.type,n=t.payload;switch(a){case o.a.GET_USER_LIST:var i=Object(l.cloneDeep)(e);i.userList;return i.userList=n,i;case o.a.GET_ALL_DICT:var s=Object(l.cloneDeep)(e);s.allDict;return s.allDict=n,s;case o.a.GET_ALL_MENU_LIST:var r=Object(l.cloneDeep)(e);return r.menuList=n,r;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(c,"initialState","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/modules/common.js"),__REACT_HOT_LOADER__.register(p,"dataCheck","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/modules/common.js"));var u=a(88),d={loading:!1,approvalWarning:!0,topRecords:[],alarmTrend:[],alarmSum:{},usage:{},userDate:"1",adminDate:"1",approvedMsgCount:0,marketOverview:{1:{callInfo:{callCount:0,failPercent:0,callTopAPI:"",infoList:[]},callCountTop:[],callFailTop:[],failInfoList:[],topCallFunc:[]},7:{callInfo:{callCount:0,failPercent:0,callTopAPI:"",infoList:[]},callCountTop:[],callFailTop:[],failInfoList:[],topCallFunc:[]},30:{callInfo:{callCount:0,failPercent:0,callTopAPI:"",infoList:[]},callCountTop:[],callFailTop:[],failInfoList:[],topCallFunc:[]}},userOverview:{1:{callInfo:{callCount:0,failPercent:0,callTopAPI:"",infoList:[]},callCountTop:[],callFailTop:[],approvalInfo:{approvingNum:0,approvedNum:0,stoppedNum:0}},7:{callInfo:{callCount:0,failPercent:0,callTopAPI:"",infoList:[]},callCountTop:[],callFailTop:[],approvalInfo:{approvingNum:0,approvedNum:0,stoppedNum:0}},30:{callInfo:{callCount:0,failPercent:0,callTopAPI:"",infoList:[]},callCountTop:[],callFailTop:[],approvalInfo:{approvingNum:0,approvedNum:0,stoppedNum:0}}}};function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments[1],a=t.type,n=t.payload,i=t.date;switch(a){case u.a.GET_USER_CALL_INFO:var s=Object(l.cloneDeep)(e);return s.userOverview[i].callInfo=n,s;case u.a.GET_API_FAIL_RANK:var r=Object(l.cloneDeep)(e);return r.userOverview[i].callFailTop=n,r;case u.a.GET_USER_API_CALL_RANK:var o=Object(l.cloneDeep)(e);return o.userOverview[i].callCountTop=n,o;case u.a.GET_USER_API_SUB_INFO:var c=Object(l.cloneDeep)(e);return c.userOverview[i].approvalInfo=n,c;case u.a.GET_MARKET_API_FAIL_RANK:var p=Object(l.cloneDeep)(e);return p.marketOverview[i].callFailTop=n,p;case u.a.GET_MARKET_CALL_INFO:var _=Object(l.cloneDeep)(e);return _.marketOverview[i].callInfo=n,_;case u.a.GET_MARKET_API_CALL_RANK:var m=Object(l.cloneDeep)(e);return m.marketOverview[i].callCountTop=n,m;case u.a.GET_MARKET_API_ERROR_INFO:var h=Object(l.cloneDeep)(e);return h.marketOverview[i].failInfoList=n,h;case u.a.GET_MARKET_TOP_CALL_FUNC:var g=Object(l.cloneDeep)(e);return g.marketOverview[i].topCallFunc=n,g;case u.a.GET_MARKET_API_APPLY_INFO:var A=Object(l.cloneDeep)(e);return A.approvedMsgCount=n,A;case u.a.CHANGE_LOADING:var E=Object(l.cloneDeep)(e),f=E.loading;return E.loading=!f,E;case u.a.GET_TOP_RECORD:var T=Object(l.cloneDeep)(e);T.topRecords;return T.topRecords=n,T;case u.a.GET_ALARM_SUM:var y=Object(l.cloneDeep)(e);y.alarmSum;return y.alarmSum=n,y;case u.a.GET_ALARM_TREND:var v=Object(l.cloneDeep)(e);v.alarmTrend;return v.alarmTrend=n,v;case u.a.GET_USAGE:var C=Object(l.cloneDeep)(e);C.usage;return C.usage=n,C;case u.a.CHOOSE_USER_DATE:var b=Object(l.cloneDeep)(e);return b.userDate=n,b;case u.a.CHOOSE_ADMIN_DATE:var k=Object(l.cloneDeep)(e);return k.adminDate=n,k;case u.a.CLOSE_APPROVAL_WARNING:var D=Object(l.cloneDeep)(e);return D.approvalWarning=!1,D;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(d,"initialState","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/modules/dashBoard/index.js"),__REACT_HOT_LOADER__.register(_,"dashBoard","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/modules/dashBoard/index.js"));var m=a(186),h={apiCatalogue:{},apiList:[],api:{},apiCallInfo:{}};function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments[1],a=t.type,n=t.payload;switch(a){case m.a.GET_CATALOGUE:var i=Object(l.cloneDeep)(e);return i.apiCatalogue=n,i;case m.a.GET_API_MARKET_LIST:var s=Object(l.cloneDeep)(e);return s.apiList=n,s;case m.a.GET_MARKET_API_DETAIL:var r=Object(l.cloneDeep)(e);return r.api[n.apiId]=n,r;case m.a.GET_API_EXT_INFO:var o=Object(l.cloneDeep)(e);return o.apiCallInfo[n.apiId]=n,o;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(h,"initialState","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/modules/apiMarket/index.js"),__REACT_HOT_LOADER__.register(g,"apiMarket","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/modules/apiMarket/index.js"));var A=a(402),E={apiList:{applyingList:[],appliedList:[]}};function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments[1],a=t.type,n=t.payload;switch(a){case A.a.GET_APPLYING_LIST:var i=Object(l.cloneDeep)(e);return i.apiList.applyingList=n,i;case A.a.GET_APPLYED_LIST:var s=Object(l.cloneDeep)(e);return s.apiList.appliedList=n,s;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(E,"initialState","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/modules/mine/index.js"),__REACT_HOT_LOADER__.register(f,"mine","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/modules/mine/index.js"));var T=a(589),y={apiList:[]};function v(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments[1],a=t.type,n=t.payload;switch(a){case T.a.GET_ALL_API_LIST:var i=Object(l.cloneDeep)(e);return i.apiList=n,i;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(y,"initialState","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/modules/apiManage/index.js"),__REACT_HOT_LOADER__.register(v,"apiManage","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/modules/apiManage/index.js"));var C=a(590),b={approvalList:[]};function k(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments[1],a=t.type,n=t.payload;switch(a){case C.a.GET_ALL_APPLY_LIST:var i=Object(l.cloneDeep)(e);return i.approvalList=n,i;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(b,"initialState","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/modules/approval/index.js"),__REACT_HOT_LOADER__.register(k,"apiMarket","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/modules/approval/index.js"));var D=a(110),x={loading:!1,sourceQuery:[],sourceType:[],sourceList:[],sourceTable:[],sourceColumn:[],sourcePart:[],sourcePreview:{}};function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments[1],a=t.type,n=t.payload;switch(a){case D.a.CHANGE_LOADING:var i=Object(l.cloneDeep)(e),s=i.loading;return i.loading=!s,i;case D.a.GET_DATA_SOURCES:var r=Object(l.cloneDeep)(e);r.sourceQuery;return r.sourceQuery=n,r;case D.a.GET_DATA_SOURCES_TYPE:var o=Object(l.cloneDeep)(e);o.sourceType;return o.sourceType=n,o;case D.a.GET_DATA_SOURCES_LIST:var c=Object(l.cloneDeep)(e);c.sourceList;return c.sourceList=n,c;case D.a.GET_DATA_SOURCES_TABLE:var p=Object(l.cloneDeep)(e);p.sourceTable;return p.sourceTable=n,p;case D.a.GET_DATA_SOURCES_COLUMN:var u=Object(l.cloneDeep)(e);u.sourceColumn;return u.sourceColumn=n,u;case D.a.GET_DATA_SOURCES_PART:var d=Object(l.cloneDeep)(e);d.sourcePart;return d.sourcePart=n.children,d;case D.a.RESET_DATA_SOURCES_PART:var _=Object(l.cloneDeep)(e);_.sourcePart;return _.sourcePart=[],_;case D.a.GET_DATA_SOURCES_PREVIEW:var m=Object(l.cloneDeep)(e);m.sourcePreview;return m.sourcePreview=n,m;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(x,"initialState","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/modules/dataSource/index.js"),__REACT_HOT_LOADER__.register(R,"dataSource","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/modules/dataSource/index.js"));var w=Object(n.c)({routing:i.routerReducer,dataSource:R,user:s.a,apps:r.b,app:r.a,common:p,dashBoard:_,apiMarket:g,mine:f,apiManage:v,approval:k}),O=w;t.default=O,"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(w,"rootReducer","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/index.js"),__REACT_HOT_LOADER__.register(O,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/reducers/index.js"))},873:function(e,t,a){"use strict";a.r(t);var n={};a.d(n,"docExample",function(){return za});var i,s=a(0),r=a.n(s),o=a(59),l=a.n(o),c=a(183),p=a(155),u=a(8),d=a.n(u),_=a(5),m=a.n(_),h=a(7),g=a.n(h),A=a(1),E=a.n(A),f=a(6),T=a.n(f),y=a(14),v=a(21),C=(a(217),a(356),a(215),a(213),a(892),a(134),a(73),a(116),a(171)),b=a(164),k=a(125),D=a(169),x=a(168),R=a(126),w=a(167),O=a(166),S=a(165),L=a(2),I=a.n(L),N=a(12),P=a(4),H=a.n(P),U=(a(61),a(23)),j=a.n(U),M=a(94),G=Object(v.b)(function(e){return{user:e.user,apps:e.apps,routing:e.routing,common:e.common,app:e.app}})(i=function(e){function t(e){m()(this,t);var a=E()(this,(t.__proto__||d()(t)).call(this,e));return a.state={},a}return T()(t,e),g()(t,[{key:"render",value:function(){var e=this.props,t=(e.user,e.apps,"/dataApi.html#/api"),a={overview:!1,market:!1,mine:!1,manage:!1,approval:!1,dataSource:!1},n=this.props.common.menuList;if(n)for(var i in n){var s=n[i];s.indexOf("overview")>-1?a.overview=!0:s.indexOf("market")>-1?a.market=!0:s.indexOf("myapi")>-1?a.mine=!0:s.indexOf("manager")>-1?a.manage=!0:s.indexOf("authorized")>-1?a.approval=!0:s.indexOf("datasource")>-1&&(a.dataSource=!0)}var o=[{id:"overview",name:"概览",link:t+"/overview",enable:a.overview},{id:"market",name:"API市场",link:t+"/market",enable:a.market},{id:"mine",name:"我的API",link:t+"/mine",enable:a.mine},{id:"manage",name:"API管理",link:t+"/manage",enable:a.manage},{id:"approval",name:"授权审批",link:t+"/approval",enable:a.approval},{id:"dataSource",name:"数据源管理",link:t+"/dataSource",enable:a.dataSource}],l=r.a.createElement("span",null,r.a.createElement(j.a,{style:{fontSize:"18px",color:"#2491F7",marginRight:"10px"},type:"api"}),r.a.createElement("span",{style:{fontSize:"14px",color:"#ffffff"}},"DTinsight.API"));return r.a.createElement(M.c,H()({logo:l,menuItems:o},this.props))}}]),t}(s.Component))||i,F=G,V=F,q=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(G,"Header","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/layout/header.js"),__REACT_HOT_LOADER__.register(F,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/layout/header.js")),function(e){function t(){return m()(this,t),E()(this,(t.__proto__||d()(t)).apply(this,arguments))}return T()(t,e),g()(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"laoding-wrapper",style:{zIndex:2005,position:"fixed"}},r.a.createElement("div",{className:"loading-center"},r.a.createElement("h1",{className:"loading-title"},"DTinsight API"),r.a.createElement("div",{className:"bouncywrap"},r.a.createElement("div",{className:"dotcon dc1"},r.a.createElement("div",{className:"dot"})),r.a.createElement("div",{className:"dotcon dc2"},r.a.createElement("div",{className:"dot"})),r.a.createElement("div",{className:"dotcon dc3"},r.a.createElement("div",{className:"dot"})))))}}]),t}(s.Component)),B=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(q,"GlobalLoading","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/layout/loading.js"),a(76)),z=a.n(B),K=a(63),Y=a.n(K),W=(a(218),a(84)),J=(a(360),a(157)),Q=a.n(J),X=(a(36),a(13)),$=a.n(X),Z=a(65);function ee(e){switch(e.status){case 402:case 200:return e;case 302:$.a.info("登录超时, 请重新登录！");case 500:$.a.error("网络异常");default:return e}}function te(e){switch(e.code){case 1:return e;case 0:return _e.openLogin(),z.a.reject(e);case 3:return Q.a.error({message:"权限通知",description:e.message}),z.a.reject(e);case 16:hashHistory.push("/");default:return e.message&&$.a.error(e.message,3),e}}function ae(){var e=N.a.getCookie("project_id");e&&"undefined"!==e||N.a.deleteCookie("project_id")}function ne(){return Z.a.get("session")}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ee,"authBeforeFormate","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/interceptor.js"),__REACT_HOT_LOADER__.register(te,"authAfterFormated","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/interceptor.js"),__REACT_HOT_LOADER__.register(ae,"isSelectedProject","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/interceptor.js"),__REACT_HOT_LOADER__.register(ne,"isLogin","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/interceptor.js"));var ie=function(){function e(){m()(this,e)}return g()(e,[{key:"get",value:function(e,t){var a=t?this.build(e,t):e;return this.request(a,{method:"GET"})}},{key:"post",value:function(e,t){var a={method:"POST"};return t&&(a.body=Y()(t)),this.request(e,a)}},{key:"postAsFormData",value:function(e,t){var a={method:"POST"};return t&&(a.body=this.buildFormData(t)),this.request(e,a)}},{key:"postForm",value:function(e,t){var a={method:"POST"};return t&&(a.body=new FormData(t)),this.request(e,a)}},{key:"request",value:function(e,t){return W.a.show(),t.credentials="same-origin",fetch(e,t).then(ee).then(function(e){return setTimeout(function(){W.a.hide()},300),e.json()}).then(te).catch(function(e){return W.a.hide(),new z.a.reject(e)})}},{key:"defaultHeader",value:function(){return{Accept:"*/*","Content-Type":"application/json"}}},{key:"build",value:function(e,t){var a=[];if(t)for(var n in t)n&&a.push(n+"="+encodeURIComponent(t[n]));return e+"?"+a.join("&")}},{key:"buildFormData",value:function(e){if(e){var t=new FormData;for(var a in e)a&&t.append(a,e[a]);return t}}}]),e}(),se=new ie,re=se,oe=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ie,"Http","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/api/http.js"),__REACT_HOT_LOADER__.register(se,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/api/http.js")),a(3)),le={GET_ALL_MENU_LIST:oe.c+"/user/showMenuList",HANDLE_APPLY:oe.c+"/apply/handleApply",GET_ALL_APPLY_LIST:oe.c+"/apply/allApplyList",GET_ALL_API_LIST:oe.c+"/apis/listByConditionForAdmin",GET_DATASOURCE_BASE_INFO:oe.c+"/dataSource/listDataSourceBaseInfo",DELETE_API:oe.c+"/apis/deleteApi",UPDATE_API:oe.c+"/apis/updateApiStatus",GET_API_CALL_RANK:oe.c+"/apis/getApiCallUserRankList",GET_API_BUY_STATE:oe.c+"/apply/getApiApplyList",DELETE_CATAGORY:oe.c+"/catalogue/deleteCatalogue",ADD_CATAGORY:oe.c+"/catalogue/addCatalogue",UPDATE_CATAGORY:oe.c+"/catalogue/updateCatalogue",NEW_API:oe.c+"/apis/createApi",CHANGE_API:oe.c+"/apis/updateApi",SAVE_OR_UPDATE_APIINFO:oe.c+"/apis/saveOrUpdateApiInfo",GET_TABLE_BY_DATASOURCE:oe.c+"/dataSource/tablelist",GET_TABLE_COLUMNS_DETAIL:oe.c+"/dataSource/tablecolumn",GET_TABLE_PREVIEW_DATA:oe.c+"/dataSource/preview",GET_API_DETAIL_INFO:oe.c+"/apis/getApiInfo",FORMAT_SQL:oe.c+"/apis/sqlFormat",PARSER_SQL:oe.c+"/apis/sqlParser",TEST_API:oe.c+"/apis/apiTest",GET_APPLY_LIST:oe.c+"/apply/userApplyList",UPDATE_APPLY_STATUS:oe.c+"/apply/updateApplyStatusForNormal",UPDATE_APPLY_STATUS_ADMIN:oe.c+"/apply/updateApplyStatusForManager",GET_USER_API_CALL_INFO:oe.c+"/apis/getApiCallInfoForNormal",GET_USER_API_CALL_INFO_ADMIN:oe.c+"/apis/getApiCallInfoForManager",GET_API_CALL_ERROR_INFO:oe.c+"/log/getApiCallErrorInfoForNormal",GET_API_CALL_ERROR_LOG:oe.c+"/log/queryApiCallLogForNormal",GET_API_CALL_ERROR_LOG_ADMIN:oe.c+"/log/queryApiCallLogForManager",GET_API_CALL_URL:oe.c+"/apis/getApiCallUrl",GET_API_CREATOR_INFO:oe.c+"/apis/getApiCreatorInfo",GET_CATALOGUE:oe.c+"/catalogue/getCatalogue",GET_API_MARKET_LIST:oe.c+"/apis/listByCondition",GET_MARKET_API_DETAIL:oe.c+"/apis/getApiDetail",GET_API_EXT_INFO:oe.c+"/apis/getApiExtInfoForNormal",GET_API_EXT_INFO_ADMIN:oe.c+"/apis/getApiExtInfoForManager",APPLY_API:oe.c+"/apply/apiApply",GET_MARKET_TOP_CALL_FUNC:oe.c+"/apis/listApiCallNumTopNForManager",GET_API_FAIL_RANK:oe.c+"/apis/listApiCallFailRateTopNForNormal",GET_API_FAIL_RANK_ADMIN:oe.c+"/apis/listApiCallFailRateTopNForManager",GET_API_CALL_INFO:oe.c+"/apis/getApiCallInfoForNormal",GET_USER_API_CALL_RANK:oe.c+"/apis/listApiCallNumTopN",GET_USER_API_SUB_INFO:oe.c+"/apply/getApiSubscribe",GET_MARKET_API_CALL_RANK:oe.c+"/apis/listUserCallTopN",GET_API_CALL_ERROR_INFO_ADMIN:oe.c+"/log/getApiCallErrorInfoForManager",GET_MARKET_API_APPLY_INFO:oe.c+"/apply/getApplyCount",DA_GET_USER_BY_ID:oe.c+"/user/getUserById",DA_GET_USER_AUTH_BY_ID:oe.c+"/user/getUserById",GET_DATA_SOURCES:oe.c+"/dataSource/pageQuery",CHECK_CONNECTION:oe.c+"/dataSource/checkConnection",ADD_DATA_SOURCES:oe.c+"/dataSource/addSource",UPDATE_DATA_SOURCES:oe.c+"/dataSource/updateSource",DELETE_DATA_SOURCES:oe.c+"/dataSource/deleteSource",GET_DATA_SOURCES_LIST:oe.c+"/dataSource/list",GET_DATA_SOURCES_TYPE:oe.c+"/dataSource/getTypes",GET_DATA_SOURCES_TABLE:oe.c+"/dataSource/tablelist",GET_DATA_SOURCES_COLUMN:oe.c+"/dataSource/tablecolumn",GET_DATA_SOURCES_PART:oe.c+"/dataSource/getPartValue",GET_DATA_SOURCES_PREVIEW:oe.c+"/dataSource/preview"},ce=le,pe=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(le,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/reqUrls.js"),APP_CONF.UIC_URL||""),ue=APP_CONF.UIC_DOMAIN||"",de={logout:function(){var e=this;re.post(ce.APP_LOGOUT).then(function(t){1===t.code&&e.openLogin()})},openLogin:function(){Z.a.clear(),N.a.deleteCookie("dt_user_id",ue,"/"),N.a.deleteCookie("dt_token",ue,"/"),N.a.deleteCookie("dt_tenant_id",ue,"/"),N.a.deleteCookie("dt_tenant_name",ue,"/"),N.a.deleteCookie("dt_username",ue,"/"),N.a.deleteCookie("dt_is_tenant_admin",ue,"/"),N.a.deleteCookie("dt_is_tenant_creator",ue,"/"),N.a.deleteCookie("project_id",ue,"/"),window.location.href=pe+"/#/login"},getLoginedUser:function(){return re.post(ce.DA_GET_USER_BY_ID)},getUserList:function(){return re.post(ce.DATA_API_GET_USER_LIST)}},_e=de,me=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(pe,"UIC_URL_TARGET","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/api/user.js"),__REACT_HOT_LOADER__.register(ue,"UIC_DOMAIN_URL","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/api/user.js"),__REACT_HOT_LOADER__.register(de,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/api/user.js")),a(35)),he=a.n(me)()(["GET_USER","UPDATE_USER","GET_NOT_PROJECT_USERS","GET_PROJECT_USERS","GET_USER_LIST"],{prefix:"user/"}),ge=he,Ae=ge;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(he,"userActions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/userActions.js"),__REACT_HOT_LOADER__.register(ge,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/userActions.js"));function Ee(){return function(e){_e.getLoginedUser().then(function(t){if(1===t.code)return e({type:Ae.GET_USER,data:t.data})})}}function fe(e){return{type:Ae.UPDATE_USER,data:e}}function Te(e){return function(t){_e.getUserList(e).then(function(e){1===e.code&&t({type:Ae.GET_USER_LIST,data:e.data})})}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ee,"getUser","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/actions/user.js"),__REACT_HOT_LOADER__.register(fe,"updateUser","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/actions/user.js"),__REACT_HOT_LOADER__.register(Te,"getUserList","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/actions/user.js"));var ye,ve=a(377),Ce={getUserList:function(){return re.post(ce.DQ_GET_USER_LIST)},getMenuList:function(){return re.post(ce.GET_ALL_MENU_LIST)}},be=Ce,ke=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Ce,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/api/common.js"),{getUserList:function(e){return function(t){be.getUserList(e).then(function(e){1===e.code&&t({type:ve.a.GET_USER_LIST,payload:e.data})})}},getMenuList:function(){return function(e){be.getMenuList().then(function(t){1===t.code&&e({type:ve.a.GET_ALL_MENU_LIST,payload:t.data})})}}}),De=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ke,"commonActions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/actions/common.js"),a(153)),xe={children:I.a.node},Re={children:[]},we=function(e){return{common:e.common}},Oe=Object(v.b)(we)(ye=function(e){function t(){return m()(this,t),E()(this,(t.__proto__||d()(t)).apply(this,arguments))}return T()(t,e),g()(t,[{key:"componentWillMount",value:function(){(0,this.props.dispatch)(ke.getMenuList())}},{key:"componentDidMount",value:function(){var e=this.props.dispatch;e(Ee()),e(Object(De.a)(oe.i))}},{key:"render",value:function(){var e=this.props.children,t=r.a.createElement(V,null);return this.props.common.menuList||(e=r.a.createElement(q,null),t=null),r.a.createElement("div",{className:"main"},t,r.a.createElement("div",{className:"container overflow-x-hidden"},e||"加载中...."))}}]),t}(s.Component))||ye;Oe.propTypes=xe,Oe.defaultProps=Re;var Se=Oe,Le=Se,Ie=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(xe,"propType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/index.js"),__REACT_HOT_LOADER__.register(Re,"defaultPro","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/index.js"),__REACT_HOT_LOADER__.register(we,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/index.js"),__REACT_HOT_LOADER__.register(Oe,"Main","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/index.js"),__REACT_HOT_LOADER__.register(Se,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/index.js")),a(176),a(52)),Ne=a.n(Ie),Pe=a(11),He=a(86),Ue=(a(57),a(29)),je=a.n(Ue),Me=(a(48),a(26)),Ge=a.n(Me),Fe=function(e){function t(){return m()(this,t),E()(this,(t.__proto__||d()(t)).apply(this,arguments))}return T()(t,e),g()(t,[{key:"render",value:function(){return r.a.createElement(je.a,{noHovering:!0,style:{height:363}},r.a.createElement(Ge.a,{rowKey:function(e){return e.userId},className:"m-table",rowClassName:function(){return"h-33"},pagination:!1,columns:[{title:"排名",dataIndex:"rank",key:"rank",className:"color-666",render:function(e,t,a){return r.a.createElement("span",{className:"rank-number rank-number_"+(a+1)},a+1)}},{title:"用户",dataIndex:"userName",key:"userName",className:"color-666"},{title:"调用次数",dataIndex:"callNum",key:"callNum",className:"color-666"}],dataSource:this.props.data||[],onChange:this.onTableChange}))}}]),t}(s.Component),Ve=Fe,qe=Ve,Be=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Fe,"TopCall","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/topCall.js"),__REACT_HOT_LOADER__.register(Ve,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/topCall.js")),function(e){function t(){return m()(this,t),E()(this,(t.__proto__||d()(t)).apply(this,arguments))}return T()(t,e),g()(t,[{key:"getDataSource",value:function(){return this.props.data||[]}},{key:"openNewDetail",value:function(e,t){this.props.isAdmin?this.props.router.push({pathname:"/api/manage",state:{apiName:t,apiId:e}}):this.props.router.push({pathname:"/api/mine/approved",query:{apiName:t,apiId:e}})}},{key:"render",value:function(){var e=this;return r.a.createElement(je.a,{noHovering:!0,title:this.props.noTitle?"":"失败率TOP10",style:{height:this.props.cardHeight||403},className:"shadow"},r.a.createElement(Ge.a,{rowKey:function(e){return e.id},className:"m-table",rowClassName:function(){return"h-33"},pagination:!1,columns:[{title:"排名",dataIndex:"rank",key:"rank",className:"color-666",render:function(e,t,a){return r.a.createElement("span",{className:"rank-number rank-number-fail_"+(a+1)},a+1)}},{title:"接口",dataIndex:"apiName",key:"apiName",className:"color-666",render:function(t,a){return r.a.createElement("a",{onClick:e.openNewDetail.bind(e,a.id,a.apiName)},t)}},{title:"调用次数",dataIndex:"callNum",key:"callNum",className:"color-666"},{title:"失败率",dataIndex:"failRate",key:"failRate",className:"color-666",render:function(e){return e+"%"}}],dataSource:this.getDataSource(),onChange:this.onTableChange}))}}]),t}(s.Component)),ze=Be,Ke=ze,Ye=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Be,"TopFail","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/topFail.js"),__REACT_HOT_LOADER__.register(ze,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/topFail.js")),{MYSQL:1,ORACLE:2,SQLSERVER:3,HDFS:6,HIVE:7,HBASE:8,FTP:9,MAXCOMPUTE:10,ADS:11}),We={GUIDE:0,SQL:1},Je={POST:1},Qe={1:"POST",2:"GET"},Xe={"-1":"NO_APPLY",0:"IN_HAND",1:"PASS",2:"REJECT",3:"STOPPED",4:"DISABLE",5:"EXPIRED"},$e={NO_APPLY:-1,IN_HAND:0,PASS:1,REJECT:2,STOPPED:3,DISABLE:4,EXPIRED:5},Ze={SUCCESS:0,STOP:1,EDITTING:2},et={YES:0,NO:1},tt={"-1":"nothing",0:"inhand",1:"success",2:"notPass",3:"stop",4:"disabled",5:"expired"},at={0:"notApproved",1:"pass",2:"rejected",3:"stop",4:"disabled",5:"expired"},nt={0:"success",1:"stop",2:"editting"},it=["未知类型","MySql","Oracle","SQLServer","PostgreSQL","RDBMS","HDFS","Hive","HBase","FTP","MaxCompute"],st={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},rt={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}},ot={labelCol:{span:0},wrapperCol:{span:24}},lt={title:{text:"堆叠区域图",textStyle:{fontSize:12},textAlign:"left"},tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985"}}},color:["#2491F7","#7460EF","#26DAD2","#79E079","#7A64F3","#FFDC53","#9a64fb"],legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},toolbox:{feature:{saveAsImage:{show:!1}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{show:!0},axisLine:{lineStyle:{color:"#DDDDDD"}},axisLabel:{textStyle:{color:"#666666"}},nameTextStyle:{color:"#666666"},splitLine:{color:"#666666"}}],yAxis:[{type:"value",axisLabel:{formatter:"{value} 个",textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",nameGap:20,axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#DDDDDD",type:"dashed"}}}],series:[]},ct={tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985"}}},color:["#2491F7","#7460EF","#26DAD2","#79E079","#7A64F3","#FFDC53","#9a64fb"],legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},toolbox:{feature:{saveAsImage:{show:!1}}},grid:{left:"3%",right:"4%",bottom:"30",top:40,containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{show:!0},axisLine:{lineStyle:{color:"#DDDDDD"}},axisLabel:{textStyle:{color:"#666666"}},nameTextStyle:{color:"#666666"},splitLine:{color:"#666666"}}],yAxis:[{nameGap:25,type:"value",name:"调用次数",axisLabel:{textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",axisLine:{show:!1},axisTick:{show:!1},splitLine:!1,minInterval:1},{nameGap:25,type:"value",name:"失败率 (%)",axisLabel:{textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#DDDDDD",type:"dashed"}},max:100}],series:[]},pt={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"horizontal",x:"center",y:"bottom",data:["参数错误","调用超时","异常访问","超出限额","禁用","其他"],itemWidth:5,itemHeight:5,textStyle:{color:"#666"}},series:[{name:"错误类型",type:"pie",radius:["35%","55%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"}},labelLine:{normal:{show:!1}},data:[{value:335,name:"参数错误",itemStyle:{normal:{color:"#1C86EE"}}},{value:310,name:"调用超时",itemStyle:{normal:{color:"#EE9A00"}}},{value:234,name:"异常访问",itemStyle:{normal:{color:"#EE4000"}}},{value:535,name:"超出限额",itemStyle:{normal:{color:"#40E0D0"}}},{value:1158,name:"禁用",itemStyle:{normal:{color:"#71C671"}}},{value:548,name:"其他",itemStyle:{normal:{color:"#A2B5CD"}}}]}]},ut=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ye,"DATA_SOURCE","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(We,"API_MODE","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(Je,"API_METHOD","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(Qe,"API_METHOD_key","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(Xe,"API_STATUS","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register($e,"API_USER_STATUS","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(Ze,"API_SYSTEM_STATUS","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(et,"API_DELETE","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(tt,"EXCHANGE_API_STATUS","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(at,"EXCHANGE_APPLY_STATUS","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(nt,"EXCHANGE_ADMIN_API_STATUS","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(it,"dataSourceTypes","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(st,"formItemLayout","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(rt,"tailFormItemLayout","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(ot,"rowFormItemLayout","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(lt,"lineAreaChartOptions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(ct,"doubleLineAreaChartOptions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(pt,"pieOption","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/index.js")),a(78));a(601),a(199),a(139),a(138);var dt=[{code:"disable",name:"禁用",color:"#71C671"},{code:"unauthorize",name:"未认证",color:"rgba(244,67,54,0.9)"},{code:"paramerror",name:"参数错误",color:"#1C86EE"},{code:"timeout",name:"超时",color:"#EE9A00"},{code:"outlimit",name:"超出限制",color:"#40E0D0"},{code:"other",name:"其他",color:"#A2B5CD"}],_t=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={},n.resize=function(){var e;return(e=n).__resize__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this.props.chartData||[];this.intPie(e)}},{key:"__resize__REACT_HOT_LOADER__",value:function(){this.state.pieChart&&this.state.pieChart.resize()}},{key:"componentWillReceiveProps",value:function(e){this.props.chartData!=e.chartData&&this.intPie(e.chartData)}},{key:"intPie",value:function(e){for(var t=[],a=[],n=0;n<e.length;n++){var i=e[n],s=dt[i.type-1];s&&t.indexOf(s.name)<0&&(t.push(s.name),a.push({value:i.callNum,name:s.name,itemStyle:{normal:{color:s.color}}}))}var r=ut.init(document.getElementById("ErrorDistributedPie")),o=Object(Pe.cloneDeep)(pt);o.legend.data=t,o.series[0].data=a,r.setOption(o),this.setState({pieChart:r})}},{key:"render",value:function(){return r.a.createElement(je.a,{noHovering:!0,title:"错误类型分布",style:{height:403},className:"shadow"},r.a.createElement(He.a,{onResize:this.resize.bind(this)},r.a.createElement("article",{id:"ErrorDistributedPie",style:{width:"100%",height:"300px"}})))}}]),t}(s.Component),mt=_t,ht=mt,gt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(dt,"errorDic","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/errorDistributed.js"),__REACT_HOT_LOADER__.register(_t,"ErrorDistributed","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/errorDistributed.js"),__REACT_HOT_LOADER__.register(mt,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/errorDistributed.js")),a(88)),At={getApiCallInfoForNormal:function(e){return re.post(ce.GET_API_CALL_INFO,e)},getApiCallInfoForManager:function(e){return re.post(ce.GET_USER_API_CALL_INFO_ADMIN,e)},listApiCallFailRateTopNForNormal:function(e){return re.post(ce.GET_API_FAIL_RANK,e)},listApiCallFailRateTopNForManager:function(e){return re.post(ce.GET_API_FAIL_RANK_ADMIN,e)},getApiCallNumTopN:function(e){return re.post(ce.GET_USER_API_CALL_RANK,e)},getApiSubscribe:function(e){return re.post(ce.GET_USER_API_SUB_INFO,e)},getUserCallTopN:function(e){return re.post(ce.GET_MARKET_API_CALL_RANK,e)},getApiCallErrorInfoForNormal:function(e){return re.post(ce.GET_API_CALL_ERROR_INFO,e)},getApiCallErrorInfoForManager:function(e){return re.post(ce.GET_API_CALL_ERROR_INFO_ADMIN,e)},getApplyCount:function(e){return re.post(ce.GET_MARKET_API_APPLY_INFO,e)},listApiCallNumTopNForManager:function(e){return re.post(ce.GET_MARKET_TOP_CALL_FUNC,e)}},Et=At,ft=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(At,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/api/dashBoard.js"),{chooseUserDate:function(e,t){return function(a){a({type:gt.a.CHOOSE_USER_DATE,payload:e}),a(ft.getApiCallInfo({time:e},!1,e)),a(ft.getApiCallFailRateTopN({time:e,topn:t},!1,e)),a(ft.getApiCallNumTopN({time:e,topn:t},e)),a(ft.getApiSubscribe(e))}},chooseAdminDate:function(e,t){return function(a){a({type:gt.a.CHOOSE_ADMIN_DATE,payload:e}),a(ft.getApiCallErrorInfo(e)),a(ft.getApiCallInfo({time:e},!0,e)),a(ft.getApprovedMsgCount()),a(ft.getUserCallTopN({time:e,topn:t},!0,e)),a(ft.getApiCallFailRateTopN({time:e,topn:t},!0,e)),a(ft.listApiCallNumTopNForManager({time:e,topn:t}))}},getApiCallInfo:function(e,t,a){var n="getApiCallInfoForNormal",i=gt.a.GET_USER_CALL_INFO;return t&&(n="getApiCallInfoForManager",e.useAdmin=!0,i=gt.a.GET_MARKET_CALL_INFO),function(t){Et[n](e).then(function(e){1===e.code&&t({type:i,payload:{callCount:e.data.callCount,failPercent:e.data.failRate,apiNum:e.data.apiNum,infoList:e.data.infoList},date:a})})}},getApprovedMsgCount:function(){return function(e){Et.getApplyCount({status:0}).then(function(t){1===t.code&&e({type:gt.a.GET_MARKET_API_APPLY_INFO,payload:t.data})})}},getUserCallTopN:function(e,t,a){e.useAdmin=!0;var n=gt.a.GET_MARKET_API_CALL_RANK;return function(t){Et.getUserCallTopN(e).then(function(e){1===e.code&&t({type:n,payload:e.data,date:a})})}},getApiCallFailRateTopN:function(e,t,a){var n="listApiCallFailRateTopNForNormal",i=gt.a.GET_API_FAIL_RANK;return t&&(n="listApiCallFailRateTopNForManager",e.useAdmin=!0,i=gt.a.GET_MARKET_API_FAIL_RANK),function(t){Et[n](e).then(function(e){1===e.code&&t({type:i,payload:e.data,date:a})})}},getApiSubscribe:function(e){return function(t){Et.getApiSubscribe().then(function(a){1===a.code&&t({type:gt.a.GET_USER_API_SUB_INFO,payload:a.data,date:e})})}},getApiCallNumTopN:function(e,t){return function(a){Et.getApiCallNumTopN(e).then(function(e){1===e.code&&a({type:gt.a.GET_USER_API_CALL_RANK,payload:e.data,date:t})})}},getApiCallErrorInfo:function(e){return function(t){Et.getApiCallErrorInfoForManager({time:e}).then(function(a){if(1===a.code){var n=a.data&&a.data.recordInfoList||[];t({type:gt.a.GET_MARKET_API_ERROR_INFO,payload:n,date:e})}})}},listApiCallNumTopNForManager:function(e){return function(t){Et.listApiCallNumTopNForManager(e).then(function(a){if(1===a.code){var n=a.data||[];t({type:gt.a.GET_MARKET_TOP_CALL_FUNC,payload:n,date:e.time})}})}}}),Tt=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ft,"dashBoardActions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/actions/dashBoard/index.js"),a(66),a(25)),yt=a.n(Tt),vt=(a(81),a(34)),Ct=a.n(vt),bt=(a(74),a(19)),kt=a.n(bt),Dt=(a(404),a(204)),xt=a.n(Dt),Rt=(a(91),a(51)),wt=a.n(Rt),Ot=function(e){function t(){return m()(this,t),E()(this,(t.__proto__||d()(t)).apply(this,arguments))}return T()(t,e),g()(t,[{key:"getDataSource",value:function(){return this.props.data||[]}},{key:"openNewDetail",value:function(e,t){this.props.idAdmin?this.props.router.push({pathname:"/api/manage",state:{apiName:t,apiId:e}}):this.props.router.push({pathname:"/api/mine/approved",query:{apiName:t,apiId:e}})}},{key:"render",value:function(){var e=this;return r.a.createElement(je.a,{noHovering:!0,style:{height:363}},r.a.createElement(Ge.a,{rowKey:function(e){return e.id},className:"m-table",rowClassName:function(){return"h-33"},pagination:!1,columns:[{title:"排名",dataIndex:"rank",key:"rank",className:"color-666",render:function(e,t,a){return r.a.createElement("span",{className:"rank-number rank-number_"+(a+1)},a+1)}},{title:"接口",dataIndex:"apiName",key:"apiName",className:"color-666",render:function(t,a){return r.a.createElement("a",{onClick:e.openNewDetail.bind(e,a.id,a.apiName)},t)}},{title:"调用次数",dataIndex:"callNum",key:"callNum",className:"color-666"},{title:"失败率",dataIndex:"failRate",key:"failRate",className:"color-666",render:function(e){return e+"%"}}],dataSource:this.getDataSource(),onChange:this.onTableChange}))}}]),t}(s.Component),St=Ot,Lt=St,It=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ot,"TopCall","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/topCallFunc.js"),__REACT_HOT_LOADER__.register(St,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/topCallFunc.js")),a(78));a(148),a(199),a(139),a(138);var Nt,Pt=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={},n.resize=function(){var e;return(e=n).__resize__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this.props.chartData||[];this.initLineChart(e)}},{key:"__resize__REACT_HOT_LOADER__",value:function(){this.state.lineChart&&this.state.lineChart.resize()}},{key:"componentWillReceiveProps",value:function(e){this.props.chartData!=e.chartData&&this.initLineChart(e.chartData)}},{key:"initLineChart",value:function(e){for(var t=[],a=[],n=[],i=0;i<e.length;i++)if(t.push(e[i].callCount),a.push(e[i].failRate),this.props.date)switch(this.props.date){case"1":n.push(N.a.formatHours(e[i].time));break;case"7":n.push(N.a.formatDateHours(e[i].time));break;case"30":n.push(N.a.formatDate(e[i].time))}var s=It.init(document.getElementById("CallGraph")),r=Object(Pe.cloneDeep)(ct);r.tooltip.formatter=function(e){for(var t=e[0].name,a=0,n=e.length;a<n;a++){var i="次";"失败率"==e[a].seriesName&&(i="%"),t+='<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e[a].color+'"></span>'+e[a].seriesName+" : "+e[a].value+i}return t},r.series=[{name:"调用次数",data:t,type:"line",smooth:!0,itemStyle:{normal:{color:"#1C86EE"}}},{name:"失败率",data:a,type:"line",smooth:!0,yAxisIndex:1,itemStyle:{normal:{color:"rgba(244,67,54,0.9)"}}}],r.xAxis[0].data=n,s.setOption(r),this.setState({lineChart:s})}},{key:"render",value:function(){return r.a.createElement(je.a,{noHovering:!0,className:"shadow"},r.a.createElement(yt.a,{style:{width:"100%"},gutter:130,className:"m-count padding-l20 height-101"},r.a.createElement(kt.a,{span:6},r.a.createElement("section",{className:"m-count-section margin-t20",style:{width:150}},r.a.createElement("span",{className:"m-count-title text-left"},"累计调用"),r.a.createElement("span",{className:"m-count-content font-black text-left"},this.props.callCount||0,r.a.createElement("span",{style:{fontSize:12}},"次")))),r.a.createElement(kt.a,{span:4},r.a.createElement("section",{className:"m-count-section margin-t20",style:{width:100}},r.a.createElement("span",{className:"m-count-title text-left"},"失败率"),r.a.createElement("span",{className:"m-count-content font-red text-left"},this.props.failPercent||0,r.a.createElement("span",{style:{fontSize:12}},"%")))),this.props.userView?null:r.a.createElement(kt.a,{span:6},r.a.createElement("section",{className:"m-count-section margin-t20",style:{width:150}},r.a.createElement("span",{className:"m-count-title text-left"},"接口总数"),r.a.createElement("span",{className:"m-count-content font-black text-left"},this.props.apiNum||"---")))),r.a.createElement(He.a,{onResize:this.resize.bind(this)},r.a.createElement("article",{id:"CallGraph",style:{width:"100%",height:"300px"}})))}}]),t}(s.Component),Ht=Pt,Ut=Ht,jt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Pt,"TopCall","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/overView.js"),__REACT_HOT_LOADER__.register(Ht,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/overView.js")),wt.a.Button),Mt=wt.a.Group,Gt=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={nowView:"callTop"},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.props.chooseAdminDate(10,{target:{value:this.props.dashBoard.adminDate}})}},{key:"topViewChange",value:function(e){this.setState({nowView:e})}},{key:"getDateChoose",value:function(){return this.props.dashBoard.adminDate||"1"}},{key:"render",value:function(){var e=this.props.dashBoard.approvalWarning,t=this.props.dashBoard.approvedMsgCount>0&&e?r.a.createElement(xt.a,{message:r.a.createElement("span",null,"您有",this.props.dashBoard.approvedMsgCount,"条未处理的Api申请，请您及时处理。",r.a.createElement(y.c,{to:"/api/approval?status=0"},"立即审批")," "),type:"warning",closable:!0,onClose:this.props.closeWarning}):null,a=this.props.dashBoard.marketOverview[this.getDateChoose()];return r.a.createElement("div",null,r.a.createElement("div",{className:"padding_t14_lr20"},t),r.a.createElement("div",{className:"box-title m-radio-group"},r.a.createElement("span",null,"调用情况"),r.a.createElement(Mt,{defaultValue:this.getDateChoose(),className:"no-bd nobackground",onChange:this.props.chooseAdminDate.bind(this,10),style:{marginTop:"8.5px",float:"right"}},r.a.createElement(jt,{value:"1"},"最近24小时"),r.a.createElement(jt,{value:"7"},"最近7天"),r.a.createElement(jt,{value:"30"},"最近30天"))),r.a.createElement("div",{className:"box-card m-card"},r.a.createElement(yt.a,{gutter:20},r.a.createElement(kt.a,{span:16},r.a.createElement(Ut,{date:this.props.dashBoard.adminDate,chartData:a.callInfo.infoList,callCount:a.callInfo.callCount,apiNum:a.callInfo.apiNum,failPercent:a.callInfo.failPercent})),r.a.createElement(kt.a,{span:8,className:"m-card-small m-tabs noheight"},r.a.createElement(Ct.a,{defaultActiveKey:this.state.nowView,onChange:this.topViewChange.bind(this),className:"shadow"},r.a.createElement(Ct.a.TabPane,{tab:"调用用户Top10",key:"callTop"},r.a.createElement(qe,{data:a.callCountTop})),r.a.createElement(Ct.a.TabPane,{tab:"调用量Top10",key:"callFuncTop"},r.a.createElement(Lt,{idAdmin:!0,router:this.props.router,data:a.topCallFunc}))))),r.a.createElement(yt.a,{className:"m-card-small margin-t20",gutter:20},r.a.createElement(kt.a,{span:16},r.a.createElement(ht,{chartData:a.failInfoList})),r.a.createElement(kt.a,{span:8},r.a.createElement(Ke,{isAdmin:!0,router:this.props.router,data:a.callFailTop})))))}}]),t}(s.Component),Ft=Gt,Vt=Ft,qt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(jt,"RadioButton","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/adminDashboard.js"),__REACT_HOT_LOADER__.register(Mt,"RadioGroup","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/adminDashboard.js"),__REACT_HOT_LOADER__.register(Gt,"AdminDashboard","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/adminDashboard.js"),__REACT_HOT_LOADER__.register(Ft,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/adminDashboard.js")),function(e){function t(){return m()(this,t),E()(this,(t.__proto__||d()(t)).apply(this,arguments))}return T()(t,e),g()(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"box-mid"},r.a.createElement(j.a,{type:"shop",style:{fontSize:100,color:"#94A8C6"}}),r.a.createElement("br",null),r.a.createElement("span",{className:"color-666 font-14 margin-t14 block"},"您还没有订购任何Api，您可以进入 ",r.a.createElement(y.c,{to:"/api/market"},"Api市场")," 进行订购"))}}]),t}(s.Component)),Bt=qt,zt=Bt,Kt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(qt,"HaveNoApi","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/haveNoApi.js"),__REACT_HOT_LOADER__.register(Bt,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/haveNoApi.js")),wt.a.Button),Yt=wt.a.Group,Wt=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={nowView:"callTop"},n.getView=function(){var e;return(e=n).__getView__REACT_HOT_LOADER__.apply(e,arguments)},n.getMainView=function(){var e;return(e=n).__getMainView__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.props.chooseUserDate(10,{target:{value:this.props.dashBoard.userDate}})}},{key:"topViewChange",value:function(e){this.setState({nowView:e})}},{key:"getDateChoose",value:function(){return this.props.dashBoard.userDate||"1"}},{key:"isApiExist",value:function(){return!0}},{key:"__getView__REACT_HOT_LOADER__",value:function(){return this.isApiExist()?this.getMainView():r.a.createElement(zt,null)}},{key:"__getMainView__REACT_HOT_LOADER__",value:function(){var e=this.props.dashBoard.userOverview[this.getDateChoose()];return r.a.createElement("div",null,r.a.createElement("div",{className:"box-title m-radio-group"},r.a.createElement("span",null,"调用情况"),r.a.createElement(Yt,{defaultValue:this.getDateChoose(),className:"no-bd nobackground",onChange:this.props.chooseUserDate.bind(this,10),style:{marginTop:"8.5px",float:"right"}},r.a.createElement(Kt,{value:"1"},"最近24小时"),r.a.createElement(Kt,{value:"7"},"最近7天"),r.a.createElement(Kt,{value:"30"},"最近30天"))),r.a.createElement("div",{className:"box-card m-card"},r.a.createElement(yt.a,{gutter:20},r.a.createElement(kt.a,{span:16},r.a.createElement(Ut,{userView:!0,mini:!0,date:this.props.dashBoard.userDate,chartData:e.callInfo.infoList,callCount:e.callInfo.callCount,topCallFunc:e.callInfo.callTopAPI,failPercent:e.callInfo.failPercent})),r.a.createElement(kt.a,{span:8,className:"m-card-small  m-tabs noheight"},r.a.createElement(Ct.a,{style:{borderTop:"1px #dcdcdc solid"},defaultActiveKey:this.state.nowView,onChange:this.topViewChange.bind(this),className:"shadow"},r.a.createElement(Ct.a.TabPane,{tab:"调用量Top10",key:"callTop"},r.a.createElement(Lt,{router:this.props.router,data:e.callCountTop})),r.a.createElement(Ct.a.TabPane,{tab:"失败率Top10",key:"failTop"},r.a.createElement(Ke,{router:this.props.router,cardHeight:"363",noTitle:!0,data:e.callFailTop}))))),r.a.createElement(yt.a,{className:"m-card-small margin-t20",gutter:20},r.a.createElement(kt.a,{span:16},r.a.createElement(je.a,{noHovering:!0,title:"订购情况",className:"shadow"},r.a.createElement(yt.a,{className:"m-count height-101",justify:"space-around",type:"flex"},r.a.createElement(kt.a,{span:8},r.a.createElement("section",{className:"m-count-section margin-t20",style:{width:100}},r.a.createElement("span",{className:"m-count-title "},"审批中"),r.a.createElement("span",{className:"m-count-content font-organge "},e.approvalInfo.approvingNum))),r.a.createElement(kt.a,{span:8},r.a.createElement("section",{className:"m-count-section margin-t20",style:{width:100}},r.a.createElement("span",{className:"m-count-title "},"审批通过"),r.a.createElement("span",{className:"m-count-content font-green "},e.approvalInfo.approvedNum))),r.a.createElement(kt.a,{span:8},r.a.createElement("section",{className:"m-count-section margin-t20",style:{width:150}},r.a.createElement("span",{className:"m-count-title "},"已禁用和已停用接口"),r.a.createElement("span",{className:"m-count-content font-gray "},e.approvalInfo.stoppedNum)))))))))}},{key:"render",value:function(){return r.a.createElement("div",null,this.getView())}}]),t}(s.Component),Jt=Wt,Qt=Jt;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Kt,"RadioButton","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/userDashboard.js"),__REACT_HOT_LOADER__.register(Yt,"RadioGroup","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/userDashboard.js"),__REACT_HOT_LOADER__.register(Wt,"UserDashboard","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/userDashboard.js"),__REACT_HOT_LOADER__.register(Jt,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/userDashboard.js")),a(78);a(148),a(199),a(139),a(138);var Xt,$t,Zt=function(e){return{dashBoard:e.dashBoard,user:e.user,common:e.common}},ea=function(e){return{chooseUserDate:function(t,a){e(ft.chooseUserDate(a.target.value,t))},chooseAdminDate:function(t,a){e(ft.chooseAdminDate(a.target.value,t))},getApiCallInfo:function(t,a,n){e(ft.getApiCallInfo(t,a,n))},getApprovedMsgCount:function(){e(ft.getApprovedMsgCount())},getUserCallTopN:function(t,a,n){e(ft.getUserCallTopN({topn:t,time:n},a,n))},getApiCallFailRateTopN:function(t,a,n){e(ft.getApiCallFailRateTopN({topn:t,time:n},a,n))},getApiSubscribe:function(t){e(ft.getApiSubscribe(t))},getApiCallErrorInfo:function(t){e(ft.getApiCallErrorInfo(t))},listApiCallNumTopNForManager:function(t){e(ft.listApiCallNumTopNForManager({topn:10,time:t}))},closeWarning:function(){e({type:gt.a.CLOSE_APPROVAL_WARNING})}}},ta=Object(v.b)(Zt,ea)(Nt=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={dashBoardView:""},n.handleClick=function(){var e;return(e=n).__handleClick__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.dashBoard.alarmTrend,a=e.dashBoard.alarmTrend;Object(Pe.isEmpty)(t)&&!Object(Pe.isEmpty)(a)&&this.initLineChart(a)}},{key:"isAdmin",value:function(){return(this.props.common.menuList||[]).indexOf("overview_market_menu")>-1}},{key:"getNowView",value:function(){return this.isAdmin()?this.state.dashBoardView?this.state.dashBoardView:"overView":"MyView"}},{key:"getDashBoardView",value:function(){return"overView"==this.getNowView()?r.a.createElement(Vt,this.props):r.a.createElement(Qt,this.props)}},{key:"__handleClick__REACT_HOT_LOADER__",value:function(e){this.setState({dashBoardView:e.key})}},{key:"getMenuView",value:function(){return this.isAdmin()?r.a.createElement(Ne.a,{className:"margin-0-20",onClick:this.handleClick,selectedKeys:[this.getNowView()],mode:"horizontal"},r.a.createElement(Ne.a.Item,{key:"overView"},"市场概览"),r.a.createElement(Ne.a.Item,{key:"MyView"},"我的API")):null}},{key:"render",value:function(){this.props.children;return r.a.createElement("div",{className:"dashboard nobackground"},this.getMenuView(),this.getDashBoardView())}}]),t}(s.Component))||Nt,aa=ta,na=aa,ia=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Zt,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/index.js"),__REACT_HOT_LOADER__.register(ea,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/index.js"),__REACT_HOT_LOADER__.register(ta,"Dashboard","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/index.js"),__REACT_HOT_LOADER__.register(aa,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dashboard/index.js")),a(47),a(20)),sa=a.n(ia),ra=(a(49),a(16)),oa=a.n(ra),la=(a(58),a(30)),ca=a.n(la),pa=(a(53),a(17)),ua=a.n(pa),da=(a(43),a(15)),_a=a.n(da),ma=a(590),ha={allApplyList:function(e){return re.post(ce.GET_ALL_APPLY_LIST,e)},handleApply:function(e){return re.post(ce.HANDLE_APPLY,e)}},ga=ha,Aa=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ha,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/api/approval.js"),{allApplyList:function(e){return function(t){return ga.allApplyList(e).then(function(e){if(1===e.code)return t({type:ma.a.GET_ALL_APPLY_LIST,payload:e.data.data}),e})}},handleApply:function(e){return function(t){return ga.handleApply(e).then(function(e){if(1===e.code)return e})}}}),Ea=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Aa,"approvalActions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/actions/approval/index.js"),a(402)),fa={getApplyList:function(e){return re.post(ce.GET_APPLY_LIST,e)},updateApplyStatusForNormal:function(e){return re.post(ce.UPDATE_APPLY_STATUS,e)},updateApplyStatusForManager:function(e){return re.post(ce.UPDATE_APPLY_STATUS_ADMIN,e)},getApiCallInfoForNormal:function(e){return re.post(ce.GET_API_CALL_INFO,e)},getApiCallInfoForManager:function(e){return re.post(ce.GET_USER_API_CALL_INFO_ADMIN,e)},getApiCallErrorInfoForNormal:function(e){return re.post(ce.GET_API_CALL_ERROR_INFO,e)},getApiCallErrorInfoForManager:function(e){return re.post(ce.GET_API_CALL_ERROR_INFO_ADMIN,e)},getApiCallUrl:function(e){return re.post(ce.GET_API_CALL_URL,e)},queryApiCallLogForNormal:function(e){return re.post(ce.GET_API_CALL_ERROR_LOG,e)},queryApiCallLogForManager:function(e){return re.post(ce.GET_API_CALL_ERROR_LOG_ADMIN,e)},getApiCreatorInfo:function(e){return re.post(ce.GET_API_CREATOR_INFO,e)}},Ta=fa,ya=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(fa,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/api/mine.js"),{getApplyingList:function(e){return(e=e||{}).status=[0],function(t){return Ta.getApplyList(e).then(function(e){1===e.code&&t({type:Ea.a.GET_APPLYING_LIST,payload:e.data})})}},getAppliedList:function(e){return(e=e||{}).status&&0!==e.status.length||(e.status=[1,2,3,4,5]),function(t){return Ta.getApplyList(e).then(function(e){if(1===e.code)return t({type:Ea.a.GET_APPLYED_LIST,payload:e.data}),e})}},updateApplyStatus:function(e){var t="updateApplyStatusForNormal";return e.useAdmin&&(t="updateApplyStatusForManager"),function(a){return Ta[t](e).then(function(e){if(1===e.code)return e})}},getApiCallInfo:function(e){var t="getApiCallInfoForNormal";return e.useAdmin&&(t="getApiCallInfoForManager"),function(a){return Ta[t](e).then(function(e){if(1===e.code)return e})}},getApiCallErrorInfo:function(e){return function(t){return Ta.getApiCallErrorInfoForNormal(e).then(function(e){if(1===e.code)return e})}},getApiCallUrl:function(e){return function(t){return Ta.getApiCallUrl(e).then(function(e){if(1===e.code)return e})}},queryApiCallLog:function(e){var t="queryApiCallLogForNormal";return e.useAdmin&&(t="queryApiCallLogForManager"),function(a){return Ta[t](e).then(function(e){if(1===e.code)return e})}},getApiCreatorInfo:function(e){return function(t){return Ta.getApiCreatorInfo(e).then(function(e){if(1===e.code)return e})}}}),va=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ya,"mineActions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/actions/mine/index.js"),a(18)),Ca=a.n(va),ba=_a.a.TextArea,ka=ua.a.Item,Da=ca.a.confirm,xa=_a.a.Group,Ra=oa.a.Option,wa={applyTime:"gmt_modified"},Oa={ascend:"asc",descend:"desc"},Sa=function(e){var t=e.user;return{approval:e.approval,apiManage:e.apiManage,user:t}},La=function(e){return{approvalList:function(t){return e(Aa.allApplyList(t))},handleApply:function(t){return e(Aa.handleApply(t))},updateUserApiStatus:function(t){return e(ya.updateApplyStatus(t))}}},Ia=Object(v.b)(Sa,La)(Xt=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={pageIndex:1,spVisible:!1,data:[],sorter:{},filter:{status:null},userName:"",apiName:"",spApplyMsg:{},total:0,searchType:"用户名称"},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var e=this,t=this.props.router.location.query&&this.props.router.location.query.status,a=[];t&&a.push(t.toString()),this.setState({filter:{status:a&&a.length>0?a:null}},function(){e.getApprovalList()})}},{key:"getApprovalList",value:function(){var e=this;this.props.approvalList({userName:this.state.userName,status:this.state.filter.status&&this.state.filter.status[0],currentPage:this.state.pageIndex,pageSize:20,sort:Oa[this.state.sorter.order],orderBy:wa[this.state.sorter.columnKey],apiName:this.state.apiName}).then(function(t){t&&e.setState({total:t.data.totalCount})})}},{key:"onSourceChange",value:function(){}},{key:"handleCancel",value:function(){this.setState({spVisible:!1,spApplyMsg:{},mode:null})}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,filter:t,sorter:a},function(){n.getApprovalList()})}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:this.state.total}}},{key:"cancelApi",value:function(e){var t=this;Da({title:"确认取消?",content:"确定取消此用户的API调用权限?",onOk:function(){t.props.updateUserApiStatus({applyId:e,useAdmin:!0,status:$e.DISABLE}).then(function(e){e&&($.a.success("取消成功"),t.getApprovalList())})},onCancel:function(){}})}},{key:"redoApi",value:function(e){var t=this;Da({title:"确认恢复?",content:"确定恢复此用户的API调用权限?",onOk:function(){t.props.updateUserApiStatus({applyId:e,useAdmin:!0,status:$e.PASS}).then(function(e){e&&($.a.success("取消成功"),t.getApprovalList())})},onCancel:function(){}})}},{key:"getDealType",value:function(e,t){var a=r.a.createElement("a",{onClick:this.spShow.bind(this,t,!1)},"查看详情"),n=r.a.createElement("a",{onClick:this.spShow.bind(this,t,!0)},"立即审批"),i=r.a.createElement("a",{onClick:this.cancelApi.bind(this,t.id)},"取消授权"),s=r.a.createElement("a",{onClick:this.redoApi.bind(this,t.id)},"恢复授权"),o=[];switch(e){case $e.IN_HAND:o.push(n);break;case $e.PASS:case $e.STOPPED:o.push(a),o.push(r.a.createElement("span",{className:"ant-divider"})),o.push(i);break;case $e.DISABLE:o.push(a),o.push(r.a.createElement("span",{className:"ant-divider"})),o.push(s);break;case $e.EXPIRED:case $e.REJECT:o.push(a)}return r.a.createElement("span",null,o)}},{key:"getSource",value:function(){return this.props.approval.approvalList}},{key:"initColumns",value:function(){var e=this;return[{title:"申请人",dataIndex:"applyUserName",key:"applyUserName"},{title:"申请API",dataIndex:"apiName",key:"apiName"},{title:"状态",dataIndex:"status",key:"status",render:function(e){return r.a.createElement("span",{className:"state-"+at[e]},{notApproved:"未审批",pass:"已通过",rejected:"已拒绝",stop:"已停用",disabled:"取消授权",expired:"已过期"}[at[e]])},filterMultiple:!1,filters:[{text:"未审批",value:"0"},{text:"已通过",value:"1"},{text:"已拒绝",value:"2"},{text:"已停用",value:"3"},{text:"取消授权",value:"4"},{text:"已过期",value:"5"}],filteredValue:this.state.filter.status||null},{title:"申请说明",dataIndex:"applyContent",key:"applyContent",width:"250px"},{title:"申请时间",dataIndex:"applyTime",key:"applyTime",sorter:!0,render:function(e){return N.a.formatDateTime(e)}},{title:"操作",dataIndex:"deal",render:function(t,a){return e.getDealType(a.status,a)}}]}},{key:"renderSourceType",value:function(){return null}},{key:"searchRequire",value:function(e){var t=this,a=this.state,n=a.userName,i=a.apiName,s=a.searchType,r=e.trim();"用户名称"===s?(n=r,i=""):(n="",i=r),this.setState({userName:n,apiName:i,pageIndex:1},function(){t.getApprovalList()})}},{key:"selectSearchType",value:function(e){this.setState({searchType:e})}},{key:"getCardTitle",value:function(){return r.a.createElement("div",{className:"flex font-12"},r.a.createElement(xa,{compact:!0,style:{width:500,margin:"10px 0px"}},r.a.createElement(oa.a,{defaultValue:"用户名称",onChange:this.selectSearchType.bind(this)},r.a.createElement(Ra,{value:"用户名称"},"用户名称"),r.a.createElement(Ra,{value:"API名称"},"API名称")),r.a.createElement(_a.a.Search,{style:{width:"50%"},placeholder:"请输入搜索条件",onSearch:this.searchRequire.bind(this)})))}},{key:"sp",value:function(e){var t=this;this.props.form.validateFields(function(a,n){if(!a){var i=t.state.spApplyMsg.id,s=n.APIGroup;t.props.handleApply({applyId:i,isPassed:e,approvalContent:s}).then(function(e){t.setState({spVisible:!1}),e&&($.a.success("审批成功"),t.getApprovalList())})}})}},{key:"spShow",value:function(e,t){(0,this.props.form.setFieldsValue)({APIGroup:e.replyContent}),this.setState({spVisible:!0,spApplyMsg:e,mode:t?"approval":"view"})}},{key:"getModalFooter",value:function(){return"approval"==this.state.mode?r.a.createElement("div",null,r.a.createElement(sa.a,{type:"danger",onClick:this.sp.bind(this,!1)},"拒绝"),r.a.createElement(sa.a,{type:"primary",onClick:this.sp.bind(this,!0)},"同意")):r.a.createElement(sa.a,{type:"primary",onClick:this.handleCancel.bind(this)},"关闭")}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state,a=t.mode,n=t.spApplyMsg,i="view"==a,s="view"==a?"审批详情":"授权审批";return r.a.createElement("div",{className:"api-approval"},r.a.createElement("h1",{className:"box-title"},"审批授权"),r.a.createElement("div",{className:"margin-0-20 m-card"},r.a.createElement(je.a,{noHovering:!0,title:this.getCardTitle(),className:"shadow"},r.a.createElement(Ge.a,{rowKey:"id",className:"m-table monitor-table",columns:this.initColumns(),loading:!1,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange}))),r.a.createElement(ca.a,{title:s,visible:this.state.spVisible,onCancel:this.handleCancel.bind(this),footer:this.getModalFooter()},r.a.createElement(ua.a,null,r.a.createElement(ka,H()({},st,{label:"API名称"}),n.apiName),r.a.createElement(ka,H()({},st,{label:"申请人"}),n.applyUserName),r.a.createElement(ka,H()({},st,{label:"调用次数"}),-1==n.callLimit?"无限制":n.callLimit),r.a.createElement(ka,H()({},st,{label:"调用周期"}),n.beginTime?new Ca.a(n.beginTime).format("YYYY-MM-DD")+" ~ "+new Ca.a(n.endTime).format("YYYY-MM-DD"):"无限制"),r.a.createElement(ka,H()({},st,{label:"申请说明"}),r.a.createElement(ba,{value:n.applyContent,disabled:!0})),r.a.createElement(ka,H()({},st,{label:"审批说明"}),e("APIGroup",{rules:[{required:!0,message:"请填写审批说明"},{max:200,message:"最大字数不能超过200"}]})(r.a.createElement(ba,{disabled:i}))))))}}]),t}(s.Component))||Xt,Na=ua.a.create()(Ia),Pa=Na,Ha=Pa,Ua=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ba,"TextArea","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(ka,"FormItem","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(Da,"confirm","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(xa,"InputGroup","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(Ra,"Option","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(wa,"sortType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(Oa,"orderType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(Sa,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(La,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(Ia,"APIApproval","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(Na,"WrapComponent","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(Pa,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/approval/index.js")),a(103),a(67)),ja=a.n(Ua),Ma=(a(80),a(46)),Ga=a.n(Ma),Fa=a(33),Va=a.n(Fa),qa=(a(77),a(32)),Ba=a.n(qa),za=r.a.createElement("div",null,"docExample."),Ka=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(za,"docExample","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/helpDoc/docs.js"),function(e){function t(){return m()(this,t),E()(this,(t.__proto__||d()(t)).apply(this,arguments))}return T()(t,e),g()(t,[{key:"render",value:function(){var e=this.props.doc;return r.a.createElement(Ba.a,{key:e,title:n[e]},r.a.createElement(j.a,H()({className:"help-doc"},this.props.style,{type:"question-circle-o"})))}}]),t}(r.a.Component)),Ya=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Ka,"HelpDoc","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/helpDoc/index.js"),a(110)),Wa={getDataSources:function(e){return re.post(ce.GET_DATA_SOURCES,e)},testDSConnection:function(e){return re.post(ce.CHECK_CONNECTION,e)},addDataSource:function(e){return re.post(ce.ADD_DATA_SOURCES,e)},updateDataSource:function(e){return re.post(ce.UPDATE_DATA_SOURCES,e)},deleteDataSource:function(e){return re.post(ce.DELETE_DATA_SOURCES,e)},getDataSourcesType:function(e){return re.post(ce.GET_DATA_SOURCES_TYPE,e)},getDataSourcesList:function(e){return re.post(ce.GET_DATA_SOURCES_LIST,e)},getDataSourcesTable:function(e){return re.post(ce.GET_DATA_SOURCES_TABLE,e)},getDataSourcesColumn:function(e){return re.post(ce.GET_DATA_SOURCES_COLUMN,e)},getDataSourcesPart:function(e){return re.post(ce.GET_DATA_SOURCES_PART,e)},getDataSourcesPreview:function(e){return re.post(ce.GET_DATA_SOURCES_PREVIEW,e)}},Ja=Wa,Qa=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Wa,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/api/dataSource.js"),{getDataSources:function(e){return function(t){t({type:Ya.a.CHANGE_LOADING}),Ja.getDataSources(e).then(function(e){1===e.code&&t({type:Ya.a.GET_DATA_SOURCES,payload:e.data}),t({type:Ya.a.CHANGE_LOADING})})}},getDataSourcesType:function(e){return function(t){Ja.getDataSourcesType(e).then(function(e){1===e.code&&t({type:Ya.a.GET_DATA_SOURCES_TYPE,payload:e.data})})}},getDataSourcesList:function(e){return function(t){Ja.getDataSourcesList(e).then(function(e){1===e.code&&t({type:Ya.a.GET_DATA_SOURCES_LIST,payload:e.data})})}},getDataSourcesTable:function(e){return function(t){Ja.getDataSourcesTable(e).then(function(e){1===e.code?t({type:Ya.a.GET_DATA_SOURCES_TABLE,payload:e.data}):t({type:Ya.a.GET_DATA_SOURCES_TABLE,payload:[]})})}},getDataSourcesColumn:function(e){return function(t){Ja.getDataSourcesColumn(e).then(function(e){1===e.code&&t({type:Ya.a.GET_DATA_SOURCES_COLUMN,payload:e.data})})}},getDataSourcesPart:function(e){return function(t){Ja.getDataSourcesPart(e).then(function(e){1===e.code&&t({type:Ya.a.GET_DATA_SOURCES_PART,payload:e.data})})}},resetDataSourcesPart:function(){return function(e){e({type:Ya.a.RESET_DATA_SOURCES_PART})}},getDataSourcesPreview:function(e){return function(t){Ja.getDataSourcesPreview(e).then(function(e){if(1===e.code){var a=e.data,n=a.columnList,i=a.dataList;e.data.dataList=i.map(function(e,t){var a={};return e.forEach(function(e,i){a.key=t,a[n[i]]=e}),a}),t({type:Ya.a.GET_DATA_SOURCES_PREVIEW,payload:e.data})}})}}}),Xa=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Qa,"dataSourceActions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/actions/dataSource/index.js"),ua.a.Item),$a=oa.a.Option,Za='{\n    "defaultFS": "",\n    "hadoopConfig": {\n        "dfs.nameservices": "defaultDfs", \n        "dfs.ha.namenodes.defaultDfs": "namenode1", \n        "dfs.namenode.rpc-address.defaultDfs.namenode1": "", \n        "dfs.client.failover.proxy.provider.defaultDfs": "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider" \n    }\n}',en=function(e){return{dataSource:e.dataSource}},tn=function(e){return{getDataSourcesType:function(t){e(Qa.getDataSourcesType(t))}}},an=Object(v.b)(en,tn)($t=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={sourceType:1,hasHdfsConfig:!1,hadoopConfig:"defaultDfs"},n.onOk=function(){var e;return(e=n).__onOk__REACT_HOT_LOADER__.apply(e,arguments)},n.testConnection=function(){var e;return(e=n).__testConnection__REACT_HOT_LOADER__.apply(e,arguments)},n.cancel=function(){var e;return(e=n).__cancel__REACT_HOT_LOADER__.apply(e,arguments)},n.sourceChange=function(){var e;return(e=n).__sourceChange__REACT_HOT_LOADER__.apply(e,arguments)},n.enableHdfsConfig=function(){var e;return(e=n).__enableHdfsConfig__REACT_HOT_LOADER__.apply(e,arguments)},n.enableDetailConfig=function(){var e;return(e=n).__enableDetailConfig__REACT_HOT_LOADER__.apply(e,arguments)},n.renderSourceType=function(){var e;return(e=n).__renderSourceType__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.props.getDataSourcesType()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.sourceData,a=e.sourceData;a.id!==t.id&&(7===a.type?this.setState({sourceType:a.type||1,hasHdfsConfig:!0}):this.setState({sourceType:a.type||1}))}},{key:"__onOk__REACT_HOT_LOADER__",value:function(e){var t=this.props,a=t.editDataSource,n=t.form;n.validateFields(function(e){e||a(n.getFieldsValue(),n)})}},{key:"__testConnection__REACT_HOT_LOADER__",value:function(e){var t=this.state.sourceType,a=this.props,n=(a.testConnection,a.form),i=["type","dataJson.jdbcUrl","dataJson.username","dataJson.password"];10===t&&(i=[].concat(Va()(i),["dataJson.project","dataJson.endPoint","dataJson.accessKey","dataJson.accessId"])),n.validateFields(i,function(e,t){e||Ja.testDSConnection(t).then(function(e){e.data?$.a.success("数据源连接正常！"):$.a.error("数据库连接失败！")})})}},{key:"__cancel__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.form,a=e.handCancel;this.setState({sourceType:1}),t.resetFields(),a()}},{key:"__sourceChange__REACT_HOT_LOADER__",value:function(e){var t=[Ye.MYSQL,Ye.SQLSERVER,Ye.ORACLE],a=this.state.sourceType;this.setState({sourceType:parseInt(e)}),-1!=t.indexOf(a)&&-1!=t.indexOf(parseInt(e))||this.props.form.resetFields()}},{key:"__enableHdfsConfig__REACT_HOT_LOADER__",value:function(e){this.setState({hasHdfsConfig:!e.target.value})}},{key:"__enableDetailConfig__REACT_HOT_LOADER__",value:function(e){this.setState({detailConfig:!e.target.value})}},{key:"renderDynamic",value:function(){var e=this.state,t=e.hasHdfsConfig,a=e.sourceType,n=(e.detailConfig,this.props),i=n.form,s=n.sourceData,o=i.getFieldDecorator,l=s.dataJson||{};switch(a){case Ye.HIVE:return[r.a.createElement(Xa,H()({},st,{label:"JDBC URL",key:"jdbcUrl",hasFeedback:!0}),o("dataJson.jdbcUrl",{rules:[{required:!0,message:"jdbcUrl不可为空！"}],initialValue:l.jdbcUrl||""})(r.a.createElement(_a.a,{autoComplete:"off"}))),r.a.createElement(Xa,H()({},st,{label:"用户名",key:"username"}),o("dataJson.username",{rules:[],initialValue:l.username||""})(r.a.createElement(_a.a,{autoComplete:"off"}))),r.a.createElement(Xa,H()({},st,{label:"密码",key:"password"}),o("dataJson.password",{rules:[],initialValue:""})(r.a.createElement(_a.a,{type:"password"}))),r.a.createElement(Xa,H()({},st,{label:"defaultFS",key:"defaultFS",hasFeedback:!0}),o("dataJson.defaultFS",{rules:[{required:!0,message:"defaultFS不可为空！"}],initialValue:l.defaultFS||""})(r.a.createElement(_a.a,{placeholder:"hdfs://host:port"}))),r.a.createElement(Xa,H()({},rt,{key:"hasHdfsConfig"}),o("hasHdfsConfig",{initialValue:!1})(r.a.createElement(Ga.a,{checked:t,onChange:this.enableHdfsConfig},"高可用配置"))),r.a.createElement(Xa,H()({},st,{label:"高可用配置",key:"hadoopConfig",style:{display:t?"block":"none"}}),o("dataJson.hadoopConfig",{rules:[],initialValue:l.hadoopConfig||""})(r.a.createElement(_a.a,{type:"textarea",rows:5,placeholder:Za})),r.a.createElement(Ka,{doc:"hdfsConfig"}))];case Ye.MAXCOMPUTE:return[r.a.createElement(Xa,H()({},st,{label:"AccessId",key:"accessId",hasFeedback:!0}),o("dataJson.accessId",{rules:[{required:!0,message:"access ID不可为空！"}],initialValue:l.accessId||""})(r.a.createElement(_a.a,{autoComplete:"off"}))),r.a.createElement(Xa,H()({},st,{label:"AccessKey",key:"accessKey",hasFeedback:!0}),o("dataJson.accessKey",{rules:[{required:!0,message:"access Key不可为空！"}],initialValue:l.accessKey||""})(r.a.createElement(_a.a,{type:"password",autoComplete:"off"}))),r.a.createElement(Xa,H()({},st,{label:"Project Name",key:"project",hasFeedback:!0}),o("dataJson.project",{rules:[{required:!0,message:"Project Name不可为空！"}],initialValue:l.project||""})(r.a.createElement(_a.a,{autoComplete:"off"}))),r.a.createElement(Xa,H()({},st,{label:"End Point",key:"endPoint",hasFeedback:!0}),o("dataJson.endPoint",{rules:[{required:!0,message:"End Point不可为空！"}],initialValue:l.endPoint||""})(r.a.createElement(_a.a,{autoComplete:"off"})))];case Ye.MYSQL:case Ye.ORACLE:case Ye.SQLSERVER:default:return[r.a.createElement(Xa,H()({},st,{label:"JDBC URL",key:"jdbcUrl",hasFeedback:!0}),o("dataJson.jdbcUrl",{rules:[{required:!0,message:"jdbcUrl不可为空！"}],initialValue:l.jdbcUrl||""})(r.a.createElement(_a.a,{autoComplete:"off"}))),r.a.createElement(Xa,H()({},st,{label:"用户名",key:"username",hasFeedback:!0}),o("dataJson.username",{rules:[{required:!0,message:"用户名不可为空！"}],initialValue:l.username||""})(r.a.createElement(_a.a,{autoComplete:"off"}))),r.a.createElement(Xa,H()({},st,{label:"密码",key:"password",hasFeedback:!0}),o("dataJson.password",{rules:[{required:!0,message:"密码不可为空！"}],initialValue:""})(r.a.createElement(_a.a,{type:"password"})))]}}},{key:"__renderSourceType__REACT_HOT_LOADER__",value:function(e){return e.map(function(e){return r.a.createElement($a,{key:e.value,value:e.value.toString()},e.name)})}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.form,n=e.title,i=e.sourceData,s=e.status,o=e.dataSource,l=(this.state.hasHdfsConfig,a.getFieldDecorator),c=o.sourceType[0]&&o.sourceType[0].value.toString();return r.a.createElement(ca.a,{title:n,maskClosable:!1,wrapClassName:"vertical-center-modal",visible:t,onCancel:this.cancel,footer:!1},r.a.createElement(ua.a,null,r.a.createElement(Xa,H()({},st,{label:"数据源名称",hasFeedback:!0}),l("dataName",{rules:[{required:!0,message:"数据源名称不可为空！"},{max:128,message:"数据源名称不得超过128个字符！"},{pattern:/^[A-Za-z0-9_-]+$/,message:"名称只能由字母与数字、下划线组成"}],initialValue:i.dataName||""})(r.a.createElement(_a.a,{autoComplete:"off",disabled:"edit"===s}))),r.a.createElement(Xa,H()({},st,{label:"数据源描述",hasFeedback:!0}),l("dataDesc",{rules:[{max:200,message:"描述请控制在200个字符以内！"}],initialValue:i.dataDesc||""})(r.a.createElement(_a.a,{type:"textarea",rows:4}))),r.a.createElement(Xa,H()({},st,{label:"数据源类型",hasFeedback:!0}),l("type",{rules:[{required:!0,message:"数据源类型不可为空！"}],initialValue:i.type?i.type.toString():c})(r.a.createElement(oa.a,{onChange:this.sourceChange,disabled:"edit"===s},this.renderSourceType(o.sourceType)))),this.renderDynamic(),r.a.createElement(Xa,H()({},rt,{label:""}),r.a.createElement(sa.a,{icon:"sync",type:"primary","data-target":"test",onClick:this.testConnection,style:{marginRight:"10px"}},"测试连通性"),r.a.createElement(sa.a,{type:"primary",style:{marginRight:"10px"},onClick:this.onOk},"确定"),r.a.createElement(sa.a,{onClick:this.cancel},"取消"))))}}]),t}(s.Component))||$t;an=ua.a.create()(an);"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Xa,"FormItem","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register($a,"Option","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(Za,"hdfsConf","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register('{\n    "initialPoolSize": 100,\n    "maxIdleTime": 30,\n    "maxPoolSize": 100,\n    "minPoolSize": 10,\n    "maxStatements": 200\n}',"configConf","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(en,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(tn,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(an,"DataSourceModal","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dataSource/editModal.js")),a(890);var nn,sn,rn,on,ln=_a.a.Search,cn=function(e){return{dataSource:e.dataSource}},pn=function(e){return{getDataSources:function(t){e(Qa.getDataSources(t))}}},un=Object(v.b)(cn,pn)(nn=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={visible:!1,title:"新增数据源",status:"add",source:{},params:{currentPage:1,pageSize:20,name:void 0,type:void 0,active:void 0}},n.searchDataSources=function(){var e;return(e=n).__searchDataSources__REACT_HOT_LOADER__.apply(e,arguments)},n.editDataSource=function(){var e;return(e=n).__editDataSource__REACT_HOT_LOADER__.apply(e,arguments)},n.remove=function(){var e;return(e=n).__remove__REACT_HOT_LOADER__.apply(e,arguments)},n.testConnection=function(){var e;return(e=n).__testConnection__REACT_HOT_LOADER__.apply(e,arguments)},n.handleTableChange=function(){var e;return(e=n).__handleTableChange__REACT_HOT_LOADER__.apply(e,arguments)},n.initEdit=function(){var e;return(e=n).__initEdit__REACT_HOT_LOADER__.apply(e,arguments)},n.initColumns=function(){var e;return(e=n).__initColumns__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.props.getDataSources(this.state.params)}},{key:"__searchDataSources__REACT_HOT_LOADER__",value:function(e){var t=H()({},this.state.params,{name:e});this.setState({params:t}),this.props.getDataSources(t)}},{key:"__editDataSource__REACT_HOT_LOADER__",value:function(e,t){var a=this,n=this.state,i=n.title,s=n.status,r=n.source,o=n.params;"edit"===s?Ja.updateDataSource(H()({},r,e)).then(function(e){1===e.code&&(t.resetFields(),a.setState({visible:!1}),$.a.success(i+"成功！"),a.props.getDataSources(o))}):Ja.addDataSource(e).then(function(e){1===e.code&&(t.resetFields(),a.setState({visible:!1}),$.a.success(i+"成功！"),a.props.getDataSources(o))})}},{key:"__remove__REACT_HOT_LOADER__",value:function(e){var t=this;1!==e.active?Ja.deleteDataSource({sourceId:e.id}).then(function(e){1===e.code&&($.a.success("移除数据源成功！"),t.props.getDataSources(t.state.params))}):$.a.info("此数据源已在任务中被引用，无法删除!")}},{key:"__testConnection__REACT_HOT_LOADER__",value:function(e){Ja.testDSConnection(e).then(function(e){1===e.code&&$.a.success("数据源连接正常！")})}},{key:"__handleTableChange__REACT_HOT_LOADER__",value:function(e,t){var a=t.active,n=t.type,i=H()({},this.state.params,{currentPage:e.current,active:a?a[0]:void 0,type:n?n[0]:void 0});this.setState({params:i}),this.props.getDataSources(i)}},{key:"__initEdit__REACT_HOT_LOADER__",value:function(e){this.setState({visible:!0,title:"编辑数据源",status:"edit",source:e})}},{key:"exchangeSourceType",value:function(){var e=[],t={},a=this.props.dataSource.sourceType;for(var n in a){var i=a[n];t[i.value]=i.name,e.push({text:i.name,value:i.value})}return{typeList:e,typeDic:t}}},{key:"__initColumns__REACT_HOT_LOADER__",value:function(){var e=this,t=this.exchangeSourceType(),a=t.typeList,n=t.typeDic;return[{title:"数据源名称",dataIndex:"dataName",key:"dataName"},{title:"类型",dataIndex:"type",key:"type",filters:a,filterMultiple:!1,render:function(e){return n[e]}},{title:"描述信息",dataIndex:"dataDesc",key:"dataDesc",width:300},{title:"最近修改人",dataIndex:"modifyUserName",key:"modifyUserName"},{title:"最近修改时间",dataIndex:"gmtModified",key:"gmtModified",render:function(e){return Ca()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"状态",dataIndex:"active",key:"active",filters:[{text:"未启用",value:0},{text:"使用中",value:1}],filterMultiple:!1,render:function(e,t){return 1===t.active?"使用中":"未启用"}},{title:"操作",width:"10%",key:"operation",render:function(t,a){return r.a.createElement("span",{key:a.id},r.a.createElement("a",{onClick:function(){e.initEdit(a)}},"编辑"),r.a.createElement("span",{className:"ant-divider"}),r.a.createElement(ja.a,{title:"确定删除此数据源？",okText:"确定",cancelText:"取消",onConfirm:function(){e.remove(a)}},r.a.createElement("a",null,"删除")))}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.title,i=t.status,s=t.source,o=t.params,l=this.props.dataSource,c=l.sourceQuery,p=l.loading,u={current:o.currentPage,pageSize:o.pageSize,total:c.totalCount},d=r.a.createElement(ln,{placeholder:"数据源名称",style:{width:200,margin:"10px 0"},onSearch:this.searchDataSources}),_=r.a.createElement(sa.a,{type:"primary",style:{margin:"10px 0"},className:"right",onClick:function(){e.setState({visible:!0,source:{},status:"add",title:"添加数据源"})}},"新增数据源");return r.a.createElement("div",{className:"source-page"},r.a.createElement("h1",{className:"box-title"},"数据源管理"),r.a.createElement("div",{className:"box-2 m-card shadow"},r.a.createElement(je.a,{title:d,extra:_,noHovering:!0,bordered:!1},r.a.createElement(Ge.a,{className:"m-table",rowKey:"id",pagination:u,onChange:this.handleTableChange,loading:p,columns:this.initColumns(),dataSource:c.data}))),r.a.createElement(an,{title:n,visible:a,status:i,editDataSource:this.editDataSource,testConnection:this.testConnection,sourceData:s,handCancel:function(){e.setState({visible:!1})}}))}}]),t}(s.Component))||nn,dn=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ln,"Search","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dataSource/index.js"),__REACT_HOT_LOADER__.register(cn,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dataSource/index.js"),__REACT_HOT_LOADER__.register(pn,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dataSource/index.js"),__REACT_HOT_LOADER__.register(un,"DataSource","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/dataSource/index.js")),a(405),a(205)),_n=a.n(dn),mn=a(82),hn=function(e){function t(){return m()(this,t),E()(this,(t.__proto__||d()(t)).apply(this,arguments))}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){}},{key:"getRequestDataSource",value:function(){return this.getValue("reqParam")||[]}},{key:"getRequestColumns",value:function(){return[{title:"参数名",dataIndex:"paramName",key:"paramName",width:120},{title:"数据类型",dataIndex:"paramType",key:"paramType",width:100},{title:"必填",dataIndex:"required",key:"required",width:60,render:function(e){return e?"是":"否"}},{title:"说明",dataIndex:"desc",key:"desc",render:function(e){return e&&e.length>10?r.a.createElement("span",{title:e},"text"):e}}]}},{key:"getResponseDataSource",value:function(){return this.getValue("respParam")||[]}},{key:"getResponseColumns",value:function(){return[{title:"参数名",dataIndex:"paramName",key:"paramName",width:120},{title:"数据类型",dataIndex:"paramType",key:"paramType",width:100},{title:"必填",dataIndex:"required",key:"required",width:60,render:function(e){return e?"是":"否"}},{title:"说明",dataIndex:"desc",key:"desc",render:function(e){return e&&e.length>10?r.a.createElement("span",{title:e},"text"):e}}]}},{key:"getValue",value:function(e){var t=this.props,a=t.apiMarket,n=t.apiId,i=a&&a.api&&a.api[n];return i?i[e]:null}},{key:"getValueCallInfo",value:function(e){var t=this.props,a=t.apiMarket,n=t.apiId,i=a&&a.api&&a.apiCallInfo[n];return i?i[e]:null}},{key:"render",value:function(){this.getValueCallInfo("applyStatus");var e=this.props,t=e.callUrl,a=e.callLimit,n=e.beginTime,i=e.endTime,s=e.mode,o=e.showRecord,l=e.showMarketInfo,c=e.showUserInfo,p="manage"==s;return r.a.createElement("div",null,r.a.createElement("section",null,r.a.createElement("h1",{className:"title-border-l-blue"},"基本信息"),r.a.createElement("div",{style:{marginTop:10}},r.a.createElement("span",{"data-title":"支持格式：",className:"pseudo-title p-line api_item-margin"},this.getValue("supportType")),r.a.createElement("span",{"data-title":"请求协议：",className:"pseudo-title p-line api_item-margin"},this.getValue("reqProtocol")),r.a.createElement("span",{"data-title":"请求方式：",className:"pseudo-title p-line api_item-margin"},this.getValue("reqMethod")),r.a.createElement("p",{"data-title":"调用限制：",className:"pseudo-title p-line"},this.getValue("reqLimit")," 次/秒"),c&&r.a.createElement("div",null,r.a.createElement("p",{"data-title":"调用URL：",className:"pseudo-title p-line"},t),r.a.createElement("p",{"data-title":"申请调用次数：",className:"pseudo-title p-line"},-1==a?"无限制":a),r.a.createElement("p",{"data-title":"申请调用周期：",className:"pseudo-title p-line"},n?new Ca.a(n).format("YYYY-MM-DD")+" ~ "+new Ca.a(i).format("YYYY-MM-DD"):"无限制")),r.a.createElement("p",{"data-title":"API描述：",className:"pseudo-title p-line"},this.getValue("desc")),r.a.createElement("p",{"data-title":"创建人：",className:"pseudo-title p-line"},this.getValue("createUser")),p&&r.a.createElement("div",null,r.a.createElement("p",{"data-title":"最近修改人：",className:"pseudo-title p-line"},o.modifyUser),r.a.createElement("p",{"data-title":"最近修改时间：",className:"pseudo-title p-line"},new Ca.a(o.gmtModified).format("YYYY-MM-DD HH:mm:ss"))))),l&&r.a.createElement("section",{style:{marginTop:19.3}},r.a.createElement("h1",{className:"title-border-l-blue"},"调用订购情况"),r.a.createElement("div",{style:{marginTop:10}},r.a.createElement("span",{"data-title":"累计调用次数：",className:"pseudo-title p-line api_item-margin"},this.getValueCallInfo("apiCallNum")),r.a.createElement("span",{"data-title":"订购人数：",className:"pseudo-title p-line api_item-margin"},this.getValueCallInfo("applyNum")))),r.a.createElement(yt.a,{gutter:30,style:{marginTop:19.3}},r.a.createElement(kt.a,{span:11},r.a.createElement("section",null,r.a.createElement("h1",{className:"title-border-l-blue"},"请求参数"),r.a.createElement(Ge.a,{rowKey:"paramName",style:{marginTop:18},className:"m-table border-table",pagination:!1,dataSource:this.getRequestDataSource(),scroll:{y:160},columns:this.getRequestColumns()}))),r.a.createElement(kt.a,{span:11},r.a.createElement("section",null,r.a.createElement("h1",{className:"title-border-l-blue"},"返回参数"),r.a.createElement(Ge.a,{rowKey:"paramName",style:{marginTop:18},className:"m-table border-table",pagination:!1,dataSource:this.getResponseDataSource(),scroll:{y:160},columns:this.getResponseColumns()})))),r.a.createElement(yt.a,{gutter:30,style:{marginTop:19.3}},r.a.createElement(kt.a,{span:11},r.a.createElement("section",null,r.a.createElement("h1",{className:"title-border-l-blue"},"请求JSON样例"),r.a.createElement("div",{style:{marginTop:18}},r.a.createElement("pre",{style:{maxHeight:"150px",overflow:"auto"}},Y()(this.getValue("reqJson"),null,"    \r"))))),r.a.createElement(kt.a,{span:11},r.a.createElement("section",null,r.a.createElement("h1",{className:"title-border-l-blue"},"返回JSON样例"),r.a.createElement("div",{style:{marginTop:18}},r.a.createElement("pre",{style:{maxHeight:"150px",overflow:"auto"}},this.getValue("respJson")?Y()(this.getValue("respJson"),null,"    \r"):"暂无返回样例"))))))}}]),t}(s.Component),gn=hn,An=gn,En=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(hn,"Content","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/apiContent/index.js"),__REACT_HOT_LOADER__.register(gn,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/apiContent/index.js")),a(186)),fn={getCatalogue:function(e){return re.post(ce.GET_CATALOGUE,e)},listByCondition:function(e){return re.post(ce.GET_API_MARKET_LIST,e)},getApiDetail:function(e){return re.post(ce.GET_MARKET_API_DETAIL,e)},apiApply:function(e){return re.post(ce.APPLY_API,e)},getApiExtInfoForNormal:function(e){return re.post(ce.GET_API_EXT_INFO,e)},getApiExtInfoForManager:function(e){return re.post(ce.GET_API_EXT_INFO_ADMIN,e)}},Tn=fn,yn=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(fn,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/api/apiMarket.js"),{getCatalogue:function(e){return function(t){return Tn.getCatalogue({pid:e,lvNum:10}).then(function(e){if(1===e.code)return t({type:En.a.GET_CATALOGUE,payload:e.data}),e})}},getApiMarketList:function(e){return function(t){return Tn.listByCondition(e).then(function(e){if(1===e.code)return t({type:En.a.GET_API_MARKET_LIST,payload:e.data.data}),e})}},getApiDetail:function(e){return function(t){return Tn.getApiDetail(e).then(function(e){if(1===e.code)return t({type:En.a.GET_MARKET_API_DETAIL,payload:e.data}),e})}},getApiExtInfo:function(e){var t="getApiExtInfoForNormal";return e.useAdmin&&(t="getApiExtInfoForManager"),function(a){return Tn[t](e).then(function(e){if(1===e.code)return a({type:En.a.GET_API_EXT_INFO,payload:e.data}),e})}},apiApply:function(e){return function(t){return Tn.apiApply(e).then(function(e){if(1===e.code)return e})}}}),vn=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(yn,"apiMarketActions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/actions/apiMarket/index.js"),function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t}}),Cn=function(e){return{getApiDetail:function(t){e(yn.getApiDetail({apiId:t}))},getApiExtInfo:function(t){e(yn.getApiExtInfo({apiId:t}))}}},bn=Object(v.b)(vn,Cn)(sn=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={callUrl:"",beginTime:void 0,endTime:void 0,callLimit:0},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"getApiCallUrl",value:function(e){var t=this;this.props.getApiCallUrl(e).then(function(e){e&&t.setState({callUrl:e.data.url,beginTime:e.data.beginTime,endTime:e.data.endTime,callLimit:e.data.callLimit})})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.showRecord,a=void 0===t?{}:t,n=e.mode,i=a.apiId,s=a.status,r=a.id;i="manage"==n?r:i,this.updateData(i,s,n)}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.showRecord,a=void 0===t?{}:t,n=a.apiId,i=a.status,s=a.id,r=e.showRecord,o=void 0===r?{}:r,l=e.slidePaneShow,c=e.mode,p=o.apiId,u=o.status,d=o.id;(n="manage"==c?s:n)==(p="manage"==c?d:p)&&u==i||l&&this.updateData(p,u,c)}},{key:"updateData",value:function(e,t,a){this.setState({callUrl:"",beginTime:void 0,endTime:void 0,callLimit:0}),e&&("manage"!=a&&this.getApiCallUrl(e),this.props.getApiDetail(e),this.props.getApiExtInfo(e))}},{key:"render",value:function(){var e=this.state,t=e.callUrl,a=e.beginTime,n=e.endTime,i=e.callLimit,s=this.props,o=s.showRecord,l=void 0===o?{}:o,c=s.apiMarket,p=s.mode,u=s.showUserInfo,d=l.apiId,_=l.id;return d="manage"==p?_:d,r.a.createElement("div",null,r.a.createElement("div",{style:{paddingLeft:30,marginTop:"20px"}},r.a.createElement(An,{showUserInfo:u,callLimit:i,beginTime:a,endTime:n,showRecord:l,mode:p,callUrl:t,apiMarket:c,apiId:d})))}}]),t}(s.Component))||sn,kn=bn,Dn=kn,xn=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(vn,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/others/apiCallMethod.js"),__REACT_HOT_LOADER__.register(Cn,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/others/apiCallMethod.js"),__REACT_HOT_LOADER__.register(bn,"ApiCallMethod","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/others/apiCallMethod.js"),__REACT_HOT_LOADER__.register(kn,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/others/apiCallMethod.js")),a(31)),Rn=a.n(xn),wn=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={pageIndex:1,filter:{},sortedInfo:{}},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"initColumns",value:function(){var e=this;return[{title:"用户",dataIndex:"userName",key:"userName",width:"180px"},{title:"状态",dataIndex:"status",key:"status",width:"80px",filters:[{text:"正常",value:"1"},{text:"停用",value:"3"},{text:"取消授权",value:"4"}],render:function(e,t){return r.a.createElement("span",{className:"state-"+tt[e]},{success:"正常",stop:"停用",disabled:"取消授权"}[tt[e]])}},{title:"最大调用次数",dataIndex:"callLimit",key:"callLimit",width:"150px",render:function(e){return-1==e?"无限制":e}},{title:"调用周期",dataIndex:"callDateRange",key:"callDateRange",width:"200px",render:function(e,t){var a=t.beginTime?new Ca.a(t.beginTime).format("YYYY-MM-DD"):null,n=t.endTime?new Ca.a(t.endTime).format("YYYY-MM-DD"):null,i=a?a+" ~ "+n:"无限制";return r.a.createElement("span",null,i)}},{title:"最近24小时调用",dataIndex:"recent24HCallNum",key:"recent24HCallNum",width:"150px"},{title:"最近24小时失败率",dataIndex:"recent24HFailRate",key:"recent24HFailRate",width:"150px",render:function(e){return e+"%"}},{title:"最近7天调用",dataIndex:"recent7DCallNum",key:"recent7DCallNum",width:"150px"},{title:"最近30天调用",dataIndex:"recent30DCallNum",key:"recent30DCallNum",width:"150px"},{title:"累计调用",dataIndex:"totalCallNum",key:"totalCallNum"},{title:"订购时间",dataIndex:"applyTime",key:"applyTime",width:"180px",render:function(e){return N.a.formatDateTime(e)}},{title:"操作",dataIndex:"",key:"deal",fixed:"right",width:"100px",render:function(t,a){return"disabled"!=tt[a.status]?r.a.createElement("a",{onClick:function(){e.props.cancelApi(a.applyId)}},"取消授权"):r.a.createElement("a",{onClick:function(){e.props.applyApi(a.applyId)}},"恢复授权")}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:10,total:this.props.total}}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){this.setState({pageIndex:e.current,filter:t,sortedInfo:a}),this.props.tableChange({page:e.current,filter:t,sortedInfo:a})}},{key:"lookAllErrorText",value:function(){}},{key:"render",value:function(){return r.a.createElement(Ge.a,{rowKey:"applyId",className:"m-table monitor-table table-p-l20",columns:this.initColumns(),loading:this.props.loading,pagination:this.getPagination(),dataSource:this.props.data,onChange:this.onTableChange,scroll:{x:1620}})}}]),t}(s.Component),On=wn,Sn=On,Ln=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(wn,"EnableTable","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyStateTable/enableTable.js"),__REACT_HOT_LOADER__.register(On,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyStateTable/enableTable.js")),function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={pageIndex:1,filter:{},sortedInfo:{}},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"initColumns",value:function(){return[{title:"用户",dataIndex:"userName",key:"userName",width:"180px"},{title:"最大调用次数",dataIndex:"callLimit",key:"callLimit",width:"100px",render:function(e){return-1==e?"无限制":e}},{title:"调用周期",dataIndex:"callDateRange",key:"callDateRange",width:"200px",render:function(e,t){var a=t.beginTime?new Ca.a(t.beginTime).format("YYYY-MM-DD"):null,n=t.endTime?new Ca.a(t.endTime).format("YYYY-MM-DD"):null,i=a?a+" ~ "+n:"无限制";return r.a.createElement("span",null,i)}},{title:"最近24小时调用",dataIndex:"recent24HCallNum",key:"recent24HCallNum"},{title:"最近24小时失败率",dataIndex:"recent24HFailRate",key:"recent24HFailRate",render:function(e){return e+"%"}},{title:"最近7天调用",dataIndex:"recent7DCallNum",key:"recent7DCallNum"},{title:"最近30天调用",dataIndex:"recent30DCallNum",key:"recent30DCallNum"},{title:"累计调用",dataIndex:"totalCallNum",key:"totalCallNum"},{title:"订购时间",dataIndex:"applyTime",key:"applyTime",width:"200px",render:function(e){return N.a.formatDateTime(e)}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:10,total:this.props.total}}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){this.setState({pageIndex:e.current,filter:t,sortedInfo:a}),this.props.tableChange({page:e.current,filter:t,sortedInfo:a})}},{key:"lookAllErrorText",value:function(){}},{key:"render",value:function(){return r.a.createElement(Ge.a,{rowKey:"applyId",className:"m-table monitor-table table-p-l20",columns:this.initColumns(),loading:this.props.loading,pagination:this.getPagination(),dataSource:this.props.data,onChange:this.onTableChange,scroll:{x:1200}})}}]),t}(s.Component)),In=Ln,Nn=In,Pn=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ln,"DisableTable","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyStateTable/disableTable.js"),__REACT_HOT_LOADER__.register(In,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyStateTable/disableTable.js")),a(589)),Hn={getAllApiList:function(e){return re.post(ce.GET_ALL_API_LIST,e)},getDataSourceByBaseInfo:function(e){return re.post(ce.GET_DATASOURCE_BASE_INFO,e)},deleteApi:function(e){return re.post(ce.DELETE_API,e)},updateApiStatus:function(e){return re.post(ce.UPDATE_API,e)},getApiCallUserRankList:function(e){return re.post(ce.GET_API_CALL_RANK,e)},getApiUserApplyList:function(e){return re.post(ce.GET_API_BUY_STATE,e)},updateCatalogue:function(e){return re.post(ce.UPDATE_CATAGORY,e)},addCatalogue:function(e){return re.post(ce.ADD_CATAGORY,e)},deleteCatalogue:function(e){return re.post(ce.DELETE_CATAGORY,e)},createApi:function(e){return re.post(ce.NEW_API,e)},tablelist:function(e){return re.post(ce.GET_TABLE_BY_DATASOURCE,e)},tablecolumn:function(e){return re.post(ce.GET_TABLE_COLUMNS_DETAIL,e)},previewData:function(e){return re.post(ce.GET_TABLE_PREVIEW_DATA,e)},updateApi:function(e){return re.post(ce.CHANGE_API,e)},getApiInfo:function(e){return re.post(ce.GET_API_DETAIL_INFO,e)},getApiCallErrorInfoForManager:function(e){return re.post(ce.GET_API_CALL_ERROR_INFO_ADMIN,e)},saveOrUpdateApiInfo:function(e){return re.post(ce.SAVE_OR_UPDATE_APIINFO,e)},sqlformat:function(e){return re.post(ce.FORMAT_SQL,e)},sqlParser:function(e){return re.post(ce.PARSER_SQL,e)},apiTest:function(e){return re.post(ce.TEST_API,e)}},Un=Hn,jn=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Hn,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/api/apiManage.js"),{getAllApiList:function(e){return function(t){return Un.getAllApiList(e).then(function(e){if(1===e.code)return t({type:Pn.a.GET_ALL_API_LIST,payload:e.data.data}),e})}},getDataSourceByBaseInfo:function(e){return function(t){return Un.getDataSourceByBaseInfo(e).then(function(e){if(1===e.code)return e})}},deleteApi:function(e){return function(t){return Un.deleteApi(e).then(function(e){if(1===e.code)return e})}},openApi:function(e){return function(t){return Un.createApi({apiId:e}).then(function(e){if(1===e.code)return e})}},closeApi:function(e){return function(t){return Un.updateApiStatus({apiId:e,apiStatus:1}).then(function(e){if(1===e.code)return e})}},getApiCallUserRankList:function(e){return function(t){return Un.getApiCallUserRankList(e).then(function(e){if(1===e.code)return e})}},getApiUserApplyList:function(e){return function(t){return Un.getApiUserApplyList(e).then(function(e){if(1===e.code)return e})}},updateCatalogue:function(e){return function(t){return Un.updateCatalogue(e).then(function(e){if(1===e.code)return e})}},deleteCatalogue:function(e){return function(t){return Un.deleteCatalogue(e).then(function(e){if(1===e.code)return e})}},addCatalogue:function(e){return function(t){return Un.addCatalogue(e).then(function(e){if(1===e.code)return e})}},createApi:function(e){return function(t){return Un.createApi(e).then(function(e){if(1===e.code)return e})}},saveOrUpdateApiInfo:function(e){return function(t){return Un.saveOrUpdateApiInfo(e).then(function(e){if(1===e.code)return e})}},updateApi:function(e){return function(t){return Un.updateApi(e).then(function(e){if(1===e.code)return e})}},tablelist:function(e){return function(t){return Un.tablelist(e).then(function(e){if(1===e.code)return e})}},tablecolumn:function(e){return function(t){return Un.tablecolumn(e).then(function(e){if(1===e.code)return e})}},previewData:function(e){return function(t){return Un.previewData(e).then(function(e){if(1===e.code)return e})}},getApiInfo:function(e){return function(t){return Un.getApiInfo(e).then(function(e){if(1===e.code)return e})}},getApiCallErrorInfo:function(e){return function(t){return Un.getApiCallErrorInfoForManager(e).then(function(e){if(1===e.code)return e})}},sqlFormat:function(e){return function(t){return Un.sqlformat(e).then(function(e){if(1===e.code)return e})}},sqlParser:function(e){return function(t){return Un.sqlParser(e).then(function(e){if(1===e.code)return e})}},apiTest:function(e){return function(t){return Un.apiTest(e).then(function(e){if(1===e.code)return e})}}}),Mn=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(jn,"apiManageActions","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/actions/apiManage/index.js"),ca.a.confirm),Gn=function(e){var t=e.user;return{apiMarket:e.apiMarket,apiManage:e.apiManage,user:t}},Fn=function(e){return{getApiUserApplyList:function(t){return e(jn.getApiUserApplyList(t))},updateUserApiStatus:function(t){return e(ya.updateApplyStatus(t))}}},Vn=Object(v.b)(Gn,Fn)(rn=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={data:[],total:0,disAbleKey:"init",enAbleKey:"init",loading:!1},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.tableChange({filter:{},sortedInfo:{},page:1})}},{key:"initState",value:function(){this.setState(Rn()({disAbleKey:Math.random(),enAbleKey:Math.random(),total:0,dataDisable:[],dataEnable:[],data:[]},"total",0))}},{key:"componentWillReceiveProps",value:function(e){this.props.apiId==e.apiId&&this.props.disAble==e.disAble||(this.initState(),this.tableChange({filter:{},sortedInfo:{},page:1},e.apiId))}},{key:"tableChange",value:function(e,t){var a=e.filter,n=(e.sortedInfo,e.page),i=a.status;(!i||i.length<1)&&(i=["1","3","4"]);var s={};s.apiId=t||this.props.apiId,s.pageSize=10,s.currentPage=n,s.status=i,this.getData(s)}},{key:"getData",value:function(e){var t=this;e||(e=this.state.requestParams),e.apiId&&(this.setState({loading:!0,requestParams:e}),this.props.getApiUserApplyList(e).then(function(e){t.setState({loading:!1}),e&&t.setState({data:e.data.data,total:e.data.totalCount})}))}},{key:"cancelApi",value:function(e){var t=this;Mn({title:"确认取消?",content:"确认取消授权",onOk:function(){t.props.updateUserApiStatus({applyId:e,useAdmin:!0,status:4}).then(function(e){e&&($.a.success("取消成功"),t.getData())})},onCancel:function(){}})}},{key:"applyApi",value:function(e){var t=this;Mn({title:"确认授权?",content:"确认授权",onOk:function(){t.props.updateUserApiStatus({applyId:e,useAdmin:!0,status:1}).then(function(e){e&&($.a.success("授权成功"),t.getData())})},onCancel:function(){}})}},{key:"lookAllErrorText",value:function(){}},{key:"getTable",value:function(){return this.props.statusDisAble?r.a.createElement(Nn,{loading:this.state.loading,key:this.state.disAbleKey,total:this.state.total,data:this.state.data,tableChange:this.tableChange.bind(this)}):r.a.createElement(Sn,{cancelApi:this.cancelApi.bind(this),applyApi:this.applyApi.bind(this),loading:this.state.loading,key:this.state.enAbleKey,total:this.state.total,data:this.state.data,tableChange:this.tableChange.bind(this)})}},{key:"render",value:function(){return r.a.createElement("div",null,this.getTable())}}]),t}(s.Component))||rn,qn=Vn,Bn=qn,zn=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Mn,"confirm","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyState.js"),__REACT_HOT_LOADER__.register(Gn,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyState.js"),__REACT_HOT_LOADER__.register(Fn,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyState.js"),__REACT_HOT_LOADER__.register(Vn,"BuyManageState","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyState.js"),__REACT_HOT_LOADER__.register(qn,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyState.js")),function(e){function t(){return m()(this,t),E()(this,(t.__proto__||d()(t)).apply(this,arguments))}return T()(t,e),g()(t,[{key:"getSource",value:function(){return this.props.data||[]}},{key:"render",value:function(){return r.a.createElement(Ge.a,{rowKey:function(e){return e.userId},style:{marginTop:"15px"},className:"m-table border-table table-p-l20",rowClassName:function(){return"h-mini"},pagination:!1,columns:[{title:"排名",dataIndex:"rank",key:"rank",className:"color-666",render:function(e,t,a){return r.a.createElement("span",{className:"rank-number rank-number_"+(a+1)},a+1)}},{title:"用户",dataIndex:"userName",key:"userName",className:"color-666"},{title:"调用次数",dataIndex:"callNum",key:"callNum",className:"color-666"}],dataSource:this.getSource(),onChange:this.onTableChange})}}]),t}(s.Component)),Kn=zn,Yn=Kn,Wn=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(zn,"ManageTopCall","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/topCall.js"),__REACT_HOT_LOADER__.register(Kn,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/topCall.js")),a(78));a(148),a(199),a(139),a(138);var Jn=function(e){var t=e.user;return{apiMarket:e.apiMarket,apiManage:e.apiManage,user:t}},Qn=function(e){return{getApiCallUserRankList:function(t,a){return e(jn.getApiCallUserRankList({apiId:t,time:a}))},getApiCallInfo:function(t,a){return e(ya.getApiCallInfo({apiId:t,time:a,useAdmin:!0}))}}},Xn=Object(v.b)(Jn,Qn)(on=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={topCallUser:"",failPercent:"",callCount:"",callList:[],topCallList:[],apiId:"",dateType:""},n.resize=function(){var e;return(e=n).__resize__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({apiId:this.props.apiId,dateType:this.props.dateType},function(){e.getApiCallUserRankList(),e.getApiCallInfoList()})}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.state.apiId==e.apiId&&this.state.dateType==e.dateType||this.setState({apiId:e.apiId,dateType:e.dateType},function(){t.getApiCallUserRankList(),t.getApiCallInfoList()})}},{key:"getApiCallInfoList",value:function(){var e=this,t=this.state.apiId,a=this.state.dateType;t&&a&&this.props.getApiCallInfo(t,a).then(function(t){t&&e.setState({callList:t.data.infoList,topCallUser:t.data.topCallUserName,failPercent:t.data.failRate,callCount:t.data.callCount},function(){e.initLineChart()})})}},{key:"getApiCallUserRankList",value:function(){var e=this,t=this.state.apiId,a=this.state.dateType;t&&a&&this.props.getApiCallUserRankList(t,a).then(function(t){t&&e.setState({topCallList:t.data})})}},{key:"__resize__REACT_HOT_LOADER__",value:function(){this.state.lineChart&&this.state.lineChart.resize()}},{key:"initLineChart",value:function(){for(var e=this.state.callList,t=[],a=[],n=[],i=0;i<e.length;i++)switch(t.push(e[i].callCount),a.push(e[i].failRate),this.props.dateType){case"1":n.push(N.a.formatHours(e[i].time));break;case"7":n.push(N.a.formatDateHours(e[i].time));break;case"30":case"-1":n.push(N.a.formatDate(e[i].time))}var s=Wn.init(document.getElementById("manageApiDetail")),r=Object(Pe.cloneDeep)(ct);r.tooltip.formatter=function(e){for(var t=e[0].name,a=0,n=e.length;a<n;a++){var i="次";"失败率"==e[a].seriesName&&(i="%"),t+='<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e[a].color+'"></span>'+e[a].seriesName+" : "+e[a].value+i}return t},r.series=[{symbol:"none",name:"调用次数",data:t,type:"line",smooth:!0,itemStyle:{normal:{color:"#1C86EE"}}},{symbol:"none",name:"失败率",data:a,type:"line",smooth:!0,yAxisIndex:1,itemStyle:{normal:{color:"#EE0000"}}}],r.xAxis[0].data=n,r.grid.left=40,r.grid.bottom=10,s.setOption(r),this.setState({lineChart:s})}},{key:"getDateText",value:function(){switch(this.props.dateType){case"1":return"24小时";case"7":return"7天";case"30":return"30天";case"-1":return"历史以来";default:return""}}},{key:"render",value:function(){return r.a.createElement("div",{style:{paddingLeft:"20px",paddingRight:"20px"}},r.a.createElement(yt.a,null,r.a.createElement(kt.a,{span:16},r.a.createElement(yt.a,{gutter:100,style:{paddingLeft:"30px"},className:"m-count padding-l20 height-callstate-item"},r.a.createElement(kt.a,{span:6},r.a.createElement("section",{className:"m-count-section margin-t20",style:{width:150}},r.a.createElement("span",{className:"m-count-title text-left"},this.getDateText(),"累计调用"),r.a.createElement("span",{className:"m-count-content font-black text-left"},this.state.callCount||0,r.a.createElement("span",{style:{fontSize:12}},"次")))),r.a.createElement(kt.a,{span:4},r.a.createElement("section",{className:"m-count-section margin-t20",style:{width:100}},r.a.createElement("span",{className:"m-count-title text-left"},this.getDateText(),"失败率"),r.a.createElement("span",{className:"m-count-content font-red text-left"},this.state.failPercent||0,r.a.createElement("span",{style:{fontSize:12}},"%"))))),r.a.createElement(He.a,{onResize:this.resize},r.a.createElement("article",{id:"manageApiDetail",style:{width:"100%",height:"250px"}}))),r.a.createElement(kt.a,{span:8,style:{paddingTop:"15px"}},r.a.createElement("p",{style:{fontWeight:"bold",lineHeight:1,fontSize:"14px"}},"排行榜"),r.a.createElement(Yn,{data:this.state.topCallList}))))}}]),t}(s.Component))||on,$n=Xn,Zn=$n,ei=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Jn,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/callState.js"),__REACT_HOT_LOADER__.register(Qn,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/callState.js"),__REACT_HOT_LOADER__.register(Xn,"ApiManageCallState","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/callState.js"),__REACT_HOT_LOADER__.register($n,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/callState.js")),a(78));a(601),a(199),a(139),a(138);var ti,ai,ni,ii,si=[{code:"disable",name:"禁用",color:"#71C671"},{code:"unauthorize",name:"未认证",color:"#EE4000"},{code:"paramerror",name:"参数错误",color:"#1C86EE"},{code:"timeout",name:"超时",color:"#EE9A00"},{code:"outlimit",name:"超出限制",color:"#40E0D0"},{code:"other",name:"其他",color:"#A2B5CD"}],ri=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={},n.resize=function(){var e;return(e=n).__resize__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this.props.chartData||[];this.intPie(e)}},{key:"__resize__REACT_HOT_LOADER__",value:function(){this.state.pieChart&&this.state.pieChart.resize()}},{key:"componentWillReceiveProps",value:function(e){this.props.chartData!=e.chartData&&this.intPie(e.chartData)}},{key:"intPie",value:function(e){for(var t=[],a=[],n=0;n<e.length;n++){var i=e[n],s=si[i.type-1];s&&t.indexOf(s.name)<0&&(t.push(s.name),a.push({value:i.callNum,name:s.name,itemStyle:{normal:{color:s.color}}}))}var r=ei.init(document.getElementById("ErrorDistributedPie")),o=Object(Pe.cloneDeep)(pt);o.legend.data=t,o.series[0].data=a,r.setOption(o),this.setState({pieChart:r})}},{key:"render",value:function(){var e=this.props.mode,t=e?{mini:{height:"280px"}}[e]:{height:"300px"};return r.a.createElement(He.a,{onResize:this.resize.bind(this)},r.a.createElement("article",{id:"ErrorDistributedPie",style:{width:"100%",height:t.height}}))}}]),t}(s.Component),oi=ri,li=oi,ci=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(si,"errorDic","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/errorDistributed/index.js"),__REACT_HOT_LOADER__.register(ri,"ErrorDistributed","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/errorDistributed/index.js"),__REACT_HOT_LOADER__.register(oi,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/errorDistributed/index.js")),{1:"disable",2:"unauthorize",3:"paramerror",4:"timeout",5:"outlimit",6:"other"}),pi={disable:"禁用",unauthorize:"未认证",paramerror:"参数错误",timeout:"超时",outlimit:"超过限制",other:"其他"},ui=function(e){return{}},di=function(e){return{getApiCallErrorInfo:function(t,a){return e(jn.getApiCallErrorInfo({apiId:t,time:a}))},queryApiCallLog:function(t,a,n,i){return e(ya.queryApiCallLog({apiId:t,currentPage:a,bizType:n,useAdmin:!0,time:i}))}}},_i=Object(v.b)(ui,di)(ti=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={error:{},data:[],loading:!1,pageIndex:1,total:0,filter:{},recordInfoList:[]},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.apiId,a=e.dateType;this.getErrorInfo(t,a)}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.props,n=a.apiId,i=a.dateType,s=e.apiId,r=e.dateType;n==s&&i==r||this.setState({pageIndex:1},function(){t.getErrorInfo(s,r)})}},{key:"getErrorInfo",value:function(e,t){var a=this;e&&(this.props.getApiCallErrorInfo(e,t).then(function(e){if(e){for(var t={},n=0;n<e.data.recordInfoList.length;n++){var i=e.data.recordInfoList[n],s=ci[i.type];s&&(t[s]={percent:i.rate,count:i.callNum})}a.setState({error:t,recordInfoList:e.data.recordInfoList})}}),this.props.queryApiCallLog(e,this.state.pageIndex,this.state.filter.bizType&&this.state.filter.bizType[0],t).then(function(e){e&&a.setState({data:e.data.data,total:e.data.totalCount})}))}},{key:"initColumns",value:function(){var e=this;return[{title:"调用时间",dataIndex:"invokeTime",key:"invokeTime",render:function(e){return N.a.formatDateTime(e)}},{title:"调用用户",dataIndex:"userName",key:"userName"},{title:"错误类型",dataIndex:"bizType",key:"bizType",width:"100px",render:function(e){return pi[ci[e]]},filters:[{text:"参数错误",value:"3"},{text:"禁用",value:"1"},{text:"未认证",value:"2"},{text:"超时",value:"4"},{text:"超过限制",value:"5"},{text:"其他",value:"6"}],filterMultiple:!1},{title:"错误日志",dataIndex:"content",key:"content",width:"250px"},{title:"操作",dataIndex:"",key:"deal",width:"100px",render:function(t,a){return r.a.createElement("a",{onClick:e.lookAllErrorText.bind(e,a.content)},"查看全部")}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:10,total:this.state.total}}},{key:"getSource",value:function(){return this.state.data}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,filter:t},function(){var e=n.props,t=e.apiId,a=e.dateType;n.getErrorInfo(t,a)})}},{key:"lookAllErrorText",value:function(e){ca.a.info({title:"错误日志",content:r.a.createElement("div",null,r.a.createElement("p",null,e)),onOk:function(){}})}},{key:"getErrorPercent",value:function(e){return this.state.error[e]&&this.state.error[e].percent||0}},{key:"getErrorCount",value:function(e){return this.state.error[e]&&this.state.error[e].count||0}},{key:"render",value:function(){var e=this.state.recordInfoList,t=this.getSource(),a="m-table monitor-table table-p-l20";return t.length<3&&(a+=" mini-filter"),r.a.createElement("div",null,r.a.createElement(yt.a,null,r.a.createElement(kt.a,{span:16,style:{paddingRight:"20px"}},r.a.createElement("p",{style:{lineHeight:"1",padding:"14px 0px 14px 8px"},className:"child-span-padding-r20"},r.a.createElement("span",null,"参数错误: ",this.getErrorPercent("paramerror"),"% (",this.getErrorCount("paramerror"),"次)"),r.a.createElement("span",null,"禁用: ",this.getErrorPercent("disable"),"% (",this.getErrorCount("disable"),"次)"),r.a.createElement("span",null,"未认证: ",this.getErrorPercent("unauthorize"),"% (",this.getErrorCount("unauthorize"),"次)"),r.a.createElement("span",null,"超时: ",this.getErrorPercent("timeout"),"% (",this.getErrorCount("timeout"),"次)"),r.a.createElement("span",null,"超过限制: ",this.getErrorPercent("outlimit"),"% (",this.getErrorCount("outlimit"),"次)"),r.a.createElement("span",null,"其他: ",this.getErrorPercent("other"),"% (",this.getErrorCount("other"),"次)")),r.a.createElement(Ge.a,{rowKey:"id",className:a,columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:t,scroll:{y:180},onChange:this.onTableChange})),r.a.createElement(kt.a,{span:8},r.a.createElement(li,{chartData:e,mode:"mini"}))))}}]),t}(s.Component))||ti,mi=_i,hi=mi,gi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ci,"errorType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/errorLog.js"),__REACT_HOT_LOADER__.register(pi,"errorExchange","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/errorLog.js"),__REACT_HOT_LOADER__.register(ui,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/errorLog.js"),__REACT_HOT_LOADER__.register(di,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/errorLog.js"),__REACT_HOT_LOADER__.register(_i,"ManageErrorLog","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/errorLog.js"),__REACT_HOT_LOADER__.register(mi,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/errorLog.js")),wt.a.Button),Ai=wt.a.Group,Ei=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={approvedText:"同意",applyText:"申请调用此接口，请批准",nowView:"callMethod",date:"1"},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"callback",value:function(e){this.setState({nowView:e})}},{key:"chooseCallStateDate",value:function(e){this.setState({date:e.target.value})}},{key:"getDateTypeView",value:function(){switch(this.state.nowView){case"callState":return r.a.createElement("div",{className:"m-radio-group",key:"date",style:{marginTop:4,marginRight:28}},r.a.createElement(Ai,{name:"date",defaultValue:this.state.date,className:"no-bd nobackground",onChange:this.chooseCallStateDate.bind(this)},r.a.createElement(gi,{value:"1"},"最近24小时"),r.a.createElement(gi,{value:"7"},"最近7天"),r.a.createElement(gi,{value:"30"},"最近30天"),r.a.createElement(gi,{value:"-1"},"历史以来")));default:return null}}},{key:"render",value:function(){var e=this.props.showRecord,t=void 0===e?{}:e,a=t.status==Ze.STOP;return r.a.createElement(mn.a,{className:"m-tabs tabs-filter-show",visible:this.props.slidePaneShow,style:{right:"-20px",width:"80%",minHeight:"760px",height:"100%"},onClose:this.props.closeSlidePane},r.a.createElement(Ct.a,{animated:!1,activeKey:this.state.nowView,onChange:this.callback.bind(this),tabBarExtraContent:this.getDateTypeView()},r.a.createElement(Ct.a.TabPane,{tab:"API详情",key:"callMethod"},r.a.createElement(Dn,H()({mode:"manage"},this.props))),r.a.createElement(Ct.a.TabPane,{tab:"调用情况",key:"callState"},r.a.createElement("h1",{className:"title-border-l-blue slide-title"},"调用统计"),r.a.createElement(Zn,{apiId:t.id,dateType:this.state.date}),r.a.createElement("h1",{className:"title-border-l-blue slide-title"},"错误日志"),r.a.createElement("div",{style:{paddingLeft:"20px",paddingRight:"20px"}},r.a.createElement(yt.a,null,r.a.createElement(hi,{apiId:t.id,dateType:this.state.date})))),r.a.createElement(Ct.a.TabPane,{tab:"订购情况",key:"buyState"},r.a.createElement("div",{style:{padding:"10px 15px"}},r.a.createElement(Bn,{statusDisAble:a,apiId:t.id})))))}}]),t}(s.Component),fi=Ei,Ti=fi,yi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(gi,"RadioButton","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/apiSlide.js"),__REACT_HOT_LOADER__.register(Ai,"RadioGroup","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/apiSlide.js"),__REACT_HOT_LOADER__.register(Ei,"apiSlidePane","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/apiSlide.js"),__REACT_HOT_LOADER__.register(fi,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/apiSlide.js")),_a.a.Search),vi=oa.a.Option,Ci=ca.a.confirm,bi=function(e){var t=e.user;return{apiMarket:e.apiMarket,apiManage:e.apiManage,user:t,dataSource:e.dataSource}},ki=function(e){return{getCatalogue:function(t){e(yn.getCatalogue(t))},getAllApiList:function(t){return e(jn.getAllApiList(t))},getDataSourceList:function(t){return e(jn.getDataSourceByBaseInfo({type:t}))},deleteApi:function(t){return e(jn.deleteApi({apiIds:[t]}))},openApi:function(t){return e(jn.openApi(t))},closeApi:function(t){return e(jn.closeApi(t))},getDataSourcesType:function(){return e(Qa.getDataSourcesType())}}},Di=Object(v.b)(bi,ki)(ai=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={pageSize:20,pageIndex:1,type1:void 0,type2:void 0,total:0,dataSourceType:void 0,dataSource:void 0,searchName:n.props.location.state&&n.props.location.state.apiName,filter:{},sortedInfo:{},showRecord:{},changeMan:null,loading:!1,cascaderData:[]},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this;this.props.getCatalogue(0),this.getAllApi().then(function(t){var a=e.props.location.state&&e.props.location.state.apiId;if(t&&a)for(var n in t.data.data){var i=t.data.data[n];if(a==i.id){e.openDetail(i);break}}}),this.getDataSource(null),this.props.getDataSourcesType()}},{key:"exchangeSourceType",value:function(){var e=[],t={},a=this.props.dataSource.sourceType;for(var n in a){var i=a[n];t[i.value]=i.name,e.push({text:i.name,value:i.value})}return{typeList:e,typeDic:t}}},{key:"getAllApi",value:function(){var e=this,t={};return t.apiName=this.state.searchName,t.pid=this.state.type1,t.cid=this.state.type2,t.dataSourceType=this.state.dataSourceType&&parseInt(this.state.dataSourceType),t.dataSourceId=this.state.dataSource&&parseInt(this.state.dataSource),t.modifyUserId=this.state.changeMan,t.orderBy={gmtModified:"gmt_modified"}[this.state.sortedInfo.columnKey],t.sort={ascend:"asc",descend:"desc"}[this.state.sortedInfo.order],t.currentPage=this.state.pageIndex,t.pageSize=this.state.pageSize,this.setState({loading:!0}),this.props.getAllApiList(t).then(function(t){if(e.setState({loading:!1}),t)return e.setState({total:t.data.totalCount}),t})}},{key:"handleSearch",value:function(e){var t=this;this.setState({searchName:e,pageIndex:1},function(){t.getAllApi()})}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,filter:t,sortedInfo:a},function(){n.getAllApi()})}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:this.state.total}}},{key:"openDetail",value:function(e){this.setState({showRecord:e,slidePaneShow:!0})}},{key:"closeSlidePane",value:function(){this.setState({showRecord:{},slidePaneShow:!1})}},{key:"initColumns",value:function(){var e=this;return[{title:"API名称",dataIndex:"name",key:"name",render:function(t,a){return r.a.createElement("a",{onClick:e.openDetail.bind(e,a)},t)}},{title:"状态",dataIndex:"status",key:"status",render:function(e,t){return r.a.createElement("span",{className:"state-"+nt[e]},{success:"正常",stop:"已禁用",editting:"未发布"}[nt[e]])}},{title:"数据源",dataIndex:"dataSourceType",key:"dataSourceType",render:function(e,t){return t.dataSourceType||t.dataSourceName?(t.dataSourceType||"无")+" / "+(t.dataSourceName||"无"):null}},{title:"最近24小时调用",dataIndex:"total1d",key:"total1d",width:"150px"},{title:"累计调用",dataIndex:"invokeTotal",key:"invokeTotal",width:"150px"},{title:"创建人",dataIndex:"createUser",key:"createUser"},{title:"操作",dataIndex:"deal",key:"deal",width:"150px",render:function(t,a){return Ze.SUCCESS==a.status?r.a.createElement("a",{onClick:e.closeApi.bind(e,a.id)},"禁用"):r.a.createElement("div",null,r.a.createElement("a",{onClick:e.openApi.bind(e,a.id)},"发布"),r.a.createElement("span",{className:"ant-divider"}),r.a.createElement("a",{onClick:e.editApi.bind(e,a.id)},"编辑"),r.a.createElement("span",{className:"ant-divider"}),r.a.createElement("a",{onClick:e.deleteApi.bind(e,a.id)},"删除"))}}]}},{key:"getSource",value:function(){return this.props.apiManage.apiList}},{key:"editApi",value:function(e){this.props.router.push("/api/manage/newApi?apiId="+e)}},{key:"openApi",value:function(e){var t=this;Ci({title:"确认发布?",content:"确认发布api",onOk:function(){t.setState({loading:!0}),t.props.openApi(e).then(function(e){t.setState({loading:!1}),e&&($.a.success("发布成功"),t.getAllApi())})},onCancel:function(){}})}},{key:"closeApi",value:function(e){var t=this;Ci({title:"确认禁用?",content:"确认禁用api",onOk:function(){t.setState({loading:!0}),t.props.closeApi(e).then(function(e){t.setState({loading:!1}),$.a.success("禁用成功"),e&&t.getAllApi()})},onCancel:function(){}})}},{key:"deleteApi",value:function(e){var t=this;Ci({title:"确认删除?",content:"确认删除api",onOk:function(){t.setState({loading:!0}),t.props.deleteApi(e).then(function(e){t.setState({loading:!1}),e&&($.a.success("删除成功"),t.getAllApi())})},onCancel:function(){}})}},{key:"gerDataSourceView",value:function(){var e=this.state.dataSourceList;return e?e.map(function(e,t){return r.a.createElement(vi,{key:e.id},e.name)}):null}},{key:"getDataSource",value:function(){var e=this;this.props.getDataSourceList(this.state.dataSourceType).then(function(t){if(t){var a=t.data;e.setState({dataSourceList:a})}})}},{key:"getDataSourceTypeView",value:function(){var e=this.exchangeSourceType(),t=e.typeList;e.typeDic;return!t||t.length<1?null:t.map(function(e){return r.a.createElement(vi,{key:e.value},e.text)})}},{key:"dataSourceTypeChange",value:function(e){var t=this;this.setState({dataSourceType:e,dataSource:void 0},function(){t.getDataSource(),t.getAllApi()})}},{key:"dataSourceChange",value:function(e){var t=this;this.setState({dataSource:e},function(){t.getAllApi()})}},{key:"changeManCheck",value:function(e){var t=this,a=null;e.target.checked&&(a=this.props.user.id),this.setState({changeMan:a},function(){t.getAllApi()})}},{key:"getCascaderData",value:function(){var e=[],t=this.props.apiMarket.apiCatalogue;return t.length>0&&t.map(function(t){var a={};a.value=a.label=t.catalogueName,a.pid=t.id,t.childCatalogue.length>0&&(a.children=[],t.childCatalogue.map(function(e){var t={};t.value=t.label=e.catalogueName,t.cid=e.id,a.children.push(t)})),e.push(a)}),e}},{key:"cascaderOnChange",value:function(e,t){var a=this,n=this.state,i=n.type1,s=n.type2;i=t[0]?t[0].pid:void 0,s=t[1]?t[1].cid:void 0,this.setState({type1:i,type2:s},function(){a.getAllApi()})}},{key:"getCardTitle",value:function(){var e=this.state.searchName,t=this.getCascaderData();return r.a.createElement("div",{className:"flex font-12"},r.a.createElement(yi,{placeholder:"输入API名称搜索",style:{width:150,margin:"10px 0"},onSearch:this.handleSearch.bind(this),defaultValue:e}),r.a.createElement("div",{className:"m-l-8"},"API分类：",r.a.createElement(_n.a,{placeholder:"API分类",options:t,onChange:this.cascaderOnChange.bind(this),changeOnSelect:!0,expandTrigger:"hover"})),r.a.createElement("div",{className:"m-l-8"},"类型：",r.a.createElement(oa.a,{placeholder:"类型",value:this.state.dataSourceType,allowClear:!0,onChange:this.dataSourceTypeChange.bind(this),style:{width:100}},this.getDataSourceTypeView())),r.a.createElement("div",{className:"m-l-8"},"数据源：",r.a.createElement(oa.a,{placeholder:"数据源",value:this.state.dataSource,allowClear:!0,onChange:this.dataSourceChange.bind(this),style:{width:100}},this.gerDataSourceView())),r.a.createElement("div",{className:"m-l-8"},r.a.createElement(Ga.a,{onChange:this.changeManCheck.bind(this)},"我修改的")))}},{key:"openApiType",value:function(){this.props.router.push("/api/manage/apiType")}},{key:"newApi",value:function(){this.props.router.push("/api/manage/newApi")}},{key:"getCardExtra",value:function(){return r.a.createElement("div",{style:{paddingTop:"10px"}},r.a.createElement(sa.a,{onClick:this.openApiType.bind(this),style:{marginRight:"8px"},type:"primary"},"类目管理"),r.a.createElement(sa.a,{type:"primary",onClick:this.newApi.bind(this)},"生成API"))}},{key:"render",value:function(){var e=this.state,t=e.slidePaneShow,a=e.showRecord;return r.a.createElement("div",{className:"api-management"},r.a.createElement("div",{style:{marginTop:"20px"},className:"margin-0-20 m-card box-2"},r.a.createElement(Ti,{showRecord:a,slidePaneShow:t,closeSlidePane:this.closeSlidePane.bind(this)}),r.a.createElement(je.a,{noHovering:!0,title:this.getCardTitle(),extra:this.getCardExtra()},r.a.createElement(Ge.a,{rowClassName:function(e,t){return a.id==e.id?"row-select":""},rowKey:"id",className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange}))))}}]),t}(s.Component))||ai,xi=Di,Ri=xi,wi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(yi,"Search","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/index.js"),__REACT_HOT_LOADER__.register(vi,"Option","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/index.js"),__REACT_HOT_LOADER__.register(Ci,"confirm","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/index.js"),__REACT_HOT_LOADER__.register(bi,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/index.js"),__REACT_HOT_LOADER__.register(ki,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/index.js"),__REACT_HOT_LOADER__.register(Di,"APIMana","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/index.js"),__REACT_HOT_LOADER__.register(xi,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/index.js")),a(177),a(93)),Oi=a.n(wi),Si=(a(105),a(71)),Li=a.n(Si),Ii=ua.a.Item,Ni=_a.a.TextArea,Pi=Li.a.RangePicker,Hi={labelCol:{sm:6,xs:24},wrapperCol:{sm:18,xs:24}},Ui=void 0,ji=function(e){return{apiApply:function(t,a,n,i){return e(yn.apiApply({apiId:t,applyContent:a,callLimit:n,beginTime:i&&i.length>1&&i[0].valueOf(),endTime:i&&i.length>1&&i[1].valueOf()}))},getApiExtInfo:function(t){e(yn.getApiExtInfo({apiId:t}))}}},Mi=Object(v.b)(null,ji)(ni=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={loading:!1,countMode:!1,dateMode:!1},n.disabledDate=function(){var e;return(e=n).__disabledDate__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"handleSubmit",value:function(e){}},{key:"handleOk",value:function(){var e=this,t=this.state,a=t.countMode,n=t.dateMode,i=this.props.hideJump;this.props.form.validateFields(function(t,s){t||(e.setState({loading:!0}),e.props.apiApply(e.props.apiId,s.applyMsg,a?-1:s.callCount,n?null:s.callDateRange).then(function(t){e.setState({loading:!1}),t&&(e.props.getApiExtInfo(e.props.apiId),e.props.form.resetFields(),e.props.successCallBack(),$.a.success("操作成功"),i||e.showApplySuccessModal())}))})}},{key:"handleCancel",value:function(){this.props.form.resetFields(),this.props.cancelCallback()}},{key:"showApplySuccessModal",value:function(){Ui=ca.a.success({title:"申请提交成功",content:r.a.createElement("span",null,"您可以在 ",r.a.createElement("a",{onClick:this.jumpToMine.bind(this)},"我的API")," 中查看审批进度"),okText:"确定"})}},{key:"jumpToMine",value:function(){Ui&&Ui.destroy(),y.g.push("/api/mine")}},{key:"changeCountMode",value:function(e){this.props.form.resetFields(["callCount"]),this.setState({countMode:e.target.checked})}},{key:"changeDateMode",value:function(e){this.props.form.resetFields(["callDateRange"]),this.setState({dateMode:e.target.checked})}},{key:"__disabledDate__REACT_HOT_LOADER__",value:function(e){return e&&e.valueOf()<Ca()().subtract(1,"days").valueOf()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state,a=t.countMode,n=t.dateMode;return r.a.createElement("div",null,r.a.createElement(ca.a,{title:"申请API",visible:this.props.show,onOk:this.handleOk.bind(this),onCancel:this.handleCancel.bind(this),footer:[r.a.createElement(sa.a,{key:"back",size:"large",onClick:this.handleCancel.bind(this)},"取消"),r.a.createElement(sa.a,{key:"submit",type:"primary",size:"large",loading:this.state.loading,onClick:this.handleOk.bind(this)},"提交")]},r.a.createElement(ua.a,{onSubmit:this.handleSubmit.bind(this)},r.a.createElement(Ii,H()({label:"API名称",hasFeedback:!0},Hi),this.props.apiName),r.a.createElement(Ii,H()({label:"调用次数"},Hi),e("callCount",{rules:[{required:!a,message:"请输入调用次数"},{validator:function(e,t,a){(t||0===t)&&t<1?a("次数不能小于1"):a()}}]})(r.a.createElement(Oi.a,{min:1,disabled:a,type:"number"})),r.a.createElement(Ga.a,{checked:a,onChange:this.changeCountMode.bind(this)},"不限制调用次数"),r.a.createElement(Ba.a,{title:"当服务端多机部署时，可能会存在实际调用次数略大于申请次数的情况，但不会少于申请次数。"},r.a.createElement(j.a,{type:"question-circle"}))),r.a.createElement(Ii,H()({label:"调用周期"},Hi),e("callDateRange",{rules:[{required:!n,message:"请选择调用周期"}]})(r.a.createElement(Pi,{disabledDate:this.disabledDate,disabled:n,style:{width:"220px",verticalAlign:"middle",marginRight:"8px"},popupStyle:{fontSize:"14px"}})),r.a.createElement(Ga.a,{checked:n,onChange:this.changeDateMode.bind(this)},"不限制调用时间")),r.a.createElement(Ii,H()({label:"申请说明",required:!0,hasFeedback:!0},Hi),e("applyMsg",{rules:[{required:!0,message:"请输入申请信息"},{max:200,message:"最大字符不能超过200"}]})(r.a.createElement(Ni,{style:{width:300},rows:4}))))))}}]),t}(s.Component))||ni,Gi=ua.a.create()(Mi),Fi=Gi,Vi=Fi,qi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ii,"FormItem","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/applyBox/index.js"),__REACT_HOT_LOADER__.register(Ni,"TextArea","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/applyBox/index.js"),__REACT_HOT_LOADER__.register(Pi,"RangePicker","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/applyBox/index.js"),__REACT_HOT_LOADER__.register(Hi,"formLayout","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/applyBox/index.js"),__REACT_HOT_LOADER__.register(Ui,"modal","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/applyBox/index.js"),__REACT_HOT_LOADER__.register(ji,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/applyBox/index.js"),__REACT_HOT_LOADER__.register(Mi,"ApplyBox","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/applyBox/index.js"),__REACT_HOT_LOADER__.register(Gi,"WrappedApplyBox","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/applyBox/index.js"),__REACT_HOT_LOADER__.register(Fi,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/applyBox/index.js")),oa.a.Option),Bi=_a.a.Search,zi=void 0,Ki=function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t}},Yi=function(e){return{getCatalogue:function(t){e(yn.getCatalogue(t))},getApiMarketList:function(t){return e(yn.getApiMarketList(t))},getApiDetail:function(t){e(yn.getApiDetail(t))},getApiExtInfo:function(t){e(yn.getApiExtInfo(t))}}},Wi=Object(v.b)(Ki,Yi)(ii=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={searchValue:"",pageIndex:1,loading:!0,applyBox:!1,apply:{apiId:"",apiName:"",desc:""},detailRecord:{},type1:void 0,type2:void 0,apiName:"",pageSize:20,total:0,sorter:{},slidePaneShow:!1},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"getMarketApi",value:function(){var e=this;this.setState({loading:!0});this.props.getApiMarketList({apiName:this.state.searchValue,pid:this.state.type1||-1,cid:this.state.type2||-1,currentPage:this.state.pageIndex,pageSize:this.state.pageSize,orderBy:{updateTime:"gmt_modified"}[this.state.sorter.columnKey],sort:{ascend:"asc",descend:"desc"}[this.state.sorter.order]}).then(function(t){e.setState({loading:!1,total:t.data.totalCount})}).catch(function(t){e.setState({loading:!1})})}},{key:"getCatagoryName",value:function(e,t){if(!e&&0!=e)return null;var a=[];return function t(n){if(!n||n.length<1)return null;for(var i=0;i<n.length;i++){var s=n[i];if(!s.api){if(s.id==e)return a.push(s.catalogueName),s.catalogueName;if(t(s.childCatalogue))return a.push(s.catalogueName),s.catalogueName}}return null}(t||this.props.apiMarket.apiCatalogue)?a.reverse().join(" / "):null}},{key:"getCascaderData",value:function(){var e=[],t=this.props.apiMarket.apiCatalogue;return t.length>0&&t.map(function(t){var a={};a.value=a.label=t.catalogueName,a.pid=t.id,t.childCatalogue.length>0&&(a.children=[],t.childCatalogue.map(function(e){var t={};t.value=t.label=e.catalogueName,t.cid=e.id,a.children.push(t)})),e.push(a)}),e}},{key:"componentDidMount",value:function(){this.props.getCatalogue(0),this.getMarketApi()}},{key:"onSourceChange",value:function(e){var t=this;this.setState({type1:e,type2:void 0},function(){t.getMarketApi()})}},{key:"onUserSourceChange",value:function(e){var t=this;this.setState({type2:e},function(){t.getMarketApi()})}},{key:"handleSearch",value:function(e){var t=this;this.setState({searchValue:e,pageIndex:1},function(){t.getMarketApi()})}},{key:"getDealType",value:function(e){return{complete:"已审批",nothing:"申请",applying:"审批中"}[e||"nothing"]}},{key:"deal",value:function(e){var t=this["deal"+e.deal];t&&t.call(this,e)}},{key:"dealcomplete",value:function(e){this.props.router.push({pathname:"/api/mine/approved",query:{apiId:e.key,apiName:e.apiName}})}},{key:"dealnothing",value:function(e){this.setState({applyBox:!0,apply:{apiId:e.key,apiName:e.apiName,desc:e.description}})}},{key:"dealapplying",value:function(e){this.props.router.push({pathname:"/api/mine/notApproved",query:{apiId:e.key,apiName:e.apiName}})}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,sorter:a},function(){n.getMarketApi()})}},{key:"openDetail",value:function(e){var t=this.props,a=t.getApiDetail,n=t.getApiExtInfo;this.setState({detailRecord:e,slidePaneShow:!0}),a({apiId:e.key}),n({apiId:e.key})}},{key:"initColumns",value:function(){var e=this;return[{title:"API名称",dataIndex:"apiName",key:"apiName",render:function(t,a){return r.a.createElement("a",{onClick:e.openDetail.bind(e,a)},t)}},{title:"API分类",dataIndex:"cId",key:"cId",width:"230px",render:function(t,a){return e.getCatagoryName(t)}},{title:"描述",dataIndex:"description",key:"description",width:300,render:function(e){return e&&e.length>21?r.a.createElement(Ba.a,{title:e},r.a.createElement("span",null,e.substr(0,21)+"......")):e}},{title:"累计调用（次）",dataIndex:"callCount",key:"callCount"},{title:"最近更新时间",dataIndex:"updateTime",key:"updateTime",render:function(e){return N.a.formatDateTime(e)},sorter:!0},{title:"操作",dataIndex:"deal",render:function(t,a){return r.a.createElement("a",{onClick:e.deal.bind(e,a)},e.getDealType(a.deal))}}]}},{key:"getSource",value:function(){for(var e={5:"nothing",4:"complete",3:"complete",2:"nothing",1:"complete",0:"applying","-1":"nothing"},t=this.props.apiMarket.apiList,a=[],n=0;n<t.length;n++)a.push({key:t[n].id,apiName:t[n].name,description:t[n].apiDesc,callCount:t[n].invokeTotal,updateTime:t[n].gmtModified,deal:e[t[n].applyStatus],cId:t[n].cId});return a}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:this.state.pageSize,total:this.state.total}}},{key:"cascaderOnChange",value:function(e,t){var a=this,n=this.state,i=n.type1,s=n.type2;i=t[0]?t[0].pid:void 0,s=t[1]?t[1].cid:void 0,this.setState({type1:i,type2:s},function(){a.getMarketApi()})}},{key:"getCardTitle",value:function(){var e=this.getCascaderData();return r.a.createElement("div",{className:"flex font-12"},r.a.createElement(Bi,{placeholder:"输入API名称搜索",style:{width:150,margin:"10px 0"},onSearch:this.handleSearch.bind(this)}),r.a.createElement("div",{className:"m-l-8"},"API分类：",r.a.createElement(_n.a,{placeholder:"API分类",options:e,onChange:this.cascaderOnChange.bind(this),changeOnSelect:!0,expandTrigger:"hover"})))}},{key:"jumpToMine",value:function(){zi.destroy(),this.props.router.push("/api/mine")}},{key:"showApplySuccessModal",value:function(){zi=ca.a.success({title:"申请提交成功",content:r.a.createElement("span",null,"您可以在 ",r.a.createElement("a",{onClick:this.jumpToMine.bind(this)},"我的API")," 中查看审批进度"),okText:"确定"})}},{key:"handleOk",value:function(){this.setState({applyBox:!1}),this.getMarketApi()}},{key:"handleCancel",value:function(){this.setState({applyBox:!1})}},{key:"closeSlide",value:function(){this.setState({slidePaneShow:!1})}},{key:"render",value:function(){var e=this.props.apiMarket,t=this.state,a=t.slidePaneShow,n=t.detailRecord;return r.a.createElement("div",{className:"api-market"},r.a.createElement(Vi,{show:this.state.applyBox,successCallBack:this.handleOk.bind(this),cancelCallback:this.handleCancel.bind(this),apiId:this.state.apply.apiId,apiName:this.state.apply.apiName,desc:this.state.apply.desc}),r.a.createElement("h1",{className:"box-title"},"Api市场"),r.a.createElement("div",{className:"margin-0-20 m-card box-2"},r.a.createElement(mn.a,{className:"m-tabs tabs-filter-show",visible:a,style:{right:"-20px",width:"80%",minHeight:"720px",height:"100%"},onClose:this.closeSlide.bind(this)},r.a.createElement(Ct.a,{animated:!1},r.a.createElement(Ct.a.TabPane,{tab:"API详情",key:"callMethod"},r.a.createElement("div",{style:{paddingLeft:"40px",paddingTop:"20px"}},r.a.createElement(An,{apiMarket:e,apiId:n.key,showMarketInfo:!0}))))),r.a.createElement(je.a,{noHovering:!0,title:this.getCardTitle()},r.a.createElement(Ge.a,{className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange}))))}}]),t}(s.Component))||ii,Ji=Wi,Qi=Ji,Xi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(qi,"Option","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/market/index.js"),__REACT_HOT_LOADER__.register(Bi,"Search","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/market/index.js"),__REACT_HOT_LOADER__.register(zi,"modal","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/market/index.js"),__REACT_HOT_LOADER__.register(Ki,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/market/index.js"),__REACT_HOT_LOADER__.register(Yi,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/market/index.js"),__REACT_HOT_LOADER__.register(Wi,"APIMarket","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/market/index.js"),__REACT_HOT_LOADER__.register(Ji,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/market/index.js")),_a.a.TextArea),$i=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"render",value:function(){this.props.showRecord&&this.props.showRecord.replyTime;return r.a.createElement(mn.a,{visible:this.props.slidePaneShow,style:{right:"-20px",width:"80%",minHeight:"600px",height:"100%"},onClose:this.props.closeSlidePane},r.a.createElement("h1",{className:"box-title approved-card-pane-title"},"审批详情"),r.a.createElement("div",{style:{paddingLeft:30,marginBottom:30}},r.a.createElement("p",{className:"before-title-pane textarea-p","data-title":"申请说明："},r.a.createElement(Xi,{disabled:!0,value:this.props.showRecord&&this.props.showRecord.applyContent,style:{width:200,color:"#999",fontSize:14},rows:4})),r.a.createElement("p",{style:{paddingLeft:70}},N.a.formatDateTime(this.props.showRecord&&this.props.showRecord.applyTime)),this.props.isApproved?r.a.createElement("div",null,r.a.createElement("p",{className:"before-title-pane textarea-p","data-title":"审批说明："},r.a.createElement(Xi,{disabled:!0,value:this.props.showRecord&&this.props.showRecord.replyContent,style:{width:200,color:"#999",fontSize:14},rows:4})),r.a.createElement("p",{style:{paddingLeft:70}},N.a.formatDateTime(this.props.showRecord&&this.props.showRecord.replyTime))):null))}}]),t}(s.Component),Zi=$i,es=Zi,ts=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Xi,"TextArea","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/approvedSlidePane.js"),__REACT_HOT_LOADER__.register($i,"ApprovedSlidePane","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/approvedSlidePane.js"),__REACT_HOT_LOADER__.register(Zi,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/approvedSlidePane.js")),{applyTime:"gmt_modified"}),as={ascend:"asc",descend:"desc"},ns=_a.a.TextArea,is=_a.a.Search,ss=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={pageIndex:1,slidePaneShow:!1,sortedInfo:{},loading:!1,showRecord:{},apiName:N.a.getParameterByName("apiName")},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"getApplyingList",value:function(e){var t=this;this.setState({loading:!0}),this.props.getApplyingList(this.state.pageIndex,ts[this.state.sortedInfo.columnKey],as[this.state.sortedInfo.order],this.state.apiName).then(function(){t.setState({loading:!1}),e&&e()})}},{key:"componentDidMount",value:function(){var e=this;this.getApplyingList(function(){e.openCard(e.props.apiId)})}},{key:"componentWillReceiveProps",value:function(e){this.props.nowView!=e.nowView&&"notApproved"==e.nowView&&this.getApplyingList(),this.props.apiId!=e.apiId&&e.apiId&&this.openCard(e.apiId)}},{key:"openCard",value:function(e){var t=this.getSource();if(t)for(var a in t){var n=t[a];if(e==n.apiId){this.openApprovedState(n);break}}}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,sortedInfo:a},function(){n.getApplyingList()})}},{key:"openApprovedState",value:function(e){this.setState({slidePaneShow:!0,showRecord:e||{}})}},{key:"initColumns",value:function(){var e=this;this.state.sortedInfo;return[{title:"API名称",dataIndex:"apiName",key:"apiName",render:function(t,a){return r.a.createElement("a",{onClick:e.openApprovedState.bind(e,a)},t)}},{title:"申请次数",dataIndex:"callLimit",key:"callLimit",width:"100px",render:function(e){return-1==e?"无限制":e}},{title:"申请周期",dataIndex:"applyDateRange",key:"applyDateRange",render:function(e,t){return t.beginTime&&t.endTime?r.a.createElement("span",null,new Ca.a(t.beginTime).format("YYYY-MM-DD")," ~ ",new Ca.a(t.endTime).format("YYYY-MM-DD")):"无时间限制"}},{title:"申请说明",dataIndex:"applyContent",key:"applyContent",width:"300px"},{title:"申请时间",dataIndex:"applyTime",key:"applyTime",sorter:!0,render:function(e){return N.a.formatDateTime(e)}}]}},{key:"getSource",value:function(){return this.props.mine.apiList.applyingList.data}},{key:"getTotal",value:function(){return this.props.mine.apiList.applyingList&&this.props.mine.apiList.applyingList.totalCount||0}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:this.getTotal()}}},{key:"closeSlidePane",value:function(){this.setState({slidePaneShow:!1,showRecord:{}})}},{key:"handleApiSearch",value:function(e){var t=this;this.setState({apiName:e,pageIndex:1},function(){t.getApplyingList()})}},{key:"render",value:function(){var e=this,t=this.state.apiName;return r.a.createElement("div",null,r.a.createElement("div",{style:{marginRight:"-20px",position:"relative"}},r.a.createElement(es,H()({},this.props,{slidePaneShow:this.state.slidePaneShow,showRecord:this.state.showRecord,closeSlidePane:this.closeSlidePane.bind(this)}))),r.a.createElement(je.a,{noHovering:!0},r.a.createElement("div",{className:"flex font-12"},r.a.createElement(is,{placeholder:"输入API名称搜索",style:{width:150,margin:"10px 0px",marginLeft:"20px"},onSearch:this.handleApiSearch.bind(this),defaultValue:t})),r.a.createElement(Ge.a,{rowKey:"id",rowClassName:function(t,a){return e.state.showRecord.apiId==t.apiId?"row-select":""},className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange})))}}]),t}(s.Component),rs=ss,os=rs,ls=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ts,"sortType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/noApprovedCard.js"),__REACT_HOT_LOADER__.register(as,"orderType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/noApprovedCard.js"),__REACT_HOT_LOADER__.register(ns,"TextArea","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/noApprovedCard.js"),__REACT_HOT_LOADER__.register(is,"Search","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/noApprovedCard.js"),__REACT_HOT_LOADER__.register(ss,"NoApprovedCard","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/noApprovedCard.js"),__REACT_HOT_LOADER__.register(rs,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/noApprovedCard.js")),_a.a.TextArea),cs=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={phone:"",dtuicUserId:"",email:""},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.getApiCreatorInfo()}},{key:"componentWillReceiveProps",value:function(e){this.props.showRecord&&this.props.showRecord.apiId!==e.showRecord.apiId&&e.slidePaneShow&&this.getApiCreatorInfo(e.showRecord.apiId)}},{key:"getApiCreatorInfo",value:function(e){var t=this;(e=e||this.props.showRecord.apiId)&&this.props.getApiCreatorInfo(e).then(function(e){e&&t.setState({phone:e.data.phoneNumber,dtuicUserId:e.data.userName,email:e.data.email})})}},{key:"render",value:function(){return r.a.createElement(mn.a,{visible:this.props.slidePaneShow,style:{right:"-20px",width:"80%",minHeight:"600px",height:"100%"},onClose:this.props.closeSlidePane},r.a.createElement("h1",{className:"box-title approved-card-pane-title"},"详情"),r.a.createElement("div",{style:{paddingLeft:30,paddingTop:20}},r.a.createElement("p",null,"管理员已取消此接口的授权，您可以联系管理员咨询详细情况，管理员信息"),r.a.createElement("p",{style:{marginTop:20}},"用户名：",this.state.dtuicUserId),r.a.createElement("p",null,"手机号码：",this.state.phone),r.a.createElement("p",null,"邮箱：",this.state.email)))}}]),t}(s.Component),ps=cs,us=ps,ds=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ls,"TextArea","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/disabledCardSlidePane.js"),__REACT_HOT_LOADER__.register(cs,"DisabledCardSlidePane","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/disabledCardSlidePane.js"),__REACT_HOT_LOADER__.register(ps,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/disabledCardSlidePane.js")),a(78));a(148),a(199),a(139),a(138);var _s,ms,hs,gs,As,Es,fs=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={apiId:"",data:{}},n.resize=function(){var e;return(e=n).__resize__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"getInfo",value:function(e,t){var a=this;e&&this.props.getApiCallInfo(e,t).then(function(e){e&&a.setState({data:e.data},function(){a.initLineChart()})})}},{key:"componentDidMount",value:function(){var e=this.props,t=e.showRecord,a=void 0===t?{}:t,n=e.dateType,i=a.apiId;this.getInfo(i,n)}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.showRecord,n=void 0===a?{}:a,i=e.dateType,s=this.props,r=s.showRecord,o=void 0===r?{}:r,l=s.dateType,c=o.apiId,p=n.apiId;c===p&&l===i||this.setState({apiId:e.showRecord.apiId},function(){e.slidePaneShow&&t.getInfo(p,i)})}},{key:"__resize__REACT_HOT_LOADER__",value:function(){this.state.lineChart&&this.state.lineChart.resize()}},{key:"initLineChart",value:function(){if(this.state.data&&this.state.data.infoList){for(var e=this.state.data.infoList,t=[],a=[],n=[],i=0;i<e.length;i++)if(t.push(e[i].callCount),a.push(e[i].failRate),this.props.dateType)switch(this.props.dateType){case"1":n.push(N.a.formatHours(e[i].time));break;case"7":n.push(N.a.formatDateHours(e[i].time));break;case"30":n.push(N.a.formatDate(e[i].time))}var s=ds.init(document.getElementById("MyApiDetailState")),r=Object(Pe.cloneDeep)(ct);r.grid.right="40px",r.grid.left="40px",r.grid.bottom="10px",r.tooltip.formatter=function(e){for(var t=e[0].name,a=0,n=e.length;a<n;a++){var i="次";"失败率"==e[a].seriesName&&(i="%"),t+='<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e[a].color+'"></span>'+e[a].seriesName+" : "+e[a].value+i}return t},r.series=[{symbol:"none",name:"调用次数",data:t,type:"line",smooth:!0,itemStyle:{normal:{color:"#1C86EE"}}},{symbol:"none",name:"失败率",data:a,type:"line",smooth:!0,yAxisIndex:1,itemStyle:{normal:{color:"#EE0000"}}}],r.xAxis[0].data=n,s.setOption(r),this.setState({lineChart:s})}}},{key:"getDateText",value:function(){switch(this.props.dateType){case"1":return"24小时";case"7":return"7天";case"30":return"30天";default:return""}}},{key:"render",value:function(){return r.a.createElement("div",{style:{paddingLeft:30}},r.a.createElement(yt.a,{gutter:130,className:"m-count padding-l20 height-callstate-item"},r.a.createElement(kt.a,{span:8},r.a.createElement("section",{className:"m-count-section margin-t20",style:{width:150}},r.a.createElement("span",{className:"m-count-title text-left"},"最近",this.getDateText(),"累计调用"),r.a.createElement("span",{className:"m-count-content font-black text-left"},this.state.data&&this.state.data.callCount||0,r.a.createElement("span",{style:{fontSize:12}},"次")))),r.a.createElement(kt.a,{span:6},r.a.createElement("section",{className:"m-count-section margin-t20",style:{width:100}},r.a.createElement("span",{className:"m-count-title text-left"},"最近",this.getDateText(),"失败率"),r.a.createElement("span",{className:"m-count-content font-red text-left"},this.state.data&&this.state.data.failRate||0,r.a.createElement("span",{style:{fontSize:12}},"%")))),r.a.createElement(kt.a,{span:8},r.a.createElement("section",{className:"m-count-section margin-t20",style:{width:150}},r.a.createElement("span",{className:"m-count-title text-left"},"累计调用"),r.a.createElement("span",{className:"m-count-content font-black text-left"},this.state.data&&this.state.data.totalCount||"---")))),r.a.createElement("div",{style:{paddingRight:"20px"}},r.a.createElement(He.a,{onResize:this.resize},r.a.createElement("article",{id:"MyApiDetailState",style:{width:"100%",height:"250px"}}))))}}]),t}(s.Component),Ts=fs,ys=Ts,vs=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(fs,"ApiCallState","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/others/apiCallState.js"),__REACT_HOT_LOADER__.register(Ts,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/others/apiCallState.js")),{1:"禁用",2:"未认证",3:"参数错误",4:"超时",5:"超出限制",6:"其他"}),Cs=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={error:{},data:[],loading:!1,pageIndex:1,total:0,filter:{},recordInfoList:[]},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.showRecord,a=void 0===t?{}:t,n=e.dateType,i=a.apiId;this.getErrorInfo(i,n)}},{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.showRecord,n=void 0===a?{}:a,i=e.dateType,s=this.props,r=s.showRecord,o=void 0===r?{}:r,l=s.dateType,c=o.apiId,p=n.apiId;c===p&&l===i||this.setState({apiId:e.showRecord.apiId,pageIndex:1},function(){e.slidePaneShow&&t.getErrorInfo(p,i)})}},{key:"getErrorInfo",value:function(e,t){var a=this;e&&(this.props.getApiCallErrorInfo(e,t).then(function(e){if(e){for(var t={},n=0;n<e.data.recordInfoList.length;n++){var i=e.data.recordInfoList[n],s=vs[i.type];s&&(t[s]={percent:i.rate,count:i.callNum})}a.setState({error:t,recordInfoList:e.data.recordInfoList})}}),this.props.queryApiCallLog(e,this.state.pageIndex,this.state.filter.bizType&&this.state.filter.bizType[0],t).then(function(e){e&&a.setState({data:e.data.data,total:e.data.totalCount})}))}},{key:"initColumns",value:function(){var e=this;return[{title:"调用时间",dataIndex:"invokeTime",key:"invokeTime",render:function(e){return N.a.formatDateTime(e)}},{title:"错误类型",dataIndex:"bizType",key:"bizType",render:function(e){return vs[e]},filters:[{text:"参数错误",value:"3"},{text:"禁用",value:"1"},{text:"未认证",value:"2"},{text:"超时",value:"4"},{text:"超出限制",value:"5"},{text:"其他",value:"6"}],filterMultiple:!1},{title:"错误日志",dataIndex:"content",key:"content",width:"50%"},{title:"操作",dataIndex:"",key:"deal",render:function(t,a){return r.a.createElement("a",{onClick:e.lookAllErrorText.bind(e,a.content)},"查看全部")}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:5,total:this.state.total}}},{key:"getSource",value:function(){return this.state.data}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,filter:t},function(){var e=n.props,t=e.showRecord,a=void 0===t?{}:t,i=e.dateType,s=a.apiId;n.getErrorInfo(s,i)})}},{key:"lookAllErrorText",value:function(e){ca.a.info({title:"错误日志",content:r.a.createElement("div",null,r.a.createElement("p",null,e)),onOk:function(){}})}},{key:"getErrorPercent",value:function(e){return this.state.error[e]&&this.state.error[e].percent||0}},{key:"getErrorCount",value:function(e){return this.state.error[e]&&this.state.error[e].count||0}},{key:"render",value:function(){var e=this.state,t=e.recordInfoList,a=e.loading;return r.a.createElement("div",{style:{padding:"10px 30px"}},r.a.createElement(yt.a,null,r.a.createElement(kt.a,{span:16,style:{paddingRight:"20px"}},r.a.createElement("p",{style:{lineHeight:"30px",paddingLeft:"20px"},className:"child-span-padding-r20"},r.a.createElement("span",null,"参数错误: ",this.getErrorPercent("参数错误"),"% (",this.getErrorCount("参数错误"),"次)"),r.a.createElement("span",null,"禁用: ",this.getErrorPercent("禁用"),"% (",this.getErrorCount("禁用"),"次)"),r.a.createElement("span",null,"未认证: ",this.getErrorPercent("未认证"),"% (",this.getErrorCount("未认证"),"次)"),r.a.createElement("span",null,"超时: ",this.getErrorPercent("超时"),"% (",this.getErrorCount("超时"),"次)"),r.a.createElement("span",null,"超出限制: ",this.getErrorPercent("超出限制"),"% (",this.getErrorCount("超出限制"),"次)"),r.a.createElement("span",null,"其他: ",this.getErrorPercent("其他"),"% (",this.getErrorCount("其他"),"次)")),r.a.createElement(Ge.a,{rowKey:"id",className:"m-table monitor-table",columns:this.initColumns(),loading:a,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange,scroll:{y:180}})),r.a.createElement(kt.a,{span:8},r.a.createElement(li,{chartData:t,mode:"mini"}))))}}]),t}(s.Component),bs=Cs,ks=bs,Ds=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(vs,"errorType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/others/errorLog.js"),__REACT_HOT_LOADER__.register(Cs,"errorLog","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/others/errorLog.js"),__REACT_HOT_LOADER__.register(bs,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/others/errorLog.js")),wt.a.Button),xs=wt.a.Group,Rs=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={approvedText:"同意",applyText:"申请调用此接口，请批准",nowView:"callMethod",date:"1"},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"callback",value:function(e){this.setState({nowView:e})}},{key:"chooseCallStateDate",value:function(e){this.setState({date:e.target.value})}},{key:"getDateTypeView",value:function(){switch(this.state.nowView){case"callState":return r.a.createElement("div",{className:"m-radio-group",key:"date",style:{marginTop:4,marginRight:28}},r.a.createElement(xs,{name:"date",defaultValue:this.state.date,className:"no-bd nobackground",onChange:this.chooseCallStateDate.bind(this)},r.a.createElement(Ds,{value:"1"},"最近24小时"),r.a.createElement(Ds,{value:"7"},"最近7天"),r.a.createElement(Ds,{value:"30"},"最近30天")));default:return null}}},{key:"render",value:function(){return r.a.createElement(mn.a,{className:"m-tabs tabs-filter-show",visible:this.props.slidePaneShow,style:{right:"-20px",width:"80%",minHeight:"750px",height:"100%"},onClose:this.props.closeSlidePane},r.a.createElement(Ct.a,{animated:!1,activeKey:this.state.nowView,onChange:this.callback.bind(this),tabBarExtraContent:this.getDateTypeView()},r.a.createElement(Ct.a.TabPane,{tab:"API详情",key:"callMethod"},r.a.createElement(Dn,H()({},this.props,{showUserInfo:!0}))),r.a.createElement(Ct.a.TabPane,{tab:"调用情况",key:"callState"},r.a.createElement("h1",{className:"title-border-l-blue slide-title"},"调用统计"),r.a.createElement(ys,H()({},this.props,{dateType:this.state.date})),r.a.createElement("h1",{className:"title-border-l-blue slide-title"},"错误日志"),r.a.createElement(ks,H()({},this.props,{dateType:this.state.date})))))}}]),t}(s.Component),ws=Rs,Os=ws,Ss=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ds,"RadioButton","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/detailSlidePane.js"),__REACT_HOT_LOADER__.register(xs,"RadioGroup","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/detailSlidePane.js"),__REACT_HOT_LOADER__.register(Rs,"detailSlidePane","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/detailSlidePane.js"),__REACT_HOT_LOADER__.register(ws,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/detailSlidePane.js")),ca.a.confirm),Ls=_a.a.Search,Is={0:"inhand",1:"success",2:"notPass",3:"stop",4:"disabled",5:"expired"},Ns={applyTime:"gmt_create"},Ps={ascend:"asc",descend:"desc"},Hs=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={pageIndex:1,slidePaneShowNoApproved:!1,slidePaneShowDisabled:!1,slidePaneShowSuccess:!1,loading:!1,sortedInfo:{},filterInfo:{},showRecord:{},apiName:N.a.getParameterByName("apiName"),applyBox:!1,applyRecord:{}},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"getAppliedList",value:function(){var e=this;return this.setState({loading:!0}),this.props.getAppliedList(this.state.pageIndex,Ns[this.state.sortedInfo.columnKey],Ps[this.state.sortedInfo.order],this.state.filterInfo.status,this.state.apiName).then(function(t){return e.setState({loading:!1}),t})}},{key:"componentDidMount",value:function(){var e=this;this.getAppliedList().then(function(t){if(e.props.apiId&&t)for(var a in t.data.data){var n=t.data.data[a];if(e.props.apiId==n.apiId){e.apiClick(n);break}}})}},{key:"componentWillReceiveProps",value:function(e){if(this.props.nowView!=e.nowView&&"approved"==e.nowView&&this.getAppliedList(),this.props.apiId!=e.apiId&&e.apiId){var t=this.getSource();if(t)for(var a in t.data){var n=t.data[a];if(e.apiId==n.apiId){this.dealClick(n);break}}}}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,sortedInfo:a,filterInfo:t},function(){n.getAppliedList()})}},{key:"closeSlidePane",value:function(){this.setState({slidePaneShowNoApproved:!1,slidePaneShowDisabled:!1,slidePaneShowSuccess:!1,showRecord:{}})}},{key:"apiClick",value:function(e){var t=this["state"+Is[e.status]];t&&t.call(this,e)}},{key:"statesuccess",value:function(e){this.setState({slidePaneShowSuccess:!0,slidePaneShowNoApproved:!1,slidePaneShowDisabled:!1,showRecord:e||{}})}},{key:"statenotPass",value:function(e){this.setState({slidePaneShowSuccess:!1,slidePaneShowNoApproved:!0,slidePaneShowDisabled:!1,showRecord:e||{}})}},{key:"statestop",value:function(e){this.setState({slidePaneShowSuccess:!0,slidePaneShowNoApproved:!1,slidePaneShowDisabled:!1,showRecord:e||{}})}},{key:"statedisabled",value:function(e){this.setState({slidePaneShowSuccess:!1,slidePaneShowNoApproved:!1,slidePaneShowDisabled:!0,showRecord:e||{}})}},{key:"stateexpired",value:function(e){this.setState({slidePaneShowSuccess:!0,slidePaneShowNoApproved:!1,slidePaneShowDisabled:!1,showRecord:e||{}})}},{key:"dealClick",value:function(e){var t=this["deal"+Is[e.status]];t&&t.call(this,e)}},{key:"dealsuccess",value:function(e){var t=this;Ss({title:"确认停止",content:"确认停止接口？",onOk:function(){t.props.updateApplyStatus(e.id,3).then(function(e){e&&$.a.success("停止成功"),t.getAppliedList()})},onCancel:function(){}})}},{key:"dealstop",value:function(e){var t=this;Ss({title:"确认开启",content:"确认开启接口？",onOk:function(){t.props.updateApplyStatus(e.id,1).then(function(e){e&&$.a.success("开启成功"),t.getAppliedList()})},onCancel:function(){}})}},{key:"dealnotPass",value:function(e){this.setState({applyBox:!0,applyRecord:e})}},{key:"dealdisabled",value:function(e){this.apiClick(e)}},{key:"dealexpired",value:function(e){this.setState({applyBox:!0,applyRecord:e})}},{key:"deleteApi",value:function(e){}},{key:"initColumns",value:function(){var e=this;return[{title:"API名称",dataIndex:"apiName",key:"apiName",render:function(t,a){var n=1==a.apiDeleted,i=1==a.apiStatus;return n?r.a.createElement("a",{className:"disable-all",onClick:e.apiClick.bind(e,a)},t+"(已删除)"):i?r.a.createElement("a",{className:"disable-all",onClick:e.apiClick.bind(e,a)},t+"(全平台禁用)"):r.a.createElement("a",{onClick:e.apiClick.bind(e,a)},t)}},{title:"授权状态",dataIndex:"status",key:"status",render:function(e){return r.a.createElement("span",{className:"state-"+Is[e]},{success:"已通过",disabled:"取消授权",stop:"停用",notPass:"已拒绝",expired:"已过期"}[Is[e]])},filters:[{text:"已通过",value:"1"},{text:"已拒绝",value:"2"},{text:"停用",value:"3"},{text:"取消授权",value:"4"},{text:"已过期",value:"5"}]},{title:"最近24小时调用(次)",dataIndex:"recentCallNum",key:"recentCallNum"},{title:"最近24小时失败率",dataIndex:"recentFailRate",key:"recentFailRate",render:function(e){return e+"%"}},{title:"累计调用",dataIndex:"totalCallNum",key:"totalCallNum"},{title:"订购时间",dataIndex:"applyTime",key:"applyTime",sorter:!0,render:function(e){return N.a.formatDateTime(e)}},{title:"操作",dataIndex:"deal",key:"deal",render:function(t,a){var n=1==a.apiDeleted,i=Rn()({success:"停用",disabled:"",stop:"启用",notPass:"再次申请",expired:"再次申请"},"disabled","申请恢复");if(n)return null;a.status==$e.PASS||r.a.createElement("span",null,r.a.createElement("span",{className:"ant-divider"})," ",r.a.createElement("a",{onClick:e.deleteApi.bind(e,a)},"删除"));return i[Is[a.status]]?r.a.createElement("span",null,r.a.createElement("a",{onClick:e.dealClick.bind(e,a)},i[Is[a.status]])):null}}]}},{key:"getSource",value:function(){return this.props.mine.apiList.appliedList.data||[]}},{key:"getTotal",value:function(){return this.props.mine.apiList.appliedList&&this.props.mine.apiList.appliedList.totalCount||0}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:this.getTotal()}}},{key:"handleApiSearch",value:function(e){var t=this;this.setState({apiName:e,pageIndex:1},function(){t.getAppliedList()})}},{key:"handleOk",value:function(){this.setState({applyBox:!1}),this.getAppliedList()}},{key:"handleCancel",value:function(){this.setState({applyBox:!1})}},{key:"render",value:function(){var e=this,t=this.state,a=t.applyBox,n=t.applyRecord,i=t.apiName;return r.a.createElement("div",null,r.a.createElement(Vi,{show:a,successCallBack:this.handleOk.bind(this),cancelCallback:this.handleCancel.bind(this),apiId:n.apiId,apiName:n.apiName,desc:n.apiDesc,hideJump:!0}),r.a.createElement("div",{style:{marginRight:"-20px",position:"relative"}},r.a.createElement(es,H()({},this.props,{isApproved:!0,showRecord:this.state.showRecord,slidePaneShow:this.state.slidePaneShowNoApproved,closeSlidePane:this.closeSlidePane.bind(this)})),r.a.createElement(us,H()({},this.props,{showRecord:this.state.showRecord,slidePaneShow:this.state.slidePaneShowDisabled,closeSlidePane:this.closeSlidePane.bind(this)})),r.a.createElement(Os,H()({style:{right:"0px"}},this.props,{showRecord:this.state.showRecord,slidePaneShow:this.state.slidePaneShowSuccess,closeSlidePane:this.closeSlidePane.bind(this)}))),r.a.createElement(je.a,{noHovering:!0},r.a.createElement("div",{className:"flex font-12"},r.a.createElement(Ls,{placeholder:"输入API名称搜索",style:{width:150,margin:"10px 0px",marginLeft:"20px"},onSearch:this.handleApiSearch.bind(this),defaultValue:i})),r.a.createElement(Ge.a,{rowClassName:function(t,a){return e.state.showRecord.apiId==t.apiId?"row-select":""},rowKey:"apiId",className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange})))}}]),t}(s.Component),Us=Hs,js=Us,Ms=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ss,"confirm","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(Ls,"Search","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(Is,"exchangeDic","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(Ns,"sortType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(Ps,"orderType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(Hs,"ApprovedCard","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(Us,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/approvedCard.js")),function(e){var t=e.user;return{mine:e.mine,user:t}}),Gs=function(e){return{getApplyingList:function(t,a,n,i){return e(ya.getApplyingList({currentPage:t,pageSize:20,orderBy:a,sort:n,apiName:i}))},getAppliedList:function(t,a,n,i,s){return e(ya.getAppliedList({currentPage:t,pageSize:20,orderBy:a,sort:n,status:i,apiName:s}))},updateApplyStatus:function(t,a){return e(ya.updateApplyStatus({applyId:t,status:a}))},getApiCallInfo:function(t,a){return e(ya.getApiCallInfo({apiId:t,time:a}))},getApiCallErrorInfo:function(t,a){return e(ya.getApiCallErrorInfo({apiId:t,time:a}))},getApiCallUrl:function(t){return e(ya.getApiCallUrl({apiId:t}))},queryApiCallLog:function(t,a,n,i){return e(ya.queryApiCallLog({apiId:t,currentPage:a,bizType:n,pageSize:5,time:i}))},getApiCreatorInfo:function(t){return e(ya.getApiCreatorInfo({apiId:t}))}}},Fs=Object(v.b)(Ms,Gs)(_s=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={nowView:"approved",pageIndex:1},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"handleClick",value:function(e){this.setState({nowView:e}),"approved"==e?this.props.router.replace("/api/mine/approved"):this.props.router.replace("/api/mine/notApproved")}},{key:"componentWillMount",value:function(){var e=this.props.router.params.view;e&&this.setState({nowView:e})}},{key:"getCardView",value:function(){return this.state.nowView&&"notApproved"==this.state.nowView?r.a.createElement(os,this.props):r.a.createElement(js,this.props)}},{key:"render",value:function(){var e=this.state.nowView;return r.a.createElement("div",{className:" api-mine nobackground m-card height-auto m-tabs"},r.a.createElement("h1",{className:"box-title"},"我的API"),r.a.createElement(je.a,{style:{marginTop:"0px"},className:"box-1",noHovering:!0},r.a.createElement(Ct.a,{style:{overflow:"unset"},animated:!1,defaultActiveKey:e,onChange:this.handleClick.bind(this)},r.a.createElement(Ct.a.TabPane,{tab:"已审批",key:"approved"},r.a.createElement(js,H()({nowView:e,apiId:this.props.location.query&&this.props.location.query.apiId},this.props))),r.a.createElement(Ct.a.TabPane,{tab:"审批中",key:"notApproved"},r.a.createElement(os,H()({nowView:e,apiId:this.props.location.query&&this.props.location.query.apiId},this.props))))))}}]),t}(s.Component))||_s,Vs=Fs,qs=Vs,Bs=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ms,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/index.js"),__REACT_HOT_LOADER__.register(Gs,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/index.js"),__REACT_HOT_LOADER__.register(Fs,"MyAPI","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/index.js"),__REACT_HOT_LOADER__.register(Vs,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/myApi/index.js")),void 0),zs=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={applyBox:!1,apply:{apiId:"",apiName:"",desc:""}},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"getTopRightButton",value:function(){var e=this.getValue("applyStatus");return 1==e||3==e?null:0==e?r.a.createElement(sa.a,{onClick:this.jumpToMine.bind(this),size:"large",type:"primary"},"查看审批情况"):r.a.createElement(sa.a,{onClick:this.doApply.bind(this),size:"large",type:"primary"},"立即订购")}},{key:"doApply",value:function(){this.setState({applyBox:!0,apply:{apiId:this.props.apiId,apiName:this.getApiValue("apiName"),desc:this.getApiValue("desc")}})}},{key:"back",value:function(){this.props.router.replace("/api/market")}},{key:"getValue",value:function(e){var t=this.props.apiMarket&&this.props.apiMarket.apiCallInfo&&this.props.apiMarket.apiCallInfo[this.props.apiId];return t?t[e]:null}},{key:"getApiValue",value:function(e){var t=this.props.apiMarket&&this.props.apiMarket.api&&this.props.apiMarket.api[this.props.apiId];return t?t[e]:null}},{key:"showApplySuccessModal",value:function(){Bs=ca.a.success({title:"申请提交成功",content:r.a.createElement("span",null,"您可以在 ",r.a.createElement("a",{onClick:this.jumpToMine.bind(this)},"我的API")," 中查看审批进度"),okText:"确定"})}},{key:"jumpToMine",value:function(){Bs&&Bs.destroy(),this.props.router.push("/api/mine")}},{key:"jumpToMineApproved",value:function(){this.props.router.push("/api/mine/approved?apiId="+this.props.apiId)}},{key:"handleOk",value:function(){this.setState({applyBox:!1}),this.showApplySuccessModal()}},{key:"handleCancel",value:function(){this.setState({applyBox:!1})}},{key:"render",value:function(){var e=this.props.router.location.query&&this.props.router.location.query.isHideBack?null:r.a.createElement(kt.a,{span:1},r.a.createElement(j.a,{type:"left-circle-o",onClick:this.back.bind(this),style:{fontSize:18,cursor:"pointer"}}));return r.a.createElement(je.a,{className:"box-1",noHovering:!0},r.a.createElement(ApplyBox,{show:this.state.applyBox,successCallBack:this.handleOk.bind(this),cancelCallback:this.handleCancel.bind(this),apiId:this.state.apply.apiId,apiName:this.state.apply.apiName,desc:this.state.apply.desc}),r.a.createElement(yt.a,{className:"m-count",style:{height:"auto"}},e,r.a.createElement(kt.a,{span:12},r.a.createElement(yt.a,{className:"header-title"},this.getApiValue("apiName")),r.a.createElement(yt.a,{className:"header-content"},this.getApiValue("desc"))),r.a.createElement(kt.a,{span:3},r.a.createElement("section",{className:"m-count-section ",style:{width:150,marginTop:0}},r.a.createElement("span",{className:"m-count-title text-left"},"订购人数"),r.a.createElement("span",{className:"m-count-content font-black text-left"},N.a.toQfw(this.getValue("applyNum")||0),r.a.createElement("span",{style:{fontSize:12}})))),r.a.createElement(kt.a,{span:5},r.a.createElement("section",{className:"m-count-section",style:{width:200,marginTop:0}},r.a.createElement("span",{className:"m-count-title text-left"},"累计调用"),r.a.createElement("span",{className:"m-count-content font-black text-left"},N.a.toQfw(this.getValue("apiCallNum")||0),r.a.createElement("span",{style:{fontSize:12}})))),r.a.createElement(kt.a,{span:3},this.getTopRightButton())))}}]),t}(s.Component),Ks=zs,Ys=Ks,Ws=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Bs,"modal","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/market/detail/topCard.js"),__REACT_HOT_LOADER__.register(zs,"TopCard","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/market/detail/topCard.js"),__REACT_HOT_LOADER__.register(Ks,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/market/detail/topCard.js")),function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t}}),Js=function(e){return{getApiDetail:function(t){e(yn.getApiDetail({apiId:t}))},getApiExtInfo:function(t){e(yn.getApiExtInfo({apiId:t}))}}},Qs=Object(v.b)(Ws,Js)(ms=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={apiId:""},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.router.params&&this.props.router.params.api;t&&this.setState({apiId:t},function(){e.props.getApiDetail(t),e.props.getApiExtInfo(t)})}},{key:"getRequestDataSource",value:function(){return this.getValue("reqParam")||[]}},{key:"getRequestColumns",value:function(){return[{title:"参数名",dataIndex:"paramName",key:"paramName"},{title:"数据类型",dataIndex:"paramType",key:"paramType"},{title:"是否必填",dataIndex:"required",key:"required",render:function(e){return e?"是":"否"}},{title:"说明",dataIndex:"desc",key:"desc"}]}},{key:"getResponseDataSource",value:function(){return this.getValue("respParam")||[]}},{key:"getResponseColumns",value:function(){return[{title:"参数名",dataIndex:"paramName",key:"paramName"},{title:"数据类型",dataIndex:"paramType",key:"paramType"},{title:"是否必填",dataIndex:"required",key:"required",render:function(e){return e?"是":"否"}},{title:"说明",dataIndex:"desc",key:"desc"}]}},{key:"render",value:function(){var e=this.props.apiMarket,t=this.state.apiId;return r.a.createElement("div",null,r.a.createElement(Ys,H()({},this.state,this.props)),r.a.createElement(je.a,{className:"box-1",noHovering:!0},r.a.createElement(An,{apiMarket:e,apiId:t}),">"))}}]),t}(s.Component))||ms,Xs=Qs,$s=Xs,Zs=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ws,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/market/detail/index.js"),__REACT_HOT_LOADER__.register(Js,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/market/detail/index.js"),__REACT_HOT_LOADER__.register(Qs,"APIDetail","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/market/detail/index.js"),__REACT_HOT_LOADER__.register(Xs,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/market/detail/index.js")),function(e){function t(){return m()(this,t),E()(this,(t.__proto__||d()(t)).apply(this,arguments))}return T()(t,e),g()(t,[{key:"getTopRightButton",value:function(){var e=nt[this.getValue("status")];return e?"stop"==e?r.a.createElement("div",null,r.a.createElement(sa.a,{onClick:this.props.openApi,style:{marginRight:"5px"}},"开启"),r.a.createElement(sa.a,{onClick:this.editApi.bind(this,this.props.apiId),style:{marginRight:"5px"},type:"primary"},"编辑"),r.a.createElement(sa.a,{onClick:this.props.deleteApi,type:"danger"},"删除")):r.a.createElement(sa.a,{onClick:this.props.closeApi,size:"large",type:"danger"},"禁用"):null}},{key:"editApi",value:function(e){this.props.router.push("/api/manage/editApi/"+e)}},{key:"back",value:function(){this.props.router.goBack()}},{key:"openApiDetail",value:function(){window.open(location.origin+location.pathname+"#/api/market/detail/"+this.props.apiId+"?isHideBack=true")}},{key:"getValue",value:function(e){var t=this.props.apiMarket&&this.props.apiMarket.apiCallInfo&&this.props.apiMarket.apiCallInfo[this.props.apiId];return t?t[e]:null}},{key:"render",value:function(){return r.a.createElement(je.a,{className:"box-1",noHovering:!0},r.a.createElement(yt.a,{className:"m-count",style:{height:"auto"}},r.a.createElement(kt.a,{span:1},r.a.createElement(j.a,{type:"left-circle-o",onClick:this.back.bind(this),style:{fontSize:18,cursor:"pointer"}})),r.a.createElement(kt.a,{span:10},r.a.createElement(yt.a,{className:"header-title"},this.getValue("apiName")),r.a.createElement(yt.a,{className:"header-content"},this.getValue("apiDesc")),r.a.createElement(yt.a,{className:"header-content"},r.a.createElement("a",{onClick:this.openApiDetail.bind(this)},"查看详情"))),r.a.createElement(kt.a,{span:3},r.a.createElement("section",{className:"m-count-section ",style:{width:150,marginTop:0}},r.a.createElement("span",{className:"m-count-title text-left"},"订购人数"),r.a.createElement("span",{className:"m-count-content font-black text-left"},N.a.toQfw(this.getValue("applyNum")||0),r.a.createElement("span",{style:{fontSize:12}})))),r.a.createElement(kt.a,{span:5},r.a.createElement("section",{className:"m-count-section",style:{width:200,marginTop:0}},r.a.createElement("span",{className:"m-count-title text-left"},"累计调用"),r.a.createElement("span",{className:"m-count-content font-black text-left"},N.a.toQfw(this.getValue("apiCallNum")||0),r.a.createElement("span",{style:{fontSize:12}})))),r.a.createElement(kt.a,{span:5},this.getTopRightButton())))}}]),t}(s.Component)),er=Zs,tr=er,ar=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Zs,"ManageTopCard","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/topCard.js"),__REACT_HOT_LOADER__.register(er,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/topCard.js")),ca.a.confirm),nr=wt.a.Button,ir=wt.a.Group,sr=function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t}},rr=function(e){return{getApiDetail:function(t){e(yn.getApiDetail({apiId:t}))},getApiExtInfo:function(t){e(yn.getApiExtInfo({apiId:t,useAdmin:!0}))},deleteApi:function(t){return e(jn.deleteApi({apiIds:[t]}))},openApi:function(t){return e(jn.openApi(t))},closeApi:function(t){return e(jn.closeApi(t))}}},or=Object(v.b)(sr,rr)(hs=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={apiId:"",nowView:"callState",callStateDate:"1",errorLogDate:"7"},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"deleteApi",value:function(){var e=this,t=this.state.apiId;ar({title:"确认删除?",content:"确认删除api",onOk:function(){e.props.deleteApi(t).then(function(t){t&&($.a.success("删除成功"),e.getApiExtInfo())})},onCancel:function(){}})}},{key:"openApi",value:function(){var e=this,t=this.state.apiId;ar({title:"确认开启?",content:"确认开启api",onOk:function(){e.props.openApi(t).then(function(t){$.a.success("开启成功"),t&&e.getApiExtInfo()})},onCancel:function(){}})}},{key:"closeApi",value:function(){var e=this,t=this.state.apiId;ar({title:"确认禁用?",content:"确认禁用api",onOk:function(){e.props.closeApi(t).then(function(t){$.a.success("禁用成功"),t&&e.getApiExtInfo()})},onCancel:function(){}})}},{key:"getApiExtInfo",value:function(){this.props.getApiExtInfo(this.state.apiId)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.router.params&&this.props.router.params.api;t&&this.setState({apiId:t},function(){e.getApiExtInfo()})}},{key:"callback",value:function(e){this.setState({nowView:e})}},{key:"chooseCallStateDate",value:function(e){this.setState({callStateDate:e.target.value})}},{key:"chooseErrorLogDate",value:function(e){this.setState({errorLogDate:e.target.value})}},{key:"getValue",value:function(e){var t=this.props.apiMarket&&this.props.apiMarket.apiCallInfo&&this.props.apiMarket.apiCallInfo[this.state.apiId];return t?t[e]:null}},{key:"getDateTypeView",value:function(){switch(this.state.nowView){case"callState":return r.a.createElement("div",{className:"m-radio-group",key:"callStateDate",style:{marginTop:"4px",marginRight:"8px"}},r.a.createElement(ir,{name:"callStateDate",defaultValue:this.state.callStateDate,className:"no-bd nobackground",onChange:this.chooseCallStateDate.bind(this)},r.a.createElement(nr,{value:"1"},"最近24小时"),r.a.createElement(nr,{value:"7"},"最近7天"),r.a.createElement(nr,{value:"30"},"最近30天"),r.a.createElement(nr,{value:"-1"},"历史以来")));case"errorLog":return r.a.createElement("div",{className:"m-radio-group",key:"errorLogDate",style:{marginTop:"4px",marginRight:"8px"}},r.a.createElement(ir,{name:"errorLogDate",defaultValue:this.state.errorLogDate,className:"no-bd nobackground",onChange:this.chooseErrorLogDate.bind(this)},r.a.createElement(nr,{value:"7"},"最近7天")));default:return null}}},{key:"render",value:function(){var e=nt[this.getValue("status")],t=void 0;return"stop"==e&&(t=!0),r.a.createElement("div",null,r.a.createElement(tr,H()({},this.state,this.props,{deleteApi:this.deleteApi.bind(this),openApi:this.openApi.bind(this),closeApi:this.closeApi.bind(this)})),r.a.createElement("div",{className:"tabs-box m-tabs noheight tabs-filter-show"},r.a.createElement(Ct.a,{defaultActiveKey:this.state.nowView,onChange:this.callback.bind(this),tabBarExtraContent:this.getDateTypeView()},r.a.createElement(Ct.a.TabPane,{tab:"调用情况",key:"callState"},r.a.createElement(Zn,{dateType:this.state.callStateDate,apiId:this.state.apiId})),r.a.createElement(Ct.a.TabPane,{tab:"错误日志",key:"errorLog"},r.a.createElement(hi,{dateType:this.state.errorLogDate,apiId:this.state.apiId})),r.a.createElement(Ct.a.TabPane,{tab:"订购情况",key:"buyState"},r.a.createElement(Bn,{statusDisAble:t,apiId:this.state.apiId})))))}}]),t}(s.Component))||hs,lr=or,cr=lr,pr=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ar,"confirm","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(nr,"RadioButton","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(ir,"RadioGroup","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(sr,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(rr,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(or,"APIManageDetail","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(lr,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiDetail/index.js")),a(121),a(83)),ur=a.n(pr),dr=(a(189),a(90)),_r=a.n(dr),mr=_r.a.TreeNode,hr=function(e){function t(e){m()(this,t);var a=E()(this,(t.__proto__||d()(t)).call(this,e));return a.state={maxDeepLength:2,expandedKeys:[],editNode:null,mode:"",addPid:"",autoExpandParent:!0},a.onSelect=function(){return a.__onSelect__REACT_HOT_LOADER__.apply(a,arguments)},a.onCheck=function(){return a.__onCheck__REACT_HOT_LOADER__.apply(a,arguments)},a.checkVal=function(){return a.__checkVal__REACT_HOT_LOADER__.apply(a,arguments)},a.onExpands=function(){return a.__onExpands__REACT_HOT_LOADER__.apply(a,arguments)},a.editInput=null,a}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.props.maxDeepLength&&(this.state.maxDeepLength=this.props.maxDeepLength)}},{key:"componentWillReceiveProps",value:function(e){e.maxDeepLength&&this.props.maxDeepLength!=e.maxDeepLength&&this.setState({maxDeepLength:e.maxDeepLength})}},{key:"getTreeView",value:function(){var e=this.props.tree,t=[];return e?{view:function e(a,n){for(var i=[],s=0;s<a.length;s++){var o=a[s],l=!(o.childCatalogue.length>0);o.api?i.push(r.a.createElement(mr,{title:o.catalogueName,key:o.id})):(t.push(o.id.toString()),i.push(r.a.createElement(mr,{title:this.getTreeNodeTitle.call(this,o.id,o.catalogueName,!1,l,n,o.isTmp),key:o.id},e.call(this,o.childCatalogue,n+1))))}return i}.call(this,e,1),expandedKeys:t}:null}},{key:"__onSelect__REACT_HOT_LOADER__",value:function(e,t){}},{key:"__onCheck__REACT_HOT_LOADER__",value:function(e,t){}},{key:"deleteNode",value:function(e){this.props.deleteCatalogue(e)}},{key:"__checkVal__REACT_HOT_LOADER__",value:function(e){var t=/^([\w|\u4e00-\u9fa5]{1,20})$/.test(e);return t||$.a.error("类目名称不能超过20个字符，只能以字母、数字、下划线和汉字组成！"),t}},{key:"getTreeNodeTitle",value:function(e,t,a,n,i,s){var o=this.state.maxDeepLength,l=void 0;return l=s&&this.state.editNode!=e?r.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},r.a.createElement(Ba.a,{title:"加载中"},r.a.createElement(ur.a,{size:"small"}))):a?r.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},r.a.createElement(Ba.a,{title:"添加新分类"},r.a.createElement(j.a,{type:"plus-square-o",onClick:this.addNode.bind(this,e)}))):n?i>=o?r.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},r.a.createElement(Ba.a,{title:"编辑"},r.a.createElement(j.a,{type:"edit",onClick:this.editNode.bind(this,e)})),r.a.createElement(Ba.a,{title:"删除"},r.a.createElement(ja.a,{title:"您确定删除该分类吗",onConfirm:this.deleteNode.bind(this,e),okText:"确定",cancelText:"取消"},r.a.createElement(j.a,{type:"minus-square-o"})))):r.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},r.a.createElement(Ba.a,{title:"添加新分类"},r.a.createElement(j.a,{type:"plus-square-o",onClick:this.addNode.bind(this,e)})),r.a.createElement(Ba.a,{title:"编辑"},r.a.createElement(j.a,{type:"edit",onClick:this.editNode.bind(this,e)})),r.a.createElement(Ba.a,{title:"删除"},r.a.createElement(ja.a,{title:"您确定删除该分类吗",onConfirm:this.deleteNode.bind(this,e),okText:"确定",cancelText:"取消"},r.a.createElement(j.a,{type:"minus-square-o"})))):i<o?r.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},r.a.createElement(Ba.a,{title:"添加新分类"},r.a.createElement(j.a,{type:"plus-square-o",onClick:this.addNode.bind(this,e)})),r.a.createElement(Ba.a,{title:"编辑"},r.a.createElement(j.a,{type:"edit",onClick:this.editNode.bind(this,e)}))):r.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},r.a.createElement(Ba.a,{title:"编辑"},r.a.createElement(j.a,{type:"edit",onClick:this.editNode.bind(this,e)}))),r.a.createElement("span",{className:"tree-hover-show"},this.state.editNode==e?r.a.createElement("input",{ref:this.setRange.bind(this),autoFocus:!0,defaultValue:t,onBlur:this.editOver.bind(this,e,t)}):t,l)}},{key:"setRange",value:function(e){if(e){var t=e.value.length;e.setSelectionRange(t,t),this.editInput=e}}},{key:"editOver",value:function(e,t,a){var n=this,i=this.editInput.value;if(!this.checkVal(i))return this.props.getCatalogue(0),void this.setState({editNode:null});this.setState({editNode:null},function(){"add"!=n.state.mode?t!=i&&n.props.updateCatalogue(e,i):n.props.addCatalogue(n.state.addPid,i)})}},{key:"editNode",value:function(e){this.setState({editNode:e,mode:"edit"})}},{key:"addNode",value:function(e){var t=Object(Pe.cloneDeep)(this.props.tree),a=Math.random(),n=this.state.expandedKeys;!function e(t,n){if(0!=n)for(var i=0;i<t.length;i++){var s=t[i];if(s.id==n)return void s.childCatalogue.push({id:a,catalogueName:"新建分类名"+s.childCatalogue.length,childCatalogue:[],isTmp:!0});e(s.childCatalogue,n)}else t.push({id:a,catalogueName:"新建分类名",childCatalogue:[],isTmp:!0})}(t,e),n&&-1==n.indexOf(e)&&this.onExpands(n.concat(e+"")),this.setState({editNode:a,mode:"add",addPid:e}),this.props.addCatalogueEdit(t)}},{key:"__onExpands__REACT_HOT_LOADER__",value:function(e,t){this.setState({expandedKeys:e,autoExpandParent:!1})}},{key:"render",value:function(){var e=this.getTreeView(),t=e.view,a=e.expandedKeys,n=this.state.expandedKeys.length>0?this.state.expandedKeys:a;return r.a.createElement(_r.a,{showIcon:!0,expandedKeys:n,onSelect:this.onSelect,onCheck:this.onCheck,onExpand:this.onExpands,autoExpandParent:this.state.autoExpandParent},r.a.createElement(mr,{title:this.getTreeNodeTitle.call(this,0,"API管理",!0,!1,0),key:0},t))}}]),t}(s.Component),gr=hr,Ar=gr,Er=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(mr,"TreeNode","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiTypeTree.js"),__REACT_HOT_LOADER__.register(hr,"ApiTypeTree","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiTypeTree.js"),__REACT_HOT_LOADER__.register(gr,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiTypeTree.js")),a(72)),fr=function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t}},Tr=function(e){return{getCatalogue:function(t){e(yn.getCatalogue(t))},deleteCatalogue:function(t){return e(jn.deleteCatalogue({id:t}))},updateCatalogue:function(t,a){return e(jn.updateCatalogue({id:t,nodeName:a}))},addCatalogue:function(t,a){return e(jn.addCatalogue({pid:t,nodeName:a}))},addCatalogueEdit:function(t){e({type:En.a.GET_CATALOGUE,payload:t})}}},yr=Object(v.b)(fr,Tr)(gs=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.onSelect=function(){var e;return(e=n).__onSelect__REACT_HOT_LOADER__.apply(e,arguments)},n.onCheck=function(){var e;return(e=n).__onCheck__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"__onSelect__REACT_HOT_LOADER__",value:function(e,t){}},{key:"__onCheck__REACT_HOT_LOADER__",value:function(e,t){}},{key:"componentDidMount",value:function(){this.props.getCatalogue(0)}},{key:"deleteCatalogue",value:function(e){var t=this;this.props.deleteCatalogue(e).then(function(e){e&&$.a.success("删除成功"),t.props.getCatalogue(0)})}},{key:"addCatalogue",value:function(e,t){var a=this;this.props.addCatalogue(e,t).then(function(e){e&&$.a.success("新增成功"),a.props.getCatalogue(0)})}},{key:"updateCatalogue",value:function(e,t){var a=this;this.props.updateCatalogue(e,t).then(function(e){e&&$.a.success("更改成功"),a.props.getCatalogue(0)})}},{key:"render",value:function(){return r.a.createElement("div",{className:"m-card"},r.a.createElement("h1",{className:"box-title"}," ",r.a.createElement(Er.a,{url:"/api/manage"})," 类目管理"),r.a.createElement(je.a,{className:"box-2 g-datamanage",noHovering:!0},r.a.createElement(Ar,{getCatalogue:this.props.getCatalogue,addCatalogue:this.addCatalogue.bind(this),addCatalogueEdit:this.props.addCatalogueEdit,updateCatalogue:this.updateCatalogue.bind(this),deleteCatalogue:this.deleteCatalogue.bind(this),tree:this.props.apiMarket.apiCatalogue})))}}]),t}(s.Component))||gs,vr=yr,Cr=vr,br=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(fr,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiType.js"),__REACT_HOT_LOADER__.register(Tr,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiType.js"),__REACT_HOT_LOADER__.register(yr,"ApiType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiType.js"),__REACT_HOT_LOADER__.register(vr,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/apiType.js")),a(132)),kr=a.n(br),Dr=a(133),xr=a.n(Dr),Rr=a(96),wr=a.n(Rr),Or=(a(380),a(130)),Sr=a.n(Or),Lr=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={pageIndex:1,loading:!1},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,sortedInfo:a,loading:!0}),setTimeout(function(){n.setState({loading:!1})},1e3)}},{key:"initColumns",value:function(){var e=this.props.data.columnList;if(!e)return null;for(var t=[],a=0;a<e.length;a++)t.push({key:a,dataIndex:a,title:e[a],width:12*e[a].length+28+"px",render:function(e){return r.a.createElement("span",{title:e},N.a.textOverflowExchange(e,30))}});return t}},{key:"getSource",value:function(){var e=this.props.data.dataList;if(!e)return null;for(var t=[],a=0;a<e.length;a++){for(var n={},i=e[a],s=0;s<i.length;s++)n[s]=i[s];t.push(n)}return t}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:30}}},{key:"getScroll",value:function(){var e=100,t=this.props.data.columnList;for(var a in t){e=e+12*t[a].length+28}return e+"px"}},{key:"render",value:function(){var e;return r.a.createElement(Ge.a,(e={rowKey:function(e,t){return t},loading:this.props.loading,className:"m-table monitor-table",columns:this.initColumns()},Rn()(e,"loading",this.state.loading),Rn()(e,"pagination",!1),Rn()(e,"dataSource",this.getSource()),Rn()(e,"onChange",this.onTableChange),Rn()(e,"scroll",{x:this.getScroll(),y:400}),e))}}]),t}(s.Component),Ir=Lr,Nr=Ir,Pr=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Lr,"NewApiDataSourceTable","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/dataSourceTable.js"),__REACT_HOT_LOADER__.register(Ir,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/dataSourceTable.js")),a(226),a(117)),Hr=a.n(Pr),Ur=ua.a.Item,jr=Hr.a.TreeNode,Mr=function(e){function t(){return m()(this,t),E()(this,(t.__proto__||d()(t)).apply(this,arguments))}return T()(t,e),g()(t,[{key:"getGroupTree",value:function(e,t,a){var n={id:0,catalogueName:"API管理"};function i(e,t,a){if(e&&0!=e.length){for(var n=[],s=0;s<e.length;s++){var o=e[s],l=o.childCatalogue;o.api||n.push(r.a.createElement(jr,{disabled:t>a,value:o.id,title:o.catalogueName,key:o.id},i(l,t+1,a)))}return n.length>0?n:void 0}}return a=a||999999,t?(a+=1,n.childCatalogue=e,i([n],1,a)):i(e,1,a)}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props.treeData;return r.a.createElement(ua.a,null,r.a.createElement(Ur,H()({},st,{label:"父分组",required:!0}),e("parentNode",{})(r.a.createElement(Hr.a,{dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"请选择父分组",onChange:this.onChange},this.getGroupTree(t,!0,1)))),r.a.createElement(Ur,H()({},st,{label:"分组名称",required:!0}),e("groupName",{})(r.a.createElement(_a.a,null))))}}]),t}(r.a.Component),Gr=ua.a.create({onFieldsChange:function(e,t){e.onChange(t)},mapPropsToFields:function(e){var t=e.formData;return H()({},t)}})(Mr),Fr=function(e){return{apiCatalogue:e.apiMarket.apiCatalogue}},Vr=function(e){return{getCatalogue:function(t){return e(yn.getCatalogue(t))},addCatalogue:function(t,a){return e(jn.addCatalogue({pid:t,nodeName:a}))}}},qr=Object(v.b)(Fr,Vr)(As=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={formData:{groupName:{value:void 0},parentNode:{value:void 0}}},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentWillMount",value:function(){this.props.getCatalogue(0)}},{key:"reset",value:function(){this.setState({formData:{groupName:{value:void 0},parentNode:{value:void 0}}})}},{key:"componentWillReceiveProps",value:function(e){var t=e.visible;t!=this.props.visible&&t&&this.reset()}},{key:"formChange",value:function(e){this.setState({formData:H()({},this.state.formData,e)})}},{key:"addCatalogue",value:function(){var e=this.props,t=e.addCatalogue,a=e.cancel,n=e.getCatalogue,i=e.groupChange,s=this.state.formData,r=s.groupName;t(s.parentNode.value,r.value).then(function(e){if(e){var t=e.data.id;$.a.success("新建成功"),n(0).then(function(e){e&&i(t)}),a()}})}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.cancel,n=e.apiCatalogue,i=this.state.formData;return r.a.createElement(ca.a,{visible:t,title:"新建分组",onOk:this.addCatalogue.bind(this),onCancel:a,maskClosable:!1,okText:"新建"},r.a.createElement(Gr,{treeData:n,formData:i,onChange:this.formChange.bind(this)}))}}]),t}(r.a.Component))||As,Br=qr,zr=Br,Kr=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ur,"FormItem","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/newGroupModal/index.js"),__REACT_HOT_LOADER__.register(jr,"TreeNode","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/newGroupModal/index.js"),__REACT_HOT_LOADER__.register(Mr,"NewGroupForm","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/newGroupModal/index.js"),__REACT_HOT_LOADER__.register(Gr,"WrapNewGroupForm","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/newGroupModal/index.js"),__REACT_HOT_LOADER__.register(Fr,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/newGroupModal/index.js"),__REACT_HOT_LOADER__.register(Vr,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/newGroupModal/index.js"),__REACT_HOT_LOADER__.register(qr,"NewGroupModal","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/newGroupModal/index.js"),__REACT_HOT_LOADER__.register(Br,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/components/newGroupModal/index.js")),ua.a.Item),Yr=_a.a.TextArea,Wr=oa.a.Option,Jr=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={dataSource:[],tableList:[],tableDetailList:{}},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.props.getCatalogue(0),this.getDataSource()}},{key:"pass",value:function(){var e=this;this.props.form.validateFields(function(t,a){t||e.props.dataChange(H()({},a))})}},{key:"cancelAndSave",value:function(){var e=this.props.form.getFieldsValue;this.props.cancelAndSave(H()({},e()))}},{key:"dataSourceChange",value:function(e){var t=this;this.setState({showTable:!1}),this.props.form.setFieldsValue({table:""}),this.props.tablelist(e).then(function(e){e&&t.setState({tableList:e.data})})}},{key:"tableChange",value:function(){this.setState({showTable:!1})}},{key:"getTableListView",value:function(){return this.state.tableList.map(function(e,t){return r.a.createElement(Wr,{key:e},e)})}},{key:"onSourcePreview",value:function(){var e=this,t=this.props.form.getFieldValue("dataSource"),a=this.props.form.getFieldValue("table");t&&a?this.setState({showTable:!this.state.showTable},function(){e.state.showTable&&e.getTableDetail()}):$.a.error("请选择数据表！")}},{key:"getDataSourceOptionView",value:function(){return this.state.dataSource.map(function(e){return r.a.createElement(Wr,{key:e.id},e.name)})}},{key:"getDataSource",value:function(){var e=this;this.props.getDataSourceList(null).then(function(t){t&&e.setState({dataSource:t.data})})}},{key:"getTableDetail",value:function(){var e=this,t=this.props.form.getFieldValue("dataSource"),a=this.props.form.getFieldValue("table");this.setState({tableDetailList:[],tableLoading:!0}),this.props.previewData(t,a).then(function(t){t&&e.setState({tableDetailList:t.data,tableLoading:!1})})}},{key:"getTable",value:function(){return this.state.showTable?r.a.createElement(je.a,{className:"box-2",style:{marginTop:"10px"},noHovering:!0},r.a.createElement(Nr,{loading:this.state.tableLoading,data:this.state.tableDetailList})):null}},{key:"getCatagoryOption",value:function(){return function e(t){var a=[];if(!t||t.length<1)return null;for(var n=0;n<t.length;n++){var i=t[n];if(i.api)return null;a.push({value:i.id,label:i.catalogueName,children:e(i.childCatalogue)})}return a}(this.props.apiMarket.apiCatalogue)||[]}},{key:"showNewGroup",value:function(){this.setState({newGroupModalShow:!0})}},{key:"hideNewGroup",value:function(){this.setState({newGroupModalShow:!1})}},{key:"groupChange",value:function(e){var t=[];(function a(n){if(!n||n.length<1)return null;for(var i=0;i<n.length;i++){var s=n[i];if(s.id==e&&!s.api)return t.push(s.id),s.id;if(a(s.childCatalogue))return t.push(s.id),s.id}return null})(this.props.apiMarket.apiCatalogue)&&this.props.form.setFieldsValue({APIGroup:t.reverse()})}},{key:"renderMethod",value:function(){var e=[];for(var t in Je){var a=Je[t];e.push(r.a.createElement(Wr,{value:a},t))}return e}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.getCatagoryOption(),n=this.state.newGroupModalShow;return r.a.createElement("div",null,r.a.createElement("div",{className:"steps-content"},r.a.createElement(ua.a,{onSubmit:this.handleSubmit},r.a.createElement(Kr,H()({},st,{label:"所属分组"}),t("APIGroup",{rules:[{required:!0,message:"请选择分组"}],initialValue:this.props.APIGroup})(r.a.createElement(_n.a,{style:{width:"85%"},showSearch:!0,popupClassName:"noheight",options:a,placeholder:"请选择分组"})),r.a.createElement("a",{style:{paddingLeft:"8px"},onClick:this.showNewGroup.bind(this)},"新建分组")),r.a.createElement(Kr,H()({},st,{label:"API名称"}),t("APIName",{rules:[{required:!0,message:"请输入API名称"},{max:16,message:"最大字数不能超过16"},{pattern:new RegExp(/^([\w|\u4e00-\u9fa5]*)$/),message:"API名字只能以字母，数字，下划线组成"}],initialValue:this.props.APIName})(r.a.createElement(_a.a,{style:{width:"85%"}}))),r.a.createElement(Kr,H()({},st,{label:"API描述"}),t("APIdescription",{rules:[{required:!1,message:"请输入API描述"},{max:200,message:"最大字符不能超过200"}],initialValue:this.props.APIdescription})(r.a.createElement(Yr,{style:{width:"85%"}}))),r.a.createElement(Kr,H()({},st,{label:"API path"}),t("APIPath",{rules:[{max:200,message:"最大字符不能超过200"},{min:2,message:"最小字符不能小于2"},{pattern:new RegExp(/^(\/[-|\w]+)+$/),message:"支持英文，数字，下划线，连字符(-)，限制2—200个字符，只能 / 开头，如/user"},{pattern:new RegExp(/^(([^\/]*\/[^\/]*){1,2}|[^\/]*)$/),message:"最多支持两层路径"}],initialValue:this.props.APIPath})(r.a.createElement(_a.a,{style:{width:"85%"}}))),r.a.createElement(Kr,H()({},st,{label:"调用限制"}),t("callLimit",{rules:[{required:!0,message:"请输入调用次数限制"},{validator:function(e,t,a){t&&(t>2e3||t<1)?a("请输入不大于2000的正整数"):a()}}],initialValue:this.props.callLimit})(r.a.createElement(_a.a,{style:{width:"85%"},type:"number",placeholder:"单用户每秒最大调用次数不超过2000次"}))),r.a.createElement(Kr,H()({},st,{label:"协议"}),t("protocol",{initialValue:"HTTP/HTTPS"})(r.a.createElement(oa.a,{style:{width:"85%"}},r.a.createElement(Wr,{value:"HTTP/HTTPS"},"HTTP/HTTPS")))),r.a.createElement(Kr,H()({},st,{label:"请求方式"}),t("method",{rules:[{required:!0,message:"请选择请求方式"}],initialValue:Je.POST})(r.a.createElement(oa.a,{style:{width:"85%"}},this.renderMethod()))),r.a.createElement(Kr,H()({},st,{label:"返回类型"}),t("responseType",{rules:[{required:!0,message:"请选择返回类型"}],initialValue:"JSON"})(r.a.createElement(oa.a,{style:{width:"85%"}},r.a.createElement(Wr,{value:"JSON"},"JSON")))))),r.a.createElement("div",{className:"steps-action"},r.a.createElement(sa.a,{onClick:function(){return e.cancelAndSave()}},"保存并退出"),r.a.createElement(sa.a,{type:"primary",style:{marginLeft:8},onClick:function(){return e.pass()}},"下一步")),r.a.createElement(zr,{groupChange:this.groupChange.bind(this),visible:n,cancel:this.hideNewGroup.bind(this)}))}}]),t}(s.Component),Qr=ua.a.create()(Jr),Xr=Qr,$r=Xr,Zr=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Kr,"FormItem","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/basicProperties.js"),__REACT_HOT_LOADER__.register(Yr,"TextArea","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/basicProperties.js"),__REACT_HOT_LOADER__.register(Wr,"Option","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/basicProperties.js"),__REACT_HOT_LOADER__.register(Jr,"ManageBasicProperties","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/basicProperties.js"),__REACT_HOT_LOADER__.register(Qr,"wrappedComponent","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/basicProperties.js"),__REACT_HOT_LOADER__.register(Xr,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/basicProperties.js")),a(38)),eo=a.n(Zr),to=ua.a.Item,ao=_a.a.TextArea,no=oa.a.Option,io=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={InputSelectedRows:[],OutSelectedRows:[]},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"changeEditStatus",value:function(e,t){var a=this.props,n=a.InputIsEdit,i=a.OutputIsEdit;this.props.changeColumnsEditStatus("boolean"==typeof e?e:n,"boolean"==typeof t?t:i)}},{key:"renderEdit",value:function(e,t,a,n){var i=this.props.form.getFieldDecorator;switch(e){case"paramsName":return r.a.createElement(to,{style:{marginBottom:"0px"}},i("paramsName~"+t+"~"+a,{initialValue:n,rules:[{required:!0,message:"请输入参数名称"}]})(r.a.createElement(_a.a,null)));case"operator":return r.a.createElement(to,{style:{marginBottom:"0px"}},i("operator~"+t+"~"+a,{initialValue:n})(r.a.createElement(oa.a,{style:{width:"100%"}},r.a.createElement(no,{value:"="},"="),r.a.createElement(no,{value:">"},">"),r.a.createElement(no,{value:">="},">="),r.a.createElement(no,{value:"<"}," <"),r.a.createElement(no,{value:"<="},"<="),r.a.createElement(no,{value:"!="},"!="),r.a.createElement(no,{value:"in"},"in"),r.a.createElement(no,{value:"not in"},"not in"),r.a.createElement(no,{value:"like"},"like"),r.a.createElement(no,{value:"not like"},"not like"))));case"required":return r.a.createElement(to,{style:{marginBottom:"0px"}},i("required~"+t+"~"+a,{initialValue:n,valuePropName:"checked"})(r.a.createElement(Ga.a,null)));case"desc":return r.a.createElement(to,{style:{marginBottom:"0px"}},i("desc~"+t+"~"+a,{initialValue:n})(r.a.createElement(ao,{placeholder:"参数描述",autosize:{minRows:2,maxRows:4}})))}}},{key:"initColumns",value:function(e){var t=this,a=this.props,n=a.InputIsEdit,i=a.OutputIsEdit,s=this.props.mode==We.GUIDE;return"in"==e?[{title:"参数名称",dataIndex:"paramsName",width:"150px",render:function(a,i){return n&&s?t.renderEdit("paramsName",i.id,e,a):a}},{title:"绑定字段",dataIndex:"columnName",width:"150px"},{title:"字段类型",dataIndex:"type",width:"100px"},{title:"操作符",dataIndex:"operator",width:"85px",render:function(a,i){return n&&s?t.renderEdit("operator",i.id,e,a):a}},{title:"必填",dataIndex:"required",render:function(a,i){return n?t.renderEdit("required",i.id,e,a):a?"是":"否"},width:"40px"},{title:"说明",dataIndex:"desc",render:function(a,i){return n?t.renderEdit("desc",i.id,e,a):a&&a.length>15?r.a.createElement("span",{title:a},a.substr(0,15),"..."):a}}]:"out"==e?[{title:"参数名称",dataIndex:"paramsName",width:"150px",render:function(a,n){return i&&s?t.renderEdit("paramsName",n.id,e,a):a}},{title:"绑定字段",dataIndex:"columnName",width:"150px"},{title:"字段类型",dataIndex:"type",width:"100px"},{title:"说明",dataIndex:"desc",render:function(a,n){return i?t.renderEdit("desc",n.id,e,a):a&&a.length>30?r.a.createElement("span",{title:a},a.substr(0,30),"..."):a}}]:void 0}},{key:"rowSelection",value:function(e){var t=this;if(this.props.mode!=We.SQL)return{onChange:function(a,n){switch(e){case"in":return void t.setState({InputSelectedRows:n});case"out":return void t.setState({OutSelectedRows:n})}}}}},{key:"onEdit",value:function(e){"in"==e?this.changeEditStatus(!0):"out"==e&&this.changeEditStatus(null,!0)}},{key:"cancelEdit",value:function(e){"in"==e?this.changeEditStatus(!1):"out"==e&&this.changeEditStatus(null,!1)}},{key:"filterSelectRow",value:function(e,t){var a=this.state,n=a.InputSelectedRows,i=a.OutSelectedRows,s=e.map(function(e){return e.id});"in"==t?this.setState({InputSelectedRows:n.filter(function(e){return!s.includes(e.id)})}):"out"==t&&this.setState({OutSelectedRows:i.filter(function(e){return!s.includes(e.id)})})}},{key:"paramsChange",value:function(e){for(var t=this,a=this.props,n=a.InputColumns,i=a.OutputColums,s=a.updateColumns,r=a.checkRepeat,o=this.props.form,l=o.getFieldsValue,c=o.validateFields,p=l(),u=xr()(p),d=[],_={},m=0;m<u.length;m++){var h=u[m][0],g=u[m][1],A=h.split("~");if(A&&3==A.length){var E=A[0],f=A[1],T=A[2];e==T&&(_[f]=_[f]||{},_[f][E]=g,d.push(h))}}c(d,function(a,o){if(!a){var l=void 0,c=void 0,p=void 0;"in"==e?(l=Object(Pe.cloneDeep)(n),c=!1):"out"==e&&(l=Object(Pe.cloneDeep)(i),p=!1);var u=l.map(function(e){var t=e.id;if(_[t])for(var a=xr()(_[t]),n=0;n<a.length;n++){var i=a[n][0],s=a[n][1];e[i]=s}return e});r(u)?(s(u,e),t.changeEditStatus(c,p)):$.a.error("参数不能重复",2)}})}},{key:"getCardTitle",value:function(){var e=this.props,t=e.mode,a=e.sqlModeShowChange;return t==We.SQL?r.a.createElement("span",null,"API参数配置",r.a.createElement("span",{style:{float:"right",marginLeft:"8px",fontSize:"12px",color:"#888"}},"编辑参数"),r.a.createElement("a",{onClick:a,style:{float:"right",fontSize:"12px"}},"代码")):"API参数配置"}},{key:"render",value:function(){var e=this,t=this.props,a=t.InputColumns,n=t.OutputColums,i=t.addColumns,s=t.removeColumns,o=t.selectedRows,l=t.resultPageChecked,c=t.resultPage,p=t.resultPageCheckedChange,u=t.resultPageChange,d=t.mode,_=t.InputIsEdit,m=t.OutputIsEdit,h=this.state,g=h.InputSelectedRows,A=h.OutSelectedRows,E=this.initColumns("in"),f=this.initColumns("out"),T=eo()("params_exchange_button",{params_exchange_button_disable:!o||0==o.length}),y=eo()("params_exchange_button",{params_exchange_button_disable:!g||0==g.length}),v=eo()("params_exchange_button",{params_exchange_button_disable:!o||0==o.length}),C=eo()("params_exchange_button",{params_exchange_button_disable:!A||0==A.length});return r.a.createElement(je.a,{noHovering:!0,title:this.getCardTitle()},r.a.createElement("p",{className:"required-tip middle-title middle-header"},"输入参数：",_?r.a.createElement("span",null,r.a.createElement("a",{onClick:this.paramsChange.bind(this,"in"),style:{float:"right"}},"完成"),r.a.createElement("a",{onClick:this.cancelEdit.bind(this,"in"),style:{float:"right",marginRight:"8px"}},"取消")):r.a.createElement("a",{onClick:this.onEdit.bind(this,"in"),style:{float:"right"}},"编辑"),d==We.GUIDE&&r.a.createElement("div",{className:"params_exchange_box"},r.a.createElement(j.a,{type:"right-square-o",className:T,onClick:i.bind(null,"in")}),r.a.createElement(j.a,{type:"left-square-o",className:y,onClick:function(){e.filterSelectRow(g,"in"),s(g,"in")}}))),r.a.createElement(Ge.a,{rowKey:"id",className:"m-table m-table-showselect",style:{background:"#fff"},columns:E,dataSource:a,pagination:!1,rowSelection:this.rowSelection("in"),scroll:{y:300}}),r.a.createElement("div",{className:"required-tip middle-title middle-header"},"输出参数：",r.a.createElement("span",{className:"params_result_check"},r.a.createElement(Ba.a,{title:"当查询结果大于1000条时，请选择分页查询，每页返回结果默认20条。若没有选择，默认分页查询，最大返回1000条结果。"},"返回结果分页"),r.a.createElement(Ga.a,{checked:l,onChange:p}),l?r.a.createElement(Oi.a,{style:{marginLeft:"8px"},min:1,max:1e3,value:c,onChange:u}):null),m?r.a.createElement("span",null,r.a.createElement("a",{onClick:this.paramsChange.bind(this,"out"),style:{float:"right"}},"完成"),r.a.createElement("a",{onClick:this.cancelEdit.bind(this,"out"),style:{float:"right",marginRight:"8px"}},"取消")):r.a.createElement("a",{onClick:this.onEdit.bind(this,"out"),style:{float:"right"}},"编辑"),d==We.GUIDE&&r.a.createElement("div",{className:"params_exchange_box"},r.a.createElement(j.a,{type:"right-square-o",className:v,onClick:i.bind(null,"out")}),r.a.createElement(j.a,{type:"left-square-o",className:C,onClick:function(){e.filterSelectRow(A,"out"),s(A,"out")}}))),r.a.createElement(Ge.a,{rowKey:"id",className:"m-table m-table-showselect",style:{background:"#fff"},columns:f,dataSource:n,pagination:!1,rowSelection:this.rowSelection("out"),scroll:{y:300}}))}}]),t}(r.a.Component),so=ua.a.create()(io),ro=so,oo=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(to,"FormItem","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/params/columnsConfig.js"),__REACT_HOT_LOADER__.register(ao,"TextArea","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/params/columnsConfig.js"),__REACT_HOT_LOADER__.register(no,"Option","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/params/columnsConfig.js"),__REACT_HOT_LOADER__.register("~","DELIMITER","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/params/columnsConfig.js"),__REACT_HOT_LOADER__.register(io,"ColumnsConfig","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/params/columnsConfig.js"),__REACT_HOT_LOADER__.register(so,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/params/columnsConfig.js")),function(){function e(t){m()(this,e),this.columnName=t.key,this.type=t.type,this.paramsName=t.paramsName||t.key,this.operator=t.operator||"=",this.required=void 0===t.required||t.required,this.desc=t.desc||null,this.id=t.id||(new Date).getTime()+""+~~(1e4*Math.random())}return g()(e,[{key:"resetDataFromService",value:function(e){}}]),e}()),lo=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(oo,"ColumnsModel","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/model/columnsModel.js"),a(427)),co=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={sql:"",loading:!1},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"showModal",value:function(){var e={float:"right",width:"200px",color:"#333"},t={overflow:"hidden"};ca.a.info({title:"SQL编写提示",width:"500px",content:r.a.createElement("div",null,r.a.createElement("p",null,"SQL示例语句:"),r.a.createElement("p",null,"SELECT"),r.a.createElement("p",{style:t},"sales time，",r.a.createElement("span",{style:e},"SELECT查询的字段即为API返回参数。")),r.a.createElement("p",{style:t},"addr as address, ",r.a.createElement("span",{style:e},"如果定义了字段别名，则返回参数名称为字段别名。")),r.a.createElement("p",{style:t},"sum(value) as total_amount ",r.a.createElement("span",{style:e}," 支持SQL中sum、count等函数。")),r.a.createElement("br",null),r.a.createElement("p",null,"FROM"),r.a.createElement("p",null,"table_user"),r.a.createElement("br",null),r.a.createElement("p",null,"WHERE"),r.a.createElement("p",{style:t},"user_id = $","{","uid}；",r.a.createElement("span",{style:e},"WHERE条件中的参数为API请求参数，参数格式必须为$","{","参数名}。")),r.a.createElement("br",null),r.a.createElement("p",null,"注意："),r.a.createElement("p",null,"1.只支持输入一条完整的SQL语句；"),r.a.createElement("p",null,"2.不支持子语句查询；"),r.a.createElement("p",null,"3.支持同一数据源下的两张表关联查询；"),r.a.createElement("p",null,"4.SQL编写完成后，可对参数信息进行设置，填写参数说明、打开分页查询按钮等，参数设置完毕后可进入测试环节。")),onOk:function(){}})}},{key:"renderTitle",value:function(){var e=this,t=this.props.loading;return r.a.createElement("span",null,"API配置SQL语句",r.a.createElement("a",{style:{marginLeft:"20px",fontSize:"12px"},onClick:this.props.sqlFormat},"格式化语句"),r.a.createElement("a",{style:{marginLeft:"8px",fontSize:"12px"},onClick:this.showModal},"SQL编写提示"),r.a.createElement("a",{style:{float:"right",marginLeft:"8px",fontSize:"12px"},onClick:function(){t||e.props.sqlModeShowChange()}},"编辑参数"),r.a.createElement("span",{style:{float:"right",fontSize:"12px",color:"#888"}},t&&r.a.createElement(ur.a,{size:"small",style:{marginRight:"8px"}}),"代码"))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(je.a,{noHovering:!0,title:this.renderTitle()},r.a.createElement(lo.a,{style:{height:"600px",marginTop:"1px"},onChange:this.props.sqlOnChange,value:this.props.editor.sql,cursor:this.props.editor.cursor,sync:this.props.editor.sync})))}}]),t}(r.a.Component),po=co,uo=po,_o=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(co,"ApiSqlEditor","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/sql/index.js"),__REACT_HOT_LOADER__.register(po,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/sql/index.js")),a(40),_a.a.TextArea),mo=oa.a.Option,ho=ua.a.Item,go=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={tableData:[],dataSourceList:[],tableList:[],InputColumns:[],OutputColums:[],selectedRows:[],resultPageChecked:!1,resultPage:void 0,sqlModeShow:!0,editor:{sql:"",cursor:void 0,sync:!0}},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.tableName,n=t.dataSrcId,i=t.inputParam,s=t.outputParam,r=t.resultPageChecked,o=t.resultPage,l=(t.mode,t.sql),c=t.InputIsEdit,p=t.OutputIsEdit,u=t.dataSourceType;this.setState({InputColumns:i||[],OutputColums:s||[],resultPageChecked:r,resultPage:o,editor:{sql:l,sync:!0},sqlModeShow:c&&p}),(u||0==u||n||0==n)&&this.getDataSource(u),(n||0==n)&&this.props.tablelist(n).then(function(t){t&&e.setState({tableList:t.data})}),a&&this.props.tablecolumn(n,a).then(function(t){t&&e.setState({tableData:t.data})}),this.props.getDataSourcesType()}},{key:"sqlOnChange",value:function(e,t,a){this.setState({editor:{sql:t,cursor:a.getCursor(),sync:!1}}),this.props.changeColumnsEditStatus(!0,!0)}},{key:"resultPageCheckedChange",value:function(e){this.setState({resultPageChecked:e.target.checked})}},{key:"resultPageChange",value:function(e){this.setState({resultPage:e})}},{key:"changeColumnsEditStatus",value:function(e,t){this.props.changeColumnsEditStatus(e,t)}},{key:"updateColumns",value:function(e,t){switch(t){case"in":return void this.setState({InputColumns:e});case"out":return void this.setState({OutputColums:e})}}},{key:"addColumns",value:function(e){var t=this.state.selectedRows;switch(e){case"in":return void this.setState({InputColumns:[].concat(Va()(this.state.InputColumns),Va()(t.map(function(e){return new oo(e)})))});case"out":return void this.setState({OutputColums:[].concat(Va()(this.state.OutputColums),Va()(t.map(function(e){return new oo(e)})))})}}},{key:"removeColumns",value:function(e,t){function a(e){return e.filter(function(e){return!r.includes(e.id)})}var n=this.state,i=n.InputColumns,s=n.OutputColums,r=e.map(function(e){return e.id});switch(t){case"in":return void this.setState({InputColumns:a(i)});case"out":return void this.setState({OutputColums:a(s)})}}},{key:"initColumns",value:function(){return[{title:"字段",dataIndex:"key"},{title:"字段类型",dataIndex:"type",width:"100px"}]}},{key:"getDataSource",value:function(e){var t=this;this.props.getDataSourceList(e).then(function(e){e&&t.setState({dataSourceList:e.data})})}},{key:"dataSourceChange",value:function(e){var t=this;this.setState({tableData:[],tableList:[],InputColumns:[],OutputColums:[],selectedRows:[]}),this.props.form.setFieldsValue({tableSource:void 0}),this.props.tablelist(e).then(function(e){e&&t.setState({tableList:e.data})})}},{key:"dataSourceTypeChange",value:function(e){this.setState({dataSourceList:[],tableData:[],tableList:[],InputColumns:[],OutputColums:[],selectedRows:[]}),this.props.form.setFieldsValue({tableSource:void 0,dataSource:void 0}),this.getDataSource(e)}},{key:"tableChange",value:function(e){var t=this,a=this.props.form.getFieldValue("dataSource");this.setState({tableData:[],InputColumns:[],OutputColums:[],selectedRows:[]}),this.props.tablecolumn(a,e).then(function(e){e&&t.setState({tableData:e.data})})}},{key:"rowSelection",value:function(){var e=this;if(this.props.mode!=We.SQL)return{onChange:function(t,a){e.setState({selectedRows:a})},selectedRowKeys:this.state.selectedRows.map(function(e){return e.key})}}},{key:"getSaveData",value:function(){var e=this.state,t=e.InputColumns,a=e.OutputColums,n=e.resultPageChecked,i=e.resultPage,s=e.editor,r=this.props.form.getFieldValue("dataSource"),o=this.props.form.getFieldValue("tableSource");return{dataSrcId:r,dataSourceType:this.props.form.getFieldValue("dataSourceType"),tableName:o,inputParam:t,outputParam:a,resultPageChecked:n,resultPage:i,sql:s.sql}}},{key:"cancelAndSave",value:function(){var e=this.props.cancelAndSave;e(this.getSaveData())}},{key:"pass",value:function(){var e=this.props,t=e.InputIsEdit,a=e.OutputIsEdit,n=e.mode,i=t||a,s=this.state,r=s.InputColumns,o=s.OutputColums;if(s.editor.sql||n!=We.SQL)return i?($.a.warning("请先完成参数编辑",2),void(n==We.SQL&&this.sqlModeShowChange(!0))):void(o&&0!=o.length?this.checkRepeat(r)?this.checkRepeat(o)?this.props.dataChange(this.getSaveData()):$.a.error("输出参数不能相同"):$.a.error("输入参数不能相同"):$.a.error("输出参数不能为空"))}},{key:"prev",value:function(){var e=this.props,t=e.mode,a=e.InputIsEdit,n=e.OutputIsEdit;(a||n)&&We.GUIDE==t?$.a.warning("请先完成参数编辑",2):(this.props.saveData(this.getSaveData()),this.props.prev())}},{key:"checkRepeat",value:function(e){for(var t={},a=0;a<e.length;a++){var n=e[a];if(t[n.columnName]){if(n.paramsName==t[n.columnName])return!1}else t[n.columnName]=n.paramsName}return!0}},{key:"sqlModeShowChange",value:function(e){var t=this;e="boolean"==typeof e&&e;var a=this.props.form.getFieldValue("dataSource"),n=this.state.editor.sql;this.state.sqlModeShow?a||0==a?n?(this.setState({loading:!0}),this.props.sqlParser(n,a).then(function(e){t.setState({loading:!1}),e&&t.setState({InputColumns:t.exchangeServerParams(e.data.inputParam,"in"),OutputColums:t.exchangeServerParams(e.data.outputParam,"out"),sqlModeShow:!t.state.sqlModeShow})})):$.a.warning("sql不能为空!"):$.a.warning("请选择数据源!"):this.setState({sqlModeShow:!e})}},{key:"exchangeServerParams",value:function(e,t){for(var a=this.state,n=a.InputColumns,i=a.OutputColums,s="in"==t?n:i,r={},o=0;o<s.length;o++){var l=s[o];r[l.paramsName]=l}return e?e.map(function(e){var t=r[e.paramName],a=void 0,n=void 0,i=void 0;return t&&t.columnName==e.fieldName&&(a=t.id,n=t.desc,i=t.required),new oo({key:e.fieldName,type:e.paramType,paramsName:e.paramName,operator:e.operator,id:a,desc:n,required:i})}):[]}},{key:"sqlFormat",value:function(){var e=this;this.props.sqlFormat(this.state.editor.sql,this.props.dataSourceType).then(function(t){t&&e.setState({editor:{sync:!0,sql:t.data}})})}},{key:"render",value:function(){var e=this,t=this.initColumns(),a=this.props,n=a.mode,i=a.InputIsEdit,s=a.OutputIsEdit,o=a.dataSource,l=this.state,c=l.tableData,p=l.dataSourceList,u=l.tableList,d=l.InputColumns,_=l.OutputColums,m=l.selectedRows,h=l.resultPageChecked,g=l.resultPage,A=l.sqlModeShow,E=l.editor,f=l.loading,T=this.props.form.getFieldDecorator,y=o.sourceType||[],v=p.map(function(e){return r.a.createElement(mo,{value:e.id},e.name)}),C=u.map(function(e){return r.a.createElement(mo,{value:e},e)}),b=y.map(function(e){return r.a.createElement(mo,{value:e.value},e.name)});return r.a.createElement("div",null,r.a.createElement("div",{className:"steps-content"},r.a.createElement("div",{className:"paramsConfigBox"},r.a.createElement("div",{className:"paramsConfig_data"},r.a.createElement("p",{className:"required-tip middle-title"},"数据源配置:"),r.a.createElement("section",{style:{paddingTop:"10px"}},r.a.createElement(ho,null,T("dataSourceType",{initialValue:this.props.dataSourceType})(r.a.createElement(oa.a,{placeholder:"数据源类型",style:{width:"100%"},showSearch:!0,onChange:this.dataSourceTypeChange.bind(this)},b))),r.a.createElement(ho,null,T("dataSource",{initialValue:this.props.dataSrcId})(r.a.createElement(oa.a,{placeholder:"数据源",style:{width:"100%"},showSearch:!0,onChange:this.dataSourceChange.bind(this)},v))),r.a.createElement(ho,null,T("tableSource",{initialValue:this.props.tableName})(r.a.createElement(oa.a,{placeholder:"数据表",style:{width:"100%"},showSearch:!0,onChange:this.tableChange.bind(this)},C)))),r.a.createElement("p",{className:"required-tip middle-title"},"数据字段:"),r.a.createElement("section",{style:{padding:"10px 0px"}},r.a.createElement(Ge.a,{style:{background:"#fff"},className:"shadow m-table m-table-showselect",columns:t,dataSource:c,pagination:!1,rowSelection:this.rowSelection(),scroll:{y:400}}))),r.a.createElement("div",{className:"paramsConfig_arrow"}),r.a.createElement("div",{className:"paramsConfig_param"},n==We.SQL&&A?r.a.createElement(uo,{updateColumns:this.updateColumns.bind(this),sqlModeShowChange:this.sqlModeShowChange.bind(this),sqlOnChange:this.sqlOnChange.bind(this),sqlFormat:this.sqlFormat.bind(this),editor:E,loading:f}):r.a.createElement(ro,{addColumns:this.addColumns.bind(this),removeColumns:this.removeColumns.bind(this),updateColumns:this.updateColumns.bind(this),changeColumnsEditStatus:this.changeColumnsEditStatus.bind(this),checkRepeat:this.checkRepeat.bind(this),resultPageChange:this.resultPageChange.bind(this),resultPageCheckedChange:this.resultPageCheckedChange.bind(this),sqlModeShowChange:this.sqlModeShowChange.bind(this),InputColumns:d,OutputColums:_,selectedRows:m,resultPageChecked:h,resultPage:g,mode:n,InputIsEdit:i,OutputIsEdit:s})))),r.a.createElement("div",{className:"steps-action"},r.a.createElement(sa.a,{onClick:this.cancelAndSave.bind(this)},"保存并退出"),r.a.createElement(sa.a,{style:{marginLeft:8},onClick:function(){return e.prev()}},"上一步"),r.a.createElement(sa.a,{type:"primary",style:{marginLeft:8},onClick:function(){return e.pass()}},"下一步")))}}]),t}(s.Component),Ao=ua.a.create()(go),Eo=Ao,fo=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(_o,"TextArea","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/paramsConfig.js"),__REACT_HOT_LOADER__.register(mo,"Option","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/paramsConfig.js"),__REACT_HOT_LOADER__.register(ho,"FormItem","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/paramsConfig.js"),__REACT_HOT_LOADER__.register(go,"ManageParamsConfig","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/paramsConfig.js"),__REACT_HOT_LOADER__.register(Ao,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/paramsConfig.js")),void 0),To=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={time:5},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentDidMount",value:function(){(function e(){var t=this;fo=setTimeout(function(){var a=t.state.time-1;a>-1?(t.setState({time:a}),e.call(t)):history.back()},1e3)}).call(this)}},{key:"componentWillUnmount",value:function(){clearTimeout(fo)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(yt.a,{type:"flex",justify:"center",style:{textAlign:"center"}},r.a.createElement("div",{style:{fontSize:"30px",marginTop:"40px"}},r.a.createElement(j.a,{type:"check-circle",style:{fontSize:"60px",color:"#00CD00"}}),r.a.createElement("br",null),"操作成功 ",r.a.createElement("br",null))),r.a.createElement(yt.a,{type:"flex",justify:"center",style:{textAlign:"center",fontSize:"14px",marginTop:"30px"}},this.state.time||"0","秒后自动返回"),r.a.createElement(yt.a,{type:"flex",justify:"center",style:{marginTop:"20px"}},r.a.createElement(sa.a,{size:"large",type:"primary",onClick:this.props.reDo},"继续创建"),r.a.createElement(sa.a,{size:"large",style:{marginLeft:"8px"},onClick:this.props.cancel},"返回")))}}]),t}(s.Component),yo=To,vo=yo,Co=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(fo,"timeClock","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/complete.js"),__REACT_HOT_LOADER__.register(To,"ManageComplete","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/complete.js"),__REACT_HOT_LOADER__.register(yo,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/complete.js")),function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"render",value:function(){var e=this.props.chooseMode;return r.a.createElement("div",{className:"modeChooseBox"},r.a.createElement("div",{className:"modeChooseItem leftItem",onClick:e.bind(null,We.GUIDE)},r.a.createElement("div",{className:"modeTitle"},r.a.createElement("img",{src:"./public/dataApi/img/modeguide.png"})," 模版向导模式"),r.a.createElement("div",{className:"modeDesc"},"只支持单张表原生字段配置，适合单张表的AP查询生成。“step by  step,简单易上手”")),r.a.createElement("div",{className:"modeChooseItem rightItem",onClick:e.bind(null,We.SQL)},r.a.createElement("div",{className:"modeTitle"},r.a.createElement("img",{src:"./public/dataApi/img/modesql.png"})," 自定义SQL模式"),r.a.createElement("div",{className:"modeDesc"},"支持多张表的关联输出，复杂查询条件及简单函数计算。“defined   by  yourself,灵活配置”")))}}]),t}(r.a.Component)),bo=Co,ko=bo,Do=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Co,"ModeChoose","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/modeChoose.js"),__REACT_HOT_LOADER__.register(bo,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/modeChoose.js")),_a.a.TextArea),xo=ua.a.Item,Ro={NOTHING:0,SUCCESS:1,ERROR:2},wo=[new oo({key:"pageNo",type:"INT",required:!1}),new oo({key:"pageSize",type:"INT",required:!1})],Oo=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={results:[],status:Ro.NOTHING},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"prev",value:function(){this.props.prev()}},{key:"initColumns",value:function(){var e=this,t=this.props.form.getFieldDecorator;return[{title:"参数名称",dataIndex:"paramsName",width:"150px"},{title:"字段类型",dataIndex:"type",width:"80px"},{title:"操作符",dataIndex:"operator",width:"55px"},{title:"必填",dataIndex:"required",render:function(e,t){return e?"是":"否"},width:"40px"},{title:"值",render:function(a,n){var i=e.props.inFields,s=i&&i.inFields,o=void 0;return"pageNo"==n.paramsName||"pageSize"==n.paramsName?(o=i&&i[n.paramsName],r.a.createElement(xo,{style:{marginBottom:"0px"}},t(n.paramsName,{rules:[{required:n.required,message:"该参数为必填项"},{pattern:/^\d*$/,message:"请输入数字"}],initialValue:o})(r.a.createElement(Oi.a,{min:1,style:{width:"100%"}})))):(o=s&&s[n.paramsName],r.a.createElement(xo,{style:{marginBottom:"0px"}},t(n.paramsName,{rules:[{required:n.required,message:"该参数为必填项"}],initialValue:o})(r.a.createElement(_a.a,null))))}}]}},{key:"testApi",value:function(){var e=this;(0,this.props.form.validateFieldsAndScroll)({},function(t,a){t||(e.setState({loading:!0}),e.props.apiTest(a).then(function(){e.setState({loading:!1})}))})}},{key:"initOutColumns",value:function(){var e=100,t=[],a=this.props.paramsConfig.outputParam;for(var n in a){var i=a[n].paramsName;t.push({title:i,dataIndex:i,width:Math.max(8*i.length+20,50)+"px"}),e+=Math.max(8*i.length+20,50)}return{outputResultColumns:t,x:e}}},{key:"getSaveMsg",value:function(){var e=this.props.respJson;switch(e?e.success?Ro.SUCCESS:Ro.ERROR:Ro.NOTHING){case Ro.NOTHING:return null;case Ro.SUCCESS:return r.a.createElement(Ga.a,{onChange:this.props.saveResult,checked:this.props.isSaveResult,style:{marginTop:"8px"}},"将测试结果作为JSON样例保存");case Ro.ERROR:return"测试失败!请查看返回结果错误信息"}}},{key:"wrapInputParams",value:function(){var e=this.props.paramsConfig,t=e.inputParam;return e.resultPageChecked?[].concat(wo,Va()(t)):t}},{key:"pass",value:function(){this.props.dataChange()}},{key:"render",value:function(){var e=this,t=this.state,a=(t.results,t.status,t.loading),n=this.props,i=n.basicProperties,s=n.respJson,o=this.wrapInputParams(),l=this.initColumns(),c=this.initOutColumns(),p=c.outputResultColumns,u=c.x;return r.a.createElement("div",null,r.a.createElement("div",{className:"steps-content"},r.a.createElement("div",{className:"testApi_box"},r.a.createElement("div",{className:"left_box"},r.a.createElement("p",{className:"required-tip middle-title"},"API测试："),r.a.createElement("div",{style:{paddingLeft:"20px"}},r.a.createElement("p",{style:{fontSize:"18px"},className:"middle-title"},i.APIName,r.a.createElement("span",{className:"shadowtext",style:{marginLeft:"8px"}},"请求方式：",Qe[i.method]),r.a.createElement("span",{className:"shadowtext",style:{marginLeft:"8px"}},"返回类型：",i.protocol)),r.a.createElement("p",{style:{marginTop:"5px"},className:"middle-title"},"输入参数："),r.a.createElement(Ge.a,{className:"m-table shadow",style:{background:"#fff"},rowKey:"id",columns:l,dataSource:o,pagination:!1,scroll:{y:300}}),r.a.createElement(sa.a,{loading:a,style:{marginTop:12,float:"right"},onClick:function(){return e.testApi()}},"开始测试"))),r.a.createElement("div",{className:"right_box"},r.a.createElement("p",{className:"middle-title"},"测试结果："),r.a.createElement("div",{style:{paddingLeft:"20px"}},r.a.createElement("p",{className:"middle-title"},"返回结果："),r.a.createElement(Do,{className:"textarea_white_disable",value:s?Y()(s,null,4):null,disabled:!0,autosize:{minRows:8,maxRows:20}}),r.a.createElement("p",{style:{marginTop:"10px"},className:"middle-title"},"输出结果："),r.a.createElement(Ge.a,{className:"m-table shadow",style:{background:"#fff"},rowKey:"id",columns:p,dataSource:s&&s.data,pagination:!1,scroll:{y:300,x:u}}),this.getSaveMsg())))),r.a.createElement("div",{className:"steps-action"},r.a.createElement(sa.a,{style:{marginLeft:8},onClick:function(){return e.prev()}},"上一步"),r.a.createElement(sa.a,{type:"primary",style:{marginLeft:8},onClick:function(){return e.pass()}},"完成")))}}]),t}(r.a.Component),So=ua.a.create()(Oo),Lo=So,Io=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Do,"TextArea","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/testApi.js"),__REACT_HOT_LOADER__.register(xo,"FormItem","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/testApi.js"),__REACT_HOT_LOADER__.register(Ro,"apiTestStatus","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/testApi.js"),__REACT_HOT_LOADER__.register(wo,"pageInput","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/testApi.js"),__REACT_HOT_LOADER__.register(Oo,"TestApi","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/testApi.js"),__REACT_HOT_LOADER__.register(So,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/testApi.js")),Sr.a.Step),No=function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t,dataSource:e.dataSource}},Po=function(e){return{getCatalogue:function(t){return e(yn.getCatalogue(t))},getDataSourceList:function(t){return e(jn.getDataSourceByBaseInfo({type:t}))},createApi:function(t){return e(jn.createApi(t))},tablelist:function(t){return e(jn.tablelist({sourceId:t}))},tablecolumn:function(t,a){return e(jn.tablecolumn({sourceId:t,tableName:a}))},previewData:function(t,a){return e(jn.previewData({dataSourceId:t,tableName:a}))},saveOrUpdateApiInfo:function(t){return e(jn.saveOrUpdateApiInfo(t))},sqlFormat:function(t,a){return e(jn.sqlFormat({sql:t,type:a}))},sqlParser:function(t,a){return e(jn.sqlParser({sql:t,sourceId:a}))},getApiInfo:function(t){return e(jn.getApiInfo({apiId:t}))},apiTest:function(t){return e(jn.apiTest(t))},getDataSourcesType:function(){return e(Qa.getDataSourcesType())}}},Ho=Object(v.b)(No,Po)(Es=function(e){function t(){var e,a,n,i;m()(this,t);for(var s=arguments.length,r=Array(s),o=0;o<s;o++)r[o]=arguments[o];return a=n=E()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(r))),n.state={current:0,basicProperties:{},paramsConfig:{},complete:{},testApi:{},mode:void 0,loading:!1,apiEdit:!1,isSaveResult:!1,InputIsEdit:!0,OutputIsEdit:!0},i=a,E()(n,i)}return T()(t,e),g()(t,[{key:"componentWillMount",value:function(){var e=this,t=N.a.getParameterByName("apiId");t&&(this.setState({loading:!0,apiEdit:!0}),this.props.getCatalogue(0).then(function(e){if(e)return!0}).then(function(a){a&&e.props.getApiInfo(t).then(function(t){t&&e.setDefault(t.data)})}))}},{key:"changeColumnsEditStatus",value:function(e,t){this.setState({InputIsEdit:e,OutputIsEdit:t})}},{key:"saveResult",value:function(e){this.setState({isSaveResult:e.target.checked})}},{key:"getInitCatagoryList",value:function(e,t){if(!e&&0!=e)return null;var a=[];return function t(n){if(!n||n.length<1)return null;for(var i=0;i<n.length;i++){var s=n[i];if(!s.api){if(s.id==e)return a.push(s.id),s.id;if(t(s.childCatalogue))return a.push(s.id),s.id}}return null}(t||this.props.apiMarket.apiCatalogue)?a.reverse():null}},{key:"exchangeServerParams",value:function(e){return e?e.map(function(e){return new oo({key:e.fieldName,type:e.paramType,paramsName:e.paramName,operator:e.operator,desc:e.desc,required:e.required})}):[]}},{key:"setDefault",value:function(e){this.setState({loading:!1,mode:e.paramCfgType,basicProperties:{APIGroup:this.getInitCatagoryList(e.catalogueId),APIName:e.name,APIPath:e.apiPath,APIdescription:e.apiDesc,callLimit:e.reqLimit,method:e.reqType,protocol:e.protocol,responseType:e.responseType},paramsConfig:{dataSourceType:e.dataSourceType,dataSrcId:e.dataSrcId,tableName:e.tableName,resultPage:e.respPageSize,resultPageChecked:e.allowPaging,sql:e.sql,inputParam:this.exchangeServerParams(e.inputParam),outputParam:this.exchangeServerParams(e.outputParam)},testApi:{inFields:e.inFields&&e.inFields.inFields,respJson:e.respJson}})}},{key:"basicProperties",value:function(e){this.setState({basicProperties:e||{},current:1})}},{key:"chooseMode",value:function(e){this.setState({mode:e})}},{key:"paramsConfig",value:function(e){this.setState({paramsConfig:e||{},current:2})}},{key:"complete",value:function(e){this.setState({complete:e})}},{key:"testApi",value:function(){this.save(!0)}},{key:"reDo",value:function(){this.setState({current:0,basicProperties:{},paramsConfig:{},complete:{}})}},{key:"next",value:function(){var e=steps[this.state.current].key;if(this.state[e]&&this.state[e].pass){var t=this.state.current+1;this.setState({current:t})}}},{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e})}},{key:"save",value:function(e){var t=this,a=this.createApiServerParams();this.props.saveOrUpdateApiInfo(a).then(function(a){a&&($.a.success("保存成功！"),e&&t.props.router.push("/api/manage"))})}},{key:"createApiServerParams",value:function(){var e=this.state.isSaveResult,t={};t.id=N.a.getParameterByName("apiId"),t.paramCfgType=this.state.mode,t.name=this.state.basicProperties.APIName,t.catalogueId=this.state.basicProperties.APIGroup&&this.state.basicProperties.APIGroup[this.state.basicProperties.APIGroup.length-1],t.apiDesc=this.state.basicProperties.APIdescription,t.dataSrcId=this.state.paramsConfig.dataSrcId,t.tableName=this.state.paramsConfig.tableName,t.dataSourceType=this.state.paramsConfig.dataSourceType,t.reqLimit=this.state.basicProperties.callLimit,t.apiPath=this.state.basicProperties.APIPath,t.reqType=this.state.basicProperties.method,t.protocol=this.state.basicProperties.protocol,t.responseType=this.state.basicProperties.responseType,t.respPageSize=this.state.paramsConfig.resultPage,t.allowPaging=this.state.paramsConfig.resultPageChecked?1:0,t.inputParam=[],t.outputParam=[],t.sql=this.state.paramsConfig.sql,e&&(t.inFields=this.state.testApi.inFields,t.respJson=this.state.testApi.respJson);var a=this.state.paramsConfig;for(var n in a.inputParam){var i=a.inputParam[n];t.inputParam.push({fieldName:i.columnName,paramName:i.paramsName,paramType:i.type,operator:i.operator,required:i.required,desc:i.desc})}for(var s in a.outputParam){var r=a.outputParam[s];t.outputParam.push({fieldName:r.columnName,paramName:r.paramsName,paramType:r.type,desc:r.desc})}return t}},{key:"apiTest",value:function(e){var t=this,a=this.createApiServerParams(),n=e.pageNo,i=e.pageSize,s=wr()(e,["pageNo","pageSize"]);a.pageNo=n,a.pageSize=i;var r={};return xr()(s).map(function(e){var t=kr()(e,2),a=t[0],n=t[1];r[a]=n||void 0}),a.inFields=r,this.setState({isSaveResult:!1}),this.props.apiTest(a).then(function(e){e&&t.setState({testApi:{respJson:e.data,inFields:a}})})}},{key:"cancelAndSave",value:function(e,t){var a=this;switch(e){case"basicProperties":return void this.setState({basicProperties:t||{}},function(){a.save(!0)});case"paramsConfig":return void this.setState({paramsConfig:t||{}},function(){a.save(!0)})}}},{key:"saveData",value:function(e,t){switch(e){case"basicProperties":this.setState({basicProperties:t||{}});case"paramsConfig":this.setState({paramsConfig:t||{}})}}},{key:"render",value:function(){var e=this.state,t=e.mode,a=e.paramsConfig,n=e.basicProperties,i=e.apiEdit,s=e.loading,o=e.isSaveResult,l=e.InputIsEdit,c=e.OutputIsEdit,p=[{key:"basicProperties",title:"基本属性",content:$r},{key:"paramsConfig",title:"参数配置",content:Eo},{key:"testApi",title:"测试生成",content:Lo},{key:"complete",title:"完成",content:vo}][this.state.current],u=p.key,d=p.content;return r.a.createElement("div",{className:"m-card g-datamanage"},r.a.createElement("h1",{className:"box-title"}," ",r.a.createElement(Er.a,{url:"/api/manage"})," ",i?"编辑API":"新建API"),s?r.a.createElement("div",{style:{textAlign:"center",marginTop:"400px"}},r.a.createElement(ur.a,{size:"large"})):r.a.createElement(je.a,{style:{padding:"20px"},className:"box-2",noHovering:!0},t||0==t?r.a.createElement("div",null,r.a.createElement(Sr.a,{current:this.state.current},r.a.createElement(Io,{title:"基本属性"}),r.a.createElement(Io,{title:"参数配置"}),r.a.createElement(Io,{title:"完成"})),r.a.createElement(d,H()({dataSourceId:this.state.basicProperties.dataSource,tableId:this.state.basicProperties.table},this.props,this.state[u],{paramsConfig:a,basicProperties:n,reDo:this.reDo.bind(this),prev:this.prev.bind(this),mode:t,isSaveResult:o,InputIsEdit:l,OutputIsEdit:c,saveData:this.saveData.bind(this,u),cancelAndSave:this.cancelAndSave.bind(this,u),apiTest:this.apiTest.bind(this),dataChange:this[u].bind(this),saveResult:this.saveResult.bind(this),changeColumnsEditStatus:this.changeColumnsEditStatus.bind(this)}))):r.a.createElement(ko,{chooseMode:this.chooseMode.bind(this)})))}}]),t}(s.Component))||Es,Uo=Ho,jo=Uo,Mo=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Io,"Step","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/index.js"),__REACT_HOT_LOADER__.register(No,"mapStateToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/index.js"),__REACT_HOT_LOADER__.register(Po,"mapDispatchToProps","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/index.js"),__REACT_HOT_LOADER__.register(Ho,"NewApi","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/index.js"),__REACT_HOT_LOADER__.register(Uo,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/views/management/createApi/index.js")),r.a.createElement(y.d,{path:"/",component:C.a},r.a.createElement(y.a,{to:"/api"}),r.a.createElement(y.d,{path:"/message",component:b.a},r.a.createElement(y.b,{component:k.a}),r.a.createElement(y.d,{path:"list",component:k.a}),r.a.createElement(y.d,{path:"detail/:msgId",component:D.a})),r.a.createElement(y.d,{path:"/admin",component:x.a},r.a.createElement(y.b,{component:R.a}),r.a.createElement(y.d,{path:"user",component:R.a}),r.a.createElement(y.d,{path:"role",component:w.a}),r.a.createElement(y.d,{path:"role/add",component:O.a}),r.a.createElement(y.d,{path:"role/edit/:roleId",component:S.a})),r.a.createElement(y.d,{path:"/api",component:Le},r.a.createElement(y.b,{component:na}),r.a.createElement(y.d,{path:"overview",component:na}),r.a.createElement(y.d,{path:"approval",component:Ha}),r.a.createElement(y.d,{path:"manage",component:Ri}),r.a.createElement(y.d,{path:"manage/detail/:api",component:cr}),r.a.createElement(y.d,{path:"manage/apiType",component:Cr}),r.a.createElement(y.d,{path:"manage/newApi",component:jo}),r.a.createElement(y.d,{path:"market",component:Qi}),r.a.createElement(y.d,{path:"market/detail/:api",component:$s}),r.a.createElement(y.d,{path:"mine",component:qs}),r.a.createElement(y.d,{path:"mine/:view",component:qs}),r.a.createElement(y.d,{path:"dataSource",component:un})))),Go=Mo,Fo=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Mo,"default","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/routers.js"),function(e){function t(){return m()(this,t),E()(this,(t.__proto__||d()(t)).apply(this,arguments))}return T()(t,e),g()(t,[{key:"render",value:function(){var e=this.props,t=e.store,a=e.history;return r.a.createElement(v.a,{store:t},r.a.createElement(y.e,{routes:Go,history:a,key:Math.random(),onEnter:function(){}}))}}]),t}(r.a.Component)),Vo=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Fo,"Root","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/root.js"),function(e){var t=a(865).default,n=Object(p.a)(t,"hash"),i=n.store,s=n.history;l.a.render(r.a.createElement(c.AppContainer,null,r.a.createElement(e,{store:i,history:s})),document.getElementById("app"))});Vo(Fo);"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Vo,"render","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/app.js")},88:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(35),i=a.n(n)()(["CHANGE_LOADING","GET_TOP_RECORD","GET_ALARM_SUM","GET_ALARM_TREND","GET_USAGE","CHOOSE_USER_DATE","CHOOSE_ADMIN_DATE","GET_USER_CALL_INFO","GET_API_FAIL_RANK","GET_USER_API_CALL_RANK","GET_USER_API_SUB_INFO","GET_MARKET_API_FAIL_RANK","GET_MARKET_CALL_INFO","GET_MARKET_API_CALL_RANK","GET_MARKET_API_ERROR_INFO","GET_MARKET_API_APPLY_INFO","GET_MARKET_TOP_CALL_FUNC","CLOSE_APPROVAL_WARNING"],{prefix:"dashBoard/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"dashBoardActionType","/Users/xuexiaokang/Documents/数据中台/git/data-stack-web/src/webapps/dataApi/consts/dashBoardActionType.js")},890:function(e,t,a){},892:function(e,t,a){}},[[873,10,12,11,14,15,17,16,13]]]);