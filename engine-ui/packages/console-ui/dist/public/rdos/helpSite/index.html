<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>DTinsight开发套件使用手册</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:Deng;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:Consolas;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:Deng;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:Deng;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Deng","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:initial}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px 0}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:.4em .75em 0 .75em;line-height:1;vertical-align:top}
.colist>table tr>td:first-of-type img{max-width:initial}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>DTinsight开发套件使用手册</h1>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#summary">1. 概述</a>
<ul class="sectlevel2">
<li><a href="#_数栈_数据中台产品体系介绍">1.1. 数栈·数据中台产品体系介绍</a></li>
<li><a href="#summ_ProdIntro">1.2. 开发套件产品介绍</a></li>
<li><a href="#summ_userRoles">1.3. 用户角色</a></li>
</ul>
</li>
<li><a href="#Explain">2. 名词解释</a></li>
<li><a href="#_主要功能及操作方式">3. 主要功能及操作方式</a>
<ul class="sectlevel2">
<li><a href="#Project">3.1. 项目</a>
<ul class="sectlevel3">
<li><a href="#proj_summary">3.1.1. 项目总览</a></li>
<li><a href="#proj_create">3.1.2. 创建项目</a></li>
<li><a href="#proj_usermanage">3.1.3. 项目成员的管理</a></li>
</ul>
</li>
<li><a href="#Integration">3.2. 数据集成</a>
<ul class="sectlevel3">
<li><a href="#integration_datasource">3.2.1. 支持的数据源</a></li>
<li><a href="#integration_dataSourceManagement">3.2.2. 数据源管理</a></li>
<li><a href="#integration_jobConfig">3.2.3. 数据同步任务的配置</a>
<ul class="sectlevel4">
<li><a href="#integration_jobConfig_relationalDB">关系型数据库</a></li>
<li><a href="#integration_jobConfig_hive">Hive</a></li>
<li><a href="#integration_jobConfig_hdfs">HDFS</a></li>
<li><a href="#integration_jobConfig_hbase">HBase</a></li>
<li><a href="#integration_jobConfig_channel">通道控制</a></li>
<li><a href="#integration_jobConfig_version">版本支持</a></li>
</ul>
</li>
<li><a href="#integration_demo">3.2.4. 最佳实践</a>
<ul class="sectlevel4">
<li><a href="#integration_demo_mysqlhive">MySQL导入Hive</a></li>
<li><a href="#integration_demo_hivemysql">Hive导入MySQL</a></li>
<li><a href="#integration_demo_mysqlincre">MySQL数据库增量同步</a></li>
<li><a href="#integration_demo_mysqlhdfs">MySQL导入HDFS</a></li>
<li><a href="#_执行数据同步任务">执行数据同步任务</a></li>
<li><a href="#_新建hive表_并读取数据">新建hive表，并读取数据</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DataDevelopment">3.3. 数据开发</a>
<ul class="sectlevel3">
<li><a href="#deve_batch">3.3.1. 离线任务开发</a>
<ul class="sectlevel4">
<li><a href="#deve_batch_develop">任务开发</a></li>
<li><a href="#deve_batch_type">任务类型</a></li>
<li><a href="#deve_batch_schedule">调度属性配置</a></li>
<li><a href="#deve_batch_script">脚本开发</a></li>
<li><a href="#deve_batch_resource">资源管理</a></li>
<li><a href="#deve_batch_function">函数管理</a></li>
<li><a href="#deve_batch_tableview">表查询</a></li>
<li><a href="#deve_batch_loadlocaldata">导入本地数据</a></li>
</ul>
</li>
<li><a href="#deve_stream">3.3.2. 实时任务开发</a>
<ul class="sectlevel4">
<li><a href="#deve_stream_intro">实时任务简介</a></li>
<li><a href="#deve_stream_datainput">支持的数据源</a></li>
<li><a href="#deve_stream_develop">任务开发</a></li>
<li><a href="#deve_stream_resource">资源管理</a></li>
<li><a href="#deve_stream_function">函数管理</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Maintenance">3.4. 运维中心</a>
<ul class="sectlevel3">
<li><a href="#maint_cent_summary">3.4.1. 运维中心概览</a></li>
<li><a href="#maint_summary">3.4.2. 运维概览</a></li>
<li><a href="#maint_batch">3.4.3. 离线任务运维</a>
<ul class="sectlevel4">
<li><a href="#maint_batch_jobmanage">任务管理</a></li>
<li><a href="#maint_batch_jobstatus">实例的状态转换</a></li>
<li><a href="#maint_batch_jobcycle">周期实例</a></li>
<li><a href="#maint_batch_jobrerun">补数据实例</a></li>
</ul>
</li>
<li><a href="#maint_stream">3.4.4. 实时任务运维</a></li>
<li><a href="#maint_alert">3.4.5. 监控告警</a>
<ul class="sectlevel4">
<li><a href="#maint_alert_record">告警记录</a></li>
<li><a href="#maint_alert_config">自定义配置</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#DataMang">3.5. 数据管理</a>
<ul class="sectlevel3">
<li><a href="#datamang_tablemanag">3.5.1. 表管理</a>
<ul class="sectlevel4">
<li><a href="#datamang_tablemanag_view">查看表</a></li>
<li><a href="#datamang_tablemanag_tablemanag">数据表的管理</a></li>
<li><a href="#datamang_tablemanag_create">新建表</a></li>
</ul>
</li>
<li><a href="#datamang_record">3.5.2. 操作记录</a></li>
<li><a href="#datamang_cate">3.5.3. 数据类目</a></li>
<li><a href="#datamang_dirtydata">3.5.4. 脏数据管理</a>
<ul class="sectlevel4">
<li><a href="#datamang_dirtydata_config">脏数据的配置</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#UserManagement">3.6. 用户管理</a>
<ul class="sectlevel3">
<li><a href="#usermanagement_login">3.6.1. 登录</a></li>
<li><a href="#usermanagement_findpassword">3.6.2. 找回密码</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#HiveSQLGuide">4. HIVE SQL指南</a>
<ul class="sectlevel2">
<li><a href="#_建表语法">4.1. 建表语法</a></li>
<li><a href="#_数据类型">4.2. 数据类型</a></li>
<li><a href="#_ddl语句">4.3. DDL语句</a></li>
<li><a href="#_典型查询语句">4.4. 典型查询语句</a></li>
</ul>
</li>
<li><a href="#FlinkDevelopGuide">5. 实时任务开发指南</a>
<ul class="sectlevel2">
<li><a href="#_实时计算简介">5.1. 实时计算简介</a></li>
<li><a href="#_flink引擎简介">5.2. Flink引擎简介</a></li>
<li><a href="#_利用rd_os进行实时任务开发的注意事项">5.3. 利用RD-OS进行实时任务开发的注意事项</a>
<ul class="sectlevel3">
<li><a href="#_数据倾斜">5.3.1. 数据倾斜</a></li>
</ul>
</li>
<li><a href="#_最佳实践">5.4. 最佳实践</a></li>
</ul>
</li>
<li><a href="#SparkDevelopGuide">6. 离线任务开发指南</a>
<ul class="sectlevel2">
<li><a href="#_离线计算简介">6.1. 离线计算简介</a></li>
<li><a href="#_spark计算引擎简介">6.2. Spark计算引擎简介</a></li>
<li><a href="#_最佳实践_2">6.3. 最佳实践</a></li>
</ul>
</li>
<li><a href="#QA">7. 常见问题</a>
<ul class="sectlevel2">
<li><a href="#_实时任务">7.1. 实时任务</a></li>
<li><a href="#_离线任务">7.2. 离线任务</a>
<ul class="sectlevel3">
<li><a href="#_数据同步">7.2.1. 数据同步</a></li>
<li><a href="#_数据管理">7.2.2. 数据管理</a></li>
<li><a href="#_运维中心">7.2.3. 运维中心</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Appendix">8. 附录</a>
<ul class="sectlevel2">
<li><a href="#_每个角色对应的权限点">8.1. 每个角色对应的权限点</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="summary">1. 概述</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_数栈_数据中台产品体系介绍">1.1. 数栈·数据中台产品体系介绍</h3>
<div class="paragraph">
<p>本文档只是DTinsightIDE（开发套件）的产品使用手册，但在详细介绍开发套件产品之前，可以先了解一下数栈·数据中台整体的产品体系：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/01_DTinsightIDEHelp_Summary-4ecad.png" alt="01 DTinsightIDEHelp Summary 4ecad">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>EasyV</strong>：秒级可视化大屏开发平台，数据价值触手可及。</p>
</li>
<li>
<p><strong>数据质量（Valid）</strong>：支持对多种数据源进行数据质量监测与跟踪，保障数据产出稳定、可靠。</p>
</li>
<li>
<p><strong>主数据管理（MDM）</strong>：解决不同业务系统主数据不统一的问题，支持主数据建模、审批流配置等功能。</p>
</li>
<li>
<p><strong>数据API（API）</strong>：可视化配置数据API，统一监控与审批，实现API的一站式配置、审批与监控。</p>
</li>
<li>
<p><strong>数据模型（Model）</strong>：保障数据平台内代码的规范性，更进一步实现规范化的数据管理。</p>
</li>
<li>
<p><strong>标签工厂（Tag）</strong>：用户仅需关注标签生产逻辑，可大幅缩短标签开发周期。</p>
</li>
<li>
<p><strong>玳数日志（EasyLog）</strong>：海量日志管理、分析，快速生成监控告警场景，提升故障发现率、降低运维成本。</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="summ_ProdIntro">1.2. 开发套件产品介绍</h3>
<div class="paragraph">
<p>DTinsightIDE（开发套件）是由
<a href="http://www.dtstack.com">袋鼠云</a>开发的一款实时大数据智能操作系统，本文档是DTinsightIDE（开发套件）的使用手册。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
本文档适用于如下版本：
 <span class="image"><img src="images/V2.0.0.png" alt="V2.0.0" width="90"></span>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>袋鼠云DTinsightIDE，是一款高效的大数据实时/离线任务开发、任务调度、数据管理工具，支持对大数据实时处理过程进行可视化管理与控制。帮助客户提升开发效率，快速创建实时/离线计算任务，缩短开发周期；任务管理与运维一体化，减轻繁冗的运维工作。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>系统架构</strong></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/01_DTinsightIDEHelp_Summary-b790d.png" alt="01 DTinsightIDEHelp Summary b790d">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>主要特性</strong></p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p>全面托管的调度</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>提供强大的调度能力，支持按照时间、依赖关系的任务触发机制，支持各类任务按照DAG关系准确、准时运行。支持分钟、小时、天、周和月多种调度周期配置。
完全托管的服务，无需关心调度服务器资源问题。租户之间提供隔离，保证不同租户之间的任务不会相互影响。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>支持多种任务类型</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>支持数据同步、SQL（兼容Hive语法）、MR、Python等多种任务类型，通过任务之间的相互依赖完成复杂的数据分析处理。数据同步模块支持多种数据源，提供稳定高效的数据传输。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>可视化开发</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>提供可视化的代码开发页面，无需搭配任何开发工具，只要有浏览器有网络，便可随时随地进行开发工作。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>监控告警</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>运维中心提供可视化的任务监控管理工具，支持以DAG图的形式展示任务运行时的全局情况。可方便地配置短信报警，任务发生错误可及时通知相关同学，保证业务正常运行。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>约束与限制</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>仅支持Chrome浏览器65以上版本。</p>
</div>
</div>
<div class="sect2">
<h3 id="summ_userRoles">1.3. 用户角色</h3>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">角色</th>
<th class="tableblock halign-left valign-top">权限</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">项目所有者</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">指项目空间的创建者，拥有项目空间内的最高权限，可对该项目空间的基本属性、数据源、当前项目空间的全部资源和项目成员等进行管理，并为项目成员赋予项目管理员、开发、运维、访客角色。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">项目管理员</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">指项目空间的管理者，可对该项目空间的基本属性、数据源、当前项目空间的全部资源和项目成员等进行管理，并为项目成员赋予项目管理员、开发、运维、访客角色。项目管理员不能对项目所有者操作。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">数据开发</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">数据开发角色的用户能够创建任务、脚本、资源等，新建/删除表，但不能执行发布操作。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">运维</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">运维角色的用户由项目管理员分配运维权限；拥有发布任务、运维任务的操作权限，没有数据开发的操作权限。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">访客</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">只具备查看权限，没有权限进行编辑任务、运维等操作</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
目前DTinsightIDE的用户角色是固定的，不支持编辑，每个角色详细的权限点可参考<a href="#Appendix">附录</a>。
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Explain">2. 名词解释</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">专有名词</th>
<th class="tableblock halign-left valign-top">解释</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">项目</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">项目，是一组资源、任务等信息的集合，用户可以针对项目进行各种操作；一个项目中，既包括实时任务，也包括离线任务</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HDFS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hadoop分布式文件系统（Hadoop Distributed File System）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">即MapReduce，一种开源并行计算框架</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flink</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apache Flink，一种分布式、高性能、高可用且准确的开源流处理框架</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">UDF</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">User Defined Function，用户自定义函数，通常适用于SQL任务</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spark</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Apache Spark，一种开源的，专为大规模数据处理而设计的快速通用的计算引擎</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">任务实例</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">指某任务执行过程中，除了其代码和静态资源外，还包括被分配的动态资源（计算节点、存储资源等）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">上下游任务</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A任务成功的执行完成后，B、C任务才可以执行，这种行为称之为B、C依赖于A；在这个例子中，A是B、C的上游任务，B、C是A的下游任务。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">杀任务</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">终止某个任务实例的运行</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">重跑任务</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">重新运行某个任务（重跑通常应用于离线任务中）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">补数据</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">当任务由于某些原因，修改了业务逻辑时，或发生异常，用户希望对以前的数据重新进行计算，此时会使用“补数据”功能，即手动配置任务的数据源时间段，令其再次运行</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">业务日期</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">可理解为业务发生的日期，在DTinsightIDE中，业务日期=任务的定时执行时间-1天</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_主要功能及操作方式">3. 主要功能及操作方式</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="Project">3.1. 项目</h3>
<div class="paragraph">
<p>“项目”组成了DTinsightIDE的核心，一个项目是一组资源的集合，例如为了统计某个APP的活跃用户情况，需要多位开发人员根据业务需求创建不同的实时任务、离线任务，那么这组用户、由这组用户创建的实时任务、离线任务等等资源，可以理解为一个“项目”。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
每个项目之间是彼此独立的，不同项目间的数据是隔离的
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="proj_summary">3.1.1. 项目总览</h4>
<div class="paragraph">
<p>有2种查看项目的方式：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>用户登录成功后停留的页面，可查看其管理、参与的各个项目，同时可进入任意一个项目操作。</p>
</li>
<li>
<p>在任意页面，点击DTinsightIDE页面左上角的LOGO，页面跳转至项目总览页面，可以浏览当前用户管理、参与的所有项目。</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="proj_create">3.1.2. 创建项目</h4>
<div class="ulist">
<ul>
<li>
<p><strong>创建项目</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>通常为了完成一组较为复杂的，包含了很多实时、离线任务，且需要多为用户协作时，需要创建一个项目。在<strong>项目总览</strong>，点击<strong>创建项目</strong>按钮，输入项目唯一标识、项目描述即可。</p>
</div>
<div class="sidebarblock">
<div class="content">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>项目唯一标识：20个字符以内，且只能由字母和数字组成。</p>
</li>
<li>
<p>项目描述：不超过200字符，字符类型不限制。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>项目的状态</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>当用户在创建项目时，DTinsightIDE后台会进行各种初始化工作，因此项目可能会进入不同的状态。</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/03_DTinsightIDEHelp_UserGuide_Project-状态.png" alt="03 DTinsightIDEHelp UserGuide Project 状态">
</div>
<div class="title">Figure 1. 项目状态的转换</div>
</div>
<div class="paragraph">
<p>如上图所示，项目可能会存在多种状态：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>初始化：创建项目后，系统会进行项目配置的初始化工作，因此可能在<strong>项目概览</strong>的<strong>项目列表</strong>中看到这个状态。初始化是一种过渡状态，通常较为短暂。如果某项目长期处于“初始化”状态，则您需要联系管理员处理。</p>
</li>
<li>
<p>正常：项目初始化成功后，会进入正常状态，这也是绝大多数的项目状态。</p>
</li>
<li>
<p>失败：项目初始化失败，会进入失败状态，<strong>只有失败状态的项目才能被删除</strong>。</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
只有特定角色的用户才可以创建项目、删除项目
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="proj_usermanage">3.1.3. 项目成员的管理</h4>
<div class="paragraph">
<p>项目除了将各类资源集中进行管理与操作外，通常还会有多位用户共同来完成不同的职能。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>创建项目的用户为“项目所有者”，此外还有项目管理员和普通项目成员，这3类角色都可以创建实时和离线任务，并管理项目内的资源。</p>
</li>
<li>
<p>每个项目只有一个项目所有者，可以有多位项目管理员，多位普通成员。</p>
</li>
<li>
<p>每个用户可以同时参与多个项目。</p>
</li>
</ol>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>添加项目成员</strong></p>
<div class="paragraph">
<p>项目所有者或项目管理员希望其他用户加入本项目，共同创建、维护任务时，需要将其他用户加入本项目。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>进入<strong>项目管理&#8594;成员管理</strong></p>
</li>
<li>
<p>点击<strong>添加成员</strong>，输入成员账号进行搜索，并在搜索结果中选择一个或多个用户，为其设定角色</p>
</li>
<li>
<p>点击<strong>确定</strong>后，此用户即加入了这个项目。</p>
</li>
<li>
<p>新加入的用户需要首先登录一次系统，才可在项目列表中看到此项目。</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>移除项目成员</strong></p>
<div class="paragraph">
<p>项目所有者/项目管理员认为某用户无需在本项目中继续操作时，可将其移出本项目。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>进入<strong>项目管理-成员管理</strong></p>
</li>
<li>
<p>在<strong>项目成员列表</strong>中点击<strong>移出项目</strong>。某成员被移出项目后，不能在本项目中进行任何操作，但其已创建的任务、已上传的资源不会被删除。</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>改变项目成员的角色</strong></p>
<div class="paragraph">
<p>项目所有者想将普通成员置为项目管理员，与其一起管理项目组内的其他成员时，可将其“置为管理员”。相对的，也可以将项目管理员置为普通成员。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>进入<strong>项目管理-成员管理</strong></p>
</li>
<li>
<p>在<strong>项目成员列表</strong>中，分别点击<strong>置为管理员</strong>或<strong>置为普通用户</strong>。</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>管理项目成员的权限</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>只有项目所有者和项目管理员才可以进行项目成员的管理，普通项目成员没有项目成员管理的权限。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
任一项目中，除了项目创建者外，最多有其他2位项目管理员
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Integration">3.2. 数据集成</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
DTinsight的基于Flink实现的数据集成底层模块现已开源，欢迎参与到开源项目的建设中。开源组件的详细使用方式请参考：
<a href="https://github.com/DTStack/flinkx">FlinkX数据集成组件</a>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>数据集成模块是在各个存储单元之间执行数据交换的<strong>通道</strong>。为了在DTinsightIDE进行大规模数据集的挖掘与计算，通常的做法是在任务执行前将数据传输至DTinsightIDE，并在任务执行结束后将计算结果传输至外部存储单元（例如MySQL等应用数据库）。数据集成的作用如下图所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/05_DTinsightIDEHelp_UserGuide_DataIntegration-数据输入与输出.png" alt="05 DTinsightIDEHelp UserGuide DataIntegration 数据输入与输出">
</div>
<div class="title">Figure 2. 数据输入与输出图</div>
</div>
<div class="paragraph">
<p>数据集成模块主要由以下几部分构成：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>数据源管理</p>
</li>
<li>
<p>数据同步任务的配置与执行</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="integration_datasource">3.2.1. 支持的数据源</h4>
<div class="paragraph">
<p>不同的DTinsightIDE版本对数据源的支持能力不同，本版本支持的数据源包括：MySQL、SQLServer、Oracle、HDFS、Hive、HBase</p>
</div>
</div>
<div class="sect3">
<h4 id="integration_dataSourceManagement">3.2.2. 数据源管理</h4>
<div class="paragraph">
<p><strong>数据源管理是对外部存储单元访问参数的管理</strong>，数据集成模块需要与<a href="#deve_batch">离线任务开发</a>配合起来才能发挥作用，实际是由定时任务来执行数据传输的。</p>
</div>
<div class="paragraph">
<p>在项目上方的<strong>数据集成</strong>菜单，进入数据数据源管理页面，可看到目前已经集成的数据源列表，包括数据源名称、类型、连接信息、描述、最近修改人、最近修改时间、状态等信息，同时可执行编辑、删除等操作。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>数据源的配置</p>
<div class="ulist">
<ul>
<li>
<p>在项目上方的<strong>数据集成</strong>菜单，进入项目源列表页面；</p>
</li>
<li>
<p>在<strong>数据源列表</strong>右上角的<strong>新增数据源</strong>，选择不同的数据源类型，需要填写不同的配置信息。</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p><strong>关系型数据库（MySQL、Oracle、SQLServer）</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>JDBC URL</strong>:访问数据库的连接地址，JDBC URL格式如：<br></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">jdbc:mysql://172.16.8.104:3306/test?charset=utf8</code></pre>
</div>
</div>
</li>
<li>
<p><strong>用户名</strong>：访问数据库的用户名</p>
</li>
<li>
<p><strong>密码</strong>：访问数据库的密码</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>Hive</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>JDBC URL</strong>:访问Hive的连接地址，JDBC URL格式如：<br></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">jdbc:mysql://172.16.8.104:3306/test?charset=utf8</code></pre>
</div>
</div>
</li>
<li>
<p><strong>用户名</strong>：访问数据库的用户名</p>
</li>
<li>
<p><strong>密码</strong>：访问数据库的密码</p>
</li>
<li>
<p><strong>DefaultFS</strong>：</p>
</li>
<li>
<p><strong>高可用配置</strong>：补充高可用配置参数，可以使DTinsightIDE访问高可用模式下的Hive数据源，高可用配置的示例如下：</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">{
  "dfs.nameservices": "nameserviceTest"
  "dfs.ha.namenodes.nameservice.nameserviceTest":"testDfs",
  "dfs.namenode.rpc-address.nameserviceTest.testDfs":"", "dfs.namenode.rpc-address.nameserviceTest.testDfs":"", "dfs.client.failover.proxy.provider.nameserviceTest": "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider"
}</code></pre>
</div>
</div>
</li>
<li>
<p>关于HDFS高可用的更多信息可参考
<a href="http://hadoop.apache.org/docs/r2.7.4/hadoop-project-dist/hadoop-hdfs/HDFSHighAvailabilityWithQJM.html">Hadoop官方文档</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>HDFS</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>DefaultFS</strong>：即HDFS的namenode的节点地址，格式如：<code>hdfs://ServerIP:Port</code>。</p>
</li>
<li>
<p><strong>高可用配置</strong>：补充高可用配置参数，可以使DTinsightIDE访问高可用模式下的HDFS数据源，高可用配置的示例如下：</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">"hadoopConfig":{
    "dfs.nameservices": "testDfs",
    "dfs.ha.namenodes.testDfs": "namenode1,namenode2",
    "dfs.namenode.rpc-address.testDfs.namenode1": "",
    "dfs.namenode.rpc-address.testDfs.namenode2": "",
    "dfs.client.failover.proxy.provider.testDfs": "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider"
}</code></pre>
</div>
</div>
</li>
<li>
<p>关于HDFS高可用的更多信息可参考
<a href="http://hadoop.apache.org/docs/r2.7.4/hadoop-project-dist/hadoop-hdfs/HDFSHighAvailabilityWithQJM.html">Hadoop官方文档</a></p>
</li>
</ul>
</div>
</li>
<li>
<p><strong>HBase</strong></p>
<div class="ulist">
<ul>
<li>
<p><strong>Zookeeper集群地址</strong>：</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>必填，多个地址间用逗号分割。例如：<code>IP1:Port, IP2:Port, IP3:Port/子目录</code>。默认是`localhost`,在伪分布式模式时使用。若在完全分布式的情况下使用则需要修改。如果在hbase-env.sh设置了`HBASEMANAGESZK`， 这些ZooKeeper节点就会和HBase一起启动。</p>
</li>
<li>
<p>Port: ZooKeeper的zoo.conf中的配置。客户端连接的端口， 默认2181。</p>
</li>
<li>
<p>子目录：HBase在ZooKeeper中配置的子目录。</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>其他参数</strong>：以JSON方式传入其他参数，例如：<br></p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">"hbaseConfig": {
  "hbase.rootdir": "hdfs: //ip:9000/hbase",
  "hbase.cluster.distributed": "true",
  "hbase.zookeeper.quorum": "***"
}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p><strong>测试连通性</strong></p>
<div class="ulist">
<ul>
<li>
<p>在添加/编辑数据源时，可以主动测试数据源的连通性，只有数据源连接正常的情况下才可以被添加/编辑。</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>数据源的状态</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>已配置的数据源，系统会检测其是否在数据同步任务中被使用，“使用中”状态的数据源只能被编辑，但不能被删除</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
为了使DTinsightIDE可以访问对应的存储单元（包括读/写），请务必保证DTinsightIDE与这些存储单元之间的网络畅通，否则会导致任务失败。
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
若您的存储单元配置参数有变更，请及时修改数据源的配置，否则可能导致任务执行失败。
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="integration_jobConfig">3.2.3. 数据同步任务的配置</h4>
<div class="paragraph">
<p>数据同步任务的配置共分为5个步骤：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>选择数据来源：选择已配置的数据源，系统会读取其中的数据；</p>
</li>
<li>
<p>选择数据目标：选择已配置的数据源，系统会向其写入数据；</p>
</li>
<li>
<p>字段映射：配置数据来源与数据目标之间的字段映射关系，不同的数据类型在这步有不同的配置方法；</p>
</li>
<li>
<p>通道控制：控制数据同步的执行速度、错误数据的处理方式等；</p>
</li>
<li>
<p>预览保存：再次确认已配置的规则并保存；</p>
</li>
</ol>
</div>
<div class="sect4">
<h5 id="integration_jobConfig_relationalDB">3.2.3.1. 关系型数据库</h5>
<div class="paragraph">
<p>DTinsightIDE支持MySQL、Oracle、SQLServer3种关系型数据库的数据同步，支持从从这几类数据库中读取/写入数据。</p>
</div>
<div class="sect5">
<h6 id="integration_jobConfig_relationalDB_read">3.2.3.1.1. 作为数据源</h6>
<div class="paragraph">
<p>关系型数据库作为数据源，需配置以下信息：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>选择数据源；</p>
</li>
<li>
<p>选择表；</p>
</li>
<li>
<p>数据过滤条件：针对源头数据筛选条件，根据指定的column、table、where条件拼接SQL进行数据抽取，暂时不支持limit关键字过滤。利用where条件可进行增量同步，具体说明如下：</p>
<div class="paragraph">
<p>增量导入在实际业务场景中，往往会选择当天的数据进行同步，通常需要编写where条件语句，请先确认表中描述增量字段（时间戳）为哪一个。如tableA增量的字段为create_time，则填写`create_time&gt;您需要的日期`，如果需要日期动态变化，可以填写`${bdp.system.bizdate}`、`${bdp.system.cyctime}`调度参数，关于调度参数的详细信息请参考<a href="#deve_batch_schedule_param_sys">系统参数</a>。</p>
</div>
</li>
<li>
<p>切分键：DTinsightIDE在进行数据抽取时，如果指定切分键，系统可以使用切分键的字段进行数据分片，数据同步因此会启动并发任务进行数据同步，这样可以大大提供数据同步的效能。</p>
<div class="ulist">
<ul>
<li>
<p>推荐将表的主键作为切分键，因为表主键通常情况下比较均匀，因此切分出来的分片也不容易出现数据热点。</p>
</li>
<li>
<p>目前DTinsightIDE目前支持MySQL数据库数值型切分键，支持Oracle数据库数值型、字符串类型切分键，不支持字符串、浮点、日期等其他类型，也不支持其他数据库。如果指定了不支持的类型，则忽略切分键功能，使用单通道进行同步。</p>
</li>
<li>
<p>如果不填写切分键，数据同步视作使用单通道同步该表数据 。</p>
</li>
<li>
<p>切分键的配置需要与第四步的“通道控制”联合使用，下面是典型的应用场景：</p>
<div class="paragraph">
<p>假设MySQL的tableA表中，有一个INT类型的字段名为id的主键，那么可以在切分键输入框中输入id字段，并在第四步的“作业并发数”中配置为5，则系统会产生5个并发线程同时读取MySQL表，每个任务会根据id字段的值进行数据切分，保证5个并发线程读取的数据是不同的，通过以上机制即可以加速数据读取的速度。</p>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>映射配置：</p>
<div class="ulist">
<ul>
<li>
<p>支持挑选部分字段进行导出。</p>
</li>
<li>
<p>支持字段换序，即字段可以不按照表schema信息顺序进行导出。</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="integration_jobConfig_relationalDB_write">3.2.3.1.2. 作为数据目标</h6>
<div class="paragraph">
<p>关系型数据库作为数据目标，需配置以下信息：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>选择数据同步目标；</p>
</li>
<li>
<p>选择表；</p>
</li>
<li>
<p>导入前、导入后准备语句：执行数据同步任务之前率先执行的SQL语句。目前向导模式只允许执行一条 SQL 语句，例如：清除旧数据。</p>
</li>
<li>
<p>主键冲突的处理：</p>
<div class="ulist">
<ul>
<li>
<p>replace into模式：<strong>目前只有MySQL数据库支持replace into模式</strong> 没有遇到主键/唯一性索引冲突时，与insert into行为一致，冲突时会用新行替换原有行所有字段；</p>
</li>
<li>
<p>insert into模式：当主键/唯一性索引冲突时会写不进去冲突的行，以脏数据的形式体现，脏数据的配置与管理请参考<a href="#datamang_dirtydata">脏数据管理</a>；</p>
</li>
</ul>
</div>
</li>
<li>
<p>映射配置：支持挑选部分字段进行写入。</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="integration_jobConfig_hive">3.2.3.2. Hive</h5>
<div class="sect5">
<h6 id="integration_jobConfig_hive_read">3.2.3.2.1. 作为数据源</h6>
<div class="ulist">
<ul>
<li>
<p>选择数据源；</p>
</li>
<li>
<p>选择表；</p>
</li>
<li>
<p>分区：读取数据所在的分区信息，支持直接填写分区名称，同时支持系统调度参数:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-SQL" data-lang="SQL">${bdp.system.premonth}
${bdp.system.cyctime}
${bdp.system.bizdate}
${bdp.system.currmonth}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="integration_jobConfig_hive_write">3.2.3.2.2. 作为数据目标</h6>
<div class="ulist">
<ul>
<li>
<p>选择数据源；</p>
</li>
<li>
<p>选择表；</p>
</li>
<li>
<p>分区：需要写入数据表的分区信息，必须指定到最后一级分区。例如把数据写入一个2级分区表，可以通过`pt=20180401/ds=abcdef`。其中pt是一级分区字段，ds是二级分区字段。</p>
<div class="ulist">
<ul>
<li>
<p>对于非分区表，该值务必不要填写，表示直接导入到目标表。</p>
</li>
<li>
<p>DTinsightIDE不支持数据路由写入，对于分区表请务必保证写入数据到最末一级分区。</p>
</li>
<li>
<p>分区的填写支持直接填写分区名称，同时支持系统调度参数:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-SQL" data-lang="SQL">${bdp.system.premonth}
${bdp.system.cyctime}
${bdp.system.bizdate}
${bdp.system.currmonth}</code></pre>
</div>
</div>
</li>
</ul>
</div>
</li>
<li>
<p>写入模式：
insert overwrite：写入前将清理已存在的数据文件，之后执行写入；
insert into：写入前已有的数据不会删除，系统会写入的新的文件；</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="integration_jobConfig_hdfs">3.2.3.3. HDFS</h5>
<div class="sect5">
<h6 id="integration_jobConfig_hdfs_read">3.2.3.3.1. 作为数据源</h6>
<div class="paragraph">
<p>HDFS作为数据源，需配置以下信息：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>选择数据源；</p>
</li>
<li>
<p>读取的HDFS文件路径：要读取的文件路径，多个路径可以用逗号隔开；</p>
</li>
<li>
<p>读取的HDFS文件类型：目前只支持用户配置为"text"、"orc" ，text表示textfile文件格式，orc表示orcfile文件格式；</p>
</li>
<li>
<p>编码格式：读取文件的编码配置，默认为UTF-8，还支持GBK；</p>
</li>
<li>
<p>分隔符：读取的字段分隔符。需要注意的是，读取textfile数据时，需要指定字段分割符（默认值\001），但在读取orcfile时，用户无需指定字段分割符；</p>
</li>
<li>
<p>映射配置：</p>
<div class="ulist">
<ul>
<li>
<p>支持挑选部分字段进行导出。</p>
</li>
<li>
<p>支持字段换序，即字段可以不按照表schema信息顺序进行导出。</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="integration_jobConfig_hdfs_write">3.2.3.3.2. 作为数据目标</h6>
<div class="ulist">
<ul>
<li>
<p>选择数据源；</p>
</li>
<li>
<p>输入HDFS文件路径：存储到Hadoop hdfs文件系统的路径信息，HdfsWriter会根据并发配置在此目录下写入多个文件。为与hive表关联，请填写hive表在hdfs上的存储路径。例：Hive上设置的数据仓库的存储路径为：/user/hive/warehouse/ ，已建立数据库：test，表：hello；则对应的存储路径为：/user/hive/warehouse/test.db/hello；</p>
</li>
<li>
<p>分隔符：写入时的字段分隔符,需要用户保证与创建的Hive表的字段分隔符一致，否则无法在Hive表中查到数据；</p>
</li>
<li>
<p>编码格式：默认为utf-8，请慎重修改；</p>
</li>
<li>
<p>文件名：写入时的文件名；</p>
</li>
<li>
<p>输入HDFS文件类型：目前只支持用户配置为"text"、"orc" ，text表示textfile文件格式，orc表示orcfile文件格式；</p>
</li>
<li>
<p>写入模式：写入前数据清理处理模式：append，追加；overwrite，覆盖；</p>
</li>
<li>
<p>映射配置：</p>
<div class="ulist">
<ul>
<li>
<p>支持挑选部分字段进行写入。</p>
</li>
<li>
<p>支持字段换序，即字段可以不按照表schema信息顺序进行写入。</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="integration_jobConfig_hbase">3.2.3.4. HBase</h5>
<div class="sect5">
<h6 id="integration_jobConfig_hbase_read">3.2.3.4.1. 作为数据源</h6>

</div>
<div class="sect5">
<h6 id="integration_jobConfig_hbase_write">3.2.3.4.2. 作为数据目标</h6>

</div>
</div>
<div class="sect4">
<h5 id="integration_jobConfig_channel">3.2.3.5. 通道控制</h5>
<div class="sect5">
<h6 id="integration_jobConfig_channel_speed">3.2.3.5.1. 同步速率与作业并发</h6>
<div class="ulist">
<ul>
<li>
<p><strong>作业速率上限</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>设置作业速率上限，则数据同步作业的总速率将尽可能按照这个上限进行同步，此参数需根据实际硬件配置调整，默认为1，可支持1-20MB/s的同步速度。</p>
</div>
<div class="paragraph">
<p>当数据量较大，且硬件配置较好时，可以提高作业速率上限，DTinsightIDE将会提高同步速度，使用较短的时间完成同步。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>作业并发数</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>作业速率上限=作业并发数*单作业的传输速率，当作业速率上限已定，选择的并发数越高则单并发的速率越低，同时所占用的内存会越高，这可以根据你的业务需求选择设定的值。</p>
</div>
<div class="paragraph">
<p>作业并发数下拉框选择对象，取决作业速率上限。作业速率上限选择值nMB/s，作业并发数最大能选择n</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
流量度量值是数据集成本身的度量值，不代表实际网卡流量，实际流量膨胀看具体的数据存储系统传输序列化情况。
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
关系型数据库设置作业速率上限和切分键才能根据作业速率上限将表进行切分，关系型数据库只支持数值型作为切分键，但Oracle数据库支持数值型和字符串类型作为切分键。
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="integration_jobConfig_channel_dirty">3.2.3.5.2. 错误数据处理</h6>
<div class="ulist">
<ul>
<li>
<p><strong>错误记录管理</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在数据同步任务中，可开启错误记录管理，开启后，任务会将数据同步过程中的错误数据写入指定的Hive表（可指定表名、生命周期）。</p>
</div>
<div class="paragraph">
<p>在数据同步任务的周期执行过程中，每个实例都会将脏数据写入一个分区，每个实例一个分区。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>脏数据数量控制</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>支持对于脏数据的自定义监控和告警，包括对脏数据最大记录数阈值，当传输过程出现的脏数据大于指定的数量，则报错退出。</p>
</div>
<div class="paragraph">
<p>支持对于脏数据占比的统计，当任务执行结束后系统统计脏数据占总的同步数据的占比，超过阈值时将任务置为失败。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
错误记录占比是数据同步实际执行结束后统计的，并不会在任务同步过程中统计。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="integration_jobConfig_version">3.2.3.6. 版本支持</h5>
<div class="paragraph">
<p>DTinsightIDE数据集成模块对不同数据库的版本支持情况如下表所示：</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">数据源类型</th>
<th class="tableblock halign-left valign-top">支持的版本</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">MySQL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.0及以上</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Oracle</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">11g及以上</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLServer</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">SQLServer 2008及以上</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Hive</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HDFS</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">ElasticSearch</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">HBase</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="integration_demo">3.2.4. 最佳实践</h4>
<div class="sect4">
<h5 id="integration_demo_mysqlhive">3.2.4.1. MySQL导入Hive</h5>

</div>
<div class="sect4">
<h5 id="integration_demo_hivemysql">3.2.4.2. Hive导入MySQL</h5>

</div>
<div class="sect4">
<h5 id="integration_demo_mysqlincre">3.2.4.3. MySQL数据库增量同步</h5>
<div class="paragraph">
<p>经<a href="#integration_dataSourceManagement">数据源管理</a>的数据源配置后，DTinsightIDE即可以从已配置的数据源中读取或写入数据。下面以MySQL&#8594;HDFS，并由DTinsightIDE访问HDFS中的数据为例，介绍操作流程：</p>
</div>
</div>
<div class="sect4">
<h5 id="integration_demo_mysqlhdfs">3.2.4.4. MySQL导入HDFS</h5>
<div class="paragraph">
<p>进入<a href="#deve_batch_develop">任务开发</a>模块，进行如下配置：</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><strong>数据来源：</strong> 类型选择MySQL，并选中刚刚配置的数据源`dataSourceExample`，选择其中的表`tableAge`，数据过滤规则、切分键不填写。</p>
</li>
<li>
<p><strong>选择目标：</strong> 类型选择HDFS，并选中刚刚配置的数据源`hdfsSourceExample`，其他配置参数为：</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p><strong>路径：</strong>需要填写的格式为`user/hive/warehouse/项目名称.db`。</p>
</li>
<li>
<p><strong>分隔符：</strong>用户自定义，或者不填写，不填写时，会采用HIVE默认的分隔符`\001`。</p>
</li>
<li>
<p><strong>编码：</strong>可选择UTF-8或GBK。</p>
</li>
<li>
<p><strong>文件名：</strong>这里实际上填写的是hive中的表名（本例子中填写为`tableNameAge`）。</p>
</li>
<li>
<p><strong>文件类型：</strong>支持TEXT和ORC类型。</p>
</li>
<li>
<p><strong>主键冲突规则：</strong>即执行数据同步时，若出现主键冲突，则报错或忽略。</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>字段映射：</strong> 通过映射的方式，将左右2侧的字段映射起来，用户可通过同名映射或同行映射快速配置。对于HDFS文件，可能出现无法读取字段的问题，用户需手动配置每个HDFS字段。</p>
</li>
<li>
<p><strong>配置调度周期与依赖关系：</strong>在右侧的任务面板中配置任务的生效日期、调度日期、起调时间、需依赖的上游任务、自依赖等信息，详细配置方式请参考<a href="#deve_batch_schedule">调度属性配置</a>。</p>
</li>
<li>
<p><strong>发布任务：</strong>确认任务信息无误后，提交执行，发布成功后，此任务不会立即执行，而是会在当天（或第二天）的22:00生成任务实例，待执行条件满足后才执行，如果需要数据同步任务立即执行，请参考<a href="#deve_batch_schedule">调度属性配置</a>中的<strong>补数据</strong>或<a href="#QA">常见问题</a>。</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="_执行数据同步任务">3.2.4.5. 执行数据同步任务</h5>
<div class="paragraph">
<p>任务提交成功后，为了立即执行，需在<a href="#maint_batch_jobmanage">任务管理</a>中设置<strong>补数据</strong>任务，即可立即进行数据同步。</p>
</div>
</div>
<div class="sect4">
<h5 id="_新建hive表_并读取数据">3.2.4.6. 新建hive表，并读取数据</h5>
<div class="paragraph">
<p>在<a href="#maint_batch_jobmanage">任务管理</a>模块中进行如下操作：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>点击<strong>新建表</strong>，建立<strong>内部表</strong>或<strong>外部表</strong>，内部表与外部表的区别请参考<a href="#QA">常见问题</a>。或点击<strong>DDL建表</strong>，通过SQL的形式建表。</p>
</li>
<li>
<p>新建表的表名，必须与<a href="#syncJobConfig_mysql-hdfs">[syncJobConfig_mysql-hdfs]</a>中的<strong>文件名</strong>对应，否则会导致无法关联到对应的文件，造成表中没有数据。</p>
</li>
<li>
<p>新建表的编码格式，路径等信息，也必须与<a href="#syncJobConfig_mysql-hdfs">[syncJobConfig_mysql-hdfs]</a>中的<strong>编码格式</strong>、<strong>路径</strong>对应起来，否则会造成无法关联到对应的文件，造成表中没有数据或编码错误。</p>
</li>
<li>
<p>新建表的字段信息，必须与数据同步任务中的字段对应，否则会造成无法关联到对应的文件。</p>
</li>
<li>
<p>建表成功后，即实现当前表与HDFS数据之间的关联，即可以在<a href="#jobDevelopment">[jobDevelopment]</a>中当前项目的任意一个SQL查询到数据。</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">新建hive表的注意事项</div>
<a href="#createTableAndReadData">[createTableAndReadData]</a>与<a href="#runSyncJob">[runSyncJob]</a>两个步骤不区分先后顺序，但数据同步任务时填写的<strong>路径</strong>、<strong>文件名</strong>、<strong>编码</strong>等参数需要与建hive表时的<strong>路径</strong>、<strong>表名</strong>、<strong>编码</strong>对应起来
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
在本例中，主键冲突规则的配置生效，是依赖于MySQL中`tableAge`的主键，
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="DataDevelopment">3.3. 数据开发</h3>
<div class="paragraph">
<p>数据开发页面包括实时任务开发与离线任务开发，任务开发模块是根据业务需求，设计数据计算流程并编码的模块。下面分为实时任务开发与离线任务开发2个模块分别介绍。</p>
</div>
<div class="sect3">
<h4 id="deve_batch">3.3.1. 离线任务开发</h4>
<div class="paragraph">
<p>离线任务开发模块主要是设计数据计算流程，并实现为多个相互依赖的任务，供调度系统自动执行的主要操作页面。</p>
</div>
<div class="paragraph">
<p><strong>对象</strong></p>
</div>
<div class="paragraph">
<p>在数据开发阶段，DTinsightIDE提供了4种对象：任务、脚本、资源和函数。它们之间的项目关系如下图所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/05_DTinsightIDEHelp_UserGuide_DataDevelopment-adee5.png" alt="05 DTinsightIDEHelp UserGuide DataDevelopment adee5">
</div>
</div>
<div class="paragraph">
<p>每个对象的说明如下：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>任务：数据开发的主要对象，包含周期属性和依赖关系，是数据计算的主要载体，支持多种类型的任务和节点适应不同场景，详情请参见<a href="#deve_batch_type">任务类型</a>。</p>
</li>
<li>
<p>脚本：数据开发的辅助对象，不包含周期属性和依赖关系，主要用于实现非周期的临时数据处理，如临时表的增删改等，详情请参见<a href="#deve_batch_script">脚本开发</a>。</p>
</li>
<li>
<p>函数和资源：任务中的代码运行时需要引用的一些文件和计算函数，在任务正式执行前需要上传，详情请参见<a href="#deve_batch_resource">资源管理</a>和<a href="#deve_batch_function">函数管理</a>。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>流程</strong></p>
</div>
<div class="paragraph">
<p>一个任务的开发和使用流程如下图所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/05_DTinsightIDEHelp_UserGuide_DataDevelopment-15f79.png" alt="05 DTinsightIDEHelp UserGuide DataDevelopment 15f79">
</div>
</div>
<div class="paragraph">
<p><strong>任务运行说明</strong></p>
</div>
<div class="paragraph">
<p>由流程的介绍可知，DTinsightIDE提供了3种运行方式，以使任务中的计算语句生效，适用场景和限制条件如下：</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 8.3333%;">
<col style="width: 8.3333%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 25%;">
<col style="width: 25.0002%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">操作</th>
<th class="tableblock halign-left valign-top">触发方式</th>
<th class="tableblock halign-left valign-top">运维中心是否有实例生成</th>
<th class="tableblock halign-left valign-top">调度属性情况</th>
<th class="tableblock halign-left valign-top">适用场景</th>
<th class="tableblock halign-left valign-top">特殊说明</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">页面直接运行</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">手动触发</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">否</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">不受调度周期和依赖关系影响</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">适用于代码调试阶段，无需保存提交</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">支持脚本和任务，但任务、脚本类型仅支持SQL1种</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">系统自动运行</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">系统触发</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">是</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">受调度周期和依赖关系影响</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">是使用DTinsightIDE实现数据自动计算的主要方式，需要运维人员在运维中心维护所有周期实例按序成功执行</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">仅支持任务，不支持脚本，且使用最新提交的版本</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">补数据运行</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">手动触发</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">是</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">受调度周期和依赖关系影响</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">是对系统自动运行方式的补充，部分任务由于新建或者出错，需要触发今天之前一段时间的数据计算时使用该功能</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">仅支持任务，且使用最新提交的版本</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="deve_batch_develop">3.3.1.1. 任务开发</h5>
<div class="paragraph">
<p>任务开发的过程实际上就是对表的操作过程，本节将从创建任务、创建表开始。</p>
</div>
<div class="sect5">
<h6 id="deve_batch_develop_create">3.3.1.1.1. 新建任务</h6>
<div class="paragraph">
<p>DTinsightIDE提供了5种任务类型，本节以创建SQL任务为例，介绍如何创建一个任务并编辑代码内容。更多任务类型的使用请参见<a href="#deve_batch_type">任务类型</a>。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>新建SQL任务</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>进入“数据开发”菜单，点击“新建离线任务”按钮，并填写新建任务弹出框中的配置项，配置项说明：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>任务名称：需输入英文字母、数字、下划线组成，不超过64个字符。</p>
</li>
<li>
<p>任务类型：可选择SQL、MR、数据同步、Python、虚节点。</p>
</li>
<li>
<p>存储位置：此任务在页面左侧的任务存储结构中的位置。</p>
</li>
<li>
<p>描述：此任务的描述，可输入长度不超过200个的任意字符。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>点击“保存”，弹窗关闭，即完成了新建任务，同时系统自动打开新建的SQL任务。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>编辑SQL任务代码</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>SQL任务创建好后，可以在代码编辑器中编写SQL语句（该SQL的语法为Hive SQL，与传统关系型数据库的SQL语法有所不同，详细的SQL编辑说明请
<a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual">Hive SQL的编码说明</a>）。</p>
</div>
<div class="paragraph">
<p>编写的SQL语句示例如下：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-SQL" data-lang="SQL">select * from bank_data;</code></pre>
</div>
</div>
<div class="paragraph">
<p>查询结果最多只展示1000条数据，DTinsightIDE不支持在页面上下载大量数据。</p>
</div>
<div class="paragraph">
<p>如果执行的是多个SQL语句，会根据顺序依次下发执行。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>配置节点任务的调度属性</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>DTinsightIDE提供了丰富的时间周期和依赖关系支持，并提供了基于时间的系统参数和自定义参数支持，请参考相应文档选择适合您业务需要的配置方式。</p>
</div>
<div class="paragraph">
<p>代码和参数配置调试完毕后，一个周期任务需要发布以后才会触发调度系统按配置周期定时产生运行实例并执行代码，提交任务的具体操作请参见<a href="#deve_batch_develop_release">发布任务</a>。</p>
</div>
<div class="paragraph">
<p>为使周期任务运行并在每次运行时适应上下文环境，需要配置时间周期和参数。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
由于节点任务有周期调度属性，因此内容建议以计算类语句为主，表操作语句建议使用可视化建表和脚本开发等其他功能来运行和维护。
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="deve_batch_develop_table">3.3.1.1.2. 创建表</h6>
<div class="paragraph">
<p>创建表有2种方式可视化建表和SQL建表。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>可视化建表</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>进入某个项目后，点击<strong>数据管理&gt;表管理</strong>，单击右上角的新建表，按照可视化建表页面进行操作，即可成功建表。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SQL建表</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>如果习惯编辑SQL语句，或希望一次运行多个建表语句，或需要修改表结构等，可通过SQL脚本进行脚本开发，详情请参见<a href="#deve_batch_script">脚本开发</a>。</p>
</div>
<div class="paragraph">
<p>新建一个类型为SQL的脚本文件，在编辑区填写任意SQL语句（包括新建或修改表的DDL语句）并单击直接运行。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
DTinsightIDE的建表语句与通用的Hive不同，建表时需要指定生命周期
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>下面是建表SQL代码的举例</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-SQL" data-lang="SQL">CREATE TABLE big_table2 (a string, b string) PARTITIONED BY (ds string) lifecycle 10;</code></pre>
</div>
</div>
<div class="paragraph">
<p>建表语法为：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-SQL" data-lang="SQL">CREATE [EXTERNAL] TABLE [IF NOT EXISTS] table_name [(col_name data_type [COMMENT col_comment], ...)] [COMMENT table_comment]
[PARTITIONED BY (col_name data_type [COMMENT col_comment], ...)]
[CLUSTERED BY (col_name, col_name, ...) [SORTED BY (col_name [ASC|DESC], ...)] INTO num_buckets BUCKETS]
[ROW FORMAT row_format]
[STORED AS file_format]
[LOCATION hdfs_path]
lifecycle N;</code></pre>
</div>
</div>
<div class="paragraph">
<p>其中lifecycle后面的N表示此表的生命周期有多少天。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>查看表</p>
<div class="paragraph">
<p>查看表的方式有两种：表查询和查找数据，详情如下：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>表查询：建表成功后，单击数据开发页面左侧导航栏的表查询，找到新建的表进行查询，详情请参见<a href="#deve_batch_tableview">表查询</a>。</p>
</li>
<li>
<p>查找数据：建表成功后，点击<strong>数据管理&gt;表管理</strong>，搜索表名，找到新建的表进行查询。</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="deve_batch_develop_run">3.3.1.1.3. 运行任务</h6>
<div class="paragraph">
<p>DTinsightIDE目前支持3种方式来使一个任务中的代码对数据生效：页面直接运行，系统自动周期运行和补数据运行。页面直接运行适用于代码调试修改，不考虑调度属性配置的情况，或者是不需要提交的直接运行的对象如<a href="#deve_batch_script">脚本开发</a>等。本文将以SQL节点任务为例，说明如何在代码编辑页面直接运行。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
仅SQL任务、脚本2种类型支持页面直接运行，其他类型不支持页面直接运行。
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>页面直接运行一个任务</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>单击一个SQL任务打开编辑区，选择想要执行的部分语句，然后在操作区单击<strong>运行</strong>按钮即可触发选定代码执行。如果不选择部分代码，而是直接单击<strong>运行</strong>，则会默认运行当前任务的全部代码。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>查看运行日志和结果</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>任务触发运行后，在编辑区下方会显示日志页，如果有语句的运行结果返回了数据集，则在日志页旁显示结果页，也支持结果下载。</p>
</div>
<div class="paragraph">
<p>无论运行几次，日志页只有一个，仅显示最近一次触发运行的日志信息，之前的日志会被覆盖。结果页可以存在多个，按语句执行顺序依次显示，最多可以显示20个结果页，方便您进行对比数据等操作。</p>
</div>
<div class="paragraph">
<p>多个语句触发执行时，这些语句将串行执行，日志内容依次显示在日志页中，结果则按每个语句的执行顺序分别显示在不同的结果页中。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
在页面上点击“运行”时，运行select语句时，页面最多可显示数据集的前1000条记录，故请控制每次查询产生的记录数。
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="deve_batch_develop_release">3.3.1.1.4. 发布任务</h6>
<div class="paragraph">
<p>提交任务操作，使得一个周期任务的代码和周期配置进入调度系统，从第二天开始，调度系统将根据该任务的周期配置每天生成实例并定时运行，直到该任务被删除，调度系统才会停止为该任务生成实例并运行。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
新增或修改任务时，如果当天22点00前提交成功，则在第二天的实例中即可看到结果；如果当天22点00后提交成功，则在第三天的实例中才会看到结果。
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
一个周期任务只有提交成功后才会进入调度系统，从而使得调度系统按配置周期定时产生实例并运行。
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>发布SQL任务</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>单击打开该任务，在右上角点击“发布”按钮，可输入发布的备注信息，点击“确定”。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>查看任务历史版本</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>发布任务之后，系统会产生一条版本记录，通过点击<strong>任务开发-任务属性-历史发布版本</strong>中查看发布的时间和备注信息的。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>对比任务版本</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在SQL任务的<strong>历史发布版本</strong>中，可以查看到曾经提交过的代码。选择查看提某个代码版本，点击<strong>代码</strong>，系统可对比当前代码与选中版本的代码的差别。</p>
</div>
</div>
<div class="sect5">
<h6 id="deve_batch_develop_frozen">3.3.1.1.5. 冻结任务</h6>
<div class="paragraph">
<p>如果需要让某个任务停止运行一段时间，可以在<strong>任务开发</strong>模块打开某任务，在右侧<strong>调度依赖</strong>面板中勾选<strong>冻结</strong>，表示此任务进入冻结状态</p>
</div>
<div class="ulist">
<ul>
<li>
<p>处于冻结状态的任务，其周期实例依然会生成，但不会运行。</p>
</li>
<li>
<p>对于存在依赖关系的多个任务，如果将上游任务A冻结，则下游任务B也会进入“冻结”状态，B任务的实例也会产生，但不会运行，在B任务的执行日志中会打印出是由于A任务被冻结才没有运行的。</p>
</li>
<li>
<p>周期任务的冻结，是第二天生效的，且冻结状态的任务，生成的实例也是冻结状态，不会直接运行，必须将实例解冻后再单击重跑，才会运行；如果需要紧急冻结任务，可以在周期实例中进行冻结操作。</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
依然可以对冻结状态的任务执行补数据，补数据实例会正常运行
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="deve_batch_develop_delete">3.3.1.1.6. 删除任务</h6>
<div class="paragraph">
<p>如果在编辑过程中想要放弃一个任务编辑版本，或者周期任务提交后想从调度系统中去掉该任务的自动运行，可以在左侧的任务面板中右键点击此任务，选择<strong>删除</strong>。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>如果此任务被其他任务依赖（是其他任务的上游任务），则此任务不能被删除，您需要先解除依赖关系再进行删除</p>
</li>
<li>
<p>任务删除后，已生成的任务实例不会被删除，但会运行失败</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="deve_batch_develop_search">3.3.1.1.7. 搜索任务</h6>
<div class="paragraph">
<p>当任务数量很多时，可以在左侧的<strong>任务管理</strong>面板中点击<strong>搜索任务</strong>，或按下Ctrl+P快捷键，通过输入任务名称并按下回车搜索并打开任务。</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="deve_batch_type">3.3.1.2. 任务类型</h5>
<div class="paragraph">
<p>DTinsightIDE提供了5种任务类型，分别适用于不同的使用场景：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>SQL任务</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>SQL任务支持您直接在Web端编辑和维护SQL代码，并可方便地调试运行和协作开发。DTinsightIDE还支持代码内容的版本管理和上下游依赖自动解析等功能，使用示例请参见<a href="#deve_stream_develop_create">新建任务</a>。</p>
</div>
<div class="paragraph">
<p>DTinsightIDE的SQL任务的代码内容遵循Hive的语法。Hive SQL的语法请参考
<a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual">Hive官方文档</a></p>
</div>
<div class="ulist">
<ul>
<li>
<p>MR任务</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>MR任务用于在Spark的MapReduce编程接口（Java API）基础上实现的数据处理程序的周期运行，详细的编码规则请参考
<a href="https://spark.apache.org/docs/latest/api/java/index.html">Spark Java API官方文档</a>。</p>
</div>
<div class="paragraph">
<p>DTinsightIDE完全按照Spark官方的编程接口，您可以将代码打包成为JAR类型的资源文件上传到DTinsightIDE中，然后配置MR任务。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>数据同步任务</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>数据同步任务主要完成数据在不同存储单元之间的迁移，详细的数据同步任务配置规范请参考<a href="#Integration">数据集成</a>模块。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Python任务</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Python任务用于在Spark的Python编程接口（Python API）基础上实现的数据处理程序的周期运行，详细的编码规则请参考
<a href="https://spark.apache.org/docs/latest/api/python/index.html">Spark Python API官方文档</a>。</p>
</div>
<div class="paragraph">
<p>DTinsightIDE完全按照Spark官方的编程接口，您可以将代码打包，并以资源文件的形式上传到DTinsightIDE中，然后配置Python任务。</p>
</div>
<div class="ulist">
<ul>
<li>
<p>虚节点任务</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>虚拟节点属于控制类型节点，它不产生任何数据的空跑节点，常用于多个任务统筹节点的根节点。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
多个任务中最终输出表有多个分支输入表，且这些输入表没有依赖关系时便经常用到虚拟节点。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>假设：输出表由3个数据同步任务导入的源表经过SQL任务加工产出，这3个数据同步任务没有依赖关系，SQL任务需要依赖3个同步任务，则任务依赖关系如下图所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/05_DTinsightIDEHelp_UserGuide_DataDevelopment-920c1.png" alt="05 DTinsightIDEHelp UserGuide DataDevelopment 920c1">
</div>
</div>
<div class="paragraph">
<p>用一个虚节点任务作为起始根节点，3个数据同步任务依赖虚节点，SQL加工任务依赖3个同步任务。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
虚节点任务没有日志信息：虚节点任务不会真正的执行，等到虚节点运行的时候，便会直接被置为成功，所以虚节点没有日志信息。
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="deve_batch_schedule">3.3.1.3. 调度属性配置</h5>
<div class="sect5">
<h6 id="deve_batch_schedule_cycle">3.3.1.3.1. 周期配置</h6>
<div class="paragraph">
<p>任务的时间属性目前支持月、周、天、小时和分钟5种配置方式，本文将分别介绍配置方式和调度系统中的实例运行情况。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
一个周期运行的任务，它的依赖关系的优先级大于时间属性。在时间属性决定的某个时间点到达时，任务实例不会马上运行，而是先检查上游是否全部运行成功。
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>上游依赖的实例没有全部运行成功<strong>并且</strong>定时运行时间已到，则实例不会运行。</p>
</li>
<li>
<p>上游依赖的实例全部运行成功<strong>并且</strong>定时运行时间还未到，则实例不会运行。</p>
</li>
<li>
<p>上游依赖的实例全部运行成功<strong>并且</strong>定时运行时间已到，则实例具备了运行的条件，待其获得集群的计算资源后即可以开始运行，集群资源的分配由Spark集群分配，用户不可干预。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>对于离线任务（包括SQL、MR、数据同步），可在“调度依赖”侧边栏，可配置此任务的调度周期等参数，具体包括如下内容：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>调度属性</strong><br>
调度属性的配置包括如下内容：此任务接受调度还是停止调度？此任务在什么时间生效？多长时间间隔运行一次？具体什么时候运行？具体包括：<br></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>调度状态<br>
选中“冻结”，表示此任务停止调度，不会进行实际的计算（通常此功能用于暂时不需要运行，但也不想删除的任务）；
若勾选“冻结”，任务每天仍会产生实例，但调度时会直接返回失败状态，不会真正运行任务逻辑。</p>
</li>
<li>
<p>生效日期：任务只在生效日期内执行；</p>
</li>
<li>
<p>调度周期：分为{天；周；月；小时；分钟}，若选中“天”，则表示此任务每天执行一次；</p>
</li>
<li>
<p>起调时间：用户设定调度周期后，还需要设定具体在哪个时刻点启动任务。根据用户选择的调度周期不同，起调时间需要配置不同的参数：</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 83.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">调度周期</th>
<th class="tableblock halign-left valign-top">起调时间配置</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">日</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>天调度任务，即每天自动运行一次。新建周期任务时，默认的时间周期为每天0点运行一次，可根据需要自行指定运行时间点，配置“具体时间”：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>小时：单选下拉列表，00-23，默认选中00</p>
</li>
<li>
<p>分钟：单选下拉列表，00-59，默认选中00</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">周</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>周调度任务，即每周的特定几天里每天在特定时间点自动运行一次，需配置“选择时间”和“具体时间”：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>选择时间：复选下拉列表{星期一；星期二；……星期日}，可复选，默认选中“星期一”；</p>
</li>
<li>
<p>具体时间：同“调度周期-日”相同；</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">月</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>月调度任务，即每月指定的特定几天里每天在特定时间点自动运行一次，需配置“选择时间”和“具体时间”：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>选择时间：复选下拉列表{每月最后一天；每月1号；每月2号；……每月31号}，可复选，默认选中“星期一”；</p>
</li>
<li>
<p>具体时间：同“调度周期-日”相同；</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">小时</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>小时调度任务，即每天指定的时间段内按N*1小时的时间间隔运行一次，比如每天1点到4点的时间段内，每1小时运行一次。当调度周期切换到非天级调度时，节点起调时间将不可选，需配置“开始时间”、“结束时间”和“间隔时间”：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>开始时间、结束时间：同“调度周期-日”类似，小时可选择00-23，分钟不可选，开始时间的分钟为0，结束时间的分钟为59；</p>
</li>
<li>
<p>间隔时间：单选下拉列表{1小时；2小时……23小时}，默认选中1小时；</p>
</li>
<li>
<p>开始时间，应早于结束时间，若不符合，需提示用户“开始时间应早于结束时间”；</p>
</li>
</ul>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">分钟</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>分钟调度任务，即每天指定的时间段内按N*指定分钟的时间间隔运行一次，目前能支持的最短时间间隔为每5分钟运行一次，当调度周期切换到非天级调度，节点起调时间将不可选，需配置“开始时间”、“结束时间”和“间隔时间”：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>开始时间、结束时间：同“调度周期-小时”相同；</p>
</li>
<li>
<p>间隔时间：单选下拉列表{5分钟；10分钟；……55分钟}，默认选中5分钟；</p>
</li>
<li>
<p>开始时间，应早于结束时间，若不符合，需提示用户“开始时间应早于结束时间”；</p>
</li>
</ul>
</div></div></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
按照小时周期调度时，时间周期按<strong>左闭右闭</strong>原则计算，比如配置为从0点到2:59点的时间段内，每隔1个小时运行一次，表明时间区间为[00:00，02:59]，间隔为1小时，调度系统将会每天生成3个实例，分别在0:00／1:00／2:00运行。
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>任务实例的生成</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>DTinsightIDE在每天22:00统一生成第二天所有需要的任务实例，基于以上设计，任务开发时需要注意任务的提交时间，这里以一个天周期调度任务A为例：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/05_DTinsightIDEHelp_UserGuide_DataDevelopment-4dc8e.png" alt="05 DTinsightIDEHelp UserGuide DataDevelopment 4dc8e">
</div>
</div>
<div class="paragraph">
<p>任务A基本信息：调度周期：1天；具体调度时间：8:00；<br>
1）若您在1月1日21:00提交A任务（时间轴上侧），DTinsightIDE会在当天22:00产生A任务的实例，并会在1月2日8:00第一次运行；<br>
2）若您在1月1日23:00提交A任务（时间轴下侧），由于DTinsightIDE已经在22:00产生了1月2日的所有实例，A任务在1月2日将不会运行。A任务的实例将会在1月2日22:00产生，并在1月3日第一次运行。</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong>任务被配置为冻结是否生成实例？</strong><br>
处于冻结状态的任务，其周期实例依然会生成，但不会运行。<br>
对于存在依赖关系的多个任务，如果将上游任务A冻结，则下游任务B也会进入“冻结”状态，B任务的实例也会产生，但不会运行，在B任务的执行日志中会打印出是由于A任务被冻结才没有运行的。
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong>任务被删除是否会影响实例的运行？</strong><br>
如果此任务被其他任务依赖（是其他任务的上游任务），则此任务不能被删除，您需要先解除依赖关系再进行删除<br>
任务删除后，已生成的任务实例不会被删除，但会运行失败
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<strong>想在每月的最后一天计算当月数据怎么办？</strong><br>
目前系统不支持配置 每月最后一天，因此如果时间周期选择每月31日，那么在有31日的月份会有一天调度，其他日期都是生成实例然后直接设为运行成功<br>
需要统计每个月的数据时，建议选择每月的1日运行，计算上个月的数据
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="deve_batch_schedule_param">3.3.1.3.2. 参数配置</h6>
<div class="paragraph">
<p>为使任务自动周期运行时能动态适配环境变化，DTinsightIDE提供了参数配置的功能。详细的参数配置如下表所示：</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 9.0909%;">
<col style="width: 45.4545%;">
<col style="width: 9.0909%;">
<col style="width: 36.3637%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">参数类型</th>
<th class="tableblock halign-left valign-top">设置方式</th>
<th class="tableblock halign-left valign-top">适用类型</th>
<th class="tableblock halign-left valign-top">参数编辑框示例</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">系统参数bdp.system.bizdate、bdp.system.cyctime、bdp.system.premonth、bdp.system.currmonth</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在调度系统中运行时，无须在编辑框设置，可直接在代码中引用${bdp.system.bizdate}、${bdp.system.cyctime}、${bdp.system.premonth}、${bdp.system.currmonth}， <strong>系统将自动替换这些参数的取值</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">全部任务类型，不支持脚本</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">无</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">自定义参数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在代码中引用${key1},${key2}， 然后在“参数”编辑框以如下方式设置key1=value1 key2=value2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">全部任务类型，不支持脚本</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">常量参数：param1=”abc” param2=1234；变量参数：param1=$[yyyymmdd], 结果将基于bdp.system.cyctime的取值计算</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">自定义参数</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">在代码中引用$1 $2 $3， 然后在“参数”编辑框以如下方式设置：value1 value2 value3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">全部任务类型，不支持脚本</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">常量参数：”abc” 1234； 变量参数：$[yyyymmdd], 结果将基于bdp.system.cyctime的取值计算</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
应用场景举例：某任务为每天调度一次，需要统计昨天的历史数据，那么可以在SQL或MR任务中添加业务日期变量，此变量需要随着系统时间而变化，即实现“今天的任务处理昨天的数据”。
</td>
</tr>
</table>
</div>
<div class="sect6">
<h7 id="deve_batch_schedule_param_sys">系统参数</h7>
<div class="paragraph">
<p>DTinsightIDE提供了4个系统参数，定义如下：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>${bdp.system.cyctime}：一个实例的定时运行时间，默认格式为：yyyyMMddHHmmss。</p>
</li>
<li>
<p>${bdp.system.bizdate}：一个实例计算时对应的业务日期，业务日期默认为定时运行日期的前一天，以yyyyMMdd的格式显示。</p>
</li>
<li>
<p>${bdp.system.currmonth}：一个实例的定时运行时间所在的月份，默认以yyyyMM的格式显示。</p>
</li>
<li>
<p>${bdp.system.premonth}：一个实例的定时运行时间的上一个月，以yyyyMM的格式显示。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>从定义可知，运行时间和业务日期有如下计算公式：<strong>运行时间=（业务日期+1）+定时时间</strong>。</p>
</div>
<div class="paragraph">
<p>若使用系统参数，无需在编辑框设置，直接在代码中引用${bdp.system.bizdate}和${bdp.system.cyctime}即可，系统将自动替换代码中对这两个参数的引用字段。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
一个周期任务的调度属性，配置的是运行时间的定时规律，因此可以根据实例的定时运行时间反推业务日期，从而得知每个实例中这两个参数的取值。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>入门示例</strong></p>
</div>
<div class="paragraph">
<p>假设存在一张分区表，以ds作为分区字段，有数据同步任务每天向这张表的一个新的分区写入数据，其分区名由业务日期命名，例如20180412。现需要每天对此表的数据做处理，但只需要处理
当前日期为2018年4月13日，查询此表在20180412分区的数据的SQL为：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-SQL" data-lang="SQL">select * from big_table2 where ds=${bdp.system.bizdate};</code></pre>
</div>
</div>
<div class="paragraph">
<p>此任务运行的日期为2018年4月13日，系统在运行时会将系统参数替换，实际执行的SQL为：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-SQL" data-lang="SQL">select * from big_table2 where ds=20180412;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
DTinsightIDE会将系统参数做简单替换，如果SQL中写为：ds=''${bdp.system.bizdate}''，则也会替换为ds=''20180412''
</td>
</tr>
</table>
</div>
</div>
<div class="sect6">
<h7 id="deve_batch_schedule_param_cust">自定义变量</h7>
<div class="paragraph">
<p>使用自定义参数的使用方式：需要先在代码中编辑${key1},${key2}，然后在<strong>任务参数</strong>面板中输入“key1=value1 key2=value2”方可生效。</p>
</div>
<div class="paragraph">
<p>其中，value的计算分为两种类型：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>常量：直接替换的字符串或数字，例如“key1=1234 key2=abcdefg”。</p>
</li>
<li>
<p>变量：基于bdp.system.cyctime取值计算出的取值，例如“key1=${yyyy}”表示按bdp.system.cyctime的值取年的部分作为结果替换该参数。关于bdp.system.cyctime的取值，请参见<a href="#deve_batch_schedule_param_sys">系统参数</a>的说明。</p>
</li>
<li>
<p><strong>变量的格式</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>变量的格式支持yyyyMMddHHmmss，其中MM表示月份，mm表示分钟，HH表示24小时制的小时</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
默认情况下，自定义变量参数的计算单位为天。例如$[HHmmss-N/24/60]表示(yyyyMMddHHmmss-(N/24/60 * 1天))的计算结果，然后按HHmmss的格式取时分秒。
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>SQL替换示例</strong>
设置一个SQL类型的任务，若在代码中使用一个自定义常量参数tablename和一个自定义变量参数ct，则可按如下步骤进行操作：</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在代码中引用自定义变量名。</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-SQL" data-lang="SQL">select * from ${tablename} where ds=${ct};</code></pre>
</div>
</div>
<div class="paragraph">
<p>在右侧的<strong>任务参数</strong>面板中自动会出现tablename和ct的输入表单，您直接在表单中输入表名：big_table2和分区名yyyyMMdd，且此任务的定时时间为2018年4月13日，那么系统将其替换为：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-SQL" data-lang="SQL">select * from big_table2 where ds=20180413;</code></pre>
</div>
</div>
<div class="paragraph">
<p>可供参考的变量参数配置方式如下：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>后N周：yyyyMMdd+7*N</p>
</li>
<li>
<p>前N周：yyyyMMdd-7*N</p>
</li>
<li>
<p>后N天：yyyyMMdd+N</p>
</li>
<li>
<p>前N天：yyyyMMdd-N</p>
</li>
<li>
<p>后N小时：HHmmss+N/24</p>
</li>
<li>
<p>前N小时：HHmmss-N/24</p>
</li>
<li>
<p>后N分钟：HHmmss+N/24/60</p>
</li>
<li>
<p>前N分钟：HHmmss-N/24/60</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect5">
<h6 id="deve_batch_schedule_rely">3.3.1.3.3. 依赖关系</h6>
<div class="paragraph">
<p>在调度配置中，会需要配置两个任务级别的依赖：任务间依赖和跨周期依赖。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>任务间依赖</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>若某任务B必须在任务A完成后运行，则A为B的上游任务，这种依赖关系可通过如下方式配置：在“上游任务”输入框，输入任务关键字，在列出的可选任务中选中某个任务，此任务被添加到上游任务列表中，即完成了A、B间的依赖关系配置。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
一个任务可以依赖多个上游任务，同样，一个任务可被多个任务依赖。依赖属性为非必填项，当下游任务需依赖上游任务产出数据，则可配置依赖关系。
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
上游任务失败后，下游任务不会运行，但其状态会被置为失败状态。
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>跨周期依赖</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>配置任务的跨周期依赖，如：天调度任务中，今天需要执行的数据依赖本任务昨天执行的数据，那么可以配置依赖昨天任务的周期，这样一来，昨天的实例必须先执行成功，今天的实例才可以调度起来，这种依赖主要是体现在任务调度实例的依赖。</p>
</div>
<div class="paragraph">
<p>跨周期依赖配置有两类：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>自依赖，等待上一调度周期结束，才能继续运行。应用场景：假设设定A任务每天1:00运行，设定为自依赖后，A任务在3月1日未运行成功，则在3月2日不会运行。</p>
</li>
<li>
<p>不依赖上一调度周期：所有任务默认选择该选项，即不依赖任何任务的上周期实例。若A任务在3月1日未运行成功，则在3月2日会产生新的实例并运行。</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
依赖属性配置的调度依赖是同周期依赖和跨周期依赖不冲突。任务A可以配置依赖属性依赖任务B，也可以配置跨周期依赖依赖B，如此任务A既依赖任务B，本周期也依赖任务B上周期。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="deve_batch_script">3.3.1.4. 脚本开发</h5>
<div class="paragraph">
<p>脚本文件是对周期任务的补充，通常用于辅助数据开发过程，主要用于实现非周期的临时数据处理，如临时表的增删改等，因此不包含周期属性和依赖关系。</p>
</div>
<div class="paragraph">
<p>脚本文件仅支持SQL类型，并且仅支持页面直接运行生效，不支持发布，主要使用流程如下图所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/05_DTinsightIDEHelp_UserGuide_DataDevelopment-22e7b.png" alt="05 DTinsightIDEHelp UserGuide DataDevelopment 22e7b">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>新建脚本</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>选中左侧的<strong>脚本管理</strong>面板，点击<strong>新建脚本</strong>按钮，填写新建脚本文件弹出框中的配置：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>脚本名称：需输入英文字母、数字、下划线组成，不超过20个字符。</p>
</li>
<li>
<p>任务类型：目前仅支持SQL类型的脚本，不支持其他类型脚本。</p>
</li>
<li>
<p>存储位置：此任务在页面左侧的任务存储结构中的位置。</p>
</li>
<li>
<p>描述：此任务的描述，可输入长度不超过200个的任意字符。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>脚本信息输入完毕后，单击<strong>确认</strong>，脚本文件创建成功。打开创建好的脚本文件，即可进行脚本编辑。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>编辑脚本</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>脚本文件通常用于实现非周期的临时数据处理，如临时表的增删改，一次性的数据初始化或查询任务等。脚本编辑完成后，单击<strong>保存</strong>，下次打开网页时即可看到最近一次保存的内容。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>运行代码</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>保存完毕后，可以选中部分代码单击<strong>运行</strong>。也可以不选中任何代码而直接<strong>运行</strong>，那么将运行全部代码。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>查看日志</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>任务触发运行后，在编辑区下方会显示日志页，如果有语句的运行结果返回了数据集，则在日志页旁显示结果页，也支持结果下载。</p>
</div>
<div class="paragraph">
<p>无论运行几次，日志页只有一个，仅显示最近一次触发运行的日志信息，之前的日志会被覆盖。结果页可以存在多个，按语句执行顺序依次显示，最多可以显示20个结果页，方便您进行对比数据等操作。</p>
</div>
<div class="paragraph">
<p>多个语句触发执行时，这些语句将<strong>串行</strong>执行，日志内容依次显示在日志页中。结果则按每个语句的执行顺序分别显示在不同的结果页中。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>删除脚本</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>右键单击选中的脚本，选择<strong>删除</strong>即可。</p>
</div>
</div>
<div class="sect4">
<h5 id="deve_batch_resource">3.3.1.5. 资源管理</h5>
<div class="paragraph">
<p>如果在代码或函数中需要使用.jar等资源文件，那么需要先将资源上传至该项目的项目空间下，然后在函数中进行引用。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
资源管理通常使用在UDF等自定义函数的场景中，因此可以将资源管理理解为函数管理的一个步骤。
</td>
</tr>
</table>
</div>
<div class="imageblock">
<div class="content">
<img src="images/05_DTinsightIDEHelp_UserGuide_DataDevelopment-36a4d.png" alt="05 DTinsightIDEHelp UserGuide DataDevelopment 36a4d">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>上传资源</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>上传资源：可上传jar/Python类型的资源，上传后资源会同步至DTinsightIDE中。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>资源名称：需输入英文字母、数字、下划线组成，不超过20个字符。</p>
</li>
<li>
<p>资源类型：目前仅支持jar或Python类型的资源，不支持其他类型资源。</p>
</li>
<li>
<p>存储位置：此资源在页面左侧的资源管理存储结构中的位置。</p>
</li>
<li>
<p>描述：此资源的描述，可输入长度不超过200个的任意字符。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>DTinsightIDE不支持批量上传资源，同时也请您注意上传资源的大小，超过100M的文件，无法上传。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>在函数中引用资源</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>如果现有的系统内置函数无法满足您的需求，DTinsightIDE支持创建自定义函数，实现个性化处理逻辑。将实现逻辑的Jar包上传至项目空间下，便可在创建自定义函数的时候进行引用。详细操作请参见<a href="#deve_batch_function_udf">创建自定义函数</a>。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>不支持在代码中引用资源</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>DTinsightIDE不支持在代码中引用资源，只支持在函数中引用资源。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>删除资源</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>如果需要删除一个资源，在资源管理中右键单击该资源，选择<strong>删除</strong>即可。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
删除资源后，引用该资源的函数或代码在运行时会报错，故请慎重操作。如有改动，尽量通知到依赖该资源的其他对象的负责人。
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="deve_batch_function">3.3.1.6. 函数管理</h5>
<div class="sect5">
<h6 id="deve_batch_function_apply">3.3.1.6.1. 函数的使用</h6>
<div class="paragraph">
<p>目前DTinsightIDE的工作对象大部分为SQL类型的脚本和任务。在编辑SQL类型的脚本和任务的代码时，常需要使用各种函数对数据做标准化处理。</p>
</div>
<div class="paragraph">
<p>函数管理，是DTinsightIDE提供的专用于对SQL 编辑时需要的系统函数和自定义函数进行管理的功能，在此页面可以进行新建目录、新建函数的操作。</p>
</div>
<div class="paragraph">
<p>函数管理模块下显示的全部函数，无论是系统默认的还是自定义函数，仅用于SQL类型的任务和脚本。</p>
</div>
<div class="paragraph">
<p>函数的应用场景如下图所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/05_DTinsightIDEHelp_UserGuide_DataDevelopment-9df7f.png" alt="05 DTinsightIDEHelp UserGuide DataDevelopment 9df7f">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>系统函数</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>系统默认提供以下几类系统函数，请根据需要，灵活选择系统函数来实现业务需求。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>日期函数</p>
</li>
<li>
<p>数学函数</p>
</li>
<li>
<p>字符函数</p>
</li>
<li>
<p>聚合函数</p>
<div class="ulist">
<ul>
<li>
<p><strong>新建自定义函数</strong></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>如果现有的系统函数无法满足需求，DTinsightIDE还支持您创建自定义函数，具体操作请参见<a href="#deve_batch_function_udf">创建自定义函数</a>。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>查看函数并在代码中引用</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>单击函数名，可以查看函数的类型、命令格式以及参数说明。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>删除函数</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在函数管理页面找到需要删除的函数，右键单击，在菜单栏选择<strong>删除</strong>，即可删除该函数。仅自定义函数可以被删除，系统函数无法被删除。</p>
</div>
</div>
<div class="sect5">
<h6 id="deve_batch_function_udf">3.3.1.6.2. 创建自定义函数</h6>
<div class="paragraph">
<p>用户自定义函数（User Defined Function，简称 UDF），是用户除了使用 DTinsightIDE提供的内建函数外，自行创建的函数，用于满足个性化的计算需求。自定义函数在使用上与普通的内建函数类似。</p>
</div>
<div class="paragraph">
<p>本文将通过实现字符小写转换功能的函数，说明用户自定义函数的创建过程，以及如何在DTinsightIDE中使用该函数，具体流程图如下所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/05_DTinsightIDEHelp_UserGuide_DataDevelopment-8ed73.png" alt="05 DTinsightIDEHelp UserGuide DataDevelopment 8ed73">
</div>
</div>
<div class="paragraph">
<p>操作步骤：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>在本地编写代码并编译为Jar包</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在本地Java环境中按照Spark的UDF框架编写Java代码实现函数，本示例的代码如下所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-java" data-lang="java">import org.apache.hadoop.hive.ql.exec.UDF;
import org.apache.spark.sql.api.java.UDF1;
public class HelloUDF extends UDF implements UDF1&lt;String, String&gt; {
    public String evaluate(String str){
        try{
            return "Helloworld" + str;
        }catch (Exception e){
            return null;
        }
    }
    @Override
    public String call(String s) throws Exception {
        return s;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>将以上代码编译成Jar包。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>上传资源到DTinsightIDE</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在<strong>任务开发模块</strong>，点击左侧的<strong>资源管理</strong>面板并上传资源文件。在目录树中选择一个文件夹，然后右键选择<strong>上传资源</strong>。</p>
</div>
<div class="paragraph">
<p>填写资源上传弹出框中的各配置项，提交后资源创建成功。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>新建自定义函数并引用资源</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>进入DTinsightIDE的<strong>数据开发</strong>模块，打开左侧的<strong>函数管理</strong>面板。在目录树中选择一个文件夹，然后右键选择<strong>新建函数</strong>，填写弹出框中的各配置项。</p>
</div>
<div class="paragraph">
<p>填写完成后，提交后函数创建成功。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>在SQL任务或脚本中使用函数</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在DTinsightIDE的数据开发页面新建一个SQL任务，创建成功后在代码编辑器中编写SQL语句，如下所示：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-SQL" data-lang="SQL">select evaluate("A")  from dual;</code></pre>
</div>
</div>
<div class="paragraph">
<p>单击<strong>运行</strong>，即可查看结果。</p>
</div>
<div class="paragraph">
<p>此时，您已经完成自定义函数的创建和使用，并在SQL任务中看到使用效果。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
这里的dual是创建的临时表，您可根据自身需求创建表，建表语句请参见<a href="#deve_batch_develop_table">创建表</a>。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="deve_batch_tableview">3.3.1.7. 表查询</h5>
<div class="paragraph">
<p>在<strong>数据开发</strong>页面，表查询模块下，默认会展示当前项目的表。单击表名，即可看到表的列信息、分区信息以及数据预览。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
表查询中不支持新建目录，将表放到目录下分类。
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
数据预览的数据是实时的。
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="deve_batch_loadlocaldata">3.3.1.8. 导入本地数据</h5>
<div class="paragraph">
<p>DTinsightIDE支持将保存在本地的文本文件中的数据上传到项目空间的表中。</p>
</div>
<div class="paragraph">
<p>本地文本文件上传的限制如下：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>文件类型：仅支持.txt、.csv和.log格式。</p>
</li>
<li>
<p>文件大小：不超过100M。</p>
</li>
<li>
<p>操作对象：导入分区表时，分区不允许为中文。</p>
<div class="ulist">
<ul>
<li>
<p><strong>操作步骤</strong></p>
</li>
</ul>
</div>
</li>
<li>
<p>单击<strong>导入</strong>，选择<strong>导入本地数据</strong>。</p>
</li>
<li>
<p>选择本地数据文件，配置导入信息，单击<strong>下一步</strong>。</p>
</li>
<li>
<p>如果导入数据的表已存在，搜索表名即可。</p>
</li>
<li>
<p>如果没有创建导入数据的表，则可以单击<strong>去新建表</strong>，输入建表语句后，单击<strong>确认</strong>。</p>
</li>
<li>
<p>选择导入数据的表名后，选择字段匹配方式（按位置匹配或按名称匹配）。选择按位置匹配以后，如果是分区表，则会提示分区的选择，同时可以点击<strong>检测</strong>按钮，测试分区是否存在，检测后单击<strong>导入</strong>。</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect3">
<h4 id="deve_stream">3.3.2. 实时任务开发</h4>
<div class="paragraph">
<p>实时任务的开发包括实时任务创建、基于SQL的实时任务开发和基于MR的实时任务开发3大部分。本节首先对实时任务进行简要介绍，并对利用DTinsightIDE进行实时任务开发进行说明。</p>
</div>
<div class="sect4">
<h5 id="deve_stream_intro">3.3.2.1. 实时任务简介</h5>
<div class="paragraph">
<p>在大数据开发领域，通常根据数据的不同性质，将任务划分为实时计算与离线计算，以温度传感器的场景举例：</p>
</div>
<div class="paragraph">
<p>例如：某城市安装了大量的温度传感器，每个传感器每隔1min上传一次采集到的温度信息，由气象中心统一汇总，每隔10min更新一次各个地区的温度，这些数据是一直源源不断的产生的，且不会停止。实时计算就主要用于“数据源源不断的产生，而且不会停止，需要以最小的延迟获得计算结果”的场景</p>
</div>
</div>
<div class="sect4">
<h5 id="deve_stream_datainput">3.3.2.2. 支持的数据源</h5>
<div class="paragraph">
<p>在实时任务中，DTinsightIDE目前只支持以<strong>kafka</strong>作为数据源，用户只需要在SQL或MR任务中设定kafka地址、分区等信息即可读取数据进行计算。</p>
</div>
<div class="paragraph">
<p><strong>对象</strong></p>
</div>
<div class="paragraph">
<p>在实时任务开发阶段，DTinsightIDE提供了3种对象：任务、资源和函数。它们之间的项目关系如下图所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/05_DTinsightIDEHelp_UserGuide_DataDevelopment-a4103.png" alt="05 DTinsightIDEHelp UserGuide DataDevelopment a4103">
</div>
</div>
<div class="paragraph">
<p>每个对象的说明如下：</p>
</div>
<div class="ulist">
<ul>
<li>
<p>任务：数据开发的主要对象，是数据计算的主要载体，只支持SQL和MR2种。</p>
</li>
<li>
<p>函数和资源：任务中的代码运行时需要引用的一些文件和计算函数，在任务正式执行前需要上传，使用方式与离线计算类似，详情请参考<a href="#deve_batch">离线任务开发</a>。</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>流程</strong></p>
</div>
<div class="paragraph">
<p>一个任务的开发和使用流程如下图所示：</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/05_DTinsightIDEHelp_UserGuide_DataDevelopment-6971e.png" alt="05 DTinsightIDEHelp UserGuide DataDevelopment 6971e">
</div>
</div>
</div>
<div class="sect4">
<h5 id="deve_stream_develop">3.3.2.3. 任务开发</h5>
<div class="paragraph">
<p>任务开发的过程与离线任务非常类似，下面仅做简要介绍。</p>
</div>
<div class="sect5">
<h6 id="deve_stream_develop_create">3.3.2.3.1. 新建任务</h6>
<div class="paragraph">
<p>DTinsightIDE在实时任务处理上提供了2种任务类型，本节以创建SQL任务为例，介绍如何创建一个任务并编辑代码内容。更多任务类型的使用请参见<a href="#deve_batch_type">任务类型</a>。</p>
</div>
<div class="paragraph">
<p>进入<strong>数据开发</strong>菜单，点击<strong>新建实时任务</strong>按钮，并填写新建任务弹出框中的配置项，配置项说明：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>任务名称：需输入英文字母、数字、下划线组成，不超过64个字符。</p>
</li>
<li>
<p>任务类型：可选择SQL、MR。</p>
</li>
<li>
<p>资源：在资源管理中上传的Jar包，用于SQL任务的自定义函数或MR任务。</p>
</li>
<li>
<p>mainClass（仅用于MR任务）：MR任务中的main类名称。</p>
</li>
<li>
<p>参数（仅用于MR任务）：MR任务中的main类的参数。</p>
</li>
<li>
<p>存储位置：此任务在页面左侧的任务存储结构中的位置。</p>
</li>
<li>
<p>描述：此任务的描述，可输入长度不超过200个的任意字符。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>点击“保存”，弹窗关闭，即完成了新建任务，同时系统自动打开新建的SQL任务。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
DTinsightIDE不支持SQL任务对2条或多条流式数据进行JOIN处理，如果需要对流数据进行JOIN处理，需要在本地编写Java代码并上传至DTinsightIDE执行。
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="deve_stream_develop_process">3.3.2.3.2. 实时任务的处理流程</h6>
<div class="imageblock">
<div class="content">
<img src="images/05_DTinsightIDEHelp_UserGuide_DataDevelopment-8d819.png" alt="05 DTinsightIDEHelp UserGuide DataDevelopment 8d819">
</div>
</div>
<div class="paragraph">
<p>如上图所示，实时任务的处理流程通常分3步，前2步建立好数据源与数据目标，之后再写数据计算的逻辑，完成对流式数据的分析处理。</p>
</div>
</div>
<div class="sect5">
<h6 id="deve_stream_develop_sql">3.3.2.3.3. SQL任务开发</h6>
<div class="paragraph">
<p>由于基于Flink作为计算引擎，DTinsightIDE支持对流式数据通过SQL代码进行处理，您只需要在页面中编辑SQL代码即可对流式数据进行清洗和计算。下面进行具体描述：</p>
</div>
<div class="paragraph">
<p>SQL任务创建好后，可以在代码编辑器中编写SQL语句（该SQL的语法为Flink SQL，与传统关系型数据库的SQL语法有所不同，详细的SQL编辑说明请
<a href="https://ci.apache.org/projects/flink/flink-docs-release-1.3/dev/table/sql.html">Flink SQL的编码说明</a>）。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
本版本的DTinsightIDE可以同时支持Flink1.2或Flink1.3版本，具体版本型号请线下咨询。需注意编码规范需符合对应版本的Flink SQL编码规则，版本不一致可能会导致任务失败。
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>添加数据源</strong></p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-SQL" data-lang="SQL">CREATE SOURCE TABLE TableName(colName STRING……)
WITH (type='KAFKA09',
bootstrapServers='172.16.1.151:9092',
offsetReset='earliest',
topic='nbTest'
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>参数说明：</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">参数名</th>
<th class="tableblock halign-left valign-top">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TableName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">表名，Flink从kafka中读取的数据将“存储”为此表，用户可以在Flink中访问该表处理数据。TableName后面括号中的colName STRING分别为此表中的字段名和字段类型。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">表示数据源类型，只能填写为“KAFKA09”。DTinsightIDE目前仅支持kafka作为实时计算的数据源。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">bootstrapServers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">访问kafka的host地址和端口号。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">offsetReset</p></td>
<td class="tableblock halign-left valign-top"><div><div class="paragraph">
<p>枚举值，可选择earliest或latest。
1、earliest：使用kafka的offset的开始位置。
2、latest：使用kafka offset的最新位置。</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">topic</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">kafka的topic名称。</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p><strong>添加数据目标</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>DTinsightIDE实时计算引擎支持通过SQL的形式直接将数据输出到MySQL，只需在SQL中添加如下语句：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-SQL" data-lang="SQL">CREATE RESULT TABLE TableName(colName STRING……)
WITH (type='mysql',
dbURL='jdbc:mysql://172.16.1.203:3306/nb',
userName='dtstack_xc',
password='dtstack_xc',
tableName='pv'
);</code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">参数名</th>
<th class="tableblock halign-left valign-top">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TableName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Flink中的表名，Flink将此表中的数据传输至MySQL数据。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">表示数据源类型，只能填写为“mysql”。DTinsightIDE目前仅支持MySQL作为实时计算的数据输出对象。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">dbURL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">连接此数据库的连接URL。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">userName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">目标数据库的用户名。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">目标数据库的密码。</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">tableName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">目标数据库中的表，Flink将TableName中数据输出至此表。</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
本版本的DTinsightIDE仅支持以MySQL作为流式计算的数据输出目标数据库。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect4">
<h5 id="deve_stream_resource">3.3.2.4. 资源管理</h5>
<div class="paragraph">
<p>如果在代码或函数中需要使用.jar等资源文件，那么需要先将资源上传至该项目的项目空间下，然后在函数中进行引用。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
资源管理通常使用在UDF等自定义函数的场景中，因此可以将资源管理理解为函数管理的一个步骤。
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>上传资源</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>实时任务上传资源的操作与离线任务类似，不再赘述。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>删除资源</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>如果需要删除一个资源，在资源管理中右键单击该资源，选择<strong>删除</strong>即可。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
删除资源后，引用该资源的函数或代码在运行时会报错，故请慎重操作。如有改动，尽量通知到依赖该资源的其他对象的负责人。
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="deve_stream_function">3.3.2.5. 函数管理</h5>
<div class="sect5">
<h6 id="deve_stream_function_apply">3.3.2.5.1. 函数的使用</h6>
<div class="ulist">
<ul>
<li>
<p><strong>系统函数</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>系统默认提供以下几类系统函数，请根据需要，灵活选择系统函数来实现业务需求。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>日期函数</p>
</li>
<li>
<p>数学函数</p>
</li>
<li>
<p>字符函数</p>
</li>
<li>
<p>聚合函数</p>
<div class="ulist">
<ul>
<li>
<p><strong>新建自定义函数</strong></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>如果现有的系统函数无法满足需求，DTinsightIDE还支持您创建自定义函数，具体操作请参见<a href="#deve_batch_function_udf">创建自定义函数</a>。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>查看函数并在代码中引用</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>单击函数名，可以查看函数的类型、命令格式以及参数说明。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>删除函数</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>在函数管理页面找到需要删除的函数，右键单击，在菜单栏选择<strong>删除</strong>，即可删除该函数。仅自定义函数可以被删除，系统函数无法被删除。</p>
</div>
</div>
<div class="sect5">
<h6 id="deve_stream_function_udf">3.3.2.5.2. 创建自定义函数</h6>
<div class="paragraph">
<p>用户自定义函数（User Defined Function，简称 UDF），是用户除了使用 DTinsightIDE提供的内建函数外，自行创建的函数，用于满足个性化的计算需求。自定义函数在使用上与普通的内建函数类似。</p>
</div>
<div class="paragraph">
<p>本文将通过实现字符小写转换功能的函数，说明用户自定义函数的创建过程，以及如何在DTinsightIDE中使用该函数，具体流程图与离线任务类似，不再赘述。下面重点描述UDF在DTinsightIDE的SQL任务中的引用方式：</p>
</div>
<div class="paragraph">
<p>创建UDF分为2步，首先进行Jar包的加载，之后进行UDF注册。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Step1：加载Jar包</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>用户需首先使用Eclipse等工具完成UDF逻辑的编写，并通过编译输出Jar包，加载Jar包只需在SQL中添加如下语句：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-SQL" data-lang="SQL">ADD JAR WITH
hdfs://172.16.10.135:9000/rdos/stream/7_clientSource_sofa-1.0-SNAPSHOT.Jar;</code></pre>
</div>
</div>
<div class="paragraph">
<p>参数说明：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>hdfs://hdfs路径，Flink引擎将从指定的路径中加载Jar包。</p>
<div class="ulist">
<ul>
<li>
<p><strong>Step2：注册UDF</strong></p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>完成Jar包加载后，还需要进行UDF的注册，只需在SQL中添加如下语句：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-SQL" data-lang="SQL">CREATE (TABLE|SCALA) FUNCTION functionName WITH
className</code></pre>
</div>
</div>
<div class="paragraph">
<p>参数说明：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>TABLE:TABLE类型UDF，将零个，一个或多个标量值作为输入参数。不同于SCALA UDF，TABLE UDF可以返回任意数量的行作为输出，而不是单个值。返回的行可以由一个或多个列组成。</p>
</li>
<li>
<p>SCALA	SCALA类型UDF，将零个，一个或多个标量值映射到一个新的标量值。</p>
</li>
<li>
<p>functionName：UDF的函数名。</p>
</li>
<li>
<p>className：Jar包中的类名。</p>
</li>
</ol>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="Maintenance">3.4. 运维中心</h3>
<div class="sect3">
<h4 id="maint_cent_summary">3.4.1. 运维中心概览</h4>
<div class="paragraph">
<p>运维中心有以下四个模块：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>运维概览</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>运维概览主要是对任务运行情况的报表展示。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>任务列表</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>任务列表主要展示了您已经发布到调度系统的全部任务。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>任务运维</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>任务运维主要展示了任务提交到调度系统后，经过调度系统/补数据触发运行后生产实例的展示列表，主要有周期实例、补数据实例2个模块。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>报警</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>报警主要是对任务运行情况的监控，若被监控的任务未运行或运行失败，您将会收到提示信息，主要有监控记录和监控设置2个模块。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>任务列表和任务运维的区别</strong></p>
</li>
</ul>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>任务列表：存放的是发布到调度系统的任务</p>
</li>
<li>
<p>任务运维：存放的是所提交任务生成的实例</p>
</li>
</ol>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>应用场景</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>运维中心是对任务和实例展示/操作的地方。您可以在任务列表中看到您全部的任务，可以对展示的任务进行测试、补数据、添加报警等操作。在任务运维中，您可以看到您所有任务的实例，可以对展示的实例进行终止、重跑等操作。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
已发布的任务经过调度系统、手动触发运行后会生成一个或多个实例。实例代表了某个任务在某时某刻执行的一个快照，实例中会有任务的运行时间、运行状态、运行日志等信息。
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="maint_summary">3.4.2. 运维概览</h4>
<div class="paragraph">
<p>运维概览是进入运维中心后最先看到的页面，此页面将以图表的方式展示当前项目空间下实时任务、离线任务（周期性调度）的整体运行情况。</p>
</div>
<div class="paragraph">
<p>运维中心概览主要包括实时任务统计、离线任务统计、离线任务今日执行情况、离线任务执行时长排行和近一个月出错排行4个模块。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>实时任务统计</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>统计系统中不同状态的实时任务数量。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>离线任务统计</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>统计系统中不同状态的离线任务数量，离线任务的状态请参考本节后面的描述。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>离线任务执行概览</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>离线任务实例执行概览模块主要针对正常周期性调度今天、昨天与历史平均水平的任务完成情况进行对比统计，如果3条曲线偏移过多，则表示在某个时间段内有异常情况出现，需进行进一步的检查与分析。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
此处仅统计已完成状态的任务实例。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>折线统计图以三种不同颜色折线显示对当天00:00~24:00时间段内，当前项目空间中所有类型任务完成进度的统计，包括今天的任务完成情况、昨天的任务完成情况和历史平均水平的完成情况。主要对实例执行的情况进行报表展示。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>任务节点执行时长TOP10</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>任务节点执行时长排行模块展示某一天中所有实例的执行时长排行，包括周期任务实例和补数据实例，同时也包括各种不同状态的任务实例，只展示TOP10。</p>
</div>
<div class="paragraph">
<p>支持选择某一天进行查看，选中的是实例的运行时间，不是业务日期。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
单击任务名，即可直接跳转到任务编辑页面。
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>近一个月出错TOP10</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>近一个月出错排行模块展示近一个月的出错任务排行榜，只展示TOP10。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
单击任务名，即可直接跳转到任务编辑页面。
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="maint_batch">3.4.3. 离线任务运维</h4>
<div class="paragraph">
<p>离线任务的运维包括2大部分：任务管理、任务运维。任务管理模块中显示所有离线任务的信息，并可进行补数据操作。任务运维模块中显示所有离线任务实例的运行状态、可查看任务运行日志、查看任务上下游依赖关系，同时可以对任务状态进行切换。</p>
</div>
<div class="sect4">
<h5 id="maint_batch_jobmanage">3.4.3.1. 任务管理</h5>
<div class="ulist">
<ul>
<li>
<p><strong>周期任务列表</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>点击<strong>运维中心</strong>左侧菜单中的<strong>离线任务运维&#8594;任务管理</strong>，可查看离线任务列表，包括任务名称、调度周期、任务类型、责任人、调度生效周期、具体调度时间、最近修改时间等信息。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
任务提交后，将会在第二天22:00自动生成实例来运行任务，若是在22:00以后提交的任务，则第三天才会开始生成实例来自动运行任务。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>支持筛选条件过滤出要查询的任务。可根据任务名称、责任人、今日修改的任务、冻结状态、任务类型等条件精确筛选。</p>
</div>
<div class="paragraph">
<p>任务类型在筛选时分为5种，分别是SQL、MR、数据同步、Python、虚节点。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
任务名搜索的结果，会受到其他筛选条件的影响，只有同时满足所有筛选条件的结果才会展示出来。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>操作</strong>：支持对任务进行补数据、修改等操作。</p>
</div>
<div class="paragraph">
<p>修改：点击<strong>修改</strong>按钮后，页面会进入此任务的编辑页面。</p>
</div>
<div class="paragraph">
<p>补数据：点击<strong>补数据</strong>按钮后，在弹窗中填写如下信息：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>补数据名称；</p>
</li>
<li>
<p>业务日期：选择业务日期的开始日期、结束日期；</p>
</li>
<li>
<p>选定任务：在列出的各任务中选定需要进行补数据的任务；</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>点击“运行选中任务”后，系统会提示“补数据任务已在执行中，点击下方按钮查看结果”，点击后，可以在任务运维页面的“补数据”标签页内查看补数据任务的运行情况。</p>
</div>
<div class="paragraph">
<p><strong>批量操作</strong>：支持批量选择任务，进行冻结、解冻操作。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
周期任务的冻结，是第二天生效的，且冻结状态的任务，生成的实例也是冻结状态，不会直接运行，必须将实例解冻后再单击重跑，才会运行；如果需要紧急冻结任务，可以在周期实例中进行冻结操作。
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
冻结的任务生成的测试/补数据实例也会是冻结状态，只有解冻以后任务才会开始运行。
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>任务DAG图</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>若想看某个任务的详细信息，可直接在任务列表中单击任务名，会从右侧弹出一个任务信息面板，包含任务的DAG图和运行报告。</p>
</div>
<div class="paragraph">
<p>在DAG图中可以选择具体任务的依赖关系和发布信息。</p>
</div>
<div class="paragraph">
<p>右键单击工作流/内部节点，可以选择补数据、查看代码、冻结、解冻、查看实例等操作。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>运行报告</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>运行报告中显示此任务在最近一段时间内的执行时长分析，支持切换最近7次、最近30次、最近60次。</p>
</div>
<div class="paragraph">
<p>如果是数据同步任务还会统计读取数据量和脏数据的产生情况，图表中同时列出执行时长、读取数据量、脏数据量3组数据，方便观察数据同步任务在近一段时间内的执行情况，评估此任务是否由于数据量过大造成执行时间越来越长？数据量不变，但执行时间突变，是否是由于代码进行了调整？很多任务都出现执行时间越来越长，是否是由于数据量变大？还是因为集群资源不够？</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
统计图中的最近次数，其中包括了补数据的信息
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="maint_batch_jobstatus">3.4.3.2. 实例的状态转换</h5>
<div class="imageblock">
<div class="content">
<img src="images/06_DTinsightIDEHelp_UserGuide_Maintenance-e5c45.png" alt="06 DTinsightIDEHelp UserGuide Maintenance e5c45">
</div>
</div>
<div class="paragraph">
<p>如上图所示：从周期实例的产生到不同状态的转换链路比较长，且用户的<strong>杀任务</strong>、<strong>冻结</strong>等操作都会对任务实例的状态产生影响。</p>
</div>
</div>
<div class="sect4">
<h5 id="maint_batch_jobcycle">3.4.3.3. 周期实例</h5>
<div class="ulist">
<ul>
<li>
<p><strong>实例列表</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>点击<strong>运维中心</strong>左侧菜单中的<strong>离线任务&#8594;周期实例</strong>，可查看离线任务实例列表，包括任务名称、调度周期、任务类型、业务日期、调度时间、任务实例创建时间、任务实例执行的开始时间、结束时间、运行时长、运行状态等信息。</p>
</div>
<div class="paragraph">
<p>任务实例列表还可以根据业务日期、责任人、任务名称、状态进行搜索和筛选。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>实例DAG图</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>若想看某个任务实例的详细信息，可直接在任务实例列表中单击任务名，会从右侧弹出一个实例信息面板，包含实例的DAG图。</p>
</div>
<div class="paragraph">
<p>在DAG图中可以选择具体任务实例的依赖关系和发布信息。</p>
</div>
<div class="paragraph">
<p>右键单击任务，可以选择展开上下游、查看日志、查看任务属性、终止、刷新任务实例、重跑并恢复调度、置成功并恢复调度、重跑下游并恢复调度等操作。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>展开上游（6层）：点击后，直接展开选中任务的6层上游任务；</p>
</li>
<li>
<p>展开下游（6层）：类似“展开上游（6层）”；</p>
</li>
<li>
<p>查看任务日志：点击后，进入离线任务日志查看页面；</p>
</li>
<li>
<p>编辑任务：点击后，进入离线任务编辑页面；</p>
</li>
<li>
<p>查看任务属性：点击后，弹出任务属性弹窗，弹窗中包括任务名称、任务ID等属性信息；</p>
</li>
<li>
<p>终止：即手动杀任务的功能，点击后，本依赖关系图刷新任务状态；</p>
</li>
<li>
<p>刷新任务实例：点击后，刷新页面显示的所有任务实例，本依赖关系图刷新任务状态；</p>
</li>
<li>
<p>重跑并恢复调度：点击后，执行重跑，并恢复任务调度，本依赖关系图刷新任务状态；</p>
</li>
<li>
<p>置成功并恢复调度：点击后，强制将此设置为成功执行（状态为：手动设置成功），并恢复本任务的调度；</p>
</li>
<li>
<p>重跑下游并恢复调度：点击后，对下游任务进行重跑，并恢复任务调度，本依赖关系图刷新任务状态；</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>对于右键菜单中的6~9项操作，不同的任务状态可进行不同的操作：</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 20%;">
<col style="width: 80%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">任务状态</th>
<th class="tableblock halign-left valign-top">可进行的操作</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">未运行</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">重跑任务</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">运行中</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">杀任务</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">成功</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">跑任务</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">失败</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">跑任务、置成功并恢复调度</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
周期任务的冻结，是第二天生效的，且冻结状态的任务，生成的实例也是冻结状态，不会直接运行，必须将实例解冻后再单击重跑，才会运行。
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>批量操作</strong>：支持批量选择任务，进行批量杀任务、重跑当前及下游任务操作。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
选中某个任务实例，点击“重跑当前及下游任务”时，是重跑您选择的任务实例，同时系统根据此任务的下游依赖关系，将下游任务实例一并重跑。
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
“冻结”操作的状态不会作用于补数据实例
</td>
</tr>
</table>
</div>
</div>
<div class="sect4">
<h5 id="maint_batch_jobrerun">3.4.3.4. 补数据实例</h5>
<div class="paragraph">
<p>周期任务进行补数据时产生的实例，即为补数据实例，可对已调度起的实例任务进行运维管理，如查看运行状态，对任务进行终止、重跑、解冻等操作。</p>
</div>
<div class="paragraph">
<p>由于补数据是对一批数据的多个业务日期执行操作，查看补数据实例需要有<strong>2层</strong>操作，第一层是补数据列表，每执行一次补数据就会产生一条记录；第二层是补数据实例列表，表示这次补数据中产生的每个实例的运行情况；</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
如果是连续补好几天的补数据任务，已配置“自依赖”的任务，在第一天有一个任务实例失败了，那么第二天的任务实例也不会开始运行（只有当天的全部任务实例都成功，第二天的任务实例才会开始运行）。如果没有配置“自依赖”，则第二天的实例也会开始运行。
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
自依赖的周期任务补数据，如果补数据第一个实例的前一个周期没有实例，也是能运行的。
</td>
</tr>
</table>
</div>
<div class="sect5">
<h6 id="maint_batch_jobrerun_list">3.4.3.4.1. 补数据列表</h6>
<div class="paragraph">
<p>补数据列表即执行补数据的历史，支持根据业务日期运行日期、操作人等参数进行筛选。</p>
</div>
<div class="paragraph">
<p><strong>操作</strong>：杀死所有实例，表示杀掉此次补数据中的所有实例，终止此次补数据的运行，当发现代码错误或其他异常希望停止补数据的运行时可以使用此功能。</p>
</div>
</div>
<div class="sect5">
<h6 id="maint_batch_jobrerun_joblist">3.4.3.4.2. 补数据实例列表</h6>
<div class="paragraph">
<p>点击某个补数据列表后，进入详细的实例列表，补数据实例列表还可以根据业务日期、责任人、任务名称、状态进行搜索和筛选。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>补数据实例DAG图</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>若想看某个补数据实例的详细信息，可直接在实例列表中单击任务名，会从右侧弹出一个实例信息面板，包含实例的DAG图。</p>
</div>
<div class="paragraph">
<p>此处的操作与周期实例类似，不再赘述。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
“冻结”操作的状态不会作用于补数据实例
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="maint_stream">3.4.4. 实时任务运维</h4>
<div class="paragraph">
<p>实时任务运维模块中可查看实时任务实例的运行状态、查看任务运行日志，同时可以对任务状态进行切换。</p>
</div>
<div class="paragraph">
<p>不同于离线任务，在创建完实时任务后即可在<strong>运维中心-实时任务运维</strong>的列表中看到此任务，此时任务处于“未提交”状态。严格意义上说这里并不只是任务实例的列表，其中也包括了未提交的任务。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>实时任务的状态转换</strong></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/06_DTinsightIDEHelp_UserGuide_Maintenance-7d38f.png" alt="06 DTinsightIDEHelp UserGuide Maintenance 7d38f">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>操作</strong></p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>日志：点击<strong>日志</strong>链接，可查看本任务的日志信息。</p>
</li>
<li>
<p>提交：不同于离线任务，在创建完实时任务后即可在<strong>运维中心-实时任务运维</strong>的列表中看到此任务，此时任务处于“未提交”状态，需要用户点击<strong>提交</strong>按钮后，系统才会将此任务提交到后台执行。</p>
</li>
<li>
<p>停止：提交任务后，此任务会进入“等待运行”状态，并很快会进入到“运行中”状态（如果在这其中遇到异常情况，则会进入到“失败”状态），对于“等待运行”和“运行中”状态的任务，您可以点击<strong>停止</strong>，终止其运行，终止后任务进入“取消”状态。</p>
</li>
<li>
<p>续跑：任务将恢复至停止前的状态继续运行。续跑是基于Flink的checkpoint机制，DTinsightIDE将Flink的checkpoint信息记录在文件系统中，在您手动停止任务后继续保存这些信息，选择“续跑”后，任务将恢复至停止前的状态继续运行。</p>
</li>
<li>
<p>重跑：任务将丢弃停止前的状态，重新运行。</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="maint_alert">3.4.5. 监控告警</h4>
<div class="paragraph">
<p>告警监控模块中保存了DTinsightIDE产生的所有实时、离线任务告警信息，同时支持用户自定义告警规则，配置成功后，当监控的任务触发了告警规则后，DTinsightIDE将以邮件或短信的形式通知相关人员。</p>
</div>
<div class="paragraph">
<p>点击某项目上方的“运维中心”菜单，并在左侧的“告警监控”菜单下，可进入告警记录和自定义告警功能。</p>
</div>
<div class="sect4">
<h5 id="maint_alert_record">3.4.5.1. 告警记录</h5>
<div class="paragraph">
<p>告警记录中包括了系统产生的所有任务告警信息，可在实时或离线标签页中查看两类任务产生的告警数量、任务名称、任务类型、责任人等信息。</p>
</div>
<div class="paragraph">
<p>可筛选时间、任务、告警接收人等信息筛选特定的告警。</p>
</div>
</div>
<div class="sect4">
<h5 id="maint_alert_config">3.4.5.2. 自定义配置</h5>
<div class="paragraph">
<p>自定义告警可分别针对实时任务和离线任务配置不同的告警规则，可查看、修改已配置的规则，同时可对告警规则进行打开或关闭。</p>
</div>
<div class="paragraph">
<p>自定义告警模块依然按照实时任务和离线任务两个标签页展示，但二者操作方式类似，下面统一说明：</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>创建告警规则</strong>
点击告警规则列表右上角的“创建告警规则”，在弹窗中完善如下信息：</p>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>告警规则名称；</p>
</li>
<li>
<p>任务名称；</p>
</li>
<li>
<p>告警触发点：</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>实时任务只有“失败”一个触发点；</p>
</li>
<li>
<p>离线任务可选择“任务失败”、“任务停止”、“定时未完成”、“超时未完成”中的一种。</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>任务失败、任务停止：任务出错失败或任务被用户手动杀掉时通知相关责任人。由于平台可能被多个用户使用，因此任务停止主要用于用户需要保障此任务不被其他用户停止时使用。</p>
</li>
<li>
<p>定时未完成：若对任务执行的时间长度有预期，可选择“定时未完成”，输入任务运行时长后，若此任务执行时长超过了设定值，DTinsightIDE会通知责任人。例如：业务上需要在每天早上9点将任务运行成功，则可以选择超时未完成，并设定为早上9:00，超过此时间时。</p>
</li>
<li>
<p>超时未完成：若对任务的启动时间、执行完成时间有预期，需要输入任务的运行时长，若此任务超过了这个时长未完成，DTinsightIDE会通知责任人。超时的时长是从任务的定时时间开始计算的。</p>
</li>
</ol>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>告警方式：支持邮件、短信；</p>
</li>
<li>
<p>告警接收人：可选择此任务的责任人或项目组内的其他人员；</p>
</li>
</ol>
</div>
</li>
<li>
<p><strong>告警规则的开启、关闭</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>开启某告警规则，表示DTinsightIDE会按照用户设定的规则产生并发送告警。</p>
</div>
<div class="paragraph">
<p>关闭某告警规则，通常用于暂时不想应用此告警规则，但也不想删除，以后可能再次开启的情况。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
补数据时：如果任务配置了任务失败、任务停止的告警，则会触发告警。
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
补数据时：如果任务配置了超时未完成、定时未完成的告警，不会触发告警。
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
任务停止：包括任务失败和用户手动杀任务,2种情况都会触发告警。
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="DataMang">3.5. 数据管理</h3>
<div class="paragraph">
<p>DTinsightIDE数据管理模块中可以看到平台内表的元数据信息详情、数据生命周期管理、脏数据管理等操作。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
本版本的DTinsightIDE不支持表级、字段级的数据访问权限控制。
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
数据管理模块的很多项数据都有一定时间的延迟，例如血缘信息的变更，变更后可能无法立即体现在页面上。
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="datamang_tablemanag">3.5.1. 表管理</h4>
<div class="paragraph">
<p>可进入<strong>数据管理-表管理</strong>页面，对本项目空间内的数据表进行搜索。在全部数据页面中，通过选择数据类目导航+搜索框中输入表名进行模糊匹配的方式快速查找需要的表。</p>
</div>
<div class="sect4">
<h5 id="datamang_tablemanag_view">3.5.1.1. 查看表</h5>
<div class="paragraph">
<p>点击<strong>表管理</strong>模块中任意列表中的数据表名称，即可跳转至表详情页面，包括表的基本信息、存储信息、字段信息、分区信息、血缘信息和数据预览。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>表的基本信息</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>表的基本信息包括所属项目、表名、创建者、创建时间、所属类目、描述。</p>
</div>
<div class="paragraph">
<p>可单击<strong>生成建表语句</strong>按钮生成该表的建表语句。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>表的存储信息</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>表的存储信息包括物理存储量（数据存在延迟）、生命周期、是否分区表、表创建时间、DDL最后变更时间和最后数据变更时间。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>表的字段信息</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>表的字段信息包括字段名称、类型、是否分区字段和描述。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>表的分区信息</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>通过表的分区信息模块可查看表当前的分区，包括分区名、创建时间、存储量。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>表的数据预览</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>通过表的数据预览模块可预览当前表的数据信息。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>表的血缘信息</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>通过表的血缘信息模块可查看该表数据流DTinsightIDE的血缘信息，只支持表级血缘分析。</p>
</div>
</div>
<div class="sect4">
<h5 id="datamang_tablemanag_tablemanag">3.5.1.2. 数据表的管理</h5>
<div class="paragraph">
<p>在数据表管理中，可以对表进行以下操作：生命周期设置、表管理（包括修改表的类目、描述、字段、分区等）、表删除等。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>表的管理操作</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>点击<strong>数据管理-表管理</strong>模块中点击<strong>编辑</strong>，即进入表的管理页面。</p>
</div>
<div class="paragraph">
<p>在表的管理页面，支持以下操作：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>修改表的所属类目</p>
</li>
<li>
<p>修改表的生命周期</p>
</li>
<li>
<p>修改表的描述</p>
</li>
<li>
<p>修改表结构</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>新增字段</p>
</li>
<li>
<p>移动新增字段的位置（只能在新增字段中移动，不会影响已有字段）</p>
</li>
</ol>
</div>
</li>
<li>
<p>删除表：数据表一旦删除，该表的结构信息及表的所有数据均不可恢复，请谨慎操作。</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="datamang_tablemanag_create">3.5.1.3. 新建表</h5>
<div class="paragraph">
<p>通常情况下，数据开发过程中需要创建表来存储数据同步、数据加工的结果数据，数据管理模块提供可视化建表、语句建表两种方式创建表。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>可视化建表</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>单击顶部菜单栏中的<strong>数据管理-表管理</strong>，单击<strong>新建表</strong>，填写新建表弹出框中的各配置项。</p>
</div>
<div class="paragraph">
<p>配置项说明：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>表名：以字母、数字、下划线组成，具体请遵循Hive建表的表名约束规则。</p>
</li>
<li>
<p>分隔符：可以不填写，不填写时默认为Hive的默认建表分隔符：/u0001。</p>
</li>
<li>
<p>类型：内部表、外部表，如果选择外部表，则需要指定外部表的目录地址。</p>
</li>
<li>
<p>所属类目：当前表所处的类目，类目导航配置详见<a href="#datamang_cate">数据类目</a>。</p>
</li>
<li>
<p>生命周期：即DTinsightIDE的生命周期功能。填写一个数字表示天数，那么该表（或分区）超过一定天数未更新的数据会被清除。支持3天、7天、30天、90天、365天、自定义多种选项。</p>
</li>
<li>
<p>存储格式：支持textfile或orc格式，这2种格式的详细区别请参考
<a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-CreateTableCreate/Drop/TruncateTable">Hive官方文档</a></p>
</li>
<li>
<p>描述：当前表的简要说明。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>单击<strong>下一步</strong>，填写新建表页面中填写字段和分区信息的各配置项，主要是添加字段信息和分区信息。</p>
</div>
<div class="paragraph">
<p>配置项说明：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>字段名：字段英文名，由字母、数字、下划线组成。</p>
</li>
<li>
<p>字段类型：Hive数据类型，详细请参考
<a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-CreateTableCreate/Drop/TruncateTable">Hive官方文档</a></p>
</li>
<li>
<p>注释：字段详细描述。</p>
</li>
<li>
<p>操作：上移、下移、删除。</p>
</li>
<li>
<p>配置分区键的具体信息，支持string和bigint类型。</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>单击<strong>提交</strong>。新建表提交成功后，系统将自动跳转返回数据表管理界面，单击<strong>表管理</strong>即可查看新建表。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>语句建表</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>单击顶部菜单栏中的<strong>数据管理</strong>，导航至<strong>表管理</strong>，单击<strong>DDL建表</strong>。</p>
</div>
<div class="paragraph">
<p>填写Hive SQL建表语句，建表的语法请参考
<a href="https://cwiki.apache.org/confluence/display/Hive/LanguageManual+DDL#LanguageManualDDL-CreateTableCreate/Drop/TruncateTable">Hive官方文档</a>，单击<strong>确定</strong>，完成建表。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
建表中的各项信息本质上是遵循Hive建表的方式。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="datamang_record">3.5.2. 操作记录</h4>
<div class="paragraph">
<p>DTinsightIDE记录了每个表的DDL操作语句，并形成每个表的操作记录。点击<strong>数据管理-操作记录</strong>后，根据表名搜索，点击后有右侧面板弹出，显示此表的DDL操作记录。</p>
</div>
<div class="paragraph">
<p>支持对变更时间、操作人、变更语句的筛选和搜索。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
如果此表已被删除，DTinsightIDE依然会保留此表的操作记录，但在表名后备注已删除的信息
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="datamang_cate">3.5.3. 数据类目</h4>
<div class="paragraph">
<p>构建数据类目体系，便于数据维护。数据类目体系是树形结构的，每张表可以关联到唯一的一个叶子节点， 便于您进行数据检索与数据维护。</p>
</div>
<div class="paragraph">
<p>单击<strong>数据管理-数据类目</strong>页面。</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>单击表所属类目设置后的“添加”icon，添加下一级类目。除根节点外，最高可支持四级类目的设置。</p>
</li>
<li>
<p>单击表所属类目设置后的“编辑”icon，修改类目名称。</p>
</li>
<li>
<p>单击表所属类目设置后的“删除”icon，删除此类目。</p>
</li>
</ol>
</div>
</div>
<div class="sect3">
<h4 id="datamang_dirtydata">3.5.4. 脏数据管理</h4>
<div class="paragraph">
<p>在数据同步执行的过程中可能会出现因主键冲突、格式转换错误等各种原因造成部分数据无法正常写入，不能被正常写入的数据被称为“脏数据”。</p>
</div>
<div class="paragraph">
<p>DTinsightIDE支持对脏数据的配置、保存和管理</p>
</div>
<div class="sect4">
<h5 id="datamang_dirtydata_config">3.5.4.1. 脏数据的配置</h5>
<div class="paragraph">
<p>在<strong>数据同步</strong>任务的<strong>通道控制</strong>步骤中，可配置是否需要记录脏数据，并可指定存储脏数据的表名、生命周期。</p>
</div>
<div class="paragraph">
<p>DTinsightIDE同时支持错误数据比例的配置，当任务结束后，系统对错误数据的占比进行统计，超过设定的阈值时，此任务被置为失败。</p>
</div>
<div class="paragraph">
<p>[<a id="datamang_dirtydata_view"></a>]
=== 脏数据的查看</p>
</div>
<div class="paragraph">
<p>在<strong>任务管理-脏数据管理</strong>模块中可以查看脏数据的产生趋势、产生脏数据最多的任务，以及每一张产生脏数据表的情况。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>脏数据产生趋势</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>选中某个任务后，可以查看此任务在最近一段时间产生脏数据的数量，支持最近3天、7天、30天、60天的数据查看。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>脏数据产生TOP30任务</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>通过观察产生脏数据数量较大的任务，可以针对性的排查此任务的配置信息、源数据库的数据质量等问题，及时解决问题。</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>脏数据表管理</strong></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>脏数据表的管理与普通数据表管理类似，区别在于以下几个方面：</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>相关任务：列出此表对应的任务名称，方便排查任务信息；</p>
</li>
<li>
<p>脏数据概览：展现最近一段时间此表的脏数据量趋势；</p>
</li>
<li>
<p>原因分析：系统对脏数据造成的异常自动统计，原因有：空指针、主键冲突、类型转换、其他4种，如果某类原因占比较大，您可以通过对源数据库的数据进行针对性的分析；</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
脏数据产生原因是“空指针”，并不是说脏数据本身是空指针，而是由于脏数据造成同步任务程序出现了空指针异常。
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="UserManagement">3.6. 用户管理</h3>
<div class="paragraph">
<p>用户认证包括登录与找回密码两个功能</p>
</div>
<div class="sect3">
<h4 id="usermanagement_login">3.6.1. 登录</h4>
<div class="paragraph">
<p>用户在浏览器输入DTinsightIDE登录网址，打开页面后，输入手机号或者邮箱，同时输入密码，点击“登录”按钮即可登录成功。</p>
</div>
</div>
<div class="sect3">
<h4 id="usermanagement_findpassword">3.6.2. 找回密码</h4>
<div class="paragraph">
<p>若用户忘记了登录密码，点击“忘记密码？”按钮后，进入找回密码流程，可通过手机号码找回，也可以通过邮箱找回。</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
仅当配置了邮件服务器后才能使用邮件找回，若将DTinsightIDE部署在内网中，仅能通过管理员找回。
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="HiveSQLGuide">4. HIVE SQL指南</h2>
<div class="sectionbody">
<div class="paragraph">
<p>HiveSQL的语法指南</p>
</div>
<div class="sect2">
<h3 id="_建表语法">4.1. 建表语法</h3>

</div>
<div class="sect2">
<h3 id="_数据类型">4.2. 数据类型</h3>

</div>
<div class="sect2">
<h3 id="_ddl语句">4.3. DDL语句</h3>

</div>
<div class="sect2">
<h3 id="_典型查询语句">4.4. 典型查询语句</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="FlinkDevelopGuide">5. 实时任务开发指南</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_实时计算简介">5.1. 实时计算简介</h3>

</div>
<div class="sect2">
<h3 id="_flink引擎简介">5.2. Flink引擎简介</h3>

</div>
<div class="sect2">
<h3 id="_利用rd_os进行实时任务开发的注意事项">5.3. 利用RD-OS进行实时任务开发的注意事项</h3>
<div class="sect3">
<h4 id="_数据倾斜">5.3.1. 数据倾斜</h4>

</div>
</div>
<div class="sect2">
<h3 id="_最佳实践">5.4. 最佳实践</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="SparkDevelopGuide">6. 离线任务开发指南</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_离线计算简介">6.1. 离线计算简介</h3>

</div>
<div class="sect2">
<h3 id="_spark计算引擎简介">6.2. Spark计算引擎简介</h3>

</div>
<div class="sect2">
<h3 id="_最佳实践_2">6.3. 最佳实践</h3>

</div>
</div>
</div>
<div class="sect1">
<h2 id="QA">7. 常见问题</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_实时任务">7.1. 实时任务</h3>

</div>
<div class="sect2">
<h3 id="_离线任务">7.2. 离线任务</h3>
<div class="ulist">
<ul>
<li>
<p><strong>什么是业务日期？</strong></p>
</li>
<li>
<p><strong>如何立即运行任务</strong></p>
</li>
<li>
<p><strong>任务只需要执行一次怎么办</strong></p>
</li>
<li>
<p><strong>有一张用户表，一个月更新一次，每次更新的时候先清空表数据，然后同步，如何处理</strong></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_数据同步">7.2.1. 数据同步</h4>
<div class="ulist">
<ul>
<li>
<p><strong>如何提高MySQL、Oracle数据库的数据同步速度？</strong></p>
</li>
<li>
<p><strong>如何进行增量同步？</strong></p>
</li>
<li>
<p><strong>数据同步任务，源表每天的数据有更新，在没有做按时间过滤的情况下，同步到HDFS上，会如何处理？</strong></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_数据管理">7.2.2. 数据管理</h4>
<div class="ulist">
<ul>
<li>
<p><strong>内部表、外部表有什么区别</strong></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_运维中心">7.2.3. 运维中心</h4>
<div class="ulist">
<ul>
<li>
<p><strong>发布和运维是什么概念？</strong></p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="Appendix">8. 附录</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_每个角色对应的权限点">8.1. 每个角色对应的权限点</h3>
<div class="imageblock">
<div class="content">
<img src="images/16_DTinsightIDEHelp_Appendix-7e7d0.png" alt="16 DTinsightIDEHelp Appendix 7e7d0">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/16_DTinsightIDEHelp_Appendix-72c22.png" alt="16 DTinsightIDEHelp Appendix 72c22">
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2018-05-03 22:00:40 中国标准时间
</div>
</div>
</body>
</html>