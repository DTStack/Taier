webpackJsonp([2],{1161:function(e,t,a){"use strict";var n=(a(781),a(1163),a(913),a(1164));a.d(t,"c",function(){return n.a});var r=(a(782),a(783),a(1165));a.d(t,"a",function(){return r.a});var i=a(1166);a.d(t,"b",function(){return i.a});a(143),a(786),a(917),a(916),a(1193),a(1194),a(788),a(785)},1162:function(e,t,a){"use strict";t.a=function(e){return function(){return e}}},1163:function(e,t,a){"use strict";function n(){return new r}function r(){this._="@"+(++i).toString(36)}var i=0;r.prototype=n.prototype={constructor:r,get:function(e){for(var t=this._;!(t in e);)if(!(e=e.parentNode))return;return e[t]},set:function(e,t){return e[this._]=t},remove:function(e){return this._ in e&&delete e[this._]},toString:function(){return this._}}},1164:function(e,t,a){"use strict";var n=a(787),r=a(784);t.a=function(e){var t=a.i(n.a)();return t.changedTouches&&(t=t.changedTouches[0]),a.i(r.a)(e,t)}},1165:function(e,t,a){"use strict";var n=a(143);t.a=function(e){return"string"==typeof e?new n.a([[document.querySelector(e)]],[document.documentElement]):new n.a([[e]],n.b)}},1166:function(e,t,a){"use strict";var n=a(143);t.a=function(e){return"string"==typeof e?new n.a([document.querySelectorAll(e)],[document.documentElement]):new n.a([null==e?[]:e],n.b)}},1167:function(e,t,a){"use strict";var n=a(781);t.a=function(e){var t="function"==typeof e?e:a.i(n.a)(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}},1168:function(e,t,a){"use strict";function n(e){return function(){this.removeAttribute(e)}}function r(e){return function(){this.removeAttributeNS(e.space,e.local)}}function i(e,t){return function(){this.setAttribute(e,t)}}function s(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function o(e,t){return function(){var a=t.apply(this,arguments);null==a?this.removeAttribute(e):this.setAttribute(e,a)}}function l(e,t){return function(){var a=t.apply(this,arguments);null==a?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,a)}}var c=a(782);t.a=function(e,t){var u=a.i(c.a)(e);if(arguments.length<2){var p=this.node();return u.local?p.getAttributeNS(u.space,u.local):p.getAttribute(u)}return this.each((null==t?u.local?r:n:"function"==typeof t?u.local?l:o:u.local?s:i)(u,t))}},1169:function(e,t,a){"use strict";t.a=function(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}},1170:function(e,t,a){"use strict";function n(e){return e.trim().split(/^|\s+/)}function r(e){return e.classList||new i(e)}function i(e){this._node=e,this._names=n(e.getAttribute("class")||"")}function s(e,t){for(var a=r(e),n=-1,i=t.length;++n<i;)a.add(t[n])}function o(e,t){for(var a=r(e),n=-1,i=t.length;++n<i;)a.remove(t[n])}function l(e){return function(){s(this,e)}}function c(e){return function(){o(this,e)}}function u(e,t){return function(){(t.apply(this,arguments)?s:o)(this,e)}}i.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}},t.a=function(e,t){var a=n(e+"");if(arguments.length<2){for(var i=r(this.node()),s=-1,o=a.length;++s<o;)if(!i.contains(a[s]))return!1;return!0}return this.each(("function"==typeof t?u:t?l:c)(a,t))}},1171:function(e,t,a){"use strict";function n(e,t,a,n,r,i){for(var o,l=0,c=t.length,u=i.length;l<u;++l)(o=t[l])?(o.__data__=i[l],n[l]=o):a[l]=new s.b(e,i[l]);for(;l<c;++l)(o=t[l])&&(r[l]=o)}function r(e,t,a,n,r,i,o){var c,u,p,d={},_=t.length,h=i.length,f=new Array(_);for(c=0;c<_;++c)(u=t[c])&&(f[c]=p=l+o.call(u,u.__data__,c,t),p in d?r[c]=u:d[p]=u);for(c=0;c<h;++c)p=l+o.call(e,i[c],c,i),(u=d[p])?(n[c]=u,u.__data__=i[c],d[p]=null):a[c]=new s.b(e,i[c]);for(c=0;c<_;++c)(u=t[c])&&d[f[c]]===u&&(r[c]=u)}var i=a(143),s=a(914),o=a(1162),l="$";t.a=function(e,t){if(!e)return E=new Array(this.size()),h=-1,this.each(function(e){E[++h]=e}),E;var s=t?r:n,l=this._parents,c=this._groups;"function"!=typeof e&&(e=a.i(o.a)(e));for(var u=c.length,p=new Array(u),d=new Array(u),_=new Array(u),h=0;h<u;++h){var f=l[h],m=c[h],g=m.length,E=e.call(f,f&&f.__data__,h,l),v=E.length,y=d[h]=new Array(v),k=p[h]=new Array(v);s(f,m,y,k,_[h]=new Array(g),E,t);for(var A,T,C=0,b=0;C<v;++C)if(A=y[C]){for(C>=b&&(b=C+1);!(T=k[b])&&++b<v;);A._next=T||null}}return p=new i.a(p,l),p._enter=d,p._exit=_,p}},1172:function(e,t,a){"use strict";t.a=function(e){return arguments.length?this.property("__data__",e):this.node().__data__}},1173:function(e,t,a){"use strict";function n(e,t,n){var r=a.i(s.a)(e),i=r.CustomEvent;"function"==typeof i?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function r(e,t){return function(){return n(this,e,t)}}function i(e,t){return function(){return n(this,e,t.apply(this,arguments))}}var s=a(788);t.a=function(e,t){return this.each(("function"==typeof t?i:r)(e,t))}},1174:function(e,t,a){"use strict";t.a=function(e){for(var t=this._groups,a=0,n=t.length;a<n;++a)for(var r,i=t[a],s=0,o=i.length;s<o;++s)(r=i[s])&&e.call(r,r.__data__,s,i);return this}},1175:function(e,t,a){"use strict";t.a=function(){return!this.node()}},1176:function(e,t,a){"use strict";var n=a(915),r=a(143);t.a=function(){return new r.a(this._exit||this._groups.map(n.a),this._parents)}},1177:function(e,t,a){"use strict";var n=a(143),r=a(913);t.a=function(e){"function"!=typeof e&&(e=a.i(r.a)(e));for(var t=this._groups,i=t.length,s=new Array(i),o=0;o<i;++o)for(var l,c=t[o],u=c.length,p=s[o]=[],d=0;d<u;++d)(l=c[d])&&e.call(l,l.__data__,d,c)&&p.push(l);return new n.a(s,this._parents)}},1178:function(e,t,a){"use strict";function n(){this.innerHTML=""}function r(e){return function(){this.innerHTML=e}}function i(e){return function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}}t.a=function(e){return arguments.length?this.each(null==e?n:("function"==typeof e?i:r)(e)):this.node().innerHTML}},1179:function(e,t,a){"use strict";function n(){return null}var r=a(781),i=a(786);t.a=function(e,t){var s="function"==typeof e?e:a.i(r.a)(e),o=null==t?n:"function"==typeof t?t:a.i(i.a)(t);return this.select(function(){return this.insertBefore(s.apply(this,arguments),o.apply(this,arguments)||null)})}},1180:function(e,t,a){"use strict";function n(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}t.a=function(){return this.each(n)}},1181:function(e,t,a){"use strict";var n=a(143);t.a=function(e){for(var t=this._groups,a=e._groups,r=t.length,i=a.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var c,u=t[l],p=a[l],d=u.length,_=o[l]=new Array(d),h=0;h<d;++h)(c=u[h]||p[h])&&(_[h]=c);for(;l<r;++l)o[l]=t[l];return new n.a(o,this._parents)}},1182:function(e,t,a){"use strict";t.a=function(){for(var e=this._groups,t=0,a=e.length;t<a;++t)for(var n=e[t],r=0,i=n.length;r<i;++r){var s=n[r];if(s)return s}return null}},1183:function(e,t,a){"use strict";t.a=function(){var e=new Array(this.size()),t=-1;return this.each(function(){e[++t]=this}),e}},1184:function(e,t,a){"use strict";t.a=function(){for(var e=this._groups,t=-1,a=e.length;++t<a;)for(var n,r=e[t],i=r.length-1,s=r[i];--i>=0;)(n=r[i])&&(s&&s!==n.nextSibling&&s.parentNode.insertBefore(n,s),s=n);return this}},1185:function(e,t,a){"use strict";function n(e){return function(){delete this[e]}}function r(e,t){return function(){this[e]=t}}function i(e,t){return function(){var a=t.apply(this,arguments);null==a?delete this[e]:this[e]=a}}t.a=function(e,t){return arguments.length>1?this.each((null==t?n:"function"==typeof t?i:r)(e,t)):this.node()[e]}},1186:function(e,t,a){"use strict";function n(){this.nextSibling&&this.parentNode.appendChild(this)}t.a=function(){return this.each(n)}},1187:function(e,t,a){"use strict";function n(){var e=this.parentNode;e&&e.removeChild(this)}t.a=function(){return this.each(n)}},1188:function(e,t,a){"use strict";var n=a(143),r=a(786);t.a=function(e){"function"!=typeof e&&(e=a.i(r.a)(e));for(var t=this._groups,i=t.length,s=new Array(i),o=0;o<i;++o)for(var l,c,u=t[o],p=u.length,d=s[o]=new Array(p),_=0;_<p;++_)(l=u[_])&&(c=e.call(l,l.__data__,_,u))&&("__data__"in l&&(c.__data__=l.__data__),d[_]=c);return new n.a(s,this._parents)}},1189:function(e,t,a){"use strict";var n=a(143),r=a(917);t.a=function(e){"function"!=typeof e&&(e=a.i(r.a)(e));for(var t=this._groups,i=t.length,s=[],o=[],l=0;l<i;++l)for(var c,u=t[l],p=u.length,d=0;d<p;++d)(c=u[d])&&(s.push(e.call(c,c.__data__,d,u)),o.push(c));return new n.a(s,o)}},1190:function(e,t,a){"use strict";t.a=function(){var e=0;return this.each(function(){++e}),e}},1191:function(e,t,a){"use strict";function n(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}var r=a(143);t.a=function(e){function t(t,a){return t&&a?e(t.__data__,a.__data__):!t-!a}e||(e=n);for(var a=this._groups,i=a.length,s=new Array(i),o=0;o<i;++o){for(var l,c=a[o],u=c.length,p=s[o]=new Array(u),d=0;d<u;++d)(l=c[d])&&(p[d]=l);p.sort(t)}return new r.a(s,this._parents).order()}},1192:function(e,t,a){"use strict";function n(){this.textContent=""}function r(e){return function(){this.textContent=e}}function i(e){return function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}}t.a=function(e){return arguments.length?this.each(null==e?n:("function"==typeof e?i:r)(e)):this.node().textContent}},1193:function(e,t,a){"use strict";a(787),a(784)},1194:function(e,t,a){"use strict";a(787),a(784)},143:function(e,t,a){"use strict";function n(e,t){this._groups=e,this._parents=t}function r(){return new n([[document.documentElement]],M)}var i=a(1188),s=a(1189),o=a(1177),l=a(1171),c=a(914),u=a(1176),p=a(1181),d=a(1184),_=a(1191),h=a(1169),f=a(1183),m=a(1182),g=a(1190),E=a(1175),v=a(1174),y=a(1168),k=a(916),A=a(1185),T=a(1170),C=a(1192),b=a(1178),O=a(1186),R=a(1180),w=a(1167),D=a(1179),S=a(1187),L=a(1172),x=a(785),H=a(1173);a.d(t,"b",function(){return M}),t.a=n;var M=[null];n.prototype=r.prototype={constructor:n,select:i.a,selectAll:s.a,filter:o.a,data:l.a,enter:c.a,exit:u.a,merge:p.a,order:d.a,sort:_.a,call:h.a,nodes:f.a,node:m.a,size:g.a,empty:E.a,each:v.a,attr:y.a,style:k.a,property:A.a,classed:T.a,text:C.a,html:b.a,raise:O.a,lower:R.a,append:w.a,insert:D.a,remove:S.a,datum:L.a,on:x.b,dispatch:H.a}},1620:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(51),r=(a.n(n),a(50)),i=a.n(r),s=a(38),o=(a.n(s),a(16)),l=a.n(o),c=a(67),u=(a.n(c),a(66)),p=a.n(u),d=a(11),_=a.n(d),h=a(1),f=a.n(h),m=a(4),g=a.n(m),E=a(3),v=a.n(E),y=a(2),k=a.n(y),A=a(0),T=a.n(A),C=a(23),b=a(30),O=(a.n(b),a(136)),R=a(268),w=a(1658),D=function(e){function t(){return f()(this,t),v()(this,(t.__proto__||_()(t)).apply(this,arguments))}return k()(t,e),g()(t,[{key:"render",value:function(){var e=this.props,t=(e.createTask,e.upload,e.workbench),n=e.scriptTree,r=e.toggleCreateTask,s=e.toggleUpload,o=e.toggleCreateScript,c={width:"60px",height:"60px",marginTop:"25px"};return t.tabs.length?T.a.createElement(w.a,null):T.a.createElement(i.a,{className:"box-card txt-left",style:{paddingTop:"30px"}},T.a.createElement(p.a,{className:"operation-card"},T.a.createElement("div",{onClick:r,className:"operation-content"},T.a.createElement(R.a,{style:c,type:"add-file"})),T.a.createElement("p",{className:"txt-center"},"创建离线任务")),T.a.createElement(p.a,{className:"operation-card"},T.a.createElement("div",{onClick:s,className:"operation-content"},T.a.createElement(R.a,{style:c,type:"upload"})),T.a.createElement("p",{className:"txt-center"},"上传离线计算资源")),!a.i(b.isEmpty)(n)&&T.a.createElement(p.a,{className:"operation-card"},T.a.createElement("div",{onClick:o,className:"operation-content"},T.a.createElement(l.a,{style:c,type:"code-o"})),T.a.createElement("p",{className:"txt-center"},"创建脚本")))}}]),t}(A.Component),S=a.i(C.connect)(function(e){var t=e.offlineTask.modalShow,a=t.createTask,n=t.upload,r=e.offlineTask;return{createTask:a,upload:n,workbench:r.workbench,scriptTree:r.scriptTree}},function(e){return{toggleCreateTask:function(){e({type:O.o.TOGGLE_CREATE_TASK})},toggleUpload:function(){e({type:O.o.TOGGLE_UPLOAD})},toggleCreateScript:function(){e({type:O.o.TOGGLE_CREATE_SCRIPT})}}})(D);t.default=S;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(D,"Default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/default.js"),__REACT_HOT_LOADER__.register(S,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/default.js"))}()},1629:function(e,t,a){"use strict";var n=a(108),r=(a.n(n),a(86)),i=a.n(r),s=a(11),o=a.n(s),l=a(1),c=a.n(l),u=a(4),p=a.n(u),d=a(3),_=a.n(d),h=a(2),f=a.n(h),m=a(0),g=a.n(m);a.d(t,"a",function(){return E});var E=function(e){function t(e){return c()(this,t),_()(this,(t.__proto__||o()(t)).call(this,e))}return f()(t,e),p()(t,[{key:"render",value:function(){return this.props.notSynced?g.a.createElement(i.a,{title:"修改已保存至本地存储但尚未同步到服务器，你可以点击上面的保存按钮立即同步。"},g.a.createElement("span",{style:{display:"inline-block",width:8,height:8,marginRight:8,borderRadius:"50%",border:"3px solid ",borderColor:"#EF5350",opacity:.8}})):g.a.createElement("span",{style:{display:"inline-block",width:8,height:8,marginRight:8,borderRadius:"50%",border:"3px solid ",borderColor:"#00a854",opacity:.6}})}}]),t}(g.a.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(E,"SyncBadge","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/components/sync-badge/index.js")}()},1630:function(e,t,a){"use strict";var n=a(24),r=(a.n(n),a(22)),i=a.n(r),s=a(304),o=(a.n(s),a(303)),l=a.n(o),c=a(57),u=(a.n(c),a(55)),p=a.n(u),d=a(5),_=a.n(d),h=a(1636),f=(a.n(h),a(1635)),m=a.n(f),g=a(29),E=(a.n(g),a(39)),v=a.n(E),y=a(11),k=a.n(y),A=a(1),T=a.n(A),C=a(4),b=a.n(C),O=a(3),R=a.n(O),w=a(2),D=a.n(w),S=a(26),L=(a.n(S),a(25)),x=a.n(L),H=a(32),M=(a.n(H),a(31)),N=a.n(M),F=a(0),B=a.n(F),I=a(23),V=a(136),U=(a(19),a(1160)),P=a(920),z=N.a.Item,j=x.a.Option,q=function(e){function t(e){T()(this,t);var a=R()(this,(t.__proto__||k()(t)).call(this,e));return a.state={isRecord:!1},a.onLifeDayChange=function(){return a.__onLifeDayChange__REACT_HOT_LOADER__.apply(a,arguments)},a}return D()(t,e),b()(t,[{key:"__onLifeDayChange__REACT_HOT_LOADER__",value:function(e){this.props.changeChannelSetting({lifeDay:e})}},{key:"render",value:function(){for(var e=this,t=this.props.form.getFieldDecorator,a=this.props,n=a.setting,r=(a.changeChannelSetting,a.navtoStep),s=(a.form,{labelCol:{sm:{span:6}},wrapperCol:{sm:{span:14}}}),o=[],c=[],u=1;u<=20;u++)o.push(B.a.createElement(j,{value:""+u,key:u},u,"MB/s"));for(var d=1;d<=5;d++)c.push(B.a.createElement(j,{value:""+d,key:d},d));return B.a.createElement("div",{className:"g-step4"},B.a.createElement(N.a,null,B.a.createElement(z,_()({},s,{label:"作业速率上限"}),t("speed",{rules:[{required:!0}],initialValue:""+n.speed})(B.a.createElement(m.a,{dataSource:o,optionLabelProp:"value"},B.a.createElement(v.a,{suffix:"MB/s"}))),B.a.createElement(U.a,{doc:"jobSpeedLimit"})),B.a.createElement(z,_()({},s,{label:"作业并发数"}),t("channel",{rules:[{required:!0}],initialValue:""+n.channel})(B.a.createElement(m.a,{dataSource:c,optionLabelProp:"value"})),B.a.createElement(U.a,{doc:"jobConcurrence"})),B.a.createElement(z,_()({},s,{label:"错误记录管理",className:"txt-left"}),t("isSaveDirty",{rules:[],initialValue:n.isSaveDirty})(B.a.createElement(p.a,{checked:n.isSaveDirty}," 记录保存 ")),B.a.createElement(U.a,{doc:"recordDirtyData"})),n.isSaveDirty&&B.a.createElement("div",null,B.a.createElement(z,_()({},s,{label:"脏数据写入hive表"}),t("tableName",{rules:[],initialValue:n.tableName||null})(B.a.createElement(v.a,{placeholder:"默认系统分配"})),B.a.createElement(U.a,{doc:"recordDirtyData"})),B.a.createElement(z,_()({},s,{label:"脏数据存储生命周期",className:"txt-left"}),t("lifeDay",{rules:[{required:!0,message:"生命周期不可为空！"}],initialValue:n.lifeDay||90})(B.a.createElement(v.a,{type:"hidden"})),B.a.createElement(P.a,{value:n.lifeDay,width:120,onChange:this.onLifeDayChange}),B.a.createElement(U.a,{doc:"recordDirtyData"}))),B.a.createElement(z,_()({},s,{label:"错误记录数超过"}),t("record",{rules:[],initialValue:n.record})(B.a.createElement(l.a,{style:{float:"left"}})),B.a.createElement("span",{style:{float:"left"}},"条, 任务自动结束",B.a.createElement(U.a,{doc:"errorCount",style:{position:"initial",marginLeft:"6px"}}))),B.a.createElement(z,_()({},s,{label:"错误记录比例配置"}),B.a.createElement("span",{style:{float:"left"}},"任务执行结束后，统计错误记录占比，大于"),t("percentage",{rules:[],initialValue:n.record})(B.a.createElement(l.a,{style:{float:"left"}})),B.a.createElement("span",{style:{float:"left"}},"%时，任务置为失败"),B.a.createElement(U.a,{doc:"errorPercentConfig",style:{position:"initial",marginLeft:"6px"}}))),!this.props.readonly&&B.a.createElement("div",{className:"steps-action"},B.a.createElement(i.a,{style:{marginRight:8},onClick:function(){return e.prev(r)}},"上一步"),B.a.createElement(i.a,{type:"primary",onClick:function(){return e.next(r)}},"下一步")))}},{key:"prev",value:function(e){e.call(null,2)}},{key:"next",value:function(e){var t=this.props,a=t.changeChannelSetting;t.form.validateFields(function(t,n){t||(e.call(null,4),a(n))})}}]),t}(B.a.Component),K=N.a.create({onValuesChange:function(e,t){(0,e.changeChannelSetting)(t)}})(q),G=function(e){function t(){return T()(this,t),R()(this,(t.__proto__||k()(t)).apply(this,arguments))}return D()(t,e),b()(t,[{key:"render",value:function(){return B.a.createElement("div",null,B.a.createElement(K,this.props))}}]),t}(B.a.Component),W=function(e){var t=e.offlineTask.dataSync;return{setting:t.setting,targetMap:t.targetMap}},Y=function(e){return{changeChannelSetting:function(t){e({type:V.g.CHANGE_CHANNEL_FIELDS,payload:t}),e({type:V.h.MAKE_TAB_DIRTY})}}},Q=a.i(I.connect)(W,Y)(G);t.a=Q;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(z,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"),__REACT_HOT_LOADER__.register(j,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"),__REACT_HOT_LOADER__.register(q,"ChannelForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"),__REACT_HOT_LOADER__.register(K,"ChannelFormWrap","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"),__REACT_HOT_LOADER__.register(G,"Channel","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"),__REACT_HOT_LOADER__.register(W,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"),__REACT_HOT_LOADER__.register(Y,"mapDispatch","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"),__REACT_HOT_LOADER__.register(Q,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/channel.js"))}()},1631:function(e,t,a){"use strict";function n(e){return te.k.HDFS===parseInt(e,10)}function r(e){return te.a.indexOf(parseInt(e,10))>-1}function i(e){return Y.a.createElement("input",{className:"cell-input",defaultValue:e})}var s=a(33),o=a.n(s),l=a(28),c=(a.n(l),a(27)),u=a.n(c),p=a(51),d=(a.n(p),a(50)),_=a.n(d),h=a(24),f=(a.n(h),a(22)),m=a.n(f),g=a(67),E=(a.n(g),a(66)),v=a.n(E),y=a(29),k=(a.n(y),a(39)),A=a.n(k),T=a(108),C=(a.n(T),a(86)),b=a.n(C),O=a(38),R=(a.n(O),a(16)),w=a.n(R),D=a(269),S=a.n(D),L=a(11),x=a.n(L),H=a(1),M=a.n(H),N=a(4),F=a.n(N),B=a(3),I=a.n(B),V=a(2),U=a.n(V),P=a(26),z=(a.n(P),a(25)),j=a.n(z),q=a(32),K=(a.n(q),a(31)),G=a.n(K),W=a(0),Y=a.n(W),Q=a(23),J=a(30),$=(a.n(J),a(1161)),X=a(198),Z=a(13),ee=a(19),te=a(34),ae=a(1644),ne=a(1642),re=a(1643),ie=G.a.Item,se=j.a.Option,oe={cf:"-",key:"rowkey",type:"STRING"},le=function(e){function t(e){M()(this,t);var a=I()(this,(t.__proto__||x()(t)).call(this,e));return a.resize=function(){return a.__resize__REACT_HOT_LOADER__.apply(a,arguments)},a.initData=function(){return a.__initData__REACT_HOT_LOADER__.apply(a,arguments)},a.loadColumnFamily=function(){return a.__loadColumnFamily__REACT_HOT_LOADER__.apply(a,arguments)},a.hbaseRowKeyChange=function(){return a.__hbaseRowKeyChange__REACT_HOT_LOADER__.apply(a,arguments)},a.renderKeyModal=function(){return a.__renderKeyModal__REACT_HOT_LOADER__.apply(a,arguments)},a.renderBatchModal=function(){return a.__renderBatchModal__REACT_HOT_LOADER__.apply(a,arguments)},a.checkHBaseRowKey=function(){return a.__checkHBaseRowKey__REACT_HOT_LOADER__.apply(a,arguments)},a.copySourceCols=function(){return a.__copySourceCols__REACT_HOT_LOADER__.apply(a,arguments)},a.batchTextChange=function(){return a.__batchTextChange__REACT_HOT_LOADER__.apply(a,arguments)},a.batchSourceTextChange=function(){return a.__batchSourceTextChange__REACT_HOT_LOADER__.apply(a,arguments)},a.doBatchImport=function(){return a.__doBatchImport__REACT_HOT_LOADER__.apply(a,arguments)},a.hideBatchImportModal=function(){return a.__hideBatchImportModal__REACT_HOT_LOADER__.apply(a,arguments)},a.hideBatchSourceModal=function(){return a.__hideBatchSourceModal__REACT_HOT_LOADER__.apply(a,arguments)},a.importFields=function(){return a.__importFields__REACT_HOT_LOADER__.apply(a,arguments)},a.importSourceFields=function(){return a.__importSourceFields__REACT_HOT_LOADER__.apply(a,arguments)},a.doBatchAddSourceFields=function(){return a.__doBatchAddSourceFields__REACT_HOT_LOADER__.apply(a,arguments)},a.initEditKeyRow=function(){return a.__initEditKeyRow__REACT_HOT_LOADER__.apply(a,arguments)},a.doAddkeyRow=function(){return a.__doAddkeyRow__REACT_HOT_LOADER__.apply(a,arguments)},a.doEditKeyRow=function(){return a.__doEditKeyRow__REACT_HOT_LOADER__.apply(a,arguments)},a.hideKeyModal=function(){return a.__hideKeyModal__REACT_HOT_LOADER__.apply(a,arguments)},a.state={h:40,w:230,W:450,padding:10,rowMap:!1,nameMap:!1,keyModalVisible:!1,visibleConst:!1,keyModal:{operation:"add",isReader:!0,editField:"",position:-1,source:"",fileType:"orc"},batchModal:{visible:!1,batchText:""},batchSourceModal:{visible:!1,batchText:""},sourceColumnFamily:"",targetColumnFamily:""},a}return U()(t,e),F()(t,[{key:"getCanvasW",value:function(){var e=450,t=document.querySelector(".steps-content");if(t){var a=t.getBoundingClientRect().width/6*5;a>e&&(e=a)}return e}},{key:"componentDidMount",value:function(){this.$canvas=a.i($.a)(this.canvas),this.$activeLine=a.i($.a)("#activeLine"),this.setState({W:this.getCanvasW()}),this.drawSvg(),this.listenResize(),this.loadColumnFamily(),this.initData()}},{key:"__resize__REACT_HOT_LOADER__",value:function(){this.setState({W:this.getCanvasW()})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize,!1)}},{key:"listenResize",value:function(){window.addEventListener&&window.addEventListener("resize",this.resize,!1)}},{key:"componentDidUpdate",value:function(){this.$canvas.selectAll(".dl, .dr, .lines").remove(),this.drawSvg()}},{key:"drawSvg",value:function(){this.renderDags(),this.renderLines(),this.bindEvents()}},{key:"renderDags",value:function(){var e=this.state,t=e.w,a=e.h,n=e.W,r=e.padding,i=this.props,s=i.targetCol,o=i.sourceCol;i.keymap;this.$canvas.append("g").attr("class","dl").selectAll("g").data(o).enter().append("g").attr("class","col-dag-l").append("circle").attr("class","dag-circle").attr("cx",function(e,t){return r}).attr("cy",function(e,t){return a*(t+1.5)}).attr("r",5).attr("stroke-width",2).attr("stroke","#fff").attr("fill","#2491F7"),this.$canvas.append("g").attr("class","dr").selectAll("g").data(s).enter().append("g").attr("class","col-dag-r").append("circle").attr("class","dag-circle").attr("cx",function(e,a){return n-2*t-r}).attr("cy",function(e,t){return a*(t+1.5)}).attr("r",5).attr("stroke-width",2).attr("stroke","#fff").attr("fill","#2491F7")}},{key:"renderLines",value:function(){var e=this.state,t=e.w,n=e.h,i=e.W,s=e.padding,o=this.props,l=(o.targetCol,o.sourceCol,o.keymap),c=o.sourceSrcType,u=(o.sourceFileType,o.targetSrcType),p=(o.targetFileType,l.source),d=l.target,_=a.i($.b)(".col-dag-l"),h=a.i($.b)(".col-dag-r"),f=[],m=function(e,t){return r(c)?e.key===t:a.i(J.isEqual)(e,t)},g=function(e,t){return r(u)?e.key===t:a.i(J.isEqual)(e,t)};p.forEach(function(e,a){_.each(function(r,o){var l=void 0,c=void 0,u=void 0,p=void 0;m(r,e)&&(l=s,c=(o+1.5)*n,h.each(function(r,o){g(r,d[a])&&(u=i-2*t-s,p=(o+1.5)*n,f.push({s:{x:l,y:c},e:{x:u,y:p},dl:e,dr:d[a]}))}))})}),this.$canvas.append("g").attr("class","lines").selectAll("g").data(f).enter().append("g").attr("class","mapline").append("line").attr("x1",function(e){return e.s.x}).attr("y1",function(e){return e.s.y}).attr("x2",function(e){return e.e.x}).attr("y2",function(e){return e.e.y}).attr("stroke","#2491F7").attr("stroke-width",2).attr("marker-end","url(#arrow)")}},{key:"bindEvents",value:function(){var e=this,t=this.state,n=t.w,i=t.h,s=t.W,o=t.padding,l=this.props,c=l.addLinkedKeys,u=l.delLinkedKeys,p=l.sourceSrcType,d=l.sourceFileType,_=l.targetSrcType,h=l.targetFileType,f=this.$activeLine,m=a.i($.b)(".col-dag-l"),g=!1,E=void 0,v=void 0;m.on("mousedown",function(e,t,a){var n=o,r=(t+1.5)*i;f.attr("x1",n).attr("y1",r).attr("x2",n).attr("y2",r),E=e,g=!0}),this.$canvas.on("mousemove",function(){if(g){var t=a.i($.c)(e.$canvas.node());f.attr("x2",t[0]).attr("y2",t[1])}}).on("mouseup",function(){if(g){var t=a.i($.c)(e.$canvas.node()),l=S()(t,2),u=l[0],d=l[1];if(u<s-2*n-o)e.resetActiveLine();else{var h=Math.floor(d/i)-1;a.i($.b)(".col-dag-r").each(function(e,t){t===h&&(v=e)})}}E&&v&&(c({source:r(p)?E.key:E,target:r(_)?v.key:v}),e.resetActiveLine()),g=!1}),this.$canvas.selectAll(".mapline").on("mouseover",function(e,t,n){a.i($.a)(n[t]).select("line").attr("stroke-width",3).attr("stroke","#2491F7")}).on("mouseout",function(e,t,n){a.i($.a)(n[t]).select("line").attr("stroke-width",2).attr("stroke","#2491F7")}).on("click",function(e,t,a){u({source:e.dl,target:e.dr,sourceSrcType:p,sourceFileType:d,targetSrcType:_,targetFileType:h})})}},{key:"resetActiveLine",value:function(){this.$activeLine.attr("x1",-10).attr("y1",-10).attr("x2",-10).attr("y2",-10)}},{key:"__initData__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.sourceMap,a=e.sourceSrcType,n=e.addSourceKeyRow;a===te.k.HBASE&&(t.column&&0!==t.column.length||n(oe))}},{key:"__loadColumnFamily__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.sourceMap,a=e.targetMap,n=e.sourceSrcType,r=e.targetSrcType,i=this,s=function(e,t){ee.a.getHBaseColumnFamily(e).then(function(e){1===e.code&&t(e.data)})};n===te.k.HBASE&&s({sourceId:t.sourceId,tableName:t.type.table},function(e){i.setState({sourceColumnFamily:e})}),r===te.k.HBASE&&s({sourceId:a.sourceId,tableName:a.type.table},function(e){i.setState({targetColumnFamily:e})})}},{key:"__hbaseRowKeyChange__REACT_HOT_LOADER__",value:function(e){var t=Z.a.trim(e.target.value),a=this.props,n=a.handleTargetMapChange,r=a.targetMap;t&&(r.rowkey=t,n(r))}},{key:"renderSource",value:function(){var e=this,t=this.state,a=t.w,n=t.h,r=(t.W,t.H,t.padding),s=this.props,o=(s.targetCol,s.sourceCol),l=(s.keymap,s.sourceSrcType),c=s.sourceFileType,u=s.removeSourceKeyRow,p=s.readonly,d={left:r,top:r,width:a,height:n},_=function(t,a,n){var r=Y.a.createElement("div",{className:"remove-cell",onClick:function(){return u(a,n)}},Y.a.createElement(b.a,{title:"删除当前列"},Y.a.createElement(w.a,{type:"minus"})));switch(t){case te.k.HDFS:var s=a?i(void 0!==a.index?a.index:"'"+a.key+"'"):"索引位";return Y.a.createElement("div",null,Y.a.createElement("div",{className:"cell",title:s},s),Y.a.createElement("div",{className:"cell"},a?a.value?"常量":a.type.toUpperCase():"类型"),"orc"!==c?Y.a.createElement("div",{className:"cell"},a?r:"操作"):"");case te.k.HBASE:var o=a?i(a.key):"列名/行健",l=a?a.cf:"列族";return Y.a.createElement("div",{className:"four-cells"},Y.a.createElement("div",{className:"cell",title:l},l),Y.a.createElement("div",{className:"cell",title:o},o),Y.a.createElement("div",{className:"cell"},a?a.type.toUpperCase():"类型"),Y.a.createElement("div",{className:"cell"},a?Y.a.createElement("div",null,"rowkey"===a.key?"":r,Y.a.createElement("div",{className:"edit-cell",onClick:function(){e.initEditKeyRow(!0,t,null,a,n)}},Y.a.createElement(b.a,{title:"编辑当前列"},Y.a.createElement(w.a,{type:"edit"})))):"操作"));case te.k.HIVE:var p=a?i(a.value?"'"+a.key+"'":a.key):"字段名称";return Y.a.createElement("div",null,Y.a.createElement("div",{className:"cell"},p),Y.a.createElement("div",{className:"cell"},a?a.value?"常量":a.type.toUpperCase():"类型"),Y.a.createElement("div",{className:"cell"},a?a.value?r:"":"操作"));case te.k.FTP:var d=a?i(void 0!==a.index?a.index:"'"+a.key+"'"):"字段序号";return Y.a.createElement("div",null,Y.a.createElement("div",{className:"cell",title:d},d),Y.a.createElement("div",{className:"cell"},a?a.value?"常量":a.type.toUpperCase():"类型"),Y.a.createElement("div",{className:"cell"},a?r:"操作"));default:return Y.a.createElement("div",null,Y.a.createElement("div",{className:"cell",title:name},a?i(a.key):"字段名称"),Y.a.createElement("div",{className:"cell"},a?a.type.toUpperCase():"类型"))}},h=function(t){if(!p){var i="",s=Y.a.createElement("span",{onClick:function(){e.setState({visibleConst:!0})}},"+添加常量");switch(t){case te.k.HIVE:i=Y.a.createElement("div",null,s);break;case te.k.HBASE:i=Y.a.createElement("div",null,Y.a.createElement("span",{onClick:e.initAddKeyRow.bind(e,!0,c)},"+添加字段")," ",Y.a.createElement("span",{onClick:e.importSourceFields},"批量添加"));break;case te.k.HDFS:i="orc"!==c?Y.a.createElement("div",null,Y.a.createElement("span",{onClick:e.initAddKeyRow.bind(e,!0,c)},"+添加字段")," ",s," ",Y.a.createElement("span",{onClick:e.importSourceFields},"批量添加")):null;break;case te.k.FTP:i=Y.a.createElement("div",null,Y.a.createElement("span",{onClick:e.initAddKeyRow.bind(e,!0,c)},"+添加字段")," ",s," ",Y.a.createElement("span",{onClick:e.importSourceFields},"批量添加"));break;default:i=null}return Y.a.createElement("div",{className:"m-col footer pa",style:{left:r,top:r+n*(o.length+1),width:a,height:n,zIndex:100}},i)}return""};return Y.a.createElement("div",{className:"sourceLeft"},Y.a.createElement("div",{className:"m-col title pa",style:d},_(l)),o.map(function(e,t){return Y.a.createElement("div",{style:{width:a,height:n,left:r,top:r+n*(t+1)},className:"m-col pa",key:"sourceLeft-"+t},_(l,e,t))}),h(l))}},{key:"renderTarget",value:function(){var e=this,t=this.state,a=t.w,n=t.h,r=t.W,s=(t.H,t.padding),o=this.props,l=o.targetCol,c=o.sourceCol,u=(o.keymap,o.readonly),p=o.targetMap,d=o.targetFileType,_=o.removeTargetKeyRow,h=o.sourceSrcType,f=o.targetSrcType,m={left:r-(s+a),top:s,width:a,height:n},g=function(t,a,n){var r=Y.a.createElement("div",null,Y.a.createElement("div",{className:"remove-cell",onClick:function(){return _(a,n)}},Y.a.createElement(b.a,{title:"删除当前列"},Y.a.createElement(w.a,{type:"minus"}))),Y.a.createElement("div",{className:"edit-cell",onClick:function(){e.initEditKeyRow(!1,d,c[n],a,n)}},Y.a.createElement(b.a,{title:"编辑当前列"},Y.a.createElement(w.a,{type:"edit"}))));switch(t){case te.k.HDFS:return Y.a.createElement("div",null,Y.a.createElement("div",{className:"cell"},a?i(a.key):"字段名称"),Y.a.createElement("div",{className:"cell"},a?a.type.toUpperCase():"类型"),Y.a.createElement("div",{className:"cell"},a?r:"操作"));case te.k.HBASE:return Y.a.createElement("div",{className:"four-cells"},Y.a.createElement("div",{className:"cell"},a?a.cf:"列族"),Y.a.createElement("div",{className:"cell"},a?i(a.key):"列名"),Y.a.createElement("div",{className:"cell"},a?a.type.toUpperCase():"类型"),Y.a.createElement("div",{className:"cell"},a?r:"操作"));case te.k.FTP:return Y.a.createElement("div",null,Y.a.createElement("div",{className:"cell"},a?i(a.key):"字段名称"),Y.a.createElement("div",{className:"cell"},a?a.type.toUpperCase():"类型"),Y.a.createElement("div",{className:"cell"},a?r:"操作"));default:return Y.a.createElement("div",null,Y.a.createElement("div",{className:"cell"},a?i(a.key):"字段名称"),Y.a.createElement("div",{className:"cell"},a?a.type.toUpperCase():"类型"))}},E=function(t){if(!u){var i="";switch(t){case te.k.HBASE:i=Y.a.createElement("div",null,Y.a.createElement("span",{onClick:e.initAddKeyRow.bind(e,!1,d)},"+添加字段")," ",Y.a.createElement("span",{onClick:e.importFields},"批量添加"),Y.a.createElement("div",{className:"m-col"},"rowkey: ",Y.a.createElement(A.a,{style:{width:"160px"},defaultValue:p.type&&p.type.rowkey||"",placeholder:h===te.k.HBASE?"$(colFamily1:colName1)":"$(colName)",onChange:e.hbaseRowKeyChange})));break;case te.k.HDFS:case te.k.FTP:i=Y.a.createElement("div",null,Y.a.createElement("span",{onClick:e.initAddKeyRow.bind(e,!1,d)},"+添加字段")," ",Y.a.createElement("span",{onClick:e.importFields},"批量添加"));break;default:i=null}return i?Y.a.createElement("div",{className:"m-col footer pa",style:{top:s+n*(l.length+1),left:r-(s+a),width:a,height:n,zIndex:100}},i):""}return""};return Y.a.createElement("div",{className:"targetRight"},Y.a.createElement("div",{className:"m-col title  pa",style:m},g(f)),l.map(function(e,t){return Y.a.createElement("div",{key:"targetRight-"+t,className:"m-col pa",style:{width:a,height:n,top:s+n*(t+1),left:r-(s+a)}},g(f,e,t))}),E(f))}},{key:"__renderKeyModal__REACT_HOT_LOADER__",value:function(){var e=this.state,t=e.keyModal,a=e.keyModalVisible,n=e.sourceColumnFamily,r=e.targetColumnFamily,i=t.operation,s=t.isReader,o=this.props,l=o.sourceSrcType,c=o.targetSrcType,u=t.isReader?l:c,p=this.doAddkeyRow,d="添加HDFS字段";return"add"===i?u===te.k.HBASE?d="添加HBase字段":u===te.k.FTP&&(d="添加FTP字段"):"edit"===i&&(p=this.doEditKeyRow,d="修改HDFS字段",u===te.k.HBASE?d="修改HBase字段":u===te.k.FTP&&(d="添加FTP字段")),Y.a.createElement(ae.a,{title:d,visible:a,keyModal:t,dataType:u,sourceColumnFamily:n,targetColumnFamily:r,onOk:p,onCancel:this.hideKeyModal,key:s?"source-"+u+"-"+l:"target-"+u+"-"+c})}},{key:"__renderBatchModal__REACT_HOT_LOADER__",value:function(){var e=this.state,t=e.batchModal,a=e.batchSourceModal,n=e.sourceColumnFamily,r=e.targetColumnFamily,i=this.props,s=i.sourceSrcType,o=i.targetSrcType,l=void 0,c=void 0,u=void 0,p=void 0;switch(s){case te.k.FTP:case te.k.HDFS:l="1: STRING, 2: INTEGER,...",c="index: type, index: type";break;case te.k.HBASE:l="cf1: field1: STRING, cf1: field2: INTEGER,...",c="columnFamily: fieldName: type,"}switch(o){case te.k.FTP:case te.k.HDFS:u="field1: STRING, field2: INTEGER,...",p="fieldName: type, fieldName: type";break;case te.k.HBASE:u=l,p=c}return[Y.a.createElement(ne.a,{key:"sourceBatchAdd",title:"批量添加源表字段",desc:c,columnFamily:n,placeholder:l,visible:a.visible,value:a.batchText,onOk:this.doBatchAddSourceFields,onCancel:this.hideBatchSourceModal,onChange:this.batchSourceTextChange}),Y.a.createElement(ne.a,{key:"targetBatchAdd",title:"批量添加目标字段",desc:p,columnFamily:r,placeholder:u,visible:t.visible,value:t.batchText,onOk:this.doBatchImport,onCancel:this.hideBatchImportModal,onChange:this.batchTextChange})]}},{key:"render",value:function(){var e=this,t=this.state,a=t.w,r=t.h,i=t.W,s=t.padding,o=t.visibleConst,l=this.props,c=l.targetCol,u=l.sourceCol,p=l.keymap,d=l.sourceSrcType,h=(l.sourceFileType,l.navtoStep),f=l.targetSrcType,g=l.addSourceKeyRow,E=r*(Math.max(c.length,u.length)+1);p.source,p.target;return Y.a.createElement("div",null,Y.a.createElement("p",{style:{fontSize:12,color:"#ccc",marginTop:-20}},"您要配置来源表与目标表的字段映射关系，通过连线将待同步的字段左右相连，也可以通过同行映射、同名映射批量完成映射"),Y.a.createElement(_.a,null,Y.a.createElement(v.a,{span:"20"},Y.a.createElement("div",{className:"m-keymapbox",ref:function(t){return e.container=t},style:{width:i,minHeight:E+20}},this.renderSource(),this.renderTarget(),Y.a.createElement("svg",{ref:function(t){return e.canvas=t},width:i>2*a?i-2*a:0,height:E,className:"pa m-keymapcanvas",style:{left:a,top:s}},Y.a.createElement("defs",null,Y.a.createElement("marker",{id:"arrow",markerUnits:"strokeWidth",markerWidth:"12",markerHeight:"12",viewBox:"0 0 12 12",refX:"6",refY:"6",orient:"auto"},Y.a.createElement("path",{d:"M2,3 L9,6 L2,9 L2,6 L2,3",style:{fill:"#2491F7"}}))),Y.a.createElement("g",null,Y.a.createElement("line",{id:"activeLine",x1:"-10",y1:"-10",x2:"-10",y2:"-10",stroke:"#2491F7",strokeWidth:"2",markerEnd:"url(#arrow)"}))))),Y.a.createElement(v.a,{span:"4"},this.props.readonly?null:Y.a.createElement("div",{className:"m-buttons"},Y.a.createElement(m.a,{type:this.state.rowMap?"primary":"default",onClick:this.setRowMap.bind(this)},this.state.rowMap?"取消同行映射":"同行映射"),Y.a.createElement("br",null),Y.a.createElement(m.a,{disabled:n(d),type:this.state.nameMap?"primary":"default",onClick:this.setNameMap.bind(this)},this.state.nameMap?"取消同名映射":"同名映射"),Y.a.createElement("br",null),n(f)?Y.a.createElement(m.a,{onClick:function(){e.copySourceCols(u)}},"拷贝源字段"):""))),this.renderKeyModal(),this.renderBatchModal(),Y.a.createElement(re.a,{visible:o,onOk:g,onCancel:function(){e.setState({visibleConst:!1})}}),!this.props.readonly&&Y.a.createElement("div",{className:"steps-action",style:{marginTop:80}},Y.a.createElement(m.a,{style:{marginRight:8},onClick:function(){return e.prev(h)}},"上一步"),Y.a.createElement(m.a,{type:"primary",onClick:function(){return e.next(h)}},"下一步")))}},{key:"prev",value:function(e){e.call(null,1)}},{key:"next",value:function(e){var t=this.props,a=t.keymap,n=t.targetSrcType,r=a.source,i=a.target;if(0===r.length&&0===i.length)return void u.a.error("尚未配置数据同步的字段映射！");(n!==te.k.HBASE||this.checkHBaseRowKey())&&e.call(null,3)}},{key:"__checkHBaseRowKey__REACT_HOT_LOADER__",value:function(e){var t=this.props,n=t.keymap,r=t.targetMap,i=t.sourceSrcType,s=r.type,l=n.source;if(s&&s.rowkey){var c=function(){var e=[];if(i===te.k.HBASE)for(var t=/([\w]+:[\w]+)/g,n=s.rowkey.match(t),r=function(e){var t=n[e].split(":");if(t&&2===t.length){if(!l.find(function(e){return e.cf===t[0]&&e.key===t[1]}))return u.a.error("目标表rowkey在源表中并不存在！"),{v:{v:!1}}}},c=0;c<n.length;c++){var p=r(c);if("object"===(void 0===p?"undefined":o()(p)))return p.v}else{for(var d=/\$\(([\w]+)\)/g,_=void 0;null!==(_=d.exec(s.rowkey));)e.push(_[1]);for(var h=function(t){if(!(a.i(J.isObject)(l[0])?l.find(function(a){return""+(void 0!==a.key?a.key:a.index)==""+e[t]?a:void 0}):l.find(function(a){return a===e[t]})))return u.a.error("rowkey在已映射的字段中并未找到"+e[t]+"！"),{v:{v:!1}}},c=0;c<e.length;c++){var f=h(c);if("object"===(void 0===f?"undefined":o()(f)))return f.v}}return{v:!0}}();if("object"===(void 0===c?"undefined":o()(c)))return c.v}else if(!s.rowkey)return u.a.error("目标表rowkey不能为空！"),!1}},{key:"__copySourceCols__REACT_HOT_LOADER__",value:function(e){(0,this.props.addBatchTargetKeyRow)(e&&e.map(function(e){return{key:e.key||e.index,type:e.type}}))}},{key:"__batchTextChange__REACT_HOT_LOADER__",value:function(e){this.state.batchModal;this.setState({batchModal:{visible:!0,batchText:e.target.value}})}},{key:"__batchSourceTextChange__REACT_HOT_LOADER__",value:function(e){this.state.batchSourceModal;this.setState({batchSourceModal:{visible:!0,batchText:e.target.value}})}},{key:"__doBatchImport__REACT_HOT_LOADER__",value:function(){var e=this.state.batchModal,t=e.batchText,a=this.props,n=a.addBatchTargetKeyRow,r=a.targetSrcType,i=Z.a.trim(t),s=i.split(","),o=[];switch(r){case te.k.FTP:case te.k.HDFS:for(var l=0;l<s.length;l++){var c=s[l];if(c){var p=c.split(":"),d=p[0],_=p[1];if(!te.l.includes(_))return void u.a.error("字段"+d+"的数据类型错误！");o.push({key:d,type:_})}}break;case te.k.HBASE:for(var h=0;h<s.length;h++){var f=s[h];if(f){var m=f.split(":"),g=Z.a.trim(m[0]),E=Z.a.trim(m[1]),v=Z.a.trim(m[2]);if(!te.l.includes(v))return void u.a.error("字段"+E+"的数据类型错误！");o.push({cf:g,key:E,type:v})}}}n(o),this.hideBatchImportModal()}},{key:"__hideBatchImportModal__REACT_HOT_LOADER__",value:function(){this.setState({batchModal:{visible:!1,batchText:""}})}},{key:"__hideBatchSourceModal__REACT_HOT_LOADER__",value:function(){this.setState({batchSourceModal:{visible:!1,batchText:""}})}},{key:"__importFields__REACT_HOT_LOADER__",value:function(){this.setState({batchModal:{visible:!0}})}},{key:"__importSourceFields__REACT_HOT_LOADER__",value:function(){this.setState({batchSourceModal:{visible:!0}})}},{key:"__doBatchAddSourceFields__REACT_HOT_LOADER__",value:function(){var e=this.state.batchSourceModal,t=e.batchText,n=this.props,r=n.addBatchSourceKeyRow,i=n.sourceSrcType,s=(Z.a.trim(t),t.split(",")),o=[];switch(i){case te.k.FTP:case te.k.HDFS:for(var l=0;l<s.length;l++){var c=s[l];if(c){var p=c.split(":"),d=Z.a.trim(p[0]),_=Z.a.trim(p[1]);if(!a.i(J.isNumber)(+d))return void u.a.error("索引名称应该为整数数字！");if(!te.l.includes(_))return void u.a.error("字段"+d+"的数据类型错误！");o.push({index:parseInt(d,10),type:_})}}break;case te.k.HBASE:o.push(oe);for(var h=0;h<s.length;h++){var f=s[h];if(f){var m=f.split(":"),g=Z.a.trim(m[0]),E=Z.a.trim(m[1]),v=Z.a.trim(m[2]);if(!te.l.includes(v))return void u.a.error("字段"+E+"的数据类型错误！");o.push({cf:g,key:E,type:v})}}}r(o),this.hideBatchSourceModal()}},{key:"setRowMap",value:function(){var e=this.state,t=e.rowMap,a=e.nameMap,n=this.props,i=n.targetCol,s=n.sourceCol,o=n.sourceSrcType,l=(n.sourceFileType,n.targetSrcType),c=(n.targetFileType,function(e){return r(o)&&(e=e.map(function(e){return e.key})),e}),u=function(e){return r(l)&&(e=e.map(function(e){return e.key})),e};t?this.props.resetLinkedKeys():this.props.setRowMap({sourceCol:c(s),targetCol:u(i)}),this.setState({rowMap:!t,nameMap:a?!a:a})}},{key:"setNameMap",value:function(){var e=this.state,t=e.nameMap,a=e.rowMap,n=this.props,r=n.targetCol,i=n.sourceCol,s=n.targetSrcType;t?this.props.resetLinkedKeys():this.props.setNameMap({sourceCol:i,targetCol:r,targetSrcType:s}),this.setState({nameMap:!t,rowMap:a?!a:a})}},{key:"initAddKeyRow",value:function(e,t){this.setState({keyModalVisible:!0,keyModal:{operation:"add",isReader:e,fileType:t}})}},{key:"__initEditKeyRow__REACT_HOT_LOADER__",value:function(e,t,a,n,r){this.setState({keyModalVisible:!0,keyModal:{operation:"edit",isReader:e,fileType:t,editField:n,position:r,source:a}})}},{key:"__doAddkeyRow__REACT_HOT_LOADER__",value:function(e){var t=this.state.keyModal.isReader,a=this.props,n=a.addSourceKeyRow,r=a.addTargetKeyRow;e&&(t?n(e):r(e),this.hideKeyModal())}},{key:"__doEditKeyRow__REACT_HOT_LOADER__",value:function(e){var t=this.props,a=t.editSourceKeyRow,n=t.editTargetKeyRow,r=t.editKeyMapTarget,i=this.state.keyModal,s=i.isReader,o=i.position,l=(i.source,i.editField);e&&(s?a(e):(n({index:o,value:e}),r({old:l,replace:e})),this.hideKeyModal())}},{key:"__hideKeyModal__REACT_HOT_LOADER__",value:function(){this.setState({keyModalVisible:!1,keyModal:{operation:"add",editField:"",source:""}})}}]),t}(Y.a.Component),ce=function(e){var t=e.offlineTask.dataSync;return{sourceMap:t.sourceMap,targetMap:t.targetMap,targetCol:t.targetMap.column||[],targetSrcType:t.targetMap.type&&t.targetMap.type.type,targetFileType:t.sourceMap.type&&t.targetMap.type.fileType,sourceCol:t.sourceMap.column||[],sourceSrcType:t.sourceMap.type&&t.sourceMap.type.type,sourceFileType:t.sourceMap.type&&t.sourceMap.type.fileType,keymap:t.keymap}},ue=a.i(Q.connect)(ce,X.b)(le);t.a=ue;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ie,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(se,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(oe,"DefaultRowKey","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(n,"isHdfsType","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(r,"isRDB","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(i,"scrollText","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(le,"Keymap","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(ce,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"),__REACT_HOT_LOADER__.register(ue,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/index.js"))}()},1632:function(e,t,a){"use strict";var n=a(29),r=(a.n(n),a(39)),i=a.n(r),s=a(28),o=(a.n(s),a(27)),l=a.n(o),c=a(24),u=(a.n(c),a(22)),p=a.n(u),d=a(43),_=(a.n(d),a(42)),h=a.n(_),f=a(38),m=(a.n(f),a(16)),g=a.n(m),E=a(5),v=a.n(E),y=a(11),k=a.n(y),A=a(1),T=a.n(A),C=a(4),b=a.n(C),O=a(3),R=a.n(O),w=a(2),D=a.n(w),S=a(73),L=(a.n(S),a(69)),x=a.n(L),H=a(26),M=(a.n(H),a(25)),N=a.n(M),F=a(32),B=(a.n(F),a(31)),I=a.n(B),V=a(0),U=a.n(V),P=a(23),z=a(30),j=(a.n(z),a(35)),q=a.n(j),K=a(19),G=a(136),W=a(1160),Y=a(758),Q=a(34),J=I.a.Item,$=N.a.Option,X=x.a.Group,Z=function(e){function t(e){T()(this,t);var a=R()(this,(t.__proto__||k()(t)).call(this,e));return a.getTableList=function(){return a.__getTableList__REACT_HOT_LOADER__.apply(a,arguments)},a.validatePath=function(){return a.__validatePath__REACT_HOT_LOADER__.apply(a,arguments)},a.state={tableList:[],showPreview:!1,dataSource:[],columns:[]},a}return D()(t,e),b()(t,[{key:"componentDidMount",value:function(){var e=this.props.sourceMap,t=e.sourceId;t&&this.getTableList(t)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timerID)}},{key:"__getTableList__REACT_HOT_LOADER__",value:function(e){var t=this,a=this.props.sourceMap;(!a.type||a.type.type!==Q.k.HDFS&&a.type.type!==Q.k.FTP)&&this.setState({tableList:[],showPreview:!1},function(){K.a.getOfflineTableList({sourceId:e,isSys:!1}).then(function(e){1===e.code&&t.setState({tableList:e.data||[]})})})}},{key:"getTableColumn",value:function(e){var t=this.props,a=t.form,n=t.handleTableColumnChange,r=this.props.sourceMap;if(!r.type||r.type.type!==Q.k.HBASE){var i=a.getFieldValue("sourceId");K.a.getOfflineTableColumn({sourceId:i,tableName:e}).then(function(e){1===e.code&&n(e.data)})}}},{key:"getDataObjById",value:function(e){return this.props.dataSourceList.filter(function(t){return t.id==e})[0]}},{key:"changeSource",value:function(e){var t=this,a=this.props.handleSourceChange;setTimeout(function(){t.getTableList(e)},0),a(this.getDataObjById(e))}},{key:"changeTable",value:function(e){this.getTableColumn(e),this.submitForm(),this.setState({showPreview:!1})}},{key:"__validatePath__REACT_HOT_LOADER__",value:function(e,t,a){var n=this.props,r=n.handleTableColumnChange,i=n.form,s=i.getFieldValue,o=s("sourceId");"orc"===s("fileType")?K.a.getOfflineTableColumn({sourceId:o,tableName:t}).then(function(e){1===e.code&&(r(e.data),a()),a("该路径无效！")}):a()}},{key:"submitForm",value:function(){var e=this,t=this.props,n=t.updateTaskFields,r=t.form,i=t.handleSourceMapChange,s=t.currentTab,o=(t.sourceMap,t.taskCustomParams);this.timerID=setTimeout(function(){var t=r.getFieldsValue();for(var l in t)""===t[l]&&delete t[l];if(t.where){var c=a.i(Y.d)(o,t.where);c.length>0&&n({id:s,taskVariables:c})}var u=q()(t,{src:e.getDataObjById(t.sourceId)});i(u)},0)}},{key:"next",value:function(e){var t=this.props,a=t.form,n=(t.handleSourceMapChange,t.sourceMap),r=null;n.type&&n.type.type===Q.k.HDFS&&(r=["sourceId","path","fileType"],"text"===n.type.fileType&&r.push("encoding")),a.validateFieldsAndScroll(r,{force:!0},function(t,a){t||e.call(null,1)})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,n=this.props,r=n.sourceMap,i=n.dataSourceList,s=n.navtoStep,o=n.isCurrentTabNew;return U.a.createElement("div",{className:"g-step1"},U.a.createElement(I.a,null,U.a.createElement(J,v()({},Q.e,{label:"数据源"}),t("sourceId",{rules:[{required:!0}],initialValue:a.i(z.isEmpty)(r)?"":""+r.sourceId})(U.a.createElement(N.a,{showSearch:!0,onChange:this.changeSource.bind(this),disabled:!o},i.map(function(e){return U.a.createElement($,{key:e.id,value:""+e.id},e.dataName,"( ",Q.m[e.type]," )")})))),this.renderDynamicForm()),U.a.createElement("div",{className:"m-datapreview",style:{width:"90%",margin:"0 auto",overflow:"auto"}},U.a.createElement("p",{style:{cursor:"pointer",marginBottom:10}},U.a.createElement("a",{href:"javascript:void(0)",onClick:this.loadPreview.bind(this),disabled:a.i(z.isEmpty)(r)||r.type.type===Q.k.HDFS||r.type.type===Q.k.HBASE},"数据预览",this.state.showPreview?U.a.createElement(g.a,{type:"up"}):U.a.createElement(g.a,{type:"down"}))),this.state.showPreview?U.a.createElement(h.a,{dataSource:this.state.dataSource,columns:this.state.columns,scroll:{x:200*this.state.columns.length},pagination:!1,bordered:!1}):null),!this.props.readonly&&U.a.createElement("div",{className:"steps-action"},U.a.createElement(p.a,{type:"primary",onClick:function(){return e.next(s)}},"下一步")))}},{key:"loadPreview",value:function(){var e=this,t=this.state.showPreview,a=this.props.form,n=a.getFieldValue("sourceId"),r=a.getFieldValue("table");if(!n||!r)return void l.a.error("数据源或表名缺失");t?this.setState({showPreview:!1}):K.a.getDataPreview({sourceId:n,tableName:r}).then(function(t){if(1===t.code){var a=t.data,n=a.columnList,r=a.dataList,i=n.map(function(e){return{title:e,dataIndex:e,key:e}}),s=r.map(function(e,t){for(var a={},r=0;r<e.length;r++)a.key=t,a[n[r]]=e[r];return a});e.setState({columns:i,dataSource:s,showPreview:!0})}})}},{key:"renderDynamicForm",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,n=t.sourceMap,r=(t.dataSourceList,t.isCurrentTabNew),s=n.type&&n.type.fileType||"text",o=void 0;if(a.i(z.isEmpty)(n))return null;switch(n.type.type){case Q.k.MYSQL:case Q.k.ORACLE:case Q.k.SQLSERVER:o=[U.a.createElement(J,v()({},Q.e,{label:"表名",key:"table"}),e("table",{rules:[{required:!0}],initialValue:a.i(z.isEmpty)(n)?"":n.type.table})(U.a.createElement(N.a,{showSearch:!0,onChange:this.changeTable.bind(this),disabled:!r},this.state.tableList.map(function(e){return U.a.createElement($,{key:"rdb-"+e,value:e},e)})))),U.a.createElement(J,v()({},Q.e,{label:"数据过滤",key:"where"}),e("where",{rules:[{max:1e3,message:"过滤语句不可超过1000个字符!"}],initialValue:a.i(z.isEmpty)(n)?"":n.type.where})(U.a.createElement(i.a,{type:"textarea",placeholder:"请参考相关SQL语法填写where过滤语句（不要填写where关键字）。该过滤语句通常用作增量同步",onChange:this.submitForm.bind(this)})),U.a.createElement(W.a,{doc:"dataFilterDoc"})),U.a.createElement(J,v()({},Q.e,{label:"切分键",key:"splitPK"}),e("splitPK",{rules:[],initialValue:a.i(z.isEmpty)(n)?"":n.type.splitPK})(U.a.createElement(i.a,{type:"text",placeholder:"根据配置的字段进行数据分片，实现并发读取",onChange:this.submitForm.bind(this)})),U.a.createElement(W.a,{doc:"switchKey"}))];break;case Q.k.HIVE:o=[U.a.createElement(J,v()({},Q.e,{label:"表名",key:"table"}),e("table",{rules:[{required:!0}],initialValue:a.i(z.isEmpty)(n)?"":n.type.table})(U.a.createElement(N.a,{showSearch:!0,onChange:this.changeTable.bind(this),disabled:!r},this.state.tableList.map(function(e){return U.a.createElement($,{key:"rdb-"+e,value:e},e)})))),U.a.createElement(J,v()({},Q.e,{label:"分区",key:"partition"}),e("partition",{rules:[],initialValue:a.i(z.isEmpty)(n)?"":n.type.partition})(U.a.createElement(i.a,{placeholder:"请填写分区",onChange:this.submitForm.bind(this)})))];break;case Q.k.HDFS:o=[U.a.createElement(J,v()({},Q.e,{label:"路径",key:"path"}),e("path",{rules:[{required:!0,message:"路径不得为空！"},{max:200,message:"路径不得超过200个字符！"},{validator:this.validatePath}],validateTrigger:"onSubmit",initialValue:a.i(z.isEmpty)(n)?"":n.type.path})(U.a.createElement(i.a,{placeholder:"例如: /rdos/batch",onChange:this.submitForm.bind(this)})),U.a.createElement(W.a,{doc:"hdfsPath"})),U.a.createElement(J,v()({},Q.e,{label:"文件类型",key:"fileType"}),e("fileType",{rules:[{required:!0}],initialValue:n.type&&n.type.fileType?n.type.fileType:"text"})(U.a.createElement(N.a,{onChange:this.submitForm.bind(this)},U.a.createElement($,{value:"orc"},"orc"),U.a.createElement($,{value:"text"},"text")))),U.a.createElement(J,v()({},Q.e,{label:"编码",key:"encoding",style:{display:"text"===s?"block":"none"}}),e("encoding",{rules:[{required:!0}],initialValue:n.type&&n.type.encoding?n.type.encoding:"utf-8"})(U.a.createElement(N.a,{onChange:this.submitForm.bind(this)},U.a.createElement($,{value:"utf-8"},"utf-8"),U.a.createElement($,{value:"gbk"},"gbk")))),U.a.createElement(J,v()({},Q.e,{style:{display:"text"===s?"block":"none"},label:"分隔符",key:"fieldDelimiter"}),e("fieldDelimiter",{rules:[],initialValue:a.i(z.isEmpty)(n)?",":n.type.fieldDelimiter})(U.a.createElement(i.a,{placeholder:"若不填写，则默认为\\001",onChange:this.submitForm.bind(this)})))];break;case Q.k.HBASE:o=[U.a.createElement(J,v()({},Q.e,{label:"表名",key:"table"}),e("table",{rules:[{required:!0}],initialValue:a.i(z.isEmpty)(n)?"":n.type.table})(U.a.createElement(N.a,{showSearch:!0,onChange:this.changeTable.bind(this),disabled:!r},this.state.tableList.map(function(e){return U.a.createElement($,{key:"hbase-"+e,value:e},e)})))),U.a.createElement(J,v()({},Q.e,{label:"编码",key:"encoding"}),e("encoding",{rules:[{required:!0}],initialValue:n.type&&n.type.encoding?n.type.encoding:"utf-8"})(U.a.createElement(N.a,{onChange:this.submitForm.bind(this)},U.a.createElement($,{value:"utf-8"},"utf-8"),U.a.createElement($,{value:"gbk"},"gbk")))),U.a.createElement(J,v()({},Q.e,{label:"开始行健",key:"startRowkey"}),e("startRowkey",{rules:[],initialValue:n.type&&n.type.startRowkey?n.type.startRowkey:""})(U.a.createElement(i.a,{placeholder:"startRowkey",onChange:this.submitForm.bind(this)}))),U.a.createElement(J,v()({},Q.e,{label:"结束行健",key:"endRowkey"}),e("endRowkey",{rules:[],initialValue:n.type&&n.type.endRowkey?n.type.endRowkey:""})(U.a.createElement(i.a,{placeholder:"endRowkey",onChange:this.submitForm.bind(this)}))),U.a.createElement(J,v()({},Q.e,{className:"txt-left",label:"行健二进制转换",key:"isBinaryRowkey"}),e("isBinaryRowkey",{rules:[],initialValue:n.type&&n.type.isBinaryRowkey?n.type.isBinaryRowkey:"0"})(U.a.createElement(X,{onChange:this.submitForm.bind(this)},U.a.createElement(x.a,{value:"0",style:{float:"left"}},"FALSE"),U.a.createElement(x.a,{value:"1",style:{float:"left"}},"TRUE")))),U.a.createElement(J,v()({},Q.e,{label:"每次RPC请求获取行数",key:"scanCacheSize"}),e("scanCacheSize",{rules:[],initialValue:n.type&&n.type.scanCacheSize?n.type.scanCacheSize:""})(U.a.createElement(i.a,{onChange:this.submitForm.bind(this),placeholder:"请输入大小, 默认为256",type:"number",min:0,suffix:"行"}))),U.a.createElement(J,v()({},Q.e,{label:"每次RPC请求获取列数",key:"scanBatchSize"}),e("scanBatchSize",{rules:[],initialValue:n.type&&n.type.scanBatchSize?n.type.scanBatchSize:""})(U.a.createElement(i.a,{onChange:this.submitForm.bind(this),placeholder:"请输入大小, 默认为100",type:"number",min:0,suffix:"列"})))];break;case Q.k.FTP:o=[U.a.createElement(J,v()({},Q.e,{label:"路径",key:"path"}),e("path",{rules:[{required:!0,message:"路径不得为空！"},{max:200,message:"路径不得超过200个字符！"},{validator:this.validatePath}],validateTrigger:"onSubmit",initialValue:a.i(z.isEmpty)(n)?"":n.type.path})(U.a.createElement(i.a,{placeholder:"例如: /rdos/batch",onChange:this.submitForm.bind(this)}))),U.a.createElement(J,v()({},Q.e,{label:"编码",key:"encoding",style:{display:"text"===s?"block":"none"}}),e("encoding",{rules:[{required:!0,message:"必须选择一种编码！"}],initialValue:n.type&&n.type.encoding?n.type.encoding:"utf-8"})(U.a.createElement(N.a,{onChange:this.submitForm.bind(this)},U.a.createElement($,{value:"utf-8"},"utf-8"),U.a.createElement($,{value:"gbk"},"gbk")))),U.a.createElement(J,v()({},Q.e,{style:{display:"text"===s?"block":"none"},label:"分隔符",key:"fieldDelimiter"}),e("fieldDelimiter",{rules:[{required:!0,message:"分隔符不可为空！"}],initialValue:a.i(z.isEmpty)(n)?",":n.type.fieldDelimiter})(U.a.createElement(i.a,{placeholder:"\\001",onChange:this.submitForm.bind(this)})))]}return o}}]),t}(U.a.Component),ee=I.a.create()(Z),te=function(e){function t(e){return T()(this,t),R()(this,(t.__proto__||k()(t)).call(this,e))}return D()(t,e),b()(t,[{key:"render",value:function(){return U.a.createElement("div",null,U.a.createElement(ee,this.props))}}]),t}(U.a.Component),ae=function(e){var t=e.offlineTask,a=t.dataSync,n=t.workbench;return{isCurrentTabNew:n.isCurrentTabNew,currentTab:n.currentTab,sourceMap:a.sourceMap,dataSourceList:a.dataSourceList,taskCustomParams:n.taskCustomParams}},ne=function(e){return{handleSourceChange:function(t){e({type:G.c.RESET_SOURCE_MAP}),e({type:G.c.RESET_KEYMAP}),e({type:G.d.DATA_SOURCE_CHANGE,payload:t}),e({type:G.h.MAKE_TAB_DIRTY})},handleSourceMapChange:function(t){e({type:G.d.DATA_SOURCEMAP_CHANGE,payload:t}),e({type:G.h.MAKE_TAB_DIRTY})},handleTableColumnChange:function(t){e({type:G.d.SOURCE_TABLE_COLUMN_CHANGE,payload:t}),e({type:G.h.MAKE_TAB_DIRTY})},updateTaskFields:function(t){e({type:G.h.SET_TASK_FIELDS_VALUE,payload:t})}}},re=a.i(P.connect)(ae,ne)(te);t.a=re;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(J,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register($,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register(X,"RadioGroup","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register(Z,"SourceForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register(ee,"SourceFormWrap","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register(te,"Source","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register(ae,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register(ne,"mapDispatch","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"),__REACT_HOT_LOADER__.register(re,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/source.js"))}()},1633:function(e,t,a){"use strict";var n=a(29),r=(a.n(n),a(39)),i=a.n(r),s=a(24),o=(a.n(s),a(22)),l=a.n(o),c=a(5),u=a.n(c),p=a(11),d=a.n(p),_=a(1),h=a.n(_),f=a(4),m=a.n(f),g=a(3),E=a.n(g),v=a(2),y=a.n(v),k=a(73),A=(a.n(k),a(69)),T=a.n(A),C=a(26),b=(a.n(C),a(25)),O=a.n(b),R=a(32),w=(a.n(R),a(31)),D=a.n(w),S=a(0),L=a.n(S),x=a(23),H=a(30),M=(a.n(H),a(35)),N=a.n(M),F=a(19),B=a(136),I=a(34),V=a(758),U=D.a.Item,P=O.a.Option,z=T.a.Group,j=function(e){function t(e){h()(this,t);var a=E()(this,(t.__proto__||d()(t)).call(this,e));return a.getTableList=function(){return a.__getTableList__REACT_HOT_LOADER__.apply(a,arguments)},a.getTableColumn=function(){return a.__getTableColumn__REACT_HOT_LOADER__.apply(a,arguments)},a.state={tableList:[]},a}return y()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e=this.props.targetMap,t=e.sourceId;t&&this.getTableList(t)}},{key:"__getTableList__REACT_HOT_LOADER__",value:function(e){var t=this,a=this.props.targetMap;if(a.type&&(a.type.type===I.k.HDFS||a.type.type===I.k.FTP))return!0;t.setState({tableList:[]},function(){F.a.getOfflineTableList({sourceId:e,isSys:!1}).then(function(e){1===e.code&&t.setState({tableList:e.data})})})}},{key:"__getTableColumn__REACT_HOT_LOADER__",value:function(e){var t=this.props,a=t.form,n=t.handleTableColumnChange,r=t.targetMap,i=a.getFieldValue("sourceId");if(r.type&&r.type.type===I.k.HBASE)return!0;F.a.getOfflineTableColumn({sourceId:i,tableName:e}).then(function(e){1===e.code&&n(e.data)})}},{key:"getDataObjById",value:function(e){return this.props.dataSourceList.filter(function(t){return t.id==e})[0]}},{key:"changeSource",value:function(e){var t=this,a=this.props.handleSourceChange;setTimeout(function(){t.getTableList(e)},0),a(this.getDataObjById(e))}},{key:"changeTable",value:function(e){this.getTableColumn(e),this.submitForm()}},{key:"submitForm",value:function(){var e=this,t=this.props,n=t.taskCustomParams,r=t.updateTaskFields,i=t.form,s=t.handleTargetMapChange,o=t.currentTab;setTimeout(function(){var t=i.getFieldsValue(),l=t.preSql+" "+t.postSql;if(l){var c=a.i(V.d)(n,l);c.length>0&&r({id:o,taskVariables:c})}var u=N()(t,{src:e.getDataObjById(t.sourceId)});s(u)},0)}},{key:"prev",value:function(e){e.call(null,0)}},{key:"next",value:function(e){var t=this.props,a=t.form;t.handleTargetMapChange;a.validateFields(function(t,a){t||e.call(null,2)})}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,n=this.props,r=n.targetMap,i=n.dataSourceList,s=n.navtoStep,o=n.isCurrentTabNew;return L.a.createElement("div",{className:"g-step2"},L.a.createElement(D.a,null,L.a.createElement(U,u()({},I.e,{label:"数据同步目标"}),t("sourceId",{rules:[{required:!0}],initialValue:a.i(H.isEmpty)(r)?"":""+r.sourceId})(L.a.createElement(O.a,{showSearch:!0,onChange:this.changeSource.bind(this),disabled:!o},i.map(function(e){return L.a.createElement(P,{key:e.id,value:""+e.id},e.dataName,"( ",I.m[e.type]," )")})))),this.renderDynamicForm()),!this.props.readonly&&L.a.createElement("div",{className:"steps-action"},L.a.createElement(l.a,{style:{marginRight:8},onClick:function(){return e.prev(s)}},"上一步"),L.a.createElement(l.a,{type:"primary",onClick:function(){return e.next(s)}},"下一步")))}},{key:"renderDynamicForm",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,n=t.targetMap,r=(t.dataSourceList,t.isCurrentTabNew),s=void 0;if(a.i(H.isEmpty)(n))return null;switch(n.type.type){case I.k.MYSQL:case I.k.ORACLE:case I.k.SQLSERVER:s=[L.a.createElement(U,u()({},I.e,{label:"表名",key:"table"}),e("table",{rules:[{required:!0}],initialValue:a.i(H.isEmpty)(n)?"":n.type.table})(L.a.createElement(O.a,{showSearch:!0,onChange:this.changeTable.bind(this),disabled:!r},this.state.tableList.map(function(e){return L.a.createElement(P,{key:"rdb-target-"+e,value:e},e)})))),L.a.createElement(U,u()({},I.e,{label:"导入前准备语句",key:"preSql"}),e("preSql",{rules:[],initialValue:a.i(H.isEmpty)(n)?"":n.type.preSql})(L.a.createElement(i.a,{onChange:this.submitForm.bind(this),placeholder:"请输入导入数据前执行的SQL脚本",type:"textarea"}))),L.a.createElement(U,u()({},I.e,{label:"导入后准备语句",key:"postSql"}),e("postSql",{rules:[],initialValue:a.i(H.isEmpty)(n)?"":n.type.postSql})(L.a.createElement(i.a,{onChange:this.submitForm.bind(this),placeholder:"请输入导入数据后执行的SQL脚本",type:"textarea"}))),L.a.createElement(U,u()({},I.e,{label:"主键冲突",key:"writeMode",className:"txt-left"}),e("writeMode",{rules:[{required:!0}],initialValue:n.type&&n.type.writeMode?n.type.writeMode:"replace"})(L.a.createElement(z,{onChange:this.submitForm.bind(this)},L.a.createElement(T.a,{value:"replace",style:{float:"left"}},"替换原有数据（Replace Into）"),L.a.createElement(T.a,{value:"insert",style:{float:"left"}},"视为脏数据，保留原有数据（Insert Into）"))))];break;case I.k.HIVE:s=[L.a.createElement(U,u()({},I.e,{label:"表名",key:"table"}),e("table",{rules:[{required:!0}],initialValue:a.i(H.isEmpty)(n)?"":n.type.table})(L.a.createElement(O.a,{showSearch:!0,onChange:this.changeTable.bind(this),disabled:!r},this.state.tableList.map(function(e){return L.a.createElement(P,{key:"rdb-target-"+e,value:e},e)})))),L.a.createElement(U,u()({},I.e,{label:"分区",key:"partition"}),e("partition",{rules:[],initialValue:a.i(H.isEmpty)(n)?"":n.type.partition})(L.a.createElement(i.a,{onChange:this.submitForm.bind(this),placeholder:"请输入分区"}))),L.a.createElement(U,u()({},I.e,{label:"写入模式",key:"writeMode",className:"txt-left"}),e("writeMode",{rules:[{required:!0}],initialValue:n&&n.type?n.type.writeMode:"replace"})(L.a.createElement(z,{onChange:this.submitForm.bind(this)},L.a.createElement(T.a,{value:"replace",style:{float:"left"}},"覆盖（Insert Overwrite）"),L.a.createElement(T.a,{value:"insert",style:{float:"left"}},"追加（Insert Into）"))))];break;case I.k.HDFS:s=[L.a.createElement(U,u()({},I.e,{label:"路径",key:"path"}),e("path",{rules:[{required:!0}],initialValue:a.i(H.isEmpty)(n)?"":n.type.path})(L.a.createElement(i.a,{placeholder:"例如: /rdos/batch",onChange:this.submitForm.bind(this)}))),L.a.createElement(U,u()({},I.e,{label:"分隔符",key:"fieldDelimiter"}),e("fieldDelimiter",{rules:[],initialValue:a.i(H.isEmpty)(n)?",":n.type.fieldDelimiter})(L.a.createElement(i.a,{placeholder:"例如: 目标为hive则 分隔符为\\001",onChange:this.submitForm.bind(this)}))),L.a.createElement(U,u()({},I.e,{label:"编码",key:"encoding"}),e("encoding",{rules:[{required:!0}],initialValue:a.i(H.isEmpty)(n)||!n.type.encoding?"utf-8":n.type.encoding})(L.a.createElement(O.a,{onChange:this.submitForm.bind(this)},L.a.createElement(P,{value:"utf-8"},"utf-8"),L.a.createElement(P,{value:"gbk"},"gbk")))),L.a.createElement(U,u()({},I.e,{label:"文件名",key:"fileName"}),e("fileName",{rules:[{required:!0}],initialValue:a.i(H.isEmpty)(n)?"":n.type.fileName})(L.a.createElement(i.a,{onChange:this.submitForm.bind(this)}))),L.a.createElement(U,u()({},I.e,{label:"文件类型",key:"fileType"}),e("fileType",{rules:[{required:!0}],initialValue:n.type&&n.type.fileType?n.type.fileType:"orc"})(L.a.createElement(O.a,{onChange:this.submitForm.bind(this)},L.a.createElement(P,{value:"orc"},"orc"),L.a.createElement(P,{value:"text"},"text")))),L.a.createElement(U,u()({},I.e,{label:"写入模式",className:"txt-left",key:"writeMode"}),e("writeMode",{rules:[{required:!0}],initialValue:n.type&&n.type.writeMode?n.type.writeMode:"APPEND"})(L.a.createElement(z,{onChange:this.submitForm.bind(this)},L.a.createElement(T.a,{value:"APPEND",style:{float:"left"}},"追加新数据"),L.a.createElement(T.a,{value:"NONCONFLICT",style:{float:"left"}},"覆盖老数据"))))];break;case I.k.HBASE:s=[L.a.createElement(U,u()({},I.e,{label:"表名",key:"table"}),e("table",{rules:[{required:!0}],initialValue:n.type&&n.type.table?n.type.table:""})(L.a.createElement(O.a,{showSearch:!0,onChange:this.changeTable.bind(this),disabled:!r},this.state.tableList.map(function(e){return L.a.createElement(P,{key:"hbase-target-"+e,value:e},e)})))),L.a.createElement(U,u()({},I.e,{label:"编码",key:"encoding"}),e("encoding",{rules:[{required:!0}],initialValue:n.type&&n.type.encoding?n.type.encoding:"utf-8"})(L.a.createElement(O.a,{onChange:this.submitForm.bind(this)},L.a.createElement(P,{value:"utf-8"},"utf-8"),L.a.createElement(P,{value:"gbk"},"gbk")))),L.a.createElement(U,u()({},I.e,{label:"读取为空时的处理方式",key:"nullMode",className:"txt-left"}),e("nullMode",{rules:[{required:!0,message:"请选择为空时的处理方式!"}],initialValue:n.type&&n.type.nullMode?n.type.nullMode:"skip"})(L.a.createElement(z,{onChange:this.submitForm.bind(this)},L.a.createElement(T.a,{value:"skip",style:{float:"left"}},"SKIP"),L.a.createElement(T.a,{value:"empty",style:{float:"left"}},"EMPTY")))),L.a.createElement(U,u()({},I.e,{label:"写入缓存大小",key:"writeBufferSize"}),e("writeBufferSize",{rules:[],initialValue:a.i(H.isEmpty)(n)?"":n.type.writeBufferSize})(L.a.createElement(i.a,{onChange:this.submitForm.bind(this),placeholder:"请输入缓存大小",type:"number",min:0,suffix:"KB"})))];break;case I.k.FTP:s=[L.a.createElement(U,u()({},I.e,{label:"路径",key:"path"}),e("path",{rules:[{required:!0,message:"路径不得为空！"},{max:200,message:"路径不得超过200个字符！"},{validator:this.validatePath}],validateTrigger:"onSubmit",initialValue:a.i(H.isEmpty)(n)?"":n.type.path})(L.a.createElement(i.a,{placeholder:"例如: /rdos/batch",onChange:this.submitForm.bind(this)}))),L.a.createElement(U,u()({},I.e,{label:"编码",key:"encoding"}),e("encoding",{rules:[{required:!0}],initialValue:n.type&&n.type.encoding?n.type.encoding:"utf-8"})(L.a.createElement(O.a,{onChange:this.submitForm.bind(this)},L.a.createElement(P,{value:"utf-8"},"utf-8"),L.a.createElement(P,{value:"gbk"},"gbk")))),L.a.createElement(U,u()({},I.e,{label:"分隔符",key:"fieldDelimiter"}),e("fieldDelimiter",{rules:[],initialValue:a.i(H.isEmpty)(n)?",":n.type.fieldDelimiter})(L.a.createElement(i.a,{placeholder:"若不填写，则默认为\\001",onChange:this.submitForm.bind(this)})))]}return s}}]),t}(L.a.Component),q=D.a.create()(j),K=function(e){function t(e){return h()(this,t),E()(this,(t.__proto__||d()(t)).call(this,e))}return y()(t,e),m()(t,[{key:"render",value:function(){return L.a.createElement("div",null,L.a.createElement(q,this.props))}}]),t}(L.a.Component),G=function(e){var t=e.offlineTask,a=t.dataSync,n=t.workbench,r=n.isCurrentTabNew;return{currentTab:n.currentTab,isCurrentTabNew:r,targetMap:a.targetMap,dataSourceList:a.dataSourceList,taskCustomParams:n.taskCustomParams}},W=function(e){return{handleSourceChange:function(t){e({type:B.c.RESET_TARGET_MAP}),e({type:B.c.RESET_KEYMAP}),e({type:B.e.DATA_SOURCE_TARGET_CHANGE,payload:t}),e({type:B.h.MAKE_TAB_DIRTY})},handleTargetMapChange:function(t){e({type:B.e.DATA_TARGETMAP_CHANGE,payload:t}),e({type:B.h.MAKE_TAB_DIRTY})},handleTableColumnChange:function(t){e({type:B.e.TARGET_TABLE_COLUMN_CHANGE,payload:t}),e({type:B.h.MAKE_TAB_DIRTY})},updateTaskFields:function(t){e({type:B.h.SET_TASK_FIELDS_VALUE,payload:t})}}},Y=a.i(x.connect)(G,W)(K);t.a=Y;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(U,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(P,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(z,"RadioGroup","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(j,"TargetForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(q,"TargetFormWrap","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(K,"Target","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(G,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(W,"mapDispatch","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"),__REACT_HOT_LOADER__.register(Y,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/target.js"))}()},1634:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=a(5),i=n(r),s=a(1),o=n(s),l=a(4),c=n(l),u=a(3),p=n(u),d=a(2),_=n(d),h=a(0),f=n(h),m=a(12),g=function(e){function t(){(0,o.default)(this,t);var e=(0,p.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.focus=function(){e.ele.focus?e.ele.focus():(0,m.findDOMNode)(e.ele).focus()},e.blur=function(){e.ele.blur?e.ele.blur():(0,m.findDOMNode)(e.ele).blur()},e.saveRef=function(t){e.ele=t;var a=e.props.children.ref;"function"==typeof a&&a(t)},e}return(0,_.default)(t,e),(0,c.default)(t,[{key:"render",value:function(){return f.default.cloneElement(this.props.children,(0,i.default)({},this.props,{ref:this.saveRef}),null)}}]),t}(f.default.Component);t.default=g,e.exports=t.default},1635:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function r(e){return e&&e.type&&(e.type.isSelectOption||e.type.isSelectOptGroup)}Object.defineProperty(t,"__esModule",{value:!0});var i=a(33),s=n(i),o=a(9),l=n(o),c=a(5),u=n(c),p=a(1),d=n(p),_=a(4),h=n(_),f=a(3),m=n(f),g=a(2),E=n(g),v=a(0),y=n(v),k=a(306),A=a(8),T=n(A),C=a(25),b=n(C),O=a(39),R=n(O),w=a(1634),D=n(w),S=function(e){function t(){(0,d.default)(this,t);var e=(0,m.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.getInputElement=function(){var t=e.props.children,a=t&&y.default.isValidElement(t)&&t.type!==k.Option?y.default.Children.only(e.props.children):y.default.createElement(R.default,null),n=(0,u.default)({},a.props);return delete n.children,y.default.createElement(D.default,n,a)},e}return(0,E.default)(t,e),(0,h.default)(t,[{key:"render",value:function(){var e,t=this.props,a=t.size,n=t.className,i=void 0===n?"":n,o=t.notFoundContent,c=t.prefixCls,p=t.optionLabelProp,d=t.dataSource,_=t.children,h=(0,T.default)((e={},(0,l.default)(e,c+"-lg","large"===a),(0,l.default)(e,c+"-sm","small"===a),(0,l.default)(e,i,!!i),(0,l.default)(e,c+"-show-search",!0),(0,l.default)(e,c+"-auto-complete",!0),e)),f=void 0,m=y.default.Children.toArray(_);return f=m.length&&r(m[0])?_:d?d.map(function(e){if(y.default.isValidElement(e))return e;switch(void 0===e?"undefined":(0,s.default)(e)){case"string":return y.default.createElement(k.Option,{key:e},e);case"object":return y.default.createElement(k.Option,{key:e.value},e.text);default:throw new Error("AutoComplete[dataSource] only supports type `string[] | Object[]`.")}}):[],y.default.createElement(b.default,(0,u.default)({},this.props,{className:h,mode:"combobox",optionLabelProp:p,getInputElement:this.getInputElement,notFoundContent:o}),f)}}]),t}(y.default.Component);t.default=S,S.Option=k.Option,S.OptGroup=k.OptGroup,S.defaultProps={prefixCls:"ant-select",transitionName:"slide-up",optionLabelProp:"children",choiceTransitionName:"zoom",showSearch:!1,filterOption:!1},e.exports=t.default},1636:function(e,t,a){"use strict";a(14),a(1663),a(26)},1637:function(e,t,a){"use strict";var n=a(54),r=a.n(n),i=a(11),s=a.n(i),o=a(1),l=a.n(o),c=a(4),u=a.n(c),p=a(3),d=a.n(p),_=a(2),h=a.n(_),f=a(0),m=a.n(f),g=(a(34),a(1659)),E=(a.n(g),a(301));a(1197),a(1664);var v=function(e){function t(){var e,a,n,r;l()(this,t);for(var i=arguments.length,o=Array(i),c=0;c<i;c++)o[c]=arguments[c];return a=n=d()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(o))),n.initUI=function(){var e;return(e=n).__initUI__REACT_HOT_LOADER__.apply(e,arguments)},r=a,d()(n,r)}return h()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.value,a=e.compareTo;this.initUI(t,a)}},{key:"componentWillReceiveProps",value:function(e){var t=e.value,a=e.compareTo;t&&this.props.value!==t&&this._self.edit.doc.setValue(t),a&&this.props.compareTo!==a&&this._self.right.orig.doc.setValue(a)}},{key:"__initUI__REACT_HOT_LOADER__",value:function(e,t){var a=this.props.onChange,n=this.getCodeMirrorIns(),r=n.MergeView(this.diffView,{value:e,origLeft:null,orig:t,lineNumbers:!0,mode:"text/x-sql",highlightDifferences:!0,connect:null,collapseIdentical:!1});r.edit.doc.on("change",function(t){a&&a(e,t.getValue())}),r.wrap.style.height="500px",this._self=r}},{key:"mergeViewHeight",value:function(e){function t(e){return e?e.getScrollInfo().height:0}return Math.max(t(e.leftOriginal()),t(e.editor()),t(e.rightOriginal()))}},{key:"resize",value:function(e){for(var t=this.mergeViewHeight(e);;){e.leftOriginal()&&e.leftOriginal().setSize(null,t),e.editor().setSize(null,t),e.rightOriginal()&&e.rightOriginal().setSize(null,t);var a=this.mergeViewHeight(e);if(a>=t)break;t=a}e.wrap.style.height=t+"px"}},{key:"getCodeMirrorIns",value:function(){return this._self||E}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.style,i="code-editor";i=a?i+" "+a:i;var s={position:"relative"};return s=n?r()(s,n):s,m.a.createElement("div",{ref:function(t){e.diffView=t},className:i,style:s})}}]),t}(f.Component),y=v;t.a=y;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(v,"DiffEditor","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/components/diff-code-editor/index.js"),__REACT_HOT_LOADER__.register(y,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/components/diff-code-editor/index.js"))}()},1638:function(e,t,a){"use strict";var n=a(49),r=(a.n(n),a(48)),i=a.n(r),s=a(24),o=(a.n(s),a(22)),l=a.n(o),c=a(28),u=(a.n(c),a(27)),p=a.n(u),d=a(82),_=a.n(d),h=a(11),f=a.n(h),m=a(1),g=a.n(m),E=a(4),v=a.n(E),y=a(3),k=a.n(y),A=a(2),T=a.n(A),C=a(0),b=a.n(C),O=a(1639),R=a(1640),w=a(19);a.d(t,"a",function(){return D});var D=function(e){function t(){var e,a,n,r;g()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=k()(this,(e=t.__proto__||f()(t)).call.apply(e,[this].concat(s))),n.state={file:"",startLine:1,asTitle:!0,visible:!1,data:[],splitSymbol:",",charset:"UTF-8",step:"source",tableData:{},targetTable:"",tableList:[],partitions:[],hasPartition:!1,originPartitions:[],columnMap:[],matchType:1,sqlText:"",queryTable:"",overwriteFlag:0},n.importData=function(){var e;return(e=n).__importData__REACT_HOT_LOADER__.apply(e,arguments)},n.checkParams=function(){var e;return(e=n).__checkParams__REACT_HOT_LOADER__.apply(e,arguments)},n.getParams=function(){var e;return(e=n).__getParams__REACT_HOT_LOADER__.apply(e,arguments)},n.fileChange=function(){var e;return(e=n).__fileChange__REACT_HOT_LOADER__.apply(e,arguments)},n.fileClick=function(){var e;return(e=n).__fileClick__REACT_HOT_LOADER__.apply(e,arguments)},n.readFile=function(){var e;return(e=n).__readFile__REACT_HOT_LOADER__.apply(e,arguments)},n.changeStatus=function(){var e;return(e=n).__changeStatus__REACT_HOT_LOADER__.apply(e,arguments)},n.next=function(){var e;return(e=n).__next__REACT_HOT_LOADER__.apply(e,arguments)},n.prev=function(){var e;return(e=n).__prev__REACT_HOT_LOADER__.apply(e,arguments)},r=a,k()(n,r)}return T()(t,e),v()(t,[{key:"__importData__REACT_HOT_LOADER__",value:function(){var e=this,t=this.getParams();this.checkParams(t)&&(t.partitions=_()(t.partitions),t.keyRef=_()(t.keyRef),w.a.importLocalData(t).then(function(t){if(1===t.code){var a="您已经成功导入"+t.data+"条数据！";p.a.success(a),e.setState({visible:!1})}}))}},{key:"__checkParams__REACT_HOT_LOADER__",value:function(e){var t=!0,a=this.state.originPartitions,n=e.partitions;if(!e.tableId)return p.a.error("请选择要导入的目标表！"),!1;if(a&&a.length>0)for(var r=0;r<n.length;r++){var i=n[r],s=a[r].name;""===i[s]&&(p.a.error("分区每项值必填！"),t=!1)}return t}},{key:"__getParams__REACT_HOT_LOADER__",value:function(){var e=this.state,t=e.file,a=e.targetTable,n=e.splitSymbol,r=e.charset,i=e.startLine,s=e.asTitle,o=e.matchType,l=e.columnMap,c=e.partitions,u=e.overwriteFlag;return{tableId:a.tableId,separator:n,oriCharset:r,topLineIsTitle:s,keyRef:l,file:t,matchType:o,startLine:i,partitions:c,overwriteFlag:u}}},{key:"__fileChange__REACT_HOT_LOADER__",value:function(e){var t=this,a=e.target.files[0];this.setState({file:a},function(){t.readFile(a)})}},{key:"__fileClick__REACT_HOT_LOADER__",value:function(e){e.target.value=null,this.setState({file:"",startLine:1,asTitle:!0,visible:!1,data:[],splitSymbol:",",charset:"UTF-8",step:"source",targetTable:"",partitions:[],hasPartition:!1,originPartitions:[],columnMap:[],matchType:1,sqlText:"",queryTable:"",tableData:{},tableList:[]})}},{key:"__readFile__REACT_HOT_LOADER__",value:function(e){var t=this,a=this.state.charset;if(e){var n=new FileReader,r=e.type.split("/")[1];n.onload=function(e){return function(e){var a=t.parseFile(e.target.result,r);t.setState({data:a,step:"source",visible:!0})}}(),n.readAsText(e,a)}}},{key:"parseFile",value:function(e,t){var a=this.state,n=a.splitSymbol,r=a.startLine,i=[],s=this.parseSplitSymbol(n);e=e.split("\n");for(var o=0;o<e.length;o++){var l=e[o].replace(/\r/,"");i.push(l.split(s))}return i.slice(r-1)}},{key:"parseSplitSymbol",value:function(e){switch(e){case"blank":e=" ";break;case"tab":e="   "}return e}},{key:"__changeStatus__REACT_HOT_LOADER__",value:function(e){var t=this,a=this.state.file;this.setState(e,function(){t.readFile(a)})}},{key:"__next__REACT_HOT_LOADER__",value:function(){this.setState({step:"target"})}},{key:"__prev__REACT_HOT_LOADER__",value:function(){this.setState({step:"source"})}},{key:"footer",value:function(){var e=this,t=this.state.step;return b.a.createElement("div",null,b.a.createElement(l.a,{style:{display:"source"===t?"inline-block":"none"},type:"primary",onClick:this.next},"下一步"),b.a.createElement(l.a,{style:{display:"target"===t?"inline-block":"none"},type:"primary",onClick:this.prev},"上一步"),b.a.createElement(l.a,{style:{display:"target"===t?"inline-block":"none"},onClick:this.importData,type:"primary"},"导入"),b.a.createElement(l.a,{onClick:function(){e.setState({visible:!1})}},"取消"))}},{key:"render",value:function(){var e=this,t=this.state,a=t.data,n=t.file,r=t.visible,s=t.step;return b.a.createElement("div",null,b.a.createElement("input",{name:"file",type:"file",accept:".txt,.log,.svg",id:"importFile",onClick:this.fileClick,onChange:this.fileChange,style:{display:"none"}}),b.a.createElement(i.a,{title:"本地数据导入",visible:r,onCancel:function(){e.setState({visible:!1})},footer:this.footer()},b.a.createElement(O.a,{data:a,file:n,display:s,formState:this.state,changeStatus:this.changeStatus}),b.a.createElement(R.a,{data:a,file:n,formState:this.state,changeStatus:function(t){e.setState(t)},display:s})))}}]),t}(C.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(D,"ImportLocalData","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/index.js")}()},1639:function(e,t,a){"use strict";var n=a(43),r=(a.n(n),a(42)),i=a.n(r),s=a(51),o=(a.n(s),a(50)),l=a.n(o),c=a(57),u=(a.n(c),a(55)),p=a.n(u),d=a(29),_=(a.n(d),a(39)),h=a.n(_),f=a(5),m=a.n(f),g=a(11),E=a.n(g),v=a(1),y=a.n(v),k=a(4),A=a.n(k),T=a(3),C=a.n(T),b=a(2),O=a.n(b),R=a(73),w=(a.n(R),a(69)),D=a.n(w),S=a(26),L=(a.n(S),a(25)),x=a.n(L),H=a(32),M=(a.n(H),a(31)),N=a.n(M),F=a(0),B=a.n(F),I=a(34);a.d(t,"a",function(){return z});var V=N.a.Item,U=x.a.Option,P=D.a.Group,z=function(e){function t(){var e,a,n,r;y()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=C()(this,(e=t.__proto__||E()(t)).call.apply(e,[this].concat(s))),n.state={file:"",radio:1},n.splitChange=function(){var e;return(e=n).__splitChange__REACT_HOT_LOADER__.apply(e,arguments)},n.charsetChange=function(){var e;return(e=n).__charsetChange__REACT_HOT_LOADER__.apply(e,arguments)},n.asTitle=function(){var e;return(e=n).__asTitle__REACT_HOT_LOADER__.apply(e,arguments)},n.changeStartLine=function(){var e;return(e=n).__changeStartLine__REACT_HOT_LOADER__.apply(e,arguments)},n.radioChange=function(){var e;return(e=n).__radioChange__REACT_HOT_LOADER__.apply(e,arguments)},n.generateCols=function(){var e;return(e=n).__generateCols__REACT_HOT_LOADER__.apply(e,arguments)},r=a,C()(n,r)}return O()(t,e),A()(t,[{key:"__splitChange__REACT_HOT_LOADER__",value:function(e){this.props.changeStatus({splitSymbol:e})}},{key:"__charsetChange__REACT_HOT_LOADER__",value:function(e){this.props.changeStatus({charset:e})}},{key:"__asTitle__REACT_HOT_LOADER__",value:function(e){var t=e.target.checked;this.props.changeStatus({asTitle:t,matchType:t?1:0})}},{key:"__changeStartLine__REACT_HOT_LOADER__",value:function(e){this.props.changeStatus({startLine:e.target.value})}},{key:"__radioChange__REACT_HOT_LOADER__",value:function(e){this.setState({radio:e.target.value})}},{key:"__generateCols__REACT_HOT_LOADER__",value:function(e,t){if(t&&t.length>0){var a=[];return e?(t.forEach(function(e,t){a.push({title:e,width:150,key:t+e,render:function(e,a){return a[t]}})}),a):(t.forEach(function(e,t){var n="col-"+(t+1);a.push({key:n,title:n})}),a)}return[]}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.file,r=t.display,s=t.formState,o=this.generateCols(s.asTitle,a[0]),c=s.asTitle?a.slice(1):a,u=this.state.radio;return B.a.createElement("div",{style:{display:"source"===r?"block":"none"}},B.a.createElement(l.a,null,B.a.createElement(N.a,null,B.a.createElement(V,m()({},I.e,{label:"已选文件"}),B.a.createElement("span",{style:{fontSize:"14px"}},n.name||""),"  ",B.a.createElement("span",{style:{color:"#f60"}},"只支持.txt、.csv和.log文件类型")),B.a.createElement(V,m()({},I.e,{label:"分隔符"}),B.a.createElement(P,{onChange:this.radioChange,defaultValue:1},B.a.createElement(D.a,{value:1}),B.a.createElement(x.a,{disabled:2===u,style:{width:"80px"},value:s.splitSymbol,onChange:this.splitChange},B.a.createElement(U,{value:","},"逗号"),B.a.createElement(U,{value:"tab"},"Tab"),B.a.createElement(U,{value:";"},"分号"),B.a.createElement(U,{value:"blank"},"空格"),B.a.createElement(U,{value:"|"},"|"),B.a.createElement(U,{value:"#"},"#"),B.a.createElement(U,{value:"&"},"&")),"  ",B.a.createElement(D.a,{value:2},"自定义"),B.a.createElement(h.a,{disabled:1===u,onChange:function(t){e.splitChange(t.target.value)},style:{width:"80px"}}))),B.a.createElement(V,m()({},I.e,{label:"原始字符集"}),B.a.createElement(x.a,{value:s.charset,onChange:this.charsetChange},B.a.createElement(U,{value:"UTF-8"},"UTF-8"),B.a.createElement(U,{value:"GBK"},"GBK"),B.a.createElement(U,{value:"CP936"},"CP936"),B.a.createElement(U,{value:"ISO-8859"},"ISO-8859"))),B.a.createElement(V,m()({},I.e,{label:"导入起始行"}),B.a.createElement(h.a,{onChange:this.changeStartLine,type:"number",min:1,value:s.startLine})),B.a.createElement(V,m()({},I.e,{label:"首行为标题"}),B.a.createElement(p.a,{checked:s.asTitle,onChange:this.asTitle},"是")))),B.a.createElement(l.a,null,B.a.createElement(i.a,{rowKey:"id",scroll:{y:240,x:800},bordered:!0,dataSource:c,columns:o})))}}]),t}(F.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(V,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/source.js"),__REACT_HOT_LOADER__.register(U,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/source.js"),__REACT_HOT_LOADER__.register(P,"RadioGroup","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/source.js"),__REACT_HOT_LOADER__.register(z,"ImportSource","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/source.js"))}()},1640:function(e,t,a){"use strict";var n=a(49),r=(a.n(n),a(48)),i=a.n(r),s=a(43),o=(a.n(s),a(42)),l=a.n(o),c=a(5),u=a.n(c),p=a(51),d=(a.n(p),a(50)),_=a.n(d),h=a(24),f=(a.n(h),a(22)),m=a.n(f),g=a(29),E=(a.n(g),a(39)),v=a.n(E),y=a(45),k=a.n(y),A=a(28),T=(a.n(A),a(27)),C=a.n(T),b=a(9),O=a.n(b),R=a(11),w=a.n(R),D=a(1),S=a.n(D),L=a(4),x=a.n(L),H=a(3),M=a.n(H),N=a(2),F=a.n(N),B=a(26),I=(a.n(B),a(25)),V=a.n(I),U=a(32),P=(a.n(U),a(31)),z=a.n(P),j=a(73),q=(a.n(j),a(69)),K=a.n(q),G=a(0),W=a.n(G),Y=a(30),Q=(a.n(Y),a(13)),J=a(19),$=a(280),X=a(34);a.d(t,"a",function(){return ae});var Z=K.a.Group,ee=z.a.Item,te=V.a.Option,ae=function(e){function t(){var e,n,r,i;S()(this,t);for(var s=arguments.length,o=Array(s),l=0;l<s;l++)o[l]=arguments[l];return n=r=M()(this,(e=t.__proto__||w()(t)).call.apply(e,[this].concat(o))),r.state={visible:!1},r.tableInput=function(){var e;return(e=r).__tableInput__REACT_HOT_LOADER__.apply(e,arguments)},r.tbNameOnChange=function(){var e;return(e=r).__tbNameOnChange__REACT_HOT_LOADER__.apply(e,arguments)},r.debounceSearch=a.i(Y.debounce)(r.tableInput,500,{maxWait:2e3}),r.tableChange=function(){var e;return(e=r).__tableChange__REACT_HOT_LOADER__.apply(e,arguments)},r.checkPartition=function(){var e;return(e=r).__checkPartition__REACT_HOT_LOADER__.apply(e,arguments)},r.createTable=function(){var e;return(e=r).__createTable__REACT_HOT_LOADER__.apply(e,arguments)},r.handleCancel=function(){var e;return(e=r).__handleCancel__REACT_HOT_LOADER__.apply(e,arguments)},r.mapChange=function(){var e;return(e=r).__mapChange__REACT_HOT_LOADER__.apply(e,arguments)},r.changeMatchWay=function(){var e;return(e=r).__changeMatchWay__REACT_HOT_LOADER__.apply(e,arguments)},r.changeImportMode=function(){var e;return(e=r).__changeImportMode__REACT_HOT_LOADER__.apply(e,arguments)},r.tablePartitionChange=function(){var e;return(e=r).__tablePartitionChange__REACT_HOT_LOADER__.apply(e,arguments)},r.ddlChange=function(){var e;return(e=r).__ddlChange__REACT_HOT_LOADER__.apply(e,arguments)},r.generateCols=function(){var e;return(e=r).__generateCols__REACT_HOT_LOADER__.apply(e,arguments)},r.generatePartitions=function(){var e;return(e=r).__generatePartitions__REACT_HOT_LOADER__.apply(e,arguments)},i=n,M()(r,i)}return F()(t,e),x()(t,[{key:"__tableInput__REACT_HOT_LOADER__",value:function(e){var t=this.props.changeStatus;e.length>=2&&J.a.getTablesByName({tableName:e}).then(function(e){1===e.code&&t({tableList:e.data||[]})})}},{key:"__tbNameOnChange__REACT_HOT_LOADER__",value:function(e){this.props.changeStatus({queryTable:e})}},{key:"__tableChange__REACT_HOT_LOADER__",value:function(e,t){var a=t.props.data,n=this.props.changeStatus;J.a.getTable({tableId:a.tableId}).then(function(e){if(1===e.code){var t=e.data,r=t.column&&t.column.map(function(e){return""}),i=t.partition&&t.partition.map(function(e){return O()({},e.name,"")});n({targetTable:a,queryTable:a.tableName,tableData:t,hasPartition:t.partition&&t.partition.length>0,columnMap:r,originPartitions:t.partition,partitions:i})}})}},{key:"__checkPartition__REACT_HOT_LOADER__",value:function(){for(var e=this.props.formState,t=e.targetTable,a=e.partitions,n=e.originPartitions,r=0;r<a.length;r++){var i=a[r],s=n[r].name;if(""===Q.a.trim(i[s]))return void C.a.warning("分区值不可为空！")}J.a.checkTablePartition({tableId:t.tableId,partitionInfo:a}).then(function(e){e.data?C.a.success("分区存在！"):C.a.warning("分区不存在！")})}},{key:"__createTable__REACT_HOT_LOADER__",value:function(){var e=this,t=this.props.formState.sqlText;J.a.createDdlTable({sql:t}).then(function(t){1===t.code&&(e.setState({visible:!1}),C.a.info("表创建成功!"))})}},{key:"__handleCancel__REACT_HOT_LOADER__",value:function(){this.setState({visible:!1})}},{key:"__mapChange__REACT_HOT_LOADER__",value:function(e,t){var a=this.props,n=a.formState,r=a.changeStatus,i=[].concat(k()(n.columnMap));i[t]=e,r({columnMap:i})}},{key:"__changeMatchWay__REACT_HOT_LOADER__",value:function(e){this.props.formState.asTitle&&this.props.changeStatus({matchType:e.target.value})}},{key:"__changeImportMode__REACT_HOT_LOADER__",value:function(e){this.props.changeStatus({overwriteFlag:e.target.value})}},{key:"__tablePartitionChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this.props.formState.partitions,r=[].concat(k()(n));r[a]=O()({},t.name,e.target.value),this.props.changeStatus({partitions:r})}},{key:"__ddlChange__REACT_HOT_LOADER__",value:function(e,t){(0,this.props.changeStatus)({sqlText:t})}},{key:"__generateCols__REACT_HOT_LOADER__",value:function(e){var t=this,a=this.props.formState,n=e?e[0].map(function(e,t){return W.a.createElement(te,{key:"col-"+t,value:e},e)}):[];return[{title:"目标字段",key:"target_part",render:function(e,t){return W.a.createElement("span",null,t.name)}},{title:"源字段",key:"source_part",render:function(e,r,i){return W.a.createElement("span",null,W.a.createElement(V.a,{defaultValue:"",disabled:0===a.matchType,onSelect:function(e){t.mapChange(e,i)},style:{width:"200px"}},W.a.createElement(te,{key:"col-null",value:""},"空字段"),n))}}]}},{key:"__generatePartitions__REACT_HOT_LOADER__",value:function(e){var t=this;return e.map(function(a,n){return W.a.createElement(_.a,{key:"partition-"+n},W.a.createElement("div",{style:{width:"60px",display:"inline-block"}},a.name),W.a.createElement(v.a,{style:{width:"140px"},onChange:function(e){t.tablePartitionChange(e,a,n)},placeholder:"请输入分区名称"}),"  ",0===n?W.a.createElement(m.a,{type:"primary",onClick:t.checkPartition},"检测"):"",n===e.length-1?W.a.createElement("span",{style:{color:"#f60"}},W.a.createElement("br",null),'点击"检测"按钮，测试分区是否存在'):"")})}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=(t.file,t.display),r=t.formState,s=r.tableList,o=r.tableData,c=r.queryTable,p=this.generateCols(a,o),d=this.generatePartitions(o.partition||[]),h=o&&o.column,f=s.map(function(e,t){return W.a.createElement(te,{key:"table-"+t,data:e,value:e.tableName},e.tableName)});return W.a.createElement("div",{style:{display:"target"===n?"block":"none"}},W.a.createElement(_.a,null,W.a.createElement(z.a,null,W.a.createElement(ee,u()({},X.e,{label:"导入至表"}),W.a.createElement("div",null,W.a.createElement(V.a,{mode:"combobox",style:{width:"200px"},onChange:this.tbNameOnChange,onSearch:this.debounceSearch,onSelect:this.tableChange,notFoundContent:"没有发现相关表",value:c,placeholder:"请输入表名",showArrow:!1,filterOption:!1,defaultActiveFirstOption:!1},f),"  ",W.a.createElement(m.a,{type:"primary",onClick:function(){e.setState({visible:!0})}},"新建表"))),W.a.createElement(ee,u()({},X.e,{style:{display:o.partition&&o.partition.length>0?"block":"none"},label:"分区"}),d),W.a.createElement(ee,u()({},X.e,{label:"字段匹配"}),W.a.createElement(Z,{value:r.matchType,onChange:this.changeMatchWay},W.a.createElement(K.a,{value:0},"按位置匹配"),W.a.createElement(K.a,{value:1},"按名称匹配"))),W.a.createElement(ee,u()({},X.e,{label:"导入模式"}),W.a.createElement(Z,{value:r.overwriteFlag,onChange:this.changeImportMode},W.a.createElement(K.a,{value:0},"写入"),W.a.createElement(K.a,{value:1},"覆盖"))))),W.a.createElement(_.a,null,W.a.createElement(l.a,{bordered:!0,columns:p,dataSource:h})),W.a.createElement(i.a,{className:"m-codemodal",title:"建表语句",style:{height:350},visible:this.state.visible,onCancel:this.handleCancel,onOk:this.createTable},W.a.createElement($.a,{onChange:this.ddlChange})))}}]),t}(G.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Z,"RadioGroup","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/target.js"),__REACT_HOT_LOADER__.register(ee,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/target.js"),__REACT_HOT_LOADER__.register(te,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/target.js"),__REACT_HOT_LOADER__.register(ae,"ImportTarget","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataImport/target.js"))}()},1641:function(e,t,a){"use strict";var n=a(28),r=(a.n(n),a(27)),i=a.n(r),s=a(11),o=a.n(s),l=a(1),c=a.n(l),u=a(4),p=a.n(u),d=a(3),_=a.n(d),h=a(2),f=a.n(h),m=a(792),g=(a.n(m),a(791)),E=a.n(g),v=a(0),y=a.n(v),k=a(23),A=a(30),T=(a.n(A),a(1632)),C=a(1633),b=a(1631),O=a(1630),R=a(1645),w=a(19),D=a(136),S=E.a.Step,L=function(e){function t(e){c()(this,t);var a=_()(this,(t.__proto__||o()(t)).call(this,e));return a.state={currentStep:0},a}return f()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getDataSource,a=e.getJobData,n=e.id;e.currentTab;t(),a({taskId:n})}},{key:"next",value:function(){this.setState({currentStep:this.state.currentStep+1})}},{key:"prev",value:function(){this.setState({currentStep:this.state.currentStep-1})}},{key:"navtoStep",value:function(e){this.setState({currentStep:e})}},{key:"save",value:function(){var e=this.props,t=e.saveJobData,a=e.dataSync;t(this.generateRqtBody(a))}},{key:"generateRqtBody",value:function(e){var t=a.i(A.cloneDeep)(e),n=this.props,r=n.tabs,i=n.currentTab,s=t.keymap,o=t.sourceMap,l=t.targetMap,c=s.source,u=s.target,p=this.props,d=p.name,_=p.id;t.sourceMap.column=c,t.targetMap.column=u,t.settingMap=t.setting,t.name=d,t.taskId=_;var h=l.type,f=o.type;for(var m in f)f.hasOwnProperty(m)&&(o[m]=f[m]);for(var g in h)h.hasOwnProperty(g)&&(l[g]=h[g]);delete t.keymap,delete t.setting,delete t.dataSourceList,delete t.currentStep;var E=a.i(A.cloneDeep)(r.filter(function(e){return e.id===i})[0]);for(var v in t)t.hasOwnProperty(v)&&(E[v]=t[v]);return E.preSave=!0,E.taskVOS&&(E.dependencyTasks=E.taskVOS.map(function(e){return e}),E.taskVOS=null),E}},{key:"render",value:function(){var e=this.state.currentStep,t=[{title:"数据来源",content:y.a.createElement(T.a,{currentStep:e,navtoStep:this.navtoStep.bind(this)})},{title:"选择目标",content:y.a.createElement(C.a,{currentStep:e,navtoStep:this.navtoStep.bind(this)})},{title:"字段映射",content:y.a.createElement(b.a,{currentStep:e,navtoStep:this.navtoStep.bind(this)})},{title:"通道控制",content:y.a.createElement(O.a,{currentStep:e,navtoStep:this.navtoStep.bind(this)})},{title:"预览保存",content:y.a.createElement(R.a,{currentStep:e,navtoStep:this.navtoStep.bind(this),saveJob:this.save.bind(this)})}];return y.a.createElement("div",{className:"m-datasync"},y.a.createElement(E.a,{current:e},t.map(function(e){return y.a.createElement(S,{key:e.title,title:e.title})})),y.a.createElement("div",{className:"steps-content"},t[e].content))}}]),t}(y.a.Component),x=function(e){var t=e.offlineTask.workbench.currentTab;return{dataSync:e.offlineTask.dataSync,tabs:e.offlineTask.workbench.tabs,currentTab:t}},H=function(e){return{getDataSource:function(){w.a.getOfflineDataSource().then(function(t){1===t.code&&e({type:D.b.LOAD_DATASOURCE,payload:t.data})})},getJobData:function(t){w.a.getOfflineJobData(t).then(function(t){1===t.code&&(e({type:D.c.INIT_JOBDATA,payload:t.data}),e(null===t.data?{type:D.h.SET_CURRENT_TAB_NEW}:{type:D.h.SET_CURRENT_TAB_SAVED}))})},saveJobData:function(t){w.a.saveOfflineJobData(t).then(function(t){1===t.code&&(i.a.success("保存成功！"),e({type:D.h.SET_CURRENT_TAB_SAVED}),e({type:D.h.MAKE_TAB_CLEAN}))})}}},M=a.i(k.connect)(x,H)(L);t.a=M;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(S,"Step","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/index.js"),__REACT_HOT_LOADER__.register(L,"DataSync","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/index.js"),__REACT_HOT_LOADER__.register(x,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/index.js"),__REACT_HOT_LOADER__.register(H,"mapDispatch","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/index.js"),__REACT_HOT_LOADER__.register(M,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/index.js"))}()},1642:function(e,t,a){"use strict";function n(e){var t=e.title,a=e.desc,n=e.visible,r=e.onOk,i=e.placeholder,o=e.value,l=e.onCancel,u=e.onChange,_=e.columnFamily;return p.a.createElement(s.a,{title:t,onOk:r,onCancel:l,visible:n},p.a.createElement("p",null,"批量导入的语法格式：",p.a.createElement("b",{style:{color:"rgb(255, 102, 0)"}},a)),p.a.createElement("p",null,"常用数据类型：",p.a.createElement("span",{style:{color:"rgb(255, 102, 0)"}},d())),_?p.a.createElement("p",null,"已有列族：",p.a.createElement("span",{style:{color:"rgb(255, 102, 0)"}},_.map(function(e){return e+","}))):"",p.a.createElement("br",null),p.a.createElement(c.a,{type:"textarea",rows:6,value:o,onChange:u,placeholder:i}))}var r=a(49),i=(a.n(r),a(48)),s=a.n(i),o=a(29),l=(a.n(o),a(39)),c=a.n(l),u=a(0),p=a.n(u);t.a=n;var d=function(){return p.a.createElement("span",null,p.a.createElement("b",null,"STRING"),",",p.a.createElement("b",null,"VARCHAR"),",",p.a.createElement("b",null,"CHAR"),",",p.a.createElement("b",null,"TINYINT"),",",p.a.createElement("b",null,"SMALLINT"),",",p.a.createElement("b",null,"DECIMAL"),",",p.a.createElement("br",null),p.a.createElement("b",null,"INT"),",",p.a.createElement("b",null,"BIGINT"),",",p.a.createElement("b",null,"FLOAT"),",",p.a.createElement("b",null,"DOUBLE"),",",p.a.createElement("b",null,"TIMESTAMP"),",",p.a.createElement("b",null,"DATE"))};!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(d,"renderHDFSTypes","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/batchModal.js"),__REACT_HOT_LOADER__.register(n,"BatchModal","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/batchModal.js"))}()},1643:function(e,t,a){"use strict";var n=a(49),r=(a.n(n),a(48)),i=a.n(r),s=a(29),o=(a.n(s),a(39)),l=a.n(o),c=a(28),u=(a.n(c),a(27)),p=a.n(u),d=a(11),_=a.n(d),h=a(1),f=a.n(h),m=a(4),g=a.n(m),E=a(3),v=a.n(E),y=a(2),k=a.n(y),A=a(0),T=a.n(A),C=a(13);a.d(t,"a",function(){return b});var b=function(e){function t(){var e,a,n,r;f()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=v()(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(s))),n.state={constValue:""},n.onChange=function(){var e;return(e=n).__onChange__REACT_HOT_LOADER__.apply(e,arguments)},n.submit=function(){var e;return(e=n).__submit__REACT_HOT_LOADER__.apply(e,arguments)},n.close=function(){var e;return(e=n).__close__REACT_HOT_LOADER__.apply(e,arguments)},r=a,v()(n,r)}return k()(t,e),g()(t,[{key:"__onChange__REACT_HOT_LOADER__",value:function(e){this.setState({constValue:e.target.value})}},{key:"__submit__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.onOk,a=e.onCancel,n=C.a.trim(this.state.constValue);if(""!==n){var r={type:"string",key:n,value:n};t&&(t(r),a())}else p.a.error("常量字段不可为空！")}},{key:"__close__REACT_HOT_LOADER__",value:function(){var e=this.props.onCancel;this.setState({constValue:""},function(){e&&e()})}},{key:"render",value:function(){var e=this.state.constValue,t=this.props,a=t.visible;t.onCancel;return T.a.createElement(i.a,{title:"添加常量",onOk:this.submit,onCancel:this.close,visible:a},T.a.createElement(l.a,{value:e,onChange:this.onChange,placeholder:"请输入常量值"}))}}]),t}(T.a.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(b,"ConstModal","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/constModal.js")}()},1644:function(e,t,a){"use strict";var n=a(49),r=(a.n(n),a(48)),i=a.n(r),s=a(29),o=(a.n(s),a(39)),l=a.n(o),c=a(5),u=a.n(c),p=a(304),d=(a.n(p),a(303)),_=a.n(d),h=a(11),f=a.n(h),m=a(1),g=a.n(m),E=a(4),v=a.n(E),y=a(3),k=a.n(y),A=a(2),T=a.n(A),C=a(26),b=(a.n(C),a(25)),O=a.n(b),R=a(32),w=(a.n(R),a(31)),D=a.n(w),S=a(0),L=a.n(S),x=a(34),H=D.a.Item,M=O.a.Option,N=function(e){function t(){var e,a,n,r;g()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=k()(this,(e=t.__proto__||f()(t)).call.apply(e,[this].concat(s))),n.columnFamily=function(){var e;return(e=n).__columnFamily__REACT_HOT_LOADER__.apply(e,arguments)},n.renderFormItems=function(){var e;return(e=n).__renderFormItems__REACT_HOT_LOADER__.apply(e,arguments)},r=a,k()(n,r)}return T()(t,e),v()(t,[{key:"shouldComponentUpdate",value:function(e){return this.props!==e}},{key:"__columnFamily__REACT_HOT_LOADER__",value:function(e){return e&&e.map(function(e){return L.a.createElement(M,{value:e},e)})}},{key:"__renderFormItems__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.keyModal,a=e.dataType,n=e.sourceColumnFamily,r=e.targetColumnFamily,i=t.isReader,s=(t.fileType,t.editField),o=this.props.form.getFieldDecorator;if(i)switch(a){case x.k.FTP:case x.k.HDFS:return[L.a.createElement(H,u()({},x.e,{label:"索引值",key:"index"}),o("index",{rules:[{required:!0,type:"integer"}],initialValue:s&&s.index||""})(L.a.createElement(_.a,{style:{width:"100%"},min:0}))),L.a.createElement(H,u()({},x.e,{label:"选择类型",key:"type"}),o("type",{rules:[{required:!0}],initialValue:s&&s.type||"STRING"})(L.a.createElement(O.a,null,L.a.createElement(M,{value:"STRING"},"STRING"),L.a.createElement(M,{value:"LONG"},"LONG"),L.a.createElement(M,{value:"BOOLEAN"},"BOOLEAN"),L.a.createElement(M,{value:"DOUBLE"},"DOUBLE"),L.a.createElement(M,{value:"DATE"},"DATE"))))];case x.k.HBASE:var c=s&&"rowkey"===s.key;return[L.a.createElement(H,u()({},x.e,{label:"列名",key:"key"}),o("key",{rules:[{required:!0,type:"string"}],initialValue:s&&s.key||""})(L.a.createElement(l.a,{style:{width:"100%"},disabled:c}))),L.a.createElement(H,u()({},x.e,{label:"列族",key:"cf"}),o("cf",{rules:[{required:!0}],initialValue:s&&s.cf||""})(L.a.createElement(O.a,{placeHolder:"请选择列族",disabled:c},this.columnFamily(n)))),L.a.createElement(H,u()({},x.e,{label:"选择类型",key:"type"}),o("type",{rules:[{required:!0}],initialValue:s&&s.type||"STRING"})(L.a.createElement(O.a,null,L.a.createElement(M,{value:"STRING"},"STRING"),L.a.createElement(M,{value:"BOOLEAN"},"BOOLEAN"),L.a.createElement(M,{value:"SHORT"},"SHORT"),L.a.createElement(M,{value:"INT"},"INT"),L.a.createElement(M,{value:"LONG"},"LONG"),L.a.createElement(M,{value:"FLOAT"},"FLOAT"),L.a.createElement(M,{value:"DOUBLE"},"DOUBLE"))))]}else switch(a){case x.k.FTP:case x.k.HDFS:return[L.a.createElement(H,u()({},x.e,{label:"选择类型",key:"type"}),o("type",{rules:[{required:!0}],initialValue:s&&s.type||"STRING"})(L.a.createElement(O.a,null,L.a.createElement(M,{value:"STRING"},"STRING"),L.a.createElement(M,{value:"BIGINT"},"BIGINT"),L.a.createElement(M,{value:"TIMESTAMP"},"TIMESTAMP"),L.a.createElement(M,{value:"VARCHAR"},"VARCHAR"),L.a.createElement(M,{value:"CHAR"},"CHAR"),L.a.createElement(M,{value:"TINYINT"},"TINYINT"),L.a.createElement(M,{value:"SMALLINT"},"SMALLINT"),L.a.createElement(M,{value:"DECIMAL"},"DECIMAL"),L.a.createElement(M,{value:"INT"},"INT"),L.a.createElement(M,{value:"FLOAT"},"FLOAT"),L.a.createElement(M,{value:"DOUBLE"},"DOUBLE"),L.a.createElement(M,{value:"DATE"},"DATE")))),L.a.createElement(H,u()({},x.e,{label:"字段名",key:"keyName"}),o("key",{rules:[{required:!0}],initialValue:s&&s.key||""})(L.a.createElement(l.a,null)))];case x.k.HBASE:return[L.a.createElement(H,u()({},x.e,{label:"列名",key:"key"}),o("key",{rules:[{required:!0,type:"string"}],initialValue:s&&s.key||""})(L.a.createElement(l.a,{style:{width:"100%"}}))),L.a.createElement(H,u()({},x.e,{label:"列族",key:"cf"}),o("cf",{rules:[{required:!0}],initialValue:s&&s.cf||""})(L.a.createElement(O.a,{placeHolder:"请选择列族"},this.columnFamily(r)))),L.a.createElement(H,u()({},x.e,{label:"选择类型",key:"type"}),o("type",{rules:[{required:!0}],initialValue:s&&s.type||"STRING"})(L.a.createElement(O.a,null,L.a.createElement(M,{value:"STRING"},"STRING"),L.a.createElement(M,{value:"BOOLEAN"},"BOOLEAN"),L.a.createElement(M,{value:"SHORT"},"SHORT"),L.a.createElement(M,{value:"INT"},"INT"),L.a.createElement(M,{value:"LONG"},"LONG"),L.a.createElement(M,{value:"FLOAT"},"FLOAT"),L.a.createElement(M,{value:"DOUBLE"},"DOUBLE"))))]}return[]}},{key:"render",value:function(){return L.a.createElement(D.a,null,this.renderFormItems())}}]),t}(L.a.Component),F=D.a.create()(N),B=function(e){function t(){var e,a,n,r;g()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=k()(this,(e=t.__proto__||f()(t)).call.apply(e,[this].concat(s))),n.submit=function(){var e;return(e=n).__submit__REACT_HOT_LOADER__.apply(e,arguments)},n.cancel=function(){var e;return(e=n).__cancel__REACT_HOT_LOADER__.apply(e,arguments)},r=a,k()(n,r)}return T()(t,e),v()(t,[{key:"__submit__REACT_HOT_LOADER__",value:function(){var e=this,t=this.props.onOk;this.Form.validateFields(function(a,n){a?t(null,a):(setTimeout(function(){e.Form.resetFields()},200),t(n))})}},{key:"__cancel__REACT_HOT_LOADER__",value:function(){(0,this.props.onCancel)(),this.Form.resetFields()}},{key:"render",value:function(){var e=this,t=this.props,a=t.title,n=t.visible,r=t.keyModal,s=t.dataType,o=t.sourceColumnFamily,l=t.targetColumnFamily;return L.a.createElement(i.a,{title:a,visible:n,onOk:this.submit,onCancel:this.cancel},L.a.createElement(F,{sourceColumnFamily:o,targetColumnFamily:l,dataType:s,keyModal:r,ref:function(t){return e.Form=t}}))}}]),t}(L.a.Component),I=B;t.a=I;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(H,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/keymapModal.js"),__REACT_HOT_LOADER__.register(M,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/keymapModal.js"),__REACT_HOT_LOADER__.register(N,"KeyForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/keymapModal.js"),__REACT_HOT_LOADER__.register(F,"KeyFormWrapper","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/keymapModal.js"),__REACT_HOT_LOADER__.register(B,"KeyMapModal","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/keymapModal.js"),__REACT_HOT_LOADER__.register(I,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/keymap/keymapModal.js"))}()},1645:function(e,t,a){"use strict";function n(){return k.a.createElement("div",{style:{position:"absolute",top:48,left:0,bottom:0,right:0,zIndex:3,background:"rgba(255, 255, 255, 0.4)",cursor:"not-allowed"}})}var r=a(24),i=(a.n(r),a(22)),s=a.n(i),o=a(59),l=(a.n(o),a(58)),c=a.n(l),u=a(11),p=a.n(u),d=a(1),_=a.n(d),h=a(4),f=a.n(h),m=a(3),g=a.n(m),E=a(2),v=a.n(E),y=a(0),k=a.n(y),A=a(1632),T=a(1633),C=a(1631),b=a(1630);a.d(t,"a",function(){return O});var O=function(e){function t(e){_()(this,t);var a=g()(this,(t.__proto__||p()(t)).call(this,e));return a.navtoStep=a.props.navtoStep,a}return v()(t,e),f()(t,[{key:"render",value:function(){var e=this,t=this.navtoStep;return k.a.createElement("div",{className:"g-step5"},k.a.createElement("div",{className:"m-preview",style:{padding:"0 20"}},k.a.createElement(c.a,{bordered:!1,style:{marginBottom:10},title:"选择来源",extra:k.a.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.navtoStep(0)}},"修改")},k.a.createElement(A.a,{readonly:!0}),k.a.createElement(n,null)),k.a.createElement(c.a,{bordered:!1,style:{marginBottom:10},title:"选择目标",extra:k.a.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.navtoStep(1)}},"修改")},k.a.createElement(T.a,{readonly:!0}),k.a.createElement(n,null)),k.a.createElement(c.a,{bordered:!1,style:{marginBottom:10},title:"字段映射",extra:k.a.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.navtoStep(2)}},"修改")},k.a.createElement(C.a,{readonly:!0}),k.a.createElement(n,null)),k.a.createElement(c.a,{bordered:!1,style:{marginBottom:10},title:"通道控制",extra:k.a.createElement("a",{href:"javascript:void(0)",onClick:function(){return e.navtoStep(3)}},"修改")},k.a.createElement(b.a,{readonly:!0}),k.a.createElement(n,null))),k.a.createElement("div",{className:"steps-action"},k.a.createElement(s.a,{style:{marginRight:8},onClick:function(){return e.prev(t)}},"上一步"),k.a.createElement(s.a,{type:"primary",onClick:function(){return e.save(t)}},"保存")))}},{key:"prev",value:function(e){e.call(null,3)}},{key:"save",value:function(e){this.props.saveJob(e)}}]),t}(k.a.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(n,"Mask","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/save.js"),__REACT_HOT_LOADER__.register(O,"Save","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/dataSync/save.js"))}()},1646:function(e,t,a){"use strict";var n=a(5),r=a.n(n),i=a(1196),s=(a.n(i),a(1195)),o=a.n(s),l=a(28),c=(a.n(l),a(27)),u=a.n(c),p=a(11),d=a.n(p),_=a(1),h=a.n(_),f=a(4),m=a.n(f),g=a(3),E=a.n(g),v=a(2),y=a.n(v),k=a(49),A=(a.n(k),a(48)),T=a.n(A),C=a(0),b=a.n(C),O=(a(23),a(13)),R=a(19),w=a(34),D=a(1641),S=a(1647),L=a(1652);a.d(t,"a",function(){return H});var x=T.a.confirm,H=function(e){function t(e){h()(this,t);var a=E()(this,(t.__proto__||d()(t)).call(this,e));return a.unLock=function(){return a.__unLock__REACT_HOT_LOADER__.apply(a,arguments)},a}return y()(t,e),m()(t,[{key:"__unLock__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.tabData,a=e.updateTaskFields,n=e.updateCatalogue,r=t.readWriteLockVO;x({title:"解锁提醒",content:"文件正在被"+r.lastKeepLockUserName+"编辑中，开始编辑时间\n                "+O.a.formatDateTime(r.gmtModified)+"。\n                强制编辑可能导致"+r.lastKeepLockUserName+"对该文件的修改无法保存！\n            ",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){var e={fileId:t.id,lockVersion:r.version};O.a.checkExist(t.taskType)?e.type=w.j.OFFLINE_TASK:O.a.checkExist(t.type)&&(e.type=w.j.OFFLINE_SCRIPT),R.a.unlockFile(e).then(function(r){if(1===r.code){var i=r.data;i.getLock?u.a.success("文件解锁成功！"):T.a.error({title:"解锁失败",content:"文件正在被"+i.lastKeepLockUserName+"编辑中!开始编辑时间\n                                "+O.a.formatDateTime(i.gmtModified)+"."});var s={id:t.id};e.type===w.j.OFFLINE_TASK?R.a.getOfflineTaskDetail(s).then(function(e){if(1===e.code){var r=e.data;r.merged=!0;var i={id:t.id,readWriteLockVO:r.readWriteLockVO};n(i),a(r)}}):e.type===w.j.OFFLINE_SCRIPT&&R.a.getScriptById(s).then(function(e){if(1===e.code){var r=e.data;r.merged=!0;var i={id:t.id,readWriteLockVO:r.readWriteLockVO};n(i),a(r)}})}})},onCancel:function(){}})}},{key:"render",value:function(){var e=this.props.tabData;return b.a.createElement("div",{className:"m-mainbench editor-container"},this.renderBench(e),this.renderLock(e))}},{key:"renderLock",value:function(e){var t=e.readWriteLockVO&&!e.readWriteLockVO.getLock,a="40px";return e.taskType&&e.taskType!==w.b.SQL&&(a="10px"),t?b.a.createElement("div",{className:"lock-layer"},b.a.createElement(o.a,{style:{position:"absolute",top:a,left:"35%",zIndex:"999"},showIcon:!0,message:b.a.createElement("span",null,"当前文件为只读状态！",b.a.createElement("a",{onClick:this.unLock},"解锁")),type:"warning"})):""}},{key:"renderBench",value:function(e){var t=this.props.taskCustomParams;if(w.f.autofocus=!0,w.f.indentUnit=4,w.f.indentWithTabs=!1,O.a.checkExist(e.taskType))switch(e.taskType){case w.b.MR:case w.b.PYTHON:case w.b.VIRTUAL_NODE:return b.a.createElement(S.a,r()({key:e.id},e));case w.b.SYNC:return b.a.createElement(D.a,r()({key:e.id},e));case w.b.SQL:return b.a.createElement(L.a,{options:w.f,taskCustomParams:t,key:e.id,value:e.sqlText,currentTab:e.id,currentTabData:e});default:return b.a.createElement("p",{className:"txt-center",style:{lineHeight:"60px"}},"未知任务类型")}else if(O.a.checkExist(e.type))return b.a.createElement(L.a,{options:w.f,key:e.id,value:e.scriptText,currentTab:e.id,currentTabData:e})}}]),t}(b.a.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(x,"confirm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/mainBench.js"),__REACT_HOT_LOADER__.register(H,"MainBench","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/mainBench.js"))}()},1647:function(e,t,a){"use strict";var n=a(5),r=a.n(n),i=a(29),s=(a.n(i),a(39)),o=a.n(s),l=a(11),c=a.n(l),u=a(1),p=a.n(u),d=a(4),_=a.n(d),h=a(3),f=a.n(h),m=a(2),g=a.n(m),E=a(73),v=(a.n(E),a(69)),y=a.n(v),k=a(26),A=(a.n(k),a(25)),T=a.n(A),C=a(32),b=(a.n(C),a(31)),O=a.n(b),R=a(0),w=a.n(R),D=a(23),S=a(758),L=a(34),x=a(136),H=a(1154),M=O.a.Item,N=T.a.Option,F=y.a.Group,B=function(e){function t(){return p()(this,t),f()(this,(t.__proto__||c()(t)).apply(this,arguments))}return g()(t,e),_()(t,[{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.props,a=t.taskType,n=a===L.b.MR,i=a===L.b.PYTHON,s=n?L.h.JAR:i?L.h.PY:"";return w.a.createElement(O.a,null,w.a.createElement(M,r()({},L.e,{label:"任务名称"}),e("name",{rules:[{max:64,message:"任务名称不得超过20个字符！"}],initialValue:t.name})(w.a.createElement(o.a,{disabled:!0}))),w.a.createElement(M,r()({},L.e,{label:"任务类型"}),e("taskType",{rules:[{}],initialValue:a})(w.a.createElement(F,{disabled:!0,onChange:this.handleRadioChange},w.a.createElement(y.a,{value:L.b.SQL},"SQL"),w.a.createElement(y.a,{value:L.b.MR},"MR"),w.a.createElement(y.a,{value:L.b.SYNC},"数据同步"),w.a.createElement(y.a,{value:L.b.PYTHON},"Python"),w.a.createElement(y.a,{value:L.b.VIRTUAL_NODE},"虚节点")))),a!==L.b.VIRTUAL_NODE&&w.a.createElement(M,r()({},L.e,{label:"资源"}),e("resourceIdList",{rules:[{required:!0,message:"请选择关联资源"}],initialValue:t.resourceList.length?t.resourceList[0].id:""})(w.a.createElement(o.a,{type:"hidden"})),w.a.createElement(H.a,{ispicker:!0,isFilepicker:!0,acceptRes:s,type:L.d.RESOURCE,treeData:this.props.resTreeData,onChange:this.handleResChange.bind(this),defaultNode:t.resourceList.length?t.resourceList[0].resourceName:""})),a!==L.b.PYTHON&&a!==L.b.VIRTUAL_NODE&&w.a.createElement(M,r()({},L.e,{label:"mainClass",hasFeedback:!0}),e("mainClass",{rules:[{required:!0,message:"mainClass 不可为空！"}],initialValue:t.mainClass})(w.a.createElement(o.a,{placeholder:"请输入 mainClass"}))),a!==L.b.VIRTUAL_NODE&&w.a.createElement("span",null,w.a.createElement(M,r()({},L.e,{label:"参数"}),e("exeArgs",{initialValue:t.exeArgs})(w.a.createElement(o.a,{placeholder:"请输入任务参数"}))),w.a.createElement(M,r()({},L.e,{label:"存储位置"}),e("nodePid",{rules:[{required:!0,message:"存储位置必选！"}],initialValue:t.nodePid})(w.a.createElement(o.a,{type:"hidden"})),w.a.createElement(H.a,{type:L.d.TASK,ispicker:!0,isFilepicker:!1,treeData:this.props.pathTreeData,onChange:this.handlePathChange.bind(this),defaultNode:t.nodePName}))),w.a.createElement(M,r()({},L.e,{label:"描述",hasFeedback:!0}),e("taskDesc",{rules:[{max:200,message:"描述请控制在200个字符以内！"}],initialValue:t.taskDesc})(w.a.createElement(o.a,{type:"textarea",rows:4,placeholder:"请输入任务描述"}))),w.a.createElement(M,{style:{display:"none"}},e("computeType",{initialValue:1})(w.a.createElement(o.a,{type:"hidden"}))))}},{key:"handleResChange",value:function(e){this.props.form.setFieldsValue({resourceIdList:[e]})}},{key:"handlePathChange",value:function(e){this.props.form.setFieldsValue({nodePid:e})}}]),t}(w.a.Component),I=O.a.create({onValuesChange:function(e,t){var n=e.setFieldsValue,r=e.taskCustomParams,i=!1;""===t.mainClass&&(i=!0),t.invalid=i,""!==t.exeArgs&&(t.taskVariables=a.i(S.d)(r,t.exeArgs)),n(t)}})(B),V=function(e){function t(e){return p()(this,t),f()(this,(t.__proto__||c()(t)).call(this,e))}return g()(t,e),_()(t,[{key:"render",value:function(){return w.a.createElement("div",{className:"m-taskedit",style:{padding:60}},w.a.createElement(I,this.props))}}]),t}(w.a.Component),U=function(e,t){var a=e.offlineTask;return{resTreeData:a.resourceTree,pathTreeData:a.taskTree,taskCustomParams:a.workbench.taskCustomParams}},P=function(e){return{setFieldsValue:function(t){e({type:x.h.SET_TASK_FIELDS_VALUE,payload:t})}}},z=a.i(D.connect)(U,P)(V);t.a=z;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(M,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(N,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(F,"RadioGroup","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(B,"NormalTaskForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(I,"NormalTaskFormWrapper","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(V,"NormalTaskEditor","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(U,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(P,"mapDispatch","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"),__REACT_HOT_LOADER__.register(z,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/normalTask.js"))}()},1648:function(e,t,a){"use strict";var n=a(28),r=(a.n(n),a(27)),i=a.n(r),s=a(51),o=(a.n(s),a(50)),l=a.n(o),c=a(43),u=(a.n(c),a(42)),p=a.n(u),d=a(54),_=a.n(d),h=a(29),f=(a.n(h),a(39)),m=a.n(f),g=a(67),E=(a.n(g),a(66)),v=a.n(E),y=a(102),k=(a.n(y),a(101)),A=a.n(k),T=a(5),C=a.n(T),b=a(57),O=(a.n(b),a(55)),R=a.n(O),w=a(11),D=a.n(w),S=a(1),L=a.n(S),x=a(4),H=a.n(x),M=a(3),N=a.n(M),F=a(2),B=a.n(F),I=a(73),V=(a.n(I),a(69)),U=a.n(V),P=a(32),z=(a.n(P),a(31)),j=a.n(z),q=a(26),K=(a.n(q),a(25)),G=a.n(K),W=a(1153),Y=(a.n(W),a(1152)),Q=a.n(Y),J=a(0),$=a.n(J),X=a(23),Z=a(10),ee=a.n(Z),te=a(35),ae=a.n(te),ne=a(19),re=a(136),ie=a(34),se=a(758),oe=Q.a.Panel,le=G.a.Option,ce=j.a.Item,ue=U.a.Group,pe={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},de=function(e){function t(e){L()(this,t);var a=N()(this,(t.__proto__||D()(t)).call(this,e));return a.changeScheduleStatus=a.props.handleScheduleStatus,a.changeScheduleConf=a.props.handleScheduleConf,a.changeScheduleType=a.props.handleScheduleType,a}return B()(t,e),H()(t,[{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.props,n=a.status,r=a.scheduleConf,i=r.periodType,s=function(){for(var t=[],a=0;a<=23;a++)t.push($.a.createElement(le,{key:a,value:""+a},a<10?"0"+a:a));return $.a.createElement(G.a,{onChange:e.changeScheduleConf.bind(e)},t)},o=function(){for(var t=[],a=0,n=59;a<=n;a++)t.push($.a.createElement(le,{key:a,value:""+a},a<10?"0"+a:a));return $.a.createElement(G.a,{onChange:e.changeScheduleConf.bind(e)},t)},l=function(){for(var t=[],a=1;a<=31;a++)t.push($.a.createElement(le,{key:a,value:""+a},"每月"+a+"号"));return $.a.createElement(G.a,{mode:"multiple",style:{width:"100%"},onChange:e.changeScheduleConf.bind(e)},t)},c=function(){return $.a.createElement(G.a,{mode:"multiple",style:{width:"100%"},onChange:e.changeScheduleConf.bind(e)},$.a.createElement(le,{key:1,value:"1"},"星期一"),$.a.createElement(le,{key:2,value:"2"},"星期二"),$.a.createElement(le,{key:3,value:"3"},"星期三"),$.a.createElement(le,{key:4,value:"4"},"星期四"),$.a.createElement(le,{key:5,value:"5"},"星期五"),$.a.createElement(le,{key:6,value:"6"},"星期六"),$.a.createElement(le,{key:7,value:"7"},"星期天"))};return $.a.createElement(j.a,{key:i},$.a.createElement(ce,C()({},pe,{label:"调度状态"}),t("scheduleStatus",{valuePropName:"checked",initialValue:0===n||2===n})($.a.createElement(R.a,{onChange:this.changeScheduleStatus.bind(this)},"停止"))),$.a.createElement(ce,C()({},pe,{label:"生效日期"}),t("beginDate",{initialValue:ee()(r.beginDate,"YYYY-MM-DD")})($.a.createElement(A.a,{onChange:this.changeScheduleConf.bind(this)})),"-",t("endDate",{initialValue:ee()(r.endDate,"YYYY-MM-DD")})($.a.createElement(A.a,{onChange:this.changeScheduleConf.bind(this)}))),$.a.createElement(ce,C()({},pe,{label:"调度周期"}),$.a.createElement(v.a,{span:"6"},t("periodType",{initialValue:""+r.periodType,rules:[{required:!0}]})($.a.createElement(G.a,{onChange:this.changeScheduleType.bind(this)},$.a.createElement(le,{key:0,value:"0"},"分钟"),$.a.createElement(le,{key:1,value:"1"},"小时"),$.a.createElement(le,{key:2,value:"2"},"天"),$.a.createElement(le,{key:3,value:"3"},"周"),$.a.createElement(le,{key:4,value:"4"},"月"))))),$.a.createElement(ce,{style:{display:"none"}},t("selfReliance",{initialValue:r.selfReliance})($.a.createElement(m.a,{type:"hidden"}))),function(e,a){var n=void 0;switch(e){case 0:n=$.a.createElement("span",{key:e},$.a.createElement(ce,C()({},pe,{label:"开始时间"}),$.a.createElement(v.a,{span:"6"},t("beginHour",{rules:[{required:!0},{validator:a.checkTimeS.bind(a)}],initialValue:""+r.beginHour})(s())),$.a.createElement(v.a,{span:"1"},"时"),$.a.createElement(v.a,{span:"6"},t("beginMin",{rules:[{required:!0}],initialValue:"0"})($.a.createElement(G.a,{disabled:!0},$.a.createElement(le,{value:"0"},"0")))),$.a.createElement(v.a,{span:"1"},"分")),$.a.createElement(ce,C()({},pe,{label:"间隔时间"}),$.a.createElement(v.a,{span:"6"},t("gapMin",{rules:[{required:!0}],initialValue:""+r.gapMin})($.a.createElement(G.a,{onChange:a.changeScheduleConf.bind(a)},function(){for(var e=[],t=5;t<=55;t+=5)e.push($.a.createElement(le,{key:t,value:""+t},t,"分钟"));return e}())))),$.a.createElement(ce,C()({},pe,{label:"结束时间"}),$.a.createElement(v.a,{span:"6"},t("endHour",{rules:[{required:!0},{validator:a.checkTimeE.bind(a)}],initialValue:""+r.endHour})(s())),$.a.createElement(v.a,{span:"1"},"时"),$.a.createElement(v.a,{span:"6"},t("endMin",{initialValue:"59"})($.a.createElement(G.a,{disabled:!0},$.a.createElement(le,{value:"59"},"59")))),$.a.createElement(v.a,{span:"1"},"分")));break;case 1:n=$.a.createElement("span",{key:e},$.a.createElement(ce,C()({},pe,{label:"开始时间"}),$.a.createElement(v.a,{span:"6"},t("beginHour",{rules:[{required:!0},{validator:a.checkTimeS1.bind(a)}],initialValue:""+r.beginHour})(s())),$.a.createElement(v.a,{span:"1"},"时"),$.a.createElement(v.a,{span:"6"},t("beginMin",{rules:[{required:!0},{validator:a.checkTimeS1.bind(a)}],initialValue:""+r.beginMin})(o())),$.a.createElement(v.a,{span:"1"},"分")),$.a.createElement(ce,C()({},pe,{label:"间隔时间"}),$.a.createElement(v.a,{span:"6"},t("gapHour",{rules:[{required:!0}],initialValue:""+r.gapHour})($.a.createElement(G.a,{onChange:a.changeScheduleConf.bind(a)},function(){for(var e=[],t=1,a=23;t<=a;t++)e.push($.a.createElement(le,{key:t,value:""+t},t,"小时"));return e}())))),$.a.createElement(ce,C()({},pe,{label:"结束时间"}),$.a.createElement(v.a,{span:"6"},t("endHour",{rules:[{required:!0},{validator:a.checkTimeE1.bind(a)}],initialValue:""+r.endHour})(s())),$.a.createElement(v.a,{span:"1"},"时"),$.a.createElement(v.a,{span:"6"},t("endMin",{rules:[{required:!0}],initialValue:"59"})($.a.createElement(G.a,{disabled:!0},$.a.createElement(le,{value:"59"},"59")))),$.a.createElement(v.a,{span:"1"},"分")));break;case 2:n=$.a.createElement("span",{key:e},$.a.createElement(ce,C()({},pe,{label:"起调周期"}),$.a.createElement(v.a,{span:"6"},t("hour",{rules:[{required:!0}],initialValue:""+r.hour})(s())),$.a.createElement(v.a,{span:"1"},"时"),$.a.createElement(v.a,{span:"6"},t("min",{rules:[{required:!0}],initialValue:""+r.min})(o())),$.a.createElement(v.a,{span:"1"},"分")));break;case 3:n=$.a.createElement("span",{key:e},$.a.createElement(ce,C()({},pe,{label:"选择时间"}),$.a.createElement(v.a,{span:"13"},t("weekDay",{rules:[{required:!0}],initialValue:(""+r.weekDay).split(",")})(c()))),$.a.createElement(ce,C()({},pe,{label:"具体时间"}),$.a.createElement(v.a,{span:"6"},t("hour",{rules:[{required:!0}],initialValue:""+r.hour})(s())),$.a.createElement(v.a,{span:"1"}," 时 "),$.a.createElement(v.a,{span:"6"},t("min",{rules:[{required:!0}],initialValue:""+r.min})(o())),$.a.createElement(v.a,{span:"1"},"分")));break;case 4:n=$.a.createElement("span",{key:e},$.a.createElement(ce,C()({},pe,{label:"选择时间"}),$.a.createElement(v.a,{span:"13"},t("day",{rules:[{required:!0}],initialValue:(""+r.day).split(",")})(l()))),$.a.createElement(ce,C()({},pe,{label:"具体时间"}),$.a.createElement(v.a,{span:"6"},t("hour",{rules:[{required:!0}],initialValue:""+r.hour})(s())),$.a.createElement(v.a,{span:"1"}," 时 "),$.a.createElement(v.a,{span:"6"},t("min",{rules:[{required:!0}],initialValue:""+r.min})(o())),$.a.createElement(v.a,{span:"1"}," 分 ")));break;default:n=$.a.createElement("span",null,"something wrong")}return n}(+i,this))}},{key:"checkTimeS",value:function(e,t,a){+t>+this.props.form.getFieldValue("endHour")&&a("开始时间不能晚于结束时间"),a()}},{key:"checkTimeE",value:function(e,t,a){+t<+this.props.form.getFieldValue("beginHour")&&a("结束时间不能早于开始时间"),a()}},{key:"checkTimeS1",value:function(e,t,a){var n=this.props.form;60*+n.getFieldValue("beginHour")+ +n.getFieldValue("beginMin")>60*+n.getFieldValue("endHour")+59&&a("开始时间不能晚于结束时间"),a()}},{key:"checkTimeE1",value:function(e,t,a){var n=this.props.form;60*+n.getFieldValue("beginHour")+ +n.getFieldValue("beginMin")>60*+n.getFieldValue("endHour")+59&&a("结束时间不能早于开始时间"),a()}}]),t}($.a.Component),_e=j.a.create()(de),he=function(e){function t(e){L()(this,t);var a=N()(this,(t.__proto__||D()(t)).call(this,e)),n=a.props.tabData,r=n.scheduleConf,i=""===r?_()(a.getDefaultScheduleConf(0),{beginDate:"2001-01-01",endDate:"2021-01-01"}):JSON.parse(r);return a._selfReliance=void 0!==i.selfReliance&&i.selfReliance,a}return B()(t,e),H()(t,[{key:"handleScheduleStatus",value:function(e){var t=e.target.checked;this.props.changeScheduleStatus(t?2:1)}},{key:"handleScheduleConf",value:function(){var e=this;setTimeout(function(){e.form.validateFields(function(t,a){if(!t){var n=e.form.getFieldsValue();n.selfReliance=e._selfReliance,delete n.scheduleStatus,e.props.changeScheduleConf(n)}})},0)}},{key:"handleScheduleType",value:function(e){var t=this.getDefaultScheduleConf(e),a=ae()({},t,{scheduleStatus:this.form.getFieldValue("scheduleStatus"),beginDate:this.form.getFieldValue("beginDate"),endDate:this.form.getFieldValue("endDate"),periodType:e,selfReliance:this.form.getFieldValue("selfReliance")});this.props.changeScheduleConf(a)}},{key:"getDefaultScheduleConf",value:function(e){return{0:{beginHour:0,gapMin:5,endHour:23,periodType:0},1:{beginHour:0,beginMin:0,endHour:23,gapHour:5,periodType:1},2:{min:0,hour:0,periodType:2},3:{weekDay:3,min:0,hour:23,periodType:3},4:{day:5,hour:0,min:23,periodType:4}}[e]}},{key:"handleDelVOS",value:function(e){this.props.delVOS(e.id)}},{key:"handleAddVOS",value:function(e){this.props.addVOS(e)}},{key:"goEdit",value:function(e){this.props.getTaskDetail(e.id)}},{key:"setSelfReliance",value:function(e){var t=e.target.value;this._selfReliance=t,this.handleScheduleConf()}},{key:"render",value:function(){var e=this,t=this.props.tabData,a=t.scheduleConf,n=""===a?_()(this.getDefaultScheduleConf(0),{beginDate:"2001-01-01",endDate:"2021-01-01"}):JSON.parse(a),r=[{title:"任务名称",dataIndex:"name",key:"name",render:function(t,a){return $.a.createElement("a",{href:"javascript:void(0)",onClick:e.goEdit.bind(e,a)},t)}},{title:"责任人",dataIndex:"createUser.userName",key:"createUser"},{title:"操作",key:"action",render:function(t,a){return $.a.createElement("span",null,$.a.createElement("a",{href:"javascript:void(0)",onClick:e.handleDelVOS.bind(e,a)},"删除"))}}],i={display:"block",height:"30px",lineHeight:"30px"};return $.a.createElement("div",{className:"m-scheduling"},$.a.createElement(Q.a,{bordered:!1,defaultActiveKey:["1","2","3"]},$.a.createElement(oe,{key:"1",header:"调度属性"},$.a.createElement(_e,{scheduleConf:n,status:t.scheduleStatus,handleScheduleStatus:this.handleScheduleStatus.bind(this),handleScheduleConf:this.handleScheduleConf.bind(this),handleScheduleType:this.handleScheduleType.bind(this),ref:function(t){return e.form=t},key:t.id+"-"+n.periodType})),t.taskType!==ie.b.VIRTUAL_NODE&&$.a.createElement(oe,{key:"2",header:"任务间依赖"},$.a.createElement(j.a,null,$.a.createElement(ce,C()({},pe,{label:"上游任务"}),$.a.createElement(fe,{onSelect:this.handleAddVOS.bind(this),taskId:t.id}))),$.a.createElement(l.a,null,$.a.createElement(v.a,{span:"6"}),$.a.createElement(v.a,null,$.a.createElement(p.a,{className:"m-table",columns:r,bordered:!1,dataSource:t.taskVOS,rowKey:function(e){return e.id.lable}})))),$.a.createElement(oe,{key:"3",header:"自依赖"},$.a.createElement(l.a,null,$.a.createElement(v.a,{span:"6"}),$.a.createElement(v.a,null,$.a.createElement(ue,{onChange:this.setSelfReliance.bind(this),value:this._selfReliance},$.a.createElement(U.a,{style:i,value:!1},"不依赖上一调度周期"),$.a.createElement(U.a,{style:i,value:!0},"自依赖，等待上一调度周期结束，才能继续运行")))))))}}]),t}($.a.Component),fe=function(e){function t(e){L()(this,t);var a=N()(this,(t.__proto__||D()(t)).call(this,e));return a.searchVOS=a.fetchVOS.bind(a),a.handleClick=a.handleClick.bind(a),a.selectVOS=a.props.onSelect,a.taskId=a.props.taskId,a.state={list:[]},a}return B()(t,e),H()(t,[{key:"fetchVOS",value:function(e){var t=this,a=e.target.value;if(""===a.trim())return void this.setState({list:[]});ne.a.getOfflineTaskByName({name:a,taskId:this.taskId}).then(function(e){1===e.code&&(0===e.data.length&&i.a.error("没有符合条件的任务"),t.setState({list:e.data,fetching:!1}))})}},{key:"handleClick",value:function(e){var t=this;ne.a.checkIsLoop({taskId:this.taskId,dependencyTaskId:e.id}).then(function(a){1===a.code&&(a.data?i.a.error("添加失败，该任务循环依赖任务"+(a.data.name||"")+"!"):(t.selectVOS(e),t.$input.value="",t.setState({list:[]})))})}},{key:"render",value:function(){var e=this,t=this.state.list;return $.a.createElement("div",{className:"m-taskselector"},$.a.createElement("input",{onInput:a.i(se.c)(this.searchVOS,500,{maxWait:2e3}),ref:function(t){return e.$input=t},className:"ant-input"}),t.length>0&&$.a.createElement("ul",{className:"tasklist"},t.map(function(t){return $.a.createElement("li",{className:"taskitem",onClick:function(){e.handleClick(t)},key:t.id},t.name)})))}}]),t}($.a.Component),me=function(e,t){return C()({},t)},ge=function(e){return{changeScheduleConf:function(t){e({type:re.h.CHANGE_SCHEDULE_CONF,payload:t})},changeScheduleStatus:function(t){e({type:re.h.CHANGE_SCHEDULE_STATUS,payload:t})},addVOS:function(t){e({type:re.h.ADD_VOS,payload:t})},delVOS:function(t){e({type:re.h.DEL_VOS,payload:t})},getTaskDetail:function(t){ne.a.getOfflineTaskDetail({id:t}).then(function(a){1===a.code&&(e({type:re.h.LOAD_TASK_DETAIL,payload:a.data}),e({type:re.h.OPEN_TASK_TAB,payload:t}))})}}},Ee=a.i(X.connect)(me,ge)(he);t.a=Ee;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(oe,"Panel","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(le,"Option","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(ce,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(ue,"RadioGroup","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(pe,"formItemLayout","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(de,"ScheduleForm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(_e,"FormWrap","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(he,"SchedulingConfig","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(fe,"TaskSelector","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(me,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(ge,"mapDispatch","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"),__REACT_HOT_LOADER__.register(Ee,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/schedulingConfig.js"))}()},1649:function(e,t,a){"use strict";var n=a(51),r=(a.n(n),a(50)),i=a.n(r),s=a(67),o=(a.n(s),a(66)),l=a.n(o),c=a(11),u=a.n(c),p=a(1),d=a.n(p),_=a(4),h=a.n(_),f=a(3),m=a.n(f),g=a(2),E=a.n(g),v=a(1153),y=(a.n(v),a(1152)),k=a.n(y),A=a(0),T=a.n(A),C=a(13);a(136);a.d(t,"a",function(){return O});var b=k.a.Panel,O=function(e){function t(e){return d()(this,t),m()(this,(t.__proto__||u()(t)).call(this,e))}return E()(t,e),h()(t,[{key:"render",value:function(){var e=this.props.tabData;return T.a.createElement("div",{className:"m-taksdetail"},T.a.createElement(k.a,{bordered:!1,defaultActiveKey:["1","2"]},T.a.createElement(b,{key:"1",header:"脚本属性"},T.a.createElement(i.a,{className:"task-info"},T.a.createElement(i.a,null,T.a.createElement(l.a,{span:"10",className:"txt-right"},"脚本名称："),T.a.createElement(l.a,{span:"14"},e.name)),T.a.createElement(i.a,null,T.a.createElement(l.a,{span:"10",className:"txt-right"},"创建人员："),T.a.createElement(l.a,{span:"14"},e.createUser.userName)),T.a.createElement(i.a,null,T.a.createElement(l.a,{span:"10",className:"txt-right"},"创建时间："),T.a.createElement(l.a,{span:"14"},C.a.formatDateTime(e.gmtCreate))),T.a.createElement(i.a,null,T.a.createElement(l.a,{span:"10",className:"txt-right"},"最近修改人员："),T.a.createElement(l.a,{span:"14"},e.modifyUser.userName)),T.a.createElement(i.a,null,T.a.createElement(l.a,{span:"10",className:"txt-right"},"最近修改时间："),T.a.createElement(l.a,{span:"14"},C.a.formatDateTime(e.gmtModified))),T.a.createElement(i.a,null,T.a.createElement(l.a,{span:"10",className:"txt-right"},"描述："),T.a.createElement(l.a,{span:"14"},e.scriptDesc))))))}}]),t}(T.a.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(b,"Panel","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/scriptDetail.js"),__REACT_HOT_LOADER__.register(O,"ScriptDetail","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/scriptDetail.js"))}()},1650:function(e,t,a){"use strict";var n=a(11),r=a.n(n),i=a(1),s=a.n(i),o=a(4),l=a.n(o),c=a(3),u=a.n(c),p=a(2),d=a.n(p),_=a(71),h=(a.n(_),a(70)),f=a.n(h),m=a(0),g=a.n(m),E=a(23),v=a(13),y=a(280),k=a(34),A=a(136),T=a(1654),C=a(1649),b=a(1648),O=a(1657),R=a(1655),w=f.a.TabPane,D=function(e){function t(e){s()(this,t);var a=u()(this,(t.__proto__||r()(t)).call(this,e));return a.state={selected:"",expanded:!1},a.handleCustomParamsChange=function(){return a.__handleCustomParamsChange__REACT_HOT_LOADER__.apply(a,arguments)},a.tabClick=function(){return a.__tabClick__REACT_HOT_LOADER__.apply(a,arguments)},a.getTabPanes=function(){return a.__getTabPanes__REACT_HOT_LOADER__.apply(a,arguments)},a}return d()(t,e),l()(t,[{key:"handleTaskParamChange",value:function(e,t){e!==t&&this.props.setTaskParams({taskParams:t})}},{key:"__handleCustomParamsChange__REACT_HOT_LOADER__",value:function(e){this.props.setTaskParams(e)}},{key:"__tabClick__REACT_HOT_LOADER__",value:function(e){var t=this.state,a=t.selected,n=t.expanded;e===a&&n?(this.setState({selected:"",expanded:!1}),this.SideBench.style.width="30px"):e!==a&&(this.SideBench.style.width="500px",this.setState({selected:e,expanded:!0}))}},{key:"__getTabPanes__REACT_HOT_LOADER__",value:function(){var e=this.props.tabData,t=[g.a.createElement(w,{tab:g.a.createElement("span",{className:"title-vertical"},"任务属性"),key:"params1"},g.a.createElement(T.a,{tabData:e})),g.a.createElement(w,{tab:g.a.createElement("span",{className:"title-vertical"},"调度依赖"),key:"params2"},g.a.createElement(b.a,{tabData:e})),g.a.createElement(w,{tab:g.a.createElement("span",{className:"title-vertical"},"依赖视图"),key:"params4"},g.a.createElement(O.a,{tabData:e}))];if(v.a.checkExist(e.taskType)&&e.taskType!==k.b.VIRTUAL_NODE)t.push([g.a.createElement(w,{tab:g.a.createElement("span",{className:"title-vertical"},"环境参数"),key:"params3"},g.a.createElement(y.a,{options:k.g,key:"params"+e.id,value:e.taskParams,onFocus:function(){},focusOut:function(){},onChange:this.handleTaskParamChange.bind(this)}),";"),g.a.createElement(w,{tab:g.a.createElement("span",{className:"title-vertical"},"任务参数"),key:"params5"},g.a.createElement(R.a,{tabData:e,onChange:this.handleCustomParamsChange}))]);else if(v.a.checkExist(e.type))return g.a.createElement(w,{tab:g.a.createElement("span",{className:"title-vertical"},"脚本属性"),key:"params1"},g.a.createElement(C.a,{tabData:e}));return t}},{key:"render",value:function(){var e=this;return g.a.createElement("div",{className:"m-siderbench bd-left",ref:function(t){e.SideBench=t}},g.a.createElement(f.a,{activeKey:this.state.selected,type:"card",className:"task-params",tabPosition:"right",onTabClick:this.tabClick},this.getTabPanes()))}}]),t}(g.a.Component),S=a.i(E.connect)(function(e){return{}},function(e){return{setTaskParams:function(t){e({type:A.h.SET_TASK_FIELDS_VALUE_SILENT,payload:t})}}})(D);t.a=S;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(w,"TabPane","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/siderBench.js"),__REACT_HOT_LOADER__.register(D,"SiderBench","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/siderBench.js"),__REACT_HOT_LOADER__.register(S,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/siderBench.js"))}()},1651:function(e,t,a){"use strict";function n(e){if(e&&e.length>0){var t=[{title:"序号",key:"t-id",render:function(e,t,a){return a+1}}];return e.forEach(function(e,a){t.push({title:e,key:a+e,render:function(e,t){return L.a.createElement("textarea",{title:t[a],value:t[a]})}})}),t}return[]}function r(e){var t=e.data,a=t.slice(1,t.length),r=n(t[0]);return L.a.createElement(o.a,{rowKey:"id",scroll:{x:!0},className:"console-table",bordered:!0,dataSource:a,columns:r})}var i=a(43),s=(a.n(i),a(42)),o=a.n(s),l=a(108),c=(a.n(l),a(86)),u=a.n(c),p=a(38),d=(a.n(p),a(16)),_=a.n(d),h=a(24),f=(a.n(h),a(22)),m=a.n(f),g=a(11),E=a.n(g),v=a(1),y=a.n(v),k=a(4),A=a.n(k),T=a(3),C=a.n(T),b=a(2),O=a.n(b),R=a(71),w=(a.n(R),a(70)),D=a.n(w),S=a(0),L=a.n(S),x=a(280),H=a(1157);a.d(t,"a",function(){return B});var M=D.a.TabPane,N={mode:"text/x-sql",lineNumbers:!1,readOnly:!0,autofocus:!0,indentWithTabs:!0,smartIndent:!0},F={position:"fixed",bottom:"0px",height:"30px"},B=function(e){function t(){var e,a,n,r;y()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=C()(this,(e=t.__proto__||E()(t)).call.apply(e,[this].concat(s))),n.state={activeKey:"console-log"},n.onEdit=function(){var e;return(e=n).__onEdit__REACT_HOT_LOADER__.apply(e,arguments)},n.onChange=function(){var e;return(e=n).__onChange__REACT_HOT_LOADER__.apply(e,arguments)},n.remove=function(){var e;return(e=n).__remove__REACT_HOT_LOADER__.apply(e,arguments)},n.closeConsole=function(){var e;return(e=n).__closeConsole__REACT_HOT_LOADER__.apply(e,arguments)},n.appendLog=function(){var e;return(e=n).__appendLog__REACT_HOT_LOADER__.apply(e,arguments)},n.exportCsv=function(){var e;return(e=n).__exportCsv__REACT_HOT_LOADER__.apply(e,arguments)},r=a,C()(n,r)}return O()(t,e),A()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.data;t.results&&t.results.length>0&&this.setState({activeKey:""+(t.results.length-1)}),this.appendLog(t.log)}},{key:"__onEdit__REACT_HOT_LOADER__",value:function(e,t){this[t](e)}},{key:"__onChange__REACT_HOT_LOADER__",value:function(e){this.setState({activeKey:e})}},{key:"__remove__REACT_HOT_LOADER__",value:function(e){var t=this.props,n=t.currentTab;(0,t.dispatch)(a.i(H.d)(n,parseInt(e,10)))}},{key:"__closeConsole__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.currentTab;(0,e.dispatch)(a.i(H.e)(t))}},{key:"__appendLog__REACT_HOT_LOADER__",value:function(e){if(e){var t=this.editor.self,a=t.doc;a.setValue(e),a.setCursor(a.lineCount(),null)}}},{key:"__exportCsv__REACT_HOT_LOADER__",value:function(){var e=this.props.data.results,t=parseInt(this.state.activeKey,10),a=e[t],n="data:text/csv;charset=utf-8,";a.forEach(function(e,t){var r=e.join(",");n+=t<a.length?r+"\n":r});var r=encodeURI(n);window.open(r)}},{key:"renderTabs",value:function(e){var t=this;return e&&e.length>0?e.map(function(e,a){var n=L.a.createElement("span",null,"结果",a+1);return L.a.createElement(M,{style:{height:"0px"},tab:n,key:""+a},L.a.createElement(r,{data:e}),L.a.createElement(m.a,{style:F,onClick:t.exportCsv},"下载"))}):[]}},{key:"render",value:function(){var e=this,t=this.props,a=t.data;t.dispatch;return L.a.createElement("div",{className:"ide-console"},L.a.createElement(D.a,{hideAdd:!0,type:"editable-card",activeKey:this.state.activeKey,onChange:this.onChange,onEdit:this.onEdit},L.a.createElement(M,{tab:"日志",key:"console-log"},L.a.createElement("div",{style:{position:"relative"}},L.a.createElement(x.a,{ref:function(t){e.editor=t},options:N,key:"output-log"}))),this.renderTabs(a.results)),L.a.createElement(u.a,{placement:"top",title:"关闭控制台"},L.a.createElement(_.a,{className:"close-console",type:"close",onClick:this.closeConsole})))}}]),t}(S.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(M,"TabPane","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/console.js"),__REACT_HOT_LOADER__.register(N,"editorOptions","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/console.js"),__REACT_HOT_LOADER__.register(F,"exportStyle","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/console.js"),__REACT_HOT_LOADER__.register(B,"Console","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/console.js"),__REACT_HOT_LOADER__.register(n,"generateCols","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/console.js"),__REACT_HOT_LOADER__.register(r,"Result","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/console.js"))}()},1652:function(e,t,a){"use strict";var n=a(5),r=a.n(n),i=a(11),s=a.n(i),o=a(1),l=a.n(o),c=a(4),u=a.n(c),p=a(3),d=a.n(p),_=a(2),h=a.n(_),f=a(0),m=a.n(f),g=a(302),E=a.n(g),v=a(23),y=a(30),k=(a.n(y),a(13)),A=a(1653),T=a(1651),C=(a(19),a(758)),b=a(280),O=a(136),R=a(1157),w=function(e){function t(){var e,n,r,i;l()(this,t);for(var o=arguments.length,c=Array(o),u=0;u<o;u++)c[u]=arguments[u];return n=r=d()(this,(e=t.__proto__||s()(t)).call.apply(e,[this].concat(c))),r.handleEditorTxtChange=function(){var e;return(e=r).__handleEditorTxtChange__REACT_HOT_LOADER__.apply(e,arguments)},r.debounceChange=a.i(y.debounce)(r.handleEditorTxtChange,300,{maxWait:2e3}),r.onEditorSelection=function(){var e;return(e=r).__onEditorSelection__REACT_HOT_LOADER__.apply(e,arguments)},i=n,d()(r,i)}return h()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props.currentTabData;e&&this.props.getTab(e.id)}},{key:"componentWillReceiveProps",value:function(e){var t=e.currentTabData,a=this.props.currentTabData;t&&t.id!==a.id&&this.props.getTab(t.id)}},{key:"matchTaskParams",value:function(e){for(var t=/\$\{([.\w]+)\}/g,a=this.props.taskCustomParams,n=[],r=null,i=function(){var e=r[1],t={paramName:e,paramCommand:""},i=a.find(function(t){return t.paramName===e});i?(t.type=0,t.paramCommand=i.paramCommand):t.type=1,n.find(function(t){return e===t.paramName})||n.push(t)};null!==(r=t.exec(e));)i();return n}},{key:"__handleEditorTxtChange__REACT_HOT_LOADER__",value:function(e,t,n){var r=this.props.currentTabData,i=this.props.taskCustomParams,s={merged:!1,cursor:n.getCursor()};e!==t&&(k.a.checkExist(r.taskType)?(s.sqlText=t,s.taskVariables=a.i(C.d)(i,t)):k.a.checkExist(r.type)&&(s.scriptText=t),this.props.updateTaskFields(s))}},{key:"__onEditorSelection__REACT_HOT_LOADER__",value:function(e,t){var a=t.getSelection();if(t.somethingSelected())this.props.setSelection(a);else{""!==this.props.sqlEditor.selection&&this.props.setSelection("")}}},{key:"render",value:function(){var e=this.props,t=e.sqlEditor,a=e.currentTabData,n=e.options,i=e.value,s=a.id,o=t.console,l=o&&o[s]?o[s]:{results:[]},c=a.cursor||void 0;return m.a.createElement("div",{className:"ide-sql"},m.a.createElement("div",{className:"ide-header bd-bottom"},m.a.createElement(A.a,this.props)),m.a.createElement("div",{className:"ide-content"},l.log?m.a.createElement(E.a,{split:"horizontal",minSize:100,maxSize:"80%",style:{paddingBottom:"40px"},defaultSize:"60%",primary:"first"},m.a.createElement("div",{className:"ide-editor bd-bottom"},m.a.createElement(b.a,{key:"sqlEditor",sync:a.merged||void 0,options:n,value:i,cursor:c,cursorActivity:this.onEditorSelection,onChange:this.debounceChange})),m.a.createElement(T.a,r()({data:l},this.props))):m.a.createElement("div",{className:"ide-editor bd-bottom"},m.a.createElement(b.a,{key:"sqlEditor",sync:a.merged||void 0,options:n,cursor:c,cursorActivity:this.onEditorSelection,onChange:this.debounceChange,value:i}))))}}]),t}(f.Component),D=a.i(v.connect)(function(e){return{sqlEditor:e.sqlEditor,project:e.project,user:e.user}},function(e){return{dispatch:e,updateTaskFields:function(t){e({type:O.h.SET_TASK_FIELDS_VALUE,payload:t})},setSelection:function(t){e(a.i(R.b)(t))},getTab:function(t){e(a.i(R.c)(t))}}})(w);t.a=D;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(w,"SQLEditor","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/index.js"),__REACT_HOT_LOADER__.register(D,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/index.js"))}()},1653:function(e,t,a){"use strict";var n=a(57),r=(a.n(n),a(55)),i=a.n(r),s=a(24),o=(a.n(s),a(22)),l=a.n(o),c=a(28),u=(a.n(c),a(27)),p=a.n(u),d=a(11),_=a.n(d),h=a(1),f=a.n(h),m=a(4),g=a.n(m),E=a(3),v=a.n(E),y=a(2),k=a.n(y),A=a(49),T=(a.n(A),a(48)),C=a.n(T),b=a(0),O=a.n(b),R=a(10),w=a.n(R),D=a(13),S=a(19),L=(a(268),a(280)),x=a(789),H=a(1157),M=a(136);a.d(t,"a",function(){return F});var N=C.a.confirm,F=function(e){function t(){var e,a,n,r;f()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=v()(this,(e=t.__proto__||_()(t)).call.apply(e,[this].concat(s))),n.state={currentSql:"",running:!1,disabledStopJob:!0,execConfirmVisible:!1},n.onNeverWarning=function(){var e;return(e=n).__onNeverWarning__REACT_HOT_LOADER__.apply(e,arguments)},n.execSQL=function(){var e;return(e=n).__execSQL__REACT_HOT_LOADER__.apply(e,arguments)},n.reqExecSQL=function(){var e;return(e=n).__reqExecSQL__REACT_HOT_LOADER__.apply(e,arguments)},n.stopSQL=function(){var e;return(e=n).__stopSQL__REACT_HOT_LOADER__.apply(e,arguments)},n.filterSQL=function(){var e;return(e=n).__filterSQL__REACT_HOT_LOADER__.apply(e,arguments)},n.execConfirm=function(){var e;return(e=n).__execConfirm__REACT_HOT_LOADER__.apply(e,arguments)},n.sqlFormat=function(){var e;return(e=n).__sqlFormat__REACT_HOT_LOADER__.apply(e,arguments)},r=a,v()(n,r)}return k()(t,e),g()(t,[{key:"__onNeverWarning__REACT_HOT_LOADER__",value:function(e){var t=e.target.checked?1:0;this.props.dispatch(a.i(x.e)({isCheckDDL:t}))}},{key:"__execSQL__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.currentTab,n=e.sqlEditor,r=e.user,i=e.currentTabData,s=e.project,o=e.dispatch;this.setState({execConfirmVisible:!1});var l=i.sqlText||i.scriptText,c={projectId:s.id,isCheckDDL:r.isCheckDDL},u=[];if(n.selection?u=n.selection.split(";"):l&&(u=l.split(";")),(u=this.filterSQL(u))&&u.length>0){o(a.i(H.f)(t," 正在提交... \n waiting...")),this.reqExecSQL(i,c,u,0)}}},{key:"__reqExecSQL__REACT_HOT_LOADER__",value:function(e,t,n,r){var i=this,s=this.getUniqueKey(e.id),o=this.props,l=o.dispatch,c=o.currentTab;t.sql=""+n[r],t.uniqueKey=s,this.setState({currentSql:s,disabledStopJob:!1,running:!0});var u=function(s){i.setState({disabledStopJob:!0,running:!1}),s.message&&l(a.i(H.g)(c,"请求结果:\n "+s.message)),1===s.code&&(l(a.i(H.h)(c,s.data)),l(a.i(H.g)(c,"执行成功!")),r<n.length-1&&i.reqExecSQL(e,t,n,r+1))};D.a.checkExist(e.taskType)?(t.taskId=e.id,S.a.execSQLImmediately(t).then(u)):D.a.checkExist(e.type)&&(t.scriptId=e.id,S.a.execScript(t).then(u))}},{key:"__stopSQL__REACT_HOT_LOADER__",value:function(){var e=this.props.currentTabData,t=this.state.currentSql;if(t){var a=function(e){1===e.code?p.a.success("停止执行成功！"):p.a.success("停止执行失败！")};D.a.checkExist(e.taskType)?S.a.stopSQLImmediately({taskId:e.id,uniqueKey:t}).then(a):D.a.checkExist(e.type)&&S.a.stopScript({scriptId:e.id,uniqueKey:t}).then(a)}}},{key:"__filterSQL__REACT_HOT_LOADER__",value:function(e){var t=[];if(e&&e.length>0)for(var a=0;a<e.length;a++){var n=e[a],r=D.a.trim(n);""!==r&&0!==r.indexOf("--")&&t.push(D.a.trimlr(n))}return t}},{key:"__execConfirm__REACT_HOT_LOADER__",value:function(){var e=this.props,t=(e.currentTab,e.currentTabData);e.dispatch;if(1===e.user.isCheckDDL)return void this.execSQL();var a=t.sqlText||t.scriptText,n=/(create|alter|drop|truncate)+\s+(external|temporary)?\s?(table)+\s+([\s\S]*?)/gi;n.test(a)?this.setState({execConfirmVisible:!0}):(this.execSQL(),this.setState({execConfirmVisible:!1}))}},{key:"__sqlFormat__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.currentTabData,a=e.dispatch,n={sql:t.sqlText||t.scriptText||""};S.a.sqlFormat(n).then(function(e){if(e.data){var n={merged:!0};t.scriptText?n.scriptText=e.data:n.sqlText=e.data,a({type:M.h.SET_TASK_SQL_FIELD_VALUE,payload:n})}})}},{key:"getUniqueKey",value:function(e){return e+"_"+w()().valueOf()}},{key:"render",value:function(){var e=this,t=this.state,a=t.disabledStopJob,n=t.running,r=t.execConfirmVisible,s=this.props.currentTabData,o=s.sqlText||s.scriptText;return O.a.createElement("div",{className:"ide-toolbar toolbar"},O.a.createElement(l.a,{onClick:this.execConfirm,loading:n,disabled:!a,title:"立即运行",icon:"play-circle-o",style:{marginLeft:"0px"}}," 运行"),O.a.createElement(l.a,{onClick:this.stopSQL,icon:"pause-circle-o",title:"立即停止",disabled:a},"停止"),O.a.createElement(l.a,{icon:"appstore-o",title:"格式化",onClick:this.sqlFormat},"格式化"),O.a.createElement(C.a,{maskClosable:!0,visible:r,title:"执行的语句中包含DDL语句，是否确认执行？",wrapClassName:"vertical-center-modal modal-body-nopadding",footer:O.a.createElement("div",null,O.a.createElement(i.a,{onChange:this.onNeverWarning},"不在提示"),O.a.createElement(l.a,{onClick:function(){e.setState({execConfirmVisible:!1})}},"取消"),O.a.createElement(l.a,{type:"primary",onClick:this.execSQL},"执行"))},O.a.createElement("div",{style:{height:"400px"}},O.a.createElement(L.a,{value:o}))))}}]),t}(b.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(N,"confirm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/toolbar.js"),__REACT_HOT_LOADER__.register(F,"Toolbar","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/sqlEditor/toolbar.js"))}()},1654:function(e,t,a){"use strict";function n(e){var t=e.taskInfo;return D.a.createElement(k.a,{className:"task-info"},D.a.createElement(k.a,null,D.a.createElement(C.a,{span:"10",className:"txt-right"},"任务名称："),D.a.createElement(C.a,{span:"14"},t.name)),D.a.createElement(k.a,null,D.a.createElement(C.a,{span:"10",className:"txt-right"},"任务类型："),D.a.createElement(C.a,{span:"14"},D.a.createElement(x.a,{value:t.taskType}))),t.resourceList.length&&D.a.createElement(k.a,null,D.a.createElement(C.a,{span:"10",className:"txt-right"},"资源："),D.a.createElement(C.a,{span:"14t"},t.resourceList.map(function(e){return D.a.createElement(E.a,{key:e.id,color:"blue",style:{marginTop:10}},e.resourceName)}))),D.a.createElement(k.a,null,D.a.createElement(C.a,{span:"10",className:"txt-right"},"创建人员："),D.a.createElement(C.a,{span:"14"},t.createUser.userName)),D.a.createElement(k.a,null,D.a.createElement(C.a,{span:"10",className:"txt-right"},"创建时间："),D.a.createElement(C.a,{span:"14"},L.a.formatDateTime(t.gmtCreate))),D.a.createElement(k.a,null,D.a.createElement(C.a,{span:"10",className:"txt-right"},"最近修改人员："),D.a.createElement(C.a,{span:"14"},t.modifyUser.userName)),D.a.createElement(k.a,null,D.a.createElement(C.a,{span:"10",className:"txt-right"},"最近修改时间："),D.a.createElement(C.a,{span:"14"},L.a.formatDateTime(t.gmtModified))),D.a.createElement(k.a,null,D.a.createElement(C.a,{span:"10",className:"txt-right"},"描述："),D.a.createElement(C.a,{span:"14"},t.taskDesc)))}var r=a(5),i=a.n(r),s=a(11),o=a.n(s),l=a(1),c=a.n(l),u=a(4),p=a.n(u),d=a(3),_=a.n(d),h=a(2),f=a.n(h),m=a(1156),g=(a.n(m),a(1155)),E=a.n(g),v=a(51),y=(a.n(v),a(50)),k=a.n(y),A=a(67),T=(a.n(A),a(66)),C=a.n(T),b=a(1153),O=(a.n(b),a(1152)),R=a.n(O),w=a(0),D=a.n(w),S=a(23),L=a(13),x=a(87),H=(a(34),a(1656)),M=a(136),N=R.a.Panel,F=function(e){function t(e){return c()(this,t),_()(this,(t.__proto__||o()(t)).call(this,e))}return f()(t,e),p()(t,[{key:"render",value:function(){var e=this.props.tabData;return D.a.createElement("div",{className:"m-taksdetail"},D.a.createElement(R.a,{bordered:!1,defaultActiveKey:["1","2"]},D.a.createElement(N,{key:"1",header:"任务属性"},D.a.createElement(n,{taskInfo:e})),D.a.createElement(N,{key:"2",header:"历史发布版本"},D.a.createElement(H.a,{taskInfo:e,changeSql:this.props.setSqlText}))))}}]),t}(D.a.Component),B=a.i(S.connect)(function(e,t){return i()({},t)},function(e){return{setSqlText:function(t){e({type:M.h.SET_TASK_FIELDS_VALUE,payload:{sqlText:t,merged:!0}})}}})(F);t.a=B;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(N,"Panel","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskDetail.js"),__REACT_HOT_LOADER__.register(n,"TaskInfo","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskDetail.js"),__REACT_HOT_LOADER__.register(F,"TaskDetail","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskDetail.js"),__REACT_HOT_LOADER__.register(B,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskDetail.js"))}()},1655:function(e,t,a){"use strict";var n=a(5),r=a.n(n),i=a(29),s=(a.n(i),a(39)),o=a.n(s),l=a(45),c=a.n(l),u=a(11),p=a.n(u),d=a(1),_=a.n(d),h=a(4),f=a.n(h),m=a(3),g=a.n(m),E=a(2),v=a.n(E),y=a(1153),k=(a.n(y),a(1152)),A=a.n(k),T=a(32),C=(a.n(T),a(31)),b=a.n(C),O=a(0),R=a.n(O),w=(a(23),a(35)),D=(a.n(w),b.a.Item),S=A.a.Panel,L={labelCol:{xs:{span:24},sm:{span:9}},wrapperCol:{xs:{span:24},sm:{span:15}}},x=function(e){function t(){var e,a,n,r;_()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=g()(this,(e=t.__proto__||p()(t)).call.apply(e,[this].concat(s))),n.onChange=function(){var e;return(e=n).__onChange__REACT_HOT_LOADER__.apply(e,arguments)},n.getFormItems=function(){var e;return(e=n).__getFormItems__REACT_HOT_LOADER__.apply(e,arguments)},r=a,g()(n,r)}return v()(t,e),f()(t,[{key:"__onChange__REACT_HOT_LOADER__",value:function(e,t){var a=this.props,n=a.tabData,r=a.onChange,i=[].concat(c()(n.taskVariables));i[e].paramCommand=t,r({taskVariables:i})}},{key:"__getFormItems__REACT_HOT_LOADER__",value:function(){var e=this,t=this.props.tabData.taskVariables,a=[],n=[],i=function(t,a){return R.a.createElement(D,r()({key:a.paramName},L,{label:a.paramName}),R.a.createElement(o.a,{defaultValue:a.paramCommand,onChange:function(a){e.onChange(t,a.target.value)}}))};if(t)for(var s=0;s<t.length;s++){var l=t[s],c=i(s,l);0===l.type?a.push(c):1===l.type&&n.push(c)}return{sysItems:a,customItems:n}}},{key:"render",value:function(){var e=this.getFormItems();return R.a.createElement(b.a,null,R.a.createElement(A.a,{bordered:!1,defaultActiveKey:["1","2"]},R.a.createElement(S,{key:"1",header:"系统参数配置"},e.sysItems),R.a.createElement(S,{key:"2",header:"自定义参数配置"},e.customItems)))}}]),t}(R.a.Component),H=x;t.a=H;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(D,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskParams.js"),__REACT_HOT_LOADER__.register(S,"Panel","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskParams.js"),__REACT_HOT_LOADER__.register(L,"formItemLayout","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskParams.js"),__REACT_HOT_LOADER__.register(x,"TaskParams","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskParams.js"),__REACT_HOT_LOADER__.register(H,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskParams.js"))}()},1656:function(e,t,a){"use strict";var n=a(49),r=(a.n(n),a(48)),i=a.n(r),s=a(43),o=(a.n(s),a(42)),l=a.n(o),c=a(11),u=a.n(c),p=a(1),d=a.n(p),_=a(4),h=a.n(_),f=a(3),m=a.n(f),g=a(2),E=a.n(g),v=a(0),y=a.n(v),k=(a(23),a(13)),A=a(1637),T=a(34);a.d(t,"a",function(){return C});var C=function(e){function t(e){d()(this,t);var a=m()(this,(t.__proto__||u()(t)).call(this,e));return a.state={showDiff:!1,campareTo:""},a.diffCode=function(){return a.__diffCode__REACT_HOT_LOADER__.apply(a,arguments)},a.close=function(){return a.__close__REACT_HOT_LOADER__.apply(a,arguments)},a.codeChange=function(){return a.__codeChange__REACT_HOT_LOADER__.apply(a,arguments)},a.taskVersionCols=function(){return a.__taskVersionCols__REACT_HOT_LOADER__.apply(a,arguments)},a}return E()(t,e),h()(t,[{key:"__diffCode__REACT_HOT_LOADER__",value:function(e){this.setState({showDiff:!0,campareTo:e})}},{key:"__close__REACT_HOT_LOADER__",value:function(){this.setState({showDiff:!1,campareTo:""})}},{key:"__codeChange__REACT_HOT_LOADER__",value:function(e,t){this.props.changeSql(t)}},{key:"render",value:function(){var e=this.props.taskInfo,t=this.state,a=t.showDiff,n=t.campareTo;return y.a.createElement("div",null,y.a.createElement(l.a,{className:"m-table",rowKey:"id",dataSource:e.taskVersions||[],columns:this.taskVersionCols(),pagination:!1}),y.a.createElement(i.a,{wrapClassName:"vertical-center-modal modal-body-nopadding",title:"历史版本对比",width:"900px",bodyStyle:{height:"500px"},visible:a,onCancel:this.close,cancelText:"关闭",footer:null},y.a.createElement(A.a,{value:e.sqlText,compareTo:n.sqlText,onChange:this.codeChange})))}},{key:"__taskVersionCols__REACT_HOT_LOADER__",value:function(){var e=this,t=this.props.taskInfo;return[{title:"发布时间",dataIndex:"gmtCreate",key:"gmtCreate",render:function(e){return k.a.formatDateTime(e)}},{title:"发布人",dataIndex:"userName",key:"userName",render:function(e,t){return t.task&&t.task.modifyUser&&t.task.modifyUser.userName}},{title:"描述",dataIndex:"publishDesc",key:"publishDesc"},{title:"操作",dataIndex:"id",width:80,key:"operation",render:function(a,n){return y.a.createElement("span",null,t.taskType===T.b.SQL?y.a.createElement("a",{onClick:function(){return e.diffCode(n)}},"代码"):"-")}}]}}]),t}(y.a.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(C,"TaskVersion","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskVersion.js")}()},1657:function(e,t,a){"use strict";var n=a(108),r=(a.n(n),a(86)),i=a.n(r),s=a(38),o=(a.n(s),a(16)),l=a.n(o),c=a(110),u=(a.n(c),a(109)),p=a.n(u),d=a(82),_=a.n(d),h=a(11),f=a.n(h),m=a(1),g=a.n(m),E=a(4),v=a.n(E),y=a(3),k=a.n(y),A=a(2),T=a.n(A),C=a(0),b=a.n(C),O=(a(23),a(18),a(13),a(19)),R=a(268),w=a(918);a.d(t,"a",function(){return Q});var D=a(790)({mxImageBasePath:"public/rdos/mxgraph/images",mxBasePath:"public/rdos/mxgraph"}),S=D.mxGraph,L=D.mxShape,x=D.mxConnectionConstraint,H=D.mxPoint,M=D.mxPolyline,N=D.mxEvent,F=D.mxRubberband,B=D.mxCellState,I=D.mxConstants,V=D.mxEdgeStyle,U=D.mxPopupMenu,P=D.mxPerimeter,z=D.mxUndoManager,j=D.mxCompactTreeLayout,q=D.mxUtils,K=D.mxXmlCanvas2D,G=D.mxImageExport,W=D.mxXmlRequest,Y={width:100,height:30},Q=function(e){function t(){var e,a,n,r;g()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=k()(this,(e=t.__proto__||f()(t)).call.apply(e,[this].concat(s))),n.state={selectedTask:"",data:{},loading:"success",lastVertex:"",sort:"children",visible:!1},n.loadEditor=function(){var e;return(e=n).__loadEditor__REACT_HOT_LOADER__.apply(e,arguments)},n.getStyles=function(){var e;return(e=n).__getStyles__REACT_HOT_LOADER__.apply(e,arguments)},n.formatTooltip=function(){var e;return(e=n).__formatTooltip__REACT_HOT_LOADER__.apply(e,arguments)},n.corvertValueToString=function(){var e;return(e=n).__corvertValueToString__REACT_HOT_LOADER__.apply(e,arguments)},n.insertEdge=function(){var e;return(e=n).__insertEdge__REACT_HOT_LOADER__.apply(e,arguments)},n.insertVertex=function(){var e;return(e=n).__insertVertex__REACT_HOT_LOADER__.apply(e,arguments)},n.doInsertVertex=function(){var e;return(e=n).__doInsertVertex__REACT_HOT_LOADER__.apply(e,arguments)},n.loadTaskChidren=function(){var e;return(e=n).__loadTaskChidren__REACT_HOT_LOADER__.apply(e,arguments)},n.loadTaskParent=function(){var e;return(e=n).__loadTaskParent__REACT_HOT_LOADER__.apply(e,arguments)},n.refresh=function(){var e;return(e=n).__refresh__REACT_HOT_LOADER__.apply(e,arguments)},n.zoomIn=function(){var e;return(e=n).__zoomIn__REACT_HOT_LOADER__.apply(e,arguments)},n.zoomOut=function(){var e;return(e=n).__zoomOut__REACT_HOT_LOADER__.apply(e,arguments)},n.hideMenu=function(){var e;return(e=n).__hideMenu__REACT_HOT_LOADER__.apply(e,arguments)},r=a,k()(n,r)}return T()(t,e),v()(t,[{key:"componentDidMount",value:function(){this._vertexCells=[],this.Container.innerHTML="";var e=this.Container,t=this.props.tabData;this.initEditor(),this.loadEditor(e),this.listenDoubleClick(),this.hideMenu(),this.loadTaskChidren({taskId:t.id,level:6})}},{key:"__loadEditor__REACT_HOT_LOADER__",value:function(e){N.disableContextMenu(e);var t=new S(e);this.graph=t,t.setPanning(!0),t.panningHandler.useLeftButtonForPanning=!0,t.setConnectable(!0),t.setTooltips(!0),t.view.setScale(1),t.setHtmlLabels(!0),t.setAllowDanglingEdges(!1),t.setConnectable(!1),t.isCellsMovable=function(e){var e=t.getSelectionCell();return!(e&&e.edge)},t.isCellEditable=function(){return!1};var a=this.getDefaultVertexStyle();t.getStylesheet().putDefaultVertexStyle(a),t.convertValueToString=this.corvertValueToString,t.getTooltipForCell=this.formatTooltip;var n=this.getDefaultEdgeStyle();t.getStylesheet().putDefaultEdgeStyle(n),I.HANDLE_FILLCOLOR="#ffffff",I.HANDLE_STROKECOLOR="#2491F7",I.VERTEX_SELECTION_COLOR="#2491F7",new F(t)}},{key:"__getStyles__REACT_HOT_LOADER__",value:function(e){return"whiteSpace=wrap;fillColor=#E6F7FF;strokeColor=#90D5FF;"}},{key:"__formatTooltip__REACT_HOT_LOADER__",value:function(e){var t=e.getAttribute("data"),a=t?JSON.parse(t):"";return a?a.name:""}},{key:"__corvertValueToString__REACT_HOT_LOADER__",value:function(e){if(q.isNode(e.value)&&"task"==e.value.nodeName.toLowerCase()){var t=e.getAttribute("data"),n=t?JSON.parse(t):"",r=a.i(w.a)(n.taskType);if(n)return'<div class="vertex"><span>'+(n.name||"")+'</span>\n                    <span style="font-size:10px; color: #666666;">'+r+"</span>\n                    </div>"}return""}},{key:"__insertEdge__REACT_HOT_LOADER__",value:function(e,t,a,n){"children"===t?e.insertEdge(a,null,"",a,n):e.insertEdge(a,null,"",n,a)}},{key:"__insertVertex__REACT_HOT_LOADER__",value:function(e,t,a,n){if(t){var r=this.getStyles(t.status),i=this._vertexCells.find(function(e){var a=e.getAttribute("data");return a?JSON.parse(a).id===t.id:null}),s="";if(i)this.insertEdge(e,n,a,i);else{var o=q.createXmlDocument(),l=o.createElement("Task");l.setAttribute("id",t.id),l.setAttribute("data",_()(t)),s=e.insertVertex(e.getDefaultParent(),null,l,0,0,Y.width,Y.height,r),this.insertEdge(e,n,a,s),this._vertexCells.push(s)}if(t.taskVOS)for(var c=t.taskVOS,u=0;u<c.length;u++)this.insertVertex(e,c[u],s,n)}}},{key:"__doInsertVertex__REACT_HOT_LOADER__",value:function(e,t){var a=this.graph,n=a.getModel(),r=new j(a,!1);n.clear();var i=(a.container.clientWidth-Y.width)/2,s=200;n.beginUpdate();var o=a.getDefaultParent();try{this.insertVertex(a,e,o,t),r.execute(o),a.view.setTranslate(i,s)}finally{n.endUpdate()}}},{key:"__loadTaskChidren__REACT_HOT_LOADER__",value:function(e){var t=this;this.setState({loading:"loading"}),O.a.getTaskChildren(e).then(function(e){if(1===e.code){var a=e.data;t.setState({selectedTask:a,data:a,sort:"children"}),t.doInsertVertex(a,"children")}t.setState({loading:"success"})})}},{key:"__loadTaskParent__REACT_HOT_LOADER__",value:function(e){var t=this;this.setState({loading:"loading"}),O.a.getTaskParents(e).then(function(e){if(1===e.code){var a=e.data;t.setState({data:a,selectedTask:a,sort:"parent"}),t.doInsertVertex(a,"parent")}t.setState({loading:"success"})})}},{key:"listenDoubleClick",value:function(){this.graph.addListener(N.DOUBLE_CLICK,function(e,t){t.getProperty("cell")})}},{key:"listenOnClick",value:function(){var e=this;this.graph.addListener(N.onClick,function(t,a){var n=a.getProperty("cell");if(n){var r=n.getAttribute("data");r=r?JSON.parse(r):"",e.setState({selectedTask:r})}})}},{key:"__refresh__REACT_HOT_LOADER__",value:function(){this.componentDidMount()}},{key:"graphEnable",value:function(){var e=this.graph.isEnabled();this.graph.setEnabled(!e)}},{key:"__zoomIn__REACT_HOT_LOADER__",value:function(){this.graph.zoomIn()}},{key:"__zoomOut__REACT_HOT_LOADER__",value:function(){this.graph.zoomOut()}},{key:"__hideMenu__REACT_HOT_LOADER__",value:function(){var e=this;document.addEventListener("click",function(t){var a=e.graph;a.popupMenuHandler;a.popupMenuHandler.isMenuShowing()&&a.popupMenuHandler.hideMenu()})}},{key:"render",value:function(){var e=this;this.state.selectedTask,this.props.project;return b.a.createElement("div",{className:"graph-editor",style:{position:"relative"}},b.a.createElement("div",{className:"editor pointer",ref:function(t){e.Container=t}}),b.a.createElement(p.a,{tip:"Loading...",size:"large",spinning:"loading"===this.state.loading},b.a.createElement("div",{className:"absolute-middle",style:{width:"100%",height:"100%"}})),b.a.createElement("div",{className:"graph-toolbar"},b.a.createElement(i.a,{placement:"bottom",title:"刷新"},b.a.createElement(l.a,{type:"reload",onClick:this.refresh})),b.a.createElement(i.a,{placement:"bottom",title:"放大"},b.a.createElement(R.a,{onClick:this.zoomIn,type:"zoom-in"})),b.a.createElement(i.a,{placement:"bottom",title:"缩小"},b.a.createElement(R.a,{onClick:this.zoomOut,type:"zoom-out"}))))}},{key:"getDefaultVertexStyle",value:function(){var e=[];return e[I.STYLE_SHAPE]=I.SHAPE_RECTANGLE,e[I.STYLE_PERIMETER]=P.RectanglePerimeter,e[I.STYLE_STROKECOLOR]="#90D5FF",e[I.STYLE_FILLCOLOR]="#E6F7FF;",e[I.STYLE_FONTCOLOR]="#333333;",e[I.STYLE_ALIGN]=I.ALIGN_CENTER,e[I.STYLE_VERTICAL_ALIGN]=I.ALIGN_MIDDLE,e[I.STYLE_FONTSIZE]="12",e[I.STYLE_FONTSTYLE]=1,e}},{key:"getDefaultEdgeStyle",value:function(){var e=[];return e[I.STYLE_SHAPE]=I.SHAPE_CONNECTOR,e[I.STYLE_STROKECOLOR]="#9EABB2",e[I.STYLE_STROKEWIDTH]=1,e[I.STYLE_ALIGN]=I.ALIGN_CENTER,e[I.STYLE_VERTICAL_ALIGN]=I.ALIGN_MIDDLE,e[I.STYLE_EDGE]=V.TopToBottom,e[I.STYLE_ENDARROW]=I.ARROW_CLASSIC,e[I.STYLE_FONTSIZE]="10",e[I.STYLE_ROUNDED]=!0,e}},{key:"initEditor",value:function(){S.prototype.getAllConnectionConstraints=function(e,t){if(null!=e&&null!=e.shape)if(null!=e.shape.stencil){if(null!=e.shape.stencil)return e.shape.stencil.constraints}else if(null!=e.shape.constraints)return e.shape.constraints;return null},L.prototype.constraints=[new x(new H(.25,0),!0),new x(new H(.5,0),!0),new x(new H(.75,0),!0),new x(new H(0,.25),!0),new x(new H(0,.5),!0),new x(new H(0,.75),!0),new x(new H(1,.25),!0),new x(new H(1,.5),!0),new x(new H(1,.75),!0),new x(new H(.25,1),!0),new x(new H(.5,1),!0),new x(new H(.75,1),!0)],M.prototype.constraints=null}}]),t}(C.Component);!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(D,"Mx","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(S,"mxGraph","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(L,"mxShape","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(x,"mxConnectionConstraint","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(H,"mxPoint","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(M,"mxPolyline","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(N,"mxEvent","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(F,"mxRubberband","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(B,"mxCellState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(I,"mxConstants","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(V,"mxEdgeStyle","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(U,"mxPopupMenu","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(P,"mxPerimeter","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(z,"mxUndoManager","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(j,"mxCompactTreeLayout","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(q,"mxUtils","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(K,"mxXmlCanvas2D","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(G,"mxImageExport","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(W,"mxXmlRequest","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(Y,"VertexSize","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"),__REACT_HOT_LOADER__.register(Q,"TaskView","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/taskView/index.js"))}()},1658:function(e,t,a){"use strict";var n=a(1156),r=(a.n(n),a(1155)),i=a.n(r),s=a(28),o=(a.n(s),a(27)),l=a.n(o),c=a(281),u=a.n(c),p=a(29),d=(a.n(p),a(39)),_=a.n(d),h=a(5),f=a.n(h),m=a(51),g=(a.n(m),a(50)),E=a.n(g),v=a(67),y=(a.n(v),a(66)),k=a.n(y),A=a(144),T=(a.n(A),a(111)),C=a.n(T),b=a(24),O=(a.n(b),a(22)),R=a.n(O),w=a(38),D=(a.n(w),a(16)),S=a.n(D),L=a(137),x=(a.n(L),a(100)),H=a.n(x),M=a(11),N=a.n(M),F=a(1),B=a.n(F),I=a(4),V=a.n(I),U=a(3),P=a.n(U),z=a(2),j=a.n(z),q=a(32),K=(a.n(q),a(31)),G=a.n(K),W=a(49),Y=(a.n(W),a(48)),Q=a.n(Y),J=a(71),$=(a.n(J),a(70)),X=a.n($),Z=a(0),ee=a.n(Z),te=a(23),ae=a(18),ne=a(302),re=(a.n(ne),a(30)),ie=(a.n(re),a(13)),se=a(19),oe=a(34),le=a(268),ce=a(1629),ue=a(1646),pe=a(1650),de=a(1638),_e=a(136),he=a(198),fe=X.a.TabPane,me=Q.a.confirm,ge=G.a.Item,Ee=function(e){function t(e){B()(this,t);var a=P()(this,(t.__proto__||N()(t)).call(this,e));return a.state={visible:!1,showPublish:!1},a.handleMenuClick=function(){return a.__handleMenuClick__REACT_HOT_LOADER__.apply(a,arguments)},a.handleCreateClick=function(){return a.__handleCreateClick__REACT_HOT_LOADER__.apply(a,arguments)},a.createMenu=function(){return a.__createMenu__REACT_HOT_LOADER__.apply(a,arguments)},a.importMenu=function(){return a.__importMenu__REACT_HOT_LOADER__.apply(a,arguments)},a.renderPublish=function(){return a.__renderPublish__REACT_HOT_LOADER__.apply(a,arguments)},a.publishChange=function(){return a.__publishChange__REACT_HOT_LOADER__.apply(a,arguments)},a.closePublish=function(){return a.__closePublish__REACT_HOT_LOADER__.apply(a,arguments)},a}return j()(t,e),V()(t,[{key:"__handleMenuClick__REACT_HOT_LOADER__",value:function(e){if("1"===e.key){var t=document.getElementById("importFile");t&&t.click()}}},{key:"__handleCreateClick__REACT_HOT_LOADER__",value:function(e){"task"===e.key?this.props.toggleCreateTask():"script"===e.key&&this.props.toggleCreateScript()}},{key:"__createMenu__REACT_HOT_LOADER__",value:function(){var e=this.props.scriptTreeData;return ee.a.createElement(H.a,{onClick:this.handleCreateClick},ee.a.createElement(H.a.Item,{key:"task"},"创建任务"),e&&ee.a.createElement(H.a.Item,{key:"script"},"创建脚本"))}},{key:"__importMenu__REACT_HOT_LOADER__",value:function(){return ee.a.createElement(H.a,{onClick:this.handleMenuClick},ee.a.createElement(H.a.Item,{key:"1"},"导入本地数据"))}},{key:"render",value:function(){var e=this,t=this.props,n=t.tabs,r=t.currentTab,i=t.currentTabData,s=t.dataSync,o=t.taskCustomParams,l=s.sourceMap,c=s.targetMap,u=!1;a.i(re.isEmpty)(l)||a.i(re.isEmpty)(c)||(u=!0),i&&i.taskType!==oe.b.SYNC&&(u=!0),i.readWriteLockVO&&!i.readWriteLockVO.getLock&&(u=!1);var p=i&&ie.a.checkExist(i.taskType);return ee.a.createElement(E.a,{className:"m-workbench task-editor"},ee.a.createElement("header",{className:"toolbar bd-bottom clear"},ee.a.createElement(k.a,{className:"left"},ee.a.createElement(C.a,{overlay:this.createMenu(),trigger:["click"]},ee.a.createElement(R.a,{title:"创建"},ee.a.createElement(le.a,{className:"my-icon",type:"focus"}),"新建",ee.a.createElement(S.a,{type:"down"}))),ee.a.createElement(R.a,{onClick:this.saveTab.bind(this,!0),title:"保存任务",disabled:!u||i.invalid},ee.a.createElement(le.a,{className:"my-icon",type:"save"}),"保存"),ee.a.createElement(C.a,{overlay:this.importMenu(),trigger:["click"]},ee.a.createElement(R.a,null,ee.a.createElement(le.a,{className:"my-icon",type:"import"}),"导入",ee.a.createElement(S.a,{type:"down"})))),ee.a.createElement(k.a,{className:"right"},ee.a.createElement(R.a,{disabled:!p,onClick:function(){e.setState({showPublish:!0})},title:"发布任务"},ee.a.createElement(le.a,{className:"my-icon",type:"fly"}),"发布"),ee.a.createElement(ae.Link,{to:"/operation/offline-management?tname="+i.name},ee.a.createElement(R.a,{disabled:!p},ee.a.createElement(le.a,{className:"my-icon",type:"goin"})," 运维")))),ee.a.createElement(E.a,{className:"task-browser"},ee.a.createElement("div",{className:"browser-content"},ee.a.createElement(X.a,{hideAdd:!0,onTabClick:this.switchTab.bind(this,r),activeKey:""+r,type:"editable-card",className:"browser-tabs",onEdit:this.closeTab.bind(this),tabBarExtraContent:ee.a.createElement(C.a,{overlay:ee.a.createElement(H.a,{style:{marginRight:2},onClick:this.closeAllorOthers.bind(this)},ee.a.createElement(H.a.Item,{key:"OHTERS"},"关闭其他"),ee.a.createElement(H.a.Item,{key:"ALL"},"关闭所有"))},ee.a.createElement(S.a,{type:"bars",style:{margin:"10 0 0 0"}}))},this.renderTabs(n)),ee.a.createElement(ue.a,{tabData:i,taskCustomParams:o,updateTaskFields:this.props.updateTaskFields,updateCatalogue:this.props.updateCatalogue}),ee.a.createElement(pe.a,{tabData:i,key:i.id}))),ee.a.createElement(de.a,{visible:this.state.visible}),this.renderPublish())}},{key:"__renderPublish__REACT_HOT_LOADER__",value:function(){var e=this.props.user,t=this.state.publishDesc;return ee.a.createElement(Q.a,{wrapClassName:"vertical-center-modal",title:"发布任务",style:{height:"600px",width:"600px"},visible:this.state.showPublish,onCancel:this.closePublish,onOk:this.submitTab.bind(this),cancelText:"关闭"},ee.a.createElement(G.a,null,ee.a.createElement(ge,f()({},oe.e,{label:"发布人",hasFeedback:!0}),ee.a.createElement("span",null,e.userName)),ee.a.createElement(ge,f()({},oe.e,{label:"备注",hasFeedback:!0}),ee.a.createElement(_.a,{type:"textarea",value:t,name:"publishDesc",rows:4,onChange:this.publishChange}))))}},{key:"__publishChange__REACT_HOT_LOADER__",value:function(e){this.setState({publishDesc:e.target.value})}},{key:"__closePublish__REACT_HOT_LOADER__",value:function(){this.setState({publishDesc:"",showPublish:!1})}},{key:"closeAllorOthers",value:function(e){var t=e.key,a=this.props,n=a.tabs,r=a.closeAll,i=a.currentTab,s=a.closeOthers;if("ALL"===t){var o=!0,l=!0,c=!1,p=void 0;try{for(var d,_=u()(n);!(l=(d=_.next()).done);l=!0){d.value.notSynced&&(o=!1);break}}catch(e){c=!0,p=e}finally{try{!l&&_.return&&_.return()}finally{if(c)throw p}}o?this.props.closeAll():me({title:"部分任务修改尚未同步到服务器，是否强制关闭 ?",content:"强制关闭将丢弃所有修改数据",onOk:function(){r()},onCancel:function(){}})}else{var h=!0,f=!0,m=!1,g=void 0;try{for(var E,v=u()(n);!(f=(E=v.next()).done);f=!0){var y=E.value;y.notSynced&&y.id!==i&&(h=!1);break}}catch(e){m=!0,g=e}finally{try{!f&&v.return&&v.return()}finally{if(m)throw g}}h?s(i):me({title:"部分任务修改尚未同步到服务器，是否强制关闭 ?",content:"强制关闭将丢弃这些修改数据",onOk:function(){s(i)},onCancel:function(){}})}}},{key:"renderTabs",value:function(e){return e&&e.length>0?e.map(function(e){var t=ee.a.createElement("span",null,ee.a.createElement(ce.a,{notSynced:e.notSynced}),e.name);return ee.a.createElement(fe,{style:{height:"0px"},tab:t,key:e.id})}):[]}},{key:"saveTab",value:function(e){var t=this.props,a=t.saveTab,n=t.dataSync,r=t.currentTabData,i=(t.currentTab,this.generateRqtBody(n)),s="task";ie.a.checkExist(r.taskType)||(i=r,s="script"),i.preSave=!0,i.submitStatus=0,a(i,e,s)}},{key:"submitTab",value:function(){var e=this.props,t=e.publishTask,a=e.dataSync,n=e.currentTabData,r=(e.currentTab,e.updateTaskFields),i=e.user,s=this.state.publishDesc,o=this.generateRqtBody(a);if(s){o.publishDesc=s;var l=n.taskVersions||[],c=Date.now(),u=[{id:c,gmtCreate:c,task:{modifyUser:{userName:i.userName}},publishDesc:s,sqlText:o.sqlText}].concat(l);u=u.length>=5?u.slice(0,5):u,r({taskVersions:u})}o.preSave=!0,o.submitStatus=1,t(o),this.closePublish()}},{key:"switchTab",value:function(e,t){var a=this.props.openTab;+t!==e&&a(+t)}},{key:"closeTab",value:function(e){var t=this.props,a=t.closeTab;t.tabs.filter(function(t){return t.id==e})[0].notSynced?me({title:"修改尚未同步到服务器，是否强制关闭 ?",content:"强制关闭将丢弃当前修改数据",onOk:function(){a(+e)},onCancel:function(){}}):a(+e)}},{key:"generateRqtBody",value:function(e){var t=a.i(re.cloneDeep)(e),n=this.props,r=n.tabs,i=n.currentTab,s=n.currentTabData,o=t.keymap,l=t.sourceMap,c=t.targetMap,u=o.source,p=o.target,d=this.props;d.name,d.id;t.sourceMap.column=u,t.targetMap.column=p,t.settingMap=t.setting,t.name=s.name,t.taskId=s.id;var _=c.type,h=l.type;for(var f in h)h.hasOwnProperty(f)&&(l[f]=h[f]);for(var m in _)_.hasOwnProperty(m)&&(c[m]=_[m]);delete t.keymap,delete t.setting,delete t.dataSourceList;var g=a.i(re.cloneDeep)(r.filter(function(e){return e.id===i})[0]);for(var E in t)t.hasOwnProperty(E)&&(g[E]=t[E]);return g.preSave=!0,g.taskVOS&&(g.dependencyTasks=g.taskVOS.map(function(e){return e}),g.taskVOS=null),delete g.taskVersions,g}}]),t}(ee.a.Component),ve=function(e){var t=e.offlineTask,a=t.workbench,n=t.dataSync,r=t.scriptTreeData,i=a.currentTab,s=a.tabs,o=a.taskCustomParams,l=s.filter(function(e){return e.id===i})[0];return{currentTab:i,currentTabData:l,tabs:s,dataSync:n,taskCustomParams:o,user:e.user,scriptTreeData:r}},ye=function(e){var t=a.i(he.a)(e);return{openTab:function(t){e({type:_e.h.OPEN_TASK_TAB,payload:t}),e({type:_e.a.SET_SELECTION_CONTENT,data:""})},updateTaskFields:function(t){return e({type:_e.h.SET_TASK_FIELDS_VALUE,payload:t})},updateCatalogue:function(t){e({type:_e.j.EDIT_FOLDER_CHILD_FIELDS,payload:t})},closeTab:function(t){return e({type:_e.h.CLOSE_TASK_TAB,payload:t})},closeAll:function(){return e({type:_e.h.CLOSE_ALL_TABS})},closeOthers:function(t){return e({type:_e.h.CLOSE_OTHER_TABS,payload:t})},saveTab:function(t,a,n){var r=function(t){e({type:_e.h.SET_TASK_FIELDS_VALUE,payload:t}),e({type:_e.h.MAKE_TAB_CLEAN})},s=function(e){if(1===e.code){var s=e.data,o=s.readWriteLockVO,c=o.result;0===c?(l.a.success(a?"保存成功！":"发布成功！"),r({version:s.version,readWriteLockVO:s.readWriteLockVO})):1===c?me({title:"锁定提醒",content:ee.a.createElement("span",null,"文件正在被",o.lastKeepLockUserName,"编辑中，开始编辑时间为",ie.a.formatDateTime(o.gmtModified),"。 强制保存可能导致",o.lastKeepLockUserName,"对文件的修改无法正常保存！"),okText:"确定保存",okType:"danger",cancelText:"取消",onOk:function(){var e=function(e){1===e.code&&(l.a.success("保存成功！"),r({version:e.data.version,readWriteLockVO:e.data.readWriteLockVO}))};"task"===n?se.a.forceUpdateOfflineTask(t).then(e):"script"===n&&se.a.forceUpdateOfflineScript(t).then(e)}}):2===c&&me({title:"保存警告",content:ee.a.createElement("span",null,"文件已经被",o.lastKeepLockUserName,"编辑过，编辑时间为",ie.a.formatDateTime(o.gmtModified),"。 点击确认按钮会",ee.a.createElement(i.a,{color:"orange"},"覆盖"),"您本地的代码，请您提前做好备份！"),okText:"确定覆盖",okType:"danger",cancelText:"取消",onOk:function(){var e={id:t.id,lockVersion:o.version};"task"===n?se.a.getOfflineTaskDetail(e).then(function(e){if(1===e.code){var t=e.data;t.merged=!0,r(t)}}):"script"===n&&se.a.getScriptById(e).then(function(e){if(1===e.code){var t=e.data;t.merged=!0,r(t)}})}})}};t.lockVersion=t.readWriteLockVO.version,"task"===n?se.a.saveOfflineJobData(t).then(s):"script"===n&&se.a.saveScript(t).then(s)},goToTaskDev:function(e){t.openTaskInDev(e)},publishTask:function(t){var a=function(t){1===t.code&&(l.a.success("发布成功！"),e({type:_e.h.CHANGE_TASK_SUBMITSTATUS,payload:t.data&&t.data.submitStatus||1}),e({type:_e.h.MAKE_TAB_CLEAN}))};se.a.publishOfflineTask(t).then(a)},toggleCreateTask:function(){e({type:_e.o.TOGGLE_CREATE_TASK})},toggleCreateFolder:function(t){e({type:_e.o.TOGGLE_CREATE_FOLDER,payload:t})},toggleCreateScript:function(){e({type:_e.o.TOGGLE_CREATE_SCRIPT})}}},ke=a.i(te.connect)(ve,ye)(Ee);t.a=ke;!function(){"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(fe,"TabPane","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/workbench.js"),__REACT_HOT_LOADER__.register(me,"confirm","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/workbench.js"),__REACT_HOT_LOADER__.register(ge,"FormItem","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/workbench.js"),__REACT_HOT_LOADER__.register(Ee,"Workbench","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/workbench.js"),__REACT_HOT_LOADER__.register(ve,"mapState","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/workbench.js"),__REACT_HOT_LOADER__.register(ye,"mapDispatch","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/workbench.js"),__REACT_HOT_LOADER__.register(ke,"default","/Users/ziv/Documents/workspace/data-stack/src/webapps/rdos/views/task/offline/workbench.js"))}()},1659:function(e,t,a){var n=a(1660);"string"==typeof n&&(n=[[e.i,n,""]]);a(1619)(n,{});n.locals&&(e.exports=n.locals)},1660:function(e,t,a){t=e.exports=a(912)(),t.push([e.i,'.CodeMirror-merge{position:relative;border:1px solid #ddd;white-space:pre}.CodeMirror-merge,.CodeMirror-merge .CodeMirror{height:350px}.CodeMirror-merge-2pane .CodeMirror-merge-pane{width:47%}.CodeMirror-merge-2pane .CodeMirror-merge-gap{width:6%}.CodeMirror-merge-3pane .CodeMirror-merge-pane{width:31%}.CodeMirror-merge-3pane .CodeMirror-merge-gap{width:3.5%}.CodeMirror-merge-pane{display:inline-block;white-space:normal;vertical-align:top}.CodeMirror-merge-pane-rightmost{position:absolute;right:0;z-index:1}.CodeMirror-merge-gap{z-index:2;display:inline-block;height:100%;box-sizing:border-box;overflow:hidden;border-left:1px solid #ddd;border-right:1px solid #ddd;position:relative;background:#f8f8f8}.CodeMirror-merge-scrolllock-wrap{position:absolute;bottom:0;left:50%}.CodeMirror-merge-scrolllock{position:relative;left:-50%;cursor:pointer;color:#555;line-height:1}.CodeMirror-merge-copybuttons-left,.CodeMirror-merge-copybuttons-right{position:absolute;left:0;top:0;right:0;bottom:0;line-height:1}.CodeMirror-merge-copy{z-index:3}.CodeMirror-merge-copy,.CodeMirror-merge-copy-reverse{position:absolute;cursor:pointer;color:#44c}.CodeMirror-merge-copybuttons-left .CodeMirror-merge-copy{left:2px}.CodeMirror-merge-copybuttons-right .CodeMirror-merge-copy{right:2px}.CodeMirror-merge-l-inserted,.CodeMirror-merge-r-inserted{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAYAAACddGYaAAAAGUlEQVQI12MwuCXy3+CWyH8GBgYGJgYkAABZbAQ9ELXurwAAAABJRU5ErkJggg==);background-position:0 100%;background-repeat:repeat-x}.CodeMirror-merge-l-deleted,.CodeMirror-merge-r-deleted{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAYAAACddGYaAAAAGUlEQVQI12M4Kyb2/6yY2H8GBgYGJgYkAABURgPz6Ks7wQAAAABJRU5ErkJggg==);background-position:0 100%;background-repeat:repeat-x}.CodeMirror-merge-r-chunk{background:#ffffe0}.CodeMirror-merge-r-chunk-start{border-top:1px solid #ee8}.CodeMirror-merge-r-chunk-end{border-bottom:1px solid #ee8}.CodeMirror-merge-r-connect{fill:#ffffe0;stroke:#ee8;stroke-width:1px}.CodeMirror-merge-l-chunk{background:#eef}.CodeMirror-merge-l-chunk-start{border-top:1px solid #88e}.CodeMirror-merge-l-chunk-end{border-bottom:1px solid #88e}.CodeMirror-merge-l-connect{fill:#eef;stroke:#88e;stroke-width:1px}.CodeMirror-merge-l-chunk.CodeMirror-merge-r-chunk{background:#dfd}.CodeMirror-merge-l-chunk-start.CodeMirror-merge-r-chunk-start{border-top:1px solid #4e4}.CodeMirror-merge-l-chunk-end.CodeMirror-merge-r-chunk-end{border-bottom:1px solid #4e4}.CodeMirror-merge-collapsed-widget:before{content:"(...)"}.CodeMirror-merge-collapsed-widget{cursor:pointer;color:#88b;background:#eef;border:1px solid #ddf;font-size:90%;padding:0 3px;border-radius:4px}.CodeMirror-merge-collapsed-line .CodeMirror-gutter-elt{display:none}',"",{version:3,sources:["/./node_modules/codemirror/addon/merge/merge.css"],names:[],mappings:"AAAA,kBACE,kBAAmB,AACnB,sBAAuB,AACvB,eAAiB,CAClB,AAED,gDACE,YAAc,CACf,AAED,+CAAiD,SAAW,CAAE,AAC9D,8CAAgD,QAAU,CAAE,AAC5D,+CAAiD,SAAW,CAAE,AAC9D,8CAAgD,UAAY,CAAE,AAE9D,uBACE,qBAAsB,AACtB,mBAAoB,AACpB,kBAAoB,CACrB,AACD,iCACE,kBAAmB,AACnB,QAAW,AACX,SAAW,CACZ,AAED,sBACE,UAAW,AACX,qBAAsB,AACtB,YAAa,AAEb,sBAAuB,AACvB,gBAAiB,AACjB,2BAA4B,AAC5B,4BAA6B,AAC7B,kBAAmB,AACnB,kBAAoB,CACrB,AAED,kCACE,kBAAmB,AACnB,SAAU,AAAC,QAAU,CACtB,AACD,6BACE,kBAAmB,AACnB,UAAW,AACX,eAAgB,AAChB,WAAY,AACZ,aAAe,CAChB,AAED,uEACE,kBAAmB,AACnB,OAAQ,AAAC,MAAO,AAChB,QAAS,AAAC,SAAU,AACpB,aAAe,CAChB,AAED,uBAIE,SAAW,CACZ,AAED,sDANE,kBAAmB,AACnB,eAAgB,AAChB,UAAY,CAQb,AAED,0DAA4D,QAAU,CAAE,AACxE,2DAA6D,SAAW,CAAE,AAE1E,0DACE,6JAA8J,AAC9J,2BAAiC,AACjC,0BAA4B,CAC7B,AAED,wDACE,6JAA8J,AAC9J,2BAAiC,AACjC,0BAA4B,CAC7B,AAED,0BAA4B,kBAAoB,CAAE,AAClD,gCAAkC,yBAA2B,CAAE,AAC/D,8BAAgC,4BAA8B,CAAE,AAChE,4BAA8B,aAAc,AAAC,YAAa,AAAC,gBAAkB,CAAE,AAE/E,0BAA4B,eAAiB,CAAE,AAC/C,gCAAkC,yBAA2B,CAAE,AAC/D,8BAAgC,4BAA8B,CAAE,AAChE,4BAA8B,UAAW,AAAC,YAAa,AAAC,gBAAkB,CAAE,AAE5E,mDAAqD,eAAiB,CAAE,AACxE,+DAAiE,yBAA2B,CAAE,AAC9F,2DAA6D,4BAA8B,CAAE,AAE7F,0CACE,eAAiB,CAClB,AACD,mCACE,eAAgB,AAChB,WAAY,AACZ,gBAAiB,AACjB,sBAAuB,AACvB,cAAe,AACf,cAAe,AACf,iBAAmB,CACpB,AACD,wDAA0D,YAAc,CAAE",file:"merge.css",sourcesContent:['.CodeMirror-merge {\n  position: relative;\n  border: 1px solid #ddd;\n  white-space: pre;\n}\n\n.CodeMirror-merge, .CodeMirror-merge .CodeMirror {\n  height: 350px;\n}\n\n.CodeMirror-merge-2pane .CodeMirror-merge-pane { width: 47%; }\n.CodeMirror-merge-2pane .CodeMirror-merge-gap { width: 6%; }\n.CodeMirror-merge-3pane .CodeMirror-merge-pane { width: 31%; }\n.CodeMirror-merge-3pane .CodeMirror-merge-gap { width: 3.5%; }\n\n.CodeMirror-merge-pane {\n  display: inline-block;\n  white-space: normal;\n  vertical-align: top;\n}\n.CodeMirror-merge-pane-rightmost {\n  position: absolute;\n  right: 0px;\n  z-index: 1;\n}\n\n.CodeMirror-merge-gap {\n  z-index: 2;\n  display: inline-block;\n  height: 100%;\n  -moz-box-sizing: border-box;\n  box-sizing: border-box;\n  overflow: hidden;\n  border-left: 1px solid #ddd;\n  border-right: 1px solid #ddd;\n  position: relative;\n  background: #f8f8f8;\n}\n\n.CodeMirror-merge-scrolllock-wrap {\n  position: absolute;\n  bottom: 0; left: 50%;\n}\n.CodeMirror-merge-scrolllock {\n  position: relative;\n  left: -50%;\n  cursor: pointer;\n  color: #555;\n  line-height: 1;\n}\n\n.CodeMirror-merge-copybuttons-left, .CodeMirror-merge-copybuttons-right {\n  position: absolute;\n  left: 0; top: 0;\n  right: 0; bottom: 0;\n  line-height: 1;\n}\n\n.CodeMirror-merge-copy {\n  position: absolute;\n  cursor: pointer;\n  color: #44c;\n  z-index: 3;\n}\n\n.CodeMirror-merge-copy-reverse {\n  position: absolute;\n  cursor: pointer;\n  color: #44c;\n}\n\n.CodeMirror-merge-copybuttons-left .CodeMirror-merge-copy { left: 2px; }\n.CodeMirror-merge-copybuttons-right .CodeMirror-merge-copy { right: 2px; }\n\n.CodeMirror-merge-r-inserted, .CodeMirror-merge-l-inserted {\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAYAAACddGYaAAAAGUlEQVQI12MwuCXy3+CWyH8GBgYGJgYkAABZbAQ9ELXurwAAAABJRU5ErkJggg==);\n  background-position: bottom left;\n  background-repeat: repeat-x;\n}\n\n.CodeMirror-merge-r-deleted, .CodeMirror-merge-l-deleted {\n  background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAACCAYAAACddGYaAAAAGUlEQVQI12M4Kyb2/6yY2H8GBgYGJgYkAABURgPz6Ks7wQAAAABJRU5ErkJggg==);\n  background-position: bottom left;\n  background-repeat: repeat-x;\n}\n\n.CodeMirror-merge-r-chunk { background: #ffffe0; }\n.CodeMirror-merge-r-chunk-start { border-top: 1px solid #ee8; }\n.CodeMirror-merge-r-chunk-end { border-bottom: 1px solid #ee8; }\n.CodeMirror-merge-r-connect { fill: #ffffe0; stroke: #ee8; stroke-width: 1px; }\n\n.CodeMirror-merge-l-chunk { background: #eef; }\n.CodeMirror-merge-l-chunk-start { border-top: 1px solid #88e; }\n.CodeMirror-merge-l-chunk-end { border-bottom: 1px solid #88e; }\n.CodeMirror-merge-l-connect { fill: #eef; stroke: #88e; stroke-width: 1px; }\n\n.CodeMirror-merge-l-chunk.CodeMirror-merge-r-chunk { background: #dfd; }\n.CodeMirror-merge-l-chunk-start.CodeMirror-merge-r-chunk-start { border-top: 1px solid #4e4; }\n.CodeMirror-merge-l-chunk-end.CodeMirror-merge-r-chunk-end { border-bottom: 1px solid #4e4; }\n\n.CodeMirror-merge-collapsed-widget:before {\n  content: "(...)";\n}\n.CodeMirror-merge-collapsed-widget {\n  cursor: pointer;\n  color: #88b;\n  background: #eef;\n  border: 1px solid #ddf;\n  font-size: 90%;\n  padding: 0 3px;\n  border-radius: 4px;\n}\n.CodeMirror-merge-collapsed-line .CodeMirror-gutter-elt { display: none; }\n'],sourceRoot:"webpack://"}])},1661:function(e,t,a){t=e.exports=a(912)(),t.push([e.i,".ant-select-auto-complete.ant-select .ant-select-selection{border:0;box-shadow:none}.ant-select-auto-complete.ant-select .ant-select-selection__rendered{margin-left:0;margin-right:0;height:100%;line-height:28px}.ant-select-auto-complete.ant-select .ant-select-selection__placeholder{margin-left:8px;margin-right:8px}.ant-select-auto-complete.ant-select .ant-select-selection--single{height:auto}.ant-select-auto-complete.ant-select .ant-select-search--inline{position:static;float:left}.ant-select-auto-complete.ant-select-allow-clear .ant-select-selection:hover .ant-select-selection__rendered{margin-right:0!important}.ant-select-auto-complete.ant-select .ant-input{background:transparent;border-width:1px;line-height:1.5;height:28px}.ant-select-auto-complete.ant-select .ant-input:focus,.ant-select-auto-complete.ant-select .ant-input:hover{border-color:#49a9ee}.ant-select-auto-complete.ant-select-lg .ant-select-selection__rendered{line-height:32px}.ant-select-auto-complete.ant-select-lg .ant-input{padding-top:6px;padding-bottom:6px;height:32px}.ant-select-auto-complete.ant-select-sm .ant-select-selection__rendered{line-height:22px}.ant-select-auto-complete.ant-select-sm .ant-input{padding-top:1px;padding-bottom:1px;height:22px}","",{version:3,sources:["/./node_modules/antd/lib/auto-complete/style/index.less"],names:[],mappings:"AAAA,2DAA2D,SAAS,eAAe,CAAC,qEAAqE,cAAc,eAAe,YAAY,gBAAgB,CAAC,wEAAwE,gBAAgB,gBAAgB,CAAC,mEAAmE,WAAW,CAAC,gEAAgE,gBAAgB,UAAU,CAAC,6GAA6G,wBAAyB,CAAC,gDAAgD,uBAAuB,iBAAiB,gBAAgB,WAAW,CAAC,4GAA4G,oBAAoB,CAAC,wEAAwE,gBAAgB,CAAC,mDAAmD,gBAAgB,mBAAmB,WAAW,CAAC,wEAAwE,gBAAgB,CAAC,mDAAmD,gBAAgB,mBAAmB,WAAW,CAAC",file:"index.less",sourcesContent:[".ant-select-auto-complete.ant-select .ant-select-selection{border:0;box-shadow:none}.ant-select-auto-complete.ant-select .ant-select-selection__rendered{margin-left:0;margin-right:0;height:100%;line-height:28px}.ant-select-auto-complete.ant-select .ant-select-selection__placeholder{margin-left:8px;margin-right:8px}.ant-select-auto-complete.ant-select .ant-select-selection--single{height:auto}.ant-select-auto-complete.ant-select .ant-select-search--inline{position:static;float:left}.ant-select-auto-complete.ant-select-allow-clear .ant-select-selection:hover .ant-select-selection__rendered{margin-right:0 !important}.ant-select-auto-complete.ant-select .ant-input{background:transparent;border-width:1px;line-height:1.5;height:28px}.ant-select-auto-complete.ant-select .ant-input:focus,.ant-select-auto-complete.ant-select .ant-input:hover{border-color:#49a9ee}.ant-select-auto-complete.ant-select-lg .ant-select-selection__rendered{line-height:32px}.ant-select-auto-complete.ant-select-lg .ant-input{padding-top:6px;padding-bottom:6px;height:32px}.ant-select-auto-complete.ant-select-sm .ant-select-selection__rendered{line-height:22px}.ant-select-auto-complete.ant-select-sm .ant-input{padding-top:1px;padding-bottom:1px;height:22px}"],sourceRoot:"webpack://"}])},1662:function(e,t,a){"use strict";function n(){this.Diff_Timeout=1,this.Diff_EditCost=4,this.Match_Threshold=.5,this.Match_Distance=1e3,this.Patch_DeleteThreshold=.5,this.Patch_Margin=4,this.Match_MaxBits=32}var r=-1,i=1,s=0;n.Diff,n.prototype.diff_main=function(e,t,a,n){void 0===n&&(n=this.Diff_Timeout<=0?Number.MAX_VALUE:(new Date).getTime()+1e3*this.Diff_Timeout);var r=n;if(null==e||null==t)throw new Error("Null input. (diff_main)");if(e==t)return e?[[s,e]]:[];void 0===a&&(a=!0);var i=a,o=this.diff_commonPrefix(e,t),l=e.substring(0,o);e=e.substring(o),t=t.substring(o),o=this.diff_commonSuffix(e,t);var c=e.substring(e.length-o);e=e.substring(0,e.length-o),t=t.substring(0,t.length-o);var u=this.diff_compute_(e,t,i,r);return l&&u.unshift([s,l]),c&&u.push([s,c]),this.diff_cleanupMerge(u),u},n.prototype.diff_compute_=function(e,t,a,n){var o;if(!e)return[[i,t]];if(!t)return[[r,e]];var l=e.length>t.length?e:t,c=e.length>t.length?t:e,u=l.indexOf(c);if(-1!=u)return o=[[i,l.substring(0,u)],[s,c],[i,l.substring(u+c.length)]],e.length>t.length&&(o[0][0]=o[2][0]=r),o;if(1==c.length)return[[r,e],[i,t]];var p=this.diff_halfMatch_(e,t);if(p){var d=p[0],_=p[1],h=p[2],f=p[3],m=p[4],g=this.diff_main(d,h,a,n),E=this.diff_main(_,f,a,n);return g.concat([[s,m]],E)}return a&&e.length>100&&t.length>100?this.diff_lineMode_(e,t,n):this.diff_bisect_(e,t,n)},n.prototype.diff_lineMode_=function(e,t,a){var n=this.diff_linesToChars_(e,t);e=n.chars1,t=n.chars2;var o=n.lineArray,l=this.diff_main(e,t,!1,a);this.diff_charsToLines_(l,o),this.diff_cleanupSemantic(l),l.push([s,""]);for(var c=0,u=0,p=0,d="",_="";c<l.length;){switch(l[c][0]){case i:p++,_+=l[c][1];break;case r:u++,d+=l[c][1];break;case s:if(u>=1&&p>=1){l.splice(c-u-p,u+p),c=c-u-p;for(var n=this.diff_main(d,_,!1,a),h=n.length-1;h>=0;h--)l.splice(c,0,n[h]);c+=n.length}p=0,u=0,d="",_=""}c++}return l.pop(),l},n.prototype.diff_bisect_=function(e,t,a){for(var n=e.length,s=t.length,o=Math.ceil((n+s)/2),l=o,c=2*o,u=new Array(c),p=new Array(c),d=0;d<c;d++)u[d]=-1,p[d]=-1;u[l+1]=0,p[l+1]=0;for(var _=n-s,h=_%2!=0,f=0,m=0,g=0,E=0,v=0;v<o&&!((new Date).getTime()>a);v++){for(var y=-v+f;y<=v-m;y+=2){var k,A=l+y;k=y==-v||y!=v&&u[A-1]<u[A+1]?u[A+1]:u[A-1]+1;for(var T=k-y;k<n&&T<s&&e.charAt(k)==t.charAt(T);)k++,T++;if(u[A]=k,k>n)m+=2;else if(T>s)f+=2;else if(h){var C=l+_-y;if(C>=0&&C<c&&-1!=p[C]){var b=n-p[C];if(k>=b)return this.diff_bisectSplit_(e,t,k,T,a)}}}for(var O=-v+g;O<=v-E;O+=2){var b,C=l+O;b=O==-v||O!=v&&p[C-1]<p[C+1]?p[C+1]:p[C-1]+1;for(var R=b-O;b<n&&R<s&&e.charAt(n-b-1)==t.charAt(s-R-1);)b++,R++;if(p[C]=b,b>n)E+=2;else if(R>s)g+=2;else if(!h){var A=l+_-O;if(A>=0&&A<c&&-1!=u[A]){var k=u[A],T=l+k-A;if(b=n-b,k>=b)return this.diff_bisectSplit_(e,t,k,T,a)}}}}return[[r,e],[i,t]]},n.prototype.diff_bisectSplit_=function(e,t,a,n,r){var i=e.substring(0,a),s=t.substring(0,n),o=e.substring(a),l=t.substring(n),c=this.diff_main(i,s,!1,r),u=this.diff_main(o,l,!1,r);return c.concat(u)},n.prototype.diff_linesToChars_=function(e,t){function a(e){for(var t="",a=0,i=-1,s=n.length;i<e.length-1;){i=e.indexOf("\n",a),-1==i&&(i=e.length-1);var o=e.substring(a,i+1);a=i+1,(r.hasOwnProperty?r.hasOwnProperty(o):void 0!==r[o])?t+=String.fromCharCode(r[o]):(t+=String.fromCharCode(s),r[o]=s,n[s++]=o)}return t}var n=[],r={};return n[0]="",{chars1:a(e),chars2:a(t),lineArray:n}},n.prototype.diff_charsToLines_=function(e,t){for(var a=0;a<e.length;a++){for(var n=e[a][1],r=[],i=0;i<n.length;i++)r[i]=t[n.charCodeAt(i)];e[a][1]=r.join("")}},n.prototype.diff_commonPrefix=function(e,t){if(!e||!t||e.charAt(0)!=t.charAt(0))return 0;for(var a=0,n=Math.min(e.length,t.length),r=n,i=0;a<r;)e.substring(i,r)==t.substring(i,r)?(a=r,i=a):n=r,r=Math.floor((n-a)/2+a);return r},n.prototype.diff_commonSuffix=function(e,t){if(!e||!t||e.charAt(e.length-1)!=t.charAt(t.length-1))return 0;for(var a=0,n=Math.min(e.length,t.length),r=n,i=0;a<r;)e.substring(e.length-r,e.length-i)==t.substring(t.length-r,t.length-i)?(a=r,i=a):n=r,r=Math.floor((n-a)/2+a);return r},n.prototype.diff_commonOverlap_=function(e,t){var a=e.length,n=t.length;if(0==a||0==n)return 0;a>n?e=e.substring(a-n):a<n&&(t=t.substring(0,a));var r=Math.min(a,n);if(e==t)return r;for(var i=0,s=1;;){var o=e.substring(r-s),l=t.indexOf(o);if(-1==l)return i;s+=l,0!=l&&e.substring(r-s)!=t.substring(0,s)||(i=s,s++)}},n.prototype.diff_halfMatch_=function(e,t){function a(e,t,a){for(var n,r,i,o,l=e.substring(a,a+Math.floor(e.length/4)),c=-1,u="";-1!=(c=t.indexOf(l,c+1));){var p=s.diff_commonPrefix(e.substring(a),t.substring(c)),d=s.diff_commonSuffix(e.substring(0,a),t.substring(0,c));u.length<d+p&&(u=t.substring(c-d,c)+t.substring(c,c+p),n=e.substring(0,a-d),r=e.substring(a+p),i=t.substring(0,c-d),o=t.substring(c+p))}return 2*u.length>=e.length?[n,r,i,o,u]:null}if(this.Diff_Timeout<=0)return null;var n=e.length>t.length?e:t,r=e.length>t.length?t:e;if(n.length<4||2*r.length<n.length)return null;var i,s=this,o=a(n,r,Math.ceil(n.length/4)),l=a(n,r,Math.ceil(n.length/2));if(!o&&!l)return null;i=l?o&&o[4].length>l[4].length?o:l:o;var c,u,p,d;return e.length>t.length?(c=i[0],u=i[1],p=i[2],d=i[3]):(p=i[0],d=i[1],c=i[2],u=i[3]),[c,u,p,d,i[4]]},n.prototype.diff_cleanupSemantic=function(e){for(var t=!1,a=[],n=0,o=null,l=0,c=0,u=0,p=0,d=0;l<e.length;)e[l][0]==s?(a[n++]=l,c=p,u=d,p=0,d=0,o=e[l][1]):(e[l][0]==i?p+=e[l][1].length:d+=e[l][1].length,o&&o.length<=Math.max(c,u)&&o.length<=Math.max(p,d)&&(e.splice(a[n-1],0,[r,o]),e[a[n-1]+1][0]=i,n--,n--,l=n>0?a[n-1]:-1,c=0,u=0,p=0,d=0,o=null,t=!0)),l++;for(t&&this.diff_cleanupMerge(e),this.diff_cleanupSemanticLossless(e),l=1;l<e.length;){if(e[l-1][0]==r&&e[l][0]==i){var _=e[l-1][1],h=e[l][1],f=this.diff_commonOverlap_(_,h),m=this.diff_commonOverlap_(h,_);f>=m?(f>=_.length/2||f>=h.length/2)&&(e.splice(l,0,[s,h.substring(0,f)]),e[l-1][1]=_.substring(0,_.length-f),e[l+1][1]=h.substring(f),l++):(m>=_.length/2||m>=h.length/2)&&(e.splice(l,0,[s,_.substring(0,m)]),e[l-1][0]=i,e[l-1][1]=h.substring(0,h.length-m),e[l+1][0]=r,e[l+1][1]=_.substring(m),l++),l++}l++}},n.prototype.diff_cleanupSemanticLossless=function(e){function t(e,t){if(!e||!t)return 6;var a=e.charAt(e.length-1),r=t.charAt(0),i=a.match(n.nonAlphaNumericRegex_),s=r.match(n.nonAlphaNumericRegex_),o=i&&a.match(n.whitespaceRegex_),l=s&&r.match(n.whitespaceRegex_),c=o&&a.match(n.linebreakRegex_),u=l&&r.match(n.linebreakRegex_),p=c&&e.match(n.blanklineEndRegex_),d=u&&t.match(n.blanklineStartRegex_);return p||d?5:c||u?4:i&&!o&&l?3:o||l?2:i||s?1:0}for(var a=1;a<e.length-1;){if(e[a-1][0]==s&&e[a+1][0]==s){var r=e[a-1][1],i=e[a][1],o=e[a+1][1],l=this.diff_commonSuffix(r,i);if(l){var c=i.substring(i.length-l);r=r.substring(0,r.length-l),i=c+i.substring(0,i.length-l),o=c+o}for(var u=r,p=i,d=o,_=t(r,i)+t(i,o);i.charAt(0)===o.charAt(0);){r+=i.charAt(0),i=i.substring(1)+o.charAt(0),o=o.substring(1);var h=t(r,i)+t(i,o);h>=_&&(_=h,u=r,p=i,d=o)}e[a-1][1]!=u&&(u?e[a-1][1]=u:(e.splice(a-1,1),a--),e[a][1]=p,d?e[a+1][1]=d:(e.splice(a+1,1),a--))}a++}},n.nonAlphaNumericRegex_=/[^a-zA-Z0-9]/,n.whitespaceRegex_=/\s/,n.linebreakRegex_=/[\r\n]/,n.blanklineEndRegex_=/\n\r?\n$/,n.blanklineStartRegex_=/^\r?\n\r?\n/,n.prototype.diff_cleanupEfficiency=function(e){for(var t=!1,a=[],n=0,o=null,l=0,c=!1,u=!1,p=!1,d=!1;l<e.length;)e[l][0]==s?(e[l][1].length<this.Diff_EditCost&&(p||d)?(a[n++]=l,c=p,u=d,o=e[l][1]):(n=0,o=null),p=d=!1):(e[l][0]==r?d=!0:p=!0,o&&(c&&u&&p&&d||o.length<this.Diff_EditCost/2&&c+u+p+d==3)&&(e.splice(a[n-1],0,[r,o]),e[a[n-1]+1][0]=i,n--,o=null,c&&u?(p=d=!0,n=0):(n--,l=n>0?a[n-1]:-1,p=d=!1),t=!0)),l++;t&&this.diff_cleanupMerge(e)},n.prototype.diff_cleanupMerge=function(e){e.push([s,""]);for(var t,a=0,n=0,o=0,l="",c="";a<e.length;)switch(e[a][0]){case i:o++,c+=e[a][1],a++;break;case r:n++,l+=e[a][1],a++;break;case s:n+o>1?(0!==n&&0!==o&&(t=this.diff_commonPrefix(c,l),0!==t&&(a-n-o>0&&e[a-n-o-1][0]==s?e[a-n-o-1][1]+=c.substring(0,t):(e.splice(0,0,[s,c.substring(0,t)]),a++),c=c.substring(t),l=l.substring(t)),0!==(t=this.diff_commonSuffix(c,l))&&(e[a][1]=c.substring(c.length-t)+e[a][1],c=c.substring(0,c.length-t),l=l.substring(0,l.length-t))),0===n?e.splice(a-o,n+o,[i,c]):0===o?e.splice(a-n,n+o,[r,l]):e.splice(a-n-o,n+o,[r,l],[i,c]),a=a-n-o+(n?1:0)+(o?1:0)+1):0!==a&&e[a-1][0]==s?(e[a-1][1]+=e[a][1],e.splice(a,1)):a++,o=0,n=0,l="",c=""}""===e[e.length-1][1]&&e.pop();var u=!1;for(a=1;a<e.length-1;)e[a-1][0]==s&&e[a+1][0]==s&&(e[a][1].substring(e[a][1].length-e[a-1][1].length)==e[a-1][1]?(e[a][1]=e[a-1][1]+e[a][1].substring(0,e[a][1].length-e[a-1][1].length),e[a+1][1]=e[a-1][1]+e[a+1][1],e.splice(a-1,1),u=!0):e[a][1].substring(0,e[a+1][1].length)==e[a+1][1]&&(e[a-1][1]+=e[a+1][1],e[a][1]=e[a][1].substring(e[a+1][1].length)+e[a+1][1],e.splice(a+1,1),u=!0)),a++;u&&this.diff_cleanupMerge(e)},n.prototype.diff_xIndex=function(e,t){var a,n=0,s=0,o=0,l=0;for(a=0;a<e.length&&(e[a][0]!==i&&(n+=e[a][1].length),e[a][0]!==r&&(s+=e[a][1].length),!(n>t));a++)o=n,l=s;return e.length!=a&&e[a][0]===r?l:l+(t-o)},n.prototype.diff_prettyHtml=function(e){for(var t=[],a=/&/g,n=/</g,o=/>/g,l=/\n/g,c=0;c<e.length;c++){var u=e[c][0],p=e[c][1],d=p.replace(a,"&amp;").replace(n,"&lt;").replace(o,"&gt;").replace(l,"&para;<br>");switch(u){case i:t[c]='<ins style="background:#e6ffe6;">'+d+"</ins>";break;case r:t[c]='<del style="background:#ffe6e6;">'+d+"</del>";break;case s:t[c]="<span>"+d+"</span>"}}return t.join("")},n.prototype.diff_text1=function(e){for(var t=[],a=0;a<e.length;a++)e[a][0]!==i&&(t[a]=e[a][1]);return t.join("")},n.prototype.diff_text2=function(e){for(var t=[],a=0;a<e.length;a++)e[a][0]!==r&&(t[a]=e[a][1]);return t.join("")},n.prototype.diff_levenshtein=function(e){for(var t=0,a=0,n=0,o=0;o<e.length;o++){var l=e[o][0],c=e[o][1];switch(l){case i:a+=c.length;break;case r:n+=c.length;break;case s:t+=Math.max(a,n),a=0,n=0}}return t+=Math.max(a,n)},n.prototype.diff_toDelta=function(e){for(var t=[],a=0;a<e.length;a++)switch(e[a][0]){case i:t[a]="+"+encodeURI(e[a][1]);break;case r:t[a]="-"+e[a][1].length;break;case s:t[a]="="+e[a][1].length}return t.join("\t").replace(/%20/g," ")},n.prototype.diff_fromDelta=function(e,t){for(var a=[],n=0,o=0,l=t.split(/\t/g),c=0;c<l.length;c++){var u=l[c].substring(1);switch(l[c].charAt(0)){case"+":try{a[n++]=[i,decodeURI(u)]}catch(e){throw new Error("Illegal escape in diff_fromDelta: "+u)}break;case"-":case"=":var p=parseInt(u,10);if(isNaN(p)||p<0)throw new Error("Invalid number in diff_fromDelta: "+u);var d=e.substring(o,o+=p);"="==l[c].charAt(0)?a[n++]=[s,d]:a[n++]=[r,d];break;default:if(l[c])throw new Error("Invalid diff operation in diff_fromDelta: "+l[c])}}if(o!=e.length)throw new Error("Delta length ("+o+") does not equal source text length ("+e.length+").");return a},n.prototype.match_main=function(e,t,a){if(null==e||null==t||null==a)throw new Error("Null input. (match_main)");return a=Math.max(0,Math.min(a,e.length)),e==t?0:e.length?e.substring(a,a+t.length)==t?a:this.match_bitap_(e,t,a):-1},n.prototype.match_bitap_=function(e,t,a){function n(e,n){var r=e/t.length,s=Math.abs(a-n);return i.Match_Distance?r+s/i.Match_Distance:s?1:r}if(t.length>this.Match_MaxBits)throw new Error("Pattern too long for this browser.");var r=this.match_alphabet_(t),i=this,s=this.Match_Threshold,o=e.indexOf(t,a);-1!=o&&(s=Math.min(n(0,o),s),-1!=(o=e.lastIndexOf(t,a+t.length))&&(s=Math.min(n(0,o),s)));var l=1<<t.length-1;o=-1;for(var c,u,p,d=t.length+e.length,_=0;_<t.length;_++){for(c=0,u=d;c<u;)n(_,a+u)<=s?c=u:d=u,u=Math.floor((d-c)/2+c);d=u;var h=Math.max(1,a-u+1),f=Math.min(a+u,e.length)+t.length,m=Array(f+2);m[f+1]=(1<<_)-1;for(var g=f;g>=h;g--){var E=r[e.charAt(g-1)];if(m[g]=0===_?(m[g+1]<<1|1)&E:(m[g+1]<<1|1)&E|(p[g+1]|p[g])<<1|1|p[g+1],m[g]&l){var v=n(_,g-1);if(v<=s){if(s=v,!((o=g-1)>a))break;h=Math.max(1,2*a-o)}}}if(n(_+1,a)>s)break;p=m}return o},n.prototype.match_alphabet_=function(e){for(var t={},a=0;a<e.length;a++)t[e.charAt(a)]=0;for(var a=0;a<e.length;a++)t[e.charAt(a)]|=1<<e.length-a-1;return t},n.prototype.patch_addContext_=function(e,t){if(0!=t.length){for(var a=t.substring(e.start2,e.start2+e.length1),n=0;t.indexOf(a)!=t.lastIndexOf(a)&&a.length<this.Match_MaxBits-this.Patch_Margin-this.Patch_Margin;)n+=this.Patch_Margin,a=t.substring(e.start2-n,e.start2+e.length1+n);n+=this.Patch_Margin;var r=t.substring(e.start2-n,e.start2);r&&e.diffs.unshift([s,r]);var i=t.substring(e.start2+e.length1,e.start2+e.length1+n);i&&e.diffs.push([s,i]),e.start1-=r.length,e.start2-=r.length,e.length1+=r.length+i.length,e.length2+=r.length+i.length}},n.prototype.patch_make=function(e,t,a){var o,l;if("string"==typeof e&&"string"==typeof t&&void 0===a)o=e,l=this.diff_main(o,t,!0),l.length>2&&(this.diff_cleanupSemantic(l),this.diff_cleanupEfficiency(l));else if(e&&"object"==typeof e&&void 0===t&&void 0===a)l=e,o=this.diff_text1(l);else if("string"==typeof e&&t&&"object"==typeof t&&void 0===a)o=e,l=t;else{if("string"!=typeof e||"string"!=typeof t||!a||"object"!=typeof a)throw new Error("Unknown call format to patch_make.");o=e,l=a}if(0===l.length)return[];for(var c=[],u=new n.patch_obj,p=0,d=0,_=0,h=o,f=o,m=0;m<l.length;m++){var g=l[m][0],E=l[m][1];switch(p||g===s||(u.start1=d,u.start2=_),g){case i:u.diffs[p++]=l[m],u.length2+=E.length,f=f.substring(0,_)+E+f.substring(_);break;case r:u.length1+=E.length,u.diffs[p++]=l[m],f=f.substring(0,_)+f.substring(_+E.length);break;case s:E.length<=2*this.Patch_Margin&&p&&l.length!=m+1?(u.diffs[p++]=l[m],u.length1+=E.length,u.length2+=E.length):E.length>=2*this.Patch_Margin&&p&&(this.patch_addContext_(u,h),c.push(u),u=new n.patch_obj,p=0,h=f,d=_)}g!==i&&(d+=E.length),g!==r&&(_+=E.length)}return p&&(this.patch_addContext_(u,h),c.push(u)),c},n.prototype.patch_deepCopy=function(e){for(var t=[],a=0;a<e.length;a++){var r=e[a],i=new n.patch_obj;i.diffs=[];for(var s=0;s<r.diffs.length;s++)i.diffs[s]=r.diffs[s].slice();i.start1=r.start1,i.start2=r.start2,i.length1=r.length1,i.length2=r.length2,t[a]=i}return t},n.prototype.patch_apply=function(e,t){if(0==e.length)return[t,[]];e=this.patch_deepCopy(e);var a=this.patch_addPadding(e);t=a+t+a,this.patch_splitMax(e);for(var n=0,o=[],l=0;l<e.length;l++){var c,u=e[l].start2+n,p=this.diff_text1(e[l].diffs),d=-1;if(p.length>this.Match_MaxBits?-1!=(c=this.match_main(t,p.substring(0,this.Match_MaxBits),u))&&(-1==(d=this.match_main(t,p.substring(p.length-this.Match_MaxBits),u+p.length-this.Match_MaxBits))||c>=d)&&(c=-1):c=this.match_main(t,p,u),-1==c)o[l]=!1,n-=e[l].length2-e[l].length1;else{o[l]=!0,n=c-u;var _;if(_=-1==d?t.substring(c,c+p.length):t.substring(c,d+this.Match_MaxBits),p==_)t=t.substring(0,c)+this.diff_text2(e[l].diffs)+t.substring(c+p.length);else{var h=this.diff_main(p,_,!1);if(p.length>this.Match_MaxBits&&this.diff_levenshtein(h)/p.length>this.Patch_DeleteThreshold)o[l]=!1;else{this.diff_cleanupSemanticLossless(h);for(var f,m=0,g=0;g<e[l].diffs.length;g++){var E=e[l].diffs[g];E[0]!==s&&(f=this.diff_xIndex(h,m)),E[0]===i?t=t.substring(0,c+f)+E[1]+t.substring(c+f):E[0]===r&&(t=t.substring(0,c+f)+t.substring(c+this.diff_xIndex(h,m+E[1].length))),E[0]!==r&&(m+=E[1].length)}}}}}return t=t.substring(a.length,t.length-a.length),[t,o]},n.prototype.patch_addPadding=function(e){for(var t=this.Patch_Margin,a="",n=1;n<=t;n++)a+=String.fromCharCode(n);for(var n=0;n<e.length;n++)e[n].start1+=t,e[n].start2+=t;var r=e[0],i=r.diffs;if(0==i.length||i[0][0]!=s)i.unshift([s,a]),r.start1-=t,r.start2-=t,r.length1+=t,r.length2+=t;else if(t>i[0][1].length){var o=t-i[0][1].length;i[0][1]=a.substring(i[0][1].length)+i[0][1],r.start1-=o,r.start2-=o,r.length1+=o,r.length2+=o}if(r=e[e.length-1],i=r.diffs,0==i.length||i[i.length-1][0]!=s)i.push([s,a]),r.length1+=t,r.length2+=t;else if(t>i[i.length-1][1].length){var o=t-i[i.length-1][1].length;i[i.length-1][1]+=a.substring(0,o),r.length1+=o,r.length2+=o}return a},n.prototype.patch_splitMax=function(e){for(var t=this.Match_MaxBits,a=0;a<e.length;a++)if(!(e[a].length1<=t)){var o=e[a];e.splice(a--,1);for(var l=o.start1,c=o.start2,u="";0!==o.diffs.length;){var p=new n.patch_obj,d=!0;for(p.start1=l-u.length,p.start2=c-u.length,""!==u&&(p.length1=p.length2=u.length,p.diffs.push([s,u]));0!==o.diffs.length&&p.length1<t-this.Patch_Margin;){var _=o.diffs[0][0],h=o.diffs[0][1];_===i?(p.length2+=h.length,c+=h.length,p.diffs.push(o.diffs.shift()),d=!1):_===r&&1==p.diffs.length&&p.diffs[0][0]==s&&h.length>2*t?(p.length1+=h.length,l+=h.length,d=!1,p.diffs.push([_,h]),o.diffs.shift()):(h=h.substring(0,t-p.length1-this.Patch_Margin),p.length1+=h.length,l+=h.length,_===s?(p.length2+=h.length,c+=h.length):d=!1,p.diffs.push([_,h]),h==o.diffs[0][1]?o.diffs.shift():o.diffs[0][1]=o.diffs[0][1].substring(h.length))}u=this.diff_text2(p.diffs),u=u.substring(u.length-this.Patch_Margin);var f=this.diff_text1(o.diffs).substring(0,this.Patch_Margin);""!==f&&(p.length1+=f.length,p.length2+=f.length,0!==p.diffs.length&&p.diffs[p.diffs.length-1][0]===s?p.diffs[p.diffs.length-1][1]+=f:p.diffs.push([s,f])),d||e.splice(++a,0,p)}}},n.prototype.patch_toText=function(e){for(var t=[],a=0;a<e.length;a++)t[a]=e[a];return t.join("")},n.prototype.patch_fromText=function(e){var t=[];if(!e)return t;for(var a=e.split("\n"),o=0,l=/^@@ -(\d+),?(\d*) \+(\d+),?(\d*) @@$/;o<a.length;){var c=a[o].match(l);if(!c)throw new Error("Invalid patch string: "+a[o]);var u=new n.patch_obj;for(t.push(u),u.start1=parseInt(c[1],10),""===c[2]?(u.start1--,u.length1=1):"0"==c[2]?u.length1=0:(u.start1--,u.length1=parseInt(c[2],10)),u.start2=parseInt(c[3],10),""===c[4]?(u.start2--,u.length2=1):"0"==c[4]?u.length2=0:(u.start2--,u.length2=parseInt(c[4],10)),o++;o<a.length;){var p=a[o].charAt(0);try{var d=decodeURI(a[o].substring(1))}catch(e){throw new Error("Illegal escape in patch_fromText: "+d)}if("-"==p)u.diffs.push([r,d]);else if("+"==p)u.diffs.push([i,d]);else if(" "==p)u.diffs.push([s,d]);else{if("@"==p)break;if(""!==p)throw new Error('Invalid patch mode "'+p+'" in: '+d)}o++}}return t},n.patch_obj=function(){this.diffs=[],this.start1=null,this.start2=null,this.length1=0,this.length2=0},n.patch_obj.prototype.toString=function(){var e,t;e=0===this.length1?this.start1+",0":1==this.length1?this.start1+1:this.start1+1+","+this.length1,t=0===this.length2?this.start2+",0":1==this.length2?this.start2+1:this.start2+1+","+this.length2;for(var a,n=["@@ -"+e+" +"+t+" @@\n"],o=0;o<this.diffs.length;o++){switch(this.diffs[o][0]){case i:a="+";break;case r:a="-";break;case s:a=" "}n[o+1]=a+encodeURI(this.diffs[o][1])+"\n"}return n.join("").replace(/%20/g," ")},e.exports=n,e.exports.diff_match_patch=n,e.exports.DIFF_DELETE=r,e.exports.DIFF_INSERT=i,e.exports.DIFF_EQUAL=s},1663:function(e,t,a){var n=a(1661);"string"==typeof n&&(n=[[e.i,n,""]]);a(1619)(n,{});n.locals&&(e.exports=n.locals)},1664:function(e,t,a){var n=a(1662),r=(a(301),-1),i=1,s=0;!function(e){e(a(301))}(function(e){"use strict";function t(e,t){this.mv=e,this.type=t,this.classes="left"==t?{chunk:"CodeMirror-merge-l-chunk",start:"CodeMirror-merge-l-chunk-start",end:"CodeMirror-merge-l-chunk-end",insert:"CodeMirror-merge-l-inserted",del:"CodeMirror-merge-l-deleted",connect:"CodeMirror-merge-l-connect"}:{chunk:"CodeMirror-merge-r-chunk",start:"CodeMirror-merge-r-chunk-start",end:"CodeMirror-merge-r-chunk-end",insert:"CodeMirror-merge-r-inserted",del:"CodeMirror-merge-r-deleted",connect:"CodeMirror-merge-r-connect"}}function a(t){t.diffOutOfDate&&(t.diff=D(t.orig.getValue(),t.edit.getValue(),t.mv.options.ignoreWhitespace),t.chunks=S(t.diff),t.diffOutOfDate=!1,e.signal(t.edit,"updateDiff",t.diff))}function o(t){function n(e){X=!0,m=!1,"full"==e&&(t.svg&&V(t.svg),t.copyButtons&&V(t.copyButtons),_(t.edit,d.marked,t.classes),_(t.orig,f.marked,t.classes),d.from=d.to=f.from=f.to=0),a(t),t.showDifferences&&(h(t.edit,t.diff,d,i,t.classes),h(t.orig,t.diff,f,r,t.classes)),"align"==t.mv.options.connect&&A(t),g(t),null!=t.needsScrollSync&&c(t,t.needsScrollSync),X=!1}function s(e){X||(t.dealigned=!0,o(e))}function o(e){X||m||(clearTimeout(p),!0===e&&(m=!0),p=setTimeout(n,!0===e?20:250))}function l(e,a){t.diffOutOfDate||(t.diffOutOfDate=!0,d.from=d.to=f.from=f.to=0),s(a.text.length-1!=a.to.line-a.from.line)}function u(){t.diffOutOfDate=!0,t.dealigned=!0,n("full")}var p,d={from:0,to:0,marked:[]},f={from:0,to:0,marked:[]},m=!1;return t.edit.on("change",l),t.orig.on("change",l),t.edit.on("swapDoc",u),t.orig.on("swapDoc",u),"align"==t.mv.options.connect&&(e.on(t.edit.state.trackAlignable,"realign",s),e.on(t.orig.state.trackAlignable,"realign",s)),t.edit.on("viewportChange",function(){o(!1)}),t.orig.on("viewportChange",function(){o(!1)}),n(),n}function l(e,t){e.edit.on("scroll",function(){c(e,!0)&&g(e)}),e.orig.on("scroll",function(){c(e,!1)&&g(e),t&&c(t,!0)&&g(t)})}function c(e,t){if(e.diffOutOfDate)return e.lockScroll&&null==e.needsScrollSync&&(e.needsScrollSync=t),!1;if(e.needsScrollSync=null,!e.lockScroll)return!0;var a,n,r=+new Date;if(t?(a=e.edit,n=e.orig):(a=e.orig,n=e.edit),a.state.scrollSetBy==e&&(a.state.scrollSetAt||0)+250>r)return!1;var i=a.getScrollInfo();if("align"==e.mv.options.connect)m=i.top;else{var s,o,l=.5*i.clientHeight,c=i.top+l,p=a.lineAtHeight(c,"local"),d=H(e.chunks,p,t),_=u(a,t?d.edit:d.orig),h=u(n,t?d.orig:d.edit),f=(c-_.top)/(_.bot-_.top),m=h.top-l+f*(h.bot-h.top);if(m>i.top&&(o=i.top/l)<1)m=m*o+i.top*(1-o);else if((s=i.height-i.clientHeight-i.top)<l){var g=n.getScrollInfo(),E=g.height-g.clientHeight-m;E>s&&(o=s/l)<1&&(m=m*o+(g.height-g.clientHeight-s)*(1-o))}}return n.scrollTo(i.left,m),n.state.scrollSetAt=r,n.state.scrollSetBy=e,!0}function u(e,t){var a=t.after;return null==a&&(a=e.lastLine()+1),{top:e.heightAtLine(t.before||0,"local"),bot:e.heightAtLine(a,"local")}}function p(e,t,a){e.lockScroll=t,t&&0!=a&&c(e,i)&&g(e),e.lockButton.innerHTML=t?"⇛⇚":"⇛&nbsp;&nbsp;⇚"}function d(e,t,a){for(var n=a.classLocation,r=0;r<n.length;r++)e.removeLineClass(t,n[r],a.chunk),e.removeLineClass(t,n[r],a.start),e.removeLineClass(t,n[r],a.end)}function _(t,a,n){for(var r=0;r<a.length;++r){var i=a[r];i instanceof e.TextMarker?i.clear():i.parent&&d(t,i,n)}a.length=0}function h(e,t,a,n,r){var i=e.getViewport();e.operation(function(){a.from==a.to||i.from-a.to>20||a.from-i.to>20?(_(e,a.marked,r),m(e,t,n,a.marked,i.from,i.to,r),a.from=i.from,a.to=i.to):(i.from<a.from&&(m(e,t,n,a.marked,i.from,a.from,r),a.from=i.from),i.to>a.to&&(m(e,t,n,a.marked,a.to,i.to,r),a.to=i.to))})}function f(e,t,a,n,r,i){for(var s=a.classLocation,o=e.getLineHandle(t),l=0;l<s.length;l++)n&&e.addLineClass(o,s[l],a.chunk),r&&e.addLineClass(o,s[l],a.start),i&&e.addLineClass(o,s[l],a.end);return o}function m(e,t,a,n,i,o,l){function c(t,a){for(var r=Math.max(i,t),s=Math.min(o,a),c=r;c<s;++c)n.push(f(e,c,l,!0,c==t,c==a-1));t==a&&r==a&&s==a&&(r?n.push(f(e,r-1,l,!1,!1,!0)):n.push(f(e,r,l,!1,!0,!1)))}for(var u=J(0,0),p=J(i,0),d=e.clipPos(J(o-1)),_=a==r?l.del:l.insert,h=0,m=!1,g=0;g<t.length;++g){var E=t[g],v=E[0],y=E[1];if(v==s){var k=u.line+(x(t,g)?0:1);z(u,y);var A=u.line+(L(t,g)?1:0);A>k&&(m&&(c(h,k),m=!1),h=A)}else if(m=!0,v==a){var T=z(u,y,!0),C=K(p,u),b=q(d,T);G(C,b)||n.push(e.markText(C,b,{className:_})),u=T}}m&&c(h,u.line+1)}function g(e){if(e.showDifferences){if(e.svg){V(e.svg);var t=e.gap.offsetWidth;U(e.svg,"width",t,"height",e.gap.offsetHeight)}e.copyButtons&&V(e.copyButtons);for(var a=e.edit.getViewport(),n=e.orig.getViewport(),r=e.mv.wrap.getBoundingClientRect().top,i=r-e.edit.getScrollerElement().getBoundingClientRect().top+e.edit.getScrollInfo().top,s=r-e.orig.getScrollerElement().getBoundingClientRect().top+e.orig.getScrollInfo().top,o=0;o<e.chunks.length;o++){var l=e.chunks[o];l.editFrom<=a.to&&l.editTo>=a.from&&l.origFrom<=n.to&&l.origTo>=n.from&&b(e,l,s,i,t)}}}function E(e,t){for(var a=0,n=0,r=0;r<t.length;r++){var i=t[r];if(i.editTo>e&&i.editFrom<=e)return null;if(i.editFrom>e)break;a=i.editTo,n=i.origTo}return n+(e-a)}function v(e,t,a){for(var n=e.state.trackAlignable,r=e.firstLine(),i=0,s=[],o=0;;o++){for(var l=t[o],c=l?a?l.origFrom:l.editFrom:1e9;i<n.alignable.length;i+=2){var u=n.alignable[i]+1;if(!(u<=r)){if(!(u<=c))break;s.push(u)}}if(!l)break;s.push(r=a?l.origTo:l.editTo)}return s}function y(e,t,a,n){var r=0,i=0,s=0,o=0;e:for(;;r++){var l=e[r],c=t[i];if(!l&&null==c)break;for(var u=l?l[0]:1e9,p=null==c?1e9:c;s<a.length;){var d=a[s];if(d.origFrom<=p&&d.origTo>p){i++,r--;continue e}if(d.editTo>u){if(d.editFrom<=u)continue e;break}o+=d.origTo-d.origFrom-(d.editTo-d.editFrom),s++}if(u==p-o)l[n]=p,i++;else if(u<p-o)l[n]=u+o;else{var _=[p-o,null,null];_[n]=p,e.splice(r,0,_),i++}}}function k(e,t){var a=v(e.edit,e.chunks,!1),n=[];if(t)for(var r=0,i=0;r<t.chunks.length;r++){for(var s=t.chunks[r].editTo;i<a.length&&a[i]<s;)i++;i!=a.length&&a[i]==s||a.splice(i++,0,s)}for(var r=0;r<a.length;r++)n.push([a[r],null,null]);return y(n,v(e.orig,e.chunks,!0),e.chunks,1),t&&y(n,v(t.orig,t.chunks,!0),t.chunks,2),n}function A(e,t){if(e.dealigned||t){if(!e.orig.curOp)return e.orig.operation(function(){A(e,t)});e.dealigned=!1;var n=e.mv.left==e?e.mv.right:e.mv.left;n&&(a(n),n.dealigned=!1);for(var r=k(e,n),i=e.mv.aligners,s=0;s<i.length;s++)i[s].clear();i.length=0;var o=[e.edit,e.orig],l=[];n&&o.push(n.orig);for(var s=0;s<o.length;s++)l.push(o[s].getScrollInfo().top);for(var c=0;c<r.length;c++)T(o,r[c],i);for(var s=0;s<o.length;s++)o[s].scrollTo(null,l[s])}}function T(e,t,a){for(var n=0,r=[],i=0;i<e.length;i++)if(null!=t[i]){var s=e[i].heightAtLine(t[i],"local");r[i]=s,n=Math.max(n,s)}for(var i=0;i<e.length;i++)if(null!=t[i]){var o=n-r[i];o>1&&a.push(C(e[i],t[i],o))}}function C(e,t,a){var n=!0;t>e.lastLine()&&(t--,n=!1);var r=document.createElement("div");return r.className="CodeMirror-merge-spacer",r.style.height=a+"px",r.style.minWidth="1px",e.addLineWidget(t,r,{height:a,above:n,mergeSpacer:!0,handleMouseEvents:!0})}function b(e,t,a,n,r){var i="left"==e.type,s=e.orig.heightAtLine(t.origFrom,"local",!0)-a;if(e.svg){var o=s,l=e.edit.heightAtLine(t.editFrom,"local",!0)-n;if(i){var c=o;o=l,l=c}var u=e.orig.heightAtLine(t.origTo,"local",!0)-a,p=e.edit.heightAtLine(t.editTo,"local",!0)-n;if(i){var c=u;u=p,p=c}var d=" C "+r/2+" "+l+" "+r/2+" "+o+" "+(r+2)+" "+o,_=" C "+r/2+" "+u+" "+r/2+" "+p+" -1 "+p;U(e.svg.appendChild(document.createElementNS($,"path")),"d","M -1 "+l+d+" L "+(r+2)+" "+u+_+" z","class",e.classes.connect)}if(e.copyButtons){var h=e.copyButtons.appendChild(I("div","left"==e.type?"⇝":"⇜","CodeMirror-merge-copy")),f=e.mv.options.allowEditingOriginals;if(h.title=f?"Push to left":"Revert chunk",h.chunk=t,h.style.top=(t.origTo>t.origFrom?s:e.edit.heightAtLine(t.editFrom,"local")-n)+"px",f){var m=e.edit.heightAtLine(t.editFrom,"local")-n,g=e.copyButtons.appendChild(I("div","right"==e.type?"⇝":"⇜","CodeMirror-merge-copy-reverse"));g.title="Push to right",g.chunk={editFrom:t.origFrom,editTo:t.origTo,origFrom:t.editFrom,origTo:t.editTo},g.style.top=m+"px","right"==e.type?g.style.left="2px":g.style.right="2px"}}}function O(e,t,a,n){if(!e.diffOutOfDate){var r=n.origTo>a.lastLine()?J(n.origFrom-1):J(n.origFrom,0),i=J(n.origTo,0),s=n.editTo>t.lastLine()?J(n.editFrom-1):J(n.editFrom,0),o=J(n.editTo,0),l=e.mv.options.revertChunk;l?l(e.mv,a,r,i,t,s,o):t.replaceRange(a.getRange(r,i),s,o)}}function R(t){var a=t.lockButton=I("div",null,"CodeMirror-merge-scrolllock");a.title="Toggle locked scrolling";var n=I("div",[a],"CodeMirror-merge-scrolllock-wrap");e.on(a,"click",function(){p(t,!t.lockScroll)});var r=[n];if(!1!==t.mv.options.revertButtons&&(t.copyButtons=I("div",null,"CodeMirror-merge-copybuttons-"+t.type),e.on(t.copyButtons,"click",function(e){var a=e.target||e.srcElement;if(a.chunk)return"CodeMirror-merge-copy-reverse"==a.className?void O(t,t.orig,t.edit,a.chunk):void O(t,t.edit,t.orig,a.chunk)}),r.unshift(t.copyButtons)),"align"!=t.mv.options.connect){var i=document.createElementNS&&document.createElementNS($,"svg");i&&!i.createSVGRect&&(i=null),t.svg=i,i&&r.push(i)}return t.gap=I("div",r,"CodeMirror-merge-gap")}function w(e){return"string"==typeof e?e:e.getValue()}function D(e,t,a){for(var n=ee.diff_main(e,t),r=0;r<n.length;++r){var i=n[r];(a?/[^ \t]/.test(i[1]):i[1])?r&&n[r-1][0]==i[0]&&(n.splice(r--,1),n[r][1]+=i[1]):n.splice(r--,1)}return n}function S(e){for(var t=[],a=0,n=0,r=J(0,0),o=J(0,0),l=0;l<e.length;++l){var c=e[l],u=c[0];if(u==s){var p=!x(e,l)||r.line<a||o.line<n?1:0,d=r.line+p,_=o.line+p;z(r,c[1],null,o);var h=L(e,l)?1:0,f=r.line+h,m=o.line+h;f>d&&(l&&t.push({origFrom:n,origTo:_,editFrom:a,editTo:d}),a=f,n=m)}else z(u==i?r:o,c[1])}return(a<=r.line||n<=o.line)&&t.push({origFrom:n,origTo:o.line+1,editFrom:a,editTo:r.line+1}),t}function L(e,t){if(t==e.length-1)return!0;var a=e[t+1][1];return!(1==a.length&&t<e.length-2||10!=a.charCodeAt(0))&&(t==e.length-2||(a=e[t+2][1],(a.length>1||t==e.length-3)&&10==a.charCodeAt(0)))}function x(e,t){if(0==t)return!0;var a=e[t-1][1];return 10==a.charCodeAt(a.length-1)&&(1==t||(a=e[t-2][1],10==a.charCodeAt(a.length-1)))}function H(e,t,a){for(var n,r,i,s,o=0;o<e.length;o++){var l=e[o],c=a?l.editFrom:l.origFrom,u=a?l.editTo:l.origTo;null==r&&(c>t?(r=l.editFrom,s=l.origFrom):u>t&&(r=l.editTo,s=l.origTo)),u<=t?(n=l.editTo,i=l.origTo):c<=t&&(n=l.editFrom,i=l.origFrom)}return{edit:{before:n,after:r},orig:{before:i,after:s}}}function M(t,a,n){function r(){s.clear(),t.removeLineClass(a,"wrap","CodeMirror-merge-collapsed-line")}t.addLineClass(a,"wrap","CodeMirror-merge-collapsed-line");var i=document.createElement("span");i.className="CodeMirror-merge-collapsed-widget",i.title="Identical text collapsed. Click to expand.";var s=t.markText(J(a,0),J(n-1),{inclusiveLeft:!0,inclusiveRight:!0,replacedWith:i,clearOnEnter:!0});return e.on(i,"click",r),{mark:s,clear:r}}function N(e,t){function a(){for(var e=0;e<n.length;e++)n[e].clear()}for(var n=[],r=0;r<t.length;r++){var i=t[r],s=M(i.cm,i.line,i.line+e);n.push(s),s.mark.on("clear",a)}return n[0].mark}function F(e,t,a,n){for(var r=0;r<e.chunks.length;r++)for(var i=e.chunks[r],s=i.editFrom-t;s<i.editTo+t;s++){var o=s+a;o>=0&&o<n.length&&(n[o]=!1)}}function B(e,t){"number"!=typeof t&&(t=2);for(var a=[],n=e.editor(),r=n.firstLine(),i=r,s=n.lastLine();i<=s;i++)a.push(!0);e.left&&F(e.left,t,r,a),e.right&&F(e.right,t,r,a);for(var o=0;o<a.length;o++)if(a[o]){for(var l=o+r,c=1;o<a.length-1&&a[o+1];o++,c++);if(c>t){var u=[{line:l,cm:n}];e.left&&u.push({line:E(l,e.left.chunks),cm:e.left.orig}),e.right&&u.push({line:E(l,e.right.chunks),cm:e.right.orig});var p=N(c,u);e.options.onCollapse&&e.options.onCollapse(e,l,c,p)}}}function I(e,t,a,n){var r=document.createElement(e);if(a&&(r.className=a),n&&(r.style.cssText=n),"string"==typeof t)r.appendChild(document.createTextNode(t));else if(t)for(var i=0;i<t.length;++i)r.appendChild(t[i]);return r}function V(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild)}function U(e){for(var t=1;t<arguments.length;t+=2)e.setAttribute(arguments[t],arguments[t+1])}function P(e,t){t||(t={});for(var a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);return t}function z(e,t,a,n){for(var r=a?J(e.line,e.ch):e,i=0;;){var s=t.indexOf("\n",i);if(-1==s)break;++r.line,n&&++n.line,i=s+1}return r.ch=(i?0:r.ch)+(t.length-i),n&&(n.ch=(i?0:n.ch)+(t.length-i)),r}function j(e){this.cm=e,this.alignable=[],this.height=e.doc.height;var t=this;e.on("markerAdded",function(e,a){if(a.collapsed){var n=a.find(1);null!=n&&t.set(n.line,ne)}}),e.on("markerCleared",function(e,a,n,r){null!=r&&a.collapsed&&t.check(r,ne,t.hasMarker)}),e.on("markerChanged",this.signal.bind(this)),e.on("lineWidgetAdded",function(e,a,n){a.mergeSpacer||(a.above?t.set(n-1,ae):t.set(n,te))}),e.on("lineWidgetCleared",function(e,a,n){a.mergeSpacer||(a.above?t.check(n-1,ae,t.hasWidgetBelow):t.check(n,te,t.hasWidget))}),e.on("lineWidgetChanged",this.signal.bind(this)),e.on("change",function(e,a){var n=a.from.line,r=a.to.line-a.from.line,i=a.text.length-1,s=n+i;(r||i)&&t.map(n,r,i),t.check(s,ne,t.hasMarker),(r||i)&&t.check(a.from.line,ne,t.hasMarker)}),e.on("viewportChange",function(){t.cm.doc.height!=t.height&&t.signal()})}function q(e,t){return(e.line-t.line||e.ch-t.ch)<0?e:t}function K(e,t){return(e.line-t.line||e.ch-t.ch)>0?e:t}function G(e,t){return e.line==t.line&&e.ch==t.ch}function W(e,t,a){for(var n=e.length-1;n>=0;n--){var r=e[n],i=(a?r.origTo:r.editTo)-1;if(i<t)return i}}function Y(e,t,a){for(var n=0;n<e.length;n++){var r=e[n],i=a?r.origFrom:r.editFrom;if(i>t)return i}}function Q(t,n){var r=null,i=t.state.diffViews,s=t.getCursor().line;if(i)for(var o=0;o<i.length;o++){var l=i[o],c=t==l.orig;a(l);var u=n<0?W(l.chunks,s,c):Y(l.chunks,s,c);null==u||null!=r&&!(n<0?u>r:u<r)||(r=u)}if(null==r)return e.Pass;t.setCursor(r,0)}var J=e.Pos,$="http://www.w3.org/2000/svg";t.prototype={constructor:t,init:function(t,a,n){this.edit=this.mv.edit,(this.edit.state.diffViews||(this.edit.state.diffViews=[])).push(this),this.orig=e(t,P({value:a,readOnly:!this.mv.options.allowEditingOriginals},P(n))),"align"==this.mv.options.connect&&(this.edit.state.trackAlignable||(this.edit.state.trackAlignable=new j(this.edit)),this.orig.state.trackAlignable=new j(this.orig)),this.orig.state.diffViews=[this];var r=n.chunkClassLocation||"background";"[object Array]"!=Object.prototype.toString.call(r)&&(r=[r]),this.classes.classLocation=r,this.diff=D(w(a),w(n.value),this.mv.options.ignoreWhitespace),this.chunks=S(this.diff),this.diffOutOfDate=this.dealigned=!1,this.needsScrollSync=null,this.showDifferences=!1!==n.showDifferences},registerEvents:function(e){this.forceUpdate=o(this),p(this,!0,!1),l(this,e)},setShowDifferences:function(e){(e=!1!==e)!=this.showDifferences&&(this.showDifferences=e,this.forceUpdate("full"))}};var X=!1,Z=e.MergeView=function(a,n){if(!(this instanceof Z))return new Z(a,n);this.options=n;var r=n.origLeft,i=null==n.origRight?n.orig:n.origRight,s=null!=r,o=null!=i,l=1+(s?1:0)+(o?1:0),c=[],u=this.left=null,p=this.right=null,d=this;if(s){u=this.left=new t(this,"left");var _=I("div",null,"CodeMirror-merge-pane CodeMirror-merge-left");c.push(_),c.push(R(u))}var h=I("div",null,"CodeMirror-merge-pane CodeMirror-merge-editor");if(c.push(h),o){p=this.right=new t(this,"right"),c.push(R(p));var f=I("div",null,"CodeMirror-merge-pane CodeMirror-merge-right");c.push(f)}(o?f:h).className+=" CodeMirror-merge-pane-rightmost",c.push(I("div",null,null,"height: 0; clear: both;"));var m=this.wrap=a.appendChild(I("div",c,"CodeMirror-merge CodeMirror-merge-"+l+"pane"));this.edit=e(h,P(n)),u&&u.init(_,r,n),p&&p.init(f,i,n),n.collapseIdentical&&this.editor().operation(function(){B(d,n.collapseIdentical)}),"align"==n.connect&&(this.aligners=[],A(this.left||this.right,!0)),u&&u.registerEvents(p),p&&p.registerEvents(u);var E=function(){u&&g(u),p&&g(p)};e.on(window,"resize",E);var v=setInterval(function(){for(var t=m.parentNode;t&&t!=document.body;t=t.parentNode);t||(clearInterval(v),e.off(window,"resize",E))},5e3)};Z.prototype={constructor:Z,editor:function(){return this.edit},rightOriginal:function(){return this.right&&this.right.orig},leftOriginal:function(){return this.left&&this.left.orig},setShowDifferences:function(e){this.right&&this.right.setShowDifferences(e),this.left&&this.left.setShowDifferences(e)},rightChunks:function(){if(this.right)return a(this.right),this.right.chunks},leftChunks:function(){if(this.left)return a(this.left),this.left.chunks}};var ee=new n,te=1,ae=2,ne=4;j.prototype={signal:function(){e.signal(this,"realign"),this.height=this.cm.doc.height},set:function(e,t){for(var a=-1;a<this.alignable.length;a+=2){var n=this.alignable[a]-e;if(0==n){if((this.alignable[a+1]&t)==t)return;return this.alignable[a+1]|=t,void this.signal()}if(n>0)break}this.signal(),this.alignable.splice(a,0,e,t)},find:function(e){for(var t=0;t<this.alignable.length;t+=2)if(this.alignable[t]==e)return t;return-1},check:function(e,t,a){var n=this.find(e);if(-1!=n&&this.alignable[n+1]&t&&!a.call(this,e)){this.signal();var r=this.alignable[n+1]&~t;r?this.alignable[n+1]=r:this.alignable.splice(n,2)}},hasMarker:function(e){var t=this.cm.getLineHandle(e);if(t.markedSpans)for(var a=0;a<t.markedSpans.length;a++)if(t.markedSpans[a].mark.collapsed&&null!=t.markedSpans[a].to)return!0;return!1},hasWidget:function(e){var t=this.cm.getLineHandle(e);if(t.widgets)for(var a=0;a<t.widgets.length;a++)if(!t.widgets[a].above&&!t.widgets[a].mergeSpacer)return!0;return!1},hasWidgetBelow:function(e){if(e==this.cm.lastLine())return!1;var t=this.cm.getLineHandle(e+1);if(t.widgets)for(var a=0;a<t.widgets.length;a++)if(t.widgets[a].above&&!t.widgets[a].mergeSpacer)return!0;return!1},map:function(e,t,a){for(var n=a-t,r=e+t,i=-1,s=-1,o=0;o<this.alignable.length;o+=2){var l=this.alignable[o];l==e&&this.alignable[o+1]&ae&&(i=o),l==r&&this.alignable[o+1]&ae&&(s=o),l<=e||(l<r?this.alignable.splice(o--,2):this.alignable[o]+=n)}if(i>-1){var c=this.alignable[i+1];c==ae?this.alignable.splice(i,2):this.alignable[i+1]=c&~ae}s>-1&&a&&this.set(e+a,ae)}},e.commands.goNextDiff=function(e){return Q(e,1)},e.commands.goPrevDiff=function(e){return Q(e,-1)}})},781:function(e,t,a){"use strict";function n(e){return function(){var t=this.ownerDocument,a=this.namespaceURI;return a===s.a&&t.documentElement.namespaceURI===s.a?t.createElement(e):t.createElementNS(a,e)}}function r(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}var i=a(782),s=a(783);t.a=function(e){var t=a.i(i.a)(e);return(t.local?r:n)(t)}},782:function(e,t,a){"use strict";var n=a(783);t.a=function(e){var t=e+="",a=t.indexOf(":");return a>=0&&"xmlns"!==(t=e.slice(0,a))&&(e=e.slice(a+1)),n.b.hasOwnProperty(t)?{space:n.b[t],local:e}:e}},783:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n="http://www.w3.org/1999/xhtml";t.b={svg:"http://www.w3.org/2000/svg",xhtml:n,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},784:function(e,t,a){"use strict";t.a=function(e,t){var a=e.ownerSVGElement||e;if(a.createSVGPoint){var n=a.createSVGPoint();return n.x=t.clientX,n.y=t.clientY,n=n.matrixTransform(e.getScreenCTM().inverse()),[n.x,n.y]}var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}},785:function(e,t,a){"use strict";function n(e,t,a){return e=r(e,t,a),function(t){var a=t.relatedTarget;a&&(a===this||8&a.compareDocumentPosition(this))||e.call(this,t)}}function r(e,t,a){return function(n){var r=c;c=n;try{e.call(this,this.__data__,t,a)}finally{c=r}}}function i(e){return e.trim().split(/^|\s+/).map(function(e){var t="",a=e.indexOf(".");return a>=0&&(t=e.slice(a+1),e=e.slice(0,a)),{type:e,name:t}})}function s(e){return function(){var t=this.__on;if(t){for(var a,n=0,r=-1,i=t.length;n<i;++n)a=t[n],e.type&&a.type!==e.type||a.name!==e.name?t[++r]=a:this.removeEventListener(a.type,a.listener,a.capture);++r?t.length=r:delete this.__on}}}function o(e,t,a){var i=l.hasOwnProperty(e.type)?n:r;return function(n,r,s){var o,l=this.__on,c=i(t,r,s);if(l)for(var u=0,p=l.length;u<p;++u)if((o=l[u]).type===e.type&&o.name===e.name)return this.removeEventListener(o.type,o.listener,o.capture),this.addEventListener(o.type,o.listener=c,o.capture=a),void(o.value=t);this.addEventListener(e.type,c,a),o={type:e.type,name:e.name,value:t,listener:c,capture:a},l?l.push(o):this.__on=[o]}}a.d(t,"a",function(){return c});var l={},c=null;if("undefined"!=typeof document){"onmouseenter"in document.documentElement||(l={mouseenter:"mouseover",mouseleave:"mouseout"})}t.b=function(e,t,a){var n,r,l=i(e+""),c=l.length;{if(!(arguments.length<2)){for(u=t?o:s,null==a&&(a=!1),n=0;n<c;++n)this.each(u(l[n],t,a));return this}var u=this.node().__on;if(u)for(var p,d=0,_=u.length;d<_;++d)for(n=0,p=u[d];n<c;++n)if((r=l[n]).type===p.type&&r.name===p.name)return p.value}}},786:function(e,t,a){"use strict";function n(){}t.a=function(e){return null==e?n:function(){return this.querySelector(e)}}},787:function(e,t,a){"use strict";var n=a(785);t.a=function(){for(var e,t=n.a;e=t.sourceEvent;)t=e;return t}},788:function(e,t,a){"use strict";t.a=function(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}},913:function(e,t,a){"use strict";var n=function(e){return function(){return this.matches(e)}};if("undefined"!=typeof document){var r=document.documentElement;if(!r.matches){var i=r.webkitMatchesSelector||r.msMatchesSelector||r.mozMatchesSelector||r.oMatchesSelector;n=function(e){return function(){return i.call(this,e)}}}}t.a=n},914:function(e,t,a){"use strict";function n(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}var r=a(915),i=a(143);t.b=n,t.a=function(){return new i.a(this._enter||this._groups.map(r.a),this._parents)},n.prototype={constructor:n,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}}},915:function(e,t,a){"use strict";t.a=function(e){return new Array(e.length)}},916:function(e,t,a){"use strict";function n(e){return function(){this.style.removeProperty(e)}}function r(e,t,a){return function(){this.style.setProperty(e,t,a)}}function i(e,t,a){return function(){var n=t.apply(this,arguments);null==n?this.style.removeProperty(e):this.style.setProperty(e,n,a)}}function s(e,t){return e.style.getPropertyValue(t)||a.i(o.a)(e).getComputedStyle(e,null).getPropertyValue(t)}var o=a(788);t.a=function(e,t,a){return arguments.length>1?this.each((null==t?n:"function"==typeof t?i:r)(e,t,null==a?"":a)):s(this.node(),e)}},917:function(e,t,a){"use strict";function n(){return[]}t.a=function(e){return null==e?n:function(){return this.querySelectorAll(e)}}}});