(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{102:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(42),i=a.n(n)()(["CHANGE_LOADING","GET_DATA_SOURCES","GET_DATA_SOURCES_TYPE","GET_DATA_SOURCES_LIST","GET_DATA_SOURCES_TABLE","GET_DATA_SOURCES_COLUMN","GET_DATA_SOURCES_PART","RESET_DATA_SOURCES_PART","GET_DATA_SOURCES_PREVIEW"],{prefix:"dataSource/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"dataSourceActions","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/dataSourceActions.js")},109:function(e,t,a){"use strict";a(57);var n=a(24),i=a.n(n),r=a(8),s=a.n(r),o=a(4),l=a.n(o),c=a(5),p=a.n(c),u=a(2),d=a.n(u),_=a(6),m=a.n(_),h=a(1),g=a.n(h),A=a(10),f=a(0),E=a.n(f),k=(a(265),g.a.oneOfType([g.a.string,g.a.number])),b={children:g.a.node,left:k,width:k,visible:g.a.bool},T=function(e){function t(e){return l()(this,t),d()(this,(t.__proto__||s()(t)).call(this,e))}return m()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.visible,n=e.style,r=e.className,s=e.onClose,o="slide-pane",l={top:0,transform:a?"translate3d(0%, 0, 0)":"translate3d(150%, 0, 0)"};return r&&(o=o+" "+r),n&&(l=Object(A.assign)(l,n)),E.a.createElement("div",{className:o,style:l},E.a.createElement("div",{className:"slide-pane-conent"},t),E.a.createElement("span",{className:"slide-pane-toggle",onClick:s},E.a.createElement(i.a,{type:"double-right"})))}}]),t}(f.Component);T.propTypes=b;var y=T;t.a=y;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(k,"strOrNum","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/widgets/slidePane/index.js"),__REACT_HOT_LOADER__.register(b,"propType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/widgets/slidePane/index.js"),__REACT_HOT_LOADER__.register(T,"SlidePane","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/widgets/slidePane/index.js"),__REACT_HOT_LOADER__.register(y,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/widgets/slidePane/index.js"))},157:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(42),i=a.n(n)()(["GET_CATALOGUE","GET_API_MARKET_LIST","GET_MARKET_API_DETAIL","GET_API_EXT_INFO"],{prefix:"apiMarket/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"apiMarketActionType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/apiMarketActionType.js")},169:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(146);function i(e){return{type:n.a.UPDATE_APP,data:e}}"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"updateApp","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/main/actions/app.js")},170:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(10),i=a(106),r={id:0,dtuicUserId:0,userName:"未登录"};function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r,t=arguments[1];switch(t.type){case i.a.GET_USER:return t.data;case i.a.UPDATE_USER:return null!==t.data?Object(n.assign)(e,t.data):e;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"initalUser","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/main/reducers/modules/user.js"),__REACT_HOT_LOADER__.register(s,"user","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/main/reducers/modules/user.js"))},171:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(13),i=a(184),r=a(139),s=a.n(r),o=a(55),l=a(110);function c(e){return Object(o.e)(e,Object(o.d)(Object(o.a)(s.a,Object(i.createLogger)()),window.devToolsExtension?window.devToolsExtension():function(e){return e}))}function p(e){return Object(o.e)(e,Object(o.a)(s.a))}function u(e,t){var a=p(e),i=t&&"hash"===t?n.g:n.f;return{store:a,history:Object(l.syncHistoryWithStore)(i,a)}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(c,"configureStoreDev","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/utils/reduxUtils.js"),__REACT_HOT_LOADER__.register(p,"configureStoreProd","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/utils/reduxUtils.js"),__REACT_HOT_LOADER__.register(u,"getStore","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/utils/reduxUtils.js"))},216:function(e,t,a){},218:function(e,t,a){},220:function(e,t,a){},232:function(e,t,a){"use strict";var n=a(42),i=a.n(n)()(["GET_USER_LIST","GET_ALL_DICT","GET_ALL_MENU_LIST"],{prefix:"common/"}),r=i;t.a=r;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"commonActionType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/commonActionType.js"),__REACT_HOT_LOADER__.register(r,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/commonActionType.js"))},259:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(42),i=a.n(n)()(["GET_APPLYING_LIST","GET_APPLYED_LIST"],{prefix:"mine/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"mineActionType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/mineActionType.js")},263:function(e,t,a){},265:function(e,t,a){},556:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(42),i=a.n(n)()(["GET_ALL_API_LIST"],{prefix:"apiManage/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"apiManageActionType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/apiManageActionType.js")},557:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(42),i=a.n(n)()(["GET_ALL_APPLY_LIST"],{prefix:"approval/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"approvalActionType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/approvalActionType.js")},807:function(e,t,a){"use strict";a.r(t);var n=a(55),i=a(110),r=a(170),s=a(127),o=a(232),l=a(10),c={userList:[],allDict:{},menuList:null};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1],a=t.type,n=t.payload;switch(a){case o.a.GET_USER_LIST:var i=Object(l.cloneDeep)(e);i.userList;return i.userList=n,i;case o.a.GET_ALL_DICT:var r=Object(l.cloneDeep)(e);r.allDict;return r.allDict=n,r;case o.a.GET_ALL_MENU_LIST:var s=Object(l.cloneDeep)(e);return s.menuList=n,s;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(c,"initialState","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/modules/common.js"),__REACT_HOT_LOADER__.register(p,"dataCheck","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/modules/common.js"));var u=a(82),d={loading:!1,topRecords:[],alarmTrend:[],alarmSum:{},usage:{},userDate:"1",adminDate:"1",approvedMsgCount:0,marketOverview:{1:{callInfo:{callCount:0,failPercent:0,callTopAPI:"",infoList:[]},callCountTop:[],callFailTop:[],failInfoList:[],topCallFunc:[]},7:{callInfo:{callCount:0,failPercent:0,callTopAPI:"",infoList:[]},callCountTop:[],callFailTop:[],failInfoList:[],topCallFunc:[]},30:{callInfo:{callCount:0,failPercent:0,callTopAPI:"",infoList:[]},callCountTop:[],callFailTop:[],failInfoList:[],topCallFunc:[]}},userOverview:{1:{callInfo:{callCount:0,failPercent:0,callTopAPI:"",infoList:[]},callCountTop:[],callFailTop:[],approvalInfo:{approvingNum:0,approvedNum:0,stoppedNum:0}},7:{callInfo:{callCount:0,failPercent:0,callTopAPI:"",infoList:[]},callCountTop:[],callFailTop:[],approvalInfo:{approvingNum:0,approvedNum:0,stoppedNum:0}},30:{callInfo:{callCount:0,failPercent:0,callTopAPI:"",infoList:[]},callCountTop:[],callFailTop:[],approvalInfo:{approvingNum:0,approvedNum:0,stoppedNum:0}}}};function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments[1],a=t.type,n=t.payload,i=t.date;switch(a){case u.a.GET_USER_CALL_INFO:var r=Object(l.cloneDeep)(e);return r.userOverview[i].callInfo=n,r;case u.a.GET_API_FAIL_RANK:var s=Object(l.cloneDeep)(e);return s.userOverview[i].callFailTop=n,s;case u.a.GET_USER_API_CALL_RANK:var o=Object(l.cloneDeep)(e);return o.userOverview[i].callCountTop=n,o;case u.a.GET_USER_API_SUB_INFO:var c=Object(l.cloneDeep)(e);return c.userOverview[i].approvalInfo=n,c;case u.a.GET_MARKET_API_FAIL_RANK:var p=Object(l.cloneDeep)(e);return p.marketOverview[i].callFailTop=n,p;case u.a.GET_MARKET_CALL_INFO:var _=Object(l.cloneDeep)(e);return _.marketOverview[i].callInfo=n,_;case u.a.GET_MARKET_API_CALL_RANK:var m=Object(l.cloneDeep)(e);return m.marketOverview[i].callCountTop=n,m;case u.a.GET_MARKET_API_ERROR_INFO:var h=Object(l.cloneDeep)(e);return h.marketOverview[i].failInfoList=n,h;case u.a.GET_MARKET_TOP_CALL_FUNC:var g=Object(l.cloneDeep)(e);return g.marketOverview[i].topCallFunc=n,g;case u.a.GET_MARKET_API_APPLY_INFO:var A=Object(l.cloneDeep)(e);return A.approvedMsgCount=n,A;case u.a.CHANGE_LOADING:var f=Object(l.cloneDeep)(e),E=f.loading;return f.loading=!E,f;case u.a.GET_TOP_RECORD:var k=Object(l.cloneDeep)(e);k.topRecords;return k.topRecords=n,k;case u.a.GET_ALARM_SUM:var b=Object(l.cloneDeep)(e);b.alarmSum;return b.alarmSum=n,b;case u.a.GET_ALARM_TREND:var T=Object(l.cloneDeep)(e);T.alarmTrend;return T.alarmTrend=n,T;case u.a.GET_USAGE:var y=Object(l.cloneDeep)(e);y.usage;return y.usage=n,y;case u.a.CHOOSE_USER_DATE:var v=Object(l.cloneDeep)(e);return v.userDate=n,v;case u.a.CHOOSE_ADMIN_DATE:var C=Object(l.cloneDeep)(e);return C.adminDate=n,C;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(d,"initialState","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/modules/dashBoard/index.js"),__REACT_HOT_LOADER__.register(_,"dashBoard","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/modules/dashBoard/index.js"));var m=a(157),h={apiCatalogue:{},apiList:[],api:{},apiCallInfo:{}};function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments[1],a=t.type,n=t.payload;switch(a){case m.a.GET_CATALOGUE:var i=Object(l.cloneDeep)(e);return i.apiCatalogue=n,i;case m.a.GET_API_MARKET_LIST:var r=Object(l.cloneDeep)(e);return r.apiList=n,r;case m.a.GET_MARKET_API_DETAIL:var s=Object(l.cloneDeep)(e);return s.api[n.apiId]=n,s;case m.a.GET_API_EXT_INFO:var o=Object(l.cloneDeep)(e);return o.apiCallInfo[n.apiId]=n,o;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(h,"initialState","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/modules/apiMarket/index.js"),__REACT_HOT_LOADER__.register(g,"apiMarket","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/modules/apiMarket/index.js"));var A=a(259),f={apiList:{applyingList:[],appliedList:[]}};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1],a=t.type,n=t.payload;switch(a){case A.a.GET_APPLYING_LIST:var i=Object(l.cloneDeep)(e);return i.apiList.applyingList=n,i;case A.a.GET_APPLYED_LIST:var r=Object(l.cloneDeep)(e);return r.apiList.appliedList=n,r;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(f,"initialState","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/modules/mine/index.js"),__REACT_HOT_LOADER__.register(E,"mine","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/modules/mine/index.js"));var k=a(556),b={apiList:[]};function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments[1],a=t.type,n=t.payload;switch(a){case k.a.GET_ALL_API_LIST:var i=Object(l.cloneDeep)(e);return i.apiList=n,i;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(b,"initialState","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/modules/apiManage/index.js"),__REACT_HOT_LOADER__.register(T,"apiManage","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/modules/apiManage/index.js"));var y=a(557),v={approvalList:[]};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments[1],a=t.type,n=t.payload;switch(a){case y.a.GET_ALL_APPLY_LIST:var i=Object(l.cloneDeep)(e);return i.approvalList=n,i;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(v,"initialState","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/modules/approval/index.js"),__REACT_HOT_LOADER__.register(C,"apiMarket","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/modules/approval/index.js"));var w=a(102),D={loading:!1,sourceQuery:[],sourceType:[],sourceList:[],sourceTable:[],sourceColumn:[],sourcePart:[],sourcePreview:{}};function O(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments[1],a=t.type,n=t.payload;switch(a){case w.a.CHANGE_LOADING:var i=Object(l.cloneDeep)(e),r=i.loading;return i.loading=!r,i;case w.a.GET_DATA_SOURCES:var s=Object(l.cloneDeep)(e);s.sourceQuery;return s.sourceQuery=n,s;case w.a.GET_DATA_SOURCES_TYPE:var o=Object(l.cloneDeep)(e);o.sourceType;return o.sourceType=n,o;case w.a.GET_DATA_SOURCES_LIST:var c=Object(l.cloneDeep)(e);c.sourceList;return c.sourceList=n,c;case w.a.GET_DATA_SOURCES_TABLE:var p=Object(l.cloneDeep)(e);p.sourceTable;return p.sourceTable=n,p;case w.a.GET_DATA_SOURCES_COLUMN:var u=Object(l.cloneDeep)(e);u.sourceColumn;return u.sourceColumn=n,u;case w.a.GET_DATA_SOURCES_PART:var d=Object(l.cloneDeep)(e);d.sourcePart;return d.sourcePart=n.children,d;case w.a.RESET_DATA_SOURCES_PART:var _=Object(l.cloneDeep)(e);_.sourcePart;return _.sourcePart=[],_;case w.a.GET_DATA_SOURCES_PREVIEW:var m=Object(l.cloneDeep)(e);m.sourcePreview;return m.sourcePreview=n,m;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(D,"initialState","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/modules/dataSource/index.js"),__REACT_HOT_LOADER__.register(O,"dataSource","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/modules/dataSource/index.js"));var R=Object(n.c)({routing:i.routerReducer,dataSource:O,user:r.a,apps:s.b,app:s.a,common:p,dashBoard:_,apiMarket:g,mine:E,apiManage:T,approval:C}),x=R;t.default=x,"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(R,"rootReducer","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/index.js"),__REACT_HOT_LOADER__.register(x,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/reducers/index.js"))},815:function(e,t,a){"use strict";a.r(t);var n={};a.d(n,"docExample",function(){return Ia});var i,r=a(0),s=a.n(r),o=a(47),l=a.n(o),c=a(185),p=a(171),u=a(8),d=a.n(u),_=a(4),m=a.n(_),h=a(5),g=a.n(h),A=a(2),f=a.n(A),E=a(6),k=a.n(E),b=a(13),T=a(22),y=(a(220),a(263),a(218),a(216),a(830),a(128),a(73),a(114),a(178)),v=a(172),C=a(124),w=a(177),D=a(176),O=a(125),R=a(175),x=a(174),S=a(173),L=a(1),I=a.n(L),N=a(12),P=a(3),H=a.n(P),U=(a(57),a(24)),j=a.n(U),M=a(87),G=Object(T.b)(function(e){return{user:e.user,apps:e.apps,routing:e.routing,common:e.common,app:e.app}})(i=function(e){function t(e){m()(this,t);var a=f()(this,(t.__proto__||d()(t)).call(this,e));return a.state={},a}return k()(t,e),g()(t,[{key:"render",value:function(){var e=this.props,t=(e.user,e.apps,"/dataApi.html#/api"),a={overview:!1,market:!1,mine:!1,manage:!1,approval:!1,dataSource:!1},n=this.props.common.menuList;if(n)for(var i in n){var r=n[i];r.indexOf("overview")>-1?a.overview=!0:r.indexOf("market")>-1?a.market=!0:r.indexOf("myapi")>-1?a.mine=!0:r.indexOf("manager")>-1?a.manage=!0:r.indexOf("authorized")>-1?a.approval=!0:r.indexOf("datasource")>-1&&(a.dataSource=!0)}var o=[{id:"overview",name:"概览",link:t+"/overview",enable:a.overview},{id:"market",name:"API市场",link:t+"/market",enable:a.market},{id:"mine",name:"我的API",link:t+"/mine",enable:a.mine},{id:"manage",name:"API管理",link:t+"/manage",enable:a.manage},{id:"approval",name:"授权审批",link:t+"/approval",enable:a.approval},{id:"dataSource",name:"数据源管理",link:t+"/dataSource",enable:a.dataSource}],l=s.a.createElement("span",null,s.a.createElement(j.a,{style:{fontSize:"18px",color:"#2491F7",marginRight:"10px"},type:"api"}),s.a.createElement("span",{style:{fontSize:"14px",color:"#ffffff"}},"DTinsight.API"));return s.a.createElement(M.c,H()({logo:l,menuItems:o},this.props))}}]),t}(r.Component))||i,F=G,V=F,B=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(G,"Header","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/layout/header.js"),__REACT_HOT_LOADER__.register(F,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/layout/header.js")),function(e){function t(){return m()(this,t),f()(this,(t.__proto__||d()(t)).apply(this,arguments))}return k()(t,e),g()(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"laoding-wrapper",style:{zIndex:2005,position:"fixed"}},s.a.createElement("div",{className:"loading-center"},s.a.createElement("h1",{className:"loading-title"},"DTinsight API"),s.a.createElement("div",{className:"bouncywrap"},s.a.createElement("div",{className:"dotcon dc1"},s.a.createElement("div",{className:"dot"})),s.a.createElement("div",{className:"dotcon dc2"},s.a.createElement("div",{className:"dot"})),s.a.createElement("div",{className:"dotcon dc3"},s.a.createElement("div",{className:"dot"})))))}}]),t}(r.Component)),z=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(B,"GlobalLoading","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/layout/loading.js"),a(70)),q=a.n(z),K=a(66),Y=a.n(K),W=(a(203),a(76)),J=(a(242),a(155)),Q=a.n(J),X=(a(34),a(14)),$=a.n(X),Z=a(62);function ee(e){switch(e.status){case 402:case 200:return e;case 302:$.a.info("登录超时, 请重新登录！");case 500:$.a.error("网络异常");default:return e}}function te(e){switch(e.code){case 1:return e;case 0:return _e.openLogin(),q.a.reject(e);case 3:return Q.a.error({message:"权限通知",description:e.message}),q.a.reject(e);case 16:hashHistory.push("/");default:return e.message&&$.a.error(e.message,3),e}}function ae(){var e=N.a.getCookie("project_id");e&&"undefined"!==e||N.a.deleteCookie("project_id")}function ne(){return Z.a.get("session")}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ee,"authBeforeFormate","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/interceptor.js"),__REACT_HOT_LOADER__.register(te,"authAfterFormated","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/interceptor.js"),__REACT_HOT_LOADER__.register(ae,"isSelectedProject","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/interceptor.js"),__REACT_HOT_LOADER__.register(ne,"isLogin","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/interceptor.js"));var ie=function(){function e(){m()(this,e)}return g()(e,[{key:"get",value:function(e,t){var a=t?this.build(e,t):e;return this.request(a,{method:"GET"})}},{key:"post",value:function(e,t){var a={method:"POST"};return t&&(a.body=Y()(t)),this.request(e,a)}},{key:"postAsFormData",value:function(e,t){var a={method:"POST"};return t&&(a.body=this.buildFormData(t)),this.request(e,a)}},{key:"postForm",value:function(e,t){var a={method:"POST"};return t&&(a.body=new FormData(t)),this.request(e,a)}},{key:"request",value:function(e,t){return W.a.show(),t.credentials="same-origin",fetch(e,t).then(ee).then(function(e){return setTimeout(function(){W.a.hide()},300),e.json()}).then(te).catch(function(t){return W.a.hide(),console.error(e+":"+t),new q.a.reject(t)})}},{key:"defaultHeader",value:function(){return{Accept:"*/*","Content-Type":"application/json"}}},{key:"build",value:function(e,t){var a=[];if(t)for(var n in t)n&&a.push(n+"="+encodeURIComponent(t[n]));return e+"?"+a.join("&")}},{key:"buildFormData",value:function(e){if(e){var t=new FormData;for(var a in e)a&&t.append(a,e[a]);return t}}}]),e}(),re=new ie,se=re,oe=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ie,"Http","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/api/http.js"),__REACT_HOT_LOADER__.register(re,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/api/http.js")),a(7)),le={GET_ALL_MENU_LIST:oe.a+"/user/showMenuList",HANDLE_APPLY:oe.a+"/apply/handleApply",GET_ALL_APPLY_LIST:oe.a+"/apply/allApplyList",GET_ALL_API_LIST:oe.a+"/apis/listByConditionForAdmin",GET_DATASOURCE_BASE_INFO:oe.a+"/dataSource/listDataSourceBaseInfo",DELETE_API:oe.a+"/apis/deleteApi",UPDATE_API:oe.a+"/apis/updateApiStatus",GET_API_CALL_RANK:oe.a+"/apis/getApiCallUserRankList",GET_API_BUY_STATE:oe.a+"/apply/getApiApplyList",DELETE_CATAGORY:oe.a+"/catalogue/deleteCatalogue",ADD_CATAGORY:oe.a+"/catalogue/addCatalogue",UPDATE_CATAGORY:oe.a+"/catalogue/updateCatalogue",NEW_API:oe.a+"/apis/createApi",CHANGE_API:oe.a+"/apis/updateApi",GET_TABLE_BY_DATASOURCE:oe.a+"/dataSource/tablelist",GET_TABLE_COLUMNS_DETAIL:oe.a+"/dataSource/tablecolumn",GET_TABLE_PREVIEW_DATA:oe.a+"/dataSource/preview",GET_API_DETAIL_INFO:oe.a+"/apis/getApiInfo",GET_APPLY_LIST:oe.a+"/apply/userApplyList",UPDATE_APPLY_STATUS:oe.a+"/apply/updateApplyStatusForNormal",UPDATE_APPLY_STATUS_ADMIN:oe.a+"/apply/updateApplyStatusForManager",GET_USER_API_CALL_INFO:oe.a+"/apis/getApiCallInfoForNormal",GET_USER_API_CALL_INFO_ADMIN:oe.a+"/apis/getApiCallInfoForManager",GET_API_CALL_ERROR_INFO:oe.a+"/log/getApiCallErrorInfoForNormal",GET_API_CALL_ERROR_LOG:oe.a+"/log/queryApiCallLogForNormal",GET_API_CALL_ERROR_LOG_ADMIN:oe.a+"/log/queryApiCallLogForManager",GET_API_CALL_URL:oe.a+"/apis/getApiCallUrl",GET_API_CREATOR_INFO:oe.a+"/apis/getApiCreatorInfo",GET_CATALOGUE:oe.a+"/catalogue/getCatalogue",GET_API_MARKET_LIST:oe.a+"/apis/listByCondition",GET_MARKET_API_DETAIL:oe.a+"/apis/getApiDetail",GET_API_EXT_INFO:oe.a+"/apis/getApiExtInfoForNormal",GET_API_EXT_INFO_ADMIN:oe.a+"/apis/getApiExtInfoForManager",APPLY_API:oe.a+"/apply/apiApply",GET_MARKET_TOP_CALL_FUNC:oe.a+"/apis/listApiCallNumTopNForManager",GET_API_FAIL_RANK:oe.a+"/apis/listApiCallFailRateTopNForNormal",GET_API_FAIL_RANK_ADMIN:oe.a+"/apis/listApiCallFailRateTopNForManager",GET_API_CALL_INFO:oe.a+"/apis/getApiCallInfoForNormal",GET_USER_API_CALL_RANK:oe.a+"/apis/listApiCallNumTopN",GET_USER_API_SUB_INFO:oe.a+"/apply/getApiSubscribe",GET_MARKET_API_CALL_RANK:oe.a+"/apis/listUserCallTopN",GET_API_CALL_ERROR_INFO_ADMIN:oe.a+"/log/getApiCallErrorInfoForManager",GET_MARKET_API_APPLY_INFO:oe.a+"/apply/getApplyCount",DA_GET_USER_BY_ID:oe.a+"/user/getUserById",DA_GET_USER_AUTH_BY_ID:oe.a+"/user/getUserById",GET_DATA_SOURCES:oe.a+"/dataSource/pageQuery",CHECK_CONNECTION:oe.a+"/dataSource/checkConnection",ADD_DATA_SOURCES:oe.a+"/dataSource/addSource",UPDATE_DATA_SOURCES:oe.a+"/dataSource/updateSource",DELETE_DATA_SOURCES:oe.a+"/dataSource/deleteSource",GET_DATA_SOURCES_LIST:oe.a+"/dataSource/list",GET_DATA_SOURCES_TYPE:oe.a+"/dataSource/getTypes",GET_DATA_SOURCES_TABLE:oe.a+"/dataSource/tablelist",GET_DATA_SOURCES_COLUMN:oe.a+"/dataSource/tablecolumn",GET_DATA_SOURCES_PART:oe.a+"/dataSource/getPartValue",GET_DATA_SOURCES_PREVIEW:oe.a+"/dataSource/preview"},ce=le,pe=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(le,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/reqUrls.js"),APP_CONF.UIC_URL||""),ue=APP_CONF.UIC_DOMAIN||"",de={logout:function(){var e=this;se.post(ce.APP_LOGOUT).then(function(t){1===t.code&&e.openLogin()})},openLogin:function(){Z.a.clear(),N.a.deleteCookie("dt_user_id",ue,"/"),N.a.deleteCookie("dt_token",ue,"/"),N.a.deleteCookie("dt_tenant_id",ue,"/"),N.a.deleteCookie("dt_tenant_name",ue,"/"),N.a.deleteCookie("dt_username",ue,"/"),N.a.deleteCookie("dt_is_tenant_admin",ue,"/"),N.a.deleteCookie("dt_is_tenant_creator",ue,"/"),N.a.deleteCookie("project_id",ue,"/"),window.location.href=pe+"/#/login"},getLoginedUser:function(){return se.post(ce.DA_GET_USER_BY_ID)},getUserList:function(){return se.post(ce.DATA_API_GET_USER_LIST)}},_e=de,me=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(pe,"UIC_URL_TARGET","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/api/user.js"),__REACT_HOT_LOADER__.register(ue,"UIC_DOMAIN_URL","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/api/user.js"),__REACT_HOT_LOADER__.register(de,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/api/user.js")),a(42)),he=a.n(me)()(["GET_USER","UPDATE_USER","GET_NOT_PROJECT_USERS","GET_PROJECT_USERS","GET_USER_LIST"],{prefix:"user/"}),ge=he,Ae=ge;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(he,"userActions","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/userActions.js"),__REACT_HOT_LOADER__.register(ge,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/userActions.js"));function fe(){return function(e){_e.getLoginedUser().then(function(t){if(1===t.code)return e({type:Ae.GET_USER,data:t.data})})}}function Ee(e){return{type:Ae.UPDATE_USER,data:e}}function ke(e){return function(t){_e.getUserList(e).then(function(e){1===e.code&&t({type:Ae.GET_USER_LIST,data:e.data})})}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(fe,"getUser","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/actions/user.js"),__REACT_HOT_LOADER__.register(Ee,"updateUser","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/actions/user.js"),__REACT_HOT_LOADER__.register(ke,"getUserList","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/actions/user.js"));var be,Te=a(232),ye={getUserList:function(){return se.post(ce.DQ_GET_USER_LIST)},getMenuList:function(){return se.post(ce.GET_ALL_MENU_LIST)}},ve=ye,Ce=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ye,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/api/common.js"),{getUserList:function(e){return function(t){ve.getUserList(e).then(function(e){1===e.code&&t({type:Te.a.GET_USER_LIST,payload:e.data})})}},getMenuList:function(){return function(e){ve.getMenuList().then(function(t){1===t.code&&e({type:Te.a.GET_ALL_MENU_LIST,payload:t.data})})}}}),we=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Ce,"commonActions","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/actions/common.js"),a(169)),De={children:I.a.node},Oe={children:[]},Re=function(e){return{common:e.common}},xe=Object(T.b)(Re)(be=function(e){function t(){return m()(this,t),f()(this,(t.__proto__||d()(t)).apply(this,arguments))}return k()(t,e),g()(t,[{key:"componentWillMount",value:function(){(0,this.props.dispatch)(Ce.getMenuList())}},{key:"componentDidMount",value:function(){var e=this.props.dispatch;e(fe()),e(Object(we.a)(oe.f))}},{key:"render",value:function(){var e=this.props.children,t=s.a.createElement(V,null);return this.props.common.menuList||(e=s.a.createElement(B,null),t=null),s.a.createElement("div",{className:"main"},t,s.a.createElement("div",{className:"container"},e||"加载中...."))}}]),t}(r.Component))||be;xe.propTypes=De,xe.defaultProps=Oe;var Se=xe,Le=Se,Ie=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(De,"propType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/index.js"),__REACT_HOT_LOADER__.register(Oe,"defaultPro","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/index.js"),__REACT_HOT_LOADER__.register(Re,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/index.js"),__REACT_HOT_LOADER__.register(xe,"Main","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/index.js"),__REACT_HOT_LOADER__.register(Se,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/index.js")),a(132),a(33)),Ne=a.n(Ie),Pe=a(10),He=a(86),Ue=(a(51),a(28)),je=a.n(Ue),Me=(a(50),a(27)),Ge=a.n(Me),Fe=function(e){function t(){return m()(this,t),f()(this,(t.__proto__||d()(t)).apply(this,arguments))}return k()(t,e),g()(t,[{key:"render",value:function(){return s.a.createElement(je.a,{noHovering:!0,style:{height:363}},s.a.createElement(Ge.a,{rowKey:function(e){return e.userId},className:"m-table",rowClassName:function(){return"h-33"},pagination:!1,columns:[{title:"排名",dataIndex:"rank",key:"rank",className:"color-666",render:function(e,t,a){return s.a.createElement("span",{className:"rank-number rank-number_"+(a+1)},a+1)}},{title:"用户",dataIndex:"userName",key:"userName",className:"color-666"},{title:"调用次数",dataIndex:"callNum",key:"callNum",className:"color-666"}],dataSource:this.props.data||[],onChange:this.onTableChange}))}}]),t}(r.Component),Ve=Fe,Be=Ve,ze=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Fe,"TopCall","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/topCall.js"),__REACT_HOT_LOADER__.register(Ve,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/topCall.js")),function(e){function t(){return m()(this,t),f()(this,(t.__proto__||d()(t)).apply(this,arguments))}return k()(t,e),g()(t,[{key:"getDataSource",value:function(){return this.props.data||[]}},{key:"openNewDetail",value:function(e){this.props.router.push({pathname:"/api/manage/detail/"+e})}},{key:"render",value:function(){var e=this;return s.a.createElement(je.a,{noHovering:!0,title:this.props.noTitle?"":"失败率TOP10",style:{height:this.props.cardHeight||403},className:"shadow"},s.a.createElement(Ge.a,{rowKey:function(e){return e.id},className:"m-table",rowClassName:function(){return"h-33"},pagination:!1,columns:[{title:"排名",dataIndex:"rank",key:"rank",className:"color-666",render:function(e,t,a){return s.a.createElement("span",{className:"rank-number rank-number-fail_"+(a+1)},a+1)}},{title:"接口",dataIndex:"apiName",key:"apiName",className:"color-666",render:function(t,a){return s.a.createElement("a",{onClick:e.openNewDetail.bind(e,a.id)},t)}},{title:"调用次数",dataIndex:"callNum",key:"callNum",className:"color-666"},{title:"失败率",dataIndex:"failRate",key:"failRate",className:"color-666",render:function(e){return e+"%"}}],dataSource:this.getDataSource(),onChange:this.onTableChange}))}}]),t}(r.Component)),qe=ze,Ke=qe,Ye=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ze,"TopFail","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/topFail.js"),__REACT_HOT_LOADER__.register(qe,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/topFail.js")),{MYSQL:1,ORACLE:2,SQLSERVER:3,HDFS:6,HIVE:7,HBASE:8,FTP:9,MAXCOMPUTE:10}),We={"-1":"NO_APPLY",0:"IN_HAND",1:"PASS",2:"REJECT",3:"STOPPED",4:"DISABLE"},Je={"-1":"nothing",0:"inhand",1:"success",2:"notPass",3:"stop",4:"disabled"},Qe={0:"notApproved",1:"pass",2:"rejected",3:"stop",4:"disabled"},Xe={0:"success",1:"stop"},$e=["未知类型","MySql","Oracle","SQLServer","PostgreSQL","RDBMS","HDFS","Hive","HBase","FTP","MaxCompute"],Ze={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},et={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}},tt={labelCol:{span:0},wrapperCol:{span:24}},at={title:{text:"堆叠区域图",textStyle:{fontSize:12},textAlign:"left"},tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985"}}},color:["#2491F7","#7460EF","#26DAD2","#79E079","#7A64F3","#FFDC53","#9a64fb"],legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},toolbox:{feature:{saveAsImage:{show:!1}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{show:!0},axisLine:{lineStyle:{color:"#DDDDDD"}},axisLabel:{textStyle:{color:"#666666"}},nameTextStyle:{color:"#666666"},splitLine:{color:"#666666"}}],yAxis:[{type:"value",axisLabel:{formatter:"{value} 个",textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",nameGap:20,axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#DDDDDD",type:"dashed"}}}],series:[]},nt={tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985"}}},color:["#2491F7","#7460EF","#26DAD2","#79E079","#7A64F3","#FFDC53","#9a64fb"],legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},toolbox:{feature:{saveAsImage:{show:!1}}},grid:{left:"3%",right:"4%",bottom:"30",top:40,containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{show:!0},axisLine:{lineStyle:{color:"#DDDDDD"}},axisLabel:{textStyle:{color:"#666666"}},nameTextStyle:{color:"#666666"},splitLine:{color:"#666666"}}],yAxis:[{nameGap:25,type:"value",name:"调用次数",axisLabel:{textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",axisLine:{show:!1},axisTick:{show:!1},splitLine:!1,minInterval:1},{nameGap:25,type:"value",name:"失败率 (%)",axisLabel:{textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#DDDDDD",type:"dashed"}},max:100}],series:[]},it={tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {c} ({d}%)"},legend:{orient:"horizontal",x:"center",y:"bottom",data:["参数错误","调用超时","异常访问","超出限额","禁用","其他"],itemWidth:5,itemHeight:5,textStyle:{color:"#666"}},series:[{name:"错误类型",type:"pie",radius:["35%","55%"],avoidLabelOverlap:!1,label:{normal:{show:!1,position:"center"}},labelLine:{normal:{show:!1}},data:[{value:335,name:"参数错误",itemStyle:{normal:{color:"#1C86EE"}}},{value:310,name:"调用超时",itemStyle:{normal:{color:"#EE9A00"}}},{value:234,name:"异常访问",itemStyle:{normal:{color:"#EE4000"}}},{value:535,name:"超出限额",itemStyle:{normal:{color:"#40E0D0"}}},{value:1158,name:"禁用",itemStyle:{normal:{color:"#71C671"}}},{value:548,name:"其他",itemStyle:{normal:{color:"#A2B5CD"}}}]}]},rt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ye,"DATA_SOURCE","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(We,"API_STATUS","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(Je,"EXCHANGE_API_STATUS","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(Qe,"EXCHANGE_APPLY_STATUS","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(Xe,"EXCHANGE_ADMIN_API_STATUS","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register($e,"dataSourceTypes","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(Ze,"formItemLayout","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(et,"tailFormItemLayout","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(tt,"rowFormItemLayout","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(at,"lineAreaChartOptions","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(nt,"doubleLineAreaChartOptions","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/index.js"),__REACT_HOT_LOADER__.register(it,"pieOption","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/index.js")),a(71));a(659),a(213),a(134),a(133);var st=[{code:"disable",name:"禁用",color:"#71C671"},{code:"unauthorize",name:"未认证",color:"#EE4000"},{code:"paramerror",name:"参数错误",color:"#1C86EE"},{code:"timeout",name:"超时",color:"#EE9A00"},{code:"outlimit",name:"超出限制",color:"#40E0D0"},{code:"other",name:"其他",color:"#A2B5CD"}],ot=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={},n.resize=function(){var e;return(e=n).__resize__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this.props.chartData||[];this.intPie(e)}},{key:"__resize__REACT_HOT_LOADER__",value:function(){this.state.pieChart&&this.state.pieChart.resize()}},{key:"componentWillReceiveProps",value:function(e){this.props.chartData!=e.chartData&&this.intPie(e.chartData)}},{key:"intPie",value:function(e){for(var t=[],a=[],n=0;n<e.length;n++){var i=e[n],r=st[i.type-1];r&&t.indexOf(r.name)<0&&(t.push(r.name),a.push({value:i.callNum,name:r.name,itemStyle:{normal:{color:r.color}}}))}var s=rt.init(document.getElementById("ErrorDistributedPie")),o=Object(Pe.cloneDeep)(it);o.legend.data=t,o.series[0].data=a,s.setOption(o),this.setState({pieChart:s})}},{key:"render",value:function(){return s.a.createElement(je.a,{noHovering:!0,title:"错误类型分布",style:{height:403},className:"shadow"},s.a.createElement(He.a,{onResize:this.resize.bind(this)},s.a.createElement("article",{id:"ErrorDistributedPie",style:{width:"100%",height:"300px"}})))}}]),t}(r.Component),lt=ot,ct=lt,pt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(st,"errorDic","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/errorDistributed.js"),__REACT_HOT_LOADER__.register(ot,"ErrorDistributed","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/errorDistributed.js"),__REACT_HOT_LOADER__.register(lt,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/errorDistributed.js")),a(82)),ut={getApiCallInfoForNormal:function(e){return se.post(ce.GET_API_CALL_INFO,e)},getApiCallInfoForManager:function(e){return se.post(ce.GET_USER_API_CALL_INFO_ADMIN,e)},listApiCallFailRateTopNForNormal:function(e){return se.post(ce.GET_API_FAIL_RANK,e)},listApiCallFailRateTopNForManager:function(e){return se.post(ce.GET_API_FAIL_RANK_ADMIN,e)},getApiCallNumTopN:function(e){return se.post(ce.GET_USER_API_CALL_RANK,e)},getApiSubscribe:function(e){return se.post(ce.GET_USER_API_SUB_INFO,e)},getUserCallTopN:function(e){return se.post(ce.GET_MARKET_API_CALL_RANK,e)},getApiCallErrorInfoForNormal:function(e){return se.post(ce.GET_API_CALL_ERROR_INFO,e)},getApiCallErrorInfoForManager:function(e){return se.post(ce.GET_API_CALL_ERROR_INFO_ADMIN,e)},getApplyCount:function(e){return se.post(ce.GET_MARKET_API_APPLY_INFO,e)},listApiCallNumTopNForManager:function(e){return se.post(ce.GET_MARKET_TOP_CALL_FUNC,e)}},dt=ut,_t=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ut,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/api/dashBoard.js"),{chooseUserDate:function(e,t){return function(a){a({type:pt.a.CHOOSE_USER_DATE,payload:e}),a(_t.getApiCallInfo({time:e},!1,e)),a(_t.getApiCallFailRateTopN({time:e,topn:t},!1,e)),a(_t.getApiCallNumTopN({time:e,topn:t},e)),a(_t.getApiSubscribe(e))}},chooseAdminDate:function(e,t){return function(a){a({type:pt.a.CHOOSE_ADMIN_DATE,payload:e}),a(_t.getApiCallErrorInfo(e)),a(_t.getApiCallInfo({time:e},!0,e)),a(_t.getApprovedMsgCount()),a(_t.getUserCallTopN({time:e,topn:t},!0,e)),a(_t.getApiCallFailRateTopN({time:e,topn:t},!0,e)),a(_t.listApiCallNumTopNForManager({time:e,topn:t}))}},getApiCallInfo:function(e,t,a){var n="getApiCallInfoForNormal",i=pt.a.GET_USER_CALL_INFO;return t&&(n="getApiCallInfoForManager",e.useAdmin=!0,i=pt.a.GET_MARKET_CALL_INFO),function(t){dt[n](e).then(function(e){1===e.code&&t({type:i,payload:{callCount:e.data.callCount,failPercent:e.data.failRate,apiNum:e.data.apiNum,infoList:e.data.infoList},date:a})})}},getApprovedMsgCount:function(){return function(e){dt.getApplyCount({status:0}).then(function(t){1===t.code&&e({type:pt.a.GET_MARKET_API_APPLY_INFO,payload:t.data})})}},getUserCallTopN:function(e,t,a){e.useAdmin=!0;var n=pt.a.GET_MARKET_API_CALL_RANK;return function(t){dt.getUserCallTopN(e).then(function(e){1===e.code&&t({type:n,payload:e.data,date:a})})}},getApiCallFailRateTopN:function(e,t,a){var n="listApiCallFailRateTopNForNormal",i=pt.a.GET_API_FAIL_RANK;return t&&(n="listApiCallFailRateTopNForManager",e.useAdmin=!0,i=pt.a.GET_MARKET_API_FAIL_RANK),function(t){dt[n](e).then(function(e){1===e.code&&t({type:i,payload:e.data,date:a})})}},getApiSubscribe:function(e){return function(t){dt.getApiSubscribe().then(function(a){1===a.code&&t({type:pt.a.GET_USER_API_SUB_INFO,payload:a.data,date:e})})}},getApiCallNumTopN:function(e,t){return function(a){dt.getApiCallNumTopN(e).then(function(e){1===e.code&&a({type:pt.a.GET_USER_API_CALL_RANK,payload:e.data,date:t})})}},getApiCallErrorInfo:function(e){return function(t){dt.getApiCallErrorInfoForManager({time:e}).then(function(a){if(1===a.code){var n=a.data&&a.data.recordInfoList||[];t({type:pt.a.GET_MARKET_API_ERROR_INFO,payload:n,date:e})}})}},listApiCallNumTopNForManager:function(e){return function(t){dt.listApiCallNumTopNForManager(e).then(function(a){if(1===a.code){var n=a.data||[];t({type:pt.a.GET_MARKET_TOP_CALL_FUNC,payload:n,date:e.time})}})}}}),mt=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(_t,"dashBoardActions","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/actions/dashBoard/index.js"),a(84),a(43)),ht=a.n(mt),gt=(a(61),a(29)),At=a.n(gt),ft=(a(68),a(23)),Et=a.n(ft),kt=(a(565),a(254)),bt=a.n(kt),Tt=(a(80),a(41)),yt=a.n(Tt),vt=function(e){function t(){return m()(this,t),f()(this,(t.__proto__||d()(t)).apply(this,arguments))}return k()(t,e),g()(t,[{key:"getDataSource",value:function(){return this.props.data||[]}},{key:"openNewDetail",value:function(e){this.props.idAdmin?this.props.router.push({pathname:"/api/manage/detail/"+e}):this.props.router.push({pathname:"/api/mine/approved",query:{apiId:e}})}},{key:"render",value:function(){var e=this;return s.a.createElement(je.a,{noHovering:!0,style:{height:363}},s.a.createElement(Ge.a,{rowKey:function(e){return e.id},className:"m-table",rowClassName:function(){return"h-33"},pagination:!1,columns:[{title:"排名",dataIndex:"rank",key:"rank",className:"color-666",render:function(e,t,a){return s.a.createElement("span",{className:"rank-number rank-number_"+(a+1)},a+1)}},{title:"接口",dataIndex:"apiName",key:"apiName",className:"color-666",render:function(t,a){return s.a.createElement("a",{onClick:e.openNewDetail.bind(e,a.id)},t)}},{title:"调用次数",dataIndex:"callNum",key:"callNum",className:"color-666"},{title:"失败率",dataIndex:"failRate",key:"failRate",className:"color-666",render:function(e){return e+"%"}}],dataSource:this.getDataSource(),onChange:this.onTableChange}))}}]),t}(r.Component),Ct=vt,wt=Ct,Dt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(vt,"TopCall","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/topCallFunc.js"),__REACT_HOT_LOADER__.register(Ct,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/topCallFunc.js")),a(71));a(141),a(213),a(134),a(133);var Ot,Rt=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={},n.resize=function(){var e;return(e=n).__resize__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this.props.chartData||[];this.initLineChart(e)}},{key:"__resize__REACT_HOT_LOADER__",value:function(){this.state.lineChart&&this.state.lineChart.resize()}},{key:"componentWillReceiveProps",value:function(e){this.props.chartData!=e.chartData&&this.initLineChart(e.chartData)}},{key:"initLineChart",value:function(e){for(var t=[],a=[],n=[],i=0;i<e.length;i++)if(t.push(e[i].callCount),a.push(e[i].failRate),this.props.date)switch(this.props.date){case"1":n.push(N.a.formatHours(e[i].time));break;case"7":n.push(N.a.formatDateHours(e[i].time));break;case"30":n.push(N.a.formatDate(e[i].time))}var r=Dt.init(document.getElementById("CallGraph")),s=Object(Pe.cloneDeep)(nt);s.tooltip.formatter=function(e){for(var t=e[0].name,a=0,n=e.length;a<n;a++){var i="次";"失败率"==e[a].seriesName&&(i="%"),t+='<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e[a].color+'"></span>'+e[a].seriesName+" : "+e[a].value+i}return t},s.series=[{name:"调用次数",data:t,type:"line",smooth:!0,itemStyle:{normal:{color:"#1C86EE"}}},{name:"失败率",data:a,type:"line",smooth:!0,yAxisIndex:1,itemStyle:{normal:{color:"#EE0000"}}}],s.xAxis[0].data=n,console.log(s),r.setOption(s),this.setState({lineChart:r})}},{key:"render",value:function(){return s.a.createElement(je.a,{noHovering:!0,className:"shadow"},s.a.createElement(At.a,{style:{width:"100%"},gutter:130,className:"m-count padding-l20 height-101"},s.a.createElement(Et.a,{span:6},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:150}},s.a.createElement("span",{className:"m-count-title text-left"},"累计调用"),s.a.createElement("span",{className:"m-count-content font-black text-left"},this.props.callCount||0,s.a.createElement("span",{style:{fontSize:12}},"次")))),s.a.createElement(Et.a,{span:4},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:100}},s.a.createElement("span",{className:"m-count-title text-left"},"失败率"),s.a.createElement("span",{className:"m-count-content font-red text-left"},this.props.failPercent||0,s.a.createElement("span",{style:{fontSize:12}},"%")))),this.props.userView?null:s.a.createElement(Et.a,{span:6},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:150}},s.a.createElement("span",{className:"m-count-title text-left"},"接口总数"),s.a.createElement("span",{className:"m-count-content font-black text-left"},this.props.apiNum||"---")))),s.a.createElement(He.a,{onResize:this.resize.bind(this)},s.a.createElement("article",{id:"CallGraph",style:{width:"100%",height:"300px"}})))}}]),t}(r.Component),xt=Rt,St=xt,Lt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Rt,"TopCall","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/overView.js"),__REACT_HOT_LOADER__.register(xt,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/overView.js")),yt.a.Button),It=yt.a.Group,Nt=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={nowView:"callTop"},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.props.chooseAdminDate(10,{target:{value:this.props.dashBoard.adminDate}})}},{key:"topViewChange",value:function(e){this.setState({nowView:e})}},{key:"getDateChoose",value:function(){return this.props.dashBoard.adminDate||"1"}},{key:"render",value:function(){var e=this.props.dashBoard.approvedMsgCount>0?s.a.createElement(bt.a,{message:s.a.createElement("span",null,"您有",this.props.dashBoard.approvedMsgCount,"条未处理的Api申请，请您及时处理。",s.a.createElement(b.c,{to:"/api/approval?status=0"},"立即审批")," "),type:"warning"}):null,t=this.props.dashBoard.marketOverview[this.getDateChoose()];return s.a.createElement("div",null,s.a.createElement("div",{className:"padding_t14_lr20"},e),s.a.createElement("div",{className:"box-title m-radio-group"},s.a.createElement("span",null,"调用情况"),s.a.createElement(It,{defaultValue:this.getDateChoose(),className:"no-bd nobackground",onChange:this.props.chooseAdminDate.bind(this,10),style:{marginTop:"8.5px",float:"right"}},s.a.createElement(Lt,{value:"1"},"最近24小时"),s.a.createElement(Lt,{value:"7"},"最近7天"),s.a.createElement(Lt,{value:"30"},"最近30天"))),s.a.createElement("div",{className:"box-card m-card"},s.a.createElement(At.a,{gutter:20},s.a.createElement(Et.a,{span:24},s.a.createElement(St,{date:this.props.dashBoard.adminDate,chartData:t.callInfo.infoList,callCount:t.callInfo.callCount,apiNum:t.callInfo.apiNum,failPercent:t.callInfo.failPercent}))),s.a.createElement(At.a,{className:"m-card-small margin-t20",gutter:20},s.a.createElement(Et.a,{span:8,className:"m-card-small m-tabs noheight"},s.a.createElement(ht.a,{defaultActiveKey:this.state.nowView,onChange:this.topViewChange.bind(this),className:"shadow"},s.a.createElement(ht.a.TabPane,{tab:"调用用户Top10",key:"callTop"},s.a.createElement(Be,{data:t.callCountTop})),s.a.createElement(ht.a.TabPane,{tab:"调用量Top10",key:"callFuncTop"},s.a.createElement(wt,{idAdmin:!0,router:this.props.router,data:t.topCallFunc})))),s.a.createElement(Et.a,{span:8},s.a.createElement(ct,{chartData:t.failInfoList})),s.a.createElement(Et.a,{span:8},s.a.createElement(Ke,{router:this.props.router,data:t.callFailTop})))))}}]),t}(r.Component),Pt=Nt,Ht=Pt,Ut=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Lt,"RadioButton","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/adminDashboard.js"),__REACT_HOT_LOADER__.register(It,"RadioGroup","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/adminDashboard.js"),__REACT_HOT_LOADER__.register(Nt,"AdminDashboard","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/adminDashboard.js"),__REACT_HOT_LOADER__.register(Pt,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/adminDashboard.js")),function(e){function t(){return m()(this,t),f()(this,(t.__proto__||d()(t)).apply(this,arguments))}return k()(t,e),g()(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"box-mid"},s.a.createElement(j.a,{type:"shop",style:{fontSize:100,color:"#94A8C6"}}),s.a.createElement("br",null),s.a.createElement("span",{className:"color-666 font-14 margin-t14 block"},"您还没有订购任何Api，您可以进入 ",s.a.createElement(b.c,{to:"/api/market"},"Api市场")," 进行订购"))}}]),t}(r.Component)),jt=Ut,Mt=jt,Gt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ut,"HaveNoApi","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/haveNoApi.js"),__REACT_HOT_LOADER__.register(jt,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/haveNoApi.js")),yt.a.Button),Ft=yt.a.Group,Vt=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={nowView:"callTop"},n.getView=function(){var e;return(e=n).__getView__REACT_HOT_LOADER__.apply(e,arguments)},n.getMainView=function(){var e;return(e=n).__getMainView__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.props.chooseUserDate(10,{target:{value:this.props.dashBoard.userDate}})}},{key:"topViewChange",value:function(e){this.setState({nowView:e})}},{key:"getDateChoose",value:function(){return this.props.dashBoard.userDate||"1"}},{key:"isApiExist",value:function(){return!0}},{key:"__getView__REACT_HOT_LOADER__",value:function(){return this.isApiExist()?this.getMainView():s.a.createElement(Mt,null)}},{key:"__getMainView__REACT_HOT_LOADER__",value:function(){var e=this.props.dashBoard.userOverview[this.getDateChoose()];return s.a.createElement("div",null,s.a.createElement("div",{className:"box-title m-radio-group"},s.a.createElement("span",null,"调用情况"),s.a.createElement(Ft,{defaultValue:this.getDateChoose(),className:"no-bd nobackground",onChange:this.props.chooseUserDate.bind(this,10),style:{marginTop:"8.5px",float:"right"}},s.a.createElement(Gt,{value:"1"},"最近24小时"),s.a.createElement(Gt,{value:"7"},"最近7天"),s.a.createElement(Gt,{value:"30"},"最近30天"))),s.a.createElement("div",{className:"box-card m-card"},s.a.createElement(At.a,{gutter:20},s.a.createElement(Et.a,{span:16},s.a.createElement(St,{userView:!0,mini:!0,date:this.props.dashBoard.userDate,chartData:e.callInfo.infoList,callCount:e.callInfo.callCount,topCallFunc:e.callInfo.callTopAPI,failPercent:e.callInfo.failPercent})),s.a.createElement(Et.a,{span:8,className:"m-card-small  m-tabs noheight"},s.a.createElement(ht.a,{style:{borderTop:"1px #dcdcdc solid"},defaultActiveKey:this.state.nowView,onChange:this.topViewChange.bind(this),className:"shadow"},s.a.createElement(ht.a.TabPane,{tab:"调用量Top10",key:"callTop"},s.a.createElement(wt,{router:this.props.router,data:e.callCountTop})),s.a.createElement(ht.a.TabPane,{tab:"错误率Top10",key:"failTop"},s.a.createElement(Ke,{router:this.props.router,cardHeight:"363",noTitle:!0,data:e.callFailTop}))))),s.a.createElement(At.a,{className:"m-card-small margin-t20",gutter:20},s.a.createElement(Et.a,{span:16},s.a.createElement(je.a,{noHovering:!0,title:"订购情况",className:"shadow"},s.a.createElement(At.a,{className:"m-count height-101",justify:"space-around",type:"flex"},s.a.createElement(Et.a,{span:8},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:100}},s.a.createElement("span",{className:"m-count-title "},"审批中"),s.a.createElement("span",{className:"m-count-content font-organge "},e.approvalInfo.approvingNum))),s.a.createElement(Et.a,{span:8},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:100}},s.a.createElement("span",{className:"m-count-title "},"审批通过"),s.a.createElement("span",{className:"m-count-content font-green "},e.approvalInfo.approvedNum))),s.a.createElement(Et.a,{span:8},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:150}},s.a.createElement("span",{className:"m-count-title "},"已禁用和已停用接口"),s.a.createElement("span",{className:"m-count-content font-gray "},e.approvalInfo.stoppedNum)))))))))}},{key:"render",value:function(){return s.a.createElement("div",null,this.getView())}}]),t}(r.Component),Bt=Vt,zt=Bt;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Gt,"RadioButton","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/userDashboard.js"),__REACT_HOT_LOADER__.register(Ft,"RadioGroup","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/userDashboard.js"),__REACT_HOT_LOADER__.register(Vt,"UserDashboard","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/userDashboard.js"),__REACT_HOT_LOADER__.register(Bt,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/userDashboard.js")),a(71);a(141),a(213),a(134),a(133);var qt,Kt,Yt=function(e){return{dashBoard:e.dashBoard,user:e.user,common:e.common}},Wt=function(e){return{chooseUserDate:function(t,a){e(_t.chooseUserDate(a.target.value,t))},chooseAdminDate:function(t,a){e(_t.chooseAdminDate(a.target.value,t))},getApiCallInfo:function(t,a,n){e(_t.getApiCallInfo(t,a,n))},getApprovedMsgCount:function(){e(_t.getApprovedMsgCount())},getUserCallTopN:function(t,a,n){e(_t.getUserCallTopN({topn:t,time:n},a,n))},getApiCallFailRateTopN:function(t,a,n){e(_t.getApiCallFailRateTopN({topn:t,time:n},a,n))},getApiSubscribe:function(t){e(_t.getApiSubscribe(t))},getApiCallErrorInfo:function(t){e(_t.getApiCallErrorInfo(t))},listApiCallNumTopNForManager:function(t){e(_t.listApiCallNumTopNForManager({topn:10,time:t}))}}},Jt=Object(T.b)(Yt,Wt)(Ot=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={dashBoardView:""},n.handleClick=function(){var e;return(e=n).__handleClick__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentWillReceiveProps",value:function(e){var t=this.props.dashBoard.alarmTrend,a=e.dashBoard.alarmTrend;Object(Pe.isEmpty)(t)&&!Object(Pe.isEmpty)(a)&&this.initLineChart(a)}},{key:"isAdmin",value:function(){return(this.props.common.menuList||[]).indexOf("overview_market_menu")>-1}},{key:"getNowView",value:function(){return this.isAdmin()?this.state.dashBoardView?this.state.dashBoardView:"overView":"MyView"}},{key:"getDashBoardView",value:function(){return"overView"==this.getNowView()?s.a.createElement(Ht,this.props):s.a.createElement(zt,this.props)}},{key:"__handleClick__REACT_HOT_LOADER__",value:function(e){this.setState({dashBoardView:e.key})}},{key:"getMenuView",value:function(){return this.isAdmin()?s.a.createElement(Ne.a,{className:"margin-0-20",onClick:this.handleClick,selectedKeys:[this.getNowView()],mode:"horizontal"},s.a.createElement(Ne.a.Item,{key:"overView"},"市场概览"),s.a.createElement(Ne.a.Item,{key:"MyView"},"我的API")):null}},{key:"render",value:function(){this.props.children;return s.a.createElement("div",{className:"dashboard nobackground"},this.getMenuView(),this.getDashBoardView())}}]),t}(r.Component))||Ot,Qt=Jt,Xt=Qt,$t=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Yt,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/index.js"),__REACT_HOT_LOADER__.register(Wt,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/index.js"),__REACT_HOT_LOADER__.register(Jt,"Dashboard","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/index.js"),__REACT_HOT_LOADER__.register(Qt,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dashboard/index.js")),a(54),a(30)),Zt=a.n($t),ea=(a(45),a(20)),ta=a.n(ea),aa=(a(49),a(18)),na=a.n(aa),ia=(a(40),a(15)),ra=a.n(ia),sa=a(557),oa={allApplyList:function(e){return se.post(ce.GET_ALL_APPLY_LIST,e)},handleApply:function(e){return se.post(ce.HANDLE_APPLY,e)}},la=oa,ca=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(oa,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/api/approval.js"),{allApplyList:function(e){return function(t){return la.allApplyList(e).then(function(e){if(1===e.code)return t({type:sa.a.GET_ALL_APPLY_LIST,payload:e.data.data}),e})}},handleApply:function(e){return function(t){return la.handleApply(e).then(function(e){if(1===e.code)return e})}}}),pa=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ca,"approvalActions","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/actions/approval/index.js"),ra.a.TextArea),ua=ra.a.Search,da=na.a.Item,_a={applyTime:"gmt_modified"},ma={ascend:"asc",descend:"desc"},ha=function(e){var t=e.user;return{approval:e.approval,apiManage:e.apiManage,user:t}},ga=function(e){return{approvalList:function(t){return e(ca.allApplyList(t))},handleApply:function(t){return e(ca.handleApply(t))}}},Aa=Object(T.b)(ha,ga)(qt=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={pageIndex:1,spVisible:!1,msgVisible:!1,data:[],sorter:{},filter:{status:null},userName:"",applyContent:"",replyContent:"",apiName:"",spApplyMsg:{},total:0},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var e=this,t=this.props.router.location.query&&this.props.router.location.query.status,a=[];t&&a.push(t.toString()),this.setState({filter:{status:a&&a.length>0?a:null}},function(){e.getApprovalList()})}},{key:"getApprovalList",value:function(){var e=this;this.props.approvalList({userName:this.state.userName,status:this.state.filter.status&&this.state.filter.status[0],currentPage:this.state.pageIndex,pageSize:20,sort:ma[this.state.sorter.order],orderBy:_a[this.state.sorter.columnKey],apiName:this.state.apiName}).then(function(t){t&&e.setState({total:t.data.totalCount})})}},{key:"handleSearch",value:function(e){var t=this;this.setState({userName:e,pageIndex:1},function(){t.getApprovalList()})}},{key:"handleApiSearch",value:function(e){var t=this;this.setState({apiName:e,pageIndex:1},function(){t.getApprovalList()})}},{key:"onSourceChange",value:function(){}},{key:"handleCancel",value:function(){this.setState({spVisible:!1,msgVisible:!1})}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,filter:t,sorter:a},function(){n.getApprovalList()})}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:this.state.total}}},{key:"getDealType",value:function(e){return{notApproved:"立即审批",pass:"查看详情",rejected:"查看详情",stop:"查看详情",disabled:"查看详情"}[e||"nothing"]}},{key:"deal",value:function(e){var t=this["deal"+Qe[e.status]];t&&t.call(this,e)}},{key:"dealrejected",value:function(e){this.lookDetail(e)}},{key:"dealstop",value:function(e){this.lookDetail(e)}},{key:"dealdisabled",value:function(e){this.lookDetail(e)}},{key:"dealpass",value:function(e){this.lookDetail(e)}},{key:"dealnotApproved",value:function(e){this.spShow(e)}},{key:"getSource",value:function(){return this.props.approval.approvalList}},{key:"initColumns",value:function(){var e=this;return[{title:"申请人",dataIndex:"applyUserName",key:"applyUserName"},{title:"状态",dataIndex:"status",key:"status",render:function(e){return s.a.createElement("span",{className:"state-"+Qe[e]},{notApproved:"未审批",pass:"已通过",rejected:"已拒绝",stop:"停用",disabled:"取消授权"}[Qe[e]])},filterMultiple:!1,filters:[{text:"未审批",value:"0"},{text:"已通过",value:"1"},{text:"已拒绝",value:"2"},{text:"停用",value:"3"},{text:"取消授权",value:"4"}],filteredValue:this.state.filter.status||null},{title:"申请API",dataIndex:"apiName",key:"apiName"},{title:"申请说明",dataIndex:"applyContent",key:"applyContent",width:"250px"},{title:"申请时间",dataIndex:"applyTime",key:"applyTime",sorter:!0,render:function(e){return N.a.formatDateTime(e)}},{title:"操作",dataIndex:"deal",render:function(t,a){return s.a.createElement("a",{onClick:e.deal.bind(e,a)},e.getDealType(Qe[a.status]))}}]}},{key:"renderSourceType",value:function(){return null}},{key:"getCardTitle",value:function(){return s.a.createElement("div",{className:"flex font-12"},s.a.createElement(ua,{placeholder:"输入用户名称搜索",style:{width:150,margin:"10px 0"},onSearch:this.handleSearch.bind(this)}),s.a.createElement(ua,{placeholder:"输入API名称搜索",style:{width:150,margin:"10px 0px",marginLeft:"30px"},onSearch:this.handleApiSearch.bind(this)}))}},{key:"sp",value:function(e){var t=this;this.props.form.validateFields(function(a,n){if(!a){var i=t.state.spApplyMsg.id,r=n.APIGroup;t.props.handleApply({applyId:i,isPassed:e,approvalContent:r}).then(function(e){t.setState({spVisible:!1}),e&&($.a.success("审批成功"),t.getApprovalList())})}})}},{key:"spShow",value:function(e){this.props.form.resetFields(),this.setState({spVisible:!0,spApplyMsg:e})}},{key:"lookDetail",value:function(e){this.setState({msgVisible:!0,applyContent:e.applyContent,replyContent:e.replyContent})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return s.a.createElement("div",{className:"api-approval"},s.a.createElement("h1",{className:"box-title"},"审批授权"),s.a.createElement("div",{className:"margin-0-20 m-card"},s.a.createElement(je.a,{noHovering:!0,title:this.getCardTitle(),className:"shadow"},s.a.createElement(Ge.a,{rowKey:"id",className:"m-table monitor-table",columns:this.initColumns(),loading:!1,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange}))),s.a.createElement(Zt.a,{title:"审批授权",visible:this.state.spVisible,onCancel:this.handleCancel.bind(this),footer:s.a.createElement("div",null,s.a.createElement(ta.a,{type:"danger",onClick:this.sp.bind(this,!1)},"拒绝"),s.a.createElement(ta.a,{type:"primary",onClick:this.sp.bind(this,!0)},"同意"))},s.a.createElement(na.a,null,s.a.createElement(da,H()({},Ze,{label:"申请说明"}),s.a.createElement(pa,{disabled:!0,value:this.state.spApplyMsg.applyContent})),s.a.createElement(da,H()({},Ze,{label:"审批说明"}),e("APIGroup",{rules:[{required:!0,message:"请填写审批说明"},{max:200,message:"最大字数不能超过200"}]})(s.a.createElement(pa,null))))),s.a.createElement(Zt.a,{title:"审批详情",visible:this.state.msgVisible,footer:s.a.createElement(ta.a,{type:"primary",onClick:this.handleCancel.bind(this)},"关闭"),onCancel:this.handleCancel.bind(this)},s.a.createElement(na.a,null,s.a.createElement(da,H()({},Ze,{label:"申请说明"}),s.a.createElement(pa,{disabled:!0,value:this.state.applyContent})),s.a.createElement(da,H()({},Ze,{label:"审批说明"}),s.a.createElement(pa,{disabled:!0,value:this.state.replyContent})))))}}]),t}(r.Component))||qt,fa=na.a.create()(Aa),Ea=fa,ka=Ea,ba=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(pa,"TextArea","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(ua,"Search","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(da,"FormItem","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(_a,"sortType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(ma,"orderType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(ha,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(ga,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(Aa,"APIApproval","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(fa,"WrapComponent","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/approval/index.js"),__REACT_HOT_LOADER__.register(Ea,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/approval/index.js")),a(98),a(63)),Ta=a.n(ba),ya=a(19),va=a.n(ya),Ca=(a(75),a(48)),wa=a.n(Ca),Da=a(46),Oa=a.n(Da),Ra=(a(44),a(17)),xa=a.n(Ra),Sa=(a(107),a(53)),La=a.n(Sa),Ia=s.a.createElement("div",null,"docExample."),Na=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Ia,"docExample","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/helpDoc/docs.js"),function(e){function t(){return m()(this,t),f()(this,(t.__proto__||d()(t)).apply(this,arguments))}return k()(t,e),g()(t,[{key:"render",value:function(){var e=this.props.doc;return s.a.createElement(La.a,{key:e,title:n[e]},s.a.createElement(j.a,H()({className:"help-doc"},this.props.style,{type:"question-circle-o"})))}}]),t}(s.a.Component)),Pa=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Na,"HelpDoc","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/helpDoc/index.js"),a(102)),Ha={getDataSources:function(e){return se.post(ce.GET_DATA_SOURCES,e)},testDSConnection:function(e){return se.post(ce.CHECK_CONNECTION,e)},addDataSource:function(e){return se.post(ce.ADD_DATA_SOURCES,e)},updateDataSource:function(e){return se.post(ce.UPDATE_DATA_SOURCES,e)},deleteDataSource:function(e){return se.post(ce.DELETE_DATA_SOURCES,e)},getDataSourcesType:function(e){return se.post(ce.GET_DATA_SOURCES_TYPE,e)},getDataSourcesList:function(e){return se.post(ce.GET_DATA_SOURCES_LIST,e)},getDataSourcesTable:function(e){return se.post(ce.GET_DATA_SOURCES_TABLE,e)},getDataSourcesColumn:function(e){return se.post(ce.GET_DATA_SOURCES_COLUMN,e)},getDataSourcesPart:function(e){return se.post(ce.GET_DATA_SOURCES_PART,e)},getDataSourcesPreview:function(e){return se.post(ce.GET_DATA_SOURCES_PREVIEW,e)}},Ua=Ha,ja=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Ha,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/api/dataSource.js"),{getDataSources:function(e){return function(t){t({type:Pa.a.CHANGE_LOADING}),Ua.getDataSources(e).then(function(e){1===e.code&&t({type:Pa.a.GET_DATA_SOURCES,payload:e.data}),t({type:Pa.a.CHANGE_LOADING})})}},getDataSourcesType:function(e){return function(t){Ua.getDataSourcesType(e).then(function(e){1===e.code&&t({type:Pa.a.GET_DATA_SOURCES_TYPE,payload:e.data})})}},getDataSourcesList:function(e){return function(t){Ua.getDataSourcesList(e).then(function(e){1===e.code&&t({type:Pa.a.GET_DATA_SOURCES_LIST,payload:e.data})})}},getDataSourcesTable:function(e){return function(t){Ua.getDataSourcesTable(e).then(function(e){1===e.code?t({type:Pa.a.GET_DATA_SOURCES_TABLE,payload:e.data}):t({type:Pa.a.GET_DATA_SOURCES_TABLE,payload:[]})})}},getDataSourcesColumn:function(e){return function(t){Ua.getDataSourcesColumn(e).then(function(e){1===e.code&&t({type:Pa.a.GET_DATA_SOURCES_COLUMN,payload:e.data})})}},getDataSourcesPart:function(e){return function(t){Ua.getDataSourcesPart(e).then(function(e){1===e.code&&t({type:Pa.a.GET_DATA_SOURCES_PART,payload:e.data})})}},resetDataSourcesPart:function(){return function(e){e({type:Pa.a.RESET_DATA_SOURCES_PART})}},getDataSourcesPreview:function(e){return function(t){Ua.getDataSourcesPreview(e).then(function(e){if(1===e.code){var a=e.data,n=a.columnList,i=a.dataList;e.data.dataList=i.map(function(e,t){var a={};return e.forEach(function(e,i){a.key=t,a[n[i]]=e}),a}),t({type:Pa.a.GET_DATA_SOURCES_PREVIEW,payload:e.data})}})}}}),Ma=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ja,"dataSourceActions","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/actions/dataSource/index.js"),na.a.Item),Ga=xa.a.Option,Fa='{\n    "defaultFS": "",\n    "hadoopConfig": {\n        "dfs.nameservices": "defaultDfs", \n        "dfs.ha.namenodes.defaultDfs": "namenode1", \n        "dfs.namenode.rpc-address.defaultDfs.namenode1": "", \n        "dfs.client.failover.proxy.provider.defaultDfs": "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider" \n    }\n}',Va=function(e){return{dataSource:e.dataSource}},Ba=function(e){return{getDataSourcesType:function(t){e(ja.getDataSourcesType(t))}}},za=Object(T.b)(Va,Ba)(Kt=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={sourceType:1,hasHdfsConfig:!1,hadoopConfig:"defaultDfs"},n.onOk=function(){var e;return(e=n).__onOk__REACT_HOT_LOADER__.apply(e,arguments)},n.testConnection=function(){var e;return(e=n).__testConnection__REACT_HOT_LOADER__.apply(e,arguments)},n.cancel=function(){var e;return(e=n).__cancel__REACT_HOT_LOADER__.apply(e,arguments)},n.sourceChange=function(){var e;return(e=n).__sourceChange__REACT_HOT_LOADER__.apply(e,arguments)},n.enableHdfsConfig=function(){var e;return(e=n).__enableHdfsConfig__REACT_HOT_LOADER__.apply(e,arguments)},n.enableDetailConfig=function(){var e;return(e=n).__enableDetailConfig__REACT_HOT_LOADER__.apply(e,arguments)},n.renderSourceType=function(){var e;return(e=n).__renderSourceType__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.props.getDataSourcesType()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.sourceData,a=e.sourceData;a.id!==t.id&&(7===a.type?this.setState({sourceType:a.type||1,hasHdfsConfig:!0}):this.setState({sourceType:a.type||1}))}},{key:"__onOk__REACT_HOT_LOADER__",value:function(e){var t=this.props,a=t.editDataSource,n=t.form;console.log(n.getFieldsValue()),n.validateFields(function(e){e||a(n.getFieldsValue(),n)})}},{key:"__testConnection__REACT_HOT_LOADER__",value:function(e){var t=this.state.sourceType,a=this.props,n=(a.testConnection,a.form),i=["type","dataJson.jdbcUrl","dataJson.username","dataJson.password"];10===t&&(i=[].concat(Oa()(i),["dataJson.project","dataJson.endPoint","dataJson.accessKey","dataJson.accessId"])),n.validateFields(i,function(e,t){e||Ua.testDSConnection(t).then(function(e){e.data?$.a.success("数据源连接正常！"):$.a.error("数据库连接失败！")})})}},{key:"__cancel__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.form,a=e.handCancel;this.setState({sourceType:1}),t.resetFields(),a()}},{key:"__sourceChange__REACT_HOT_LOADER__",value:function(e){var t=[Ye.MYSQL,Ye.SQLSERVER,Ye.ORACLE],a=this.state.sourceType;this.setState({sourceType:parseInt(e)}),-1!=t.indexOf(a)&&-1!=t.indexOf(parseInt(e))||this.props.form.resetFields()}},{key:"__enableHdfsConfig__REACT_HOT_LOADER__",value:function(e){this.setState({hasHdfsConfig:!e.target.value})}},{key:"__enableDetailConfig__REACT_HOT_LOADER__",value:function(e){this.setState({detailConfig:!e.target.value})}},{key:"renderDynamic",value:function(){var e=this.state,t=e.hasHdfsConfig,a=e.sourceType,n=(e.detailConfig,this.props),i=n.form,r=n.sourceData,o=i.getFieldDecorator,l=r.dataJson||{};switch(a){case Ye.HIVE:return[s.a.createElement(Ma,H()({},Ze,{label:"JDBC URL",key:"jdbcUrl",hasFeedback:!0}),o("dataJson.jdbcUrl",{rules:[{required:!0,message:"jdbcUrl不可为空！"}],initialValue:l.jdbcUrl||""})(s.a.createElement(ra.a,{autoComplete:"off"}))),s.a.createElement(Ma,H()({},Ze,{label:"用户名",key:"username"}),o("dataJson.username",{rules:[],initialValue:l.username||""})(s.a.createElement(ra.a,{autoComplete:"off"}))),s.a.createElement(Ma,H()({},Ze,{label:"密码",key:"password"}),o("dataJson.password",{rules:[],initialValue:""})(s.a.createElement(ra.a,{type:"password"}))),s.a.createElement(Ma,H()({},Ze,{label:"defaultFS",key:"defaultFS",hasFeedback:!0}),o("dataJson.defaultFS",{rules:[{required:!0,message:"defaultFS不可为空！"}],initialValue:l.defaultFS||""})(s.a.createElement(ra.a,{placeholder:"hdfs://host:port"}))),s.a.createElement(Ma,H()({},et,{key:"hasHdfsConfig"}),o("hasHdfsConfig",{initialValue:!1})(s.a.createElement(wa.a,{checked:t,onChange:this.enableHdfsConfig},"高可用配置"))),s.a.createElement(Ma,H()({},Ze,{label:"高可用配置",key:"hadoopConfig",style:{display:t?"block":"none"}}),o("dataJson.hadoopConfig",{rules:[],initialValue:l.hadoopConfig||""})(s.a.createElement(ra.a,{type:"textarea",rows:5,placeholder:Fa})),s.a.createElement(Na,{doc:"hdfsConfig"}))];case Ye.MAXCOMPUTE:return[s.a.createElement(Ma,H()({},Ze,{label:"AccessId",key:"accessId",hasFeedback:!0}),o("dataJson.accessId",{rules:[{required:!0,message:"access ID不可为空！"}],initialValue:l.accessId||""})(s.a.createElement(ra.a,{autoComplete:"off"}))),s.a.createElement(Ma,H()({},Ze,{label:"AccessKey",key:"accessKey",hasFeedback:!0}),o("dataJson.accessKey",{rules:[{required:!0,message:"access Key不可为空！"}],initialValue:l.accessKey||""})(s.a.createElement(ra.a,{type:"password",autoComplete:"off"}))),s.a.createElement(Ma,H()({},Ze,{label:"Project Name",key:"project",hasFeedback:!0}),o("dataJson.project",{rules:[{required:!0,message:"Project Name不可为空！"}],initialValue:l.project||""})(s.a.createElement(ra.a,{autoComplete:"off"}))),s.a.createElement(Ma,H()({},Ze,{label:"End Point",key:"endPoint",hasFeedback:!0}),o("dataJson.endPoint",{rules:[{required:!0,message:"End Point不可为空！"}],initialValue:l.endPoint||""})(s.a.createElement(ra.a,{autoComplete:"off"})))];case Ye.MYSQL:case Ye.ORACLE:case Ye.SQLSERVER:default:return[s.a.createElement(Ma,H()({},Ze,{label:"JDBC URL",key:"jdbcUrl",hasFeedback:!0}),o("dataJson.jdbcUrl",{rules:[{required:!0,message:"jdbcUrl不可为空！"}],initialValue:l.jdbcUrl||""})(s.a.createElement(ra.a,{autoComplete:"off"}))),s.a.createElement(Ma,H()({},Ze,{label:"用户名",key:"username",hasFeedback:!0}),o("dataJson.username",{rules:[{required:!0,message:"用户名不可为空！"}],initialValue:l.username||""})(s.a.createElement(ra.a,{autoComplete:"off"}))),s.a.createElement(Ma,H()({},Ze,{label:"密码",key:"password",hasFeedback:!0}),o("dataJson.password",{rules:[{required:!0,message:"密码不可为空！"}],initialValue:""})(s.a.createElement(ra.a,{type:"password"})))]}}},{key:"__renderSourceType__REACT_HOT_LOADER__",value:function(e){return e.map(function(e){return s.a.createElement(Ga,{key:e.value,value:e.value.toString()},e.name)})}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.form,n=e.title,i=e.sourceData,r=e.status,o=e.dataSource,l=(this.state.hasHdfsConfig,a.getFieldDecorator),c=o.sourceType[0]&&o.sourceType[0].value.toString();return s.a.createElement(Zt.a,{title:n,maskClosable:!1,wrapClassName:"vertical-center-modal",visible:t,onCancel:this.cancel,footer:!1},s.a.createElement(na.a,null,s.a.createElement(Ma,H()({},Ze,{label:"数据源名称",hasFeedback:!0}),l("dataName",{rules:[{required:!0,message:"数据源名称不可为空！"},{max:128,message:"数据源名称不得超过128个字符！"},{pattern:/^[A-Za-z0-9_-]+$/,message:"名称只能由字母与数字、下划线组成"}],initialValue:i.dataName||""})(s.a.createElement(ra.a,{autoComplete:"off",disabled:"edit"===r}))),s.a.createElement(Ma,H()({},Ze,{label:"数据源描述",hasFeedback:!0}),l("dataDesc",{rules:[{max:200,message:"描述请控制在200个字符以内！"}],initialValue:i.dataDesc||""})(s.a.createElement(ra.a,{type:"textarea",rows:4}))),s.a.createElement(Ma,H()({},Ze,{label:"数据源类型",hasFeedback:!0}),l("type",{rules:[{required:!0,message:"数据源类型不可为空！"}],initialValue:i.type?i.type.toString():c})(s.a.createElement(xa.a,{onChange:this.sourceChange,disabled:"edit"===r},this.renderSourceType(o.sourceType)))),this.renderDynamic(),s.a.createElement(Ma,H()({},et,{label:""}),s.a.createElement(ta.a,{icon:"sync",type:"primary","data-target":"test",onClick:this.testConnection,style:{marginRight:"10px"}},"测试连通性"),s.a.createElement(ta.a,{type:"primary",style:{marginRight:"10px"},onClick:this.onOk},"确定"),s.a.createElement(ta.a,{onClick:this.cancel},"取消"))))}}]),t}(r.Component))||Kt;za=na.a.create()(za);"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ma,"FormItem","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(Ga,"Option","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(Fa,"hdfsConf","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register('{\n    "initialPoolSize": 100,\n    "maxIdleTime": 30,\n    "maxPoolSize": 100,\n    "minPoolSize": 10,\n    "maxStatements": 200\n}',"configConf","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(Va,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(Ba,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(za,"DataSourceModal","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dataSource/editModal.js")),a(828);var qa,Ka,Ya,Wa,Ja=ra.a.Search,Qa=function(e){return{dataSource:e.dataSource}},Xa=function(e){return{getDataSources:function(t){e(ja.getDataSources(t))}}},$a=Object(T.b)(Qa,Xa)(qa=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={visible:!1,title:"新增数据源",status:"add",source:{},params:{currentPage:1,pageSize:20,name:void 0,type:void 0,active:void 0}},n.searchDataSources=function(){var e;return(e=n).__searchDataSources__REACT_HOT_LOADER__.apply(e,arguments)},n.editDataSource=function(){var e;return(e=n).__editDataSource__REACT_HOT_LOADER__.apply(e,arguments)},n.remove=function(){var e;return(e=n).__remove__REACT_HOT_LOADER__.apply(e,arguments)},n.testConnection=function(){var e;return(e=n).__testConnection__REACT_HOT_LOADER__.apply(e,arguments)},n.handleTableChange=function(){var e;return(e=n).__handleTableChange__REACT_HOT_LOADER__.apply(e,arguments)},n.initEdit=function(){var e;return(e=n).__initEdit__REACT_HOT_LOADER__.apply(e,arguments)},n.initColumns=function(){var e;return(e=n).__initColumns__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.props.getDataSources(this.state.params)}},{key:"__searchDataSources__REACT_HOT_LOADER__",value:function(e){var t=H()({},this.state.params,{name:e});this.setState({params:t}),this.props.getDataSources(t)}},{key:"__editDataSource__REACT_HOT_LOADER__",value:function(e,t){var a=this,n=this.state,i=n.title,r=n.status,s=n.source,o=n.params;"edit"===r?Ua.updateDataSource(H()({},s,e)).then(function(e){1===e.code&&($.a.success(i+"成功！"),a.props.getDataSources(o))}):Ua.addDataSource(e).then(function(e){1===e.code&&($.a.success(i+"成功！"),a.props.getDataSources(o))}),t.resetFields(),this.setState({visible:!1})}},{key:"__remove__REACT_HOT_LOADER__",value:function(e){var t=this;1!==e.active?Ua.deleteDataSource({sourceId:e.id}).then(function(e){1===e.code&&($.a.success("移除数据源成功！"),t.props.getDataSources(t.state.params))}):$.a.info("此数据源已在任务中被引用，无法删除!")}},{key:"__testConnection__REACT_HOT_LOADER__",value:function(e){Ua.testDSConnection(e).then(function(e){1===e.code&&$.a.success("数据源连接正常！")})}},{key:"__handleTableChange__REACT_HOT_LOADER__",value:function(e,t){var a=t.active,n=t.type;console.log(t);var i=H()({},this.state.params,{currentPage:e.current,active:a?a[0]:void 0,type:n?n[0]:void 0});this.setState({params:i}),this.props.getDataSources(i)}},{key:"__initEdit__REACT_HOT_LOADER__",value:function(e){this.setState({visible:!0,title:"编辑数据源",status:"edit",source:e})}},{key:"exchangeSourceType",value:function(){var e=[],t={},a=this.props.dataSource.sourceType;for(var n in a){var i=a[n];t[i.value]=i.name,e.push({text:i.name,value:i.value})}return{typeList:e,typeDic:t}}},{key:"__initColumns__REACT_HOT_LOADER__",value:function(){var e=this,t=this.exchangeSourceType(),a=t.typeList,n=t.typeDic;return[{title:"数据源名称",dataIndex:"dataName",key:"dataName"},{title:"类型",dataIndex:"type",key:"type",filters:a,filterMultiple:!1,render:function(e){return n[e]}},{title:"描述信息",dataIndex:"dataDesc",key:"dataDesc",width:300},{title:"最近修改人",dataIndex:"modifyUserName",key:"modifyUserName"},{title:"最近修改时间",dataIndex:"gmtModified",key:"gmtModified",render:function(e){return va()(e).format("YYYY-MM-DD HH:mm:ss")}},{title:"状态",dataIndex:"active",key:"active",filters:[{text:"未启用",value:0},{text:"使用中",value:1}],filterMultiple:!1,render:function(e,t){return 1===t.active?"使用中":"未启用"}},{title:"操作",width:"10%",key:"operation",render:function(t,a){return s.a.createElement("span",{key:a.id},s.a.createElement("a",{onClick:function(){e.initEdit(a)}},"编辑"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement(Ta.a,{title:"确定删除此数据源？",okText:"确定",cancelText:"取消",onConfirm:function(){e.remove(a)}},s.a.createElement("a",null,"删除")))}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.title,i=t.status,r=t.source,o=t.params,l=this.props.dataSource,c=l.sourceQuery,p=l.loading,u={current:o.currentPage,pageSize:o.pageSize,total:c.totalCount},d=s.a.createElement(Ja,{placeholder:"数据源名称",style:{width:200,margin:"10px 0"},onSearch:this.searchDataSources}),_=s.a.createElement(ta.a,{type:"primary",style:{margin:"10px 0"},className:"right",onClick:function(){e.setState({visible:!0,source:{},status:"add",title:"添加数据源"})}},"新增数据源");return s.a.createElement("div",{className:"source-page"},s.a.createElement("h1",{className:"box-title"},"数据源管理"),s.a.createElement("div",{className:"box-2 m-card shadow"},s.a.createElement(je.a,{title:d,extra:_,noHovering:!0,bordered:!1},s.a.createElement(Ge.a,{className:"m-table",rowKey:"id",pagination:u,onChange:this.handleTableChange,loading:p,columns:this.initColumns(),dataSource:c.data}))),s.a.createElement(za,{title:n,visible:a,status:i,editDataSource:this.editDataSource,testConnection:this.testConnection,sourceData:r,handCancel:function(){e.setState({visible:!1})}}))}}]),t}(r.Component))||qa,Za=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ja,"Search","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dataSource/index.js"),__REACT_HOT_LOADER__.register(Qa,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dataSource/index.js"),__REACT_HOT_LOADER__.register(Xa,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dataSource/index.js"),__REACT_HOT_LOADER__.register($a,"DataSource","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/dataSource/index.js")),a(157)),en={getCatalogue:function(e){return se.post(ce.GET_CATALOGUE,e)},listByCondition:function(e){return se.post(ce.GET_API_MARKET_LIST,e)},getApiDetail:function(e){return se.post(ce.GET_MARKET_API_DETAIL,e)},apiApply:function(e){return se.post(ce.APPLY_API,e)},getApiExtInfoForNormal:function(e){return se.post(ce.GET_API_EXT_INFO,e)},getApiExtInfoForManager:function(e){return se.post(ce.GET_API_EXT_INFO_ADMIN,e)}},tn=en,an=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(en,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/api/apiMarket.js"),{getCatalogue:function(e){return function(t){tn.getCatalogue({pid:e,lvNum:10}).then(function(e){1===e.code&&t({type:Za.a.GET_CATALOGUE,payload:e.data})})}},getApiMarketList:function(e){return function(t){return tn.listByCondition(e).then(function(e){if(1===e.code)return t({type:Za.a.GET_API_MARKET_LIST,payload:e.data.data}),e})}},getApiDetail:function(e){return function(t){return tn.getApiDetail(e).then(function(e){if(1===e.code)return t({type:Za.a.GET_MARKET_API_DETAIL,payload:e.data}),e})}},getApiExtInfo:function(e){var t="getApiExtInfoForNormal";return e.useAdmin&&(t="getApiExtInfoForManager"),function(a){return tn[t](e).then(function(e){if(1===e.code)return a({type:Za.a.GET_API_EXT_INFO,payload:e.data}),e})}},apiApply:function(e){return function(t){return tn.apiApply(e).then(function(e){if(1===e.code)return e})}}}),nn=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(an,"apiMarketActions","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/actions/apiMarket/index.js"),a(556)),rn={getAllApiList:function(e){return se.post(ce.GET_ALL_API_LIST,e)},getDataSourceByBaseInfo:function(e){return se.post(ce.GET_DATASOURCE_BASE_INFO,e)},deleteApi:function(e){return se.post(ce.DELETE_API,e)},updateApiStatus:function(e){return se.post(ce.UPDATE_API,e)},getApiCallUserRankList:function(e){return se.post(ce.GET_API_CALL_RANK,e)},getApiUserApplyList:function(e){return se.post(ce.GET_API_BUY_STATE,e)},updateCatalogue:function(e){return se.post(ce.UPDATE_CATAGORY,e)},addCatalogue:function(e){return se.post(ce.ADD_CATAGORY,e)},deleteCatalogue:function(e){return se.post(ce.DELETE_CATAGORY,e)},createApi:function(e){return se.post(ce.NEW_API,e)},tablelist:function(e){return se.post(ce.GET_TABLE_BY_DATASOURCE,e)},tablecolumn:function(e){return se.post(ce.GET_TABLE_COLUMNS_DETAIL,e)},previewData:function(e){return se.post(ce.GET_TABLE_PREVIEW_DATA,e)},updateApi:function(e){return se.post(ce.CHANGE_API,e)},getApiInfo:function(e){return se.post(ce.GET_API_DETAIL_INFO,e)},getApiCallErrorInfoForManager:function(e){return se.post(ce.GET_API_CALL_ERROR_INFO_ADMIN,e)}},sn=rn,on=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(rn,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/api/apiManage.js"),{getAllApiList:function(e){return function(t){return sn.getAllApiList(e).then(function(e){if(1===e.code)return t({type:nn.a.GET_ALL_API_LIST,payload:e.data.data}),e})}},getDataSourceByBaseInfo:function(e){return function(t){return sn.getDataSourceByBaseInfo(e).then(function(e){if(1===e.code)return e})}},deleteApi:function(e){return function(t){return sn.deleteApi(e).then(function(e){if(1===e.code)return e})}},openApi:function(e){return function(t){return sn.updateApiStatus({apiId:e,apiStatus:0}).then(function(e){if(1===e.code)return e})}},closeApi:function(e){return function(t){return sn.updateApiStatus({apiId:e,apiStatus:1}).then(function(e){if(1===e.code)return e})}},getApiCallUserRankList:function(e){return function(t){return sn.getApiCallUserRankList(e).then(function(e){if(1===e.code)return e})}},getApiUserApplyList:function(e){return function(t){return sn.getApiUserApplyList(e).then(function(e){if(1===e.code)return e})}},updateCatalogue:function(e){return function(t){return sn.updateCatalogue(e).then(function(e){if(1===e.code)return e})}},deleteCatalogue:function(e){return function(t){return sn.deleteCatalogue(e).then(function(e){if(1===e.code)return e})}},addCatalogue:function(e){return function(t){return sn.addCatalogue(e).then(function(e){if(1===e.code)return e})}},createApi:function(e){return function(t){return sn.createApi(e).then(function(e){if(1===e.code)return e})}},updateApi:function(e){return function(t){return sn.updateApi(e).then(function(e){if(1===e.code)return e})}},tablelist:function(e){return function(t){return sn.tablelist(e).then(function(e){if(1===e.code)return e})}},tablecolumn:function(e){return function(t){return sn.tablecolumn(e).then(function(e){if(1===e.code)return e})}},previewData:function(e){return function(t){return sn.previewData(e).then(function(e){if(1===e.code)return e})}},getApiInfo:function(e){return function(t){return sn.getApiInfo(e).then(function(e){if(1===e.code)return e})}},getApiCallErrorInfo:function(e){return function(t){return sn.getApiCallErrorInfoForManager(e).then(function(e){if(1===e.code)return e})}}}),ln=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(on,"apiManageActions","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/actions/apiManage/index.js"),ra.a.Search),cn=xa.a.Option,pn=Zt.a.confirm,un=function(e){var t=e.user;return{apiMarket:e.apiMarket,apiManage:e.apiManage,user:t,dataSource:e.dataSource}},dn=function(e){return{getCatalogue:function(t){e(an.getCatalogue(t))},getAllApiList:function(t){return e(on.getAllApiList(t))},getDataSourceList:function(t){return e(on.getDataSourceByBaseInfo({type:t}))},deleteApi:function(t){return e(on.deleteApi({apiIds:[t]}))},openApi:function(t){return e(on.openApi(t))},closeApi:function(t){return e(on.closeApi(t))},getDataSourcesType:function(){return e(ja.getDataSourcesType())}}},_n=Object(T.b)(un,dn)(Ka=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={pageSize:20,pageIndex:1,type1:void 0,type2:void 0,total:0,dataSourceType:void 0,dataSource:void 0,searchName:null,filter:{},sortedInfo:{},changeMan:null,loading:!1},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.props.getCatalogue(0),this.getAllApi(),this.getDataSource(null),this.props.getDataSourcesType()}},{key:"exchangeSourceType",value:function(){var e=[],t={},a=this.props.dataSource.sourceType;for(var n in a){var i=a[n];t[i.value]=i.name,e.push({text:i.name,value:i.value})}return{typeList:e,typeDic:t}}},{key:"getAllApi",value:function(){var e=this,t={};t.apiName=this.state.searchName,t.pid=this.state.type1,t.cid=this.state.type2,t.dataSourceType=this.state.dataSourceType&&parseInt(this.state.dataSourceType),t.dataSourceId=this.state.dataSource&&parseInt(this.state.dataSource),t.modifyUserId=this.state.changeMan,t.orderBy={gmtModified:"gmt_modified"}[this.state.sortedInfo.columnKey],t.sort={ascend:"asc",descend:"desc"}[this.state.sortedInfo.order],t.currentPage=this.state.pageIndex,t.pageSize=this.state.pageSize,this.setState({loading:!0}),this.props.getAllApiList(t).then(function(t){e.setState({loading:!1}),t&&e.setState({total:t.data.totalCount})})}},{key:"renderSourceType",value:function(e,t){function a(e){return!e||e.length<1?null:e.map(function(e){return s.a.createElement(cn,{key:e.id},e.name)})}var n=[],i=this.props.apiMarket.apiCatalogue;if(t){if(!i)return null;for(var r=0;r<i.length;r++)n.push({id:i[r].id,name:i[r].catalogueName});return a(n)}if(!i)return null;for(var o=void 0,l=0;l<i.length;l++)if(i[l].id==e){o=i[l].childCatalogue;break}if(!o)return null;for(var c=0;c<o.length;c++)o[c].api||n.push({id:o[c].id,name:o[c].catalogueName});return a(n)}},{key:"onSourceChange",value:function(e){var t=this;this.setState({type1:e,type2:void 0},function(){t.getAllApi()})}},{key:"onUserSourceChange",value:function(e){var t=this;this.setState({type2:e},function(){t.getAllApi()})}},{key:"handleSearch",value:function(e){var t=this;this.setState({searchName:e,pageIndex:1},function(){t.getAllApi()})}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,filter:t,sortedInfo:a},function(){n.getAllApi()})}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:this.state.total}}},{key:"openDetail",value:function(e){this.props.router.push("/api/manage/detail/"+e)}},{key:"initColumns",value:function(){var e=this;return[{title:"API名称",dataIndex:"name",key:"name",render:function(t,a){return s.a.createElement("a",{onClick:e.openDetail.bind(e,a.id)},t)}},{title:"状态",dataIndex:"status",key:"status",render:function(e,t){return s.a.createElement("span",{className:"state-"+Xe[e]},{success:"正常",stop:"已禁用"}[Xe[e]])}},{title:"描述",dataIndex:"apiDesc",key:"apiDesc",width:300},{title:"数据源",dataIndex:"dataSourceType",key:"dataSourceType",render:function(e,t){return t.dataSourceType+" / "+t.dataSourceName}},{title:"最近24小时调用",dataIndex:"total1d",key:"total1d"},{title:"累计调用",dataIndex:"invokeTotal",key:"invokeTotal"},{title:"最近修改人",dataIndex:"modifyUser",key:"modifyUser"},{title:"最近修改时间",dataIndex:"gmtModified",key:"gmtModified",sorter:!0,render:function(e){return N.a.formatDateTime(e)}},{title:"创建人",dataIndex:"createUser",key:"createUser"},{title:"操作",dataIndex:"deal",key:"deal",render:function(t,a){return"success"==Xe[a.status]?s.a.createElement("a",{onClick:e.closeApi.bind(e,a.id)},"禁用"):s.a.createElement("div",null,s.a.createElement("a",{onClick:e.openApi.bind(e,a.id)},"开启"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.editApi.bind(e,a.id)},"编辑"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.deleteApi.bind(e,a.id)},"删除"))}}]}},{key:"getSource",value:function(){return this.props.apiManage.apiList}},{key:"editApi",value:function(e){this.props.router.push("/api/manage/editApi/"+e)}},{key:"openApi",value:function(e){var t=this;pn({title:"确认开启?",content:"确认开启api",onOk:function(){t.setState({loading:!0}),t.props.openApi(e).then(function(e){t.setState({loading:!1}),$.a.success("开启成功"),e&&t.getAllApi()})},onCancel:function(){console.log("Cancel")}})}},{key:"closeApi",value:function(e){var t=this;pn({title:"确认禁用?",content:"确认禁用api",onOk:function(){t.setState({loading:!0}),t.props.closeApi(e).then(function(e){t.setState({loading:!1}),$.a.success("禁用成功"),e&&t.getAllApi()})},onCancel:function(){console.log("Cancel")}})}},{key:"deleteApi",value:function(e){var t=this;pn({title:"确认删除?",content:"确认删除api",onOk:function(){t.setState({loading:!0}),t.props.deleteApi(e).then(function(e){t.setState({loading:!1}),e&&($.a.success("删除成功"),t.getAllApi())})},onCancel:function(){console.log("Cancel")}})}},{key:"gerDataSourceView",value:function(){var e=this.state.dataSourceList;return e?e.map(function(e,t){return s.a.createElement(cn,{key:e.id},e.name)}):null}},{key:"getDataSource",value:function(){var e=this;this.props.getDataSourceList(this.state.dataSourceType).then(function(t){if(t){var a=t.data;e.setState({dataSourceList:a})}})}},{key:"getDataSourceTypeView",value:function(){var e=this.exchangeSourceType(),t=e.typeList;e.typeDic;return!t||t.length<1?null:t.map(function(e){return s.a.createElement(cn,{key:e.value},e.text)})}},{key:"dataSourceTypeChange",value:function(e){var t=this;this.setState({dataSourceType:e,dataSource:void 0},function(){t.getDataSource(),t.getAllApi()})}},{key:"dataSourceChange",value:function(e){var t=this;this.setState({dataSource:e},function(){t.getAllApi()})}},{key:"changeManCheck",value:function(e){var t=this,a=null;e.target.checked&&(a=this.props.user.id),this.setState({changeMan:a},function(){t.getAllApi()})}},{key:"getCardTitle",value:function(){return s.a.createElement("div",{className:"flex font-12"},s.a.createElement(ln,{placeholder:"输入API名称搜索",style:{width:150,margin:"10px 0"},onSearch:this.handleSearch.bind(this)}),s.a.createElement("div",{className:"m-l-8"},"类型：",s.a.createElement(xa.a,{value:this.state.dataSourceType,allowClear:!0,onChange:this.dataSourceTypeChange.bind(this),style:{width:100}},this.getDataSourceTypeView())),s.a.createElement("div",{className:"m-l-8"},"数据源：",s.a.createElement(xa.a,{value:this.state.dataSource,allowClear:!0,onChange:this.dataSourceChange.bind(this),style:{width:100}},this.gerDataSourceView())),s.a.createElement("div",{className:"m-l-8"},"API分类：",s.a.createElement(xa.a,{value:this.state.type1,allowClear:!0,onChange:this.onSourceChange.bind(this),style:{width:120}},this.renderSourceType(0,!0))),s.a.createElement("div",{className:"m-l-8"},"二级分类：",s.a.createElement(xa.a,{value:this.state.type2,allowClear:!0,onChange:this.onUserSourceChange.bind(this),style:{width:150}},this.renderSourceType(this.state.type1,!1))),s.a.createElement("div",{className:"m-l-8"},s.a.createElement(wa.a,{onChange:this.changeManCheck.bind(this)},"我修改的")))}},{key:"openApiType",value:function(){this.props.router.push("/api/manage/apiType")}},{key:"newApi",value:function(){this.props.router.push("/api/manage/newApi")}},{key:"getCardExtra",value:function(){return s.a.createElement("div",{style:{paddingTop:"10px"}},s.a.createElement(ta.a,{onClick:this.openApiType.bind(this),style:{marginRight:"8px"},type:"primary"},"类目管理"),s.a.createElement(ta.a,{type:"primary",onClick:this.newApi.bind(this)},"新建API"))}},{key:"render",value:function(){this.props.children;return s.a.createElement("div",{className:"api-management"},s.a.createElement("div",{style:{marginTop:"20px"},className:"margin-0-20 m-card box-2"},s.a.createElement(je.a,{noHovering:!0,title:this.getCardTitle(),extra:this.getCardExtra()},s.a.createElement(Ge.a,{rowKey:"id",className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange}))))}}]),t}(r.Component))||Ka,mn=_n,hn=mn,gn=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ln,"Search","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/index.js"),__REACT_HOT_LOADER__.register(cn,"Option","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/index.js"),__REACT_HOT_LOADER__.register(pn,"confirm","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/index.js"),__REACT_HOT_LOADER__.register(un,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/index.js"),__REACT_HOT_LOADER__.register(dn,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/index.js"),__REACT_HOT_LOADER__.register(_n,"APIMana","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/index.js"),__REACT_HOT_LOADER__.register(mn,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/index.js")),na.a.Item),An=ra.a.TextArea,fn=function(e){return{apiApply:function(t,a){return e(an.apiApply({apiId:t,applyContent:a}))},getApiExtInfo:function(t){e(an.getApiExtInfo({apiId:t}))}}},En=Object(T.b)(null,fn)(Ya=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={loading:!1},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"handleSubmit",value:function(e){console.log(e)}},{key:"handleOk",value:function(){var e=this;this.props.form.validateFields(function(t,a){t||(e.setState({loading:!0}),e.props.apiApply(e.props.apiId,a.applyMsg).then(function(t){e.setState({loading:!1}),e.props.getApiExtInfo(e.props.apiId),e.props.getMarketApi&&e.props.getMarketApi(),t&&($.a.success("操作成功"),e.props.successCallBack())}))})}},{key:"handleCancel",value:function(){this.props.form.resetFields(),this.props.cancelCallback()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return s.a.createElement("div",null,s.a.createElement(Zt.a,{title:"申请API",visible:this.props.show,onOk:this.handleOk.bind(this),onCancel:this.handleCancel.bind(this),footer:[s.a.createElement(ta.a,{key:"back",size:"large",onClick:this.handleCancel.bind(this)},"取消"),s.a.createElement(ta.a,{key:"submit",type:"primary",size:"large",loading:this.state.loading,onClick:this.handleOk.bind(this)},"提交")]},s.a.createElement(na.a,{onSubmit:this.handleSubmit.bind(this)},s.a.createElement(gn,{className:"text-bottom",label:"申请API",hasFeedback:!0,labelCol:{sm:6,xs:24},wrapperCol:{sm:18,xs:24}},s.a.createElement("span",{style:{lineHeight:1.3,fontSize:14}},this.props.apiName),s.a.createElement("br",null),s.a.createElement("span",{style:{lineHeight:1.2,fontSize:14}},this.props.desc)),s.a.createElement(gn,{className:"text-bottom",label:"申请说明",hasFeedback:!0,required:!0,labelCol:{sm:6,xs:24},wrapperCol:{sm:18,xs:24}},e("applyMsg",{rules:[{required:!0,message:"请输入申请信息"},{max:200,message:"最大字符不能超过200"}]})(s.a.createElement(An,{style:{width:200},rows:4}))))))}}]),t}(r.Component))||Ya,kn=na.a.create()(En),bn=kn,Tn=bn,yn=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(gn,"FormItem","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/applyBox.js"),__REACT_HOT_LOADER__.register(An,"TextArea","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/applyBox.js"),__REACT_HOT_LOADER__.register(fn,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/applyBox.js"),__REACT_HOT_LOADER__.register(En,"ApplyBox","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/applyBox.js"),__REACT_HOT_LOADER__.register(kn,"WrappedApplyBox","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/applyBox.js"),__REACT_HOT_LOADER__.register(bn,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/applyBox.js")),na.a.Item),vn=ra.a.TextArea,Cn=xa.a.Option,wn=ra.a.Search,Dn=void 0,On=function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t}},Rn=function(e){return{getCatalogue:function(t){e(an.getCatalogue(t))},getApiMarketList:function(t){return e(an.getApiMarketList(t))}}},xn=Object(T.b)(On,Rn)(Wa=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={searchValue:"",pageIndex:1,loading:!0,applyBox:!1,apply:{apiId:"",apiName:"",desc:""},type1:void 0,type2:void 0,apiName:"",pageSize:20,total:0,sorter:{}},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"getMarketApi",value:function(){var e=this;this.setState({loading:!0});this.props.getApiMarketList({apiName:this.state.searchValue,pid:this.state.type1||-1,cid:this.state.type2||-1,currentPage:this.state.pageIndex,pageSize:this.state.pageSize,orderBy:{updateTime:"gmt_modified"}[this.state.sorter.columnKey],sort:{ascend:"asc",descend:"desc"}[this.state.sorter.order]}).then(function(t){console.log("apigetOver"),e.setState({loading:!1,total:t.data.totalCount})}).catch(function(t){e.setState({loading:!1})})}},{key:"componentDidMount",value:function(){this.props.getCatalogue(0),this.getMarketApi()}},{key:"renderSourceType",value:function(e,t){function a(e){return!e||e.length<1?null:e.map(function(e){return s.a.createElement(Cn,{key:e.id},e.name)})}var n=[],i=this.props.apiMarket.apiCatalogue;if(t){if(!i)return null;for(var r=0;r<i.length;r++)n.push({id:i[r].id,name:i[r].catalogueName});return a(n)}if(!i)return null;for(var o=void 0,l=0;l<i.length;l++)if(i[l].id==e){o=i[l].childCatalogue;break}if(!o)return null;for(var c=0;c<o.length;c++)o[c].api||n.push({id:o[c].id,name:o[c].catalogueName});return a(n)}},{key:"onSourceChange",value:function(e){var t=this;this.setState({type1:e,type2:void 0},function(){t.getMarketApi()})}},{key:"onUserSourceChange",value:function(e){var t=this;this.setState({type2:e},function(){t.getMarketApi()})}},{key:"handleSearch",value:function(e){var t=this;this.setState({searchValue:e,pageIndex:1},function(){t.getMarketApi()})}},{key:"getDealType",value:function(e){return{complete:"查看使用情况",nothing:"申请",applying:"查看审批进度"}[e||"nothing"]}},{key:"deal",value:function(e){var t=this["deal"+e.deal];t&&t.call(this,e)}},{key:"dealcomplete",value:function(e){this.props.router.push("/api/mine/approved?apiId="+e.key),console.log("dealcomplete",e)}},{key:"dealnothing",value:function(e){this.setState({applyBox:!0,apply:{apiId:e.key,apiName:e.apiName,desc:e.description}}),console.log("dealnothing",e)}},{key:"dealapplying",value:function(e){this.props.router.push("/api/mine?apiId="+e.key),console.log("dealapplying",e)}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,sorter:a},function(){n.getMarketApi()})}},{key:"openDetail",value:function(e){return function(){window.open(location.origin+location.pathname+"#/api/market/detail/"+e+"?isHideBack=true")}}},{key:"initColumns",value:function(){var e=this;return[{title:"API名称",dataIndex:"apiName",key:"apiName",render:function(t,a){return s.a.createElement("a",{onClick:e.openDetail(a.key)},t)}},{title:"描述",dataIndex:"description",key:"description",width:300},{title:"累计调用（次）",dataIndex:"callCount",key:"callCount"},{title:"更新时间",dataIndex:"updateTime",key:"updateTime",render:function(e){return N.a.formatDateTime(e)},sorter:!0},{title:"操作",dataIndex:"deal",render:function(t,a){return s.a.createElement("a",{onClick:e.deal.bind(e,a)},e.getDealType(a.deal))}}]}},{key:"getSource",value:function(){for(var e={4:"complete",3:"complete",2:"nothing",1:"complete",0:"applying","-1":"nothing"},t=this.props.apiMarket.apiList,a=[],n=0;n<t.length;n++)a.push({key:t[n].id,apiName:t[n].name,description:t[n].apiDesc,callCount:t[n].invokeTotal,updateTime:t[n].gmtModified,deal:e[t[n].applyStatus]});return a}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:this.state.pageSize,total:this.state.total}}},{key:"getCardTitle",value:function(){return s.a.createElement("div",{className:"flex font-12"},s.a.createElement(wn,{placeholder:"输入API名称搜索",style:{width:150,margin:"10px 0"},onSearch:this.handleSearch.bind(this)}),s.a.createElement("div",{className:"m-l-8"},"API分类：",s.a.createElement(xa.a,{value:this.state.type1,allowClear:!0,onChange:this.onSourceChange.bind(this),style:{width:120}},this.renderSourceType(0,!0))),s.a.createElement("div",{className:"m-l-8"},"二级分类：",s.a.createElement(xa.a,{value:this.state.type2,allowClear:!0,onChange:this.onUserSourceChange.bind(this),style:{width:150}},this.renderSourceType(this.state.type1,!1))))}},{key:"jumpToMine",value:function(){Dn.destroy(),this.props.router.push("/api/mine")}},{key:"showApplySuccessModal",value:function(){Dn=Zt.a.success({title:"申请提交成功",content:s.a.createElement("span",null,"您可以在 ",s.a.createElement("a",{onClick:this.jumpToMine.bind(this)},"我的API")," 中查看审批进度"),okText:"确定"})}},{key:"handleOk",value:function(){this.setState({applyBox:!1}),this.showApplySuccessModal()}},{key:"handleCancel",value:function(){this.setState({applyBox:!1})}},{key:"render",value:function(){this.props.children;return s.a.createElement("div",{className:"api-market"},s.a.createElement(Tn,{show:this.state.applyBox,successCallBack:this.handleOk.bind(this),cancelCallback:this.handleCancel.bind(this),apiId:this.state.apply.apiId,apiName:this.state.apply.apiName,desc:this.state.apply.desc,getMarketApi:this.getMarketApi.bind(this)}),s.a.createElement("h1",{className:"box-title"},"Api市场"),s.a.createElement("div",{className:"margin-0-20 m-card box-2"},s.a.createElement(je.a,{noHovering:!0,title:this.getCardTitle()},s.a.createElement(Ge.a,{className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange}))))}}]),t}(r.Component))||Wa,Sn=xn,Ln=Sn,In=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(yn,"FormItem","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/index.js"),__REACT_HOT_LOADER__.register(vn,"TextArea","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/index.js"),__REACT_HOT_LOADER__.register(Cn,"Option","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/index.js"),__REACT_HOT_LOADER__.register(wn,"Search","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/index.js"),__REACT_HOT_LOADER__.register(Dn,"modal","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/index.js"),__REACT_HOT_LOADER__.register(On,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/index.js"),__REACT_HOT_LOADER__.register(Rn,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/index.js"),__REACT_HOT_LOADER__.register(xn,"APIMarket","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/index.js"),__REACT_HOT_LOADER__.register(Sn,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/index.js")),a(259)),Nn={getApplyList:function(e){return se.post(ce.GET_APPLY_LIST,e)},updateApplyStatusForNormal:function(e){return se.post(ce.UPDATE_APPLY_STATUS,e)},updateApplyStatusForManager:function(e){return se.post(ce.UPDATE_APPLY_STATUS_ADMIN,e)},getApiCallInfoForNormal:function(e){return se.post(ce.GET_API_CALL_INFO,e)},getApiCallInfoForManager:function(e){return se.post(ce.GET_USER_API_CALL_INFO_ADMIN,e)},getApiCallErrorInfoForNormal:function(e){return se.post(ce.GET_API_CALL_ERROR_INFO,e)},getApiCallErrorInfoForManager:function(e){return se.post(ce.GET_API_CALL_ERROR_INFO_ADMIN,e)},getApiCallUrl:function(e){return se.post(ce.GET_API_CALL_URL,e)},queryApiCallLogForNormal:function(e){return se.post(ce.GET_API_CALL_ERROR_LOG,e)},queryApiCallLogForManager:function(e){return se.post(ce.GET_API_CALL_ERROR_LOG_ADMIN,e)},getApiCreatorInfo:function(e){return se.post(ce.GET_API_CREATOR_INFO,e)}},Pn=Nn,Hn=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Nn,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/api/mine.js"),{getApplyingList:function(e){return(e=e||{}).status=[0],function(t){return Pn.getApplyList(e).then(function(e){1===e.code&&t({type:In.a.GET_APPLYING_LIST,payload:e.data})})}},getAppliedList:function(e){return(e=e||{}).status||(e.status=[1,2,3,4]),function(t){return Pn.getApplyList(e).then(function(e){if(1===e.code)return t({type:In.a.GET_APPLYED_LIST,payload:e.data}),e})}},updateApplyStatus:function(e){var t="updateApplyStatusForNormal";return e.useAdmin&&(t="updateApplyStatusForManager"),function(a){return Pn[t](e).then(function(e){if(1===e.code)return e})}},getApiCallInfo:function(e){var t="getApiCallInfoForNormal";return e.useAdmin&&(t="getApiCallInfoForManager"),function(a){return Pn[t](e).then(function(e){if(1===e.code)return e})}},getApiCallErrorInfo:function(e){return function(t){return Pn.getApiCallErrorInfoForNormal(e).then(function(e){if(1===e.code)return e})}},getApiCallUrl:function(e){return function(t){return Pn.getApiCallUrl(e).then(function(e){if(1===e.code)return e})}},queryApiCallLog:function(e){var t="queryApiCallLogForNormal";return e.useAdmin&&(t="queryApiCallLogForManager"),function(a){return Pn[t](e).then(function(e){if(1===e.code)return e})}},getApiCreatorInfo:function(e){return function(t){return Pn.getApiCreatorInfo(e).then(function(e){if(1===e.code)return e})}}}),Un=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Hn,"mineActions","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/actions/mine/index.js"),a(109)),jn=ra.a.TextArea,Mn=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"render",value:function(){this.props.showRecord&&this.props.showRecord.replyTime;return s.a.createElement(Un.a,{visible:this.props.slidePaneShow,style:{right:"-20px",width:"80%",minHeight:"300px"},onClose:this.props.closeSlidePane},s.a.createElement("h1",{className:"box-title approved-card-pane-title"},"审批情况"),s.a.createElement("div",{style:{paddingLeft:30,marginBottom:30}},s.a.createElement("p",{className:"before-title-pane textarea-p","data-title":"申请说明："},s.a.createElement(jn,{disabled:!0,value:this.props.showRecord&&this.props.showRecord.applyContent,style:{width:200,color:"#999",fontSize:14},rows:4})),s.a.createElement("p",{style:{paddingLeft:70}},N.a.formatDateTime(this.props.showRecord&&this.props.showRecord.applyTime)),this.props.isApproved?s.a.createElement("div",null,s.a.createElement("p",{className:"before-title-pane textarea-p","data-title":"审批说明："},s.a.createElement(jn,{disabled:!0,value:this.props.showRecord&&this.props.showRecord.replyContent,style:{width:200,color:"#999",fontSize:14},rows:4})),s.a.createElement("p",{style:{paddingLeft:70}},N.a.formatDateTime(this.props.showRecord&&this.props.showRecord.replyTime))):null))}}]),t}(r.Component),Gn=Mn,Fn=Gn,Vn=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(jn,"TextArea","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/approvedSlidePane.js"),__REACT_HOT_LOADER__.register(Mn,"ApprovedSlidePane","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/approvedSlidePane.js"),__REACT_HOT_LOADER__.register(Gn,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/approvedSlidePane.js")),{applyTime:"gmt_modified"}),Bn={ascend:"asc",descend:"desc"},zn=ra.a.TextArea,qn=ra.a.Search,Kn=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={pageIndex:1,slidePaneShow:!1,sortedInfo:{},loading:!1,showRecord:{},apiName:""},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"getApplyingList",value:function(e){var t=this;this.setState({loading:!0}),this.props.getApplyingList(this.state.pageIndex,Vn[this.state.sortedInfo.columnKey],Bn[this.state.sortedInfo.order],this.state.apiName).then(function(){t.setState({loading:!1}),e&&e()})}},{key:"componentDidMount",value:function(){var e=this;this.getApplyingList(function(){e.openCard(e.props.apiId)})}},{key:"componentWillReceiveProps",value:function(e){this.props.apiId!=e.apiId&&e.apiId&&this.openCard(e.apiId)}},{key:"openCard",value:function(e){var t=this.getSource();if(t)for(var a in t){var n=t[a];if(e==n.apiId){this.openApprovedState(n);break}}}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;console.log(a),this.setState({pageIndex:e.current,sortedInfo:a},function(){n.getApplyingList()})}},{key:"openApprovedState",value:function(e){this.setState({slidePaneShow:!0,showRecord:e||{}})}},{key:"initColumns",value:function(){var e=this;this.state.sortedInfo;return[{title:"API名称",dataIndex:"apiName",key:"apiName",render:function(t,a){return s.a.createElement("a",{onClick:e.openApprovedState.bind(e,a)},t)}},{title:"描述",dataIndex:"apiDesc",key:"apiDesc"},{title:"申请说明",dataIndex:"applyContent",key:"applyContent",width:"250px"},{title:"申请时间",dataIndex:"applyTime",key:"applyTime",sorter:!0,render:function(e){return N.a.formatDateTime(e)}}]}},{key:"getSource",value:function(){return this.props.mine.apiList.applyingList.data}},{key:"getTotal",value:function(){return this.props.mine.apiList.applyingList&&this.props.mine.apiList.applyingList.totalCount||0}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:this.getTotal()}}},{key:"closeSlidePane",value:function(){this.setState({slidePaneShow:!1,showRecord:{}})}},{key:"handleApiSearch",value:function(e){var t=this;this.setState({apiName:e,pageIndex:1},function(){t.getApplyingList()})}},{key:"render",value:function(){var e=this;return s.a.createElement(je.a,{noHovering:!0},s.a.createElement(Fn,H()({},this.props,{slidePaneShow:this.state.slidePaneShow,showRecord:this.state.showRecord,closeSlidePane:this.closeSlidePane.bind(this)})),s.a.createElement("div",{className:"flex font-12"},s.a.createElement(qn,{placeholder:"输入API名称搜索",style:{width:150,margin:"10px 0px",marginLeft:"10px"},onSearch:this.handleApiSearch.bind(this)})),s.a.createElement(Ge.a,{rowKey:"id",rowClassName:function(t,a){return e.state.showRecord.apiId==t.apiId?"row-select":""},className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange}))}}]),t}(r.Component),Yn=Kn,Wn=Yn,Jn=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Vn,"sortType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/noApprovedCard.js"),__REACT_HOT_LOADER__.register(Bn,"orderType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/noApprovedCard.js"),__REACT_HOT_LOADER__.register(zn,"TextArea","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/noApprovedCard.js"),__REACT_HOT_LOADER__.register(qn,"Search","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/noApprovedCard.js"),__REACT_HOT_LOADER__.register(Kn,"NoApprovedCard","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/noApprovedCard.js"),__REACT_HOT_LOADER__.register(Yn,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/noApprovedCard.js")),ra.a.TextArea),Qn=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={phone:"",dtuicUserId:"",email:""},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.getApiCreatorInfo()}},{key:"componentWillReceiveProps",value:function(e){this.props.showRecord&&this.props.showRecord.apiId!==e.showRecord.apiId&&e.slidePaneShow&&this.getApiCreatorInfo(e.showRecord.apiId)}},{key:"getApiCreatorInfo",value:function(e){var t=this;(e=e||this.props.showRecord.apiId)&&this.props.getApiCreatorInfo(e).then(function(e){e&&t.setState({phone:e.data.phoneNumber,dtuicUserId:e.data.userName,email:e.data.email})})}},{key:"render",value:function(){return s.a.createElement(Un.a,{visible:this.props.slidePaneShow,style:{right:"-20px",width:"80%",minHeight:"300px"},onClose:this.props.closeSlidePane},s.a.createElement("h1",{className:"box-title approved-card-pane-title"},"详情"),s.a.createElement("div",{style:{paddingLeft:30,paddingTop:20}},s.a.createElement("p",null,"管理员已取消此接口的授权，您可以联系管理员咨询详细情况，管理员信息"),s.a.createElement("p",{style:{marginTop:20}},"用户名：",this.state.dtuicUserId),s.a.createElement("p",null,"手机号码：",this.state.phone),s.a.createElement("p",null,"邮箱：",this.state.email)))}}]),t}(r.Component),Xn=Qn,$n=Xn,Zn=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Jn,"TextArea","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/disabledCardSlidePane.js"),__REACT_HOT_LOADER__.register(Qn,"DisabledCardSlidePane","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/disabledCardSlidePane.js"),__REACT_HOT_LOADER__.register(Xn,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/disabledCardSlidePane.js")),function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={callUrl:""},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"getApiCallUrl",value:function(e){var t=this;e=e||this.props.showRecord.apiId,this.props.getApiCallUrl(e).then(function(e){e&&t.setState({callUrl:e.data})})}},{key:"componentDidMount",value:function(){this.getApiCallUrl()}},{key:"componentWillReceiveProps",value:function(e){e.showRecord&&this.props.showRecord.apiId!=e.showRecord.apiId&&e.slidePaneShow&&this.getApiCallUrl(e.showRecord.apiId)}},{key:"render",value:function(){var e="/api/market/detail/"+this.props.showRecord.apiId;return s.a.createElement("div",{style:{paddingLeft:30}},s.a.createElement("p",{style:{lineHeight:"30px"}},"调用URL：",this.state.callUrl),s.a.createElement(b.c,{to:e},"在Api市场中查看"))}}]),t}(r.Component)),ei=Zn,ti=ei,ai=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Zn,"ApiCallMethod","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/others/apiCallMethod.js"),__REACT_HOT_LOADER__.register(ei,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/others/apiCallMethod.js")),a(71));a(141),a(213),a(134),a(133);var ni,ii,ri,si,oi=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={apiId:"",data:{}},n.resize=function(){var e;return(e=n).__resize__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"getInfo",value:function(){var e=this;this.state.apiId&&this.props.getApiCallInfo(this.state.apiId,this.props.dateType).then(function(t){t&&e.setState({data:t.data},function(){e.initLineChart()})})}},{key:"componentDidMount",value:function(){this.setState({apiId:this.props.showRecord&&this.props.showRecord.apiId}),this.getInfo()}},{key:"componentWillReceiveProps",value:function(e){var t=this;(e.showRecord&&this.state.apiId!==e.showRecord.apiId||this.props.dateType!==e.dateType)&&this.setState({apiId:e.showRecord.apiId},function(){e.slidePaneShow&&t.getInfo()})}},{key:"__resize__REACT_HOT_LOADER__",value:function(){this.state.lineChart&&this.state.lineChart.resize()}},{key:"initLineChart",value:function(){if(this.state.data&&this.state.data.infoList){for(var e=this.state.data.infoList,t=[],a=[],n=[],i=0;i<e.length;i++)if(t.push(e[i].callCount),a.push(e[i].failRate),this.props.dateType)switch(this.props.dateType){case"1":n.push(N.a.formatHours(e[i].time));break;case"7":n.push(N.a.formatDateHours(e[i].time));break;case"30":n.push(N.a.formatDate(e[i].time))}var r=ai.init(document.getElementById("MyApiDetailState")),s=Object(Pe.cloneDeep)(nt);s.grid.right="40px",s.tooltip.formatter=function(e){for(var t=e[0].name,a=0,n=e.length;a<n;a++){var i="次";"失败率"==e[a].seriesName&&(i="%"),t+='<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e[a].color+'"></span>'+e[a].seriesName+" : "+e[a].value+i}return t},s.series=[{symbol:"none",name:"调用次数",data:t,type:"line",smooth:!0,itemStyle:{normal:{color:"#1C86EE"}}},{symbol:"none",name:"失败率",data:a,type:"line",smooth:!0,yAxisIndex:1,itemStyle:{normal:{color:"#EE0000"}}}],s.xAxis[0].data=n,console.log(s),r.setOption(s),this.setState({lineChart:r})}}},{key:"getDateText",value:function(){switch(this.props.dateType){case"1":return"24小时";case"7":return"7天";case"30":return"30天";default:return""}}},{key:"render",value:function(){return s.a.createElement("div",{style:{paddingLeft:30}},s.a.createElement(At.a,{gutter:130,className:"m-count padding-l20 height-101"},s.a.createElement(Et.a,{span:8},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:150}},s.a.createElement("span",{className:"m-count-title text-left"},"最近",this.getDateText(),"累计调用"),s.a.createElement("span",{className:"m-count-content font-black text-left"},this.state.data&&this.state.data.callCount||0,s.a.createElement("span",{style:{fontSize:12}},"次")))),s.a.createElement(Et.a,{span:6},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:100}},s.a.createElement("span",{className:"m-count-title text-left"},"最近",this.getDateText(),"失败率"),s.a.createElement("span",{className:"m-count-content font-red text-left"},this.state.data&&this.state.data.failRate||0,s.a.createElement("span",{style:{fontSize:12}},"%")))),s.a.createElement(Et.a,{span:8},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:150}},s.a.createElement("span",{className:"m-count-title text-left"},"累计调用"),s.a.createElement("span",{className:"m-count-content font-black text-left"},this.state.data&&this.state.data.totalCount||"---")))),s.a.createElement(He.a,{onResize:this.resize},s.a.createElement("article",{id:"MyApiDetailState",style:{width:"100%",height:"300px"}})))}}]),t}(r.Component),li=oi,ci=li,pi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(oi,"ApiCallState","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/others/apiCallState.js"),__REACT_HOT_LOADER__.register(li,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/others/apiCallState.js")),{1:"禁用",2:"未认证",3:"参数错误",4:"超时",5:"超出限制",6:"其他"}),ui=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={error:{},data:[],loading:!1,pageIndex:1,total:0,filter:{}},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.getErrorInfo()}},{key:"getErrorInfo",value:function(e){var t=this;(e=e||this.props.showRecord.apiId)&&(this.props.getApiCallErrorInfo(e).then(function(e){if(e){for(var a={},n=0;n<e.data.recordInfoList.length;n++){var i=e.data.recordInfoList[n],r=pi[i.type];r&&(a[r]={percent:i.rate,count:i.callNum})}t.setState({error:a})}}),this.props.queryApiCallLog(e,this.state.pageIndex,this.state.filter.bizType&&this.state.filter.bizType[0]).then(function(e){e&&t.setState({data:e.data.data,total:e.data.totalCount})}))}},{key:"componentWillReceiveProps",value:function(e){this.props.showRecord&&this.props.showRecord.apiId!==e.showRecord.apiId&&e.slidePaneShow&&this.getErrorInfo(e.showRecord.apiId)}},{key:"initColumns",value:function(){var e=this;return[{title:"调用时间",dataIndex:"invokeTime",key:"invokeTime",render:function(e){return N.a.formatDateTime(e)}},{title:"错误类型",dataIndex:"bizType",key:"bizType",render:function(e){return pi[e]},filters:[{text:"参数错误",value:"3"},{text:"禁用",value:"1"},{text:"未认证",value:"2"},{text:"超时",value:"4"},{text:"超出限制",value:"5"},{text:"其他",value:"6"}],filterMultiple:!1},{title:"错误日志",dataIndex:"content",key:"content",width:"50%"},{title:"操作",dataIndex:"",key:"deal",render:function(t,a){return s.a.createElement("a",{onClick:e.lookAllErrorText.bind(e,a.content)},"查看全部")}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:5,total:this.state.total}}},{key:"getSource",value:function(){return this.state.data}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,filter:t},function(){n.getErrorInfo()})}},{key:"lookAllErrorText",value:function(e){Zt.a.info({title:"错误日志",content:s.a.createElement("div",null,s.a.createElement("p",null,e)),onOk:function(){}})}},{key:"getErrorPercent",value:function(e){return this.state.error[e]&&this.state.error[e].percent||0}},{key:"getErrorCount",value:function(e){return this.state.error[e]&&this.state.error[e].count||0}},{key:"render",value:function(){return s.a.createElement("div",{style:{paddingLeft:20}},s.a.createElement("p",{style:{lineHeight:"30px",paddingLeft:"20px"},className:"child-span-padding-r20"},s.a.createElement("span",null,"参数错误: ",this.getErrorPercent("参数错误"),"% (",this.getErrorCount("参数错误"),"次)"),s.a.createElement("span",null,"禁用: ",this.getErrorPercent("禁用"),"% (",this.getErrorCount("禁用"),"次)"),s.a.createElement("span",null,"未认证: ",this.getErrorPercent("未认证"),"% (",this.getErrorCount("未认证"),"次)"),s.a.createElement("span",null,"超时: ",this.getErrorPercent("超时"),"% (",this.getErrorCount("超时"),"次)"),s.a.createElement("span",null,"超出限制: ",this.getErrorPercent("超出限制"),"% (",this.getErrorCount("超出限制"),"次)"),s.a.createElement("span",null,"其他: ",this.getErrorPercent("其他"),"% (",this.getErrorCount("其他"),"次)")),s.a.createElement(Ge.a,{rowKey:"id",className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange}))}}]),t}(r.Component),di=ui,_i=di,mi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(pi,"errorType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/others/errorLog.js"),__REACT_HOT_LOADER__.register(ui,"errorLog","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/others/errorLog.js"),__REACT_HOT_LOADER__.register(di,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/others/errorLog.js")),yt.a.Button),hi=yt.a.Group,gi=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={approvedText:"同意",applyText:"申请调用此接口，请批准",nowView:"callState",callStateDate:"1",errorLogDate:"7"},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"callback",value:function(e){console.log(e),this.setState({nowView:e})}},{key:"chooseCallStateDate",value:function(e){this.setState({callStateDate:e.target.value})}},{key:"chooseErrorLogDate",value:function(e){this.setState({errorLogDate:e.target.value})}},{key:"getDateTypeView",value:function(){switch(this.state.nowView){case"callState":return s.a.createElement("div",{className:"m-radio-group",key:"callStateDate",style:{marginTop:4,marginRight:28}},s.a.createElement(hi,{name:"callStateDate",defaultValue:this.state.callStateDate,className:"no-bd nobackground",onChange:this.chooseCallStateDate.bind(this)},s.a.createElement(mi,{value:"1"},"最近24小时"),s.a.createElement(mi,{value:"7"},"最近7天"),s.a.createElement(mi,{value:"30"},"最近30天")));case"errorLog":return s.a.createElement("div",{className:"m-radio-group",key:"errorLogDate",style:{marginTop:4,marginRight:28}},s.a.createElement(hi,{name:"errorLogDate",defaultValue:this.state.errorLogDate,className:"no-bd nobackground",onChange:this.chooseErrorLogDate.bind(this)},s.a.createElement(mi,{value:"7"},"最近7天")));default:return null}}},{key:"render",value:function(){var e=3==this.props.showRecord.status?null:s.a.createElement(ht.a.TabPane,{tab:"调用方式",key:"callMethod"},s.a.createElement(ti,this.props));return s.a.createElement(Un.a,{className:"m-tabs tabs-filter-show",visible:this.props.slidePaneShow,style:{right:"-20px",width:"80%",minHeight:"350px"},onClose:this.props.closeSlidePane},s.a.createElement(ht.a,{activeKey:this.state.nowView,onChange:this.callback.bind(this),tabBarExtraContent:this.getDateTypeView()},s.a.createElement(ht.a.TabPane,{tab:"调用情况",key:"callState"},s.a.createElement(ci,H()({},this.props,{dateType:this.state.callStateDate}))),s.a.createElement(ht.a.TabPane,{tab:"错误日志",key:"errorLog"},s.a.createElement(_i,H()({},this.props,{dateType:this.state.errorLogDate}))),e))}}]),t}(r.Component),Ai=gi,fi=Ai,Ei=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(mi,"RadioButton","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/detailSlidePane.js"),__REACT_HOT_LOADER__.register(hi,"RadioGroup","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/detailSlidePane.js"),__REACT_HOT_LOADER__.register(gi,"detailSlidePane","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/detailSlidePane.js"),__REACT_HOT_LOADER__.register(Ai,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/detailSlidePane.js")),Zt.a.confirm),ki=ra.a.Search,bi={0:"inhand",1:"success",2:"notPass",3:"stop",4:"disabled"},Ti={applyTime:"gmt_create"},yi={ascend:"asc",descend:"desc"},vi=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={pageIndex:1,slidePaneShowNoApproved:!1,slidePaneShowDisabled:!1,slidePaneShowSuccess:!1,loading:!1,sortedInfo:{},filterInfo:{},showRecord:{},apiName:""},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"getAppliedList",value:function(){var e=this;this.setState({loading:!0}),this.props.getAppliedList(this.state.pageIndex,Ti[this.state.sortedInfo.columnKey],yi[this.state.sortedInfo.order],this.state.filterInfo.status,this.state.apiName).then(function(t){if(e.props.apiId&&t)for(var a in t.data.data){var n=t.data.data[a];if(e.props.apiId==n.apiId){e.apiClick(n);break}}e.setState({loading:!1})})}},{key:"componentDidMount",value:function(){this.getAppliedList()}},{key:"componentWillReceiveProps",value:function(e){if(this.props.apiId!=e.apiId&&e.apiId){var t=this.getSource();if(t)for(var a in t.data){var n=t.data[a];if(e.apiId==n.apiId){this.dealClick(n);break}}}}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;console.log(t),this.setState({pageIndex:e.current,sortedInfo:a,filterInfo:t},function(){n.getAppliedList()})}},{key:"closeSlidePane",value:function(){this.setState({slidePaneShowNoApproved:!1,slidePaneShowDisabled:!1,slidePaneShowSuccess:!1,showRecord:{}})}},{key:"apiClick",value:function(e){var t=this["state"+bi[e.status]];t&&t.call(this,e)}},{key:"statesuccess",value:function(e){this.setState({slidePaneShowSuccess:!0,slidePaneShowNoApproved:!1,slidePaneShowDisabled:!1,showRecord:e||{}})}},{key:"statenotPass",value:function(e){this.setState({slidePaneShowSuccess:!1,slidePaneShowNoApproved:!0,slidePaneShowDisabled:!1,showRecord:e||{}})}},{key:"statestop",value:function(e){this.setState({slidePaneShowSuccess:!0,slidePaneShowNoApproved:!1,slidePaneShowDisabled:!1,showRecord:e||{}})}},{key:"statedisabled",value:function(e){this.setState({slidePaneShowSuccess:!1,slidePaneShowNoApproved:!1,slidePaneShowDisabled:!0,showRecord:e||{}})}},{key:"dealClick",value:function(e){var t=this["deal"+bi[e.status]];t&&t.call(this,e)}},{key:"dealsuccess",value:function(e){var t=this;Ei({title:"确认停止",content:"确认停止接口？",onOk:function(){t.props.updateApplyStatus(e.id,3).then(function(e){e&&$.a.success("停止成功"),t.getAppliedList()})},onCancel:function(){console.log("Cancel")}})}},{key:"dealstop",value:function(e){var t=this;Ei({title:"确认开启",content:"确认开启接口？",onOk:function(){t.props.updateApplyStatus(e.id,1).then(function(e){e&&$.a.success("开启成功"),t.getAppliedList()})},onCancel:function(){console.log("Cancel")}})}},{key:"dealnotPass",value:function(e){this.props.router.push("/api/market")}},{key:"initColumns",value:function(){var e=this;return[{title:"API名称",dataIndex:"apiName",key:"apiName",render:function(t,a){var n=1==a.apiStatus,i=n?"(全平台禁用)":"";return s.a.createElement("a",{className:n?"disable-all":"",onClick:e.apiClick.bind(e,a)},t+i)}},{title:"授权状态",dataIndex:"status",key:"status",render:function(e){return s.a.createElement("span",{className:"state-"+bi[e]},{success:"已通过",disabled:"取消授权",stop:"停用",notPass:"已拒绝"}[bi[e]])},filters:[{text:"已通过",value:"1"},{text:"已拒绝",value:"2"},{text:"停用",value:"3"},{text:"取消授权",value:"4"}]},{title:"描述",dataIndex:"apiDesc",key:"apiDesc",width:300},{title:"最近24小时调用(次)",dataIndex:"recentCallNum",key:"recentCallNum"},{title:"最近24小时失败率",dataIndex:"recentFailRate",key:"recentFailRate",render:function(e){return e+"%"}},{title:"累计调用",dataIndex:"totalCallNum",key:"totalCallNum"},{title:"订购时间",dataIndex:"applyTime",key:"applyTime",sorter:!0,render:function(e){return N.a.formatDateTime(e)}},{title:"操作",dataIndex:"deal",key:"deal",render:function(t,a){var n={success:"停用",disabled:"",stop:"启用",notPass:"再次申请"};return n[bi[a.status]]?s.a.createElement("a",{onClick:e.dealClick.bind(e,a)},n[bi[a.status]]):null}}]}},{key:"getSource",value:function(){return this.props.mine.apiList.appliedList.data||[]}},{key:"getTotal",value:function(){return this.props.mine.apiList.appliedList&&this.props.mine.apiList.appliedList.totalCount||0}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:this.getTotal()}}},{key:"handleApiSearch",value:function(e){var t=this;this.setState({apiName:e,pageIndex:1},function(){t.getAppliedList()})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(je.a,{noHovering:!0},s.a.createElement(Fn,H()({},this.props,{isApproved:!0,showRecord:this.state.showRecord,slidePaneShow:this.state.slidePaneShowNoApproved,closeSlidePane:this.closeSlidePane.bind(this)})),s.a.createElement($n,H()({},this.props,{showRecord:this.state.showRecord,slidePaneShow:this.state.slidePaneShowDisabled,closeSlidePane:this.closeSlidePane.bind(this)})),s.a.createElement(fi,H()({style:{right:"0px"}},this.props,{showRecord:this.state.showRecord,slidePaneShow:this.state.slidePaneShowSuccess,closeSlidePane:this.closeSlidePane.bind(this)})),s.a.createElement("div",{className:"flex font-12"},s.a.createElement(ki,{placeholder:"输入API名称搜索",style:{width:150,margin:"10px 0px",marginLeft:"10px"},onSearch:this.handleApiSearch.bind(this)})),s.a.createElement(Ge.a,{rowClassName:function(t,a){return e.state.showRecord.apiId==t.apiId?"row-select":""},rowKey:"apiId",className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange})))}}]),t}(r.Component),Ci=vi,wi=Ci,Di=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ei,"confirm","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(ki,"Search","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(bi,"exchangeDic","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(Ti,"sortType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(yi,"orderType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(vi,"ApprovedCard","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(Ci,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/approvedCard.js")),function(e){var t=e.user;return{mine:e.mine,user:t}}),Oi=function(e){return{getApplyingList:function(t,a,n,i){return e(Hn.getApplyingList({currentPage:t,pageSize:20,orderBy:a,sort:n,apiName:i}))},getAppliedList:function(t,a,n,i,r){return e(Hn.getAppliedList({currentPage:t,pageSize:20,orderBy:a,sort:n,status:i,apiName:r}))},updateApplyStatus:function(t,a){return e(Hn.updateApplyStatus({applyId:t,status:a}))},getApiCallInfo:function(t,a){return e(Hn.getApiCallInfo({apiId:t,time:a}))},getApiCallErrorInfo:function(t){return e(Hn.getApiCallErrorInfo({apiId:t}))},getApiCallUrl:function(t){return e(Hn.getApiCallUrl({apiId:t}))},queryApiCallLog:function(t,a,n){return e(Hn.queryApiCallLog({apiId:t,currentPage:a,bizType:n,pageSize:5}))},getApiCreatorInfo:function(t){return e(Hn.getApiCreatorInfo({apiId:t}))}}},Ri=Object(T.b)(Di,Oi)(ni=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={nowView:"notApproved",pageIndex:1},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"handleClick",value:function(e){this.setState({nowView:e}),"approved"==e?this.props.router.replace("/api/mine/approved"):this.props.router.replace("/api/mine")}},{key:"componentWillMount",value:function(){var e=this.props.router.params.view;e&&this.setState({nowView:e})}},{key:"getCardView",value:function(){return this.state.nowView&&"notApproved"==this.state.nowView?s.a.createElement(Wn,this.props):s.a.createElement(wi,this.props)}},{key:"render",value:function(){this.props.children;return s.a.createElement("div",{className:" api-mine nobackground m-card height-auto m-tabs"},s.a.createElement("h1",{className:"box-title"},"我的API"),s.a.createElement(je.a,{style:{marginTop:"0px"},className:"box-1",noHovering:!0},s.a.createElement(ht.a,{defaultActiveKey:this.state.nowView,onChange:this.handleClick.bind(this)},s.a.createElement(ht.a.TabPane,{tab:"未审批",key:"notApproved"},s.a.createElement(Wn,H()({apiId:this.props.location.query&&this.props.location.query.apiId},this.props))),s.a.createElement(ht.a.TabPane,{tab:"已审批",key:"approved"},s.a.createElement(wi,H()({apiId:this.props.location.query&&this.props.location.query.apiId},this.props))))))}}]),t}(r.Component))||ni,xi=Ri,Si=xi,Li=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Di,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/index.js"),__REACT_HOT_LOADER__.register(Oi,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/index.js"),__REACT_HOT_LOADER__.register(Ri,"MyAPI","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/index.js"),__REACT_HOT_LOADER__.register(xi,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/myApi/index.js")),void 0),Ii=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={applyBox:!1,apply:{apiId:"",apiName:"",desc:""}},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"getTopRightButton",value:function(){var e=this.getValue("applyStatus");return 1==e||3==e?null:0==e?s.a.createElement(ta.a,{onClick:this.jumpToMine.bind(this),size:"large",type:"primary"},"查看审批情况"):s.a.createElement(ta.a,{onClick:this.doApply.bind(this),size:"large",type:"primary"},"立即订购")}},{key:"doApply",value:function(){this.setState({applyBox:!0,apply:{apiId:this.props.apiId,apiName:this.getApiValue("apiName"),desc:this.getApiValue("desc")}})}},{key:"back",value:function(){this.props.router.replace("/api/market")}},{key:"getValue",value:function(e){var t=this.props.apiMarket&&this.props.apiMarket.apiCallInfo&&this.props.apiMarket.apiCallInfo[this.props.apiId];return t?t[e]:null}},{key:"getApiValue",value:function(e){var t=this.props.apiMarket&&this.props.apiMarket.api&&this.props.apiMarket.api[this.props.apiId];return t?t[e]:null}},{key:"showApplySuccessModal",value:function(){Li=Zt.a.success({title:"申请提交成功",content:s.a.createElement("span",null,"您可以在 ",s.a.createElement("a",{onClick:this.jumpToMine.bind(this)},"我的API")," 中查看审批进度"),okText:"确定"})}},{key:"jumpToMine",value:function(){Li&&Li.destroy(),this.props.router.push("/api/mine")}},{key:"jumpToMineApproved",value:function(){this.props.router.push("/api/mine/approved?apiId="+this.props.apiId)}},{key:"handleOk",value:function(){this.setState({applyBox:!1}),this.showApplySuccessModal()}},{key:"handleCancel",value:function(){this.setState({applyBox:!1})}},{key:"render",value:function(){var e=this.props.router.location.query&&this.props.router.location.query.isHideBack?null:s.a.createElement(Et.a,{span:1},s.a.createElement(j.a,{type:"left-circle-o",onClick:this.back.bind(this),style:{fontSize:18,cursor:"pointer"}}));return s.a.createElement(je.a,{className:"box-1",noHovering:!0},s.a.createElement(Tn,{show:this.state.applyBox,successCallBack:this.handleOk.bind(this),cancelCallback:this.handleCancel.bind(this),apiId:this.state.apply.apiId,apiName:this.state.apply.apiName,desc:this.state.apply.desc}),s.a.createElement(At.a,{className:"m-count",style:{height:"auto"}},e,s.a.createElement(Et.a,{span:12},s.a.createElement(At.a,{className:"header-title"},this.getApiValue("apiName")),s.a.createElement(At.a,{className:"header-content"},this.getApiValue("desc"))),s.a.createElement(Et.a,{span:3},s.a.createElement("section",{className:"m-count-section ",style:{width:150,marginTop:0}},s.a.createElement("span",{className:"m-count-title text-left"},"订购人数"),s.a.createElement("span",{className:"m-count-content font-black text-left"},N.a.toQfw(this.getValue("applyNum")||0),s.a.createElement("span",{style:{fontSize:12}})))),s.a.createElement(Et.a,{span:5},s.a.createElement("section",{className:"m-count-section",style:{width:200,marginTop:0}},s.a.createElement("span",{className:"m-count-title text-left"},"累计调用"),s.a.createElement("span",{className:"m-count-content font-black text-left"},N.a.toQfw(this.getValue("apiCallNum")||0),s.a.createElement("span",{style:{fontSize:12}})))),s.a.createElement(Et.a,{span:3},this.getTopRightButton())))}}]),t}(r.Component),Ni=Ii,Pi=Ni,Hi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Li,"modal","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/detail/topCard.js"),__REACT_HOT_LOADER__.register(Ii,"TopCard","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/detail/topCard.js"),__REACT_HOT_LOADER__.register(Ni,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/detail/topCard.js")),function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t}}),Ui=function(e){return{getApiDetail:function(t){e(an.getApiDetail({apiId:t}))},getApiExtInfo:function(t){e(an.getApiExtInfo({apiId:t}))}}},ji=Object(T.b)(Hi,Ui)(ii=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={apiId:""},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.router.params&&this.props.router.params.api;t&&this.setState({apiId:t},function(){e.props.getApiDetail(t),e.props.getApiExtInfo(t)})}},{key:"getRequestDataSource",value:function(){return this.getValue("reqParam")||[]}},{key:"getRequestColumns",value:function(){return[{title:"参数名",dataIndex:"paramName",key:"paramName"},{title:"数据类型",dataIndex:"paramType",key:"paramType"},{title:"是否必填",dataIndex:"required",key:"required",render:function(e){return e?"是":"否"}},{title:"说明",dataIndex:"desc",key:"desc"}]}},{key:"getResponseDataSource",value:function(){return this.getValue("respParam")||[]}},{key:"getResponseColumns",value:function(){return[{title:"参数名",dataIndex:"paramName",key:"paramName"},{title:"数据类型",dataIndex:"paramType",key:"paramType"},{title:"是否必填",dataIndex:"required",key:"required",render:function(e){return e?"是":"否"}},{title:"说明",dataIndex:"desc",key:"desc"}]}},{key:"getValue",value:function(e){var t=this.props.apiMarket&&this.props.apiMarket.api&&this.props.apiMarket.api[this.state.apiId];return t?t[e]:null}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(Pi,H()({},this.state,this.props)),s.a.createElement(je.a,{className:"box-1",noHovering:!0},s.a.createElement("section",null,s.a.createElement("h1",{className:"title-border-l-blue"},"基本信息"),s.a.createElement("div",{style:{marginTop:10}},s.a.createElement("p",{"data-title":"支持格式：",className:"pseudo-title p-line"},this.getValue("supportType")),s.a.createElement("p",{"data-title":"请求协议：",className:"pseudo-title p-line"},this.getValue("reqProtocol")),s.a.createElement("p",{"data-title":"请求方式：",className:"pseudo-title p-line"},this.getValue("reqMethod")))),s.a.createElement(At.a,{gutter:30,style:{marginTop:19.3}},s.a.createElement(Et.a,{span:11},s.a.createElement("section",null,s.a.createElement("h1",{className:"title-border-l-blue"},"请求参数"),s.a.createElement(Ge.a,{rowKey:"paramName",style:{marginTop:18},className:"m-table border-table",pagination:!1,dataSource:this.getRequestDataSource(),columns:this.getRequestColumns()}))),s.a.createElement(Et.a,{span:11},s.a.createElement("section",null,s.a.createElement("h1",{className:"title-border-l-blue"},"返回参数"),s.a.createElement(Ge.a,{rowKey:"paramName",style:{marginTop:18},className:"m-table border-table",pagination:!1,dataSource:this.getResponseDataSource(),columns:this.getResponseColumns()})))),s.a.createElement("section",{style:{marginTop:18}},s.a.createElement("h1",{className:"title-border-l-blue"},"JSON样例"),s.a.createElement("div",{style:{marginTop:18}},s.a.createElement("pre",null,Y()({inFields:{id:175,date:"2017-09-08 12:33:23",in:"12,34,45"}},null,"    \r"))))))}}]),t}(r.Component))||ii,Mi=ji,Gi=Mi,Fi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Hi,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/detail/index.js"),__REACT_HOT_LOADER__.register(Ui,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/detail/index.js"),__REACT_HOT_LOADER__.register(ji,"APIDetail","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/detail/index.js"),__REACT_HOT_LOADER__.register(Mi,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/market/detail/index.js")),function(e){function t(){return m()(this,t),f()(this,(t.__proto__||d()(t)).apply(this,arguments))}return k()(t,e),g()(t,[{key:"getTopRightButton",value:function(){var e=Xe[this.getValue("status")];return e?"stop"==e?s.a.createElement("div",null,s.a.createElement(ta.a,{onClick:this.props.openApi,style:{marginRight:"5px"}},"开启"),s.a.createElement(ta.a,{onClick:this.editApi.bind(this,this.props.apiId),style:{marginRight:"5px"},type:"primary"},"编辑"),s.a.createElement(ta.a,{onClick:this.props.deleteApi,type:"danger"},"删除")):s.a.createElement(ta.a,{onClick:this.props.closeApi,size:"large",type:"danger"},"禁用"):null}},{key:"editApi",value:function(e){this.props.router.push("/api/manage/editApi/"+e)}},{key:"back",value:function(){this.props.router.goBack()}},{key:"openApiDetail",value:function(){window.open(location.origin+location.pathname+"#/api/market/detail/"+this.props.apiId+"?isHideBack=true")}},{key:"getValue",value:function(e){var t=this.props.apiMarket&&this.props.apiMarket.apiCallInfo&&this.props.apiMarket.apiCallInfo[this.props.apiId];return t?t[e]:null}},{key:"render",value:function(){return s.a.createElement(je.a,{className:"box-1",noHovering:!0},s.a.createElement(At.a,{className:"m-count",style:{height:"auto"}},s.a.createElement(Et.a,{span:1},s.a.createElement(j.a,{type:"left-circle-o",onClick:this.back.bind(this),style:{fontSize:18,cursor:"pointer"}})),s.a.createElement(Et.a,{span:10},s.a.createElement(At.a,{className:"header-title"},this.getValue("apiName")),s.a.createElement(At.a,{className:"header-content"},this.getValue("apiDesc")),s.a.createElement(At.a,{className:"header-content"},s.a.createElement("a",{onClick:this.openApiDetail.bind(this)},"查看详情"))),s.a.createElement(Et.a,{span:3},s.a.createElement("section",{className:"m-count-section ",style:{width:150,marginTop:0}},s.a.createElement("span",{className:"m-count-title text-left"},"订购人数"),s.a.createElement("span",{className:"m-count-content font-black text-left"},N.a.toQfw(this.getValue("applyNum")||0),s.a.createElement("span",{style:{fontSize:12}})))),s.a.createElement(Et.a,{span:5},s.a.createElement("section",{className:"m-count-section",style:{width:200,marginTop:0}},s.a.createElement("span",{className:"m-count-title text-left"},"累计调用"),s.a.createElement("span",{className:"m-count-content font-black text-left"},N.a.toQfw(this.getValue("apiCallNum")||0),s.a.createElement("span",{style:{fontSize:12}})))),s.a.createElement(Et.a,{span:5},this.getTopRightButton())))}}]),t}(r.Component)),Vi=Fi,Bi=Vi,zi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Fi,"ManageTopCard","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/topCard.js"),__REACT_HOT_LOADER__.register(Vi,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/topCard.js")),{1:"disable",2:"unauthorize",3:"paramerror",4:"timeout",5:"outlimit",6:"other"}),qi={disable:"禁用",unauthorize:"未认证",paramerror:"参数错误",timeout:"超时",outlimit:"超过限制",other:"其他"},Ki=function(e){return{}},Yi=function(e){return{getApiCallErrorInfo:function(t,a){return e(on.getApiCallErrorInfo({apiId:t,time:a}))},queryApiCallLog:function(t,a,n){return e(Hn.queryApiCallLog({apiId:t,currentPage:a,bizType:n,useAdmin:!0}))}}},Wi=Object(T.b)(Ki,Yi)(ri=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={error:{},data:[],loading:!1,pageIndex:1,total:0,filter:{}},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.getErrorInfo()}},{key:"getErrorInfo",value:function(e){var t=this;(e=e||this.props.apiId)&&(this.props.getApiCallErrorInfo(e,this.props.dateType).then(function(e){if(e){for(var a={},n=0;n<e.data.recordInfoList.length;n++){var i=e.data.recordInfoList[n],r=zi[i.type];r&&(a[r]={percent:i.rate,count:i.callNum})}t.setState({error:a})}}),this.props.queryApiCallLog(e,this.state.pageIndex,this.state.filter.bizType&&this.state.filter.bizType[0]).then(function(e){e&&t.setState({data:e.data.data,total:e.data.totalCount})}))}},{key:"componentWillReceiveProps",value:function(e){this.props.apiId!==e.apiId&&this.getErrorInfo(e.apiId)}},{key:"initColumns",value:function(){var e=this;return[{title:"调用时间",dataIndex:"invokeTime",key:"invokeTime",render:function(e){return N.a.formatDateTime(e)}},{title:"调用用户",dataIndex:"userName",key:"userName"},{title:"错误类型",dataIndex:"bizType",key:"bizType",render:function(e){return qi[zi[e]]},filters:[{text:"参数错误",value:"3"},{text:"禁用",value:"1"},{text:"未认证",value:"2"},{text:"超时",value:"4"},{text:"超过限制",value:"5"},{text:"其他",value:"6"}],filterMultiple:!1},{title:"错误日志",dataIndex:"content",key:"content",width:"50%"},{title:"操作",dataIndex:"",key:"deal",render:function(t,a){return s.a.createElement("a",{onClick:e.lookAllErrorText.bind(e,a.content)},"查看全部")}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:10,total:this.state.total}}},{key:"getSource",value:function(){return this.state.data}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,filter:t},function(){n.getErrorInfo()})}},{key:"lookAllErrorText",value:function(e){Zt.a.info({title:"错误日志",content:s.a.createElement("div",null,s.a.createElement("p",null,e)),onOk:function(){}})}},{key:"getErrorPercent",value:function(e){return this.state.error[e]&&this.state.error[e].percent||0}},{key:"getErrorCount",value:function(e){return this.state.error[e]&&this.state.error[e].count||0}},{key:"render",value:function(){var e=this.getSource(),t="m-table monitor-table table-p-l20";return e.length<3&&(t+=" mini-filter"),s.a.createElement("div",null,s.a.createElement("p",{style:{lineHeight:"1",padding:"14px 0px 14px 20px"},className:"child-span-padding-r20"},s.a.createElement("span",null,"参数错误: ",this.getErrorPercent("paramerror"),"% (",this.getErrorCount("paramerror"),"次)"),s.a.createElement("span",null,"禁用: ",this.getErrorPercent("disable"),"% (",this.getErrorCount("disable"),"次)"),s.a.createElement("span",null,"未认证: ",this.getErrorPercent("unauthorize"),"% (",this.getErrorCount("unauthorize"),"次)"),s.a.createElement("span",null,"超时: ",this.getErrorPercent("timeout"),"% (",this.getErrorCount("timeout"),"次)"),s.a.createElement("span",null,"超过限制: ",this.getErrorPercent("outlimit"),"% (",this.getErrorCount("outlimit"),"次)"),s.a.createElement("span",null,"其他: ",this.getErrorPercent("other"),"% (",this.getErrorCount("other"),"次)")),s.a.createElement(Ge.a,{rowKey:"id",className:t,columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:e,onChange:this.onTableChange}))}}]),t}(r.Component))||ri,Ji=Wi,Qi=Ji,Xi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(zi,"errorType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/errorLog.js"),__REACT_HOT_LOADER__.register(qi,"errorExchange","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/errorLog.js"),__REACT_HOT_LOADER__.register(Ki,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/errorLog.js"),__REACT_HOT_LOADER__.register(Yi,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/errorLog.js"),__REACT_HOT_LOADER__.register(Wi,"ManageErrorLog","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/errorLog.js"),__REACT_HOT_LOADER__.register(Ji,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/errorLog.js")),function(e){function t(){return m()(this,t),f()(this,(t.__proto__||d()(t)).apply(this,arguments))}return k()(t,e),g()(t,[{key:"getSource",value:function(){return this.props.data||[]}},{key:"render",value:function(){return s.a.createElement(Ge.a,{rowKey:function(e){return e.userId},style:{marginTop:"20px",marginBottom:"20px"},className:"m-table border-table table-p-l20",rowClassName:function(){return"h-33"},pagination:!1,columns:[{title:"排名",dataIndex:"rank",key:"rank",className:"color-666",render:function(e,t,a){return s.a.createElement("span",{className:"rank-number rank-number_"+(a+1)},a+1)}},{title:"用户",dataIndex:"userName",key:"userName",className:"color-666"},{title:"调用次数",dataIndex:"callNum",key:"callNum",className:"color-666"}],dataSource:this.getSource(),onChange:this.onTableChange})}}]),t}(r.Component)),$i=Xi,Zi=$i,er=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Xi,"ManageTopCall","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/topCall.js"),__REACT_HOT_LOADER__.register($i,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/topCall.js")),a(71));a(141),a(213),a(134),a(133);var tr,ar,nr,ir,rr,sr=function(e){var t=e.user;return{apiMarket:e.apiMarket,apiManage:e.apiManage,user:t}},or=function(e){return{getApiCallUserRankList:function(t,a){return e(on.getApiCallUserRankList({apiId:t,time:a}))},getApiCallInfo:function(t,a){return e(Hn.getApiCallInfo({apiId:t,time:a,useAdmin:!0}))}}},lr=Object(T.b)(sr,or)(si=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={topCallUser:"",failPercent:"",callCount:"",callList:[],topCallList:[],apiId:"",dateType:""},n.resize=function(){var e;return(e=n).__resize__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({apiId:this.props.apiId,dateType:this.props.dateType},function(){e.getApiCallUserRankList(),e.getApiCallInfoList()})}},{key:"componentWillReceiveProps",value:function(e){var t=this;console.log(e,this.state),this.state.apiId==e.apiId&&this.state.dateType==e.dateType||this.setState({apiId:e.apiId,dateType:e.dateType},function(){t.getApiCallUserRankList(),t.getApiCallInfoList()})}},{key:"getApiCallInfoList",value:function(){var e=this,t=this.state.apiId,a=this.state.dateType;t&&a&&this.props.getApiCallInfo(t,a).then(function(t){t&&e.setState({callList:t.data.infoList,topCallUser:t.data.topCallUserName,failPercent:t.data.failRate,callCount:t.data.callCount},function(){e.initLineChart()})})}},{key:"getApiCallUserRankList",value:function(){var e=this,t=this.state.apiId,a=this.state.dateType;t&&a&&this.props.getApiCallUserRankList(t,a).then(function(t){t&&e.setState({topCallList:t.data})})}},{key:"__resize__REACT_HOT_LOADER__",value:function(){this.state.lineChart&&this.state.lineChart.resize()}},{key:"initLineChart",value:function(){for(var e=this.state.callList,t=[],a=[],n=[],i=0;i<e.length;i++)switch(t.push(e[i].callCount),a.push(e[i].failRate),this.props.dateType){case"1":n.push(N.a.formatHours(e[i].time));break;case"7":n.push(N.a.formatDateHours(e[i].time));break;case"30":case"-1":n.push(N.a.formatDate(e[i].time))}var r=er.init(document.getElementById("manageApiDetail")),s=Object(Pe.cloneDeep)(nt);s.tooltip.formatter=function(e){for(var t=e[0].name,a=0,n=e.length;a<n;a++){var i="次";"失败率"==e[a].seriesName&&(i="%"),t+='<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e[a].color+'"></span>'+e[a].seriesName+" : "+e[a].value+i}return t},s.series=[{symbol:"none",name:"调用次数",data:t,type:"line",smooth:!0,itemStyle:{normal:{color:"#1C86EE"}}},{symbol:"none",name:"失败率",data:a,type:"line",smooth:!0,yAxisIndex:1,itemStyle:{normal:{color:"#EE0000"}}}],s.xAxis[0].data=n,console.log(s),r.setOption(s),this.setState({lineChart:r})}},{key:"getDateText",value:function(){switch(this.props.dateType){case"1":return"24小时";case"7":return"7天";case"30":return"30天";case"-1":return"历史以来";default:return""}}},{key:"render",value:function(){return s.a.createElement("div",{style:{paddingLeft:"20px",paddingRight:"20px"}},s.a.createElement(At.a,null,s.a.createElement(Et.a,{span:16},s.a.createElement(At.a,{gutter:100,className:"m-count padding-l20 height-101"},s.a.createElement(Et.a,{span:6},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:150}},s.a.createElement("span",{className:"m-count-title text-left"},this.getDateText(),"累计调用"),s.a.createElement("span",{className:"m-count-content font-black text-left"},this.state.callCount||0,s.a.createElement("span",{style:{fontSize:12}},"次")))),s.a.createElement(Et.a,{span:4},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:100}},s.a.createElement("span",{className:"m-count-title text-left"},this.getDateText(),"失败率"),s.a.createElement("span",{className:"m-count-content font-red text-left"},this.state.failPercent||0,s.a.createElement("span",{style:{fontSize:12}},"%"))))),s.a.createElement(He.a,{onResize:this.resize},s.a.createElement("article",{id:"manageApiDetail",style:{width:"100%",height:"300px"}}))),s.a.createElement(Et.a,{span:8,style:{paddingTop:"20px"}},s.a.createElement("p",{style:{fontWeight:"bold",lineHeight:1,fontSize:"14px"}},"排行榜"),s.a.createElement(Zi,{data:this.state.topCallList}))))}}]),t}(r.Component))||si,cr=lr,pr=cr,ur=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(sr,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/callState.js"),__REACT_HOT_LOADER__.register(or,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/callState.js"),__REACT_HOT_LOADER__.register(lr,"ApiManageCallState","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/callState.js"),__REACT_HOT_LOADER__.register(cr,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/callState.js")),function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={pageIndex:1,filter:{},sortedInfo:{}},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"initColumns",value:function(){var e=this;return[{title:"用户",dataIndex:"userName",key:"userName"},{title:"状态",dataIndex:"status",key:"status",filters:[{text:"正常",value:"1"},{text:"停用",value:"3"},{text:"取消授权",value:"4"}],render:function(e,t){return s.a.createElement("span",{className:"state-"+Je[e]},{success:"正常",stop:"停用",disabled:"取消授权"}[Je[e]])}},{title:"最近24小时调用",dataIndex:"recent24HCallNum",key:"recent24HCallNum"},{title:"最近24小时失败率",dataIndex:"recent24HFailRate",key:"recent24HFailRate",render:function(e){return e+"%"}},{title:"最近7天调用",dataIndex:"recent7DCallNum",key:"recent7DCallNum"},{title:"最近30天调用",dataIndex:"recent30DCallNum",key:"recent30DCallNum"},{title:"累计调用",dataIndex:"totalCallNum",key:"totalCallNum"},{title:"订购时间",dataIndex:"applyTime",key:"applyTime",render:function(e){return N.a.formatDateTime(e)}},{title:"操作",dataIndex:"",key:"deal",render:function(t,a){return"disabled"!=Je[a.status]?s.a.createElement("a",{onClick:function(){e.props.cancelApi(a.applyId)}},"取消授权"):s.a.createElement("a",{onClick:function(){e.props.applyApi(a.applyId)}},"恢复授权")}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:10,total:this.props.total}}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){this.setState({pageIndex:e.current,filter:t,sortedInfo:a}),this.props.tableChange({page:e.current,filter:t,sortedInfo:a})}},{key:"lookAllErrorText",value:function(){console.log("lookAllErrorText")}},{key:"render",value:function(){return s.a.createElement(Ge.a,{rowKey:"applyId",className:"m-table monitor-table table-p-l20",columns:this.initColumns(),loading:this.props.loading,pagination:this.getPagination(),dataSource:this.props.data,onChange:this.onTableChange})}}]),t}(r.Component)),dr=ur,_r=dr,mr=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ur,"EnableTable","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyStateTable/enableTable.js"),__REACT_HOT_LOADER__.register(dr,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyStateTable/enableTable.js")),function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={pageIndex:1,filter:{},sortedInfo:{}},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"initColumns",value:function(){return[{title:"用户",dataIndex:"userName",key:"userName"},{title:"最近24小时调用",dataIndex:"recent24HCallNum",key:"recent24HCallNum"},{title:"最近24小时失败率",dataIndex:"recent24HFailRate",key:"recent24HFailRate",render:function(e){return e+"%"}},{title:"最近7天调用",dataIndex:"recent7DCallNum",key:"recent7DCallNum"},{title:"最近30天调用",dataIndex:"recent30DCallNum",key:"recent30DCallNum"},{title:"累计调用",dataIndex:"totalCallNum",key:"totalCallNum"},{title:"订购时间",dataIndex:"applyTime",key:"applyTime",render:function(e){return N.a.formatDateTime(e)}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:10,total:this.props.total}}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){this.setState({pageIndex:e.current,filter:t,sortedInfo:a}),this.props.tableChange({page:e.current,filter:t,sortedInfo:a})}},{key:"lookAllErrorText",value:function(){console.log("lookAllErrorText")}},{key:"render",value:function(){return s.a.createElement(Ge.a,{rowKey:"applyId",className:"m-table monitor-table table-p-l20",columns:this.initColumns(),loading:this.props.loading,pagination:this.getPagination(),dataSource:this.props.data,onChange:this.onTableChange})}}]),t}(r.Component)),hr=mr,gr=hr,Ar=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(mr,"DisableTable","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyStateTable/disableTable.js"),__REACT_HOT_LOADER__.register(hr,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyStateTable/disableTable.js")),Zt.a.confirm),fr=function(e){var t=e.user;return{apiMarket:e.apiMarket,apiManage:e.apiManage,user:t}},Er=function(e){return{getApiUserApplyList:function(t){return e(on.getApiUserApplyList(t))},updateUserApiStatus:function(t){return e(Hn.updateApplyStatus(t))}}},kr=Object(T.b)(fr,Er)(tr=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={data:[],total:0,disAbleKey:"init",enAbleKey:"init",loading:!1},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.tableChange({filter:{},sortedInfo:{},page:1})}},{key:"initState",value:function(){this.setState({disAbleKey:Math.random(),enAbleKey:Math.random(),total:0,dataDisable:[],dataEnable:[]})}},{key:"componentWillReceiveProps",value:function(e){this.props.apiId==e.apiId&&this.props.disAble==e.disAble||(this.initState(),this.tableChange({filter:{},sortedInfo:{},page:1},e.apiId))}},{key:"tableChange",value:function(e,t){var a=e.filter,n=(e.sortedInfo,e.page),i=a.status;(!i||i.length<1)&&(i=["1","3","4"]);var r={};r.apiId=t||this.props.apiId,r.pageSize=10,r.currentPage=n,r.status=i,this.getData(r)}},{key:"getData",value:function(e){var t=this;e||(e=this.state.requestParams),e.apiId&&(this.setState({loading:!0,requestParams:e}),this.props.getApiUserApplyList(e).then(function(e){t.setState({loading:!1}),e&&t.setState({data:e.data.data,total:e.data.totalCount})}))}},{key:"cancelApi",value:function(e){var t=this;Ar({title:"确认取消?",content:"确认取消授权",onOk:function(){t.props.updateUserApiStatus({applyId:e,useAdmin:!0,status:4}).then(function(e){e&&($.a.success("取消成功"),t.getData())})},onCancel:function(){console.log("Cancel")}})}},{key:"applyApi",value:function(e){var t=this;Ar({title:"确认授权?",content:"确认授权",onOk:function(){t.props.updateUserApiStatus({applyId:e,useAdmin:!0,status:1}).then(function(e){e&&($.a.success("授权成功"),t.getData())})},onCancel:function(){console.log("Cancel")}})}},{key:"lookAllErrorText",value:function(){console.log("lookAllErrorText")}},{key:"getTable",value:function(){return this.props.statusDisAble?s.a.createElement(gr,{loading:this.state.loading,key:this.state.disAbleKey,total:this.state.total,data:this.state.data,tableChange:this.tableChange.bind(this)}):s.a.createElement(_r,{cancelApi:this.cancelApi.bind(this),applyApi:this.applyApi.bind(this),loading:this.state.loading,key:this.state.enAbleKey,total:this.state.total,data:this.state.data,tableChange:this.tableChange.bind(this)})}},{key:"render",value:function(){return s.a.createElement("div",null,this.getTable())}}]),t}(r.Component))||tr,br=kr,Tr=br,yr=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ar,"confirm","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyState.js"),__REACT_HOT_LOADER__.register(fr,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyState.js"),__REACT_HOT_LOADER__.register(Er,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyState.js"),__REACT_HOT_LOADER__.register(kr,"BuyManageState","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyState.js"),__REACT_HOT_LOADER__.register(br,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/tabPanes/buyState.js")),Zt.a.confirm),vr=yt.a.Button,Cr=yt.a.Group,wr=function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t}},Dr=function(e){return{getApiDetail:function(t){e(an.getApiDetail({apiId:t}))},getApiExtInfo:function(t){e(an.getApiExtInfo({apiId:t,useAdmin:!0}))},deleteApi:function(t){return e(on.deleteApi({apiIds:[t]}))},openApi:function(t){return e(on.openApi(t))},closeApi:function(t){return e(on.closeApi(t))}}},Or=Object(T.b)(wr,Dr)(ar=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={apiId:"",nowView:"callState",callStateDate:"1",errorLogDate:"7"},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"deleteApi",value:function(){var e=this,t=this.state.apiId;yr({title:"确认删除?",content:"确认删除api",onOk:function(){e.props.deleteApi(t).then(function(t){t&&($.a.success("删除成功"),e.getApiExtInfo())})},onCancel:function(){console.log("Cancel")}})}},{key:"openApi",value:function(){var e=this,t=this.state.apiId;yr({title:"确认开启?",content:"确认开启api",onOk:function(){e.props.openApi(t).then(function(t){$.a.success("开启成功"),t&&e.getApiExtInfo()})},onCancel:function(){console.log("Cancel")}})}},{key:"closeApi",value:function(){var e=this,t=this.state.apiId;yr({title:"确认禁用?",content:"确认禁用api",onOk:function(){e.props.closeApi(t).then(function(t){$.a.success("禁用成功"),t&&e.getApiExtInfo()})},onCancel:function(){console.log("Cancel")}})}},{key:"getApiExtInfo",value:function(){this.props.getApiExtInfo(this.state.apiId)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.router.params&&this.props.router.params.api;t&&this.setState({apiId:t},function(){e.getApiExtInfo()})}},{key:"callback",value:function(e){console.log(e),this.setState({nowView:e})}},{key:"chooseCallStateDate",value:function(e){this.setState({callStateDate:e.target.value})}},{key:"chooseErrorLogDate",value:function(e){this.setState({errorLogDate:e.target.value})}},{key:"getValue",value:function(e){var t=this.props.apiMarket&&this.props.apiMarket.apiCallInfo&&this.props.apiMarket.apiCallInfo[this.state.apiId];return t?t[e]:null}},{key:"getDateTypeView",value:function(){switch(this.state.nowView){case"callState":return s.a.createElement("div",{className:"m-radio-group",key:"callStateDate",style:{marginTop:"4px",marginRight:"8px"}},s.a.createElement(Cr,{name:"callStateDate",defaultValue:this.state.callStateDate,className:"no-bd nobackground",onChange:this.chooseCallStateDate.bind(this)},s.a.createElement(vr,{value:"1"},"最近24小时"),s.a.createElement(vr,{value:"7"},"最近7天"),s.a.createElement(vr,{value:"30"},"最近30天"),s.a.createElement(vr,{value:"-1"},"历史以来")));case"errorLog":return s.a.createElement("div",{className:"m-radio-group",key:"errorLogDate",style:{marginTop:"4px",marginRight:"8px"}},s.a.createElement(Cr,{name:"errorLogDate",defaultValue:this.state.errorLogDate,className:"no-bd nobackground",onChange:this.chooseErrorLogDate.bind(this)},s.a.createElement(vr,{value:"7"},"最近7天")));default:return null}}},{key:"render",value:function(){var e=Xe[this.getValue("status")],t=void 0;return"stop"==e&&(t=!0),console.log(e),s.a.createElement("div",null,s.a.createElement(Bi,H()({},this.state,this.props,{deleteApi:this.deleteApi.bind(this),openApi:this.openApi.bind(this),closeApi:this.closeApi.bind(this)})),s.a.createElement("div",{className:"tabs-box m-tabs noheight tabs-filter-show"},s.a.createElement(ht.a,{defaultActiveKey:this.state.nowView,onChange:this.callback.bind(this),tabBarExtraContent:this.getDateTypeView()},s.a.createElement(ht.a.TabPane,{tab:"调用情况",key:"callState"},s.a.createElement(pr,{dateType:this.state.callStateDate,apiId:this.state.apiId})),s.a.createElement(ht.a.TabPane,{tab:"错误日志",key:"errorLog"},s.a.createElement(Qi,{dateType:this.state.errorLogDate,apiId:this.state.apiId})),s.a.createElement(ht.a.TabPane,{tab:"订购情况",key:"buyState"},s.a.createElement(Tr,{statusDisAble:t,apiId:this.state.apiId})))))}}]),t}(r.Component))||ar,Rr=Or,xr=Rr,Sr=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(yr,"confirm","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(vr,"RadioButton","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(Cr,"RadioGroup","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(wr,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(Dr,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(Or,"APIManageDetail","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(Rr,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiDetail/index.js")),a(162),a(78)),Lr=a.n(Sr),Ir=Lr.a.TreeNode,Nr=function(e){function t(e){m()(this,t);var a=f()(this,(t.__proto__||d()(t)).call(this,e));return a.state={maxDeepLength:2,expandedKeys:[],editNode:null,mode:"",addPid:"",autoExpandParent:!0},a.onSelect=function(){return a.__onSelect__REACT_HOT_LOADER__.apply(a,arguments)},a.onCheck=function(){return a.__onCheck__REACT_HOT_LOADER__.apply(a,arguments)},a.checkVal=function(){return a.__checkVal__REACT_HOT_LOADER__.apply(a,arguments)},a.onExpands=function(){return a.__onExpands__REACT_HOT_LOADER__.apply(a,arguments)},a.editInput=null,a}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.props.maxDeepLength&&(this.state.maxDeepLength=this.props.maxDeepLength)}},{key:"componentWillReceiveProps",value:function(e){e.maxDeepLength&&this.props.maxDeepLength!=e.maxDeepLength&&this.setState({maxDeepLength:e.maxDeepLength})}},{key:"getTreeView",value:function(){var e=this.props.tree,t=[];return e?{view:function e(a,n){for(var i=[],r=0;r<a.length;r++){var o=a[r],l=!(o.childCatalogue.length>0);o.api?i.push(s.a.createElement(Ir,{title:o.catalogueName,key:o.id})):(t.push(o.id.toString()),i.push(s.a.createElement(Ir,{title:this.getTreeNodeTitle.call(this,o.id,o.catalogueName,!1,l,n),key:o.id},e.call(this,o.childCatalogue,n+1))))}return i}.call(this,e,1),expandedKeys:t}:null}},{key:"__onSelect__REACT_HOT_LOADER__",value:function(e,t){console.log("selected",e,t)}},{key:"__onCheck__REACT_HOT_LOADER__",value:function(e,t){console.log("onCheck",e,t)}},{key:"deleteNode",value:function(e){this.props.deleteCatalogue(e)}},{key:"__checkVal__REACT_HOT_LOADER__",value:function(e){var t=/^([\w|\u4e00-\u9fa5]{1,20})$/.test(e);return t||$.a.error("类目名称不能超过20个字符，只能以字母、数字、下划线和汉字组成！"),t}},{key:"getTreeNodeTitle",value:function(e,t,a,n,i){var r=this.state.maxDeepLength,o=void 0;return o=a?s.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},s.a.createElement(La.a,{title:"添加新分类"},s.a.createElement(j.a,{type:"plus-square-o",onClick:this.addNode.bind(this,e)}))):n?i>=r?s.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},s.a.createElement(La.a,{title:"编辑"},s.a.createElement(j.a,{type:"edit",onClick:this.editNode.bind(this,e)})),s.a.createElement(La.a,{title:"删除"},s.a.createElement(Ta.a,{title:"您确定删除该分类吗",onConfirm:this.deleteNode.bind(this,e),okText:"确定",cancelText:"取消"},s.a.createElement(j.a,{type:"minus-square-o"})))):s.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},s.a.createElement(La.a,{title:"添加新分类"},s.a.createElement(j.a,{type:"plus-square-o",onClick:this.addNode.bind(this,e)})),s.a.createElement(La.a,{title:"编辑"},s.a.createElement(j.a,{type:"edit",onClick:this.editNode.bind(this,e)})),s.a.createElement(La.a,{title:"删除"},s.a.createElement(Ta.a,{title:"您确定删除该分类吗",onConfirm:this.deleteNode.bind(this,e),okText:"确定",cancelText:"取消"},s.a.createElement(j.a,{type:"minus-square-o"})))):i<r?s.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},s.a.createElement(La.a,{title:"添加新分类"},s.a.createElement(j.a,{type:"plus-square-o",onClick:this.addNode.bind(this,e)})),s.a.createElement(La.a,{title:"编辑"},s.a.createElement(j.a,{type:"edit",onClick:this.editNode.bind(this,e)}))):s.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},s.a.createElement(La.a,{title:"编辑"},s.a.createElement(j.a,{type:"edit",onClick:this.editNode.bind(this,e)}))),s.a.createElement("span",{className:"tree-hover-show"},this.state.editNode==e?s.a.createElement("input",{ref:this.setRange.bind(this),autoFocus:!0,defaultValue:t,onBlur:this.editOver.bind(this,e,t)}):t,o)}},{key:"setRange",value:function(e){if(e){var t=e.value.length;e.setSelectionRange(t,t),this.editInput=e}}},{key:"editOver",value:function(e,t,a){var n=this,i=this.editInput.value;if(!this.checkVal(i))return this.props.getCatalogue(0),void this.setState({editNode:null});this.setState({editNode:null},function(){t!=i&&("add"!=n.state.mode?n.props.updateCatalogue(e,i):n.props.addCatalogue(n.state.addPid,i))})}},{key:"editNode",value:function(e){this.setState({editNode:e,mode:"edit"})}},{key:"addNode",value:function(e){var t=Object(Pe.cloneDeep)(this.props.tree),a=Math.random();!function e(t,n){if(0!=n)for(var i=0;i<t.length;i++){var r=t[i];if(r.id==n)return void r.childCatalogue.push({id:a,catalogueName:"新建分类名"+r.childCatalogue.length,childCatalogue:[]});e(r.childCatalogue,n)}else t.push({id:a,catalogueName:"新建分类名",childCatalogue:[]})}(t,e),this.setState({editNode:a,mode:"add",addPid:e}),this.props.addCatalogueEdit(t)}},{key:"__onExpands__REACT_HOT_LOADER__",value:function(e,t){this.setState({expandedKeys:e,autoExpandParent:!1})}},{key:"render",value:function(){var e=this.getTreeView(),t=e.view,a=e.expandedKeys,n=this.state.expandedKeys.length>0?this.state.expandedKeys:a;return s.a.createElement(Lr.a,{showIcon:!0,expandedKeys:n,onSelect:this.onSelect,onCheck:this.onCheck,onExpand:this.onExpands,autoExpandParent:this.state.autoExpandParent},s.a.createElement(Ir,{title:this.getTreeNodeTitle.call(this,0,"API管理",!0,!1,0),key:0},t))}}]),t}(r.Component),Pr=Nr,Hr=Pr,Ur=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ir,"TreeNode","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiTypeTree.js"),__REACT_HOT_LOADER__.register(Nr,"ApiTypeTree","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiTypeTree.js"),__REACT_HOT_LOADER__.register(Pr,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiTypeTree.js")),a(69)),jr=function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t}},Mr=function(e){return{getCatalogue:function(t){e(an.getCatalogue(t))},deleteCatalogue:function(t){return e(on.deleteCatalogue({id:t}))},updateCatalogue:function(t,a){return e(on.updateCatalogue({id:t,nodeName:a}))},addCatalogue:function(t,a){return e(on.addCatalogue({pid:t,nodeName:a}))},addCatalogueEdit:function(t){e({type:Za.a.GET_CATALOGUE,payload:t})}}},Gr=Object(T.b)(jr,Mr)(nr=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.onSelect=function(){var e;return(e=n).__onSelect__REACT_HOT_LOADER__.apply(e,arguments)},n.onCheck=function(){var e;return(e=n).__onCheck__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"__onSelect__REACT_HOT_LOADER__",value:function(e,t){console.log("selected",e,t)}},{key:"__onCheck__REACT_HOT_LOADER__",value:function(e,t){console.log("onCheck",e,t)}},{key:"componentDidMount",value:function(){this.props.getCatalogue(0)}},{key:"deleteCatalogue",value:function(e){var t=this;this.props.deleteCatalogue(e).then(function(e){e&&$.a.success("删除成功"),t.props.getCatalogue(0)})}},{key:"addCatalogue",value:function(e,t){var a=this;this.props.addCatalogue(e,t).then(function(e){e&&$.a.success("新增成功"),a.props.getCatalogue(0)})}},{key:"updateCatalogue",value:function(e,t){var a=this;this.props.updateCatalogue(e,t).then(function(e){e&&$.a.success("更改成功"),a.props.getCatalogue(0)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"m-card"},s.a.createElement("h1",{className:"box-title"}," ",s.a.createElement(Ur.a,null)," 类目管理"),s.a.createElement(je.a,{className:"box-2 g-datamanage",noHovering:!0},s.a.createElement(Hr,{getCatalogue:this.props.getCatalogue,addCatalogue:this.addCatalogue.bind(this),addCatalogueEdit:this.props.addCatalogueEdit,updateCatalogue:this.updateCatalogue.bind(this),deleteCatalogue:this.deleteCatalogue.bind(this),tree:this.props.apiMarket.apiCatalogue})))}}]),t}(r.Component))||nr,Fr=Gr,Vr=Fr,Br=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(jr,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiType.js"),__REACT_HOT_LOADER__.register(Mr,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiType.js"),__REACT_HOT_LOADER__.register(Gr,"ApiType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiType.js"),__REACT_HOT_LOADER__.register(Fr,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/apiType.js")),a(235),a(119)),zr=a.n(Br),qr=(a(655),a(555)),Kr=a.n(qr),Yr=a(26),Wr=a.n(Yr),Jr=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={pageIndex:1,loading:!1},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,sortedInfo:a,loading:!0}),setTimeout(function(){n.setState({loading:!1})},1e3)}},{key:"initColumns",value:function(){var e=this.props.data.columnList;if(!e)return null;for(var t=[],a=0;a<e.length;a++)t.push({key:a,dataIndex:a,title:e[a],width:12*e[a].length+28+"px",render:function(e){return s.a.createElement("span",{title:e},N.a.textOverflowExchange(e,30))}});return console.log(t),t}},{key:"getSource",value:function(){var e=this.props.data.dataList;if(!e)return null;for(var t=[],a=0;a<e.length;a++){for(var n={},i=e[a],r=0;r<i.length;r++)n[r]=i[r];t.push(n)}return console.log(t),t}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:30}}},{key:"getScroll",value:function(){var e=100,t=this.props.data.columnList;for(var a in t){e=e+12*t[a].length+28}return e+"px"}},{key:"render",value:function(){var e;return s.a.createElement(Ge.a,(e={rowKey:function(e,t){return t},loading:this.props.loading,className:"m-table monitor-table",columns:this.initColumns()},Wr()(e,"loading",this.state.loading),Wr()(e,"pagination",!1),Wr()(e,"dataSource",this.getSource()),Wr()(e,"onChange",this.onTableChange),Wr()(e,"scroll",{x:this.getScroll(),y:400}),e))}}]),t}(r.Component),Qr=Jr,Xr=Qr,$r=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Jr,"NewApiDataSourceTable","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/dataSourceTable.js"),__REACT_HOT_LOADER__.register(Qr,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/dataSourceTable.js")),na.a.Item),Zr=ra.a.TextArea,es=xa.a.Option,ts=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={dataSource:[],tableList:[],tableDetailList:{}},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.props.getCatalogue(0),this.getDataSource()}},{key:"pass",value:function(){var e=this;this.props.form.validateFields(function(t,a){t||(console.log("Received values of form: ",a),e.props.dataChange(H()({},a)))})}},{key:"dataSourceChange",value:function(e){var t=this;this.setState({showTable:!1}),this.props.form.setFieldsValue({table:""}),this.props.tablelist(e).then(function(e){e&&t.setState({tableList:e.data})})}},{key:"tableChange",value:function(){this.setState({showTable:!1})}},{key:"getTableListView",value:function(){return this.state.tableList.map(function(e,t){return s.a.createElement(es,{key:e},e)})}},{key:"onSourcePreview",value:function(){var e=this,t=this.props.form.getFieldValue("dataSource"),a=this.props.form.getFieldValue("table");t&&a?this.setState({showTable:!this.state.showTable},function(){e.state.showTable&&e.getTableDetail()}):$.a.error("请选择数据表！")}},{key:"getDataSourceOptionView",value:function(){return this.state.dataSource.map(function(e){return s.a.createElement(es,{key:e.id},e.name)})}},{key:"getDataSource",value:function(){var e=this;this.props.getDataSourceList(null).then(function(t){t&&e.setState({dataSource:t.data})})}},{key:"getTableDetail",value:function(){var e=this,t=this.props.form.getFieldValue("dataSource"),a=this.props.form.getFieldValue("table");this.setState({tableDetailList:[],tableLoading:!0}),this.props.previewData(t,a).then(function(t){t&&e.setState({tableDetailList:t.data,tableLoading:!1})})}},{key:"getTable",value:function(){return this.state.showTable?s.a.createElement(je.a,{className:"box-2",style:{marginTop:"10px"},noHovering:!0},s.a.createElement(Xr,{loading:this.state.tableLoading,data:this.state.tableDetailList})):null}},{key:"getCatagoryOption",value:function(){return function e(t){var a=[];if(!t||t.length<1)return null;for(var n=0;n<t.length;n++){var i=t[n];if(i.api)return null;a.push({value:i.id,label:i.catalogueName,children:e(i.childCatalogue)})}return a}(this.props.apiMarket.apiCatalogue)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.getCatagoryOption();return s.a.createElement("div",null,s.a.createElement("div",{className:"steps-content"},s.a.createElement(na.a,{onSubmit:this.handleSubmit},s.a.createElement($r,H()({},Ze,{label:"所属分组"}),t("APIGroup",{rules:[{required:!0,message:"请选择分组"}],initialValue:this.props.APIGroup})(s.a.createElement(Kr.a,{showSearch:!0,popupClassName:"noheight",options:a,placeholder:"请选择分组"}))),s.a.createElement($r,H()({},Ze,{label:"API名称",hasFeedback:!0}),t("APIName",{rules:[{required:!0,message:"请输入API名称"},{max:16,message:"最大字数不能超过16"},{pattern:new RegExp(/^([\w|\u4e00-\u9fa5]*)$/),message:"API名字只能以字母，数字，下划线组成"}],initialValue:this.props.APIName})(s.a.createElement(ra.a,null))),s.a.createElement($r,H()({},Ze,{label:"API描述",hasFeedback:!0}),t("APIdescription",{rules:[{required:!1,message:"请输入API描述"},{max:200,message:"最大字符不能超过200"}],initialValue:this.props.APIdescription})(s.a.createElement(Zr,null))),s.a.createElement($r,H()({},Ze,{label:"调用限制",hasFeedback:!0}),t("callLimit",{rules:[{required:!0,message:"请输入调用次数限制"},{validator:function(e,t,a){t&&(t>1e3||t<1)?a("请输入不大于1000的正整数"):a()}}],initialValue:this.props.callLimit})(s.a.createElement(ra.a,{type:"number",placeholder:"单用户每秒最高调用次数"}))),s.a.createElement($r,H()({},Ze,{label:"返回条数限制",hasFeedback:!0}),t("backLimit",{rules:[{required:!0,message:"请输入最大返回条数"},{pattern:new RegExp(/^1[0-9]{0,3}$|^2000$|^[0-9]$|^[1-9][0-9]{1,2}$/),message:"请输入不大于2000的正整数"}],initialValue:this.props.backLimit})(s.a.createElement(ra.a,{type:"number",placeholder:"单次最大返回数据条数 (最高支持2000条)"}))),s.a.createElement($r,H()({},Ze,{label:"请选择数据源"}),t("dataSource",{rules:[{required:!0,message:"请选择数据源"}],initialValue:this.props.dataSource})(s.a.createElement(xa.a,{placeholder:"请选择数据源",showSearch:!0,style:{width:"85%",marginRight:15},onChange:this.dataSourceChange.bind(this)},this.getDataSourceOptionView())),s.a.createElement(b.c,{to:"/api/dataSource"},"添加数据源")),s.a.createElement($r,H()({},Ze,{label:"请选择表"}),t("table",{rules:[{required:!0,message:"请选择表"}],initialValue:this.props.table})(s.a.createElement(xa.a,{placeholder:"请选择表",showSearch:!0,onChange:this.tableChange.bind(this)},this.getTableListView()))),s.a.createElement(At.a,{type:"flex",justify:"center",className:"font-14"},s.a.createElement("a",{onClick:this.onSourcePreview.bind(this)},"数据预览",s.a.createElement(j.a,{type:this.state.showTable?"up":"down",style:{marginLeft:5}}))),this.getTable())),s.a.createElement("div",{className:"steps-action"},s.a.createElement(ta.a,{onClick:function(){return e.props.cancel()}},"取消"),s.a.createElement(ta.a,{type:"primary",style:{marginLeft:8},onClick:function(){return e.pass()}},"下一步")))}}]),t}(r.Component),as=na.a.create()(ts),ns=as,is=ns,rs=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register($r,"FormItem","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/basicProperties.js"),__REACT_HOT_LOADER__.register(Zr,"TextArea","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/basicProperties.js"),__REACT_HOT_LOADER__.register(es,"Option","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/basicProperties.js"),__REACT_HOT_LOADER__.register(ts,"ManageBasicProperties","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/basicProperties.js"),__REACT_HOT_LOADER__.register(as,"wrappedComponent","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/basicProperties.js"),__REACT_HOT_LOADER__.register(ns,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/basicProperties.js")),ra.a.TextArea),ss=xa.a.Option,os=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={loading:!1,tableColumns:[],dataSource:[]},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.getTableColumns()}},{key:"componentWillReceiveProps",value:function(e){e.addInputsignal&&!this.props.addInputsignal&&this.addInput()}},{key:"backMsg",value:function(e,t){var a=[];for(var n in e){var i=e[n];i.tmp?a.push(i.tmp):i.isEdit||a.push(i)}this.props.inputParamsChange(a,t)}},{key:"addInput",value:function(){var e=this;console.log("add");var t=Object(Pe.cloneDeep)(this.state.dataSource);t.unshift({key:Math.random(),param:{},paramName:"",operators:"",isRequired:!0,instructions:"",isEdit:!0}),this.setState({dataSource:t},function(){e.props.changeAddinputOverSignal()})}},{key:"getTableColumns",value:function(){var e=this;this.props.tablecolumn(this.props.dataSourceId,this.props.tableId).then(function(t){t&&e.setState({tableColumns:t.data})})}},{key:"getColumnsView",value:function(){return Object(Pe.cloneDeep)(this.state.tableColumns).map(function(e){return s.a.createElement(ss,{title:e.key,key:e.key,value:e.type+"@@"+e.key},e.key)})}},{key:"changeTableParam",value:function(e,t){if(t=t.split("@@")){var a=Object(Pe.cloneDeep)(this.state.dataSource);a[e].param={type:t[0],key:t[1]},this.setState({dataSource:a})}}},{key:"setRequired",value:function(e,t){var a=Object(Pe.cloneDeep)(this.state.dataSource);a[e].isRequired=t.target.checked,this.setState({dataSource:a})}},{key:"textAreaChange",value:function(e,t){var a=t.target.value,n=Object(Pe.cloneDeep)(this.state.dataSource);n[e].instructions=a,this.setState({dataSource:n})}},{key:"paramNameChange",value:function(e,t){var a=t.target.value,n=Object(Pe.cloneDeep)(this.state.dataSource);n[e].paramName=a,this.setState({dataSource:n})}},{key:"operatorsChange",value:function(e,t){var a=Object(Pe.cloneDeep)(this.state.dataSource);a[e].operators=t,this.setState({dataSource:a})}},{key:"checkInfo",value:function(e,t){var a=Object(Pe.cloneDeep)(this.state.dataSource),n=a[e];if(t&&(n=n.tmp),!n.param.key)return $.a.error("请选择字段"),!1;if(!n.paramName)return $.a.error("请填写参数名"),!1;if(!n.operators)return $.a.error("请选择操作符"),!1;if(!this.checkVal(n))return!1;for(var i in a)if(i!=e&&a[i].param.key==n.param.key&&a[i].operators==n.operators)return t?$.a.error("原数据与现有数据重复，请修改保存"):$.a.error("不能设置相同字段的相同规则"),!1;return!0}},{key:"checkVal",value:function(e){return e.instructions&&e.instructions.length>200?($.a.error("说明不得大于200字符"),!1):!(e.paramName&&e.paramName.length>16)||($.a.error("参数名不得大于16字符"),!1)}},{key:"saveInfo",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);if(this.checkInfo(e)){t[e].isEdit=!1;var a=!t[e].tmp;t[e].tmp&&(t[e].tmp=null),a?this.backMsg(t,t[e]):this.backMsg(t),this.setState({dataSource:t})}}},{key:"cancelSave",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);if(t[e].tmp){if(!this.checkInfo(e,!0))return;t[e]=Object(Pe.cloneDeep)(t[e].tmp),t[e].isEdit=!1}else t.splice(e,1);this.setState({dataSource:t})}},{key:"editInfo",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);t[e].tmp=Object(Pe.cloneDeep)(t[e]),t[e].isEdit=!0,this.setState({dataSource:t})}},{key:"removeInfo",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);t.splice(e,1),this.backMsg(t),this.setState({dataSource:t})}},{key:"initColumns",value:function(){var e=this;return[{title:"字段",dataIndex:"param",key:"param",width:"200px",render:function(t,a,n){return a.isEdit?s.a.createElement(xa.a,{showSearch:!0,defaultValue:a.param.type?a.param.type+"@@"+a.param.key:null,onChange:e.changeTableParam.bind(e,n),style:{width:"100%"}},e.getColumnsView()):a.param.key}},{title:"参数名",dataIndex:"paramName",key:"paramName",width:"100px",render:function(t,a,n){return a.isEdit?s.a.createElement(ra.a,{onBlur:e.paramNameChange.bind(e,n),defaultValue:a.paramName}):a.paramName}},{title:"数据类型",dataIndex:"dataType",key:"dataType",render:function(e,t){return t.param.type||""}},{title:"操作符",dataIndex:"operators",key:"operators",width:"100px",render:function(t,a,n){return a.isEdit?s.a.createElement(xa.a,{onChange:e.operatorsChange.bind(e,n),defaultValue:a.operators,style:{width:"100%"}},s.a.createElement(ss,{value:"="},"="),s.a.createElement(ss,{value:">"},">"),s.a.createElement(ss,{value:">="},">="),s.a.createElement(ss,{value:"<"}," <"),s.a.createElement(ss,{value:"<="},"<="),s.a.createElement(ss,{value:"!="},"!="),s.a.createElement(ss,{value:"in"},"in"),s.a.createElement(ss,{value:"not in"},"not in"),s.a.createElement(ss,{value:"like"},"like"),s.a.createElement(ss,{value:"not like"},"not like")):a.operators}},{title:"是否必填",dataIndex:"isRequired",key:"isRequired",render:function(t,a,n){return a.isEdit?s.a.createElement(wa.a,{onClick:e.setRequired.bind(e,n),defaultChecked:a.isRequired}):s.a.createElement(wa.a,{key:Math.random(),disabled:!0,defaultChecked:a.isRequired})}},{title:"说明",dataIndex:"instructions",key:"instructions",render:function(t,a,n){return a.isEdit?s.a.createElement(rs,{onBlur:e.textAreaChange.bind(e,n),defaultValue:a.instructions}):s.a.createElement(rs,{key:"textareadisabled",defaultValue:a.instructions,disabled:!0})}},{title:"操作",dataIndex:"deal",key:"deal",render:function(t,a,n){return a.isEdit?s.a.createElement("div",null,s.a.createElement("a",{onClick:e.saveInfo.bind(e,n)},"保存"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.cancelSave.bind(e,n)},"取消")):s.a.createElement("div",null,s.a.createElement("a",{onClick:e.editInfo.bind(e,n)},"编辑"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.removeInfo.bind(e,n)},"删除"))}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:30}}},{key:"pass",value:function(){this.props.dataChange(H()({},values))}},{key:"render",value:function(){return s.a.createElement(Ge.a,{className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:!1,dataSource:this.state.dataSource})}}]),t}(r.Component),ls=os,cs=ls,ps=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(rs,"TextArea","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/paramsTable/inputParams.js"),__REACT_HOT_LOADER__.register(ss,"Option","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/paramsTable/inputParams.js"),__REACT_HOT_LOADER__.register(os,"InputParams","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/paramsTable/inputParams.js"),__REACT_HOT_LOADER__.register(ls,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/paramsTable/inputParams.js")),ra.a.TextArea),us=xa.a.Option,ds=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={loading:!1,tableColumns:[],dataSource:[]},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.getTableColumns()}},{key:"componentWillReceiveProps",value:function(e){e.addOutputsignal&&!this.props.addOutputsignal&&this.addOutput(e.inputToOutputData)}},{key:"backMsg",value:function(e){var t=[];for(var a in e){var n=e[a];n.tmp?t.push(n.tmp):n.isEdit||t.push(n)}this.props.outputParamsChange(t)}},{key:"addOutput",value:function(e){var t=this,a=Object(Pe.cloneDeep)(this.state.dataSource),n={key:Math.random(),param:{},paramName:"",operators:"",isRequired:!0,instructions:"",isEdit:!0};e&&(console.log(e),n.param=e.param,n.paramName=e.paramName,n.operators=e.operators,n.isRequired=e.isRequired,n.instructions=e.instructions),a.unshift(n),this.setState({dataSource:a},function(){t.props.changeAddoutputOverSignal()})}},{key:"getTableColumns",value:function(){var e=this;this.props.tablecolumn(this.props.dataSourceId,this.props.tableId).then(function(t){t&&e.setState({tableColumns:t.data})})}},{key:"getColumnsView",value:function(){return Object(Pe.cloneDeep)(this.state.tableColumns).map(function(e){return s.a.createElement(us,{title:e.key,key:e.key,value:e.type+"@@"+e.key},e.key)})}},{key:"changeTableParam",value:function(e,t){if(t=t.split("@@")){var a=Object(Pe.cloneDeep)(this.state.dataSource);a[e].param={type:t[0],key:t[1]},this.setState({dataSource:a})}}},{key:"setRequired",value:function(e,t){var a=Object(Pe.cloneDeep)(this.state.dataSource);a[e].isRequired=t.target.checked,this.setState({dataSource:a})}},{key:"textAreaChange",value:function(e,t){var a=t.target.value,n=Object(Pe.cloneDeep)(this.state.dataSource);n[e].instructions=a,this.setState({dataSource:n})}},{key:"paramNameChange",value:function(e,t){var a=t.target.value,n=Object(Pe.cloneDeep)(this.state.dataSource);n[e].paramName=a,this.setState({dataSource:n})}},{key:"operatorsChange",value:function(e,t){var a=Object(Pe.cloneDeep)(this.state.dataSource);a[e].operators=t,this.setState({dataSource:a})}},{key:"checkInfo",value:function(e,t){var a=Object(Pe.cloneDeep)(this.state.dataSource),n=a[e];if(t&&(n=n.tmp),!n.param.key)return $.a.error("请选择字段"),!1;if(!n.paramName)return $.a.error("请填写参数名"),!1;if(!this.checkVal(n))return!1;for(var i in a)if(i!=e&&a[i].param.key==n.param.key)return t?$.a.error("原数据与现有数据重复，请修改保存"):$.a.error("不能设置相同字段"),!1;return!0}},{key:"checkVal",value:function(e){return e.instructions&&e.instructions.length>200?($.a.error("说明不得大于200字符"),!1):!(e.paramName&&e.paramName.length>16)||($.a.error("参数名不得大于16字符"),!1)}},{key:"saveInfo",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);this.checkInfo(e)&&(t[e].isEdit=!1,t[e].tmp&&(t[e].tmp=null),this.backMsg(t),this.setState({dataSource:t}))}},{key:"cancelSave",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);if(t[e].tmp){if(!this.checkInfo(e,!0))return;t[e]=Object(Pe.cloneDeep)(t[e].tmp),t[e].isEdit=!1}else t.splice(e,1);this.setState({dataSource:t})}},{key:"editInfo",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);t[e].tmp=Object(Pe.cloneDeep)(t[e]),t[e].isEdit=!0,this.setState({dataSource:t})}},{key:"removeInfo",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);t.splice(e,1),this.backMsg(t),this.setState({dataSource:t})}},{key:"initColumns",value:function(){var e=this;return[{title:"字段",dataIndex:"param",key:"param",width:"200px",render:function(t,a,n){return a.isEdit?s.a.createElement(xa.a,{showSearch:!0,defaultValue:a.param.type?a.param.type+"@@"+a.param.key:null,onChange:e.changeTableParam.bind(e,n),style:{width:"100%"}},e.getColumnsView()):a.param.key}},{title:"参数名",dataIndex:"paramName",key:"paramName",width:"100px",render:function(t,a,n){return a.isEdit?s.a.createElement(ra.a,{onBlur:e.paramNameChange.bind(e,n),defaultValue:a.paramName}):a.paramName}},{title:"数据类型",dataIndex:"dataType",key:"dataType",render:function(e,t){return t.param.type||""}},{title:"说明",dataIndex:"instructions",key:"instructions",render:function(t,a,n){return a.isEdit?s.a.createElement(ps,{onBlur:e.textAreaChange.bind(e,n),defaultValue:a.instructions}):s.a.createElement(ps,{key:"textareadisabled",defaultValue:a.instructions,disabled:!0})}},{title:"操作",dataIndex:"deal",key:"deal",render:function(t,a,n){return a.isEdit?s.a.createElement("div",null,s.a.createElement("a",{onClick:e.saveInfo.bind(e,n)},"保存"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.cancelSave.bind(e,n)},"取消")):s.a.createElement("div",null,s.a.createElement("a",{onClick:e.editInfo.bind(e,n)},"编辑"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.removeInfo.bind(e,n)},"删除"))}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:30}}},{key:"pass",value:function(){this.props.dataChange(H()({},values))}},{key:"render",value:function(){return s.a.createElement(Ge.a,{className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:!1,dataSource:this.state.dataSource})}}]),t}(r.Component),_s=ds,ms=_s,hs=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ps,"TextArea","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/paramsTable/outputParams.js"),__REACT_HOT_LOADER__.register(us,"Option","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/paramsTable/outputParams.js"),__REACT_HOT_LOADER__.register(ds,"OutputParams","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/paramsTable/outputParams.js"),__REACT_HOT_LOADER__.register(_s,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/paramsTable/outputParams.js")),ra.a.TextArea),gs=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={addInputsignal:!1,addOutputsignal:!1,inputData:[],outputData:[],inputToOutputData:{}},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"changeAddinputOverSignal",value:function(){this.setState({addInputsignal:!1})}},{key:"addInput",value:function(e){this.setState({addInputsignal:!0})}},{key:"inputParamsChange",value:function(e,t){this.setState({inputData:e})}},{key:"changeAddoutputOverSignal",value:function(){this.setState({addOutputsignal:!1})}},{key:"addOutput",value:function(e){e&&!e.param&&(e=null),this.setState({addOutputsignal:!0,inputToOutputData:e})}},{key:"outputParamsChange",value:function(e){this.setState({outputData:e})}},{key:"pass",value:function(){if(!this.state.inputData||this.state.inputData.length<1)$.a.error("请设置输入参数");else if(!this.state.outputData||this.state.outputData.length<1)$.a.error("请设置输出参数");else if(this.state.inputData&&this.state.outputData&&this.state.inputData.length>0&&this.state.outputData.length>0){var e=!1;for(var t in this.state.inputData)if(this.state.inputData[t].isRequired){e=!0;break}if(!e)return void $.a.error("输入参数必须有一个必填项");this.props.dataChange({inputData:this.state.inputData,outputData:this.state.outputData})}else $.a.error("请设置输入输出参数")}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"steps-content"},s.a.createElement(je.a,{title:s.a.createElement("span",null,s.a.createElement("span",{style:{color:"#f04134"}},"*")," 输入参数"),extra:s.a.createElement(ta.a,{onClick:this.addInput.bind(this),style:{marginTop:"10px"},type:"primary"},"添加输入参数"),className:"box-2",noHovering:!0},s.a.createElement(cs,H()({inputParamsChange:this.inputParamsChange.bind(this),changeAddinputOverSignal:this.changeAddinputOverSignal.bind(this),addInputsignal:this.state.addInputsignal},this.props))),s.a.createElement(je.a,{title:s.a.createElement("span",null,s.a.createElement("span",{style:{color:"#f04134"}},"*")," 输出参数"),extra:s.a.createElement(ta.a,{onClick:this.addOutput.bind(this),style:{marginTop:"10px"},type:"primary"},"添加输出参数"),style:{marginTop:"20px"},className:"box-2",noHovering:!0},s.a.createElement(ms,H()({inputToOutputData:this.state.inputToOutputData,outputParamsChange:this.outputParamsChange.bind(this),changeAddoutputOverSignal:this.changeAddoutputOverSignal.bind(this),addOutputsignal:this.state.addOutputsignal},this.props)))),s.a.createElement("div",{className:"steps-action"},s.a.createElement(ta.a,{onClick:function(){return e.props.cancel()}},"取消"),s.a.createElement(ta.a,{style:{marginLeft:8},onClick:function(){return e.props.prev()}},"上一步"),s.a.createElement(ta.a,{type:"primary",style:{marginLeft:8},onClick:function(){return e.pass()}},"新建")))}}]),t}(r.Component),As=gs,fs=As,Es=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(hs,"TextArea","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/paramsConfig.js"),__REACT_HOT_LOADER__.register(gs,"ManageParamsConfig","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/paramsConfig.js"),__REACT_HOT_LOADER__.register(As,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/paramsConfig.js")),void 0),ks=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={time:5},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){(function e(){var t=this;Es=setTimeout(function(){var a=t.state.time-1;a>-1?(t.setState({time:a}),e.call(t)):history.back()},1e3)}).call(this)}},{key:"componentWillUnmount",value:function(){clearTimeout(Es)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(At.a,{type:"flex",justify:"center",style:{textAlign:"center"}},s.a.createElement("div",{style:{fontSize:"30px",marginTop:"40px"}},s.a.createElement(j.a,{type:"check-circle",style:{fontSize:"60px",color:"#00CD00"}}),s.a.createElement("br",null),"操作成功 ",s.a.createElement("br",null))),s.a.createElement(At.a,{type:"flex",justify:"center",style:{textAlign:"center",fontSize:"14px",marginTop:"30px"}},this.state.time||"0","秒后自动返回"),s.a.createElement(At.a,{type:"flex",justify:"center",style:{marginTop:"20px"}},s.a.createElement(ta.a,{size:"large",type:"primary",onClick:this.props.reDo},"继续创建"),s.a.createElement(ta.a,{size:"large",style:{marginLeft:"8px"},onClick:this.props.cancel},"返回")))}}]),t}(r.Component),bs=ks,Ts=bs,ys=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Es,"timeClock","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/complete.js"),__REACT_HOT_LOADER__.register(ks,"ManageComplete","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/complete.js"),__REACT_HOT_LOADER__.register(bs,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/complete.js")),zr.a.Step),vs=[{key:"basicProperties",title:"基本属性",content:is},{key:"paramsConfig",title:"参数配置",content:fs},{key:"complete",title:"完成",content:Ts}],Cs=function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t}},ws=function(e){return{getCatalogue:function(t){e(an.getCatalogue(t))},getDataSourceList:function(t){return e(on.getDataSourceByBaseInfo({type:t}))},createApi:function(t){return e(on.createApi(t))},tablelist:function(t){return e(on.tablelist({sourceId:t}))},tablecolumn:function(t,a){return e(on.tablecolumn({sourceId:t,tableName:a}))},previewData:function(t,a){return e(on.previewData({dataSourceId:t,tableName:a}))}}},Ds=Object(T.b)(Cs,ws)(ir=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={current:0,basicProperties:{},paramsConfig:{},complete:{}},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"basicProperties",value:function(e){console.log(e),this.setState({basicProperties:e||{},current:1})}},{key:"paramsConfig",value:function(e){var t=this,a={};for(var n in a.name=this.state.basicProperties.APIName,a.catalogueId=this.state.basicProperties.APIGroup[this.state.basicProperties.APIGroup.length-1],a.apiDesc=this.state.basicProperties.APIdescription,a.dataSrcId=this.state.basicProperties.dataSource,a.tableName=this.state.basicProperties.table,a.reqLimit=this.state.basicProperties.callLimit,a.respLimit=this.state.basicProperties.backLimit,a.inputParam=[],a.outputParam=[],e.inputData){var i=e.inputData[n];a.inputParam.push({fieldName:i.param.key,paramName:i.paramName,paramType:i.param.type,operator:i.operators,required:i.isRequired,desc:i.instructions})}for(var r in e.outputData){var s=e.outputData[r];a.outputParam.push({fieldName:s.param.key,paramName:s.paramName,paramType:s.param.type,desc:s.instructions})}this.props.createApi(a).then(function(a){a&&t.setState({paramsConfig:e||{},current:2})})}},{key:"complete",value:function(e){this.setState({complete:e})}},{key:"reDo",value:function(){this.setState({current:0,basicProperties:{},paramsConfig:{},complete:{}})}},{key:"next",value:function(){var e=vs[this.state.current].key;if(this.state[e]&&this.state[e].pass){var t=this.state.current+1;this.setState({current:t})}}},{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e})}},{key:"cancel",value:function(){this.props.router.goBack()}},{key:"render",value:function(){var e=vs[this.state.current],t=e.key,a=e.content;return s.a.createElement("div",{className:"m-card g-datamanage"},s.a.createElement("h1",{className:"box-title"}," ",s.a.createElement(Ur.a,null)," 新建API"),s.a.createElement(je.a,{style:{padding:"20px"},className:"box-2",noHovering:!0},s.a.createElement(zr.a,{current:this.state.current},s.a.createElement(ys,{title:"基本属性"}),s.a.createElement(ys,{title:"参数配置"}),s.a.createElement(ys,{title:"完成"})),s.a.createElement(a,H()({dataSourceId:this.state.basicProperties.dataSource,tableId:this.state.basicProperties.table},this.props,this.state[t],{reDo:this.reDo.bind(this),prev:this.prev.bind(this),cancel:this.cancel.bind(this),dataChange:this[t].bind(this)}))))}}]),t}(r.Component))||ir,Os=Ds,Rs=Os,xs=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ys,"Step","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/index.js"),__REACT_HOT_LOADER__.register(vs,"steps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/index.js"),__REACT_HOT_LOADER__.register(Cs,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/index.js"),__REACT_HOT_LOADER__.register(ws,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/index.js"),__REACT_HOT_LOADER__.register(Ds,"NewApi","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/index.js"),__REACT_HOT_LOADER__.register(Os,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/newApi/index.js")),function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={pageIndex:1,loading:!1},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,sortedInfo:a,loading:!0}),setTimeout(function(){n.setState({loading:!1})},1e3)}},{key:"initColumns",value:function(){var e=this.props.data.columnList;if(!e)return null;for(var t=[],a=0;a<e.length;a++)t.push({key:a,dataIndex:a,title:e[a],width:12*e[a].length+28+"px",render:function(e){return s.a.createElement("span",{title:e},N.a.textOverflowExchange(e,30))}});return console.log(t),t}},{key:"getSource",value:function(){var e=this.props.data.dataList;if(!e)return null;for(var t=[],a=0;a<e.length;a++){for(var n={},i=e[a],r=0;r<i.length;r++)n[r]=i[r];t.push(n)}return console.log(t),t}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:30}}},{key:"getScroll",value:function(){var e=100,t=this.props.data.columnList;for(var a in t){e=e+12*t[a].length+28}return e+"px"}},{key:"render",value:function(){var e;return s.a.createElement(Ge.a,(e={rowKey:"0",loading:this.props.loading,className:"m-table monitor-table",columns:this.initColumns()},Wr()(e,"loading",this.state.loading),Wr()(e,"pagination",!1),Wr()(e,"dataSource",this.getSource()),Wr()(e,"onChange",this.onTableChange),Wr()(e,"scroll",{x:this.getScroll(),y:400}),e))}}]),t}(r.Component)),Ss=xs,Ls=Ss,Is=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(xs,"NewApiDataSourceTable","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/dataSourceTable.js"),__REACT_HOT_LOADER__.register(Ss,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/dataSourceTable.js")),na.a.Item),Ns=ra.a.TextArea,Ps=xa.a.Option,Hs=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={dataSource:[],tableList:[],tableDetailList:{}},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.props.getCatalogue(0),this.getDataSource(),this.setDefault(this.props.initValues)}},{key:"componentWillReceiveProps",value:function(e){this.props.initValues==e.initValues&&this.props.apiMarket.apiCatalogue==e.apiMarket.apiCatalogue||this.setDefault(e.initValues,e.apiMarket.apiCatalogue)}},{key:"getInitCatagoryList",value:function(e,t){var a=[];return function t(n){if(!n||n.length<1)return null;for(var i=0;i<n.length;i++){var r=n[i];if(r.id==e)return a.push(r.id),r.id;if(t(r.childCatalogue))return a.push(r.id),r.id}return null}(t||this.props.apiMarket.apiCatalogue)?a.reverse():null}},{key:"setDefault",value:function(e,t){if(e&&e.name){var a=e.name,n=e.dataSrcId,i=e.tableName,r=e.reqLimit,s=e.respLimit,o=e.apiDesc,l=e.catalogueId;this.props.form.setFieldsValue({APIGroup:this.getInitCatagoryList(l,t),APIName:a,APIdescription:o,callLimit:r,backLimit:s,table:i+"",dataSource:n+""})}}},{key:"pass",value:function(){var e=this;this.props.form.validateFields(function(t,a){t||(console.log("Received values of form: ",a),e.props.dataChange(H()({},a)))})}},{key:"dataSourceChange",value:function(e){var t=this;this.setState({showTable:!1}),console.log(e),this.props.tablelist(e).then(function(e){e&&t.setState({tableList:e.data})})}},{key:"tableChange",value:function(){this.setState({showTable:!1})}},{key:"getTableListView",value:function(){return this.state.tableList.map(function(e){return s.a.createElement(Ps,{key:e},e)})}},{key:"onSourcePreview",value:function(){var e=this,t=this.props.form.getFieldValue("dataSource"),a=this.props.form.getFieldValue("table");t&&a?this.setState({showTable:!this.state.showTable},function(){e.state.showTable&&e.getTableDetail()}):$.a.error("请选择数据表！")}},{key:"getDataSourceOptionView",value:function(){return this.state.dataSource.map(function(e){return s.a.createElement(Ps,{key:e.id},e.name)})}},{key:"getDataSource",value:function(){var e=this;this.props.getDataSourceList(null).then(function(t){t&&e.setState({dataSource:t.data})})}},{key:"getTableDetail",value:function(){var e=this,t=this.props.form.getFieldValue("dataSource"),a=this.props.form.getFieldValue("table");this.setState({tableDetailList:[],tableLoading:!0}),this.props.previewData(t,a).then(function(t){t&&e.setState({tableDetailList:t.data,tableLoading:!1})})}},{key:"getTable",value:function(){return this.state.showTable?s.a.createElement(je.a,{className:"box-2",style:{marginTop:"10px"},noHovering:!0},s.a.createElement(Ls,{loading:this.state.tableLoading,data:this.state.tableDetailList})):null}},{key:"getCatagoryOption",value:function(){return function e(t){var a=[];if(!t||t.length<1)return null;for(var n=0;n<t.length;n++){var i=t[n];if(i.api)return null;a.push({value:i.id,label:i.catalogueName,children:e(i.childCatalogue)})}return a}(this.props.apiMarket.apiCatalogue)}},{key:"render",value:function(){var e=this,t=this.props.form.getFieldDecorator,a=this.getCatagoryOption();return s.a.createElement("div",null,s.a.createElement("div",{className:"steps-content"},s.a.createElement(na.a,{onSubmit:this.handleSubmit},s.a.createElement(Is,H()({},Ze,{label:"所属分组"}),t("APIGroup",{rules:[{required:!0,message:"请选择分组"}],initialValue:this.props.APIGroup})(s.a.createElement(Kr.a,{showSearch:!0,options:a,placeholder:"请选择分组"}))),s.a.createElement(Is,H()({},Ze,{label:"API名称",hasFeedback:!0}),t("APIName",{rules:[{required:!0,message:"请输入API名称"},{max:16,message:"最大字数不能超过16"},{pattern:new RegExp(/^([\w|\u4e00-\u9fa5]*)$/),message:"API名字只能以字母，数字，下划线组成"}],initialValue:this.props.APIName})(s.a.createElement(ra.a,null))),s.a.createElement(Is,H()({},Ze,{label:"API描述",hasFeedback:!0}),t("APIdescription",{rules:[{required:!1,message:"请输入API描述"},{max:200,message:"最大字数不能超过200"}],initialValue:this.props.APIdescription})(s.a.createElement(Ns,null))),s.a.createElement(Is,H()({},Ze,{label:"调用限制",hasFeedback:!0}),t("callLimit",{rules:[{required:!0,message:"请输入调用次数限制"},{validator:function(e,t,a){t&&(t>1e3||t<1)?a("请输入不大于1000的正整数"):a()}}],initialValue:this.props.callLimit})(s.a.createElement(ra.a,{placeholder:"单用户每秒最高调用次数"}))),s.a.createElement(Is,H()({},Ze,{label:"返回条数限制",hasFeedback:!0}),t("backLimit",{rules:[{required:!0,message:"请输入最大返回条数"},{pattern:new RegExp(/^1[0-9]{0,3}$|^2000$|^[0-9]$|^[1-9][0-9]{1,2}$/),message:"请输入不大于2000的正整数"}],initialValue:this.props.backLimit})(s.a.createElement(ra.a,{placeholder:"单次最大返回数据条数 (最高支持2000条)"}))),s.a.createElement(Is,H()({},Ze,{label:"请选择数据源"}),t("dataSource",{rules:[{required:!0,message:"请选择数据源"}],initialValue:this.props.dataSource})(s.a.createElement(xa.a,{disabled:!0,placeholder:"请选择数据源",style:{width:"85%",marginRight:15},onChange:this.dataSourceChange.bind(this)},this.getDataSourceOptionView())),s.a.createElement(b.c,{to:"/api/dataSource"},"添加数据源")),s.a.createElement(Is,H()({},Ze,{label:"请选择表"}),t("table",{rules:[{required:!0,message:"请选择表"}],initialValue:this.props.table})(s.a.createElement(xa.a,{disabled:!0,placeholder:"请选择表",onChange:this.tableChange.bind(this)},this.getTableListView()))),s.a.createElement(At.a,{type:"flex",justify:"center",className:"font-14"},s.a.createElement("a",{onClick:this.onSourcePreview.bind(this)},"数据预览",s.a.createElement(j.a,{type:this.state.showTable?"up":"down",style:{marginLeft:5}}))),this.getTable())),s.a.createElement("div",{className:"steps-action"},s.a.createElement(ta.a,{onClick:function(){return e.props.cancel()}},"取消"),s.a.createElement(ta.a,{type:"primary",style:{marginLeft:8},onClick:function(){return e.pass()}},"下一步")))}}]),t}(r.Component),Us=na.a.create()(Hs),js=Us,Ms=js,Gs=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Is,"FormItem","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/basicProperties.js"),__REACT_HOT_LOADER__.register(Ns,"TextArea","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/basicProperties.js"),__REACT_HOT_LOADER__.register(Ps,"Option","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/basicProperties.js"),__REACT_HOT_LOADER__.register(Hs,"ManageBasicProperties","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/basicProperties.js"),__REACT_HOT_LOADER__.register(Us,"wrappedComponent","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/basicProperties.js"),__REACT_HOT_LOADER__.register(js,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/basicProperties.js")),ra.a.TextArea),Fs=xa.a.Option,Vs=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={loading:!1,tableColumns:[],dataSource:[]},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.getTableColumns(),this.initDataSource(this.props.initValue)}},{key:"componentWillReceiveProps",value:function(e){e.addInputsignal&&!this.props.addInputsignal&&this.addInput(),e.initValue!=this.props.initValue&&this.initDataSource(e.initValue)}},{key:"initDataSource",value:function(e){if(e&&!(e.length<1)){var t=Object(Pe.cloneDeep)(this.state.dataSource);for(var a in e){var n=e[a];t.push({key:Math.random(),param:{key:n.fieldName,type:n.paramType},paramName:n.paramName,operators:n.operator,isRequired:n.required,instructions:n.desc,isEdit:!1})}this.backMsg(t),this.setState({dataSource:t})}}},{key:"backMsg",value:function(e,t){var a=[];for(var n in e){var i=e[n];i.tmp?a.push(i.tmp):i.isEdit||a.push(i)}this.props.inputParamsChange(a,t)}},{key:"addInput",value:function(){var e=this;console.log("add");var t=Object(Pe.cloneDeep)(this.state.dataSource);t.unshift({key:Math.random(),param:{},paramName:"",operators:"",isRequired:!0,instructions:"",isEdit:!0}),this.setState({dataSource:t},function(){e.props.changeAddinputOverSignal()})}},{key:"getTableColumns",value:function(){var e=this;this.props.tablecolumn(this.props.dataSourceId,this.props.tableId).then(function(t){t&&e.setState({tableColumns:t.data})})}},{key:"getColumnsView",value:function(){return Object(Pe.cloneDeep)(this.state.tableColumns).map(function(e){return s.a.createElement(Fs,{title:e.key,key:e.key,value:e.type+"@@"+e.key},e.key)})}},{key:"changeTableParam",value:function(e,t){if(t=t.split("@@")){var a=Object(Pe.cloneDeep)(this.state.dataSource);a[e].param={type:t[0],key:t[1]},this.setState({dataSource:a})}}},{key:"setRequired",value:function(e,t){var a=Object(Pe.cloneDeep)(this.state.dataSource);a[e].isRequired=t.target.checked,this.setState({dataSource:a})}},{key:"textAreaChange",value:function(e,t){var a=t.target.value,n=Object(Pe.cloneDeep)(this.state.dataSource);n[e].instructions=a,this.setState({dataSource:n})}},{key:"paramNameChange",value:function(e,t){var a=t.target.value,n=Object(Pe.cloneDeep)(this.state.dataSource);n[e].paramName=a,this.setState({dataSource:n})}},{key:"operatorsChange",value:function(e,t){var a=Object(Pe.cloneDeep)(this.state.dataSource);a[e].operators=t,this.setState({dataSource:a})}},{key:"checkInfo",value:function(e,t){var a=Object(Pe.cloneDeep)(this.state.dataSource),n=a[e];if(t&&(n=n.tmp),!n.param.key)return $.a.error("请选择字段"),!1;if(!n.paramName)return $.a.error("请填写参数名"),!1;if(!n.operators)return $.a.error("请选择操作符"),!1;if(!this.checkVal(n))return!1;for(var i in a)if(i!=e&&a[i].param.key==n.param.key&&a[i].operators==n.operators)return t?$.a.error("原数据与现有数据重复，请修改保存"):$.a.error("不能设置相同字段的相同规则"),!1;return!0}},{key:"checkVal",value:function(e){return e.instructions&&e.instructions.length>200?($.a.error("说明不得大于200字符"),!1):!(e.paramName&&e.paramName.length>16)||($.a.error("参数名不得大于16字符"),!1)}},{key:"saveInfo",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);if(this.checkInfo(e)){t[e].isEdit=!1;var a=!t[e].tmp;t[e].tmp&&(t[e].tmp=null),a?this.backMsg(t,t[e]):this.backMsg(t),this.setState({dataSource:t})}}},{key:"cancelSave",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);if(t[e].tmp){if(!this.checkInfo(e,!0))return;t[e]=Object(Pe.cloneDeep)(t[e].tmp),t[e].isEdit=!1}else t.splice(e,1);this.setState({dataSource:t})}},{key:"editInfo",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);t[e].tmp=Object(Pe.cloneDeep)(t[e]),t[e].isEdit=!0,this.setState({dataSource:t})}},{key:"removeInfo",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);t.splice(e,1),this.backMsg(t),this.setState({dataSource:t})}},{key:"initColumns",value:function(){var e=this;return[{title:"字段",dataIndex:"param",key:"param",width:"200px",render:function(t,a,n){return a.isEdit?s.a.createElement(xa.a,{showSearch:!0,defaultValue:a.param.type?a.param.type+"@@"+a.param.key:null,onChange:e.changeTableParam.bind(e,n),style:{width:"100%"}},e.getColumnsView()):a.param.key}},{title:"参数名",dataIndex:"paramName",key:"paramName",width:"100px",render:function(t,a,n){return a.isEdit?s.a.createElement(ra.a,{onBlur:e.paramNameChange.bind(e,n),defaultValue:a.paramName}):a.paramName}},{title:"数据类型",dataIndex:"dataType",key:"dataType",render:function(e,t){return t.param.type||""}},{title:"操作符",dataIndex:"operators",key:"operators",width:"100px",render:function(t,a,n){return a.isEdit?s.a.createElement(xa.a,{onChange:e.operatorsChange.bind(e,n),value:a.operators,style:{width:"100%"}},s.a.createElement(Fs,{value:"="},"="),s.a.createElement(Fs,{value:">"},">"),s.a.createElement(Fs,{value:">="},">="),s.a.createElement(Fs,{value:"<"}," <"),s.a.createElement(Fs,{value:"<="},"<="),s.a.createElement(Fs,{value:"!="},"!="),s.a.createElement(Fs,{value:"in"},"in"),s.a.createElement(Fs,{value:"not in"},"not in"),s.a.createElement(Fs,{value:"like"},"like"),s.a.createElement(Fs,{value:"not like"},"not like")):a.operators}},{title:"是否必填",dataIndex:"isRequired",key:"isRequired",render:function(t,a,n){return a.isEdit?s.a.createElement(wa.a,{onClick:e.setRequired.bind(e,n),defaultChecked:a.isRequired}):s.a.createElement(wa.a,{key:Math.random(),disabled:!0,defaultChecked:a.isRequired})}},{title:"说明",dataIndex:"instructions",key:"instructions",render:function(t,a,n){return a.isEdit?s.a.createElement(Gs,{onBlur:e.textAreaChange.bind(e,n),defaultValue:a.instructions}):s.a.createElement(Gs,{key:"textareadisabled",defaultValue:a.instructions,disabled:!0})}},{title:"操作",dataIndex:"deal",key:"deal",render:function(t,a,n){return a.isEdit?s.a.createElement("div",null,s.a.createElement("a",{onClick:e.saveInfo.bind(e,n)},"保存"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.cancelSave.bind(e,n)},"取消")):s.a.createElement("div",null,s.a.createElement("a",{onClick:e.editInfo.bind(e,n)},"编辑"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.removeInfo.bind(e,n)},"删除"))}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:30}}},{key:"pass",value:function(){this.props.dataChange(H()({},values))}},{key:"render",value:function(){return s.a.createElement(Ge.a,{className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:!1,dataSource:this.state.dataSource})}}]),t}(r.Component),Bs=Vs,zs=Bs,qs=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Gs,"TextArea","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/paramsTable/inputParams.js"),__REACT_HOT_LOADER__.register(Fs,"Option","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/paramsTable/inputParams.js"),__REACT_HOT_LOADER__.register(Vs,"InputParams","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/paramsTable/inputParams.js"),__REACT_HOT_LOADER__.register(Bs,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/paramsTable/inputParams.js")),ra.a.TextArea),Ks=xa.a.Option,Ys=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={loading:!1,tableColumns:[],dataSource:[]},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){this.getTableColumns(),this.initDataSource(this.props.initValue)}},{key:"componentWillReceiveProps",value:function(e){e.addOutputsignal&&!this.props.addOutputsignal&&this.addOutput(e.inputToOutputData),e.initValue!=this.props.initValue&&this.initDataSource(e.initValue)}},{key:"initDataSource",value:function(e){if(e&&!(e.length<1)){var t=Object(Pe.cloneDeep)(this.state.dataSource);for(var a in e){var n=e[a];t.push({key:Math.random(),param:{key:n.fieldName,type:n.paramType},paramName:n.paramName,operators:n.operators,isRequired:n.required,instructions:n.desc,isEdit:!1})}this.backMsg(t),this.setState({dataSource:t})}}},{key:"backMsg",value:function(e){var t=[];for(var a in e){var n=e[a];n.tmp?t.push(n.tmp):n.isEdit||t.push(n)}this.props.outputParamsChange(t)}},{key:"addOutput",value:function(e){var t=this,a=Object(Pe.cloneDeep)(this.state.dataSource),n={key:Math.random(),param:{},paramName:"",operators:"",isRequired:!0,instructions:"",isEdit:!0};e&&(console.log(e),n.param=e.param,n.paramName=e.paramName,n.operators=e.operators,n.isRequired=e.isRequired,n.instructions=e.instructions),a.unshift(n),this.setState({dataSource:a},function(){t.props.changeAddoutputOverSignal()})}},{key:"getTableColumns",value:function(){var e=this;this.props.tablecolumn(this.props.dataSourceId,this.props.tableId).then(function(t){t&&e.setState({tableColumns:t.data})})}},{key:"getColumnsView",value:function(){return Object(Pe.cloneDeep)(this.state.tableColumns).map(function(e){return s.a.createElement(Ks,{title:e.key,key:e.key,value:e.type+"@@"+e.key},e.key)})}},{key:"changeTableParam",value:function(e,t){if(t=t.split("@@")){var a=Object(Pe.cloneDeep)(this.state.dataSource);a[e].param={type:t[0],key:t[1]},this.setState({dataSource:a})}}},{key:"setRequired",value:function(e,t){var a=Object(Pe.cloneDeep)(this.state.dataSource);a[e].isRequired=t.target.checked,this.setState({dataSource:a})}},{key:"textAreaChange",value:function(e,t){var a=t.target.value,n=Object(Pe.cloneDeep)(this.state.dataSource);n[e].instructions=a,this.setState({dataSource:n})}},{key:"paramNameChange",value:function(e,t){var a=t.target.value,n=Object(Pe.cloneDeep)(this.state.dataSource);n[e].paramName=a,this.setState({dataSource:n})}},{key:"operatorsChange",value:function(e,t){var a=Object(Pe.cloneDeep)(this.state.dataSource);a[e].operators=t,this.setState({dataSource:a})}},{key:"checkInfo",value:function(e,t){var a=Object(Pe.cloneDeep)(this.state.dataSource),n=a[e];if(t&&(n=n.tmp),!n.param.key)return $.a.error("请选择字段"),!1;if(!n.paramName)return $.a.error("请填写参数名"),!1;if(!this.checkVal(n))return!1;for(var i in a)if(i!=e&&a[i].param.key==n.param.key)return t?$.a.error("原数据与现有数据重复，请修改保存"):$.a.error("不能设置相同字段"),!1;return!0}},{key:"checkVal",value:function(e){return e.instructions&&e.instructions.length>200?($.a.error("说明不得大于200字符"),!1):!(e.paramName&&e.paramName.length>16)||($.a.error("参数名不得大于16字符"),!1)}},{key:"saveInfo",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);this.checkInfo(e)&&(t[e].isEdit=!1,t[e].tmp&&(t[e].tmp=null),this.backMsg(t),this.setState({dataSource:t}))}},{key:"cancelSave",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);if(t[e].tmp){if(!this.checkInfo(e,!0))return;t[e]=Object(Pe.cloneDeep)(t[e].tmp),t[e].isEdit=!1}else t.splice(e,1);this.setState({dataSource:t})}},{key:"editInfo",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);t[e].tmp=Object(Pe.cloneDeep)(t[e]),t[e].isEdit=!0,this.setState({dataSource:t})}},{key:"removeInfo",value:function(e){var t=Object(Pe.cloneDeep)(this.state.dataSource);t.splice(e,1),this.backMsg(t),this.setState({dataSource:t})}},{key:"initColumns",value:function(){var e=this;return[{title:"字段",dataIndex:"param",key:"param",width:"200px",render:function(t,a,n){return a.isEdit?s.a.createElement(xa.a,{showSearch:!0,defaultValue:a.param.type?a.param.type+"@@"+a.param.key:null,onChange:e.changeTableParam.bind(e,n),style:{width:"100%"}},e.getColumnsView()):a.param.key}},{title:"参数名",dataIndex:"paramName",key:"paramName",width:"100px",render:function(t,a,n){return a.isEdit?s.a.createElement(ra.a,{onBlur:e.paramNameChange.bind(e,n),defaultValue:a.paramName}):a.paramName}},{title:"数据类型",dataIndex:"dataType",key:"dataType",render:function(e,t){return t.param.type||""}},{title:"说明",dataIndex:"instructions",key:"instructions",render:function(t,a,n){return a.isEdit?s.a.createElement(qs,{onBlur:e.textAreaChange.bind(e,n),defaultValue:a.instructions}):s.a.createElement(qs,{key:"textareadisabled",defaultValue:a.instructions,disabled:!0})}},{title:"操作",dataIndex:"deal",key:"deal",render:function(t,a,n){return a.isEdit?s.a.createElement("div",null,s.a.createElement("a",{onClick:e.saveInfo.bind(e,n)},"保存"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.cancelSave.bind(e,n)},"取消")):s.a.createElement("div",null,s.a.createElement("a",{onClick:e.editInfo.bind(e,n)},"编辑"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.removeInfo.bind(e,n)},"删除"))}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:30}}},{key:"pass",value:function(){this.props.dataChange(H()({},values))}},{key:"render",value:function(){return s.a.createElement(Ge.a,{className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:!1,dataSource:this.state.dataSource})}}]),t}(r.Component),Ws=Ys,Js=Ws,Qs=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(qs,"TextArea","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/paramsTable/outputParams.js"),__REACT_HOT_LOADER__.register(Ks,"Option","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/paramsTable/outputParams.js"),__REACT_HOT_LOADER__.register(Ys,"OutputParams","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/paramsTable/outputParams.js"),__REACT_HOT_LOADER__.register(Ws,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/paramsTable/outputParams.js")),ra.a.TextArea),Xs=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={addInputsignal:!1,addOutputsignal:!1,inputData:[],outputData:[],inputToOutputData:{}},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"changeAddinputOverSignal",value:function(){this.setState({addInputsignal:!1})}},{key:"addInput",value:function(e){this.setState({addInputsignal:!0})}},{key:"inputParamsChange",value:function(e,t){this.setState({inputData:e})}},{key:"changeAddoutputOverSignal",value:function(){this.setState({addOutputsignal:!1})}},{key:"addOutput",value:function(e){e&&!e.param&&(e=null),this.setState({addOutputsignal:!0,inputToOutputData:e})}},{key:"outputParamsChange",value:function(e){this.setState({outputData:e})}},{key:"pass",value:function(){if(!this.state.inputData||this.state.inputData.length<1)$.a.error("请设置输入参数");else if(!this.state.outputData||this.state.outputData.length<1)$.a.error("请设置输出参数");else if(this.state.inputData&&this.state.outputData&&this.state.inputData.length>0&&this.state.outputData.length>0){var e=!1;for(var t in this.state.inputData)if(this.state.inputData[t].isRequired){e=!0;break}if(!e)return void $.a.error("输入参数必须有一个必填项");this.props.dataChange({inputData:this.state.inputData,outputData:this.state.outputData})}else $.a.error("请设置输入输出参数")}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"steps-content"},s.a.createElement(je.a,{title:s.a.createElement("span",null,s.a.createElement("span",{style:{color:"#f04134"}},"*")," 输入参数"),extra:s.a.createElement(ta.a,{onClick:this.addInput.bind(this),style:{marginTop:"10px"},type:"primary"},"添加输入参数"),className:"box-2",noHovering:!0},s.a.createElement(zs,H()({initValue:this.props.initValues&&this.props.initValues.inputParam,inputParamsChange:this.inputParamsChange.bind(this),changeAddinputOverSignal:this.changeAddinputOverSignal.bind(this),addInputsignal:this.state.addInputsignal},this.props))),s.a.createElement(je.a,{title:s.a.createElement("span",null,s.a.createElement("span",{style:{color:"#f04134"}},"*")," 输出参数"),extra:s.a.createElement(ta.a,{onClick:this.addOutput.bind(this),style:{marginTop:"10px"},type:"primary"},"添加输出参数"),style:{marginTop:"20px"},className:"box-2",noHovering:!0},s.a.createElement(Js,H()({initValue:this.props.initValues&&this.props.initValues.outputParam,inputToOutputData:this.state.inputToOutputData,outputParamsChange:this.outputParamsChange.bind(this),changeAddoutputOverSignal:this.changeAddoutputOverSignal.bind(this),addOutputsignal:this.state.addOutputsignal},this.props)))),s.a.createElement("div",{className:"steps-action"},s.a.createElement(ta.a,{onClick:function(){return e.props.cancel()}},"取消"),s.a.createElement(ta.a,{style:{marginLeft:8},onClick:function(){return e.props.prev()}},"上一步"),s.a.createElement(ta.a,{type:"primary",style:{marginLeft:8},onClick:function(){return e.pass()}},"保存")))}}]),t}(r.Component),$s=Xs,Zs=$s,eo=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Qs,"TextArea","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/paramsConfig.js"),__REACT_HOT_LOADER__.register(Xs,"ManageParamsConfig","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/paramsConfig.js"),__REACT_HOT_LOADER__.register($s,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/paramsConfig.js")),void 0),to=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={time:5},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"componentDidMount",value:function(){(function e(){var t=this;eo=setTimeout(function(){var a=t.state.time-1;a>-1?(t.setState({time:a}),e.call(t)):history.back()},1e3)}).call(this)}},{key:"componentWillUnmount",value:function(){clearTimeout(eo)}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(At.a,{type:"flex",justify:"center",style:{textAlign:"center"}},s.a.createElement("div",{style:{fontSize:"30px",marginTop:"40px"}},s.a.createElement(j.a,{type:"check-circle",style:{fontSize:"60px",color:"#00CD00"}}),s.a.createElement("br",null),"修改成功 ",s.a.createElement("br",null))),s.a.createElement(At.a,{type:"flex",justify:"center",style:{textAlign:"center",fontSize:"14px",marginTop:"30px"}},this.state.time||"0","秒后自动返回"),s.a.createElement(At.a,{type:"flex",justify:"center",style:{marginTop:"20px"}},s.a.createElement(ta.a,{size:"large",style:{marginLeft:"8px"},onClick:this.props.cancel},"返回")))}}]),t}(r.Component),ao=to,no=ao,io=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(eo,"timeClock","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/complete.js"),__REACT_HOT_LOADER__.register(to,"ManageComplete","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/complete.js"),__REACT_HOT_LOADER__.register(ao,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/complete.js")),zr.a.Step),ro=[{key:"basicProperties",title:"基本属性",content:Ms},{key:"paramsConfig",title:"参数配置",content:Zs},{key:"complete",title:"完成",content:no}],so=function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t}},oo=function(e){return{getCatalogue:function(t){e(an.getCatalogue(t))},getDataSourceList:function(t){return e(on.getDataSourceByBaseInfo({type:t}))},createApi:function(t){return e(on.createApi(t))},tablelist:function(t){return e(on.tablelist({sourceId:t}))},tablecolumn:function(t,a){return e(on.tablecolumn({sourceId:t,tableName:a}))},previewData:function(t,a){return e(on.previewData({dataSourceId:t,tableName:a}))},updateApi:function(t){return e(on.updateApi(t))},getApiInfo:function(t){return e(on.getApiInfo({apiId:t}))}}},lo=Object(T.b)(so,oo)(rr=function(e){function t(){var e,a,n,i;m()(this,t);for(var r=arguments.length,s=Array(r),o=0;o<r;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={current:0,basicProperties:{},paramsConfig:{},complete:{},initValues:{}},i=a,f()(n,i)}return k()(t,e),g()(t,[{key:"getApiInfo",value:function(){var e=this,t=this.props.router.params.apiId;this.props.getApiInfo(t).then(function(t){t&&e.setState({initValues:t.data})})}},{key:"componentDidMount",value:function(){this.getApiInfo()}},{key:"basicProperties",value:function(e){console.log(e),this.setState({basicProperties:e||{},current:1})}},{key:"paramsConfig",value:function(e){var t=this;console.log(e);var a={};for(var n in a.name=this.state.basicProperties.APIName,a.catalogueId=this.state.basicProperties.APIGroup[this.state.basicProperties.APIGroup.length-1],a.apiDesc=this.state.basicProperties.APIdescription,a.dataSrcId=this.state.basicProperties.dataSource,a.tableName=this.state.basicProperties.table,a.reqLimit=this.state.basicProperties.callLimit,a.respLimit=this.state.basicProperties.backLimit,a.id=this.props.router.params.apiId,a.inputParam=[],a.outputParam=[],e.inputData){var i=e.inputData[n];a.inputParam.push({fieldName:i.param.key,paramName:i.paramName,paramType:i.param.type,operator:i.operators,required:i.isRequired,desc:i.instructions})}for(var r in e.outputData){var s=e.outputData[r];a.outputParam.push({fieldName:s.param.key,paramName:s.paramName,paramType:s.param.type,desc:s.instructions})}console.log(a),this.props.updateApi(a).then(function(a){a&&t.setState({paramsConfig:e||{},current:2})})}},{key:"complete",value:function(e){this.setState({complete:e})}},{key:"reDo",value:function(){this.setState({current:0,basicProperties:{},paramsConfig:{},complete:{}})}},{key:"next",value:function(){var e=ro[this.state.current].key;if(this.state[e]&&this.state[e].pass){var t=this.state.current+1;this.setState({current:t})}}},{key:"prev",value:function(){var e=this.state.current-1;this.setState({current:e})}},{key:"cancel",value:function(){this.props.router.goBack()}},{key:"render",value:function(){var e=ro[this.state.current],t=e.key,a=e.content;return s.a.createElement("div",{className:"m-card g-datamanage"},s.a.createElement("h1",{className:"box-title"}," ",s.a.createElement(Ur.a,null)," 编辑API"),s.a.createElement(je.a,{style:{padding:"20px"},className:"box-2",noHovering:!0},s.a.createElement(zr.a,{current:this.state.current},s.a.createElement(io,{title:"基本属性"}),s.a.createElement(io,{title:"参数配置"}),s.a.createElement(io,{title:"完成"})),s.a.createElement(a,H()({initValues:this.state.initValues,dataSourceId:this.state.basicProperties.dataSource,tableId:this.state.basicProperties.table},this.props,this.state[t],{reDo:this.reDo.bind(this),prev:this.prev.bind(this),cancel:this.cancel.bind(this),dataChange:this[t].bind(this)}))))}}]),t}(r.Component))||rr,co=lo,po=co,uo=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(io,"Step","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/index.js"),__REACT_HOT_LOADER__.register(ro,"steps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/index.js"),__REACT_HOT_LOADER__.register(so,"mapStateToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/index.js"),__REACT_HOT_LOADER__.register(oo,"mapDispatchToProps","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/index.js"),__REACT_HOT_LOADER__.register(lo,"EditAPI","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/index.js"),__REACT_HOT_LOADER__.register(co,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/views/management/editApi/index.js")),s.a.createElement(b.d,{path:"/",component:y.a},s.a.createElement(b.a,{to:"/api"}),s.a.createElement(b.d,{path:"/message",component:v.a},s.a.createElement(b.b,{component:C.a}),s.a.createElement(b.d,{path:"list",component:C.a}),s.a.createElement(b.d,{path:"detail/:msgId",component:w.a})),s.a.createElement(b.d,{path:"/admin",component:D.a},s.a.createElement(b.b,{component:O.a}),s.a.createElement(b.d,{path:"user",component:O.a}),s.a.createElement(b.d,{path:"role",component:R.a}),s.a.createElement(b.d,{path:"role/add",component:x.a}),s.a.createElement(b.d,{path:"role/edit/:roleId",component:S.a})),s.a.createElement(b.d,{path:"/api",component:Le},s.a.createElement(b.b,{component:Xt}),s.a.createElement(b.d,{path:"overview",component:Xt}),s.a.createElement(b.d,{path:"approval",component:ka}),s.a.createElement(b.d,{path:"manage",component:hn}),s.a.createElement(b.d,{path:"manage/detail/:api",component:xr}),s.a.createElement(b.d,{path:"manage/apiType",component:Vr}),s.a.createElement(b.d,{path:"manage/newApi",component:Rs}),s.a.createElement(b.d,{path:"manage/editApi/:apiId",component:po}),s.a.createElement(b.d,{path:"market",component:Ln}),s.a.createElement(b.d,{path:"market/detail/:api",component:Gi}),s.a.createElement(b.d,{path:"mine",component:Si}),s.a.createElement(b.d,{path:"mine/:view",component:Si}),s.a.createElement(b.d,{path:"dataSource",component:$a})))),_o=uo,mo=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(uo,"default","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/routers.js"),function(e){function t(){return m()(this,t),f()(this,(t.__proto__||d()(t)).apply(this,arguments))}return k()(t,e),g()(t,[{key:"render",value:function(){var e=this.props,t=e.store,a=e.history;return s.a.createElement(T.a,{store:t},s.a.createElement(b.e,{routes:_o,history:a,key:Math.random(),onEnter:function(){console.log("enter")}}))}}]),t}(s.a.Component)),ho=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(mo,"Root","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/root.js"),function(e){var t=a(807).default,n=Object(p.a)(t,"hash"),i=n.store,r=n.history;l.a.render(s.a.createElement(c.AppContainer,null,s.a.createElement(e,{store:i,history:r})),document.getElementById("app"))});ho(mo);"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(ho,"render","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/app.js")},82:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a(42),i=a.n(n)()(["CHANGE_LOADING","GET_TOP_RECORD","GET_ALARM_SUM","GET_ALARM_TREND","GET_USAGE","CHOOSE_USER_DATE","CHOOSE_ADMIN_DATE","GET_USER_CALL_INFO","GET_API_FAIL_RANK","GET_USER_API_CALL_RANK","GET_USER_API_SUB_INFO","GET_MARKET_API_FAIL_RANK","GET_MARKET_CALL_INFO","GET_MARKET_API_CALL_RANK","GET_MARKET_API_ERROR_INFO","GET_MARKET_API_APPLY_INFO","GET_MARKET_TOP_CALL_FUNC"],{prefix:"dashBoard/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(i,"dashBoardActionType","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/webapps/dataApi/consts/dashBoardActionType.js")},828:function(e,t,a){},830:function(e,t,a){},86:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(8),i=a.n(n),r=a(4),s=a.n(r),o=a(5),l=a.n(o),c=a(2),p=a.n(c),u=a(6),d=a.n(u),_=a(0),m=function(e){function t(){var e,a,n,r;s()(this,t);for(var o=arguments.length,l=Array(o),c=0;c<o;c++)l[c]=arguments[c];return a=n=p()(this,(e=t.__proto__||i()(t)).call.apply(e,[this].concat(l))),n.resize=function(){var e;return(e=n).__resize__REACT_HOT_LOADER__.apply(e,arguments)},r=a,p()(n,r)}return d()(t,e),l()(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resize,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize,!1)}},{key:"__resize__REACT_HOT_LOADER__",value:function(){console.log("Resize!");var e=this.props.onResize;e&&e()}},{key:"render",value:function(){return this.props.children}}]),t}(_.Component);"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(m,"Resize","/Users/xuexiaokang/Documents/webpack优化/data-stack-web/src/widgets/resize/index.js")}},[[815,6,1,2,0,8,3,7]]]);