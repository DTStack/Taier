(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+JEa":function(e,t,a){"use strict";a.d(t,"b",function(){return s}),a.d(t,"a",function(){return c});var n=a("LvDl"),r=a("HqU/"),o=a.n(r),i=a("udPp");function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.a;return arguments[1].type,e}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case i.a.UPDATE_APP:return null!==t.data?Object(n.assign)({},e,t.data):e;default:return e}}},"/T6w":function(e,t,a){"use strict";var n=a("PVY6");t.a={CREATE_TABLE:n.f+"/batch/batchHiveTableInfo/createTable",SEARCH_TABLE:n.f+"/batch/batchHiveTableInfo/showTables",GET_TABLE:n.f+"/batch/batchHiveTableInfo/getTable",PREVIEW_TABLE:n.f+"/batch/batchHiveTableInfo/getData",SAVE_TABLE:n.f+"/batch/batchHiveTableInfo/alterTable",SEARCH_LOG:n.f+"/batch/batchHiveActionRecord/getRecords",GET_CREATE_CODE:n.f+"/batch/batchHiveTableInfo/createSql",DROP_TABLE:n.f+"/batch/batchHiveTableInfo/dropTable",DDL_CREATE_TABLE:n.f+"/batch/batchHiveTableInfo/ddlCreateTable",CHECK_TABLE_EXIST:n.f+"/batch/batchHiveTableInfo/isTableExist",GET_TABLES_BY_NAME:n.f+"/batch/batchHiveTableInfo/getTableList",CHECK_HDFSLOC_EXIST:n.f+"/batch/batchHiveTableInfo/isHdfsDirExist",GET_TABLE_PARTITION:n.f+"/batch/batchHiveTablePartition/getPartitions",UPLOAD_TABLE_DATA:n.f+"/upload/batch/batchHiveDataImport/importData",CHECK_TABLE_PARTITION:n.f+"/batch/batchHiveTablePartition/checkPartitionExists",NEW_SEARCH_TABLE:n.f+"/batch/batchHiveTableInfo/pageQuery",QUERY_TABLE:n.f+"/batch/batchHiveTableInfo/tableQuery",GET_USERS_IN_TENANT:n.f+"/common/user/getUsersInTenant",GET_TABLE_CATALOGUE:n.f+"/batch/batchHiveCatalogue/getHiveCatalogue",ADD_TABLE_CATALOGUE:n.f+"/batch/batchHiveCatalogue/addCatalogue",DEL_TABLE_CATALOGUE:n.f+"/batch/batchHiveCatalogue/deleteCatalogue",UPDATE_TABLE_CATALOGUE:n.f+"/batch/batchHiveCatalogue/updateHiveCatalogue",ADD_TABLE_TO_CATALOGUE:n.f+"/batch/hiveTableCatalogue/updateHiveCatalogue",DEL_TABLE_IN_CATALOGUE:n.f+"/batch/hiveTableCatalogue/deleteTableCatalogue",APPLY_TABLE:n.f+"/batch/batchApply/apply",GET_REL_TABLE_TREE:n.f+"/batch/batchTableBlood/getTree",GET_REL_TABLE_INFO:n.f+"/batch/batchTableBlood/getTableInfo",GET_PARENT_REL_TABLES:n.f+"/batch/batchTableBlood/getUpstream",GET_CHILD_REL_TABLES:n.f+"/batch/batchTableBlood/getDownstream",GET_REL_TABLE_TASKS:n.f+"/batch/batchTableBlood/getRelateTask",GET_REL_TABLE_COLUMNS:n.f+"/batch/batchTableBlood/getColumns",GET_REL_TABLE_UP_DOWN_COLUMNS:n.f+"/batch/batchTableBlood/getUpAndDownStreamColumns",GET_DIRTY_DATA_TREND:n.f+"/batch/batchDirtyData/dataTrend",TOP30_DIRTY_DATA:n.f+"/batch/batchDirtyData/dataTop",GET_DIRTY_DATA_TABLES:n.f+"/batch/batchDirtyData/getTables",GET_PUB_SYNC_TASK:n.f+"/batch/batchDirtyData/getPubSyncTask",GET_DIRTY_DATA_TABLE_INFO:n.f+"/batch/batchDirtyData/tableInfo",GET_DIRTY_TABLE_OVERVIEW:n.f+"/batch/batchDirtyData/dataOverview",COUNT_DIRTY_DATA:n.f+"/batch/batchDirtyData/countInfo",GET_DIRTY_DATA_ANALYTICS:n.f+"/batch/batchDirtyData/reason",APPLY_LIST:n.f+"/batch/batchApply/pageQuery",APPLY_SOURCE:n.f+"/batch/batchApply/apply",APPLY_CANCEL:n.f+"/batch/batchApply/cancel",REVOKE_PERMISSION:n.f+"/batch/batchApply/revoke",APPLY_HANDLE:n.f+"/batch/batchApply/getRelateTask",ADD_MARK:n.f+"/batch/batchHiveTableCollect/collect",CANCEL_MARK:n.f+"/batch/batchHiveTableCollect/cancelCollect",ApplY_REPLY:n.f+"/batch/batchApply/reply",PROJECT_TABLE_COUNT:n.f+"/batch/batchHiveTableCount/tableCount",PROJECT_STORE_COUNT:n.f+"/batch/batchHiveTableCount/totalSize",PROJECT_STORE_TOP:n.f+"/batch/batchHiveTableCount/projectSizeTopOrder",PROJECT_TABLE_STORE_TOP:n.f+"/batch/batchHiveTableCount/tableSizeTopOrder",PROJECT_DATA_OVERVIEW:n.f+"/batch/batchHiveTableCount/dataHistory"}},"/gYX":function(e,t,a){"use strict";a.d(t,"a",function(){return h});var n=a("QbLZ"),r=a.n(n),o=a("Yz+Y"),i=a.n(o),s=a("iCc5"),c=a.n(s),l=a("V7oC"),u=a.n(l),p=a("FYw3"),d=a.n(p),m=a("mRg0"),E=a.n(m),f=a("sbe7"),T=a.n(f),h=(a("RSVH"),function(e){function t(){return c()(this,t),d()(this,(t.__proto__||i()(t)).apply(this,arguments))}return E()(t,e),u()(t,[{key:"render",value:function(){var e=this.props;return T.a.createElement("img",r()({},e,{className:"rdos-icon "+(e.className||""),alt:e.alt,src:"public/rdos/img/icon/"+e.type+".svg"}))}}]),t}(f.Component))},"1I4j":function(e,t,a){"use strict";a("7Qib");var n=a("IHrQ"),r=(a("OZjc"),a("sVOr")),o=a("yGiC"),i=a("W95b"),s=a("hPfy"),c=function(e){return i.a.post(s.a.MASSAGE_QUERY,e)},l=function(e){return i.a.post(s.a.GET_MASSAGE_BY_ID,e)},u=function(e){return i.a.post(s.a.MASSAGE_MARK_AS_READ,e)},p=function(e){return i.a.post(s.a.MASSAGE_MARK_AS_ALL_READ,e)},d=function(e){return i.a.post(s.a.MASSAGE_DELETE,e)},m=a("wPMF"),E=a("vB4/"),f=(a("zbcj"),a("PVY6")),T={MASSAGE_QUERY:f.f+"/common/notifyRecord/pageQuery",GET_MASSAGE_BY_ID:f.f+"/common/notifyRecord/getOne",MASSAGE_MARK_AS_READ:f.f+"/common/notifyRecord/tabRead",MASSAGE_MARK_AS_ALL_READ:f.f+"/common/notifyRecord/allRead",MASSAGE_DELETE:f.f+"/common/notifyRecord/delete"};t.a={checkRoot:function(e){return n.a.post(E.a.CHECKISROOT,e,{isSilent:!0})},getProjects:function(e,t){switch(e){case m.b.RDOS:return r.a.getProjects(t);default:return}},queryRole:function(e,t){switch(e){case m.b.DATA_QUALITY:return o.a.queryRole(t);case m.b.API:return n.a.post(E.a.DATAAPI_ROLE_QUERY,t);case m.b.LABEL:return n.a.post(E.a.DL_ROLE_QUERY,t);case m.b.RDOS:default:return r.a.getRoleList(t)}},updateRole:function(e,t){switch(e){case m.b.RDOS:return r.a.updateRole(t);case m.b.DATA_QUALITY:return o.a.updateRole(t);case m.b.API:return n.a.post(E.a.DATAAPI_ROLE_PERMISSION_ADD_OR_EDIT,t);case m.b.LABEL:return n.a.post(E.a.DL_ROLE_PERMISSION_ADD_OR_EDIT,t);default:return}},deleteRole:function(e,t){switch(e){case m.b.RDOS:return r.a.deleteRole(t);case m.b.DATA_QUALITY:return o.a.deleteRole(t);case m.b.API:return n.a.post(E.a.DATAAPI_REMOVE_ROLE,t);case m.b.LABEL:return n.a.post(E.a.DL_REMOVE_ROLE,t);default:return}},getRoleInfo:function(e,t){switch(e){case m.b.RDOS:return r.a.getRoleInfo(t);case m.b.DATA_QUALITY:return o.a.getRolePerission(t);case m.b.API:return n.a.post(E.a.DATAAPI_ROLE_PERMISSION,t);case m.b.LABEL:return n.a.post(E.a.DL_ROLE_PERMISSION,t);default:return}},getRoleTree:function(e,t){switch(e){case m.b.RDOS:return r.a.getRoleTree(t);case m.b.DATA_QUALITY:return o.a.getRolePerissions(t);case m.b.API:return n.a.post(E.a.DATAAPI_GET_ROLE_TREE,t);case m.b.LABEL:return n.a.post(E.a.DL_GET_ROLE_TREE,t);default:return}},getMessage:function(e,t){switch(e){case m.b.RDOS:return n.a.post(T.MASSAGE_QUERY,t);case m.b.DATA_QUALITY:return c(t);case m.b.API:return n.a.post(E.a.DATAAPI_MASSAGE_QUERY,t);case m.b.LABEL:return n.a.post(E.a.DL_MASSAGE_QUERY,t);default:return null}},getMsgById:function(e,t){switch(e){case m.b.RDOS:return n.a.post(T.GET_MASSAGE_BY_ID,t);case m.b.DATA_QUALITY:return l(t);case m.b.API:return n.a.post(E.a.DATAAPI_GET_MASSAGE_BY_ID,t);case m.b.LABEL:return n.a.post(E.a.DL_GET_MASSAGE_BY_ID,t);default:return null}},markAsRead:function(e,t){switch(e){case m.b.RDOS:return n.a.post(T.MASSAGE_MARK_AS_READ,t);case m.b.DATA_QUALITY:return u(t);case m.b.API:return n.a.post(E.a.DATAAPI_MASSAGE_MARK_AS_READ,t);case m.b.LABEL:return n.a.post(E.a.DL_MASSAGE_MARK_AS_READ,t);default:return null}},markAsAllRead:function(e,t){switch(e){case m.b.RDOS:return n.a.post(T.MASSAGE_MARK_AS_ALL_READ,t);case m.b.DATA_QUALITY:return p(t);case m.b.API:return n.a.post(E.a.DATAAPI_MASSAGE_MARK_AS_ALL_READ,t);case m.b.LABEL:return n.a.post(E.a.DL_MASSAGE_MARK_AS_ALL_READ,t);default:return null}},deleteMsgs:function(e,t){switch(e){case m.b.RDOS:return n.a.post(T.MASSAGE_DELETE,t);case m.b.DATA_QUALITY:return d(t);case m.b.API:return n.a.post(E.a.DATAAPI_MASSAGE_DELETE,t);case m.b.LABEL:return n.a.post(E.a.DL_MASSAGE_DELETE,t);default:return null}},queryUser:function(e,t){switch(e){case m.b.RDOS:return r.a.getProjectUsers(t);case m.b.DATA_QUALITY:return o.a.getUserPages(t);case m.b.API:return n.a.post(E.a.DATAAPI_QUERY_USER,t);case m.b.LABEL:return n.a.post(E.a.DL_QUERY_USER,t);default:return}},loadUsersNotInProject:function(e,t){switch(e){case m.b.RDOS:return n.a.post(E.a.RDOS_SEARCH_UIC_USERS,t);case m.b.DATA_QUALITY:return n.a.post(E.a.DQ_SEARCH_UIC_USERS,t);case m.b.LABEL:return n.a.post(E.a.DL_SEARCH_UIC_USERS,t);case m.b.API:return n.a.post(E.a.DATAAPI_SEARCH_UIC_USERS,t);default:return}},addRoleUser:function(e,t){switch(e){case m.b.RDOS:return n.a.post(E.a.RDOS_ADD_USER,t);case m.b.DATA_QUALITY:return n.a.post(E.a.DQ_ADD_USER,t);case m.b.LABEL:return n.a.post(E.a.DL_ADD_USER,t);case m.b.API:return n.a.post(E.a.DATAAPI_ADD_USER,t);default:return}},removeProjectUser:function(e,t){switch(e){case m.b.RDOS:return r.a.removeProjectUser(t);case m.b.DATA_QUALITY:return o.a.delUser(t);case m.b.API:return n.a.post(E.a.DATAAPI_REMOVE_USER,t);case m.b.LABEL:return n.a.post(E.a.DL_REMOVE_USER,t);default:return}},updateUserRole:function(e,t){switch(e){case m.b.RDOS:return r.a.updateUserRole(t);case m.b.DATA_QUALITY:return o.a.updateUser(t);case m.b.API:return n.a.post(E.a.DATAAPI_UPDATE_USER_ROLE,t);case m.b.LABEL:return n.a.post(E.a.DL_UPDATE_USER_ROLE,t);default:return}}}},"2BCK":function(e,t,a){"use strict";var n={};a.r(n),a.d(n,"updateMsg",function(){return C});var r=a("QbLZ"),o=a.n(r),i=(a("FGdI"),a("Pbn2")),s=a.n(i),c=a("Yz+Y"),l=a.n(c),u=a("iCc5"),p=a.n(u),d=a("V7oC"),m=a.n(d),E=a("FYw3"),f=a.n(E),T=a("mRg0"),h=a.n(T),_=a("sbe7"),A=a.n(_),g=(a("17x9"),a("/MKj")),b=a("fvjX"),y=a("dtw8"),v=(a("7Qib"),a("s9ml")),S=(a("K84j"),a("d+5I"));function C(e){return{type:S.a.UPDATE_MSG,data:e}}var R,O=a("pLPX"),I=(a("rHgN"),Object(g.b)(function(e){return{user:e.user,apps:e.apps,routing:e.routing,msgList:e.msgList}},function(e){return Object(b.b)(n,e)})(R=function(e){function t(){return p()(this,t),f()(this,(t.__proto__||l()(t)).apply(this,arguments))}return h()(t,e),m()(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=(e.user,e.apps),a=e.children,n=e.msgList,r=e.updateMsg,i=A.a.createElement(y.c,{to:"/message"},A.a.createElement(O.b,null,A.a.createElement(s.a,{type:"message"})),A.a.createElement(O.d,null,"消息中心")),c=a?A.a.cloneElement(a,{msgList:n,updateMsg:r,apps:t}):A.a.createElement(v.a,null);return A.a.createElement("div",{className:"message"},A.a.createElement(O.c,o()({logo:i,menuItems:[]},this.props)),A.a.createElement("div",{className:"container"},c))}}]),t}(_.Component))||R);t.a=I},"2FT0":function(e,t,a){"use strict";a.d(t,"b",function(){return d}),a.d(t,"a",function(){return m}),a.d(t,"c",function(){return E});var n=a("4d7F"),r=a.n(n),o=(a("tL+A"),a("QpBz")),i=a.n(o),s=(a("pjuD"),a("rR1Q")),c=a.n(s),l=a("dtw8"),u=(a("OZjc"),a("7Qib")),p=a("sVOr");function d(e){switch(e.status){case 500:case 502:case 504:c.a.error({message:title,description:"服务器出现了点问题"});case 402:case 200:return e;case 302:i.a.info("登录超时, 请重新登录！");case 413:c.a.error({message:"异常",description:e.message});default:return e}}function m(e){switch(e.code){case 1:return e;case 0:return p.a.openLogin(),r.a.reject(e);case 3:return 0===document.querySelectorAll(".ant-notification-notice").length&&c.a.error({message:"权限通知",description:e.message}),r.a.reject(e);case 16:l.g.push("/");default:return e.message&&c.a.error({message:"异常",description:e.message}),e}}function E(){var e=u.a.getCookie("project_id");e&&"undefined"!==e||(u.a.deleteCookie("project_id"),l.g.push("/"))}},"2J7O":function(e,t,a){"use strict";var n=a("+hIS"),r="undefined"==typeof monaco?self.monaco:monaco;Object(n.a)({id:"shell",extensions:[".sh",".bash"],aliases:["Shell","sh"],loader:function(){return r.Promise.wrap(a.e(20).then(a.bind(null,"AoyC")))}})},"2KkY":function(e,t,a){"use strict";a.d(t,"w",function(){return T}),a.d(t,"l",function(){return h}),a.d(t,"t",function(){return _}),a.d(t,"s",function(){return A}),a.d(t,"x",function(){return g}),a.d(t,"k",function(){return b}),a.d(t,"a",function(){return y}),a.d(t,"B",function(){return v}),a.d(t,"z",function(){return S}),a.d(t,"p",function(){return C}),a.d(t,"f",function(){return R}),a.d(t,"i",function(){return O}),a.d(t,"c",function(){return I}),a.d(t,"A",function(){return D}),a.d(t,"q",function(){return L}),a.d(t,"g",function(){return P}),a.d(t,"j",function(){return k}),a.d(t,"d",function(){return N}),a.d(t,"y",function(){return U}),a.d(t,"o",function(){return M}),a.d(t,"e",function(){return F}),a.d(t,"h",function(){return x}),a.d(t,"b",function(){return G}),a.d(t,"v",function(){return B}),a.d(t,"m",function(){return V}),a.d(t,"r",function(){return H}),a.d(t,"u",function(){return Q}),a.d(t,"n",function(){return J});var n=a("YEIV"),r=a.n(n),o=a("QbLZ"),i=a.n(o),s=a("P2sY"),c=a.n(s),l=a("m1cH"),u=a.n(l),p=a("dtw8"),d=a("LvDl"),m=a("OZjc"),E=a("sVOr"),f=a("5Gkw");function T(e){return E.a.publishRealtimeTask(e).then(function(e){if(1===e.code)return e})}function h(e,t,a){return function(n){var r=t.findIndex(function(t){return e===t.id});if(r>-1){if(a.id===e&&t.length>1)n(g(t[r+1]||t[r-1]));return n({type:f.a.CLOSE_PAGE,data:r})}}}function _(e){return function(t){E.a.getTask(e).then(function(e){1===e.code&&e.data&&(t(A(e.data)),"/realtime/task"!==location.pathname&&p.g.push("/realtime/task"))})}}function A(e){return function(t){return t(g(e)),t({type:f.a.NEW_PAGE,data:e})}}function g(e){return function(t){return t(v(e)),t({type:f.a.SET_CURRENT_PAGE,data:e})}}function b(e){return{type:f.a.CLOSE_OTHERS,data:e}}function y(){return{type:f.a.CLEAR_PAGES}}function v(e){return{type:f.a.UPDATE_PAGE,data:e}}function S(e){return{type:f.a.SET_INPUT_DATA,data:e}}function C(e){return{type:f.a.GET_INPUT_DATA,data:e}}function R(e){return{type:f.a.CLEAR_CURRENT_INPUT_DATA,data:e}}function O(e){return{type:f.a.CLEAR_OTHER_INPUT_DATA,data:e}}function I(){return{type:f.a.CLEAR_ALL_INPUT_DATA}}function D(e){return{type:f.a.SET_OUTPUT_DATA,data:e}}function L(e){return{type:f.a.GET_OUTPUT_DATA,data:e}}function P(e){return{type:f.a.CLEAR_CURRENT_OUTPUT_DATA,data:e}}function k(e){return{type:f.a.CLEAR_OTHER_OUTPUT_DATA,data:e}}function N(){return{type:f.a.CLEAR_ALL_OUTPUT_DATA}}function U(e){return{type:f.a.SET_DIMESION_DATA,data:e}}function M(e){return{type:f.a.GET_DIMESION_DATA,data:e}}function F(e){return{type:f.a.CLEAR_CURRENT_DIMESION_DATA,data:e}}function x(e){return{type:f.a.CLEAR_OTHER_DIMESION_DATA,data:e}}function G(){return{type:f.a.CLEAR_ALL_DIMESION_DATA}}var w="pages",j=m.a.get(w)||[];function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments[1];switch(t.type){case f.a.GET_PAGES:return m.a.get(w);case f.a.NEW_PAGE:if(e.findIndex(function(e){return t.data.id===e.id})<0){var a=[].concat(u()(e),[t.data]);return m.a.set(w,a),a}return e;case f.a.UPDATE_PAGE:var n=[].concat(u()(e)),r=t.data,o=e.findIndex(function(e){return r.id===e.id});return o>-1&&(n[o]=c()(e[o],r)),n;case f.a.CLOSE_PAGE:var i=[].concat(u()(e));return t.data>-1&&(i.splice(t.data,1),m.a.set(w,i)),i;case f.a.CLEAR_PAGES:return m.a.set(w,[]),[];case f.a.CLOSE_OTHERS:var s=Object(d.cloneDeep)([].concat(u()(e))),l=t.data;return s=s.filter(function(e){return e.id==l.id}),m.a.set(w,s),s;default:return e}}var K="current_page",Y=m.a.get(K)||{};function V(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments[1];switch(t.type){case f.a.GET_CURRENT_PAGE:return m.a.get(K);case f.a.SET_CURRENT_PAGE:var a=t.data||Y;return m.a.set(K,a),a;default:return e}}function H(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case f.a.SET_INPUT_DATA:return i()({},e,r()({},t.data.taskId,t.data.source));case f.a.GET_INPUT_DATA:return e;case f.a.CLEAR_CURRENT_INPUT_DATA:var a=i()({},e);return delete a[t.data],a;case f.a.CLEAR_OTHER_INPUT_DATA:var n=t.data;return r()({},n,e[n]);case f.a.CLEAR_ALL_INPUT_DATA:return{};default:return e}}function Q(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case f.a.SET_OUTPUT_DATA:return i()({},e,r()({},t.data.taskId,t.data.sink));case f.a.GET_OUTPUT_DATA:return e;case f.a.CLEAR_CURRENT_OUTPUT_DATA:var a=i()({},e);return delete a[t.data],a;case f.a.CLEAR_OTHER_OUTPUT_DATA:var n=t.data;return r()({},n,e[n]);case f.a.CLEAR_ALL_OUTPUT_DATA:return{};default:return e}}function J(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case f.a.SET_DIMESION_DATA:return i()({},e,r()({},t.data.taskId,t.data.side));case f.a.GET_DIMESION_DATA:return e;case f.a.CLEAR_CURRENT_DIMESION_DATA:var a=i()({},e);return delete a[t.data],a;case f.a.CLEAR_OTHER_DIMESION_DATA:var n=t.data;return r()({},n,e[n]);case f.a.CLEAR_ALL_DIMESION_DATA:return{};default:return e}}},"2Ul7":function(e,t,a){"use strict";a.d(t,"a",function(){return D});a("hr7U");var n=a("9xET"),r=a.n(n),o=(a("MaXC"),a("4IMT")),i=a.n(o),s=(a("fv9D"),a("ZPTe")),c=a.n(s),l=(a("tL+A"),a("QpBz")),u=a.n(l),p=a("Yz+Y"),d=a.n(p),m=a("iCc5"),E=a.n(m),f=a("V7oC"),T=a.n(f),h=a("FYw3"),_=a.n(h),A=a("mRg0"),g=a.n(A),b=a("sbe7"),y=a.n(b),v=a("7Qib"),S=a("CPzz"),C=a("1I4j"),R=a("ER3F"),O=a("wPMF"),I=a("YIQC"),D=function(e){function t(){var e,a,n,r;E()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=_()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(i))),n.state={app:v.a.getParameterByName("app")},n.goIndex=function(){n.props.router.go(-1)},n.submit=function(){var e=n,t=n.state.app;e.form.validateFieldsAndScroll(function(e,a){e||(a.roleType=1,C.a.updateRole(t,a).then(function(e){1===e.code&&(u.a.success("创建角色成功！"),n.goIndex())}))})},r=a,_()(n,r)}return g()(t,e),T()(t,[{key:"render",value:function(){var e=this,t=this.state.app;return y.a.createElement("div",{className:"box-1"},y.a.createElement("div",{className:"box-card"},y.a.createElement("h1",{className:"card-title"},y.a.createElement(R.a,null)," 创建 ",Object(I.a)(t),"角色"),y.a.createElement("article",{className:"section"},y.a.createElement(S.a,{key:"add-role",ref:function(t){return e.form=t}}),y.a.createElement(r.a,null,y.a.createElement(c.a,O.d.labelCol),y.a.createElement(c.a,O.d.wrapperCol,y.a.createElement(i.a,{type:"primary",onClick:this.submit},"确认添加"),y.a.createElement(i.a,{style:{marginLeft:"20px"},onClick:this.goIndex},"取消"))))))}}]),t}(b.Component)},5012:function(e,t,a){"use strict";a.d(t,"a",function(){return c}),a.d(t,"e",function(){return l}),a.d(t,"f",function(){return u}),a.d(t,"d",function(){return p}),a.d(t,"c",function(){return d}),a.d(t,"b",function(){return m}),a.d(t,"i",function(){return E}),a.d(t,"g",function(){return f}),a.d(t,"h",function(){return T});a("pjuD");var n=a("rR1Q"),r=a.n(n),o=(a("4d7F"),a("P2sY")),i=a.n(o),s=a("LvDl");function c(){var e=s.debounce.apply(void 0,arguments);return function(t){return t.persist(),e(t)}}function l(e,t){for(var a=0;a<e.length;a+=1){if(e[a].id===t.id){e.splice(a,1);break}e[a].children&&l(e[a].children,t)}}function u(e,t){if(e.id!==parseInt(t.id,10)){if(e.children)for(var a=e.children,n=0;n<a.length;n+=1)u(a[n],t)}else e=i()(e,t)}function p(e,t){if(u(e,t),t.children)for(var a=t.children,n=0;n<a.length;n+=1)p(e,a[n])}function d(e){return"rdos"===e}function m(e){var t=[],a=[];if(!e)return"";for(var n=0;n<e.length;n++){var r=e[n];t.push({index:n,char:r});var o=t[0];if(t.length<2)"'"!=o.char&&'"'!=o.char&&"-"!=o.char&&(t=[]);else{var i=t[t.length-1];if("'"==o.char||'"'==o.char){if(i.char==o.char){t=[];continue}}else if("-"==o.char){if("-"!=t[1].char){t=[];continue}if("\n"==i.char){a.push({begin:o.index,end:i.index}),t=[];continue}if(n==e.length-1){a.push({begin:o.index,end:n});continue}}else t=[]}}return e=function(e,t,a){var n="",r=0;if(!a||a.length<1)return e;for(var o=0;o<a.length;o++){var i=a[o],s=i.begin;n=n+e.substring(r,s)+t,r=i.end+1,o==a.length-1&&(n+=e.substring(r))}return n}(e,"",a)}function E(e){if(!e)return e;e=e.trim(),Object(s.endsWith)(e,";")||(e+=";");for(var t=[],a=0,n=null,r=0;r<e.length;r++){var o=e[r];"'"==o||'"'==o?n=n==o?null:o:";"==o&&null==n&&(t.push(e.substring(a,r)),a=r+1)}return t}function f(e){var t=document.getElementById(e);t&&t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded():t&&t.scrollIntoView&&t.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}function T(e,t){0===document.querySelectorAll(".ant-notification-notice").length&&r.a.error({message:e,description:t})}},"56ye":function(e,t,a){},"5Gkw":function(e,t,a){"use strict";a.d(t,"a",function(){return o}),a.d(t,"b",function(){return i}),a.d(t,"c",function(){return s}),a.d(t,"d",function(){return c});var n=a("zbcj"),r=a.n(n),o=r()(["GET_PAGES","NEW_PAGE","CLOSE_PAGE","UPDATE_PAGE","CLEAR_PAGES","CLOSE_OTHERS","SET_CURRENT_PAGE","GET_CURRENT_PAGE","SET_INPUT_DATA","GET_INPUT_DATA","CLEAR_CURRENT_INPUT_DATA","CLEAR_OTHER_INPUT_DATA","CLEAR_ALL_INPUT_DATA","SET_OUTPUT_DATA","GET_OUTPUT_DATA","CLEAR_CURRENT_OUTPUT_DATA","CLEAR_OTHER_OUTPUT_DATA","CLEAR_ALL_OUTPUT_DATA","SET_DIMESION_DATA","GET_DIMESION_DATA","CLEAR_CURRENT_DIMESION_DATA","CLEAR_OTHER_DIMESION_DATA","CLEAR_ALL_DIMESION_DATA"],{prefix:"realtimeTask/browser/"}),i=r()(["ADD_TASK_VISIBLE","ADD_RES_VISIBLE","EDIT_TASK_VISIBLE","ADD_TASK_CATA_VISIBLE","EDIT_TASK_CATA_VISIBLE","ADD_RES_CATA_VISIBLE","EDIT_RES_CATA_VISIBLE","ADD_FUNC_CATA_VISIBLE","EDIT_FUNC_CATA_VISIBLE","UPDATE_MODAL_ACTION","MODAL_HIDDEN"],{prefix:"realtimeTask/modal/"}),s=r()(["GET_RESOURCE","REMOVE_RESOURCE","ADD_RESOURCE"],{prefix:"realtimeTask/res/"}),c=r()(["GET_REALTIME_TREE","UPDATE_REALTIME_TREE_NODE","UPDATE_REALTIME_TREE","REMOVE_REALTIME_TREE_NODE","MERGE_REALTIME_TREE"],{prefix:"realtimeTask/tree/"})},"76p7":function(e,t,a){"use strict";a.d(t,"a",function(){return i});var n=a("QbLZ"),r=a.n(n),o={OPEN_COMMAND_LINE:"editor.action.quickCommand",OPEN_FIND_TOOL:"actions.find",OPEN_REPLACE_TOOL:"editor.action.startFindReplaceAction"};function i(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=r()({},{find:"find",replace:"replace",commandPane:"commandPane"},t);return function(t){switch(t){case a.find:return void e.trigger("anyString",o.OPEN_FIND_TOOL);case a.replace:return void e.trigger("anyString",o.OPEN_REPLACE_TOOL);case a.commandPane:return void e.trigger("anyString",o.OPEN_COMMAND_LINE)}}}},"7Qib":function(e,t,a){"use strict";var n=a("FyfS"),r=a.n(n),o=a("gDS+"),i=a.n(o),s=a("wd/R"),c=a.n(s),l={pageWidth:function(){return Math.max(document.documentElement.clientWidth,window.innerWidth||0)},pageHeight:function(){return Math.max(document.documentElement.clientHeight,window.innerHeight||0)},checkExist:function(e){return void 0!==e&&null!==e},isMacOs:function(){return navigator.userAgent.indexOf("Macintosh")>-1},isWindows:function(){return navigator.userAgent.indexOf("Windows")>-1},getParameterByName:function(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null},getBase64:function(e,t){var a=new FileReader;a.addEventListener("load",function(){return t(a.result)}),a.readAsDataURL(e)},percent:function(e,t){return e&&e!==1/0?(e>1&&(e=1),t=t||2,t=Math.pow(10,t),Math.round(e*t*100)/t+"%"):"0%"},getCssText:function(e){var t="";for(var a in e)t+=a+":"+e[a]+";";return t},formatDateTime:function(e){return c.a.locale("zh-cn"),c()(e).format("YYYY-MM-DD HH:mm:ss")},formatDate:function(e){return c.a.locale("zh-cn"),c()(e).format("YYYY-MM-DD")},formatDateHours:function(e){return c.a.locale("zh-cn"),c()(e).format("YYYY-MM-DD HH:mm")},formatHours:function(e){return c.a.locale("zh-cn"),c()(e).format("HH:mm")},trim:function(e){return"string"==typeof e?e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):e},trimlr:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")},getCookie:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?unescape(t[2]):null},deleteCookie:function(e,t,a){var n=new Date;n.setDate(n.getDate()-1);t=t||document.domain,a=a||"/";document.cookie=e+"=; expires="+n+"; domain="+t+"; path="+a},deleteAllCookies:function(e,t){for(var a=document.cookie.split(";"),n=0;n<a.length;n++)a[n]&&this.deleteCookie(a[n].split("=")[0],t,e)},setCookie:function(e,t,a){var n="";if(a){var r=new Date;r.setTime(r.getTime()+24*a*60*60*1e3),n="; expires="+r.toUTCString()}document.cookie=e+"="+t+n+"; path=/"},convertBytes:function(e){if(e>1024){var t=(e/1024).toFixed(2);if(t>1024){var a=(t/1024).toFixed(2);return a>1024?(a/1024).toFixed(2)+" GB":a+" MB"}return t+" KB"}return e+" B"},toQfw:function(e){if(!e)return 0;return e=(e=e.toString?e.toString():e).replace(/(?=(?!(\b))(\d{3})+$)/g,",")},textOverflowExchange:function(e,t){return e&&e.length>t?e.substring(0,t)+"...":e},jsonFormat:function(e,t){try{var a=JSON.parse(e);return i()(a,null,t||2)}catch(e){return null}},sortByCompareFunctions:function(e){for(var t=arguments.length,a=Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];e.sort(function(e,t){var n=0,o=!0,i=!1,s=void 0;try{for(var c,l=r()(a);!(o=(c=l.next()).done);o=!0){if(0!=(n=(0,c.value)(e,t)))return n}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}return n})}};t.a=l},"7UKp":function(e,t,a){"use strict";var n=a("7Qib"),r=a("IHrQ"),o=a("OZjc"),i=a("vB4/"),s=APP_CONF.UIC_URL||"",c=APP_CONF.UIC_DOMAIN||"";t.a={logout:function(){r.a.post(i.a.LOGOUT).then(function(e){o.a.clear(),n.a.deleteCookie("dt_user_id",c,"/"),n.a.deleteCookie("dt_token",c,"/"),n.a.deleteCookie("dt_tenant_id",c,"/"),n.a.deleteCookie("dt_tenant_name",c,"/"),n.a.deleteCookie("dt_username",c,"/"),n.a.deleteCookie("dt_is_tenant_admin",c,"/"),n.a.deleteCookie("dt_is_tenant_creator",c,"/"),n.a.deleteCookie("project_id",c,"/"),window.location.href=s+"/#/login"})},getInitUser:function(){return this.getLoginedUser()},getLoginedUser:function(){var e={};return e.userName=n.a.getCookie("dt_username"),e.dtuicUserId=n.a.getCookie("dt_user_id"),e.isTenantAdmin="true"===n.a.getCookie("dt_is_tenant_admin"),e.isTenantCreator="true"===n.a.getCookie("dt_is_tenant_creator"),e}}},AVFO:function(e,t,a){"use strict";a.d(t,"a",function(){return k});a("nT0F");var n=a("MM9K"),r=a.n(n),o=(a("hr7U"),a("9xET")),i=a.n(o),s=(a("MaXC"),a("4IMT")),c=a.n(s),l=(a("fv9D"),a("ZPTe")),u=a.n(l),p=(a("tL+A"),a("QpBz")),d=a.n(p),m=a("Yz+Y"),E=a.n(m),f=a("iCc5"),T=a.n(f),h=a("V7oC"),_=a.n(h),A=a("FYw3"),g=a.n(A),b=a("mRg0"),y=a.n(b),v=a("sbe7"),S=a.n(v),C=a("LvDl"),R=a("7Qib"),O=a("1I4j"),I=a("wPMF"),D=a("ER3F"),L=a("YIQC"),P=a("CPzz"),k=function(e){function t(){var e,a,n,r;T()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=g()(this,(e=t.__proto__||E()(t)).call.apply(e,[this].concat(i))),n.state={roleInfo:{},loading:!1,app:R.a.getParameterByName("app")},n.goIndex=function(){n.props.router.go(-1)},n.submit=function(){var e=n;e.form.validateFieldsAndScroll(function(t,a){if(!t){var r=Object(C.assign)(n.state.roleInfo,a);O.a.updateRole(app,r).then(function(t){1===t.code&&(d.a.success("角色更新成功！"),e.goIndex())})}})},n.getRoleInfo=function(){var e=n,t=n.state.app,a=e.props.params;e.setState({loading:!0}),O.a.getRoleInfo(t,{roleId:a.roleId}).then(function(t){1===t.code&&e.setState({roleInfo:t.data,loading:!1})})},r=a,g()(n,r)}return y()(t,e),_()(t,[{key:"componentDidMount",value:function(){this.getRoleInfo()}},{key:"render",value:function(){var e=this,t=this.state,a=t.app,n=t.roleInfo;return S.a.createElement("div",{className:"box-1"},S.a.createElement("div",{className:"box-card"},S.a.createElement("h1",{className:"card-title"},S.a.createElement(D.a,null)," 查看 ",Object(L.a)(a),"角色"),S.a.createElement(r.a,{tip:"Loading...",spinning:this.state.loading},S.a.createElement("article",{className:"section"},S.a.createElement(P.a,{roleInfo:n,ref:function(t){return e.form=t}}),S.a.createElement(i.a,null,S.a.createElement(u.a,I.d.labelCol),S.a.createElement(u.a,I.d.wrapperCol,S.a.createElement(c.a,{type:"primary",disabled:!0,onClick:this.submit},"确认更新"),S.a.createElement(c.a,{style:{marginLeft:"20px"},onClick:this.goIndex},"取消")))))))}}]),t}(v.Component)},CMun:function(e,t,a){"use strict";var n=a("zbcj"),r=a.n(n)()(["GET_USER","UPDATE_USER","GET_NOT_PROJECT_USERS","GET_PROJECT_USERS"],{prefix:"user/"});t.a=r},CPzz:function(e,t,a){"use strict";var n=a("QbLZ"),r=a.n(n),o=(a("cUip"),a("iJl9")),i=a.n(o),s=a("m1cH"),c=a.n(s),l=a("Yz+Y"),u=a.n(l),p=a("iCc5"),d=a.n(p),m=a("V7oC"),E=a.n(m),f=a("FYw3"),T=a.n(f),h=a("mRg0"),_=a.n(h),A=(a("ywA0"),a("sF4d")),g=a.n(A),b=(a("ek7I"),a("FAat")),y=a.n(b),v=(a("nTym"),a("qu0K")),S=a.n(v),C=a("sbe7"),R=a.n(C),O=a("7Qib"),I=a("wPMF"),D=a("1I4j"),L=S.a.Item,P=(y.a.Option,g.a.TreeNode),k=function(e){function t(){var e,a,n,r;d()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=T()(this,(e=t.__proto__||u()(t)).call.apply(e,[this].concat(i))),n.state={expandedKeys:[],autoExpandParent:!0,checkedKeys:[],roleTree:[]},n.onCheck=function(e){n.setState({checkedKeys:e},function(){n.props.form.setFieldsValue({permissionIds:e})})},n.getLeafNodes=function(e){var t=[].concat(c()(e));return function e(a){for(var n=0;n<a.length;n++){var r=a[n];if(r.children&&r.children.length>0){var o=t.indexOf(""+r.nodeId);o>-1&&t.splice(o,1),e(r.children)}}}(n.state.roleTree),t},n.renderTreeNodes=function(e){return e&&e.map(function(e){var t=e.bindData,a=""+e.nodeId;return e.children&&e.children.length>0?R.a.createElement(P,{key:a,dataRef:t,title:t.display},n.renderTreeNodes(e.children)):R.a.createElement(P,{key:a,dataRef:t,title:t.display})})},r=a,T()(n,r)}return _()(t,e),E()(t,[{key:"componentDidMount",value:function(){var e=this,t=O.a.getParameterByName("app");D.a.getRoleTree(t).then(function(t){1===t.code&&e.setState({roleTree:t.data&&t.data.children||[]})})}},{key:"componentWillReceiveProps",value:function(e){if(e.roleInfo!==this.props.roleInfo){var t=e.roleInfo&&e.roleInfo.permissionIds||[];t=t&&t.map(function(e){return""+e}),this.onCheck(t)}}},{key:"render",value:function(){var e=this.state,t=e.roleTree,a=e.checkedKeys,n=this.props,o=n.roleInfo,s=n.form.getFieldDecorator;return R.a.createElement(S.a,null,R.a.createElement(L,r()({},I.d,{label:"角色名称",hasFeedback:!0}),s("roleName",{rules:[{required:!0,message:"角色名称不可为空！"}],initialValue:o&&o.roleName||""})(R.a.createElement(i.a,null))),R.a.createElement(L,r()({},I.d,{label:"角色描述"}),s("roleDesc",{rules:[],initialValue:o&&o.roleDesc||""})(R.a.createElement(i.a,{type:"textarea"}))),R.a.createElement(L,r()({},I.d,{label:"权限点",className:"dstree"}),s("permissionIds",{rules:[{required:!0,message:"请选择相应的角色权限！"}],initialValue:[]})(R.a.createElement(g.a,{style:{marginTop:"-10px"},checkable:!0,defaultExpandAll:!0,onCheck:this.onCheck,checkedKeys:a},this.renderTreeNodes(t)))))}}]),t}(C.Component),N=S.a.create()(k);t.a=N},DE4S:function(e,t,a){"use strict";var n,r=a("P2sY"),o=a.n(r),i=a("Yz+Y"),s=a.n(i),c=a("iCc5"),l=a.n(c),u=a("V7oC"),p=a.n(u),d=a("FYw3"),m=a.n(d),E=a("mRg0"),f=a.n(E),T=a("sbe7"),h=a.n(T),_=a("djHj"),A=a("lSrH"),g=a("VrN/");a("/9rB"),a("25Eh"),a("AvDn"),a("+dQi"),a("3Fvf"),a("19Vz"),a("jDMi");var b=Object(A.a)(n=function(e){function t(){return l()(this,t),m()(this,(t.__proto__||s()(t)).apply(this,arguments))}return f()(t,e),p()(t,[{key:"componentDidMount",value:function(){var e=this.Editor,t=this.props.options||_.x,a=this.getCodeMirrorIns(),n=this.props,r=n.value,o=n.onChange,i=n.onFocus,s=n.cursor,c=n.focusOut,l=n.cursorActivity;e&&(this.self=a.fromTextArea(e,t),s&&this.self.doc.setCursor(s),this.self.on("change",function(e){o&&o(r,e.getValue(),e)}),this.self.on("focus",function(e){i&&i(r,e.getValue())}),this.self.on("blur",function(e){c&&c(r,e.getValue())}),this.self.on("cursorActivity",function(e){l&&l(r,e)}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.value,a=e.sync,n=e.cursor,r=(e.placeholder,e.cursorAlwaysInEnd),o=e.options;o&&this.self.setOption("readOnly",o.readOnly),this.props.value!==t&&(n&&this.self.doc.setCursor(n),a&&(t?this.self.setValue(t):this.self.setValue(""),r&&this.self.doc.setCursor(this.self.doc.lineCount(),null)))}},{key:"getCodeMirrorIns",value:function(){return this.self||g}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.style,r="code-editor";r=a?r+" "+a:r;var i={position:"relative",minHeight:"400px"};return i=n?o()(i,n):i,h.a.createElement("div",{className:r,style:i},h.a.createElement("textarea",{ref:function(t){e.Editor=t},name:"code",placeholder:this.props.placeholder||"",defaultValue:this.props.value||""}))}}]),t}(T.Component))||n;t.a=b},E7pB:function(e,t,a){"use strict";a.d(t,"a",function(){return c});a("Z8Mf");var n=a("j7zX"),r=a.n(n),o=a("sbe7"),i=a.n(o),s=(a("17x9"),a("dtw8"),a("7Qib"),a("nLvT"),a("sVOr"),a("yGiC"),r.a.TabPane);function c(e){var t=e.apps,a=e.content,n=e.onPaneChange,o=e.activeKey,c=t.filter(function(e){return e.enable&&"main"!==e.id}),l=c.length>0&&c.map(function(e){return!e.disableExt&&i.a.createElement(s,{tab:e.name,key:e.id,data:e},a)});return i.a.createElement("div",{className:"m-tabs"},c.length<2?a:i.a.createElement(r.a,{animated:!1,activeKey:o,onChange:n},l))}},ER3F:function(e,t,a){"use strict";a.d(t,"a",function(){return g});a("FGdI");var n=a("Pbn2"),r=a.n(n),o=a("P2sY"),i=a.n(o),s=a("Yz+Y"),c=a.n(s),l=a("iCc5"),u=a.n(l),p=a("V7oC"),d=a.n(p),m=a("FYw3"),E=a.n(m),f=a("mRg0"),T=a.n(f),h=a("sbe7"),_=a.n(h),A=a("dtw8"),g=function(e){function t(){var e,a,n,r;u()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=E()(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i))),n.go=function(){var e=n.props,t=e.url,a=e.history,r=e.autoClose;t?a?A.f.push(t):A.g.push(t):1==window.history.length?r&&window.close():A.g.go(-1)},r=a,E()(n,r)}return T()(t,e),d()(t,[{key:"getButtonView",value:function(){var e=this.props,t=(e.type,e.style),a=(e.size,{cursor:"pointer"}),n={cursor:"pointer",fontFamily:"anticon",fontSize:"18px",color:"rgb(148, 168, 198)",letterSpacing:"5px",position:"relative",top:"2px"};return t&&(a=i()(a,t),n=i()(n,t)),_.a.createElement(r.a,{style:n,type:"left-circle-o",onClick:this.go})}},{key:"render",value:function(){return this.getButtonView()}}]),t}(h.Component)},Ex8E:function(e,t,a){"use strict";var n=a("+hIS"),r=a("14Xm"),o=a.n(r),i=a("D3Ub"),s=a.n(i),c=a("sk9p"),l=a.n(c),u=a("4d7F"),p=a.n(u),d=a("+KTK"),m=(a("I56f"),void 0);function E(){return m?p.a.resolve(m):Promise.resolve().then(a.t.bind(null,"I56f",7))}var f=[],T=void 0;function h(e){return e?e.map(function(e,t){var a=l()(e,4),n=a[0],r=a[1],o=a[2],i=a[3];return o=o||"3000",{label:n,kind:d.languages.CompletionItemKind[i||"Text"],detail:r,insertText:{value:"Function"==i?n+"($1) ":n},sortText:o+t+n}}):[]}function _(){if(!f.length){var e={keywords:["SELECT","FROM","WHERE","UNION ALL","LEFT OUTER JOIN","RIGHT OUTER JOIN","FULL OUTER JOIN","UNION","INSERT","ADD","ADMIN","AFTER","ALL","ALTER","ANALYZE","AND","ARCHIVE","ARRAY","AS","ASC","AUTHORIZATION","BEFORE","BETWEEN","BIGINT","BINARY","BOOLEAN","BOTH","BUCKET","BUCKETS","BY","CASCADE","CASE","CHANGE","CHAR","CLUSTER","CLUSTERED","CLUSTERSTATUS","COLLECTION","COLUMN","COLUMNS","COMMENT","COMPACT","COMPACTIONS","COMPUTE","CONCATENATE","CONF","CONTINUE","CREATE","CROSS","CUBE","CURRENT","CURSOR","DATA","DATABASE","DATABASES","DATE","DATETIME","DBPROPERTIES","DECIMAL","DEFERRED","DEFINED","DELETE","DELIMITED","DEPENDENCY","DESC","DESCRIBE","DIRECTORIES","DIRECTORY","DISABLE","DISTINCT","DISTRIBUTE","DOUBLE","DROP","ELEM_TYPE","ELSE","ENABLE","END","ESCAPED","EXCHANGE","EXCLUSIVE","EXISTS","EXPLAIN","EXPORT","EXTENDED","EXTERNAL","FALSE","FETCH","FIELDS","FILE","FILEFORMAT","FIRST","FLOAT","FOLLOWING","FORMAT","FORMATTED","FULL","FUNCTION","FUNCTIONS","GRANT","GROUP","GROUPING","HAVING","HOLD_DDLTIME","IDXPROPERTIES","IGNORE","IMPORT","IN","INDEX","INDEXES","INNER","INPATH","INPUTDRIVER","INPUTFORMAT","INT","INTERSECT","INTERVAL","INTO","IS","ITEMS","JOIN","JAR","KEYS","KEY_TYPE","LATERAL","LEFT","LESS","LIFECYCLE","LIKE","LIMIT","LINES","LOAD","LOCAL","LOCATION","LOCK","LOCKS","LOGICAL","LONG","MACRO","MAP","MAPJOIN","MATERIALIZED","MINUS","MORE","MSCK","NOT","NONE","NOSCAN","NO_DROP","NULL","OF","OFFLINE","ON","OPTION","OR","ORDER","OUT","OUTER","OUTPUTDRIVER","OUTPUTFORMAT","OVER","OVERWRITE","OWNER","PARTIALSCAN","PARTITION","PARTITIONED","PARTITIONS","PERCENT","PLUS","PRECEDING","PRESERVE","PRETTY","PRINCIPALS","PROCEDURE","PURGE","RANGE","READ","READONLY","READS","REBUILD","RECORDREADER","RECORDWRITER","REDUCE","REGEXP","RELOAD","RENAME","REPAIR","REPLACE","RESTRICT","REVOKE","REWRITE","RIGHT","RLIKE","ROLE","ROLES","ROLLUP","ROW","ROWS","SCHEMA","SCHEMAS","SEMI","SERDE","SERDEPROPERTIES","SERVER","SET","SETS","SHARED","SHOW","SHOW_DATABASE","SKEWED","SMALLINT","SORT","SORTED","SSL","STATISTICS","STORED","STREAMTABLE","STRING","STRUCT","TABLE","TABLES","TABLESAMPLE","TBLPROPERTIES","TEMPORARY","TERMINATED","TEXTFILE","THEN","TIMESTAMP","TINYINT","TO","TOUCH","TRANSACTIONS","TRANSFORM","TRIGGER","TRUNCATE","TRUE","UNARCHIVE","UNBOUNDED","UNDO","UNIONTYPE","UNIQUEJOIN","UNLOCK","UNSET","UNSIGNED","UPDATE","URI","USE","USER","USING","UTC","UTC_TMESTAMP","VALUES","VALUE_TYPE","VARCHAR","VIEW","WHEN","WHILE","WINDOW","WITH"]},t=[].concat(e.builtinFunctions).concat(e.windowsFunctions).concat(e.innerFunctions).concat(e.otherFunctions).filter(Boolean),a=[].concat(e.keywords);f=function(e){return e.map(function(e,t){return{label:e,kind:d.languages.CompletionItemKind.Keyword,detail:"关键字",insertText:e+" ",sortText:"1000"+t+e,filterText:e.toLowerCase()}})}(a).concat(function(e){return e.map(function(e,t){return{label:e,kind:d.languages.CompletionItemKind.Function,detail:"函数",insertText:{value:e+"($1) "},sortText:"2000"+t+e,filterText:e.toLowerCase()}})}(t))}return f}function A(e){T=e}function g(){T=null}d.languages.registerCompletionItemProvider("dtsql",{provideCompletionItems:function(e,t){var a,n=this,r=_();return new p.a((a=s()(o.a.mark(function a(i,s){var c,l,u,p;return o.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!T){a.next=11;break}return c=e.getValue(),e.getOffsetAt(t),l=e.getWordAtPosition(t),a.next=6,E();case 6:u=a.sent,p=u.parser.parserSql(c),T(r,i,h,{status:0,model:e,position:t,word:l,autoComplete:p}),a.next=12;break;case 11:i(r);case 12:case"end":return a.stop()}},a,n)})),function(e,t){return a.apply(this,arguments)}))}});var b,y=(b=s()(o.a.mark(function e(t,a){var n,r,i,s;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E();case 2:n=e.sent,r=a.getModel(),(i=n.parser.parseSyntax(t))?(s=v(i),d.editor.setModelMarkers(r,r.getModeId(),[{startLineNumber:i.loc.first_line,startColumn:i.loc.first_column+1,endLineNumber:i.loc.last_line,endColumn:i.loc.last_column+1,message:"[语法错误！] "+s,MarkerSeverity:8}])):d.editor.setModelMarkers(r,r.getModeId(),[]);case 7:case"end":return e.stop()}},e,this)})),function(e,t){return b.apply(this,arguments)});function v(e){var t=e.expected||[];return t.length?"您可能想输入是"+t.map(function(e){return" '"+e.text+"'"}).join(",")+"?":"请检查您的语法！"}a.d(t,"c",function(){return A}),a.d(t,"a",function(){return g}),a.d(t,"b",function(){return y});var S="undefined"==typeof monaco?self.monaco:monaco;Object(n.a)({id:"dtsql",extensions:[".dtsql",".dtsql"],aliases:["DtSql","dtsql"],loader:function(){return S.Promise.wrap(a.e(21).then(a.bind(null,"AlEQ")))}})},HmMx:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a("7UKp"),r=a("CMun");function o(){var e=n.a.getInitUser();return{type:r.a.GET_USER,data:e}}},"HqU/":function(e,t,a){e.exports=[{id:"main",name:"首页",link:"index.html",filename:"index.html",target:"_self",enable:!0,apiBase:"/main"},{id:"rdos",name:"开发套件",filename:"ide.html",link:"/ide.html#",target:"_self",enable:!0,hasProject:!0,default:!0,apiBase:"/rdos",icon:"/public/main/img/icon_1.png",description:"一站式大数据开发平台，帮助企业快速完全数据中台搭建"},{id:"dataQuality",name:"数据质量",link:"dataQuality.html#/",filename:"dataQuality.html",target:"_self",enable:!0,apiBase:"/dq",icon:"/public/main/img/icon_2.png",description:"对过程数据和结果数据进行质量校验，帮助企业及时发现数据质量问题"},{id:"dataApi",name:"数据API",link:"dataApi.html#/",filename:"dataApi.html",target:"_self",enable:!0,apiBase:"/dataApi",icon:"/public/main/img/icon_3.png",description:"快速生成数据API、统一管理API服务，帮助企业提高数据开放效率"},{id:"dataLabel",name:"标签工厂",link:"dataLabel.html#/",filename:"dataLabel.html",target:"_self",enable:!1,apiBase:"/dataLabel",icon:"/public/main/img/icon_4.png",description:"快速生成规则标签，提供便捷、统一标签服务管理"},{id:"console",name:"控制台",link:"console.html#/",filename:"console.html",target:"_self",enable:!0,apiBase:"/console",icon:"/public/main/img/icon_5.png",description:"计算资源分配、多集群管理",needRoot:!0,disableExt:!0},{id:"map",name:"数据地图",link:"map.html#/",filename:"map.html",target:"_self",enable:!1,apiBase:"/map",description:"可视化的数据资产中心，帮助企业全盘掌控数据资产情况和数据的来源去向"}]},"I/n2":function(e,t,a){"use strict";a("fwXI");var n=a("CC+v"),r=a.n(n),o=(a("zmYW"),a("DtFj")),i=a.n(o),s=(a("tL+A"),a("QpBz")),c=a.n(s),l=a("Yz+Y"),u=a.n(l),p=a("iCc5"),d=a.n(p),m=a("V7oC"),E=a.n(m),f=a("FYw3"),T=a.n(f),h=a("mRg0"),_=a.n(h),A=a("sbe7"),g=a.n(A),b=a("7Qib"),y=a("P2sY"),v=a.n(y),S=a("GQeE"),C=a.n(S),R=a("QbLZ"),O=a.n(R),I=a("17x9"),D=a.n(I),L=a("+KTK"),P=(a("w9QG"),a("iLY9"),a("2J7O"),a("Ex8E"),a("re/k"),a("ebop")),k=function(e){function t(e){d()(this,t);var a=T()(this,(t.__proto__||u()(t)).call(this,e));return a.monacoDom=null,a.monacoInstance=null,a}return _()(t,e),E()(t,[{key:"shouldComponentUpdate",value:function(e,t){return!1}},{key:"componentDidMount",value:function(){this.initMonaco(),"function"==typeof this.props.editorInstanceRef&&this.props.editorInstanceRef(this._originalEditor)}},{key:"componentWillReceiveProps",value:function(e){var t=e.sync,a=e.original,n=void 0===a?{}:a,r=e.modified,o=void 0===r?{}:r,i=e.options,s=void 0===i?{}:i;if(this.props.original&&this.props.original.value!==n.value&&t){var c=n.value?n.value:"";this.updateValueWithNoEvent(c)}this.props.modified&&this.props.modified.value!==o.value&&this._modifiedEditor.setValue(o.value),this.props.options!==s&&this.monacoInstance.updateOptions(O()({},s,{originalEditable:!s.readOnly}))}},{key:"componentWillUnmount",value:function(){this.destroyMonaco()}},{key:"isValueExist",value:function(e){return!!C()(e).includes("value")}},{key:"log",value:function(){var e;this.props.isLog&&(e=console).log.apply(e,arguments)}},{key:"destroyMonaco",value:function(){this.monacoInstance&&(this._modifiedEditor.dispose(),this._originalEditor.dispose(),this.monacoInstance.dispose())}},{key:"initMonaco",value:function(){var e=this.props,t=e.original,a=void 0===t?{}:t,n=e.modified,r=void 0===n?{}:n,o=e.language,i=e.options;if(this.monacoDom){window.MonacoEnvironment={getWorkerUrl:function(e,t){return"json"===t?"./json.worker.js":"css"===t?"./css.worker.js":"html"===t?"./html.worker.js":"typescript"===t||"javascript"===t?"./typescript.worker.js":"./editor.worker.js"}};var s=v()(P.a,i,{originalEditable:!i||!i.readOnly,renderIndicators:!1,scrollbar:{horizontal:"visible"}});this._originalModel=L.editor.createModel(a.value,o||"sql"),this._modifiedModel=L.editor.createModel(r.value,o||"sql"),this.monacoInstance=L.editor.createDiffEditor(this.monacoDom,s),this.monacoInstance.setModel({original:this._originalModel,modified:this._modifiedModel}),this._originalEditor=this.monacoInstance.getOriginalEditor(),this._modifiedEditor=this.monacoInstance.getModifiedEditor(),this._modifiedEditor.updateOptions({readOnly:!0}),this._originalEditor&&a.cursorPosition&&(this._originalEditor.setPosition(a.cursorPosition),this._originalEditor.focus(),this._originalEditor.revealPosition(a.cursorPosition,L.editor.ScrollType.Immediate)),this.initEditor()}}},{key:"initEditor",value:function(){this.initTheme(),this.initEditorEvent()}},{key:"initTheme",value:function(){L.editor.defineTheme("flippedDiffTheme",{base:"vs",inherit:!0,rules:[],colors:{"diffEditor.insertedTextBackground":"#ff000033","diffEditor.removedTextBackground":"#28d22833"}}),L.editor.setTheme("flippedDiffTheme")}},{key:"updateValueWithNoEvent",value:function(e){this._originalEditor.setValue(e)}},{key:"initEditorEvent",value:function(){var e=this;this._originalEditor.onDidChangeModelContent(function(t){e.log("编辑器事件");var a=e.props,n=a.onChange,r=(a.value,e._originalEditor.getValue());n&&(e.log("订阅事件触发"),n(r,e._originalEditor))}),this._originalEditor.onDidBlurEditor(function(t){e.log("编辑器事件 onDidBlur");var a=e.props,n=a.onBlur,r=a.value;n&&n(r,e._originalEditor.getValue())}),this._originalEditor.onDidFocusEditor(function(t){e.log("编辑器事件 onDidFocus");var a=e.props,n=a.onFocus,r=a.value;n&&n(r,e._originalEditor.getValue())}),this._originalEditor.onDidChangeCursorSelection(function(t){e.log("编辑器事件 onDidChangeCursorSelection");for(var a=e.props.onCursorSelection,n=e._originalEditor.getSelections(),r=e._originalEditor.getModel(),o="",i=0;i<n.length;i++)o=o+=r.getValueInRange(n[i]);a&&a(o)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.style,r="code-editor";r=a?r+" "+a:r;var o={position:"relative",minHeight:"400px",width:"100%",marginTop:"20px"};return o=n?v()(o,n):o,g.a.createElement("div",{className:r,style:o,ref:function(t){e.monacoDom=t}})}}]),t}(g.a.Component);k.propTypes={editorInstanceRef:D.a.function,original:D.a.shape({value:D.a.string,cursorPosition:D.a.Object}),modified:D.a.shape({value:D.a.string}),onChange:D.a.function,onBlur:D.a.function,onFocus:D.a.function,onCursorSelection:D.a.function,sync:D.a.bool,isLog:D.a.bool};var N=k,U=a("djHj"),M=a("gDS+"),F=a.n(M),x=(a("93XW"),a("d1El")),G=a.n(x),w=(a("hr7U"),a("9xET")),j=a.n(w),B=(a("fv9D"),a("ZPTe")),K=a.n(B),Y=(a("Z8Mf"),a("j7zX")),V=a.n(Y),H=a("/MKj"),Q=a("sVOr"),J=V.a.TabPane,z=function(e){function t(e){d()(this,t);var a=T()(this,(t.__proto__||u()(t)).call(this,e));return a.getvalue=function(e){a.setState({currentValue:e.currentValue||{},historyvalue:e.historyvalue||{},contrastResults:e.contrastResults||{}})},a.versionInfo=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=a.attributes,r=a.upstreamTask,o=a.crosscycleDependence,i={color:"#f00"};return g.a.createElement(K.a,{span:12},g.a.createElement("div",{className:"title"},e),g.a.createElement("div",{className:"box-padding"},g.a.createElement("div",{className:"schedulingCycle"},g.a.createElement("div",{className:"sub-title",style:n?i:{}},"调度属性"),g.a.createElement("div",{className:"line"}),g.a.createElement(j.a,null,g.a.createElement(K.a,{span:"6",className:"txt-left"},"调度状态 : "),g.a.createElement(K.a,{span:"18",className:"txt-left"},t.scheduleStatus)),g.a.createElement(j.a,null,g.a.createElement(K.a,{span:"6",className:"txt-left"},"生效日期 : "),g.a.createElement(K.a,{span:"18",className:"txt-left"},t.effectiveDate)),g.a.createElement(j.a,null,g.a.createElement(K.a,{span:"6",className:"txt-left"},"调度周期 : "),g.a.createElement(K.a,{span:"18",className:"txt-left"},t.schedulingCycle&&t.schedulingCycle.period)),t.schedulingCycle&&t.schedulingCycle.beginTime?g.a.createElement(j.a,null,g.a.createElement(K.a,{span:"6",className:"txt-left"},"开始时间 : "),g.a.createElement(K.a,{span:"18",className:"txt-left"},t.schedulingCycle.beginTime)):"",t.schedulingCycle&&t.schedulingCycle.gapTime?g.a.createElement(j.a,null,g.a.createElement(K.a,{span:"6",className:"txt-left"},"间隔时间 : "),g.a.createElement(K.a,{span:"18",className:"txt-left"},t.schedulingCycle.gapTime)):"",t.schedulingCycle&&t.schedulingCycle.endTime?g.a.createElement(j.a,null,g.a.createElement(K.a,{span:"6",className:"txt-left"},"结束时间 : "),g.a.createElement(K.a,{span:"18",className:"txt-left"},t.schedulingCycle.endTime)):"",t.schedulingCycle&&t.schedulingCycle.selectTime?g.a.createElement(j.a,null,g.a.createElement(K.a,{span:"6",className:"txt-left"},"选择时间 : "),g.a.createElement(K.a,{span:"18",className:"txt-left"},t.schedulingCycle.selectTime)):"",t.schedulingCycle&&t.schedulingCycle.specificTime?g.a.createElement(j.a,null,g.a.createElement(K.a,{span:"6",className:"txt-left"},"具体时间 : "),g.a.createElement(K.a,{span:"18",className:"txt-left"},t.schedulingCycle.specificTime)):""),g.a.createElement("div",{className:"sub-title",style:r?i:{}},"任务间依赖"),g.a.createElement("div",{className:"line"}),g.a.createElement(j.a,null,g.a.createElement(K.a,{span:"24",className:"txt-left"},"上游任务 : "),g.a.createElement(G.a,{title:t.upstreamTask,overlayStyle:{fontSize:"14px"}},g.a.createElement(K.a,{span:"20",className:"word-break"},t.upstreamTask))),g.a.createElement("div",{className:"sub-title",style:o?i:{}},"跨周期依赖"),g.a.createElement("div",{className:"line"}),g.a.createElement(j.a,null,g.a.createElement(G.a,{title:t.crosscycleDependence,overlayStyle:{fontSize:"14px"}},g.a.createElement(K.a,{span:"20",className:"word-break"},t.crosscycleDependence)))))},a.state={currentValue:a.props.currentValue||{},historyvalue:a.props.historyvalue||{},contrastResults:a.props.contrastResults||{}},a}return _()(t,e),E()(t,[{key:"componentWillReceiveProps",value:function(e){e!=this.props&&this.getvalue(e)}},{key:"render",value:function(){var e=this.state,t=e.currentValue,a=e.historyvalue,n=e.contrastResults;return g.a.createElement(j.a,{gutter:16,className:"diff-params",style:{padding:"0 10px"}},this.versionInfo("当前版本",t,n),this.versionInfo("历史版本",a))}}]),t}(g.a.Component),q=function(e){function t(e){d()(this,t);var a=T()(this,(t.__proto__||u()(t)).call(this,e));return a.getData=function(e){a.setState({historyvalue:{}}),Q.a.taskVersionScheduleConf({versionId:e}).then(function(e){1==e.code?a.setState({historyvalue:e.data||{}},a.contrastData):a.setState({historyvalue:{}},a.contrastData)})},a.getRealData=function(){a.setState({historyvalue:a.props.currentRealTabData&&a.props.currentRealTabData.taskVersions[0]||{}},a.contrastData)},a.checkTime=function(e){var t="00";return e&&(t=e.toString().length>1?e:"0"+e),t},a.dealWeekDay=function(e){var t=void 0;switch(e.toString()){case"1":t="一";break;case"2":t="二";break;case"3":t="三";break;case"4":t="四";break;case"5":t="五";break;case"6":t="六";break;case"7":t="七"}return t?"星期"+t:" "},a.parseScheduleConf=function(e,t){var n={},r=e.scheduleConf&&JSON.parse(e.scheduleConf)||{};2==e.scheduleStatus?n.scheduleStatus="已冻结":1==e.scheduleStatus?n.scheduleStatus="未冻结":n.scheduleStatus="";var o=r.beginDate&&r.endDate?r.beginDate+" ~ "+r.endDate:"";n.effectiveDate=o;var i={};switch(r.periodType){case"0":i.period="分钟",i.gapTime=r.gapMin?r.gapMin+"分钟":" ",i.beginTime=a.checkTime(r.beginHour)+":"+a.checkTime(r.beginMin),i.endTime=a.checkTime(r.endHour)+":"+a.checkTime(r.endMin);break;case"1":i.period="小时",i.gapTime=r.gapHour?r.gapHour+"小时":" ",i.beginTime=a.checkTime(r.beginHour)+":"+a.checkTime(r.beginMin),i.endTime=a.checkTime(r.endHour)+":"+a.checkTime(r.endMin);break;case"2":i.period="天",i.specificTime=a.checkTime(r.hour)+":"+a.checkTime(r.min);break;case"3":i.period="周";var s=r.weekDay?r.weekDay.split(",").map(function(e){return a.dealWeekDay(e)}):[];i.selectTime=s?s.join(","):" ",i.specificTime=a.checkTime(r.hour)+":"+a.checkTime(r.min);break;case"4":i.period="月",i.selectTime=r.day?"每月"+r.day+"号":" ",i.specificTime=a.checkTime(r.hour)+":"+a.checkTime(r.min);break;default:i.period=""}if(n.schedulingCycle=i,1===t){var c=e.dependencyTaskNames&&e.dependencyTaskNames.join(" 、");n.upstreamTask=c}else{var l=(e.taskVOS||[]).map(function(e){return e.name});l=l.join(" 、"),n.upstreamTask=l}var u=void 0;switch(r.selfReliance){case 0:case!1:u="不依赖上一调度周期";break;case 1:case!0:u="自依赖，等待上一调度周期成功，才能继续运行";break;case 3:u="自依赖，等待上一调度周期结束，才能继续运行";break;case 2:u="等待下游任务的上一周期成功，才能继续运行";break;case 4:u="等待下游任务的上一周期结束，才能继续运行";break;default:u="不依赖上一调度周期"}return n.crosscycleDependence=u,n},a.contrastData=function(){var e=a.state,t=e.historyvalue,n=e.contrastResults;n.attributes=!1,n.upstreamTask=!1,n.crosscycleDependence=!1;var r=a.parseScheduleConf(t,1),o=a.parseScheduleConf(a.state.currentValue,2);["scheduleStatus","effectiveDate","schedulingCycle"].forEach(function(e){F()(r[e])==F()(o[e])||(n.attributes=!0)}),Boolean(r.upstreamTask)!=Boolean(o.upstreamTask)&&(n.upstreamTask=!0),r.crosscycleDependence!=r.crosscycleDependence&&(n.crosscycleDependence=!0),a.setState({currentParse:o,historyParse:r,contrastResults:n})},a.componentDidMount=function(){"realTimeTask"!=a.props.taskType?a.getData(a.versionId):a.getRealData()},a.callback=function(e){a.setState({tabKey:e})},a.codeChange=function(e,t){a.props.setTaskParams(t)},a.state={historyvalue:{},historyParse:{},contrastResults:{attributes:!1,upstreamTask:!1,crosscycleDependence:!1},currentValue:"realTimeTask"===a.props.taskType?a.props.currentRealTabData:a.props.currentTabData,currentParse:{},tabKey:"realTimeTask"===a.props.taskType?"params":"config"},a.versionId=a.props.diffParams&&a.props.diffParams.id,a}return _()(t,e),E()(t,[{key:"componentWillReceiveProps",value:function(e){this.props.taskType||e.diffParams.id==this.props.diffParams.id?"realTimeTask"===this.props.taskType&&(this.getRealData(),this.setState({currentValue:e.currentRealTabData})):(e.diffParams.id&&(this.getData(e.diffParams.id),this.setState({currentValue:e.currentTabData})),this.setState({tabKey:"config"}))}},{key:"render",value:function(){var e=this.props.taskType,t=this.state,a=t.contrastResults,n=t.historyParse,r=t.currentParse,o=t.historyvalue,i=t.tabKey;t.tableRefresh;return g.a.createElement("div",{className:"m-taksdetail",style:{marginTop:"5px"}},g.a.createElement(V.a,{onChange:this.callback,type:"card",activeKey:i},"realTimeTask"===e?"":g.a.createElement(J,{tab:"调度配置",key:"config"},g.a.createElement(z,{historyvalue:n,contrastResults:a,currentValue:r})),this.state.currentValue.taskType!==U.v.SYNC&&g.a.createElement(J,{tab:"环境参数",key:"params"},g.a.createElement(N,{language:"ini",className:"merge-text",style:{height:"500px"},options:{readOnly:!0},sync:!0,modified:{value:o&&o.taskParams||" "},original:{value:this.state.currentValue&&this.state.currentValue.taskParams||" "},value:this.state.currentValue&&this.state.currentValue.taskParams||" "}))))}}]),t}(g.a.Component),W=Object(H.b)(function(e){var t=e.offlineTask.workbench,a=t.currentTab,n=t.tabs,r=e.realtimeTask.currentPage;return{currentTabData:n.filter(function(e){return e.id===a})[0],currentRealTabData:r}})(q);a.d(t,"a",function(){return X});var X=function(e){function t(e){d()(this,t);var a=T()(this,(t.__proto__||u()(t)).call(this,e));return a.state={showDiff:!1,campareTo:"",diffParams:{showDiffparams:!1,tableInfo:""}},a.diffCode=function(e){a.setState({showDiff:!0,campareTo:e})},a.diffParams=function(e){var t=a.state.diffParams;t.showDiffparams=!0,t.tableInfo=e,a.setState({diffParams:t})},a.close=function(){a.setState({showDiff:!1,campareTo:{}}),a._modalKey=~~(1e4*Math.random())},a.closeParamsModal=function(){var e=a.state.diffParams;e.showDiffparams=!1,e.tableInfo="",a.setState({diffParams:e})},a.codeChange=function(e){a.props.changeSql(e)},a.getFomatedJSON=function(e){if(!e)return"";var t=b.a.jsonFormat(e);return t||(c.a.error("您的数据同步JSON配置格式有误"),e)},a.taskTypeJudge=function(e,t){return e.taskType===U.v.SQL||e.taskType===U.v.SYNC?g.a.createElement("div",null,g.a.createElement("a",{onClick:function(){return a.diffCode(t)}},"代码"),g.a.createElement("span",{className:"ant-divider"}),g.a.createElement("a",{onClick:function(){return a.diffParams(t)}},"参数")):"-"},a.taskVersionCols=function(){var e=a.props.taskInfo;return[{width:120,title:"发布时间",dataIndex:"gmtCreate",key:"gmtCreate",render:function(e){return b.a.formatDateTime(e)}},{title:"发布人",dataIndex:"userName",key:"userName"},{width:120,title:"描述",dataIndex:"publishDesc",key:"publishDesc"},{title:"操作",dataIndex:"operation",width:80,key:"operation",render:function(t,n){return a.taskTypeJudge(e,n)}}]},a}return _()(t,e),E()(t,[{key:"render",value:function(){var e=this.props,t=e.taskInfo,a=e.taskType,n=this.state,o=n.showDiff,s=n.campareTo,c=n.diffParams,l=(t.readWriteLockVO&&t.readWriteLockVO.getLock,t.sqlText),u=s.sqlText,p=void 0;switch(t.taskType){case U.v.SYNC:p="json";break;case U.v.PYTHON_23:p="python";break;case U.v.SQL:p="dtsql";break;default:p="dtsql"}return g.a.createElement("div",null,g.a.createElement(i.a,{className:"m-table",rowKey:"id",dataSource:t.taskVersions||[],columns:this.taskVersionCols(),pagination:!1}),g.a.createElement(r.a,{key:this._modalKey,wrapClassName:"vertical-center-modal modal-body-nopadding",title:"代码对比",width:"900px",bodyStyle:{height:"500px"},visible:o,onCancel:this.close,cancelText:"关闭",footer:null},g.a.createElement(N,{className:"merge-text",original:{value:l},modified:{value:u},options:{readOnly:!0},onChange:this.codeChange,language:p})),g.a.createElement(r.a,{wrapClassName:"vertical-center-modal modal-body-nopadding",title:"参数对比",width:"900px",bodyStyle:{minHeight:"500px",paddingBottom:20},visible:c.showDiffparams,onCancel:this.closeParamsModal,cancelText:"关闭",footer:null},g.a.createElement(W,{value:t,diffParams:c.tableInfo,taskType:a})))}}]),t}(g.a.Component)},IHrQ:function(e,t,a){"use strict";var n=a("gDS+"),r=a.n(n),o=a("iCc5"),i=a.n(o),s=a("V7oC"),c=a.n(s),l=(a("bZMm"),a("wFDc")),u=a("5012"),p=a("4d7F"),d=a.n(p),m=(a("tL+A"),a("QpBz")),E=a.n(m),f=(a("dtw8"),a("7Qib"),a("OZjc"),a("7UKp"));function T(e){switch(e.status){case 200:return e;case 302:E.a.info("登录超时, 请重新登录！");default:return e}}function h(e){switch(e.code){case 1:return e;case 0:return f.a.logout(),d.a.reject(e);case 16:default:return e.message&&E.a.error(e.message,3),e}}var _=function(){function e(){i()(this,e)}return c()(e,[{key:"get",value:function(e,t){var a=t?this.build(e,t):e;return this.request(a,{method:"GET"})}},{key:"post",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={method:"POST"};return t&&(n.body=r()(t)),this.request(e,n,a)}},{key:"postAsFormData",value:function(e,t){var a={method:"POST"};return t&&(a.body=this.buildFormData(t)),this.request(e,a)}},{key:"postForm",value:function(e,t){var a={method:"POST"};return t&&(a.body=new FormData(t)),this.request(e,a)}},{key:"request",value:function(e,t,a){return l.a.show(),t.credentials="same-origin",fetch(e,t).then(T).then(function(e){return setTimeout(function(){l.a.hide()},300),e.json()}).then(h).catch(function(e){return a.isSilent?e:(l.a.hide(),Object(u.h)("请求异常","服务器可能出了点问题, 请稍后再试！"),e)})}},{key:"defaultHeader",value:function(){return{Accept:"*/*","Content-Type":"application/json"}}},{key:"build",value:function(e,t){var a=[];if(t)for(var n in t)n&&a.push(n+"="+encodeURIComponent(t[n]));return e+"?"+a.join("&")}},{key:"buildFormData",value:function(e){if(e){var t=new FormData;for(var a in e)a&&t.append(a,e[a]);return t}}}]),e}();t.a=new _},K84j:function(e,t,a){"use strict";var n,r=a("QbLZ"),o=a.n(r),i=a("Yz+Y"),s=a.n(i),c=a("iCc5"),l=a.n(c),u=a("V7oC"),p=a.n(u),d=a("FYw3"),m=a.n(d),E=a("mRg0"),f=a.n(E),T=a("sbe7"),h=a.n(T),_=a("/MKj"),A=a("pLPX"),g=Object(_.b)(function(e){return{user:e.user,apps:e.apps,routing:e.routing}})(n=function(e){function t(e){l()(this,t);var a=m()(this,(t.__proto__||s()(t)).call(this,e));return a.state={},a}return f()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=(e.user,e.apps),a=h.a.createElement("span",null,h.a.createElement("img",{alt:"logo",style:{height:"20px",marginTop:"15px"},src:"public/main/img/logo.svg"}),h.a.createElement("span",{style:{fontSize:"14px",color:"#ffffff",position:"absolute",left:"70px",top:0,letterSpacing:"1px"}},"DTinsight"));return h.a.createElement(A.c,o()({logo:a,menuItems:t},this.props))}}]),t}(T.Component))||n;t.a=g},NX2S:function(e,t,a){"use strict";a("FGdI");var n=a("Pbn2"),r=a.n(n),o=a("Yz+Y"),i=a.n(o),s=a("iCc5"),c=a.n(s),l=a("V7oC"),u=a.n(l),p=a("FYw3"),d=a.n(p),m=a("mRg0"),E=a.n(m),f=a("sbe7"),T=a.n(f),h=(a("17x9"),a("7Qib")),_=a("ER3F"),A=(a("wPMF"),a("1I4j")),g=function(e){function t(){var e,a,n,r;c()(this,t);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return a=n=d()(this,(e=t.__proto__||i()(t)).call.apply(e,[this].concat(s))),n.state={msgInfo:"",app:h.a.getParameterByName("app")},n.loadMsg=function(e){A.a.getMsgById(n.state.app,{notifyRecordId:e}).then(function(t){n.setState({msgInfo:t.data}),1!==t.data.readStatus&&n.markAsRead(e)})},n.markAsRead=function(e){var t=n.state.app;A.a.markAsRead(t,{notifyRecordIds:[e]})},r=a,d()(n,r)}return E()(t,e),u()(t,[{key:"componentDidMount",value:function(){var e=this.props.router.params.msgId;this.loadMsg(e)}},{key:"render",value:function(){var e=this.state,t=e.msgInfo,a=e.app,n="dataApi"==this.props.router.location.query.app?T.a.createElement("p",{dangerouslySetInnerHTML:{__html:t.content}}):T.a.createElement("p",null,t.content);return T.a.createElement("div",{className:"box-1"},T.a.createElement("div",{className:"box-card msg-box"},T.a.createElement("main",null,T.a.createElement("h1",{className:"card-title"},T.a.createElement(_.a,{history:!0,url:"message?app="+a})," 消息详情 ")),n,T.a.createElement("footer",null,T.a.createElement("span",null,T.a.createElement(r.a,{type:"notification"}),"发送于 ",h.a.formatDateTime(t.gmtCreate)))))}}]),t}(f.Component);t.a=g},O6QL:function(e,t,a){},OZjc:function(e,t,a){"use strict";var n=a("gDS+"),r=a.n(n),o=a("EJiy"),i=a.n(o),s={set:function(e,t){if(t){var a="object"===(void 0===t?"undefined":i()(t))?r()(t):t;window.localStorage[e]=a}else delete window.localStorage[e]},get:function(e){var t=window.localStorage[e]||"";return this.isJSONStr(t)?JSON.parse(t):t},isJSONStr:function(e){return"{"===e.charAt(0)&&"}"===e.charAt(e.length-1)||"["===e.charAt(0)&&"]"===e.charAt(e.length-1)},clear:function(){window.localStorage.clear()}};t.a=s},Ohfy:function(e,t,a){"use strict";var n=a("QbLZ"),r=a.n(n),o=a("Yz+Y"),i=a.n(o),s=a("iCc5"),c=a.n(s),l=a("V7oC"),u=a.n(l),p=a("FYw3"),d=a.n(p),m=a("mRg0"),E=a.n(m),f=a("sbe7"),T=a.n(f),h=a("17x9"),_=a.n(h),A=a("hJue"),g=a.n(A),b=a("moyJ"),y=(a("G851"),a("ZvzK")),v=a.n(y),S=(a("FGdI"),a("Pbn2")),C=a.n(S),R=(a("MaXC"),a("4IMT")),O=a.n(R),I=(a("PFYH"),a("Jv8k")),D=a.n(I),L=function(e){function t(){var e,a,n,r;c()(this,t);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return a=n=d()(this,(e=t.__proto__||i()(t)).call.apply(e,[this].concat(s))),n.editMenu=function(){var e=n.props.onFileEdit;return T.a.createElement(D.a,{onClick:function(t){var a=t.key;e(a)}},T.a.createElement(D.a.Item,{key:"find"},"查找（Cmd/Ctrl）+ F"),T.a.createElement(D.a.Item,{key:"replace"},"替换（Cmd/Ctrl）+ F"),T.a.createElement(D.a.Item,{key:"commandPane"},"命令面板 (F1)"))},n.viewMenu=function(){var e=n.props.onThemeChange;return T.a.createElement(D.a,{onClick:function(t){var a=t.key;e(a)}},T.a.createElement(D.a.Item,{key:"vs"},"默认"),T.a.createElement(D.a.Item,{key:"vs-dark"},"黑色"),T.a.createElement(D.a.Item,{key:"hc-black"},"高对比黑色"))},n.renderRun=function(){var e=n.props,t=e.isRunning,a=e.onRun,r=e.onStop;return e.enableRun?[T.a.createElement(O.a,{key:"btnRun",onClick:a,loading:t,disabled:t,title:"立即运行",icon:"play-circle-o",style:{marginLeft:"0px"}}," ","运行"),T.a.createElement(O.a,{key:"btnStop",onClick:r,icon:"pause-circle-o",title:"立即停止",disabled:!t},"停止")]:""},r=a,d()(n,r)}return E()(t,e),u()(t,[{key:"render",value:function(){var e=this.props,t=e.onFormat,a=e.enableFormat,n=e.leftCustomButton,r=e.rightCustomButton;return T.a.createElement("div",{className:"toolbar ide-toolbar clear-offset"},this.renderRun(),n,a&&T.a.createElement(O.a,{icon:"appstore-o",title:"格式化",onClick:t},"格式化"),T.a.createElement(v.a,{overlay:this.editMenu(),trigger:["click"]},T.a.createElement(O.a,{icon:"edit",title:"编辑"},"编辑",T.a.createElement(C.a,{type:"down"}))),T.a.createElement(v.a,{overlay:this.viewMenu(),trigger:["click"]},T.a.createElement(O.a,{icon:"skin",title:"主题"},"主题",T.a.createElement(C.a,{type:"down"}))),T.a.createElement("span",{style:{float:"right",position:"relative",marginRight:"18px",lineHeight:"28px",zIndex:"901"}},r))}}]),t}(f.Component),P=(a("93XW"),a("d1El")),k=a.n(P),N=(a("zmYW"),a("DtFj")),U=a.n(N),M=(a("Z8Mf"),a("j7zX")),F=a.n(M),x=a("LvDl"),G=a("pKDC"),w=a("pAlz"),j=F.a.TabPane,B={position:"absolute",bottom:"0px",height:"30px"},K="console-log",Y=function(e){function t(){var e,a,n,r;c()(this,t);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return a=n=d()(this,(e=t.__proto__||i()(t)).call.apply(e,[this].concat(s))),n.state={currentPage:1},n.onChange=function(e){n.setState({currentPage:e.current})},r=a,d()(n,r)}return E()(t,e),u()(t,[{key:"generateCols",value:function(e){var t=this.state.currentPage;if(e&&e.length>0){var a=[{title:"序号",key:"t-id",render:function(e,a,n){return 10*(t-1)+(n+1)}}];return e.forEach(function(e,t){a.push({title:e,key:t+e,render:function(e,a){return T.a.createElement("textarea",{title:a[t],value:a[t]})}})}),a}return[]}},{key:"render",value:function(){var e=this.props.data,t=e.slice(1,e.length),a=this.generateCols(e[0]);return T.a.createElement(U.a,{rowKey:"id",scroll:{x:!0},className:"console-table",bordered:!0,dataSource:t,onChange:this.onChange,columns:a})}}]),t}(f.Component),V=function(e){function t(){var e,a,n,r;c()(this,t);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return a=n=d()(this,(e=t.__proto__||i()(t)).call.apply(e,[this].concat(s))),n.state={activeKey:K},n.onEdit=function(e,t){n[t](e)},n.onTabChange=function(e){var t=n.props.onConsoleTabChange;n.setState({activeKey:e},function(){e===K?(n.focusEditor(),t(1)):t(0)})},n.focusEditor=function(){var e=n.editor.self;e.doc.setCursor(e.lineCount(),null)},n.remove=function(e){var t=n.props.onRemoveTab;t&&t(parseInt(e,10))},r=a,d()(n,r)}return E()(t,e),u()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.data,a=this.props.data;t.showRes&&t.results.length>0&&!Object(x.isEqual)(t.results,a.results)?(this.setState({activeKey:""+(t.results.length-1)}),this.props.onConsoleTabChange(0)):0===t.results.length&&this.setState({activeKey:K},this.focusEditor)}},{key:"renderTabs",value:function(e){var t=this;return e&&e.length>0?e.map(function(e,a){var n=T.a.createElement("span",null,"结果",a+1);return T.a.createElement(j,{style:{minHeight:"100%",position:"relative"},tab:n,key:""+a},T.a.createElement(Y,{data:e.data}),e.jobId?T.a.createElement("a",{href:t.props.downloadUri+"?jobId="+e.jobId,download:!0},T.a.createElement(O.a,{style:B},"下载")):null)}):[]}},{key:"render",value:function(){var e=this,t=this.props,a=t.data,n=t.setSplitMax,r=t.setSplitMin,o=t.activedTab,i=t.onConsoleClose,s=o?"console-log":this.state.activeKey;return w.a.readOnly=!0,w.a.lineNumbers=!1,T.a.createElement("div",{className:"ide-console"},T.a.createElement(F.a,{hideAdd:!0,type:"editable-card",activeKey:s,onChange:this.onTabChange,onEdit:this.onEdit},T.a.createElement(j,{tab:"日志",key:"console-log"},T.a.createElement("div",{style:{position:"relative"}},T.a.createElement(G.a,{cursorAlwaysInEnd:!0,style:{minHeight:"auto"},ref:function(t){e.editor=t},options:w.a,key:"output-log",sync:!0,value:a.log}))),this.renderTabs(a.results)),T.a.createElement(C.a,{onClick:n,className:"console-icon up",type:"up-square-o"}),T.a.createElement(C.a,{onClick:r,className:"console-icon down",type:"down-square-o"}),T.a.createElement(k.a,{placement:"top",title:"关闭控制台"},T.a.createElement(C.a,{className:"close-console",type:"close",onClick:i})))}}]),t}(f.Component),H={editor:_.a.object,toolbar:_.a.object,console:_.a.object},Q=function(e){function t(){var e,a,n,r;c()(this,t);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return a=n=d()(this,(e=t.__proto__||i()(t)).call.apply(e,[this].concat(s))),n.state={changeTab:!0,size:void 0},n.changeTab=function(e){var t=n.state.changeTab;t=!!e,n.setState({changeTab:t})},r=a,d()(n,r)}return E()(t,e),u()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.editor,n=t.toolbar,o=t.console,i=t.editorInstanceRef,s=this.state.size,c=T.a.createElement(b.a,r()({editorInstanceRef:i},a));return T.a.createElement("div",{className:"ide-editor"},n&&n.enable?T.a.createElement("div",{className:"ide-header bd-bottom"},T.a.createElement(L,r()({},n,{changeTab:this.changeTab}))):"",T.a.createElement("div",{style:{zIndex:901},className:"ide-content"},o&&o.data&&o.data.log?T.a.createElement(g.a,{split:"horizontal",minSize:100,maxSize:-77,style:{paddingBottom:"40px"},defaultSize:"60%",primary:"first",size:s,onDragStarted:function(){e.setState({size:void 0})}},c,T.a.createElement(V,r()({onConsoleTabChange:this.changeTab,activedTab:this.state.changeTab,setSplitMax:function(){e.setState({size:"100px"})},setSplitMin:function(){e.setState({size:"calc(100% - 40px)"})}},o))):c))}}]),t}(f.Component);Q.propTypes=H;t.a=Q},PVY6:function(e,t,a){"use strict";a.d(t,"g",function(){return n}),a.d(t,"f",function(){return r}),a.d(t,"e",function(){return o}),a.d(t,"c",function(){return i}),a.d(t,"d",function(){return s}),a.d(t,"b",function(){return c}),a.d(t,"a",function(){return l}),a.d(t,"l",function(){return u}),a.d(t,"k",function(){return p}),a.d(t,"i",function(){return d}),a.d(t,"j",function(){return m}),a.d(t,"h",function(){return E});var n="/uic/api",r="/api/rdos",o="/api/dq/service",i="/api/da/service",s="/api/tag/service",c="/api/console/service",l="/api/console",u={id:"rdos",name:"开发套件",filename:"ide.html",link:"/ide.html#",target:"_blank",enable:!0,hasProject:!0,default:!0,apiBase:"/rdos"},p={id:"dataQuality",name:"数据质量",link:"dataQuality.html#/",filename:"dataQuality.html",target:"_blank",enable:!0,apiBase:"/dq"},d={id:"dataApi",name:"API管理",link:"dataApi.html#/",filename:"dataApi.html",target:"_blank",enable:!0,apiBase:"/dataApi"},m={id:"dataLabel",name:"标签工厂",link:"dataLabel.html#/",filename:"dataLabel.html",target:"_blank",enable:!0,apiBase:"/tag"},E={id:"console",name:"控制台",link:"console.html#/",filename:"console.html",target:"_blank",enable:!1,apiBase:"/console",needRoot:!0,disableExt:!0}},RSVH:function(e,t,a){},RnhZ:function(e,t,a){var n={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function r(e){var t=o(e);return a(t)}function o(e){var t=n[e];if(!(t+1)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(n)},r.resolve=o,e.exports=r,r.id="RnhZ"},TCqc:function(e,t,a){"use strict";var n=a("7Qib"),r=a("W95b"),o=a("OZjc"),i=a("hPfy"),s=APP_CONF.UIC_URL||"",c=APP_CONF.UIC_DOMAIN||"";t.a={logout:function(){var e=this;r.a.post(i.a.APP_LOGOUT).then(function(t){1===t.code&&e.openLogin()})},openLogin:function(){o.a.clear(),n.a.deleteCookie("dt_user_id",c,"/"),n.a.deleteCookie("dt_token",c,"/"),n.a.deleteCookie("dt_tenant_id",c,"/"),n.a.deleteCookie("dt_tenant_name",c,"/"),n.a.deleteCookie("dt_username",c,"/"),n.a.deleteCookie("dt_is_tenant_admin",c,"/"),n.a.deleteCookie("dt_is_tenant_creator",c,"/"),n.a.deleteCookie("project_id",c,"/"),window.location.href=s+"/#/login"},getLoginedUser:function(){return r.a.post(i.a.DQ_GET_USER_BY_ID)},getUserList:function(){return r.a.post(i.a.DQ_GET_USER_LIST)}}},UCWl:function(e,t,a){"use strict";a.r(t);a("hr7U");var n,r,o,i,s=a("9xET"),c=a.n(s),l=(a("fv9D"),a("ZPTe")),u=a.n(l),p=(a("MaXC"),a("4IMT")),d=a.n(p),m=(a("cUip"),a("iJl9")),E=a.n(m),f=a("QbLZ"),T=a.n(f),h=a("4d7F"),_=a.n(h),A=a("P2sY"),g=a.n(A),b=(a("PAYn"),a("EQeY")),y=a.n(b),v=(a("tL+A"),a("QpBz")),S=a.n(v),C=a("Yz+Y"),R=a.n(C),O=a("iCc5"),I=a.n(O),D=a("V7oC"),L=a.n(D),P=a("FYw3"),k=a.n(P),N=a("mRg0"),U=a.n(N),M=(a("nTym"),a("qu0K")),F=a.n(M),x=(a("fwXI"),a("CC+v")),G=a.n(x),w=a("sbe7"),j=a.n(w),B=a("/MKj"),K=a("dtw8"),Y=a("LvDl"),V=a("7Qib"),H=a("bAm3"),Q=a("sVOr"),J=a("/gYX"),z=a("dDU9"),q=a("2KkY"),W=a("W9Sf"),X=a("5Gkw"),Z=a("djHj"),$=(a("G851"),a("ZvzK")),ee=a.n($),te=(a("FGdI"),a("Pbn2")),ae=a.n(te),ne=(a("PFYH"),a("Jv8k")),re=a.n(ne),oe=a("FyfS"),ie=a.n(oe),se=(a("8YFG"),a("ATwu")),ce=a.n(se),le=(a("Z8Mf"),a("j7zX")),ue=a.n(le),pe=a("tHbZ"),de=a("moyJ"),me=(a("7kJ1"),a("qPIi")),Ee=a.n(me),fe=F.a.Item,Te=Ee.a.Group,he=function(e){function t(){return I()(this,t),k()(this,(t.__proto__||R()(t)).apply(this,arguments))}return U()(t,e),L()(t,[{key:"render",value:function(){var e=this.props,t=e.form,a=e.currentPage,n=t.getFieldDecorator;return j.a.createElement("div",{style:{padding:"60px"}},j.a.createElement(F.a,null,j.a.createElement(fe,T()({},Z.y,{label:"任务名称",hasFeedback:!0}),n("name",{rules:[{required:!0,message:"任务名称不可为空！"},{max:64,message:"任务名称不得超过64个字符！"}],initialValue:a?a.name:""})(j.a.createElement(E.a,null))),j.a.createElement(fe,T()({},Z.y,{label:"任务类型"}),n("taskType",{rules:[],initialValue:a?a.taskType:0})(j.a.createElement(Te,{disabled:!0},j.a.createElement(Ee.a,{value:0},"SQL任务"),j.a.createElement(Ee.a,{value:1},"MR任务")))),j.a.createElement(fe,T()({},Z.y,{label:"资源",hasFeedback:!0}),a&&a.resourceList&&a.resourceList.length>0?a.resourceList[0].resourceName:""),j.a.createElement(fe,T()({},Z.y,{label:"mainClass"}),n("mainClass",{rules:[{}],initialValue:a&&a.mainClass})(j.a.createElement(E.a,{placeholder:"请输入mainClass"}))),j.a.createElement(fe,T()({},Z.y,{label:"参数"}),n("exeArgs",{rules:[{}],initialValue:a&&a.exeArgs})(j.a.createElement(E.a,{placeholder:"请输入任务参数"}))),j.a.createElement(fe,T()({},Z.y,{label:"描述",hasFeedback:!0}),n("taskDesc",{rules:[],initialValue:a?a.taskDesc:""})(j.a.createElement(E.a,{type:"textarea",rows:4})))))}}]),t}(w.Component),_e=F.a.create({onValuesChange:function(e,t){var a=e.dispatch,n=e.currentPage,r=!1;""===t.name&&(r=!0),t.invalid=r;var o=g()(n,t);a(q.x(o)),a(q.B(o))}})(he),Ae=a("fvjX"),ge=a("76p7"),be=a("Ohfy"),ye=a("dmTY"),ve=Object(B.b)(function(e){return{editor:e.editor}},function(e){var t=Object(Ae.b)(ye,e);return g()(t,{setCurrentPage:function(t){e(Object(q.x)(t))}})})(n=function(e){function t(){var e,a,n,r;I()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=k()(this,(e=t.__proto__||R()(t)).call.apply(e,[this].concat(i))),n.onContentChange=function(e,t){(0,n.props.editorChange)({merged:!1,sqlText:e,cursorPosition:t.getPosition()})},n.sqlFormat=function(){var e=n.props,t=e.currentPage,a=e.setCurrentPage,r={sql:t.sqlText||""};Q.a.streamSqlFormat(r).then(function(e){if(e.data){var n={merged:!0,sqlText:e.data,id:t.id},r=g()(t,n);a(r)}})},n.debounceSelectionChange=Object(Y.debounce)(n.props.setSelectionContent,200,{maxWait:2e3}),r=a,k()(n,r)}return U()(t,e),L()(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.currentPage,n=t.editor,r=a.cursorPosition||void 0,o=a.readWriteLockVO&&!a.readWriteLockVO.getLock,i={value:a.sqlText,language:"dtsql",options:{readOnly:o},cursorPosition:r,theme:n.options.theme,onChange:this.onContentChange,sync:a.merged||void 0,onCursorSelection:this.debounceSelectionChange},s={enable:!0,enableRun:!1,enableFormat:!0,onFileEdit:Object(ge.a)(this._editor),onFormat:this.sqlFormat,onThemeChange:function(t){e.props.updateEditorOptions({theme:t})}};return j.a.createElement(be.a,{editor:i,toolbar:s,key:"main-editor-"+a.id,editorInstanceRef:function(t){e._editor=t}})}}]),t}(w.Component))||n,Se=function(e){function t(){return I()(this,t),k()(this,(t.__proto__||R()(t)).apply(this,arguments))}return U()(t,e),L()(t,[{key:"render",value:function(){var e=this.props.currentPage.taskType===Z.v.SQL?j.a.createElement(ve,this.props):j.a.createElement(_e,this.props);return j.a.createElement("div",{className:"editor-container"},e)}}]),t}(w.Component),Ce=(a("7LYo"),a("5GXF")),Re=a.n(Ce),Oe=(a("ek7I"),a("FAat")),Ie=a.n(Oe),De=a("I/n2"),Le=Ie.a.Option,Pe=Re.a.Panel,ke=function(e){function t(){var e,a,n,r;I()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=k()(this,(e=t.__proto__||R()(t)).call.apply(e,[this].concat(i))),n.state={visibleAlterRes:!1,resList:[]},n.handleChange=function(e){n.setState({resList:e})},n.alterRes=function(){var e=n,t=n.props.currentPage,a=n.state.resList;0!==(a=Array.isArray(a)?a:[a]).length?t&&t.id&&a.length>0&&Q.a.updateTaskRes({id:t.id,resources:a}).then(function(a){1===a.code&&(S.a.success("资源修改成功！"),e.reloadTask(t.id),e.setState({visibleAlterRes:!1,resList:[]}))}):S.a.info("您没有选择任何资源！")},r=a,k()(n,r)}return U()(t,e),L()(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.currentPage,a=this.props.currentPage;if(t.id!==a.id){var n=t.resourceList.length>0?t.resourceList.map(function(e){return e.id}):[];this.setState({resList:n})}}},{key:"reloadTask",value:function(e){var t=this.props.dispatch;Q.a.getTask({taskId:e}).then(function(e){1===e.code&&(t(q.x(e.data)),t(q.B(e.data)))})}},{key:"render",value:function(){var e=this,t=this.state,a=t.visibleAlterRes,n=t.resList,r=this.props,o=r.resources,i=r.currentPage,s=r.editorChange,l=i.resourceList&&i.resourceList.map(function(e){return j.a.createElement(y.a,{key:e.id,color:"blue"},e.resourceName)}),p=o&&o.map(function(e){return j.a.createElement(Le,{value:e.id,key:e.id,name:e.resourceName},e.resourceName)});return j.a.createElement("div",{className:"m-taksdetail"},j.a.createElement(Re.a,{bordered:!1,defaultActiveKey:["1","2"]},j.a.createElement(Pe,{key:"1",header:"任务属性"},j.a.createElement(c.a,{className:"task-info"},j.a.createElement(c.a,null,j.a.createElement(u.a,{span:"10",className:"txt-right"},"任务名称："),j.a.createElement(u.a,{span:"14"},i.name)),j.a.createElement(c.a,null,j.a.createElement(u.a,{span:"10",className:"txt-right"},"任务类型："),j.a.createElement(u.a,{span:"14"},0===i.taskType?"SQL任务":"MR任务")),j.a.createElement(c.a,null,j.a.createElement(u.a,{span:"10",className:"txt-right"},"资源："),j.a.createElement(u.a,{span:"14",style:{marginTop:"10px"}},l)),j.a.createElement(c.a,null,j.a.createElement(u.a,{span:"10",className:"txt-right"},"创建人员："),j.a.createElement(u.a,{span:"14"},i.createUserName)),j.a.createElement(c.a,null,j.a.createElement(u.a,{span:"10",className:"txt-right"},"创建时间："),j.a.createElement(u.a,{span:"14"},V.a.formatDateTime(i.gmtCreate))),j.a.createElement(c.a,null,j.a.createElement(u.a,{span:"10",className:"txt-right"},"最近修改时间："),j.a.createElement(u.a,{span:"14"},V.a.formatDateTime(i.gmtModified))),j.a.createElement(c.a,null,j.a.createElement(u.a,{span:"10",className:"txt-right"},"描述："),j.a.createElement(u.a,{span:"14"},i.taskDesc)),j.a.createElement(G.a,{title:"修改任务资源",wrapClassName:"vertical-center-modal",visible:a,onCancel:function(){e.setState({visibleAlterRes:!1})},onOk:this.alterRes},j.a.createElement(Ie.a,{mode:0===i.taskType?"multiple":"",style:{width:"100%"},showSearch:!0,value:n,placeholder:"请选择资源",optionFilterProp:"name",onChange:this.handleChange},p)))),j.a.createElement(Pe,{key:"2",header:"历史发布版本"},j.a.createElement(De.a,{taskInfo:i,changeSql:s,taskType:"realTimeTask"}))))}}]),t}(w.Component),Ne=(a("/xgg"),a("aOJk")),Ue=a.n(Ne),Me=a("gDS+"),Fe=a.n(Me),xe=a("YEIV"),Ge=a.n(xe),we=(a("b+Mx"),a("5Dct")),je=a.n(we),Be=(a("93XW"),a("d1El")),Ke=a.n(Be),Ye=(a("zmYW"),a("DtFj")),Ve=a.n(Ye),He=a("DE4S"),Qe=Ie.a.Option,Je=Re.a.Panel,ze=Ee.a.Group,qe=(Ve.a.Column,Ve.a.ColumnGroup,F.a.Item),We=function(e){function t(){var e,a,n,r;I()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=k()(this,(e=t.__proto__||R()(t)).call.apply(e,[this].concat(i))),n.checkParams=function(){var e=n.props,t=e.index,a=(e.panelColumn[t].columns,{});return n.props.form.validateFields(function(e,t){a.status=!e}),a},n.originOption=function(e,t){switch(e){case"originType":return t.map(function(e){return j.a.createElement(Qe,{key:e,value:""+e.id},e.name)});case"currencyType":return t.map(function(e){return j.a.createElement(Qe,{key:e,value:""+e},e)});case"eventTime":return t.map(function(e,t){return j.a.createElement(Qe,{key:t,value:""+e.column},e.column)});default:return null}},r=a,k()(n,r)}return U()(t,e),L()(t,[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"editorParamsChange",value:function(e,t,a){var n=this.props,r=n.handleInputChange,o=n.index;this._syncEditor=!1,r("columnsText",o,t)}},{key:"render",value:function(){var e=this.props,t=e.handleInputChange,a=e.index,n=e.panelColumn,r=e.sync,o=e.timeColumoption,i=void 0===o?[]:o,s=e.originOptionType,l=void 0===s?[]:s,p=e.topicOptionType,d=void 0===p?[]:p,m=this.originOption("originType",l[a]||[]),f=this.originOption("currencyType",d[a]||[]),h=this.originOption("eventTime",i[a]||[]),_=this.props.form.getFieldDecorator,A={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}};return j.a.createElement(c.a,{className:"title-content"},j.a.createElement(F.a,null,j.a.createElement(qe,T()({},A,{label:"类型"}),_("type",{rules:[{required:!0,message:"请选择类型"}]})(j.a.createElement(Ie.a,{placeholder:"请选择",className:"right-select",onChange:function(e){t("type",a,e)},showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},j.a.createElement(Qe,{value:"14"},"Kafka")))),j.a.createElement(qe,T()({},A,{label:"数据源"}),_("sourceId",{rules:[{required:!0,message:"请选择数据源"}]})(j.a.createElement(Ie.a,{placeholder:"请选择",className:"right-select",onChange:function(e){t("sourceId",a,e)},showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},m))),j.a.createElement(qe,T()({},A,{label:"Topic"}),_("topic",{rules:[{required:!0,message:"请选择Topic"}]})(j.a.createElement(Ie.a,{placeholder:"请选择",className:"right-select",onChange:function(e){t("topic",a,e)},showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},f))),j.a.createElement(qe,T()({},A,{label:j.a.createElement("span",null,"映射表 ",j.a.createElement(Ke.a,{title:"该表是kafka中的topic映射而成，可以以SQL的方式使用它。"},j.a.createElement(ae.a,{type:"question-circle-o"})))}),_("table")(j.a.createElement(E.a,{placeholder:"请输入映射表名",className:"right-input",onChange:function(e){return t("table",a,e.target.value)}}))),j.a.createElement(c.a,null,j.a.createElement(u.a,{span:"6"},j.a.createElement("span",{style:{color:"rgba(0, 0, 0, 0.85)",paddingRight:10,float:"right"}},"字段 :")),j.a.createElement(u.a,{span:"18",style:{marginBottom:20,height:202}},j.a.createElement(He.a,{style:{minHeight:202,border:"1px solid #ddd"},key:"params-editor",sync:r,placeholder:"字段 类型, 比如 id int 一行一个字段",value:n[a].columnsText,onChange:this.editorParamsChange.bind(this)}))),j.a.createElement(qe,T()({},A,{label:"时间特征"}),_("timeType")(j.a.createElement(ze,{className:"right-select",onChange:function(e){t("timeType",a,e.target.value)}},j.a.createElement(Ee.a,{value:1},"ProcTime"),j.a.createElement(Ee.a,{value:2},"EventTime")))),2===n[a].timeType?j.a.createElement(qe,T()({},A,{label:"时间列"}),_("timeColumn",{rules:[{required:!0,message:"请选择时间列"}]})(j.a.createElement(Ie.a,{placeholder:"请选择",className:"right-select",onChange:function(e){t("timeColumn",a,e)},showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},h))):void 0,2===n[a].timeType?j.a.createElement(qe,T()({},A,{label:j.a.createElement("span",null,"偏移量(ms) ",j.a.createElement(Ke.a,{title:"watermark值与event time值的偏移量"},j.a.createElement(ae.a,{type:"question-circle-o"})))}),_("offset",{rules:[{required:!0,message:"请输入时间偏移量"}]})(j.a.createElement(je.a,{className:"number-input",min:0,onChange:function(e){return t("offset",a,e)}}))):void 0,j.a.createElement(qe,T()({},A,{label:"并行度"}),_("parallelism")(j.a.createElement(je.a,{className:"number-input",min:1,onChange:function(e){return t("parallelism",a,e)}})))))}}]),t}(w.Component),Xe=F.a.create({mapPropsToFields:function(e){var t=e.panelColumn[e.index];return{type:{value:t.type},sourceId:{value:t.sourceId},topic:{value:t.topic},table:{value:t.table},columns:{value:t.columns},timeType:{value:t.timeType},timeColumn:{value:t.timeColumn},offset:{value:t.offset},columnsText:{value:t.columnsText},parallelism:{value:t.parallelism}}}})(We),Ze=(r={popoverVisible:!1,tabTemplate:[],panelActiveKey:[]},Ge()(r,"popoverVisible",[]),Ge()(r,"panelColumn",[]),Ge()(r,"checkFormParams",[]),Ge()(r,"timeColumoption",[]),Ge()(r,"topicOptionType",[]),Ge()(r,"originOptionType",[]),r),$e=function(e){function t(e){var a;I()(this,t);var n=k()(this,(t.__proto__||R()(t)).call(this,e));return n.currentInitData=function(e){var t=n.state,a=t.tabTemplate,r=t.panelColumn;e.map(function(e,t){a.push(Xe),r.push(e),n.getTypeOriginData(t,e.type),n.parseColumnsText(t,e.columnsText),n.getTopicType(t,e.sourceId)}),n.setCurrentSource({tabTemplate:a,panelColumn:r}),n.setState({tabTemplate:a,panelColumn:r})},n.parseColumnsText=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=n.state,r=a.timeColumoption,o=a.panelColumn,i=t.split("\n").filter(function(e){return!!e}).map(function(e){var t=void 0;return{column:(t=e.trim().includes(" as ")?e.trim().split(" as "):e.trim().split(" "))[0],type:t[1]}}),s=i.filter(function(e){return e.column&&e.type});r[e]=s;var c=s.filter(function(t){return t.column===o[e].timeColumn})[0];o[e].timeColumn=c&&c.column||void 0,n.setCurrentSource({timeColumoption:r}),n.setState({timeColumoption:r})},n.getTypeOriginData=function(e,t){var a=n.state.originOptionType;Q.a.getTypeOriginData({type:t}).then(function(t){"add"===e?1===t.code?a.push(t.data):a.push([]):1===t.code?a[e]=t.data:a[e]=[],n.setCurrentSource({originOptionType:a}),n.setState({originOptionType:a})})},n.getTopicType=function(e,t){var a=n.state.topicOptionType;t?Q.a.getTopicType({sourceId:t}).then(function(t){"add"===e?1===t.code?a.push(t.data):a.push([]):1===t.code?a[e]=t.data:a[e]=[],n.setCurrentSource({topicOptionType:a}),n.setState({topicOptionType:a})}):("add"===e?a.push([]):a[e]=[],n.setCurrentSource({topicOptionType:a}),n.setState({topicOptionType:a}))},n.getCurrentData=function(e,t){var a=t.dispatch,r=t.inputData,o=t.currentPage.source;if(!r[e]&&o.length>0)n.receiveState(e,o,a);else{var i=JSON.parse(Fe()(Ze)),s=r[e]||i;n.setState(T()({},s))}},n.receiveState=function(e,t,a){var r=[],o=[],i=[],s=[],c=[],l=[],u=[],p=[];t.map(function(e){r.push(Xe),o.push(e)}),a(q.z({taskId:e,source:{tabTemplate:r,panelColumn:o,panelActiveKey:i,popoverVisible:s,checkFormParams:c,timeColumoption:l,originOptionType:u,topicOptionType:p}})),n.setState({tabTemplate:r,panelColumn:o,panelActiveKey:i,popoverVisible:s,checkFormParams:c,originOptionType:u,topicOptionType:p,timeColumoption:l},function(){t.map(function(e,t){n.getTypeOriginData(t,e.type),n.getTopicType(t,e.sourceId),n.parseColumnsText(t,e.columnsText)})})},n.changeInputTabs=function(e,t){var a={type:"14",sourceId:void 0,topic:void 0,table:void 0,timeType:1,timeColumn:void 0,offset:0,columnsText:void 0,parallelism:1},r=n.state,o=r.tabTemplate,i=r.panelActiveKey,s=r.popoverVisible,c=r.panelColumn,l=r.checkFormParams,u=r.originOptionType,p=r.topicOptionType;if("add"===e){o.push(Xe),c.push(a),n.getTypeOriginData("add",a.type),n.getTopicType("add",a.topic);var d=""+o.length;i.push(d)}else o.splice(t,1),c.splice(t,1),u.splice(t,1),p.splice(t,1),l.pop(),i=n.changeActiveKey(t),s[t]=!1;n.props.tableParamsChange(),n.setCurrentSource({tabTemplate:o,panelActiveKey:i,popoverVisible:s,panelColumn:c,originOptionType:u,topicOptionType:p}),n.setState({tabTemplate:o,panelActiveKey:i,popoverVisible:s,panelColumn:c,checkFormParams:l,originOptionType:u,topicOptionType:p})},n.setCurrentSource=function(e){var t=n.props,a=t.dispatch,r=t.currentPage,o=T()({},n.state,e);a(q.z({taskId:r.id,source:o}))},n.changeActiveKey=function(e){var t=n.state.panelActiveKey,a=""+(e+1),r=t.indexOf(a);return r>-1&&t.splice(r,1),t.map(function(t){return Number(t)>Number(e)?""+(Number(t)-1):t})},n.handleActiveKey=function(e){var t=n.state.panelActiveKey;t=e,n.setCurrentSource({panelActiveKey:t}),n.setState({panelActiveKey:t})},n.handleInputChange=function(e,t,a){var r=n.state,o=r.panelColumn,i=r.timeColumoption,s=r.originOptionType,c=r.topicOptionType,l=["type","sourceId","topic","table","columns","timeType","timeColumn","offset","columnsText","parallelism"];"columnsText"===e&&(n._syncEditor=!1,n.parseColumnsText(t,a,"changeText")),o[t][e]=a,"type"===e?(n._syncEditor=!0,i[t]=[],s[t]=[],c[t]=[],l.map(function(e){"type"!=e&&(o[t][e]="columns"==e?[]:"timeType"==e?1:"parallelism"==e?1:void 0)}),n.getTypeOriginData(t,a)):"sourceId"===e?(n._syncEditor=!0,i[t]=[],c[t]=[],l.map(function(e){"type"!=e&&"sourceId"!=e&&(o[t][e]="columns"==e?[]:"timeType"==e?1:"parallelism"==e?1:void 0)}),n.getTopicType(t,a)):"topic"===e&&(n._syncEditor=!0,i[t]=[],l.map(function(e){"type"!=e&&"sourceId"!=e&&"topic"!=e&&(o[t][e]="columns"==e?[]:"timeType"==e?1:"parallelism"==e?1:void 0)})),n.props.tableParamsChange(),n.setCurrentSource({panelColumn:o}),n.setState({panelColumn:o})},n.clearCurrentInfo=function(e,t,a){var r=n.state,o=r.panelColumn,i=r.topicOptionType,s=r.originOptionType,c={type:void 0,sourceId:void 0,topic:void 0,table:void 0,timeType:1,timeColumn:void 0,offset:0,columnsText:void 0,parallelism:1};"type"===e?(c.type=a,o[t]=c,i[t]=[],s[t]=[]):"sourceId"===e&&(c.type=o[t].type,c.sourceId=a,o[t]=c,i[t]=[]),n.setCurrentSource({panelColumn:o,topicOptionType:i,originOptionType:s}),n.setState({panelColumn:o,topicOptionType:i,originOptionType:s})},n.handlePopoverVisibleChange=function(e,t,a){var r=n.state.popoverVisible;r[t]=a,e&&(e.stopPropagation(),a&&(r=r.map(function(e,a){return t==a}))),n.setCurrentSource({popoverVisible:r}),n.setState({popoverVisible:r})},n.panelHeader=function(e){var t=n.state.popoverVisible,a=j.a.createElement("div",{className:"input-panel-title"},j.a.createElement("div",{style:{padding:"8 0 12"}}," ",j.a.createElement(ae.a,{type:"exclamation-circle",style:{color:"#faad14"}}),"  你确定要删除此输入源吗？"),j.a.createElement("div",{style:{textAlign:"right",padding:"0 0 8"}},j.a.createElement(d.a,{style:{marginRight:8},size:"small",onClick:function(){n.handlePopoverVisibleChange(null,e,!1)}},"取消"),j.a.createElement(d.a,{type:"primary",size:"small",onClick:function(){n.changeInputTabs("delete",e)}},"确定")));return j.a.createElement("div",{className:"input-panel-title"},j.a.createElement("span",null," 输入源 "+(e+1)+" "),j.a.createElement(Ue.a,{trigger:"click",placement:"topLeft",content:a,visible:t[e],onClick:function(a){n.handlePopoverVisibleChange(a,e,!t[e])}},j.a.createElement("span",{className:"title-icon input-panel-title"},j.a.createElement(ae.a,{type:"delete"}))))},n.recordForm=function(e){var t=n.state.checkFormParams;t.push(e),n.setCurrentSource({checkFormParams:t}),n.setState({checkFormParams:t})},n.state=(a={popoverVisible:!1,tabTemplate:[],panelActiveKey:[]},Ge()(a,"popoverVisible",[]),Ge()(a,"panelColumn",[]),Ge()(a,"checkFormParams",[]),Ge()(a,"timeColumoption",[]),Ge()(a,"topicOptionType",[]),Ge()(a,"originOptionType",[]),a),n}return U()(t,e),L()(t,[{key:"componentDidMount",value:function(){var e=this.props.currentPage.source;e&&e.length>0&&this.currentInitData(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.currentPage,a=this.props.currentPage;t.id!==a.id&&(this._syncEditor=!0,this.getCurrentData(t.id,e))}},{key:"render",value:function(){var e=this,t=this.state,a=t.tabTemplate,n=t.panelActiveKey,r=t.panelColumn,o=t.timeColumoption,i=t.topicOptionType,s=t.originOptionType;return j.a.createElement("div",{className:"m-taksdetail panel-content"},j.a.createElement(Re.a,{activeKey:n,bordered:!1,onChange:this.handleActiveKey},a.map(function(t,a){return j.a.createElement(Je,{header:e.panelHeader(a),key:a+1,style:{borderRadius:5},className:"input-panel"},j.a.createElement(Xe,{sync:e._syncEditor,index:a,key:a+1,handleInputChange:e.handleInputChange,panelColumn:r,onRef:e.recordForm,editorParamsChange:e.props.editorParamsChange,timeColumoption:o,topicOptionType:i,originOptionType:s}))})),j.a.createElement(d.a,{className:"stream-btn",onClick:function(){e.changeInputTabs("add")},style:{borderRadius:5}},j.a.createElement(ae.a,{type:"plus"}),j.a.createElement("span",null," 添加输入")))}}]),t}(w.Component),et=Ie.a.Option,tt=Re.a.Panel,at=(Ee.a.Group,Ve.a.Column),nt=(Ve.a.ColumnGroup,F.a.Item),rt=function(e){function t(){var e,a,n,r;I()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=k()(this,(e=t.__proto__||R()(t)).call.apply(e,[this].concat(i))),n.checkParams=function(e){var t=n.props,a=t.index,r=(t.panelColumn[a].columns,{});return n.props.form.validateFields(function(e,t){r.status=!e}),r},n.originOption=function(e,t){switch(e){case"originType":return t.map(function(e){return j.a.createElement(et,{key:e,value:""+e.id},e.name)});case"currencyType":return t.map(function(e){return j.a.createElement(et,{key:e,value:""+e},e)});case"columnType":return t.map(function(e,t){return j.a.createElement(et,{key:t,value:""+e.key},e.key)});case"primaryType":return t.map(function(e,t){return j.a.createElement(et,{key:t,value:""+e.column},e.column)});default:return null}},r=a,k()(n,r)}return U()(t,e),L()(t,[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"editorParamsChange",value:function(e,t,a){var n=this.props,r=n.handleInputChange,o=n.index;this._syncEditor=!1,r("columnsText",o,t)}},{key:"render",value:function(){var e=this.props,t=e.handleInputChange,a=e.index,n=e.sync,r=e.originOptionType,o=e.tableOptionType,i=e.panelColumn,s=e.tableColumnOptionType,l=this.props.form.getFieldDecorator,p=this.originOption("originType",r[a]||[]),m=this.originOption("currencyType",o[a]||[]),f=this.originOption("columnType",s[a]||[]),h=this.originOption("primaryType",i[a].columns||[]),_={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}};return j.a.createElement(c.a,{className:"title-content"},j.a.createElement(nt,T()({},_,{label:"存储类型"}),l("type",{rules:[{required:!0,message:"请选择存储类型"}]})(j.a.createElement(Ie.a,{className:"right-select",onChange:function(e){t("type",a,e)},showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},j.a.createElement(et,{value:"1"},"MySQL"),j.a.createElement(et,{value:"8"},"HBase"),j.a.createElement(et,{value:"11"},"ElasticSearch")))),j.a.createElement(nt,T()({},_,{label:"数据源"}),l("sourceId",{initialValue:"disabled",rules:[{required:!0,message:"请选择数据源"}]})(j.a.createElement(Ie.a,{className:"right-select",onChange:function(e){t("sourceId",a,e)},showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},p))),"1"==i[a].type||"8"==i[a].type?j.a.createElement(nt,T()({},_,{label:"表"}),l("table",{initialValue:"disabled",rules:[{required:!0,message:"请选择表"}]})(j.a.createElement(Ie.a,{className:"right-select",onChange:function(e){t("table",a,e)},showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},m))):"","11"==i[a].type?j.a.createElement(nt,T()({},_,{label:"索引"}),l("index",{rules:[{required:!0,message:"请输入索引"}]})(j.a.createElement(E.a,{placeholder:"请输入索引",onChange:function(e){return t("index",a,e.target.value)}}))):"","11"==i[a].type?j.a.createElement(nt,T()({},_,{label:j.a.createElement("span",null,"id ",j.a.createElement(Ke.a,{title:"id生成规则：填写字段的索引位置（从0开始)"},j.a.createElement(ae.a,{type:"question-circle-o"}))," ")}),l("esId")(j.a.createElement(E.a,{placeholder:"请输入id",onChange:function(e){return t("esId",a,e.target.value)}}))):"","11"==i[a].type?j.a.createElement(nt,T()({},_,{label:"索引类型"}),l("esType",{rules:[{required:!0,message:"请输入索引类型"}]})(j.a.createElement(E.a,{placeholder:"请输入索引类型",onChange:function(e){return t("esType",a,e.target.value)}}))):"","8"==i[a].type?j.a.createElement(nt,T()({},_,{label:"rowKey"}),l("rowKey",{rules:[{required:!0,message:"请输入rowKey"}]})(j.a.createElement(E.a,{placeholder:" rowKey 格式：填写字段1 , 填写字段2 ",onChange:function(e){return t("rowKey",a,e.target.value)}}))):"",j.a.createElement(nt,T()({},_,{label:"映射表"}),l("tableName",{rules:"11"===i[a].type?[{required:!0,message:"请输入映射表名"}]:[]})(j.a.createElement(E.a,{placeholder:"请输入映射表名",onChange:function(e){return t("tableName",a,e.target.value)}}))),j.a.createElement(c.a,null,j.a.createElement(u.a,{span:"6"},j.a.createElement("span",{style:{color:"rgba(0, 0, 0, 0.85)",paddingRight:10,float:"right"}},"字段 :")),"1"==i[a].type?j.a.createElement(u.a,{span:"18",style:{marginBottom:20,border:"1px solid #ddd"}},j.a.createElement(Ve.a,{dataSource:i[a].columns,className:"table-small",pagination:!1,size:"small"},j.a.createElement(at,{title:"字段",dataIndex:"column",key:"字段",width:"50%",render:function(e,n,r){return j.a.createElement(Ie.a,{className:"sub-right-select",value:e,onChange:function(e){t("subColumn",a,r,e)},showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},f)}}),j.a.createElement(at,{title:"类型",dataIndex:"type",key:"类型",width:"40%",render:function(e,t,a){return j.a.createElement(E.a,{value:e,disabled:!0})}}),j.a.createElement(at,{key:"delete",render:function(e,n,r){return j.a.createElement(ae.a,{type:"close",style:{fontSize:16,color:"#888"},onClick:function(){t("deleteColumn",a,r)}})}})),j.a.createElement("div",{style:{padding:"0 20 20"}},j.a.createElement(d.a,{className:"stream-btn",type:"dashed",style:{borderRadius:5},onClick:function(){t("columns",a,{})}},j.a.createElement(ae.a,{type:"plus"}),j.a.createElement("span",null," 添加输入")))):j.a.createElement(u.a,{span:"18",style:{marginBottom:20,height:200}},j.a.createElement(He.a,{style:{minHeight:202,border:"1px solid #ddd"},key:"params-editor",sync:n,placeholder:"字段 类型, 比如 id int 一行一个字段",value:i[a].columnsText,onChange:this.editorParamsChange.bind(this)}))),"1"==i[a].type?j.a.createElement(nt,T()({},_,{label:"主键"}),l("primaryKey")(j.a.createElement(Ie.a,{className:"right-select",onChange:function(e){t("primaryKey",a,e)},mode:"multiple",showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},h))):"",j.a.createElement(nt,T()({},_,{label:"并行度"}),l("parallelism")(j.a.createElement(je.a,{className:"number-input",min:1,onChange:function(e){return t("parallelism",a,e)}}))))}}]),t}(w.Component),ot=F.a.create({mapPropsToFields:function(e){var t=e.panelColumn[e.index];return{type:{value:t.type},sourceId:{value:t.sourceId},table:{value:t.table},columns:{value:t.columns},columnsText:{value:t.columnsText},id:{value:t.id},index:{value:t.index},writePolicy:{value:t.writePolicy},esId:{value:t.esId},esType:{value:t.esType},parallelism:{value:t.parallelism},tableName:{value:t.tableName},primaryKey:{value:t.primaryKey},rowKey:{value:t.rowKey}}}})(rt),it=(o={popoverVisible:!1,tabTemplate:[],panelActiveKey:[]},Ge()(o,"popoverVisible",[]),Ge()(o,"panelColumn",[]),Ge()(o,"checkFormParams",[]),Ge()(o,"originOptionType",[]),Ge()(o,"tableOptionType",[]),Ge()(o,"tableColumnOptionType",[]),o),st=function(e){function t(e){var a;I()(this,t);var n=k()(this,(t.__proto__||R()(t)).call(this,e));return n.currentInitData=function(e){var t=n.state,a=t.tabTemplate,r=t.panelColumn;e.map(function(e,t){a.push(ot),r.push(e),n.getTypeOriginData(t,e.type),"1"!=e.type&&"8"!=e.type||(n.getTableType(t,e.sourceId),"1"==e.type&&n.getTableColumns(t,e.sourceId,e.table))}),n.setOutputData({tabTemplate:a,panelColumn:r}),n.setState({tabTemplate:a,panelColumn:r})},n.getCurrentData=function(e,t){var a=t.currentPage,r=t.outputData,o=t.dispatch,i=a.sink;if(!r[e]&&i.length>0)n.receiveState(e,i,o);else{var s=JSON.parse(Fe()(it)),c=r[e]||s;n.setState(T()({},c))}},n.receiveState=function(e,t,a){var r=[],o=[],i=[],s=[],c=[],l=[],u=[],p=[];t.map(function(e){r.push(ot),o.push(e)}),a(q.A({taskId:e,sink:{tabTemplate:r,panelColumn:o,panelActiveKey:i,popoverVisible:s,checkFormParams:c,originOptionType:l,tableOptionType:u,tableColumnOptionType:p}})),n.setState({tabTemplate:r,panelColumn:o,panelActiveKey:i,popoverVisible:s,checkFormParams:c,originOptionType:l,tableOptionType:u,tableColumnOptionType:p},function(){t.map(function(e,t){n.getTypeOriginData(t,e.type),"1"!=e.type&&"8"!=e.type||(n.getTableType(t,e.sourceId),"1"==e.type&&n.getTableColumns(t,e.sourceId,e.table))})})},n.getTypeOriginData=function(e,t){var a=n.state.originOptionType;Q.a.getTypeOriginData({type:t}).then(function(t){"add"===e?1===t.code?a.push(t.data):a.push([]):1===t.code?a[e]=t.data:a[e]=[],n.setOutputData({originOptionType:a}),n.setState({originOptionType:a})})},n.getTableType=function(e,t){var a=n.state.tableOptionType;t?Q.a.getStremTableType({sourceId:t,isSys:!1}).then(function(t){"add"===e?1===t.code?a.push(t.data):a.push([]):1===t.code?a[e]=t.data:a[e]=[],n.setOutputData({tableOptionType:a}),n.setState({tableOptionType:a})}):("add"===e?a.push([]):a[e]=[],n.setOutputData({tableOptionType:a}),n.setState({tableOptionType:a}))},n.getTableColumns=function(e,t,a){var r=n.state.tableColumnOptionType;Q.a.getStreamTableColumn({sourceId:t,tableName:a}).then(function(t){1===t.code?r[e]=t.data:r[e]=[],n.setOutputData({tableColumnOptionType:r}),n.setState({tableColumnOptionType:r})})},n.changeInputTabs=function(e,t){var a={type:"1",columns:[],sourceId:void 0,table:void 0,columnsText:void 0,esId:void 0,esType:void 0,writePolicy:void 0,index:void 0,id:void 0,parallelism:1,tableName:void 0,primaryKey:void 0,rowKey:void 0},r=n.state,o=r.tabTemplate,i=r.panelActiveKey,s=r.popoverVisible,c=r.panelColumn,l=r.checkFormParams,u=r.originOptionType,p=r.tableOptionType,d=r.tableColumnOptionType;if("add"===e){o.push(ot),c.push(a),n.getTypeOriginData("add",a.type),n.getTableType("add",a.table),d.push([]);var m=""+o.length;i.push(m)}else o.splice(t,1),c.splice(t,1),u.splice(t,1),p.splice(t,1),d.splice(t,1),l.pop(),i=n.changeActiveKey(t),s[t]=!1;n.props.tableParamsChange(),n.setOutputData({tabTemplate:o,panelActiveKey:i,popoverVisible:s,panelColumn:c,tableColumnOptionType:d}),n.setState({tabTemplate:o,panelActiveKey:i,popoverVisible:s,panelColumn:c,checkFormParams:l,originOptionType:u,tableOptionType:p,tableColumnOptionType:d})},n.setOutputData=function(e){var t=n.props,a=t.dispatch,r=t.currentPage,o=T()({},n.state,e);a(q.A({taskId:r.id,sink:o}))},n.changeActiveKey=function(e){var t=n.state.panelActiveKey,a=""+(e+1),r=t.indexOf(a);return r>-1&&t.splice(r,1),t.map(function(t){return Number(t)>Number(e)?""+(Number(t)-1):t})},n.handleActiveKey=function(e){var t=n.state.panelActiveKey;t=e,n.setOutputData({panelActiveKey:t}),n.setState({panelActiveKey:t})},n.tableColumnType=function(e,t){return n.state.tableColumnOptionType[e].filter(function(e){return e.key===t})[0].type},n.filterPrimaryKey=function(e,t){return t.filter(function(t){var a=!1;return e.map(function(e){e.column===t&&(a=!0)}),a})},n.handleInputChange=function(e,t,a,r){n._syncEditor=!0;var o=n.state,i=o.panelColumn,s=o.originOptionType,c=o.tableOptionType,l=o.tableColumnOptionType;if("columns"===e)i[t][e].push(a);else if("deleteColumn"===e){i[t].columns.splice(a,1);var u=n.filterPrimaryKey(i[t].columns,i[t].primaryKey||[]);i[t].primaryKey=u}else if("subColumn"===e){i[t].columns[a].column=r;var p=n.tableColumnType(t,r);i[t].columns[a].type=p}else i[t][e]=a;"columnsText"===e&&(n._syncEditor=!1);var d=["type","sourceId","table","columns","columnsText","id","index","writePolicy","esId","esType","parallelism","tableName","primaryKey","rowKey"];if("type"===e)n._syncEditor=!0,s[t]=[],c[t]=[],l[t]=[],d.map(function(e){i[t][e]="type"===e?a:"parallelism"==e?1:"columns"==e?[]:void 0}),n.getTypeOriginData(t,a);else if("sourceId"===e)c[t]=[],l[t]=[],d.map(function(e){n._syncEditor=!0,"type"!==e&&"sourceId"!=e&&(i[t][e]="columns"==e?[]:"parallelism"==e?1:void 0)}),"1"!=i[t].type&&"8"!=i[t].type||n.getTableType(t,a);else if("table"===e){n._syncEditor=!0,l[t]=[];var m=i[t].sourceId;i[t].columns=[],d.map(function(e){"type"!=e&&"sourceId"!=e&&"table"!=e&&(i[t][e]="columns"==e?[]:"parallelism"==e?1:void 0)}),"1"==i[t].type&&n.getTableColumns(t,m,a)}n.props.tableParamsChange(),n.setOutputData({panelColumn:i}),n.setState({panelColumn:i})},n.clearCurrentInfo=function(e,t,a){var r=n.state,o=r.panelColumn,i=r.tableOptionType,s=r.originOptionType,c={type:void 0,columns:[],sourceId:void 0,table:void 0,columnsText:void 0,esId:void 0,esType:void 0,writePolicy:void 0,index:void 0,id:void 0,parallelism:1,tableName:void 0,rowKey:void 0,primaryKey:void 0};"type"===e?(c.type=a,s[t]=[],i[t]=[],o[t]=c):"sourceId"===e&&(c.type=o[t].type,c.sourceId=a,i[t]=[],o[t]=c),n.setOutputData({panelColumn:o,tableOptionType:i,originOptionType:s}),n.setState({panelColumn:o,tableOptionType:i,originOptionType:s})},n.handlePopoverVisibleChange=function(e,t,a){var r=n.state.popoverVisible;r[t]=a,e&&(e.stopPropagation(),a&&(r=r.map(function(e,a){return t==a}))),n.setOutputData({popoverVisible:r}),n.setState({popoverVisible:r})},n.panelHeader=function(e){var t=n.state.popoverVisible,a=j.a.createElement("div",{className:"input-panel-title"},j.a.createElement("div",{style:{padding:"8 0 12"}}," ",j.a.createElement(ae.a,{type:"exclamation-circle",style:{color:"#faad14"}}),"  你确定要删除此输出源吗？"),j.a.createElement("div",{style:{textAlign:"right",padding:"0 0 8"}},j.a.createElement(d.a,{style:{marginRight:8},size:"small",onClick:function(){n.handlePopoverVisibleChange(null,e,!1)}},"取消"),j.a.createElement(d.a,{type:"primary",size:"small",onClick:function(){n.changeInputTabs("delete",e)}},"确定")));return j.a.createElement("div",{className:"input-panel-title"},j.a.createElement("span",null," 输出源 "+(e+1)+" "),j.a.createElement(Ue.a,{trigger:"click",placement:"topLeft",content:a,visible:t[e],onClick:function(a){n.handlePopoverVisibleChange(a,e,!t[e])}},j.a.createElement("span",{className:"title-icon input-panel-title"},j.a.createElement(ae.a,{type:"delete"}))))},n.recordForm=function(e){var t=n.state.checkFormParams;t.push(e),n.setOutputData({checkFormParams:t}),n.setState({checkFormParams:t})},n.state=(a={popoverVisible:!1,tabTemplate:[],panelActiveKey:[]},Ge()(a,"popoverVisible",[]),Ge()(a,"panelColumn",[]),Ge()(a,"checkFormParams",[]),Ge()(a,"originOptionType",[]),Ge()(a,"tableOptionType",[]),Ge()(a,"tableColumnOptionType",[]),a),n}return U()(t,e),L()(t,[{key:"componentDidMount",value:function(){var e=this.props.currentPage.sink;e&&e.length>0&&this.currentInitData(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.currentPage,a=this.props.currentPage;t.id!==a.id&&(this._syncEditor=!0,this.getCurrentData(t.id,e))}},{key:"render",value:function(){var e=this,t=this.state,a=t.tabTemplate,n=t.panelActiveKey,r=t.panelColumn,o=t.originOptionType,i=t.tableOptionType,s=t.tableColumnOptionType;return j.a.createElement("div",{className:"m-taksdetail panel-content"},j.a.createElement(Re.a,{activeKey:n,bordered:!1,onChange:this.handleActiveKey},a.map(function(t,a){return j.a.createElement(tt,{header:e.panelHeader(a),key:a+1,style:{borderRadius:5},className:"input-panel"},j.a.createElement(ot,{sync:e._syncEditor,index:a,handleInputChange:e.handleInputChange,panelColumn:r,originOptionType:o,tableOptionType:i,tableColumnOptionType:s,onRef:e.recordForm,editorParamsChange:e.props.editorParamsChange}))})),j.a.createElement(d.a,{className:"stream-btn",onClick:function(){e.changeInputTabs("add")},style:{borderRadius:5}},j.a.createElement(ae.a,{type:"plus"}),j.a.createElement("span",null," 添加输入")))}}]),t}(w.Component),ct=Ie.a.Option,lt=Re.a.Panel,ut=(Ee.a.Group,Ve.a.Column),pt=(Ve.a.ColumnGroup,F.a.Item),dt=function(e){function t(){var e,a,n,r;I()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=k()(this,(e=t.__proto__||R()(t)).call.apply(e,[this].concat(i))),n.checkParams=function(e){var t=n.props,a=t.index,r=(t.panelColumn[a].columns,{});return n.props.form.validateFields(function(e,t){r.status=!e}),r},n.originOption=function(e,t){switch(e){case"originType":return t.map(function(e){return j.a.createElement(ct,{key:e,value:""+e.id},e.name)});case"currencyType":return t.map(function(e){return j.a.createElement(ct,{key:e,value:""+e},e)});case"columnType":return t.map(function(e,t){return j.a.createElement(ct,{key:t,value:""+e.key},e.key)});case"primaryType":return t.map(function(e,t){return j.a.createElement(ct,{key:t,value:""+e.column},e.column)});default:return null}},r=a,k()(n,r)}return U()(t,e),L()(t,[{key:"componentDidMount",value:function(){this.props.onRef(this)}},{key:"editorParamsChange",value:function(e,t,a){var n=this.props,r=n.handleInputChange,o=n.index;this._syncEditor=!1,r("columnsText",o,t)}},{key:"render",value:function(){var e=this.props,t=e.handleInputChange,a=e.index,n=e.sync,r=e.originOptionType,o=e.tableOptionType,i=e.panelColumn,s=e.tableColumnOptionType,l=this.props.form.getFieldDecorator,p=this.originOption("originType",r[a]||[]),m=this.originOption("currencyType",o[a]||[]),f=this.originOption("columnType",s[a]||[]),h=this.originOption("primaryType",i[a].columns||[]),_={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}};return j.a.createElement(c.a,{className:"title-content"},j.a.createElement(pt,T()({},_,{label:"存储类型"}),l("type",{rules:[{required:!0,message:"请选择存储类型"}]})(j.a.createElement(Ie.a,{className:"right-select",onChange:function(e){t("type",a,e)},showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},j.a.createElement(ct,{value:"1"},"MySQL"),j.a.createElement(ct,{value:"8"},"HBase")))),j.a.createElement(pt,T()({},_,{label:"数据源"}),l("sourceId",{initialValue:"disabled",rules:[{required:!0,message:"请选择数据源"}]})(j.a.createElement(Ie.a,{className:"right-select",onChange:function(e){t("sourceId",a,e)},showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},p))),j.a.createElement(pt,T()({},_,{label:"表"}),l("table",{rules:[{required:!0,message:"请选择表"}]})(j.a.createElement(Ie.a,{className:"right-select",onChange:function(e){t("table",a,e)},showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},m))),j.a.createElement(pt,T()({},_,{label:"映射表"}),l("tableName")(j.a.createElement(E.a,{placeholder:"请输入映射表名",onChange:function(e){return t("tableName",a,e.target.value)}}))),j.a.createElement(c.a,null,j.a.createElement(u.a,{span:"6"},j.a.createElement("span",{style:{color:"rgba(0, 0, 0, 0.85)",paddingRight:10,float:"right"}},"字段 : ")),"1"==i[a].type?j.a.createElement(u.a,{span:"18",style:{marginBottom:20,border:"1px solid #ddd"}},j.a.createElement(Ve.a,{dataSource:i[a].columns,className:"table-small",pagination:!1,size:"small"},j.a.createElement(ut,{title:"字段",dataIndex:"column",key:"字段",width:"50%",render:function(e,n,r){return j.a.createElement(Ie.a,{className:"sub-right-select",value:e,onChange:function(e){t("subColumn",a,r,e)},showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},f)}}),j.a.createElement(ut,{title:"类型",dataIndex:"type",key:"类型",width:"40%",render:function(e,t,a){return j.a.createElement(E.a,{value:e,disabled:!0})}}),j.a.createElement(ut,{key:"delete",render:function(e,n,r){return j.a.createElement(ae.a,{type:"close",style:{fontSize:16,color:"#888"},onClick:function(){t("deleteColumn",a,r)}})}})),j.a.createElement("div",{style:{padding:"0 20 20"}},j.a.createElement(d.a,{className:"stream-btn",type:"dashed",style:{borderRadius:5},onClick:function(){t("columns",a,{})}},j.a.createElement(ae.a,{type:"plus"}),j.a.createElement("span",null," 添加输入")))):j.a.createElement(u.a,{span:"18",style:{marginBottom:20,height:200}},j.a.createElement(He.a,{style:{minHeight:202,border:"1px solid #ddd"},key:"params-editor",sync:n,placeholder:"字段 类型, 比如 id int 一行一个字段",value:i[a].columnsText,onChange:this.editorParamsChange.bind(this)}))),"1"==i[a].type?j.a.createElement(pt,T()({},_,{label:"主键"}),l("primaryKey",{rules:[{required:!0,message:"请选择主键"}]})(j.a.createElement(Ie.a,{className:"right-select",onChange:function(e){t("primaryKey",a,e)},mode:"multiple",showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},h))):j.a.createElement(pt,T()({},_,{label:"主键"}),l("hbasePrimaryKey",{rules:[{required:!0,message:"请输入主键"}]})(j.a.createElement(E.a,{placeholder:"请输入主键",onChange:function(e){return t("hbasePrimaryKey",a,e.target.value)}}))),j.a.createElement(pt,T()({},_,{label:"并行度"}),l("parallelism")(j.a.createElement(je.a,{className:"number-input",min:1,onChange:function(e){return t("parallelism",a,e)}}))),j.a.createElement(pt,T()({},_,{label:"缓存策略"}),l("cache",{rules:[{required:!0,message:"请选择缓存策略"}]})(j.a.createElement(Ie.a,{placeholder:"请选择",className:"right-select",onChange:function(e){t("cache",a,e)},showSearch:!0,filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},j.a.createElement(ct,{key:"None",value:"None"},"None"),j.a.createElement(ct,{key:"LRU",value:"LRU"},"LRU")))),"LRU"===i[a].cache?j.a.createElement(pt,T()({},_,{label:"缓存大小(行)"}),l("cacheSize",{rules:[{required:!0,message:"请输入缓存大小"}]})(j.a.createElement(je.a,{className:"number-input",min:0,onChange:function(e){return t("cacheSize",a,e)}}))):void 0,"LRU"===i[a].cache?j.a.createElement(pt,T()({},_,{label:"缓存超时时间(ms)"}),l("cacheTTLMs",{rules:[{required:!0,message:"请输入缓存超时时间"}]})(j.a.createElement(je.a,{className:"number-input",min:0,onChange:function(e){return t("cacheTTLMs",a,e)}}))):void 0)}}]),t}(w.Component),mt=F.a.create({mapPropsToFields:function(e){var t=e.panelColumn[e.index],a=t.type,n=t.sourceId,r=t.table,o=t.columns,i=t.parallelism,s=t.columnsText,c=t.cache,l=t.cacheSize,u=t.hbasePrimaryKey,p=t.cacheTTLMs;return{type:{value:a},sourceId:{value:n},table:{value:r},tableName:{value:t.tableName},columns:{value:o},parallelism:{value:i},columnsText:{value:s},cache:{value:c},cacheSize:{value:l},cacheTTLMs:{value:p},primaryKey:{value:t.primaryKey},hbasePrimaryKey:{value:u}}}})(dt),Et=(i={popoverVisible:!1,tabTemplate:[],panelActiveKey:[]},Ge()(i,"popoverVisible",[]),Ge()(i,"panelColumn",[]),Ge()(i,"checkFormParams",[]),Ge()(i,"originOptionType",[]),Ge()(i,"tableOptionType",[]),Ge()(i,"tableColumnOptionType",[]),i),ft=function(e){function t(e){var a;I()(this,t);var n=k()(this,(t.__proto__||R()(t)).call(this,e));return n.currentInitData=function(e){var t=n.state,a=t.tabTemplate,r=t.panelColumn;e.map(function(e,t){a.push(mt),r.push(e),n.getTypeOriginData(t,e.type),n.getTableType(t,e.sourceId),"1"==e.type&&n.getTableColumns(t,e.sourceId,e.table)}),n.setOutputData({tabTemplate:a,panelColumn:r}),n.setState({tabTemplate:a,panelColumn:r})},n.getCurrentData=function(e,t){var a=t.currentPage,r=t.dimensionData,o=t.dispatch,i=a.side;if(!r[e]&&i.length>0)n.receiveState(e,i,o);else{var s=JSON.parse(Fe()(Et)),c=r[e]||s;n.setState(T()({},c))}},n.receiveState=function(e,t,a){var r=[],o=[],i=[],s=[],c=[],l=[],u=[],p=[];t.map(function(e){r.push(mt),o.push(e)}),a(q.y({taskId:e,side:{tabTemplate:r,panelColumn:o,panelActiveKey:i,popoverVisible:s,checkFormParams:c,originOptionType:l,tableOptionType:u,tableColumnOptionType:p}})),n.setState({tabTemplate:r,panelColumn:o,panelActiveKey:i,popoverVisible:s,checkFormParams:c,originOptionType:l,tableOptionType:u,tableColumnOptionType:p},function(){t.map(function(e,t){n.getTypeOriginData(t,e.type),n.getTableType(t,e.sourceId),"1"==e.type&&n.getTableColumns(t,e.sourceId,e.table)})})},n.getTypeOriginData=function(e,t){var a=n.state.originOptionType;Q.a.getTypeOriginData({type:t}).then(function(t){"add"===e?1===t.code?a.push(t.data):a.push([]):1===t.code?a[e]=t.data:a[e]=[],n.setOutputData({originOptionType:a}),n.setState({originOptionType:a})})},n.getTableType=function(e,t,a){var r=n.state.tableOptionType;t?Q.a.getStremTableType({sourceId:t,isSys:!1}).then(function(t){"add"===e?1===t.code?r.push(t.data):r.push([]):1===t.code?r[e]=t.data:r[e]=[],n.setOutputData({tableOptionType:r}),n.setState({tableOptionType:r})}):((e="add")?r.push([]):r[e]=[],n.setOutputData({tableOptionType:r}),n.setState({tableOptionType:r}))},n.getTableColumns=function(e,t,a){var r=n.state.tableColumnOptionType;Q.a.getStreamTableColumn({sourceId:t,tableName:a}).then(function(t){1===t.code?r[e]=t.data:r[e]=[],n.setOutputData({tableColumnOptionType:r}),n.setState({tableColumnOptionType:r})})},n.changeInputTabs=function(e,t){var a={type:"1",columns:[],sourceId:void 0,table:void 0,columnsText:void 0,tableName:void 0,primaryKey:void 0,hbasePrimaryKey:void 0,parallelism:1,cache:"LRU",cacheSize:1e4,cacheTTLMs:6e4},r=n.state,o=r.tabTemplate,i=r.panelActiveKey,s=r.popoverVisible,c=r.panelColumn,l=r.checkFormParams,u=r.originOptionType,p=r.tableOptionType,d=r.tableColumnOptionType;if("add"===e){o.push(mt),c.push(a),n.getTypeOriginData("add",a.type),n.getTableType("add",a.table),d.push([]);var m=""+o.length;i.push(m)}else o.splice(t,1),c.splice(t,1),u.splice(t,1),p.splice(t,1),d.splice(t,1),l.pop(),i=n.changeActiveKey(t),s[t]=!1;n.props.tableParamsChange(),n.setOutputData({tabTemplate:o,panelActiveKey:i,popoverVisible:s,panelColumn:c,checkFormParams:l,originOptionType:u,tableOptionType:p,tableColumnOptionType:d}),n.setState({tabTemplate:o,panelActiveKey:i,popoverVisible:s,panelColumn:c,checkFormParams:l,originOptionType:u,tableOptionType:p,tableColumnOptionType:d})},n.setOutputData=function(e){var t=n.props,a=t.dispatch,r=t.currentPage,o=T()({},n.state,e);a(q.y({taskId:r.id,side:o}))},n.changeActiveKey=function(e){var t=n.state.panelActiveKey,a=""+(e+1),r=t.indexOf(a);return r>-1&&t.splice(r,1),t.map(function(t){return Number(t)>Number(e)?""+(Number(t)-1):t})},n.handleActiveKey=function(e){var t=n.state.panelActiveKey;t=e,n.setOutputData({panelActiveKey:t}),n.setState({panelActiveKey:t})},n.tableColumnType=function(e,t){var a=n.state.tableColumnOptionType;return a[e].filter(function(e){return e.key===t})[0].type},n.filterPrimaryKey=function(e,t){return t.filter(function(t){var a=!1;return e.map(function(e){e.column===t&&(a=!0)}),a})},n.handleInputChange=function(e,t,a,r){var o=n.state,i=o.panelColumn,s=o.originOptionType,c=o.tableOptionType,l=o.tableColumnOptionType;if("columns"===e)i[t][e].push(a);else if("deleteColumn"===e){i[t].columns.splice(a,1);var u=n.filterPrimaryKey(i[t].columns,i[t].primaryKey||[]);i[t].primaryKey=u}else if("subColumn"===e){i[t].columns[a].column=r;var p=n.tableColumnType(t,r);i[t].columns[a].type=p}else i[t][e]=a;"columnsText"===e&&(n._syncEditor=!1);var d=["type","sourceId","table","columns","columnsText","parallelism","cache","cacheSize","hbasePrimaryKey","cacheTTLMs","tableName","primaryKey"];if("type"===e)s[t]=[],c[t]=[],l[t]=[],d.map(function(e){"type"!=e&&(i[t][e]="parallelism"==e?1:"columns"==e?[]:"cache"==e?"LRU":"cacheSize"==e?1e4:"cacheTTLMs"==e?6e4:void 0)}),n.getTypeOriginData(t,a);else if("sourceId"===e)c[t]=[],l[t]=[],i[t].columns=[],d.map(function(e){"type"!=e&&"sourceId"!=e&&(i[t][e]="parallelism"==e?1:"columns"==e?[]:"cache"==e?"LRU":"cacheSize"==e?1e4:"cacheTTLMs"==e?6e4:void 0)}),n.getTableType(t,a,e);else if("table"===e){l[t]=[],d.map(function(e){"type"!=e&&"sourceId"!=e&&"table"!=e&&(i[t][e]="parallelism"==e?1:"columns"==e?[]:"cache"==e?"LRU":"cacheSize"==e?1e4:"cacheTTLMs"==e?6e4:void 0)});var m=i[t].sourceId;"1"==i[t].type&&n.getTableColumns(t,m,a)}n.props.tableParamsChange(),n.setOutputData({panelColumn:i}),n.setState({panelColumn:i})},n.clearCurrentInfo=function(e,t,a){var r=n.state,o=r.panelColumn,i=r.originOptionType,s=r.tableOptionType,c={type:void 0,columns:[],sourceId:void 0,table:void 0,tableName:void 0,parallelism:1,cache:"LRU",cacheSize:1e4,cacheTTLMs:6e4};"type"===e?(c.type=a,o[t]=c,i[t]=[],s[t]=[]):"sourceId"===e&&(c.type=o[t].type,c.sourceId=a,o[t]=c,s[t]=[]),n.setOutputData({panelColumn:o,originOptionType:i,tableOptionType:s}),n.setState({panelColumn:o,originOptionType:i,tableOptionType:s})},n.handlePopoverVisibleChange=function(e,t,a){var r=n.state.popoverVisible;r[t]=a,e&&(e.stopPropagation(),a&&(r=r.map(function(e,a){return t==a}))),n.setOutputData({popoverVisible:r}),n.setState({popoverVisible:r})},n.panelHeader=function(e){var t=n.state.popoverVisible,a=j.a.createElement("div",{className:"input-panel-title"},j.a.createElement("div",{style:{padding:"8 0 12"}}," ",j.a.createElement(ae.a,{type:"exclamation-circle",style:{color:"#faad14"}}),"  你确定要删除此输出源吗？"),j.a.createElement("div",{style:{textAlign:"right",padding:"0 0 8"}},j.a.createElement(d.a,{style:{marginRight:8},size:"small",onClick:function(){n.handlePopoverVisibleChange(null,e,!1)}},"取消"),j.a.createElement(d.a,{type:"primary",size:"small",onClick:function(){n.changeInputTabs("delete",e)}},"确定")));return j.a.createElement("div",{className:"input-panel-title"},j.a.createElement("span",null," 维表 "+(e+1)),j.a.createElement(Ue.a,{trigger:"click",placement:"topLeft",content:a,visible:t[e],onClick:function(a){n.handlePopoverVisibleChange(a,e,!t[e])}},j.a.createElement("span",{className:"title-icon input-panel-title"},j.a.createElement(ae.a,{type:"delete"}))))},n.recordForm=function(e){var t=n.state.checkFormParams;t.push(e),n.setOutputData({checkFormParams:t}),n.setState({checkFormParams:t})},n.state=(a={popoverVisible:!1,tabTemplate:[],panelActiveKey:[]},Ge()(a,"popoverVisible",[]),Ge()(a,"panelColumn",[]),Ge()(a,"checkFormParams",[]),Ge()(a,"originOptionType",[]),Ge()(a,"tableOptionType",[]),Ge()(a,"tableColumnOptionType",[]),a),n}return U()(t,e),L()(t,[{key:"componentDidMount",value:function(){var e=this.props.currentPage.side;e&&e.length>0&&this.currentInitData(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.currentPage,a=this.props.currentPage;t.id!==a.id&&this.getCurrentData(t.id,e)}},{key:"render",value:function(){var e=this,t=this.state,a=t.tabTemplate,n=t.panelActiveKey,r=t.panelColumn,o=t.originOptionType,i=t.tableOptionType,s=t.tableColumnOptionType;return j.a.createElement("div",{className:"m-taksdetail panel-content"},j.a.createElement(Re.a,{activeKey:n,bordered:!1,onChange:this.handleActiveKey},a.map(function(t,a){return j.a.createElement(lt,{header:e.panelHeader(a),key:a+1,style:{borderRadius:5},className:"input-panel"},j.a.createElement(mt,{index:a,sync:e._syncEditor,handleInputChange:e.handleInputChange,panelColumn:r,originOptionType:o,tableOptionType:i,tableColumnOptionType:s,onRef:e.recordForm,editorParamsChange:e.props.editorParamsChange}))})),j.a.createElement(d.a,{className:"stream-btn",onClick:function(){e.changeInputTabs("add")},style:{borderRadius:5}},j.a.createElement(ae.a,{type:"plus"}),j.a.createElement("span",null," 添加输入")))}}]),t}(w.Component),Tt=ue.a.TabPane,ht=G.a.confirm,_t=function(e){function t(){var e,a,n,r;I()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=k()(this,(e=t.__proto__||R()(t)).call.apply(e,[this].concat(i))),n.state={selected:"",expanded:!1},n.onChange=function(e){var t=n.props,a=t.dispatch,r=t.pages,o=parseInt(e,10),i=r&&r.find(function(e){return e.id===o});i&&(a(q.x(i)),a(q.p()),a(q.q()),a(q.o()))},n.onEdit=function(e,t){var a=n.props,r=a.pages,o=a.dispatch,i=r.filter(function(t){return t.id==e})[0]||{};switch(t){case"remove":i.notSynced?ht({title:"部分任务修改尚未同步到服务器，是否强制关闭 ?",content:"强制关闭将丢弃这些修改数据",onOk:function(){o(q.l(parseInt(e,10),r,i)),o(q.f(i.id)),o(q.g(i.id)),o(q.e(i.id))},onCancel:function(){}}):(o(q.l(parseInt(e,10),r,i)),o(q.f(i.id)),o(q.g(i.id)),o(q.e(i.id)))}},n.mapPanels=function(e){return e&&e.length>0?e.map(function(e){var t=j.a.createElement("span",null,j.a.createElement(pe.a,{notSynced:e.notSynced}),e.name);return j.a.createElement(Tt,{style:{height:"0px"},tab:t,key:e.id})}):[]},n.tabClick=function(e){var t=n.state,a=t.selected,r=t.expanded;e===a&&r?(n.setState({selected:"",expanded:!1}),n.SideBench.style.width="30px"):e!==a&&(n.SideBench.style.width="500px",n.setState({selected:e,expanded:!0}))},n.unLock=function(){var e=n.props,t=e.currentPage,a=e.dispatch,r=t.readWriteLockVO;ht({title:"解锁提醒",content:"文件正在被"+r.lastKeepLockUserName+"编辑中，开始编辑时间\n                "+V.a.formatDateTime(r.gmtModified)+"。\n                强制编辑可能导致"+r.lastKeepLockUserName+"对该文件的修改无法保存！\n            ",okText:"确定",okType:"danger",cancelText:"取消",onOk:function(){var e={fileId:t.id,type:Z.j.STREAM_TASK,lockVersion:r.version};Q.a.unlockFile(e).then(function(e){if(1===e.code){var n=e.data;n.getLock?S.a.success("文件解锁成功！"):G.a.error({title:"解锁失败",content:"文件正在被"+n.lastKeepLockUserName+"编辑中!开始编辑时间\n                                "+V.a.formatDateTime(n.gmtModified)+"."});var r={id:t.id};Q.a.getTask(r).then(function(e){if(1===e.code){var n=e.data;n.merged=!0;var r={id:t.id,readWriteLockVO:n.readWriteLockVO};a(q.x(n)),a(Object(W.f)(r))}})}})},onCancel:function(){}})},n.handleCustomParamsChange=function(e){var t=n.props,a=t.currentPage,r=t.dispatch,o=g()(a,e);r(q.x(o))},n.tableParamsChange=function(){n.props.editorChange()},r=a,k()(n,r)}return U()(t,e),L()(t,[{key:"componentWillReceiveProps",value:function(e){e.currentPage!=this.props.currentPage&&(this._syncEditor=!0)}},{key:"renderLock",value:function(e){return e.readWriteLockVO&&!e.readWriteLockVO.getLock?j.a.createElement("div",{className:"lock-layer"},j.a.createElement(ce.a,{style:{position:"absolute",top:"10px",left:"35%",zIndex:"999"},showIcon:!0,message:j.a.createElement("span",null,"当前文件为只读状态！",j.a.createElement("a",{onClick:this.unLock},"解锁")),type:"warning"})):null}},{key:"closeAllorOthers",value:function(e){var t=e.key,a=this.props,n=a.pages,r=a.currentPage,o=a.dispatch;if("ALL"===t){var i=!0,s=!0,c=!1,l=void 0;try{for(var u,p=ie()(n);!(s=(u=p.next()).done);s=!0){if(u.value.notSynced){i=!1;break}}}catch(e){c=!0,l=e}finally{try{!s&&p.return&&p.return()}finally{if(c)throw l}}i?(o(q.a()),o(q.c()),o(q.d()),o(q.b())):ht({title:"部分任务修改尚未同步到服务器，是否强制关闭 ?",content:"强制关闭将丢弃所有修改数据",onOk:function(){o(q.a()),o(q.c()),o(q.d()),o(q.b())},onCancel:function(){}})}else{var d=!0,m=!0,E=!1,f=void 0;try{for(var T,h=ie()(n);!(m=(T=h.next()).done);m=!0){var _=T.value;if(_.notSynced&&_.id!==r.id){d=!1;break}}}catch(e){E=!0,f=e}finally{try{!m&&h.return&&h.return()}finally{if(E)throw f}}d?(o(q.k(r)),o(q.i(r.id)),o(q.j(r.id)),o(q.h(r.id))):ht({title:"部分任务修改尚未同步到服务器，是否强制关闭 ?",content:"强制关闭将丢弃这些修改数据",onOk:function(){o(q.k(r)),o(q.i(r.id)),o(q.j(r.id)),o(q.h(r.id))},onCancel:function(){}})}}},{key:"editorParamsChange",value:function(e){var t;this._syncEditor?(this._syncEditor=!1,(t=this.props).editorParamsChange.apply(t,arguments)):this.props.editorChange(e)}},{key:"render",value:function(){var e=this,t=this.props,a=t.currentPage,n=t.pages,r=t.router;t.editorFocus,t.editorFocusOut;0===n.length&&r.push("/realtime");var o=this.mapPanels(n);return j.a.createElement(c.a,{className:"task-browser"},j.a.createElement("div",{className:"browser-content"},j.a.createElement(ue.a,{hideAdd:!0,onTabClick:this.onChange,activeKey:""+a.id,type:"editable-card",className:"browser-tabs",onEdit:this.onEdit,tabBarExtraContent:j.a.createElement(ee.a,{overlay:j.a.createElement(re.a,{style:{marginRight:2},onClick:this.closeAllorOthers.bind(this)},j.a.createElement(re.a.Item,{key:"OHTERS"},"关闭其他"),j.a.createElement(re.a.Item,{key:"ALL"},"关闭所有"))},j.a.createElement(ae.a,{type:"bars",style:{margin:"10 0 0 0"}}))},o),this.renderLock(a),j.a.createElement(Se,this.props),j.a.createElement("div",{className:"m-siderbench bd-left",ref:function(t){e.SideBench=t}},j.a.createElement(ue.a,{activeKey:this.state.selected,type:"card",className:"task-params",tabPosition:"right",onTabClick:this.tabClick},j.a.createElement(Tt,{tab:j.a.createElement("span",{className:"title-vertical"},"任务详情"),key:"params1"},j.a.createElement(ke,this.props)),0===a.taskType?j.a.createElement(Tt,{tab:j.a.createElement("span",{className:"title-vertical tabpanel-content"},"源表"),key:"params3"},j.a.createElement($e,T()({},this.props,{tableParamsChange:this.tableParamsChange}))):"",0===a.taskType?j.a.createElement(Tt,{tab:j.a.createElement("span",{style:{marginTop:10},className:"title-vertical tabpanel-content"},"结果表"),key:"params4"},j.a.createElement(st,T()({},this.props,{tableParamsChange:this.tableParamsChange}))):"",0===a.taskType?j.a.createElement(Tt,{tab:j.a.createElement("span",{className:"title-vertical tabpanel-content"},"维表"),key:"params5"},j.a.createElement(ft,T()({},this.props,{tableParamsChange:this.tableParamsChange}))):"",j.a.createElement(Tt,{tab:j.a.createElement("span",{className:"title-vertical"},"环境参数"),key:"params2"},j.a.createElement(de.a,{key:"params-editor",sync:this._syncEditor,value:a.taskParams,onChange:this.editorParamsChange.bind(this),language:"ini"}))))))}}]),t}(w.Component),At=G.a.confirm,gt=F.a.Item,bt=function(e){function t(){var e,a,n,r;I()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=k()(this,(e=t.__proto__||R()(t)).call.apply(e,[this].concat(i))),n.state={publishDesc:"",showPublish:!1},n.saveTask=function(){for(var e=n.props,t=e.currentPage,a=e.dispatch,r=e.inputData,o=e.outputData,i=e.dimensionData,s=r[t.id]||{},c=s.checkFormParams,l=void 0===c?[]:c,u=s.panelColumn,p=void 0===u?[]:u,d=o[t.id]||{},m=d.checkFormParams,E=void 0===m?[]:m,f=d.panelColumn,T=void 0===f?[]:f,h=i[t.id]||{},_=h.checkFormParams,A=void 0===_?[]:_,g=h.panelColumn,b=void 0===g?[]:g,v=0,C=l.length;v<C;v++){var R=l[v].checkParams();if(!R.status)return S.a.error("源表--输入源"+(l[v].props.index+1)+": "+(R.message||"您还有未填选项"))}if(E.length>0)for(var O=0,I=E.length;O<I;O++){var D=E[O].checkParams();if(!D.status)return S.a.error("结果表--输出源"+(E[O].props.index+1)+": "+(D.message||"您还有未填选项"))}if(A.length>0)for(var L=0,P=A.length;L<P;L++){var k=A[L].checkParams();if(!k.status)return S.a.error("维表--维表"+(A[L].props.index+1)+": "+(k.message||"您还有未填选项"))}var N=t.resourceList;N&&N.length>0&&(t.resourceIdList=N.map(function(e){return e.id})),p.length>0&&(t.source=p),T.length>0&&(t.sink=T),b.length>0&&(t.side=b),t.lockVersion=t.readWriteLockVO.version,Q.a.saveTask(t).then(function(e){var n=function(e){S.a.success("任务保存成功"),e.notSynced=!1,a(q.x(e)),t.taskType===Z.v.MR&&a(W.a({id:e.parentId,catalogueType:Z.k.TASK}))};if(1===e.code){var r=e.data.readWriteLockVO,o=r.result;0===o?n(e.data):1===o?At({title:"锁定提醒",content:j.a.createElement("span",null,"文件正在被",r.lastKeepLockUserName,"编辑中，开始编辑时间为",V.a.formatDateTime(r.gmtModified),"。 强制保存可能导致",r.lastKeepLockUserName,"对文件的修改无法正常保存！"),okText:"确定保存",okType:"danger",cancelText:"取消",onOk:function(){Q.a.forceUpdateTask(t).then(function(e){1===e.code&&n(e.data)})}}):2===o&&At({title:"保存警告",content:j.a.createElement("span",null,"文件已经被",r.lastKeepLockUserName,"编辑过，编辑时间为",V.a.formatDateTime(r.gmtModified),"。 点击确认按钮会",j.a.createElement(y.a,{color:"orange"},"覆盖"),"您本地的代码，请您提前做好备份！"),okText:"确定覆盖",okType:"danger",cancelText:"取消",onOk:function(){var e={id:t.id,lockVersion:r.version};Q.a.getTask(e).then(function(e){if(1===e.code){var t=e.data;t.merged=!0,n(t)}})}})}})},n.editorChange=function(e){var t=n.props,a=t.currentPage,r=t.dispatch;a=Object(Y.cloneDeep)(a),(a=g()(a,e)).notSynced=!0,r(q.x(a))},n.debounceChange=Object(Y.debounce)(n.editorChange,300,{maxWait:2e3}),n.editorParamsChange=function(e,t){var a=n.props,r=a.currentPage,o=a.dispatch;e!==t&&(r.taskParams=t,o(q.x(r)))},n.startTask=function(){var e=n.props,t=e.currentPage,a=e.dispatch;Q.a.startTask({id:t.id,isRestoration:0}).then(function(e){1===e.code&&(t.status=10,a(q.x(g()({},t))),S.a.success("任务已经成功提交！"))})},n.loadTreeData=function(e){var t=n.props.dispatch,a=e.props.data;return new _.a(function(e){t(W.a(a)),e()})},n.closePublish=function(){n.setState({publishDesc:"",showPublish:!1})},n.publishChange=function(e){n.setState({publishDesc:e.target.value})},n.renderPublish=function(){var e=n.props.user,t=n.state.publishDesc;return j.a.createElement(G.a,{wrapClassName:"vertical-center-modal",title:"发布任务",style:{height:"600px",width:"600px"},visible:n.state.showPublish,onCancel:n.closePublish,onOk:n.submitTab.bind(n),cancelText:"关闭"},j.a.createElement(F.a,null,j.a.createElement(gt,T()({},Z.y,{label:"发布人",hasFeedback:!0}),j.a.createElement("span",null,e.userName)),j.a.createElement(gt,T()({},Z.y,{label:j.a.createElement("span",{className:"ant-form-item-required"},"备注"),hasFeedback:!0}),j.a.createElement(E.a,{type:"textarea",value:t,name:"publishDesc",rows:4,onChange:n.publishChange}))))},r=a,k()(n,r)}return U()(t,e),L()(t,[{key:"componentDidMount",value:function(){}},{key:"autoSaveTask",value:function(){var e=this;this.timerID=setInterval(function(){if("edit"===e.state.editorState){var t=e.props.currentPage;Q.a.saveTask(t).then(function(e){1===e.code&&S.a.success("任务已自动保存")})}},3e4)}},{key:"submitTab",value:function(){var e=this,t=this.props,a=t.currentPage,n=t.dispatch,r=this.state.publishDesc,o=Object(Y.cloneDeep)(a);return r?r.length>200?(S.a.error("备注信息不可超过200个字符！"),!1):(o.publishDesc=r,o.preSave=!0,o.submitStatus=1,void q.w(o).then(function(t){e.closePublish(),t&&(S.a.success("发布成功！"),Q.a.getTask({id:a.id}).then(function(e){if(1===e.code){var t=e.data;t.merged=!0,t.notSynced=!1,n(q.x(t))}}))})):(S.a.error("发布备注不可为空！"),!1)}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,n=t.currentPage,r=n.notSynced;return j.a.createElement(c.a,{className:"task-editor"},j.a.createElement("header",{className:"toolbar bd-bottom clear"},j.a.createElement(u.a,{className:"left"},j.a.createElement(d.a,{onClick:function(){a(z.a(X.b.ADD_TASK_VISIBLE))},title:"创建任务"},j.a.createElement(J.a,{className:"my-icon",type:"focus"})," 新建任务"),j.a.createElement(d.a,{disabled:n.invalid,onClick:this.saveTask,title:"保存任务"},j.a.createElement(J.a,{className:"my-icon",type:"save"}),"保存"),j.a.createElement(H.a,null)),j.a.createElement(u.a,{className:"right"},j.a.createElement(d.a,{disabled:r,onClick:function(){e.setState({showPublish:!0})}},j.a.createElement(J.a,{className:"my-icon",type:"fly"})," 发布"),j.a.createElement(K.c,{to:"/operation/realtime?tname="+n.name},j.a.createElement(d.a,null,j.a.createElement(J.a,{className:"my-icon",type:"goin"})," 运维")))),j.a.createElement(_t,T()({},this.props,{ayncTree:this.loadTreeData,editorParamsChange:this.editorParamsChange,editorChange:this.debounceChange})),this.renderPublish())}}]),t}(w.Component);t.default=Object(B.b)(function(e){var t=e.realtimeTask,a=t.resources,n=t.pages,r=t.currentPage,o=t.inputData,i=t.outputData,s=t.dimensionData;return{currentPage:r,pages:n,resources:a,user:e.user,inputData:o,outputData:i,dimensionData:s}})(bt)},UopC:function(e,t,a){"use strict";var n,r=a("QbLZ"),o=a.n(r),i=(a("FGdI"),a("Pbn2")),s=a.n(i),c=a("Yz+Y"),l=a.n(c),u=a("iCc5"),p=a.n(u),d=a("V7oC"),m=a.n(d),E=a("FYw3"),f=a.n(E),T=a("mRg0"),h=a.n(T),_=a("sbe7"),A=a.n(_),g=a("/MKj"),b=a("dtw8"),y=a("s9ml"),v=a("pLPX"),S=Object(g.b)(function(e){return{user:e.user,apps:e.apps,routing:e.routing}})(n=function(e){function t(){return p()(this,t),f()(this,(t.__proto__||l()(t)).apply(this,arguments))}return h()(t,e),m()(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=(e.user,e.apps),a=e.children,n=A.a.createElement(b.c,{to:"/admin/user"},A.a.createElement(v.b,null,A.a.createElement(s.a,{type:"setting"})),A.a.createElement(v.d,null,"系统管理")),r=a?A.a.cloneElement(a,{apps:t}):A.a.createElement(y.a,null);return A.a.createElement("div",{className:"message"},A.a.createElement(v.c,o()({logo:n,menuItems:[{id:"admin/user",name:"用户管理",link:"/admin/user",enable:!0},{id:"admin/role",name:"角色管理",link:"/admin/role",enable:!0}]},this.props)),A.a.createElement("div",{className:"container"},r))}}]),t}(_.Component))||n;t.a=S},W95b:function(e,t,a){"use strict";var n=a("gDS+"),r=a.n(n),o=a("iCc5"),i=a.n(o),s=a("V7oC"),c=a.n(s),l=(a("bZMm"),a("wFDc")),u=a("5012"),p=(a("pjuD"),a("rR1Q")),d=a.n(p),m=a("4d7F"),E=a.n(m),f=(a("tL+A"),a("QpBz")),T=a.n(f),h=(a("dtw8"),a("7Qib"),a("OZjc"),a("TCqc"));function _(e){switch(e.status){case 402:case 200:return e;case 302:T.a.info("登录超时, 请重新登录！");default:return e}}function A(e){switch(e.code){case 1:return e;case 0:return h.a.openLogin(),E.a.reject(e);case 3:return d.a.error({message:"权限通知",description:e.message}),E.a.reject(e);case 16:hashHistory.push("/");default:return e.message&&d.a.error({message:"错误",description:e.message}),e}}var g=function(){function e(){i()(this,e)}return c()(e,[{key:"get",value:function(e,t){var a=t?this.build(e,t):e;return this.request(a,{method:"GET"})}},{key:"post",value:function(e,t){var a={method:"POST"};return t&&(a.body=r()(t)),this.request(e,a)}},{key:"postAsFormData",value:function(e,t){var a={method:"POST"};return t&&(a.body=this.buildFormData(t)),this.request(e,a)}},{key:"postForm",value:function(e,t){var a={method:"POST"};return t&&(a.body=new FormData(t)),this.request(e,a)}},{key:"request",value:function(e,t){return l.a.show(),t.credentials="same-origin",fetch(e,t).then(_).then(function(e){return setTimeout(function(){l.a.hide()},300),e.json()}).then(A).catch(function(e){return l.a.hide(),Object(u.h)("请求异常","服务器可能出了点问题, 请稍后再试！"),e})}},{key:"defaultHeader",value:function(){return{Accept:"*/*","Content-Type":"application/json"}}},{key:"build",value:function(e,t){var a=[];if(t)for(var n in t)n&&a.push(n+"="+encodeURIComponent(t[n]));return e+"?"+a.join("&")}},{key:"buildFormData",value:function(e){if(e){var t=new FormData;for(var a in e)a&&t.append(a,e[a]);return t}}}]),e}();t.a=new g},W9Sf:function(e,t,a){"use strict";a.d(t,"d",function(){return u}),a.d(t,"a",function(){return p}),a.d(t,"e",function(){return d}),a.d(t,"b",function(){return m}),a.d(t,"f",function(){return E}),a.d(t,"c",function(){return f});var n=a("GQeE"),r=a.n(n),o=a("LvDl"),i=a("sVOr"),s=a("5012"),c=a("5Gkw"),l={isGetFile:!0,nodePid:0};function u(e){return function(t){return t(p({id:e.parentId,catalogueType:e.catalogueType})),t({type:c.d.REMOVE_REALTIME_TREE_NODE,data:e})}}function p(e){var t={nodePid:e.id,catalogueType:e.catalogueType}||l;return t.isGetFile=!0,function(e){i.a.getCatalogues(t).then(function(t){var a=t.data;return e({type:c.d.GET_REALTIME_TREE,data:a})})}}function d(e){return{type:c.d.REMOVE_REALTIME_TREE_NODE,data:e}}function m(e){return{type:c.d.MERGE_REALTIME_TREE,data:e}}function E(e){return{type:c.d.UPDATE_REALTIME_TREE_NODE,data:e}}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case c.d.GET_REALTIME_TREE:if(0===r()(e).length)return t.data;var a=Object(o.cloneDeep)(e);return t.data&&Object(s.f)(a,t.data),a;case c.d.UPDATE_REALTIME_TREE_NODE:var n=Object(o.cloneDeep)(e);return Object(s.f)(n,t.data),n;case c.d.MERGE_REALTIME_TREE:var i=Object(o.cloneDeep)(e);return Object(s.d)(i,t.data),i;case c.d.UPDATE_REALTIME_TREE:return Object(o.assign)({},t.data);case c.d.REMOVE_REALTIME_TREE_NODE:var l=[Object(o.cloneDeep)(e)];return t.data&&Object(s.e)(l,t.data),l[0];default:return e}}},X9CO:function(e,t,a){"use strict";a("fwXI");var n,r=a("CC+v"),o=a.n(r),i=a("FyfS"),s=a.n(i),c=(a("mN36"),a("N9UN")),l=a.n(c),u=(a("zmYW"),a("DtFj")),p=a.n(u),d=(a("MaXC"),a("4IMT")),m=a.n(d),E=(a("eOfH"),a("h0/l")),f=a.n(E),T=(a("tL+A"),a("QpBz")),h=a.n(T),_=a("QbLZ"),A=a.n(_),g=a("Yz+Y"),b=a.n(g),y=a("iCc5"),v=a.n(y),S=a("V7oC"),C=a.n(S),R=a("FYw3"),O=a.n(R),I=a("mRg0"),D=a.n(I),L=(a("cUip"),a("iJl9")),P=a.n(L),k=(a("ek7I"),a("FAat")),N=a.n(k),U=a("sbe7"),M=a.n(U),F=a("LvDl"),x=a("/MKj"),G=a("7Qib"),w=a("5012"),j=a("wPMF"),B=a("1I4j"),K=a("E7pB"),Y=(a("pJsf"),a("g4D/")),V=a.n(Y),H=(a("nTym"),a("qu0K")),Q=a.n(H),J=Q.a.Item,z=N.a.Option,q=V.a.Group,W=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};switch(e){case j.b.RDOS:return a.isTenantAdmin||n.isProjectOwner?t===j.c.PROJECT_OWNER||t===j.c.TENANT_OWVER:!n.isProjectAdmin||(t===j.c.PROJECT_OWNER||t===j.c.TENANT_OWVER||t===j.c.PROJECT_ADMIN);case j.b.API:case j.b.LABEL:case j.b.DATA_QUALITY:return a.isTenantAdmin?t===j.a.TENANT_OWVER:!n.isProjectAdmin||(t===j.a.TENANT_OWVER||t===j.a.ADMIN);default:return!1}},X=function(e){function t(){var e,a,n,r;v()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=O()(this,(e=t.__proto__||b()(t)).call.apply(e,[this].concat(i))),n.debounceSearch=Object(F.debounce)(n.props.onSearchUsers,300,{maxWait:2e3}),r=a,O()(n,r)}return D()(t,e),C()(t,[{key:"render",value:function(){var e=this.props,t=e.roles,a=e.form,n=e.notProjectUsers,r=e.app,o=e.user,i=e.myRoles,s=a.getFieldDecorator,c=n&&n.map(function(e){return M.a.createElement(z,{key:e.userId,value:""+e.userId,name:e.userName,optionFilterProp:"name"},e.userName)}),l=[],u=[];return t&&t.forEach(function(e){var t=W(r,e.roleValue,o,i);e.roleValue==j.a.VISITOR&&j.b.RDOS!=r?u.push(e.id):e.roleValue==j.c.VISITOR&&j.b.RDOS==r&&u.push(e.id),l.push({label:e.roleName,value:e.id,disabled:t})}),M.a.createElement(Q.a,null,M.a.createElement(J,A()({},j.d,{label:"请选择用户",hasFeedback:!0}),s("targetUserIds",{rules:[{required:!0,message:"用户不可为空！"}]})(M.a.createElement(N.a,{mode:"multiple",showSearch:!0,showArrow:!0,style:{width:"100%"},notFoundContent:"当前用户不存在",placeholder:"请搜索并选择用户",optionFilterProp:"name",onSearch:this.debounceSearch},c))),M.a.createElement(J,A()({},j.d,{label:"角色设置"}),s("roleIds",{rules:[],initialValue:u})(M.a.createElement(q,{options:l,onChange:this.roleChange}))))}}]),t}(U.Component),Z=Q.a.create()(X),$=Q.a.Item,ee=V.a.Group,te={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},ae=function(e){function t(){var e,a,n,r;v()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=O()(this,(e=t.__proto__||b()(t)).call.apply(e,[this].concat(i))),n.setFields=function(e){var t=e&&e.roles?e.roles.map(function(e){return e.id}):[];n.props.form.setFieldsValue({roleIds:t})},r=a,O()(n,r)}return D()(t,e),C()(t,[{key:"componentDidMount",value:function(){this.setFields(this.props.user)}},{key:"componentWillReceiveProps",value:function(e){this.props.user!==e.user&&this.setFields(e.user)}},{key:"render",value:function(){var e=this.props,t=e.roles,a=e.form,n=e.app,r=e.loginUser,o=e.myRoles,i=a.getFieldDecorator,s=[];return t&&t.forEach(function(e){var t=W(n,e.roleValue,r,o);s.push({label:e.roleName,value:e.id,disabled:t})}),M.a.createElement(Q.a,null,M.a.createElement($,A()({},te,{label:"请选择用户角色"}),i("roleIds",{rules:[],initialValue:[]})(M.a.createElement(ee,{options:s}))))}}]),t}(U.Component),ne=Q.a.create()(ae),re=N.a.Option,oe=P.a.Search,ie=Object(x.b)(function(e){return{user:e.user}})(n=function(e){function t(){var e,a,n,r;v()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=O()(this,(e=t.__proto__||b()(t)).call.apply(e,[this].concat(i))),n.state={active:"",loading:"success",users:{data:[]},projects:[],selectedProject:null,notProjectUsers:[],roles:[],editTarget:"",currentPage:1,visible:!1,visibleEditRole:!1,searchName:void 0},n.loadData=function(){var e=n.state,t=e.active,a=e.selectedProject,r=e.currentPage,o=e.projects,i={pageSize:10,currentPage:r};0===o.length&&Object(w.c)(t)?n.getProjects(t):0!==o.length||Object(w.c)(app)?(i.projectId=a,n.loadUsers(t,i),n.loadRoles(t,Object(F.assign)(i,{currentPage:1}))):(n.loadUsers(t,i),n.loadRoles(t,Object(F.assign)(i,{currentPage:1}))),n.getOwnRole(t,i)},n.loadUsers=function(e,t){var a=n.state.searchName,r=n;n.setState({loading:!0});var o=A()({},t);o.name=a,B.a.queryUser(e,o).then(function(e){r.setState({users:e.data,loading:!1})})},n.loadRoles=function(e,t){var a=n;B.a.queryRole(e,t).then(function(e){a.setState({roles:e.data&&e.data.data})})},n.getProjects=function(e){var t=n;B.a.getProjects(e).then(function(e){if(1===e.code){t.setState({projects:e.data});var a=G.a.getCookie("project_id")||e.data[0].id;n.setState({selectedProject:a},n.loadData)}})},n.loadUsersNotInProject=function(e){var t=n.state,a=t.active,r=t.selectedProject,o={userName:e};Object(w.c)(a)&&(o.projectId=r),B.a.loadUsersNotInProject(a,o).then(function(e){n.setState({notProjectUsers:e.data})})},n.addMember=function(){for(var e=n,t=n.state,a=t.active,r=t.selectedProject,o=t.notProjectUsers,i=n.memberForm.props.form,s=i.getFieldsValue(),c=[],l=s.targetUserIds,u=function(e){var t=o.find(function(t){return""+t.userId===l[e]});t&&c.push(t)},p=0;p<l.length;p++)u(p);s.targetUsers=c,i.validateFields(function(t){t||(Object(w.c)(a)&&(s.projectId=r),B.a.addRoleUser(a,s).then(function(t){1===t.code&&(e.setState({visible:!1},function(){i.resetFields()}),e.loadData(),h.a.success("添加成员成功!"))}))})},n.removeUserFromProject=function(e){var t=n,a=n.state,r=a.active,o=a.selectedProject,i={targetUserId:e.userId};Object(w.c)(r)&&(i.projectId=o),B.a.removeProjectUser(r,i).then(function(e){1===e.code&&(t.loadData(),h.a.success("移出项目成员成功!"))})},n.updateMemberRole=function(e){var t=n,a=n.state,r=a.editTarget,o=a.active,i=a.selectedProject,s=t.eidtRoleForm.props.form.getFieldsValue();if(0!==s.roleIds.length){var c={targetUserId:r.userId,roleIds:s.roleIds};Object(w.c)(o)&&(c.projectId=i),B.a.updateUserRole(o,c).then(function(e){1===e.code&&(h.a.success("设置成功！"),t.setState({visibleEditRole:!1}),t.loadData())})}else h.a.error("用户角色不可为空！")},n.onRoleIdsChange=function(e){n.setState({roleIds:e})},n.onCancel=function(){n.setState({visible:!1,visibleEditRole:!1,editTarget:"",notProjectUsers:[]},function(){n.eidtRoleForm&&n.eidtRoleForm.props.form.resetFields(),n.memberForm&&n.memberForm.props.form.resetFields()})},n.handleTableChange=function(e){n.setState({currentPage:e.current},n.loadData)},n.onPaneChange=function(e){n.setState({active:e,currentPage:1,roleIds:[],notProjectUsers:[],searchName:void 0},n.loadData)},n.onProjectSelect=function(e){n.setState({selectedProject:e,currentPage:1},n.loadData)},n.initAddMember=function(){n.props.params;n.loadUsersNotInProject(),n.setState({visible:!0})},n.initColums=function(){var e=n,t=n.state.active!==j.b.RDOS;return[{title:"账号",dataIndex:"user.userName",key:"account",render:function(t,a){return M.a.createElement("a",{onClick:function(){e.setState({visibleEditRole:!0,editTarget:a})}},t)}},{title:"邮箱",dataIndex:"user.email",key:"email"},{title:"手机号",dataIndex:"user.phoneNumber",key:"phoneNumber"},{title:"角色",width:120,dataIndex:"roles",key:"roles",render:function(e){return e.map(function(e){return e&&e.roleName}).join(",")}},{title:"加入时间",dataIndex:"gmtCreate",key:"gmtCreate",render:function(e){return G.a.formatDateTime(e)}},{title:"操作",dataIndex:"id",width:135,key:"id",render:function(a,n){return M.a.createElement("span",null,M.a.createElement("a",{onClick:function(){e.setState({visibleEditRole:!0,editTarget:n})}},"编辑角色"),t?"":M.a.createElement("span",null,M.a.createElement("span",{className:"ant-divider"}),M.a.createElement(f.a,{title:"确认将该成员从项目中移除？",okText:"确定",cancelText:"取消",onConfirm:function(){e.removeUserFromProject(n)}},M.a.createElement("a",null,"移出项目"))))}}]},n.searchProjectUser=function(e){n.setState({searchName:e},n.loadData)},n.searchNameChange=function(e){n.setState({searchName:e.target.value})},n.renderTitle=function(){var e=n.state,t=e.projects,a=e.active,r=e.selectedProject,o=e.searchName,i=t&&t.map(function(e){return M.a.createElement(re,{value:""+e.id,key:""+e.id},e.projectAlias)});return M.a.createElement("span",null,Object(w.c)(a)&&M.a.createElement("span",null,"选择项目：",M.a.createElement(N.a,{showSearch:!0,value:""+r,style:{width:200,marginRight:10},placeholder:"按项目名称搜索",optionFilterProp:"name",onSelect:n.onProjectSelect},i)),M.a.createElement(oe,{placeholder:"请输入要搜索的账号",value:o,onChange:function(e){return n.searchNameChange(e)},style:{width:200,marginTop:10},onSearch:function(e){return n.searchProjectUser(e)}}))},n.renderPane=function(){n.props.apps;var e=n.state,t=e.users,a=e.loading,r=(e.active,M.a.createElement(m.a,{style:{marginTop:"10px"},type:"primary",onClick:n.initAddMember},"添加用户")),o={total:t.totalCount,defaultPageSize:10,current:t.currentPage};return M.a.createElement(l.a,{bordered:!1,noHovering:!0,title:n.renderTitle(),extra:r},M.a.createElement(p.a,{rowKey:"userId",className:"m-table",columns:n.initColums(),onChange:n.handleTableChange,loading:"loading"===a,pagination:o,dataSource:t.data||[]}))},r=a,O()(n,r)}return D()(t,e),C()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.apps;if(t&&t.length>0){var a=G.a.getParameterByName("app"),n=t.find(function(e){return e.default}),r=a||n.id;this.setState({active:r},function(){e.loadData()})}}},{key:"getOwnRole",value:function(e,t){var a=this,n=A()({},t,{currentPage:1,pageSize:1,name:this.props.user.userName});B.a.queryUser(e,n).then(function(t){var n=t.data&&t.data.data[0].roles,r=!1,o=!1,i=!1,c=!0,l=!1,u=void 0;try{for(var p,d=s()(n);!(c=(p=d.next()).done);c=!0){var m=p.value.roleValue;switch(e){case j.b.RDOS:m==j.c.VISITOR?r=!0:m==j.c.PROJECT_ADMIN?o=!0:m==j.c.PROJECT_OWNER&&(i=!0);case j.b.API:case j.b.LABEL:case j.b.DATA_QUALITY:m==j.a.VISITOR?r=!0:m==j.a.ADMIN&&(o=!0)}}}catch(e){l=!0,u=e}finally{try{!c&&d.return&&d.return()}finally{if(l)throw u}}a.setState({myRoles:{isVisitor:r,isProjectAdmin:o,isProjectOwner:i}})})}},{key:"render",value:function(){var e=this,t=this.props,a=t.apps,n=t.user,r=this.state,i=r.visible,s=r.roles,c=r.notProjectUsers,l=r.visibleEditRole,u=r.editTarget,p=r.active,d=r.myRoles,m=this.renderPane();return M.a.createElement("div",{className:"user-admin"},M.a.createElement("h1",{className:"box-title"},"用户管理"),M.a.createElement("div",{className:"box-2 m-card",style:{height:"785px"}},M.a.createElement(K.a,{apps:a,activeKey:p,content:m,onPaneChange:this.onPaneChange})),M.a.createElement(o.a,{title:"添加用户",wrapClassName:"vertical-center-modal",visible:i,onOk:this.addMember,onCancel:this.onCancel},M.a.createElement(Z,{myRoles:d,wrappedComponentRef:function(t){e.memberForm=t},roles:s,app:p,user:n,onSearchUsers:this.loadUsersNotInProject,notProjectUsers:c})),M.a.createElement(o.a,{title:"设置用户角色",wrapClassName:"vertical-center-modal",visible:l,onOk:this.updateMemberRole,onCancel:this.onCancel,width:Math.min(1e3,Math.max(520,400+(s?60*s.length:0)))+"px"},M.a.createElement(ne,{myRoles:d,user:u,app:p,roles:s,loginUser:n,wrappedComponentRef:function(t){e.eidtRoleForm=t}})))}}]),t}(U.Component))||n;t.a=ie},XLg0:function(e,t,a){"use strict";var n,r=a("Yz+Y"),o=a.n(r),i=a("iCc5"),s=a.n(i),c=a("V7oC"),l=a.n(c),u=a("FYw3"),p=a.n(u),d=a("mRg0"),m=a.n(d),E=a("sbe7"),f=a.n(E),T=a("17x9"),h=a.n(T),_=a("/MKj"),A=(a("7Qib"),a("s9ml")),g=a("HmMx"),b=a("CMun"),y=a("1I4j"),v={children:h.a.node},S=Object(_.b)(function(e){return{user:e.user}})(n=function(e){function t(){return s()(this,t),p()(this,(t.__proto__||o()(t)).apply(this,arguments))}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){var e=this.props.user,t=Object(g.a)();this.props.dispatch(t),this.checkRoot(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.user;this.props.user.dtuicUserId!=t.dtuicUserId&&t.dtuicUserId&&this.checkRoot(t)}},{key:"checkRoot",value:function(e){var t=this;e&&e.dtuicUserId&&y.a.checkRoot({userId:e.dtuicUserId}).then(function(e){1==e.code?t.props.dispatch({type:b.a.UPDATE_USER,data:{isRoot:!0}}):t.props.dispatch({type:b.a.UPDATE_USER,data:{isRoot:!1}})}).catch(function(e){})}},{key:"render",value:function(){return this.props.children||f.a.createElement(A.a,null)}}]),t}(E.Component))||n;S.propTypes=v,S.defaultProps={children:[]},t.a=S},YIQC:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return o});var n=a("wPMF");function r(e){switch(e){case n.b.RDOS:return"开发套件";case n.b.DATA_QUALITY:return"数据质量";case n.b.API:return"API管理";case n.b.LABEL:return"标签管理";case n.b.DATA_MAP:return"数据地图";case n.b.META_DATA:return"元数据管理";default:return""}}function o(e,t){switch(e){case n.b.RDOS:return"-";case n.b.DATA_QUALITY:switch(t){case 1:return"监控任务运行失败";case 2:return"监控任务不通过";case 3:return"逐行校验任务取消";case 4:return"逐行校验任务失败";case 5:return"逐行校验任务成功";default:return"-"}case n.b.API:switch(t){case 0:return"通知管理员处理";case 1:return"申请API";case 2:return"申请通过";case 3:return"停用申请";case 4:return"创建API";case 5:return"禁用API";case 6:return"启用API";case 7:return"API出错";default:return"-"}case n.b.LABEL:switch(t){case 0:return"通知管理员处理";case 1:return"申请标签";case 2:return"申请通过";case 3:return"停用申请";case 4:return"创建标签";case 5:return"禁用标签";case 6:return"启用标签";case 7:return"标签出错";case 8:return"规则标签执行成功";case 9:return"规则标签执行失败";default:return"-"}default:return""}}},bAm3:function(e,t,a){"use strict";a("MaXC");var n=a("4IMT"),r=a.n(n),o=a("QbLZ"),i=a.n(o),s=a("Yz+Y"),c=a.n(s),l=a("iCc5"),u=a.n(l),p=a("V7oC"),d=a.n(p),m=a("FYw3"),E=a.n(m),f=a("mRg0"),T=a.n(f),h=a("sbe7"),_=a.n(h),A=a("/gYX"),g=a("YEIV"),b=a.n(g),y=a("P2sY"),v=a.n(y),S=function(e){function t(e){u()(this,t);var a=E()(this,(t.__proto__||c()(t)).call(this,e));return a.bindEvent=function(e){var t=a.props,n=t.onTrigger,r=t.keyMap,o=e.keyCode,i="keydown"===e.type;if(i){if(!0===r[o]){var s=v()(a.state.currentKeys,b()({},o,i));a.setState({currentKeys:s});var c=!0;for(var l in r)if(!s[l]){c=!1;break}c&&n(e)}}else a.setState({currentKeys:{}})},a.state={currentKeys:{}},a}return T()(t,e),d()(t,[{key:"componentDidMount",value:function(){addEventListener("keydown",this.bindEvent,!1),addEventListener("keyup",this.bindEvent,!1)}},{key:"componentWillUnmount",value:function(){removeEventListener("keydown",this.bindEvent,!1),removeEventListener("keyup",this.bindEvent,!1),this.setState({currentKeys:{}})}},{key:"render",value:function(){return this.props.children}}]),t}(_.a.Component);a.d(t,"a",function(){return C});var C=function(e){function t(){var e,a,n,r;u()(this,t);for(var o=arguments.length,i=Array(o),s=0;s<o;s++)i[s]=arguments[s];return a=n=E()(this,(e=t.__proto__||c()(t)).call.apply(e,[this].concat(i))),n.state={isFullScreen:!1},n.keyPressFullScreen=function(e){e.preventDefault(),n.fullScreen()},n.fullScreen=function(){var e=n.props.target;if(n.state.isFullScreen)document.exitFullscreen?document.exitFullscreen():document.mozExitFullscreen?document.mozExitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen();else{var t=document.getElementById(e)||document.body;t.requestFullscreen?t.requestFullscreen():t.msRequestFullscreen?t.msRequestFUllscreen():t.mozRequestFullscreen?t.mozRequestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}n.setState({isFullScreen:!n.state.isFullScreen})},r=a,E()(n,r)}return T()(t,e),d()(t,[{key:"componentDidMount",value:function(){var e=this,t=document.body,a=function(a){var n=void 0;t.requestFullscreen?n=document.fullscreenElement:t.msRequestFullscreen?n=document.msFullscreenElement:t.mozRequestFullscreen?n=document.mozFullScreenElement:t.webkitRequestFullscreen&&(n=document.webkitFullscreenElement),e.setState({isFullScreen:!!n})};t.requestFullscreen?t.onfullscreenchange=a:t.msRequestFullscreen?t.onmsfullscreenchange=a:t.mozRequestFullscreen?t.onmozfullscreenchange=a:t.webkitRequestFullscreen&&(t.onwebkitfullscreenchange=a)}},{key:"componentWillUnmount",value:function(){var e=document.body;e.requestFullscreen?document.onfullscreenchange=null:e.msRequestFullscreen?document.onmsfullscreenchange=null:e.mozRequestFullscreen?document.onmozfullscreenchange=null:e.webkitRequestFullscreen&&(document.onwebkitfullscreenchange=null)}},{key:"render",value:function(){var e=this.state.isFullScreen?"退出全屏":"全屏",t=this.state.isFullScreen?"exit-fullscreen":"fullscreen";return _.a.createElement(S,{onTrigger:this.keyPressFullScreen,keyMap:{70:!0,91:!0,16:!0}},_.a.createElement(r.a,i()({},this.props,{onClick:this.fullScreen}),_.a.createElement(A.a,{className:"my-icon",type:t}),e))}}]),t}(h.Component)},btJW:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a("QbLZ"),r=a.n(n),o=a("P2sY"),i=a.n(o),s=a("sbe7"),c=a.n(s),l={width:"8px",height:"8px",display:"inline-block",borderRadius:"50% 50%",background:"#43576a"};function u(e){var t=i()(l,e.style);return c.a.createElement("div",r()({},e,{style:t}),e.children||"")}},"d+5I":function(e,t,a){"use strict";var n=a("zbcj"),r=a.n(n)()(["UPDATE_MSG"],{prefix:"message/"});t.a=r},dDU9:function(e,t,a){"use strict";a.d(t,"a",function(){return r}),a.d(t,"b",function(){return o});a("fvjX");var n=a("5Gkw"),r=function(e){return{type:n.b.UPDATE_MODAL_ACTION,data:e}},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1];switch(t.type){case n.b.UPDATE_MODAL_ACTION:return t.data;default:return e}}},dVc0:function(e,t,a){"use strict";a("mN36");var n=a("N9UN"),r=a.n(n),o=(a("zmYW"),a("DtFj")),i=a.n(o),s=(a("MaXC"),a("4IMT")),c=a.n(s),l=(a("tL+A"),a("QpBz")),u=a.n(l),p=a("Yz+Y"),d=a.n(p),m=a("iCc5"),E=a.n(m),f=a("V7oC"),T=a.n(f),h=a("FYw3"),_=a.n(h),A=a("mRg0"),g=a.n(A),b=(a("Z8Mf"),a("j7zX")),y=a.n(b),v=(a("ek7I"),a("FAat")),S=a.n(v),C=a("sbe7"),R=a.n(C),O=(a("17x9"),a("dtw8")),I=a("7Qib"),D=a("5012"),L=a("1I4j"),P=a("E7pB"),k=S.a.Option,N=(y.a.TabPane,function(e){function t(){var e,a,n,o;E()(this,t);for(var s=arguments.length,l=Array(s),p=0;p<s;p++)l[p]=arguments[p];return a=n=_()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(l))),n.state={active:"",data:"",projects:[],selectedProject:"",currentPage:1,loading:"success"},n.loadData=function(){n.setState({loading:"loading"});var e=n.state,t=e.active,a=e.selectedProject,r=t,o={pageSize:10,currentPage:e.currentPage};!a&&Object(D.c)(r)?n.getProjects(r):a||Object(D.c)(r)?(o.projectId=a,n.loadRoles(r,o)):n.loadRoles(r,o)},n.loadRoles=function(e,t){L.a.queryRole(e,t).then(function(e){n.setState({data:e.data}),n.setState({loading:"success"})})},n.getProjects=function(e){var t=n;L.a.getProjects(e).then(function(e){if(1===e.code){t.setState({projects:e.data});var a=e.data[0].id;n.setState({selectedProject:a},n.loadData)}})},n.removeRole=function(e){var t=n.state.active;L.a.deleteRole(t,{roleId:e.id}).then(function(e){1===e.code&&(u.a.success("移除角色成功！"),n.loadData())})},n.onPaneChange=function(e){n.setState({active:e,currentPage:1},function(){n.props.router.replace("/admin/role?app="+e),n.loadData()})},n.handleTableChange=function(e,t){n.setState({currentPage:e.current},n.loadData)},n.onProjectSelect=function(e){n.setState({selectedProject:e,currentPage:1},n.loadData)},n.initColums=function(){var e=n.state.active;n.removeRole;return[{title:"角色名称",dataIndex:"roleName",key:"roleName",render:function(t,a){return R.a.createElement(O.c,{to:"/admin/role/edit/"+a.id+"?app="+e},t)},width:"150px"},{title:"角色描述",dataIndex:"roleDesc",key:"roleDesc"},{title:"最近修改时间",dataIndex:"gmtModified",key:"gmtModified",render:function(e){return I.a.formatDateTime(e)}},{title:"最近修改人",dataIndex:"person",key:"person",width:120,render:function(e){return e||"-"}},{title:"操作",dataIndex:"id",key:"id",width:80,render:function(t,a){return R.a.createElement("span",null,R.a.createElement(O.c,{to:"/admin/role/edit/"+t+"?app="+e},"查看"))}}]},n.renderPane=function(){var e=n.state,t=e.data,a=e.loading,o=e.projects,s=e.active,l=e.selectedProject,u=o&&o.map(function(e){return R.a.createElement(k,{value:e.id,key:e.id},e.projectAlias)}),p=Object(D.c)(s)&&R.a.createElement("span",{style:{marginTop:"10px"}},"选择项目：",R.a.createElement(S.a,{showSearch:!0,value:l,style:{width:200},placeholder:"按项目名称搜索",optionFilterProp:"name",onSelect:n.onProjectSelect},u)),d=(R.a.createElement(c.a,{style:{marginTop:"10px"},type:"primary"},R.a.createElement(O.c,{to:"/admin/role/add?app="+s},"新建角色")),{total:t&&t.totalCount,defaultPageSize:10,current:t.currentPage});return R.a.createElement(r.a,{bordered:!1,noHovering:!0,title:p,extra:""},R.a.createElement(i.a,{rowKey:"id",className:"m-table",columns:n.initColums(),loading:"loading"===a,dataSource:t?t.data:[],pagination:d,onChange:n.handleTableChange}))},o=a,_()(n,o)}return g()(t,e),T()(t,[{key:"componentDidMount",value:function(){var e=this.props.apps;if(e&&e.length>0){var t=I.a.getParameterByName("app")||e[1].id;this.setState({active:t},this.loadData)}}},{key:"render",value:function(){var e=this.props.apps,t=this.renderPane();return R.a.createElement("div",{className:"user-admin"},R.a.createElement("h1",{className:"box-title"},"角色管理"),R.a.createElement("div",{className:"box-2 m-card",style:{height:"785px"}},R.a.createElement(P.a,{apps:e,activeKey:this.state.active,content:t,onPaneChange:this.onPaneChange})))}}]),t}(C.Component));t.a=N},djHj:function(e,t,a){"use strict";a.d(t,"c",function(){return n}),a.d(t,"d",function(){return r}),a.d(t,"j",function(){return o}),a.d(t,"o",function(){return i}),a.d(t,"p",function(){return s}),a.d(t,"a",function(){return c}),a.d(t,"k",function(){return l}),a.d(t,"l",function(){return u}),a.d(t,"n",function(){return p}),a.d(t,"r",function(){return d}),a.d(t,"v",function(){return m}),a.d(t,"i",function(){return E}),a.d(t,"m",function(){return f}),a.d(t,"e",function(){return T}),a.d(t,"f",function(){return h}),a.d(t,"q",function(){return _}),a.d(t,"h",function(){return A}),a.d(t,"u",function(){return g}),a.d(t,"t",function(){return b}),a.d(t,"z",function(){return y}),a.d(t,"G",function(){return v}),a.d(t,"K",function(){return S}),a.d(t,"J",function(){return C}),a.d(t,"C",function(){return R}),a.d(t,"D",function(){return O}),a.d(t,"B",function(){return I}),a.d(t,"b",function(){return D}),a.d(t,"g",function(){return L}),a.d(t,"s",function(){return P}),a.d(t,"x",function(){return k}),a.d(t,"E",function(){return N}),a.d(t,"I",function(){return U}),a.d(t,"y",function(){return M}),a.d(t,"H",function(){return F}),a.d(t,"A",function(){return x}),a.d(t,"F",function(){return G}),a.d(t,"w",function(){return w});var n={MYSQL:1,ORACLE:2,SQLSERVER:3,POSTGRESQL:4,HDFS:6,HIVE:7,HBASE:8,FTP:9,MAXCOMPUTE:10,ES:11,REDIS:12,MONGODB:13,KAFKA:14},r={1:"MySQL",2:"Oracle",3:"SQLServer",4:"PostgreSQL",6:"HDFS",7:"Hive",8:"HBase",9:"FTP",10:"MaxCompute",11:"ElasticSearch",12:"Redis",13:"MongoDB"},o={OFFLINE_TASK:"BATCH_TASK",OFFLINE_SCRIPT:"BATCH_SCRIPT",STREAM_TASK:"STREAM_TASK"},i={JAR:1,PY:2},s={NORMAL:1,STOPPED:2},c={TABLE:0,FUNCTION:1,SOURCE:2},l={TASK:"TaskManager",TASK_DEV:"TaskDevelop",SCRIPT:"ScriptManager",RESOURCE:"ResourceManager",FUNCTION:"FunctionManager",COSTOMFUC:"CustomFunction",SYSFUC:"SystemFunction",TABLE:"TableQuery"},u={PROJECT_OWNER:2,TENANT_OWVER:1,VISITOR:4},p=[n.MYSQL,n.ORACLE,n.SQLSERVER,n.POSTGRESQL],d=[n.MYSQL],m={VIRTUAL_NODE:-1,SQL:0,MR:1,SYNC:2,PYTHON:3,R:4,DEEP_LEARNING:5,PYTHON_23:6,SHELL:7,ML:8,HAHDOOPMR:9},E={TENSORFLOW:0,MXNET:1},f={PYTHON2:2,PYTHON3:3},T={GUIDE:0,SCRIPT:1},h={EDIT:1,RESOURCE:0},_={SQL:0,PYTHON2:1,PYTHON3:2,SHELL:3},A=(m.SQL,m.MR,m.SYNC,m.PYTHON,m.VIRTUAL_NODE,{DATA_SOURCE:"/public/rdos/helpSite/index.html#integration_datasource",DATA_SYNC:"/public/rdos/helpSite/index.html#Integration",TASKPARAMS:"/public/rdos/helpSite/index.html#deve_batch_schedule_param"}),g={ALL:null,WAIT_SUBMIT:0,CREATED:1,INVOKED:2,DEPLOYING:3,RUNNING:4,FINISHED:5,STOPING:6,STOPED:7,RUN_FAILED:8,SUBMIT_FAILED:9,SUBMITTING:10,RESTARTING:11,SET_SUCCESS:12,WAIT_RUN:16,WAIT_COMPUTE:17,FROZEN:18,PARENT_FAILD:21},b={LEVEL:1,SUBJECT:2,FREQUENCY:3,INCREMENT:4,CUSTOM:5},y=["STRING","VARCHAR","CHAR","TINYINT","SMALLINT","INT","BIGINT","FLOAT","DOUBLE","TIMESTAMP","DATE"],v=[{name:"层级",value:b.LEVEL},{name:"主题域",value:b.SUBJECT},{name:"增量",value:b.INCREMENT},{name:"刷新频率",value:b.FREQUENCY},{name:"自定义",value:b.CUSTOM}],S=[{text:"等待提交",value:0},{text:"提交中",value:10},{text:"等待运行",value:16},{text:"运行中",value:4},{text:"取消",value:7},{text:"失败",value:8}],C={ALL:null,UNSUBMIT:0,WAITING_RUN:16,FINISHED:5,RUNNING:4,CANCELED:7,FAILED:8,SUBMITTING:10,FROZEN:18},R=[{id:1,text:"等待提交",value:0},{id:2,text:"提交中",value:10},{id:3,text:"等待运行",value:16},{id:4,text:"运行中",value:4},{id:5,text:"成功",value:5},{id:6,text:"取消",value:7},{id:7,text:"失败",value:8},{id:8,text:"冻结",value:18}],O=[{id:0,text:"虚节点",value:m.VIRTUAL_NODE},{id:1,text:"SparkSQL",value:m.SQL},{id:2,text:"Spark",value:m.MR},{id:3,text:"数据同步",value:m.SYNC},{id:5,text:"PySpark",value:m.PYTHON},{id:6,text:"深度学习",value:m.DEEP_LEARNING},{id:7,text:"Python",value:m.PYTHON_23},{id:8,text:"Shell",value:m.SHELL},{id:9,text:"机器学习",value:m.ML},{id:10,text:"HadoopMR",value:m.HAHDOOPMR}],I=[{id:1,text:"分钟任务",value:0},{id:2,text:"小时任务",value:1},{id:3,text:"天任务",value:2},{id:4,text:"周任务",value:3},{id:5,text:"月任务",value:4}],D=[{text:"正常",value:0},{text:"关闭",value:1}],L=[{text:"MySQL",value:n.MYSQL},{text:"Oracle",value:n.ORACLE},{text:"SQLServer",value:n.SQLSERVER},{text:"PostgreSQL",value:n.POSTGRESQL},{text:"HDFS",value:n.HDFS},{text:"Hive",value:n.HIVE},{text:"HBase",value:n.HBASE},{text:"MaxCompute",value:n.MAXCOMPUTE},{text:"FTP",value:n.FTP},{text:"ElasticSearch",value:n.ES},{text:"Redis",value:n.REDIS},{text:"MongoDB",value:n.MONGODB}],P=[{text:"MySQL",value:n.MYSQL},{text:"HBase",value:n.HBASE},{text:"ElasticSearch",value:n.ES},{text:"Kafka",value:n.KAFKA}],k={mode:"text/x-sql",lint:!0,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,autofocus:!1},N=["tinyint","smallint","mediumint","int","bigint","varchar","char","tinytext","text","mediumtext","longtext","year","float","double","decimal","date","datetime","timestamp","time","bit","bool"],U=["BIGINT","STRING","DOUBLE","TIMESTAMP","BOOLEAN"],M={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},F={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}},x={title:{text:"堆叠区域图",textStyle:{fontSize:12},textAlign:"left"},tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985"}}},color:["#2491F7","#7460EF","#26DAD2","#79E079","#7A64F3","#FFDC53","#9a64fb"],legend:{data:["邮件营销","联盟广告","视频广告"]},toolbox:{feature:{saveAsImage:{show:!1}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{show:!0},axisLine:{lineStyle:{color:"#DDDDDD"}},axisLabel:{textStyle:{color:"#666666"}},nameTextStyle:{color:"#666666"},splitLine:{color:"#666666"}}],yAxis:[{name:"数量(个)",type:"value",axisLabel:{formatter:"{value}",textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",nameGap:20,axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#DDDDDD",type:"dashed"}}}],series:[]},G={title:{text:"某站点用户访问来源",subtext:"",textAlign:"left",textBaseline:"top",textStyle:{fontSize:14,fontWeight:"bold"},x:"left"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",right:"right",top:"middle",data:[]},color:["#5d99f2","#F5A623","#9EABB2","#8bc34a"],series:[{name:"访问来源",type:"pie",radius:"50%",center:["50%","45%"],data:[]}]},w={title:{text:"世界人口总量",textStyle:{fontSize:12,fontWeight:"bold"}},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},color:["#5dd1f2","#5d99f2","#9a64fb","#5df2c3","#eeeeee"],legend:{data:["2011年","2012年"]},grid:{left:"3%",right:"3%",top:35,bottom:"1%",show:!1,containLabel:!0},xAxis:{type:"value",show:!1,boundaryGap:[0,.01]},yAxis:{type:"category",data:["巴西","美国","印度","中国","世界人口(万)"],axisLine:{lineStyle:{color:"#dddddd",width:2}},position:"top",axisLabel:{textStyle:{color:"#666666"}},axisTick:{show:!1}},series:[{name:"",type:"bar",barWidth:20,silent:!0,barGap:"100%",barCategoryGap:25,barMinHeight:50,cursor:"initial",center:[-10,"0%"],label:{normal:{show:!0,formatter:"{c} GB",position:"insideTopLeft",offset:[0,-2]}},data:[23489,29034,104970,131744,630230]}]}},dmTY:function(e,t,a){"use strict";a.r(t),a.d(t,"execSql",function(){return b}),a.d(t,"stopSql",function(){return y}),a.d(t,"output",function(){return v}),a.d(t,"setOutput",function(){return S}),a.d(t,"outputRes",function(){return C}),a.d(t,"removeRes",function(){return R}),a.d(t,"resetConsole",function(){return O}),a.d(t,"getTab",function(){return I}),a.d(t,"setSelectionContent",function(){return D}),a.d(t,"addLoadingTab",function(){return L}),a.d(t,"removeLoadingTab",function(){return P}),a.d(t,"removeAllLoadingTab",function(){return k}),a.d(t,"updateEditorOptions",function(){return N});a("tL+A");var n=a("QpBz"),r=a.n(n),o=a("4d7F"),i=a.n(o),s=a("wd/R"),c=a.n(s),l=a("7Qib"),u=a("sVOr"),p=a("e4rw"),d=a("w3QJ"),m=3e3,E={4:"running",5:"success",8:"fail"},f={},T={},h={};function _(e,t,a,n){a.data.result&&e(C(t,a.data.result,n)),e(v(t,"执行成功!")),a.data&&a.data.download&&e(v(t,"完整日志下载地址："+Object(d.a)({href:a.data.download,download:""})+"\n"))}function A(e,t,a){return new i.a(function(n,r){!function e(t,a,n,r){u.a.selectSQLResultData({jobId:n}).then(function(o){if(o&&o.message&&a(v(r,"请求结果:\n "+o.message)),o&&o.data&&o.data.msg&&a(v(r,"请求结果: "+o.data.msg)),!o||1!==o.code)return a(v(r,"请求异常！")),a(P(r)),void t(!1);switch(E[o.data.status]){case"success":return _(a,r,o,n),void t(!0);case"running":return void(f[r]=setTimeout(function(){T[r]?T[r]=!1:(a(v(r,"执行中.....")),e(t,a,n,r))},m));case"fail":default:return o.data&&o.data.download&&a(v(r,"完整日志下载地址："+Object(d.a)({href:o.data.download,download:""})+"\n")),a(P(r)),void t(!1)}})}(n,e,t,a)})}function g(e,t,a,n,r,o,i,s){var p=a.id+"_"+c()().valueOf();function d(){T[t]?T[t]=!1:g(e,t,a,n,r,o+1,i,s)}n.sql=""+r[o],n.uniqueKey=p,e(v(t,"第"+(o+1)+"条任务开始执行"));var m=function(a){T[t]?T[t]=!1:(a&&a.message&&e(v(t,"请求结果:\n "+a.message)),(!a||a&&1!=a.code)&&(e(v(t,"请求异常！")),e(P(t))),a&&1===a.code&&(a.data&&a.data.msg&&e(v(t,"请求结果: "+a.data.msg)),a.data.jobId?(h[t]=a.data.jobId,A(e,a.data.jobId,t).then(function(a){o<r.length-1&&a&&d(),o>=r.length-1&&(e(P(t)),i(!0))})):(_(e,t,a),o<r.length-1?d():(e(P(t)),i(!0)))))};l.a.checkExist(a.taskType)?(n.taskId=a.id,u.a.execSQLImmediately(n).then(m)):l.a.checkExist(a.type)&&(n.scriptId=a.id,u.a.execScript(n).then(m))}function b(e,t,a,n){return function(r){return T[e]=!1,new i.a(function(o,i){g(r,e,t,a,n,0,o,i)})}}function y(e,t,a){return function(n,o){if(a)return o().editor.running.indexOf(e)>-1?(T[e]=!0,n(v(e,"执行停止")),n(P(e)),void(f[e]&&(clearTimeout(f[e]),f[e]=null))):void 0;var i=h[e];if(i){var s=function(t){1===t.code?(n(v(e,"执行停止")),f[e]&&(clearTimeout(f[e]),f[e]=null),T[e]=!0,n(P(e)),r.a.success("停止执行成功！")):r.a.success("停止执行失败！")};l.a.checkExist(t.taskType)?u.a.stopSQLImmediately({taskId:t.id,jobId:i}).then(s):l.a.checkExist(t.type)&&u.a.stopScript({scriptId:t.id,jobId:i}).then(s)}}}function v(e,t){return{type:p.a.APPEND_CONSOLE_LOG,data:"【"+c()().format("HH:mm:ss")+"】 "+t,key:e}}function S(e,t){return{type:p.a.SET_CONSOLE_LOG,data:"【"+c()().format("HH:mm:ss")+"】 "+t,key:e}}function C(e,t,a){return{type:p.a.UPDATE_RESULTS,data:{jobId:a,data:t},key:e}}function R(e,t){return{type:p.a.DELETE_RESULT,data:t,key:e}}function O(e){return{type:p.a.RESET_CONSOLE,key:e}}function I(e){return{type:p.a.GET_TAB,key:e}}function D(e){return{type:p.a.SET_SELECTION_CONTENT,data:e}}function L(e){return{type:p.a.ADD_LOADING_TAB,data:{id:e}}}function P(e){return{type:p.a.REMOVE_LOADING_TAB,data:{id:e}}}function k(){return{type:p.a.REMOVE_ALL_LOAING_TAB}}function N(e){return{type:p.a.UPDATE_OPTIONS,data:e}}},e4rw:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a("zbcj"),r=a.n(n)()(["RESET_CONSOLE","APPEND_CONSOLE_LOG","SET_CONSOLE_LOG","UPDATE_RESULTS","DELETE_RESULT","GET_TAB","SET_TAB","SET_SELECTION_CONTENT","ADD_LOADING_TAB","REMOVE_LOADING_TAB","REMOVE_ALL_LOAING_TAB","UPDATE_OPTIONS"],{prefix:"editor/"})},ebop:function(e,t,a){"use strict";a.d(t,"a",function(){return n});var n={language:"sql",readOnly:!1,contextmenu:!0,autoIndent:!0,automaticLayout:!0,showFoldingControls:"always",folding:!0,foldingStrategy:"auto",suggestFontSize:13,fontSize:13,iconsInSuggestions:!1,fixedOverflowWidgets:!0}},f7r7:function(e,t,a){"use strict";var n=a("QbLZ"),r=a.n(n),o=a("Yz+Y"),i=a.n(o),s=a("iCc5"),c=a.n(s),l=a("V7oC"),u=a.n(l),p=a("FYw3"),d=a.n(p),m=a("mRg0"),E=a.n(m),f=a("sbe7"),T=a.n(f);t.a=function(e,t){return function(a){function n(e){c()(this,n);var t=d()(this,(n.__proto__||i()(n)).call(this,e));return t.Component=null,t.state={Component:n.Component},t}return E()(n,a),u()(n,[{key:"componentWillMount",value:function(){var t=this;this.state.Component||e().then(function(e){n.Component=e,t.setState({Component:e})})}},{key:"render",value:function(){return this.state.Component?T.a.createElement(this.state.Component,r()({},this.props,t)):null}}]),n}(T.a.Component)}},hPfy:function(e,t,a){"use strict";var n=a("PVY6");t.a={DQ_ROLE_QUERY:n.e+"/role/pageQuery",DQ_ROLE_UPDATE:n.e+"/role/addOrUpdateRole",DQ_ROLE_DELETE:n.e+"/role/deleteRole",DQ_ROLE_PERMISSION_TREE:n.e+"/permission/tree",DQ_ROLE_PERMISSION:n.e+"/permission/getPermissionIdsByRoleId",DQ_GET_USER_BY_ID:n.e+"/user/getUserById",DQ_GET_USER_LIST:n.e+"/user/list",DQ_GET_USER_PAGES:n.e+"/user/pageQuery",DQ_USER_ROLE_ADD:n.e+"/roleUser/addRoleUser",DQ_USER_ROLE_DELETE:n.e+"/roleUser/remove",DQ_USER_ROLE_UPDATE:n.e+"/roleUser/updateUserRole",DQ_GET_USER_NOT_IN_PROJECT:n.e+"/user/listNotIn",MASSAGE_QUERY:n.e+"/notify/pageQuery",GET_MASSAGE_BY_ID:n.e+"/notify/getOne",MASSAGE_MARK_AS_READ:n.e+"/notify/tabRead",MASSAGE_MARK_AS_ALL_READ:n.e+"/notify/allRead",MASSAGE_DELETE:n.e+"/notify/delete",GET_TOP_RECORD:n.e+"/monitorRecord/countTopRecord",GET_ALARM_SUM:n.e+"/monitorRecord/sumAlarm",GET_ALARM_TREND:n.e+"/monitorRecord/monthAlarm",GET_DASHBOARD_USAGE:n.e+"/monitorRecord/usage",GET_DATA_SOURCES:n.e+"/dataSource/pageQuery",CHECK_CONNECTION:n.e+"/dataSource/checkConnection",ADD_DATA_SOURCES:n.e+"/dataSource/addSource",UPDATE_DATA_SOURCES:n.e+"/dataSource/updateSource",DELETE_DATA_SOURCES:n.e+"/dataSource/deleteSource",GET_DATA_SOURCES_LIST:n.e+"/dataSource/list",GET_DATA_SOURCES_TYPE:n.e+"/dataSource/getTypes",GET_DATA_SOURCES_TABLE:n.e+"/dataSource/tablelist",GET_DATA_SOURCES_COLUMN:n.e+"/dataSource/tablecolumn",GET_DATA_SOURCES_PART:n.e+"/dataSource/getPartValue",GET_DATA_SOURCES_PREVIEW:n.e+"/dataSource/preview",GET_CHECK_LIST:n.e+"/verify/pageQuery",GET_CHECK_DETAIL:n.e+"/verify/getOne",ADD_CHECK:n.e+"/verify/add",UPDATE_CHECK:n.e+"/verify/update",DELETE_CHECK:n.e+"/verify/deleteVerify",GET_CHECK_REPORT:n.e+"/verify/report",GET_CHECK_REPORT_TABLE:n.e+"/verify/reportTable",UPDATE_CHECK_ENV_PARAMS:n.e+"/verify/updateTaskParams",GET_MONITOR_LIST:n.e+"/monitor/pageQuery",ADD_MONITOR:n.e+"/monitor/add",UPDATE_MONITOR:n.e+"/monitor/update",GET_RULE_PART:n.e+"/monitor/getPart",CHANGE_MONITOR_STATUS:n.e+"/monitor/closeOrOpen",GET_MONITOR_DETAIL:n.e+"/monitor/detail",RULE_REMOTE_TRIGGER:n.e+"/monitor/remoteTrigger",EXECUTE_MONITOR:n.e+"/monitor/immediatelyExecuted",CHECK_MONITOR:n.e+"/monitor/checkMonitor",UPDATE_TASK_PARAMS:n.e+"/monitor/updateTaskParams",GET_REMOTE_TRIGGER:n.e+"/monitor/getRemoteTrigger",ADD_REMOTE_TRIGGER:n.e+"/monitor/addRemoteTriger",DEL_REMOTE_TRIGGER:n.e+"/monitor/deleteRemoteTrigger",GET_MONITOR_RULE:n.e+"/monitorRule/getRules",SAVE_MONITOR_RULE:n.e+"/monitorRule/save",DELETE_MONITOR_RULE:n.e+"/monitorRule/delete",GET_RULE_FUNCTION:n.e+"/function/getFunctions",GET_MONITOR_TABLE_COLUMN:n.e+"/monitor/tablecolumn",SUBSCRIBE_TABLE:n.e+"/subscribe/subscribe",UNSUBSCRIBE_TABLE:n.e+"/subscribe/unSubscribe",CHECK_SUBSCRIBE:n.e+"/subscribe/isSubscribe",GET_TASK_LIST:n.e+"/monitorRecord/pageQuery",GET_TASK_DETAIL:n.e+"/monitorRecord/detailReport",GET_TABLE_REPORT:n.e+"/monitorRecord/tableReport",GET_TASK_ALARM_NUM:n.e+"/monitorRecord/ruleMonth",DQ_GET_ALL_DICT:n.e+"/dict/allDicts"}},"lFj+":function(e,t,a){"use strict";var n=a("PVY6");t.a={UNLOCK_FILE:n.f+"/common/readWriteLock/getLock",SQL_FORMAT:n.f+"/batch/batchHiveTableInfo/sqlFormat",SAVE_TASK:n.f+"/batch/batchTask/addOrUpdateTask",FORCE_UPDATE_TASK:n.f+"/batch/batchTask/forceUpdate",GET_TASK:n.f+"/batch/batchTask/getTaskById",DELETE_TASK:n.f+"/batch/batchTask/deleteTask",QUERY_CATA_TASK:n.f+"/batch/batchTask/getLogsByTaskId",GET_TASKS_BY_PROJECT_ID:n.f+"/batch/batchTask/getTasksByProjectId",GET_TASKS_BY_NAME:n.f+"/batch/batchTask/getTasksByName",QUERY_TASKS:n.f+"/batch/batchTask/queryTasks",GET_TASK_CHILDREN:n.f+"/batch/batchTaskTask/displayOffSpring",GET_TASK_PARENTS:n.f+"/batch/batchTaskTask/displayForefathers",GET_TASK_LOG:n.f+"/batch/batchServerLog/getLogsByJobId",GLOBAL_SEARCH_TASK:n.f+"/batch/batchTask/globalSearch",GET_TASK_TYPES:n.f+"/batch/batchTask/getSupportJobTypes",PUBLISH_TASK:n.f+"/batch/batchTask/publishTask",GET_CUSTOM_TASK_PARAMS:n.f+"/batch/batchTask/getSysParams",FROZEN_TASK:n.f+"/batch/batchTask/frozenTask",TASK_VERSION_SCHEDULE_CONF:n.f+"/batch/batchTask/taskVersionScheduleConf ",UPDATE_TASK_OWNER:n.f+"/batch/batchTask/setOwnerUser ",SAVE_SCRIPT:n.f+"/batch/batchScript/addOrUpdateScript",FORCE_UPDATE_SCRIPT:n.f+"/batch/batchScript/forceUpdate",EXEC_SCRIPT:n.f+"/batch/batchScript/startSqlImmediately",STOP_SCRIPT:n.f+"/batch/batchScript/stopSqlImmediately",DELETE_SCRIPT:n.f+"/batch/batchScript/deleteScript",GET_SCRIPT_BY_ID:n.f+"/batch/batchScript/getScriptById",GET_SCRIPT_TYPES:n.f+"/batch/batchScript/getTypes",QUERY_JOBS:n.f+"/batch/batchJob/queryJobs",GET_JOB_BY_ID:n.f+"/batch/batchJob/getJobById",GET_JOB_GRAPH:n.f+"/batch/batchJob/getJobGraph",GET_JOB_STATISTICS:n.f+"/batch/batchJob/getStatusCount",GET_JOB_TOP_TIME:n.f+"/batch/batchJob/runTimeTopOrder",GET_JOB_TOP_ERROR:n.f+"/batch/batchJob/errorTopOrder",PATCH_TASK_DATA:n.f+"/batch/batchJob/fillTaskData",QUERY_PATCH_TASK_DATA:n.f+"/batch/batchJob/queryBugJobs",START_JOB:n.f+"/batch/batchJob/loadDataJob",STOP_JOB:n.f+"/batch/batchJob/stopJob",BATCH_STOP_JOBS:n.f+"/batch/batchJob/batchStopJobs",RESTART_AND_RESUME_JOB:n.f+"/batch/batchJob/restartJobAndResume",BATCH_RESTART_AND_RESUME_JOB:n.f+"/batch/batchJob/batchRestartJobAndResume",GET_FILL_DATA:n.f+"/batch/batchJob/getFillDataJobInfoPreview",GET_FILL_DATE:n.f+"/batch/batchJob/getFillDataBizDay",GET_FILL_DATA_DETAIL:n.f+"/batch/batchJob/getFillDataDetailInfo",GET_JOB_CHILDREN:n.f+"/batch/batchJobJob/displayOffSpring",GET_JOB_PARENT:n.f+"/batch/batchJobJob/displayForefathers",EXEC_SQL_IMMEDIATELY:n.f+"/batch/batchJob/startSqlImmediately",STOP_SQL_IMMEDIATELY:n.f+"/batch/batchJob/stopSqlImmediately",SELECT_SQL_RESULT_DATA:n.f+"/batch/batchHiveSelectSql/selectData",CHECK_IS_LOOP:n.f+"/batch/batchTask/checkIsLoop",GET_JOB_RUNTIME_INFO:n.f+"/batch/batchJob/jobDetail",QUERY_JOB_STATISTICS:n.f+"/batch/batchJob/queryJobsStatusStatistics",QUERY_JOB_SUB_NODES:n.f+"/batch/batchJob/getAllChildJobWithSameDay",STATISTICS_TASK_RUNTIME:n.f+"/batch/batchJob/statisticsTaskRecentInfo",STOP_FILL_DATA_JOBS:n.f+"/batch/batchJob/stopFillDataJobs",GET_SYNC_SCRIPT_TEMPLATE:n.f+"/batch/batchTask/getJsonTemplate",GET_RESTART_JOBS:n.f+"/batch/batchJob/getRestartChildJob",DOWNLOAD_SQL_RESULT:n.f+"/download/batch/batchDownload/downloadSqlExeResult",GET_OFFLINE_CATALOGUE:n.f+"/batch/batchCatalogue/getCatalogue",GET_OFFLINE_CATALOGUE_BY_LOCATION:n.f+"/batch/batchCatalogue/getLocation",ADD_OFFLINE_CATALOGUE:n.f+"/batch/batchCatalogue/addCatalogue",EDIT_OFFLINE_CATALOGUE:n.f+"/batch/batchCatalogue/updateCatalogue",ADD_OFFLINE_RESOURCE:n.f+"/upload/batch/batchResource/addResource",ADD_OFFLINE_TASK:n.f+"/batch/batchTask/addOrUpdateTask",GET_OFFLINE_TASK:n.f+"/batch/batchTask/getTaskById",GET_OFFLINE_TASK_BY_NAME:n.f+"/batch/batchTask/getDependencyTask",GET_OFFLINE_DATASOURCE:n.f+"/batch/batchDataSource/list",GET_OFFLINE_TABLELIST:n.f+"/batch/batchDataSource/tablelist",GET_OFFLINE_TABLECOLUMN:n.f+"/batch/batchDataSource/tablecolumn",GET_OFFLINE_JOBDATA:n.f+"/batch/batchDataSource/trace",SAVE_OFFLINE_JOBDATA:n.f+"/batch/batchTask/addOrUpdateTask",ADD_OFFLINE_FUNCTION:n.f+"/batch/batchFunction/addFunction",DEL_OFFLINE_TASK:n.f+"/batch/batchTask/deleteTask",DEL_OFFLINE_FOLDER:n.f+"/batch/batchCatalogue/deleteCatalogue",DEL_OFFLINE_RES:n.f+"/batch/batchResource/deleteResource",DEL_OFFLINE_FN:n.f+"/batch/batchFunction/deleteFunction",MOVE_OFFLINE_FN:n.f+"/batch/batchFunction/moveFunction",GET_FN_DETAIL:n.f+"/batch/batchFunction/getFunction",GET_RES_DETAIL:n.f+"/batch/batchResource/getResourceById",DATA_PREVIEW:n.f+"/batch/batchDataSource/preview",GET_ALARM_LIST:n.f+"/batch/batchAlarm/getAlarmList",ADD_ALARM:n.f+"/batch/batchAlarm/createAlarm",UPDATE_ALARM:n.f+"/batch/batchAlarm/updateAlarm",CLOSE_ALARM:n.f+"/batch/batchAlarm/closeAlarm",OEPN_ALARM:n.f+"/batch/batchAlarm/startAlarm",DELETE_ALARM:n.f+"/batch/batchAlarm/deleteAlarm",GET_ALARM_RECORDS:n.f+"/batch/batchAlarmRecord/getAlarmRecordList",ALARM_STATISTICS:n.f+"/batch/batchAlarmRecord/countAlarm",SAVE_DATA_SOURCE:n.f+"/batch/batchDataSource/addOrUpdateSource",DELETE_DATA_SOURCE:n.f+"/batch/batchDataSource/deleteSource",QUERY_DATA_SOURCE:n.f+"/batch/batchDataSource/pageQuery",GET_DATA_SOURCE_BY_ID:n.f+"/batch/batchDataSource/getBySourceId",TEST_DATA_SOURCE_CONNECTION:n.f+"/batch/batchDataSource/checkConnection",GET_DATA_SOURCE_TYPES:n.f+"/batch/batchDataSource/getTypes",GET_HBASE_COLUMN_FAMILY:n.f+"/batch/batchDataSource/columnfamily",GET_TASK_LIST_OF_OFFLINE_SOURCE:n.f+"/batch/batchDataSource/getSourceTaskRef",GET_TABLE_CATALOGUE:n.f+"/batch/hiveCatalogue/getHiveCatalogue",ADD_TABLE_CATALOGUE:n.f+"/batch/hiveCatalogue/addCatalogue",DEL_TABLE_CATALOGUE:n.f+"/batch/hiveCatalogue/deleteCatalogue",UPDATE_TABLE_CATALOGUE:n.f+"/batch/hiveCatalogue/updateHiveCatalogue",ADD_TABLE_TO_CATALOGUE:n.f+"/batch/hiveTableCatalogue/updateHiveCatalogue",DEL_TABLE_IN_CATALOGUE:n.f+"/batch/hiveTableCatalogue/deleteTableCatalogue",SAVE_SYNC_CONFIG:n.f+"/batch/batchDataSourceMigration/saveConfig",GET_SYNC_HISTORY:n.f+"/batch/batchDataSourceMigration/list",GET_SYNC_DETAIL:n.f+"/batch/batchDataSourceMigration/getDetail",PUBLISH_SYNC_TASK:n.f+"/batch/batchDataSourceMigration/task",CHECK_SYNC_CONFIG:n.f+"/batch/batchDataSourceMigration/checkTransformConfig",PROJECT_TABLE_COUNT:n.f+"/batch/hiveTableCount/tableCount",PROJECT_STORE_COUNT:n.f+"/batch/hiveTableCount/totalSize",PROJECT_STORE_TOP:n.f+"/batch/hiveTableCount/projectSizeTopOrder",PROJECT_TABLE_STORE_TOP:n.f+"/batch/hiveTableCount/tableSizeTopOrder",PROJECT_DATA_OVERVIEW:n.f+"/batch/hiveTableCount/dataHistory"}},lSrH:function(e,t,a){"use strict";function n(e,t){for(var a in e)if({}.hasOwnProperty.call(e,a)&&(!{}.hasOwnProperty.call(t,a)||e[a]!==t[a]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function r(e){e.prototype.shouldComponentUpdate=function(e,t){return!n(this.state,t)||!n(this.props,e)}}a.d(t,"a",function(){return r})},moyJ:function(e,t,a){"use strict";var n=a("P2sY"),r=a.n(n),o=a("GQeE"),i=a.n(o),s=a("sk9p"),c=a.n(s),l=a("FyfS"),u=a.n(l),p=a("oF3Q"),d=a.n(p),m=a("Yz+Y"),E=a.n(m),f=a("iCc5"),T=a.n(f),h=a("V7oC"),_=a.n(h),A=a("FYw3"),g=a.n(A),b=a("mRg0"),y=a.n(b),v=a("m1cH"),S=a.n(v),C=a("sbe7"),R=a.n(C),O=a("+KTK"),I=(a("2J7O"),a("Ex8E")),D=(a("re/k"),{base:"vs",inherit:!0,rules:[],colors:{"editorSuggestWidget.background":"#fff","editorSuggestWidget.border":"#fff","editorSuggestWidget.foreground":"#88adbf","editorSuggestWidget.selectedBackground":"#dfeeff"}}),L=a("ebop"),P={dtsql:{register:I.c,dispose:I.a,onChange:I.b}};var k=function(e){function t(e){T()(this,t);var a,n,r=g()(this,(t.__proto__||E()(t)).call(this,e));return r.providerProxy=function(e,t,a,n){var o=r.props.customCompleteProvider;o?o(e,t,a,n):t(e)},r.delayLanguageValueOnChange=(a=r.languageValueOnChange.bind(r),n=void 0,function(){var e=arguments;n&&clearTimeout(n),n=setTimeout(function(){a.apply(void 0,S()(e))},200)}),r.monacoDom=null,r.monacoInstance=null,r}return y()(t,e),_()(t,[{key:"shouldComponentUpdate",value:function(e,t){return!1}},{key:"componentDidMount",value:function(){this.initMonaco(),"function"==typeof this.props.editorInstanceRef&&this.props.editorInstanceRef(this.monacoInstance)}},{key:"initProviderProxy",value:function(){var e=d()(P),t=!0,a=!1,n=void 0;try{for(var r,o=u()(e);!(t=(r=o.next()).done);t=!0){var i=c()(r.value,2);i[0];i[1].register(this.providerProxy)}}catch(e){a=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw n}}}},{key:"disposeProviderProxy",value:function(){var e=d()(P),t=!0,a=!1,n=void 0;try{for(var r,o=u()(e);!(t=(r=o.next()).done);t=!0){var i=c()(r.value,2);i[0];i[1].dispose()}}catch(e){a=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw n}}}},{key:"componentWillReceiveProps",value:function(e){var t=e.sync,a=e.value,n=e.theme,r=e.languageConfig,o=e.language;if(this.props.value!==a&&t){var i=a||"";this.updateValueWithNoEvent(i)}r!==this.props.languageConfig&&this.updateMonarch(r,o),this.props.options!==e.options&&this.monacoInstance.updateOptions(e.options),this.props.theme!==n&&O.editor.setTheme(n)}},{key:"componentWillUnmount",value:function(){this.destroyMonaco(),this.disposeProviderProxy()}},{key:"updateMonarch",value:function(e,t){e&&t&&O.languages.setMonarchTokensProvider(t,e)}},{key:"isValueExist",value:function(e){return!!i()(e).includes("value")}},{key:"log",value:function(){var e;this.props.isLog&&(e=console).log.apply(e,arguments)}},{key:"destroyMonaco",value:function(){this.monacoInstance&&this.monacoInstance.dispose()}},{key:"initMonaco",value:function(){var e=this.props,t=e.value,a=e.language,n=e.options,o=e.cursorPosition;if(this.monacoDom){var i=r()(L.a,n,{value:t,language:a||"sql"});this.monacoInstance=O.editor.create(this.monacoDom,i),this.monacoInstance&&o&&(this.monacoInstance.setPosition(o),this.monacoInstance.focus(),this.monacoInstance.revealPosition(o,O.editor.ScrollType.Immediate)),this.initEditor()}}},{key:"initEditor",value:function(){this.initTheme(),this.initEditorEvent(),this.initProviderProxy()}},{key:"initTheme",value:function(){O.editor.defineTheme("white",D),this.props.theme&&O.editor.setTheme(this.props.theme)}},{key:"updateValueWithNoEvent",value:function(e){this.monacoInstance.setValue(e)}},{key:"languageValueOnChange",value:function(){var e=this.monacoInstance.getValue(),t=this.monacoInstance.getModel().getModeId();P[t]&&P[t].onChange&&P[t].onChange(e,this.monacoInstance)}},{key:"initEditorEvent",value:function(){var e=this;this.languageValueOnChange(),this.monacoInstance.onDidChangeModelContent(function(t){e.log("编辑器事件");var a=e.props,n=a.onChange,r=(a.value,e.monacoInstance.getValue());e.delayLanguageValueOnChange(),n&&(e.log("订阅事件触发"),n(r,e.monacoInstance))}),this.monacoInstance.onDidBlurEditor(function(t){e.log("编辑器事件 onDidBlur");var a=e.props,n=a.onBlur,r=a.value;n&&n(r,e.monacoInstance.getValue())}),this.monacoInstance.onDidFocusEditor(function(t){e.log("编辑器事件 onDidFocus");var a=e.props,n=a.onFocus,r=a.value;n&&n(r,e.monacoInstance.getValue())}),this.monacoInstance.onDidChangeCursorSelection(function(t){e.log("编辑器事件 onDidChangeCursorSelection");for(var a=e.props.onCursorSelection,n=e.monacoInstance.getSelections(),r=e.monacoInstance.getModel(),o="",i=0;i<n.length;i++)o=o+=r.getValueInRange(n[i]);a&&a(o)})}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.style,o=(t.editorInstance,"code-editor");o=a?o+" "+a:o;var i={position:"relative",minHeight:"400px",height:"100%",width:"100%"};return i=n?r()(i,n):i,R.a.createElement("div",{className:o,style:i,ref:function(t){e.monacoDom=t}})}}]),t}(R.a.Component);t.a=k},nLvT:function(e,t,a){},og7n:function(e,t,a){},pAlz:function(e,t,a){"use strict";a.d(t,"a",function(){return n}),a.d(t,"b",function(){return r});var n={mode:"text/x-sql",lint:!0,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,autofocus:!1},r={mode:"text/x-properties",lint:!0,indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,autofocus:!1}},pKDC:function(e,t,a){"use strict";var n,r=a("P2sY"),o=a.n(r),i=a("FyfS"),s=a.n(i),c=a("Yz+Y"),l=a.n(c),u=a("iCc5"),p=a.n(u),d=a("V7oC"),m=a.n(d),E=a("FYw3"),f=a.n(E),T=a("mRg0"),h=a.n(T),_=a("sbe7"),A=a.n(_),g=a("pAlz"),b=a("lSrH"),y=(a("p77/"),a("DdDu"),a("O6QL"),a("w3QJ")),v=a("VrN/");a("/9rB"),a("25Eh"),a("+dQi"),a("3Fvf"),a("19Vz"),a("jDMi");var S=Object(b.a)(n=function(e){function t(){return p()(this,t),f()(this,(t.__proto__||l()(t)).apply(this,arguments))}return h()(t,e),m()(t,[{key:"componentDidMount",value:function(){var e=this.Editor,t=this.props.options||g.a,a=this.getCodeMirrorIns(),n=this.props,r=n.value,o=n.onChange,i=n.onFocus,s=n.cursor,c=n.focusOut,l=n.cursorActivity;e&&(this.self=a.fromTextArea(e,t),this.renderTextMark(),s&&this.self.doc.setCursor(s),this.self.on("change",function(e){o&&o(r,e.getValue(),e)}),this.self.on("focus",function(e){i&&i(r,e.getValue())}),this.self.on("blur",function(e){c&&c(r,e.getValue())}),this.self.on("cursorActivity",function(e){l&&l(r,e)}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.value,a=e.sync,n=e.cursor,r=(e.placeholder,e.cursorAlwaysInEnd),o=e.options;o&&this.self.setOption("readOnly",o.readOnly),this.props.value!==t&&(n&&this.self.doc.setCursor(n),a&&(t?this.self.setValue(t):this.self.setValue(""),r&&this.self.doc.setCursor(this.self.doc.lineCount(),null)),this.renderTextMark())}},{key:"renderTextMark",value:function(){var e=this.self.doc.getAllMarks(),t=!0,a=!1,n=void 0;try{for(var r,o=s()(e);!(t=(r=o.next()).done);t=!0){r.value.clear()}}catch(e){a=!0,n=e}finally{try{!t&&o.return&&o.return()}finally{if(a)throw n}}for(var i=this.self.getValue(),c=Object(y.b)(i),l=0;l<c.length;l++){var u=c[l];this.self.doc.markText(this.self.doc.posFromIndex(u.start),this.self.doc.posFromIndex(u.end),{replacedWith:u.node})}}},{key:"getCodeMirrorIns",value:function(){return this.self||v}},{key:"render",value:function(){var e=this,t=this.props,a=t.className,n=t.style,r="code-editor";r=a?r+" "+a:r;var i={position:"relative",minHeight:"400px"};return i=n?o()(i,n):i,A.a.createElement("div",{className:r,style:i},A.a.createElement("textarea",{ref:function(t){e.Editor=t},name:"code",placeholder:this.props.placeholder||"",defaultValue:this.props.value||""}))}}]),t}(_.Component))||n;t.a=S},pLPX:function(e,t,a){"use strict";a.d(t,"d",function(){return P}),a.d(t,"b",function(){return k}),a.d(t,"a",function(){return M}),a.d(t,"c",function(){return F});var n,r=a("Yz+Y"),o=a.n(r),i=a("iCc5"),s=a.n(i),c=a("V7oC"),l=a.n(c),u=a("FYw3"),p=a.n(u),d=a("mRg0"),m=a.n(d),E=(a("G851"),a("ZvzK")),f=a.n(E),T=(a("FGdI"),a("Pbn2")),h=a.n(T),_=(a("PFYH"),a("Jv8k")),A=a.n(_),g=a("CSPP"),b=a.n(g),y=a("sbe7"),v=a.n(y),S=a("dtw8"),C=a("9ObM"),R=a("lSrH"),O=a("7UKp"),I=(a("og7n"),b()(["\n    color: #ffffff;\n    margin-left: 10px;\n    font-size: 14px;\n"],["\n    color: #ffffff;\n    margin-left: 10px;\n    font-size: 14px;\n"])),D=b()(["\n    font-size: 18px;\n"],["\n    font-size: 18px;\n"]),L=APP_CONF.UIC_URL||"",P=C.a.span(I),k=C.a.span(D);function N(e,t){return e&&e.length>0?e.map(function(e){return e.enable&&(!e.needRoot||e.needRoot&&t)?v.a.createElement(A.a.Item,{key:e.id},v.a.createElement("a",{href:e.link,target:e.target},e.name)):""}):[]}function U(e){var t=e.activeKey,a=e.onClick,n=e.menuItems,r=e.user;return v.a.createElement("div",{className:"menu left"},v.a.createElement(A.a,{className:"my-menu",onClick:a,selectedKeys:[t],mode:"horizontal"},N(n,r.isRoot)))}function M(e){var t,a=e.onClick,n=e.settingMenus,r=e.user,o=e.apps,i=e.app,s=e.showHelpSite,c=e.helpUrl,l=!i||!i.disableExt,u=i?"?app="+(i&&i.id):"",p=v.a.createElement(A.a,{onClick:a},v.a.createElement(A.a.Item,{key:"ucenter"},v.a.createElement("a",{href:L},"用户中心")),v.a.createElement(A.a.Item,{key:"logout"},"退出登录")),d=v.a.createElement(A.a,null,v.a.createElement(A.a.Item,{key:"setting:1"},v.a.createElement("a",{href:"/admin/user"+u,target:"blank"},"用户管理")),v.a.createElement(A.a.Item,{key:"setting:2"},v.a.createElement("a",{href:"/admin/role"+u,target:"blank"},"角色管理")),(t=n)&&t.length>0?t.map(function(e){return e.enable?v.a.createElement(A.a.Item,{key:e.id},v.a.createElement(S.c,{to:e.link,target:e.target},e.name)):""}):[]),m=v.a.createElement(A.a,{selectedKeys:[""+(i&&i.id)]},N(o,r.isRoot));return v.a.createElement("div",{className:"menu right"},v.a.createElement("menu",{className:"menu-right"},s?v.a.createElement("span",{title:"帮助文档",className:"menu-item"},v.a.createElement("a",{href:c,target:"blank",style:{color:"#ffffff"}},v.a.createElement(h.a,{type:"question-circle-o"}))):null,v.a.createElement(f.a,{overlay:m,trigger:["click"]},v.a.createElement("span",{className:"menu-item"},v.a.createElement(h.a,{type:"home"}))),v.a.createElement("span",{className:"divide left"}),l&&v.a.createElement("a",{href:"/message"+u,target:"blank",style:{color:"#ffffff"}},v.a.createElement("span",{className:"menu-item"},v.a.createElement(h.a,{type:"message"}))),l&&v.a.createElement(f.a,{overlay:d,trigger:["click"]},v.a.createElement("span",{className:"menu-item"},v.a.createElement(h.a,{type:"setting"})," ")),v.a.createElement(f.a,{overlay:p,trigger:["click"]},v.a.createElement("div",{className:"user-info"},v.a.createElement("span",{className:"user-name",title:r&&r.userName},r&&r.userName||"未登录")))))}var F=Object(R.a)(n=function(e){function t(e){s()(this,t);var a=p()(this,(t.__proto__||o()(t)).call(this,e));return a.handleClick=function(e){e.item.props;var t=a.props.onMenuClick;a.setState({current:e.key}),t&&t(e)},a.clickUserMenu=function(e){"logout"===e.key&&O.a.logout()},a.updateSelected=function(){var e=a.props.menuItems,t=""+window.location.pathname+window.location.hash;if(e&&e.length>0){var n=e.find(function(e){return t.indexOf(e.id)>-1});n?a.setState({current:n.id}):a.setState({current:e[0].id})}},a.state={current:""},a}return m()(t,e),l()(t,[{key:"componentDidMount",value:function(){this.updateSelected()}},{key:"componentWillReceiveProps",value:function(e){this.props.routing&&this.props.routing.locationBeforeTransitions.pathname!=e.routing.locationBeforeTransitions.pathname&&this.updateSelected()}},{key:"componentWillReceiveProps",value:function(e){this.props.routing!==e.routing&&this.updateSelected()}},{key:"render",value:function(){var e=this.props,t=e.user,a=e.logo,n=e.menuItems,r=e.settingMenus,o=e.apps,i=e.app,s=e.menuLeft,c=e.menuRight,l=e.logoWidth,u=this.state.current;return v.a.createElement("header",{className:"header"},v.a.createElement("div",{style:{width:l},className:"logo left txt-left"},a),s||v.a.createElement(U,{user:t,activeKey:u,menuItems:n,onClick:this.handleClick}),c||v.a.createElement(M,{activeKey:u,user:t,app:i,apps:o,onClick:this.clickUserMenu,settingMenus:r}))}}]),t}(y.Component))||n},rHgN:function(e,t,a){},"re/k":function(e,t,a){},s9ml:function(e,t,a){"use strict";a.d(t,"a",function(){return h});a("FGdI");var n=a("Pbn2"),r=a.n(n),o=a("Yz+Y"),i=a.n(o),s=a("iCc5"),c=a.n(s),l=a("V7oC"),u=a.n(l),p=a("FYw3"),d=a.n(p),m=a("mRg0"),E=a.n(m),f=a("sbe7"),T=a.n(f),h=function(e){function t(){return c()(this,t),d()(this,(t.__proto__||i()(t)).apply(this,arguments))}return E()(t,e),u()(t,[{key:"render",value:function(){return T.a.createElement("div",{className:"txt-center",style:{lineHeight:"200px"}},T.a.createElement("h1",null,T.a.createElement(r.a,{type:"frown-o"})," 亲，是不是走错地方了？"))}}]),t}(f.Component)},sVOr:function(e,t,a){"use strict";var n,r=a("OZjc"),o=a("7Qib"),i=a("PVY6"),s={ADD_ROLE_USRE:i.f+"/common/roleUser/addRoleUser",GET_NOT_PROJECT_USERS:i.f+"/common/project/getUsersNotInProject",LOGOUT:"/uic/api/v2/logout",APP_LOGOUT:i.f+"/login/out",UPDATE_USER_ROLE:i.f+"/common/roleUser/updateUserRole",GET_USER_BY_ID:i.f+"/common/user/getUserById",SEARCH_UIC_USERS:i.f+"/common/project/getUicUsersNotInProject",CREATE_PROJECT:i.f+"/common/project/createProject",REMOVE_USER_FROM_PROJECT:i.f+"/common/roleUser/removeRoleUserFromProject",ADD_PROJECT_USER:i.f+"/common/roleUser/addRoleUserNew",QUERY_PROJECT_LIST:i.f+"/common/project/queryProjects",GET_PROJECT_LIST:i.f+"/common/project/getProjects",GET_ALL_PROJECTS:i.f+"/common/project/getAllProjects",GET_USRE_PROJECTS:i.f+"/common/project/getProjectUserIn",GET_PROJECT_USERS:i.f+"/common/project/getProjectUsers",GET_PROJECT_BY_ID:i.f+"/common/project/getProjectByProjectId",UPDATE_PROJECT_INFO:i.f+"/common/project/updateProjectInfo",GET_PROJECT_INFO:i.f+"/common/project/getProjectInfo",GET_PROJECT_LIST_INFO:i.f+"/common/project/getProjectList",SET_STICKY:i.f+"/common/project/setSticky",DELETE_PROJECT:i.f+"/common/project/deleteProject",GET_ROLE_LIST:i.f+"/common/role/pageQuery",UPDATE_ROLE:i.f+"/common/role/addOrUpdateRole",DELETE_ROLE:i.f+"/common/role/deleteRole",GET_ROLE_TREE:i.f+"/common/permission/tree",GET_ROLE_INFO:i.f+"/common/permission/getPermissionIdsByRoleId",SQL_FORMAT:i.f+"/stream/streamTask/sqlFormat",SAVE_TASK:i.f+"/stream/streamTask/addOrUpdateTask",FORCE_UPDATE_TASK:i.f+"/stream/streamTask/forceUpdate",START_TASK:i.f+"/stream/streamTask/startTask",STOP_TASK:i.f+"/stream/streamTask/stopTask",GET_TASK:i.f+"/stream/streamTask/getTaskById",UPDATE_TASK_RES:i.f+"/stream/streamTask/updateTaskResource",GET_TASK_LIST:i.f+"/stream/streamTask/getTaskList",GET_TASKS_BY_STATUS:i.f+"/stream/streamTask/getTaskListByStatus",SEARCH_TASKS_BY_NAME:i.f+"/stream/streamTask/searchTaskByName",SORT_TASKS:i.f+"/stream/streamTask/changeTaskOrder",DELETE_TASK:i.f+"/stream/streamTask/deleteTask",TASK_STATISTICS:i.f+"/stream/streamTask/getStatusCount",GET_TASK_LOG:i.f+"/stream/streamServerLog/getLogsByTaskId",GLOBAL_SEARCH_TASK:i.f+"/stream/streamTask/globalSearch",GET_TASK_TYPES:i.f+"/stream/streamTask/getSupportJobTypes",PUBLISH_REALTIME_TASK:i.f+"/stream/streamTask/publishStreamTask",GET_TYPE_ORIGIN_DATA:i.f+"/stream/streamDataSource/listDataSourceBaseInfo",GET_TOPIC_TYPE:i.f+"/stream/streamDataSource/getKafkaTopics",GET_STREM_TABLE_TYPE:i.f+"/stream/streamDataSource/tablelist",GET_CREATE_TARGET_TABLE:i.f+"/batch/batchHiveTableInfo/getCreateTargetTableSql",GET_COLUMNS_OF_TABLE:i.f+"/batch/batchHiveTableInfo/simpleTableColumns",GET_ALL_FUNCTION_NAME:i.f+"/batch/batchFunction/getAllFunctionName",GET_CATALOGUE:i.f+"/stream/streamCatalogue/getCatalogue",UPDATE_CATALOGUE:i.f+"/stream/streamCatalogue/updateCatalogue",ADD_CATALOGUE:i.f+"/stream/streamCatalogue/addCatalogue",DELETE_CATALOGUE:i.f+"/stream/streamCatalogue/deleteCatalogue",GET_STREAM_CATALOGUE_BY_LOCATION:i.f+"/stream/streamCatalogue/getLocation",CREATE_FUNC:i.f+"/stream/streamFunction/addFunction",GET_FUNC:i.f+"/stream/streamFunction/getFunction",DELETE_FUNC:i.f+"/stream/streamFunction/deleteFunction",MOVE_FUNC:i.f+"/stream/streamFunction/moveFunction",GET_SYS_FUNC:i.f+"/stream/streamFunction/getSystemFunctions",GET_TABLE_LIST_BY_NAME:i.f+"/batch/batchCatalogue/getTableList",GET_RECOMMEND_TASK:i.f+"/batch/batchTask/recommendDependencyTask",UPLOAD_RES:i.f+"/upload/stream/streamResource/addResource",GET_RES_LIST:i.f+"/stream/streamResource/getResources",DELETE_RES:i.f+"/stream/streamResource/deleteResource",GET_RES_BY_ID:i.f+"/stream/streamResource/getResourceById",RENAME_RES:i.f+"/stream/streamResource/renameResource",GET_ALARM_LIST:i.f+"/stream/streamAlarm/getAlarmList",ADD_ALARM:i.f+"/stream/streamAlarm/createAlarm",UPDATE_ALARM:i.f+"/stream/streamAlarm/updateAlarm",CLOSE_ALARM:i.f+"/stream/streamAlarm/closeAlarm",OEPN_ALARM:i.f+"/stream/streamAlarm/startAlarm",DELETE_ALARM:i.f+"/stream/streamAlarm/deleteAlarm",GET_ALARM_RECORDS:i.f+"/stream/streamAlarmRecord/getAlarmRecordList",ALARM_STATISTICS:i.f+"/stream/streamAlarmRecord/countAlarm",GET_CHECK_POINT_RANGE:i.f+"/stream/streamTaskCheckpoint/getCheckpointTimeRange",GET_CHECK_POINTS:i.f+"/stream/streamTaskCheckpoint/getCheckpointList"},c=a("xis9"),l=a("lFj+"),u=a("YEIV"),p=a.n(u),d=(n={STREAM_SAVE_DATA_SOURCE:i.f+"/stream/streamDataSource/addOrUpdateSource",STREAM_TEST_DATA_SOURCE_CONNECTION:i.f+"/stream/streamDataSource/checkConnection",STREAM_DELETE_DATA_SOURCE:i.f+"/stream/streamDataSource/deleteSource",GET_STREAM_TABLELIST:i.f+"/stream/streamDataSource/tablelist",STREAM_QUERY_DATA_SOURCE:i.f+"/stream/streamDataSource/pageQuery"},p()(n,"GET_STREAM_TABLELIST",i.f+"/stream/streamDataSource/list"),p()(n,"GET_STREAM_TABLECOLUMN",i.f+"/stream/streamDataSource/tablecolumn"),p()(n,"GET_TASK_LIST_OF_STREAM_SOURCE",i.f+"/stream/streamDataSource/getSourceTaskRef"),n),m=a("/T6w"),E=(a("UCWl"),APP_CONF.UIC_URL||""),f=APP_CONF.UIC_DOMAIN||"";t.a={sqlFormat:function(e){return c.a.post(l.a.SQL_FORMAT,e)},streamSqlFormat:function(e){return c.a.post(s.SQL_FORMAT,e)},unlockFile:function(e){return c.a.post(l.a.UNLOCK_FILE,e)},logout:function(){var e=this;c.a.post(s.APP_LOGOUT).then(function(t){1===t.code&&e.openLogin()})},openLogin:function(){r.a.clear(),o.a.deleteCookie("dt_user_id",f,"/"),o.a.deleteCookie("dt_token",f,"/"),o.a.deleteCookie("dt_tenant_id",f,"/"),o.a.deleteCookie("dt_tenant_name",f,"/"),o.a.deleteCookie("dt_username",f,"/"),o.a.deleteCookie("dt_is_tenant_admin",f,"/"),o.a.deleteCookie("dt_is_tenant_creator",f,"/"),o.a.deleteCookie("project_id",f,"/"),window.location.href=E+"/#/login"},addRoleUser:function(e){return c.a.post(s.ADD_ROLE_USRE,e)},getLoginedUser:function(){return c.a.post(s.GET_USER_BY_ID)},updateUserRole:function(e){return c.a.post(s.UPDATE_USER_ROLE,e)},getNotProjectUsers:function(e){return c.a.post(s.GET_NOT_PROJECT_USERS,e)},searchUICUsers:function(e){return c.a.post(s.SEARCH_UIC_USERS,e)},queryProjects:function(e){return c.a.post(s.QUERY_PROJECT_LIST,e)},getProjects:function(e){return c.a.post(s.GET_PROJECT_LIST,e)},getAllProjects:function(e){return c.a.post(s.GET_ALL_PROJECTS,e)},removeProjectUser:function(e){return c.a.post(s.REMOVE_USER_FROM_PROJECT,e)},addProjectUser:function(e){return c.a.post(s.ADD_PROJECT_USER,e)},getUserProjects:function(e){return c.a.post(s.GET_USRE_PROJECTS,e)},getProjectUsers:function(e){return c.a.post(s.GET_PROJECT_USERS,e)},getProjectByID:function(e){return c.a.post(s.GET_PROJECT_BY_ID,e)},upateProjectInfo:function(e){return c.a.post(s.UPDATE_PROJECT_INFO,e)},createProject:function(e){return c.a.post(s.CREATE_PROJECT,e)},getProjectInfo:function(e){return c.a.post(s.GET_PROJECT_INFO,e)},getProjectListInfo:function(e){return c.a.post(s.GET_PROJECT_LIST_INFO,e)},setSticky:function(e){return c.a.post(s.SET_STICKY,e)},deleteProject:function(e){return c.a.post(s.DELETE_PROJECT,e)},getRoleList:function(e){return c.a.post(s.GET_ROLE_LIST,e)},updateRole:function(e){return c.a.post(s.UPDATE_ROLE,e)},deleteRole:function(e){return c.a.post(s.DELETE_ROLE,e)},getRoleTree:function(e){return c.a.post(s.GET_ROLE_TREE,e)},getRoleInfo:function(e){return c.a.post(s.GET_ROLE_INFO,e)},saveTask:function(e){return c.a.post(s.SAVE_TASK,e)},forceUpdateTask:function(e){return c.a.post(s.FORCE_UPDATE_TASK,e)},startTask:function(e){return c.a.post(s.START_TASK,e)},stopTask:function(e){return c.a.post(s.STOP_TASK,e)},updateTaskRes:function(e){return c.a.post(s.UPDATE_TASK_RES,e)},getTasks:function(e){return c.a.post(s.GET_TASK_LIST,e)},getTask:function(e){return c.a.post(s.GET_TASK,e)},getTasksByStatus:function(e){return c.a.post(s.GET_TASKS_BY_STATUS,e)},searchTask:function(e){return c.a.post(s.SEARCH_TASKS_BY_NAME,e)},sortTask:function(e){return c.a.post(s.SORT_TASKS,e)},deleteTask:function(e){return c.a.post(s.DELETE_TASK,e)},taskStatistics:function(){return c.a.post(s.TASK_STATISTICS)},getTaskLogs:function(e){return c.a.post(s.GET_TASK_LOG,e)},searchRealtimeTask:function(e){return c.a.post(s.GLOBAL_SEARCH_TASK,e)},getRealtimeTaskTypes:function(e){return c.a.post(s.GET_TASK_TYPES,e)},getCheckPointRange:function(e){return c.a.post(s.GET_CHECK_POINT_RANGE,e)},getCheckPoints:function(e){return c.a.post(s.GET_CHECK_POINTS,e)},publishRealtimeTask:function(e){return c.a.post(s.PUBLISH_REALTIME_TASK,e)},taskVersionScheduleConf:function(e){return c.a.post(l.a.TASK_VERSION_SCHEDULE_CONF,e)},updateTaskOwner:function(e){return c.a.post(l.a.UPDATE_TASK_OWNER,e)},getTypeOriginData:function(e){return c.a.post(s.GET_TYPE_ORIGIN_DATA,e)},getTopicType:function(e){return c.a.post(s.GET_TOPIC_TYPE,e)},getStremTableType:function(e){return c.a.post(s.GET_STREM_TABLE_TYPE,e)},getCatalogues:function(e){return c.a.post(s.GET_CATALOGUE,e)},updateCatalogue:function(e){return c.a.post(s.UPDATE_CATALOGUE,e)},addCatalogue:function(e){return c.a.post(s.ADD_CATALOGUE,e)},deleteCatalogue:function(e){return c.a.post(s.DELETE_CATALOGUE,e)},locateStreamCataPosition:function(e){return c.a.post(s.GET_STREAM_CATALOGUE_BY_LOCATION,e)},getFunc:function(e){return c.a.post(s.GET_FUNC,e)},createFunc:function(e){return c.a.post(s.CREATE_FUNC,e)},delFunc:function(e){return c.a.post(s.DELETE_FUNC,e)},moveFunc:function(e){return c.a.post(s.MOVE_FUNC,e)},getSysFunc:function(e){return c.a.post(s.GET_SYS_FUNC,e)},uploadRes:function(e){return c.a.postAsFormData(s.UPLOAD_RES,e)},getResList:function(e){return c.a.post(s.GET_RES_LIST,e)},deleteRes:function(e){return c.a.post(s.DELETE_RES,e)},getRes:function(e){return c.a.post(s.GET_RES_BY_ID,e)},renameRes:function(e){return c.a.post(s.RENAME_RES,e)},getAlarmList:function(e){return c.a.post(s.GET_ALARM_LIST,e)},addAlarm:function(e){return c.a.post(s.ADD_ALARM,e)},updateAlarm:function(e){return c.a.post(s.UPDATE_ALARM,e)},closeAlarm:function(e){return c.a.post(s.CLOSE_ALARM,e)},openAlarm:function(e){return c.a.post(s.OEPN_ALARM,e)},deleteAlarm:function(e){return c.a.post(s.DELETE_ALARM,e)},getAlarmRecords:function(e){return c.a.post(s.GET_ALARM_RECORDS,e)},getAlarmStatistics:function(e){return c.a.post(s.ALARM_STATISTICS,e)},saveOfflineTask:function(e){return c.a.post(l.a.SAVE_TASK,e)},forceUpdateOfflineTask:function(e){return c.a.post(l.a.FORCE_UPDATE_TASK,e)},getOfflineTaskByID:function(e){return c.a.post(l.a.GET_TASK,e)},deleteOfflineTask:function(e){return c.a.post(l.a.DELETE_TASK,e)},queryOfflineCataTask:function(e){return c.a.post(l.a.QUERY_CATA_TASK,e)},getOfflineTasksByProject:function(e){return c.a.post(l.a.GET_TASKS_BY_PROJECT_ID,e)},getOfflineTasksByName:function(e){return c.a.post(l.a.GET_TASKS_BY_NAME,e)},queryOfflineTasks:function(e){return c.a.post(l.a.QUERY_TASKS,e)},getOfflineTaskLog:function(e){return c.a.post(l.a.GET_TASK_LOG,e)},searchOfflineTask:function(e){return c.a.post(l.a.GLOBAL_SEARCH_TASK,e)},getCustomParams:function(e){return c.a.post(l.a.GET_CUSTOM_TASK_PARAMS,e)},getSyncTemplate:function(e){return c.a.post(l.a.GET_SYNC_SCRIPT_TEMPLATE,e)},getCreateTargetTable:function(e){return c.a.post(s.GET_CREATE_TARGET_TABLE,e)},saveScript:function(e){return c.a.post(l.a.SAVE_SCRIPT,e)},forceUpdateOfflineScript:function(e){return c.a.post(l.a.FORCE_UPDATE_SCRIPT,e)},getScriptById:function(e){return c.a.post(l.a.GET_SCRIPT_BY_ID,e)},execScript:function(e){return c.a.post(l.a.EXEC_SCRIPT,e)},stopScript:function(e){return c.a.post(l.a.STOP_SCRIPT,e)},deleteScript:function(e){return c.a.post(l.a.DELETE_SCRIPT,e)},getScriptTypes:function(e){return c.a.post(l.a.GET_SCRIPT_TYPES,e)},queryJobs:function(e){return c.a.post(l.a.QUERY_JOBS,e)},publishOfflineTask:function(e){return c.a.post(l.a.PUBLISH_TASK,e)},getTaskTypes:function(e){return c.a.post(l.a.GET_TASK_TYPES,e)},getJobById:function(e){return c.a.post(l.a.GET_JOB_BY_ID,e)},getJobGraph:function(e){return c.a.post(l.a.GET_JOB_GRAPH,e)},getJobStatistics:function(e){return c.a.post(l.a.GET_JOB_STATISTICS,e)},getJobTopTime:function(e){return c.a.post(l.a.GET_JOB_TOP_TIME,e)},getJobTopError:function(e){return c.a.post(l.a.GET_JOB_TOP_ERROR,e)},patchTaskData:function(e){return c.a.post(l.a.PATCH_TASK_DATA,e)},getTaskChildren:function(e){return c.a.post(l.a.GET_TASK_CHILDREN,e)},getTaskParents:function(e){return c.a.post(l.a.GET_TASK_PARENTS,e)},getFillData:function(e){return c.a.post(l.a.GET_FILL_DATA,e)},getFillDate:function(e){return c.a.post(l.a.GET_FILL_DATE,e)},getFillDataDetail:function(e){return c.a.post(l.a.GET_FILL_DATA_DETAIL,e)},startJob:function(e){return c.a.post(l.a.START_JOB,e)},stopJob:function(e){return c.a.post(l.a.STOP_JOB,e)},restartAndResume:function(e){return c.a.post(l.a.RESTART_AND_RESUME_JOB,e)},batchStopJob:function(e){return c.a.post(l.a.BATCH_STOP_JOBS,e)},batchRestartAndResume:function(e){return c.a.post(l.a.BATCH_RESTART_AND_RESUME_JOB,e)},batchRestartJob:function(e){return c.a.post(l.a.BATCH_RESTART_JOB,e)},getJobChildren:function(e){return c.a.post(l.a.GET_JOB_CHILDREN,e)},getJobParents:function(e){return c.a.post(l.a.GET_JOB_PARENT,e)},execSQLImmediately:function(e){return c.a.post(l.a.EXEC_SQL_IMMEDIATELY,e)},stopSQLImmediately:function(e){return c.a.post(l.a.STOP_SQL_IMMEDIATELY,e)},selectSQLResultData:function(e){return c.a.post(l.a.SELECT_SQL_RESULT_DATA,e)},checkIsLoop:function(e){return c.a.post(l.a.CHECK_IS_LOOP,e)},getJobRuntimeInfo:function(e){return c.a.post(l.a.GET_JOB_RUNTIME_INFO,e)},queryJobStatics:function(e){return c.a.post(l.a.QUERY_JOB_STATISTICS,e)},queryJobSubNodes:function(e){return c.a.post(l.a.QUERY_JOB_SUB_NODES,e)},forzenTask:function(e){return c.a.post(l.a.FROZEN_TASK,e)},statisticsTaskRunTime:function(e){return c.a.post(l.a.STATISTICS_TASK_RUNTIME,e)},stopFillDataJobs:function(e){return c.a.post(l.a.STOP_FILL_DATA_JOBS,e)},getRestartJobs:function(e){return c.a.post(l.a.GET_RESTART_JOBS,e)},getOfflineCatalogue:function(e){return c.a.post(l.a.GET_OFFLINE_CATALOGUE,e)},addOfflineCatalogue:function(e){return c.a.post(l.a.ADD_OFFLINE_CATALOGUE,e)},editOfflineCatalogue:function(e){return c.a.post(l.a.EDIT_OFFLINE_CATALOGUE,e)},locateCataPosition:function(e){return c.a.post(l.a.GET_OFFLINE_CATALOGUE_BY_LOCATION,e)},addOfflineResource:function(e){return c.a.postAsFormData(l.a.ADD_OFFLINE_RESOURCE,e)},addOfflineTask:function(e){return c.a.post(l.a.ADD_OFFLINE_TASK,e)},getOfflineTaskDetail:function(e){return c.a.post(l.a.GET_OFFLINE_TASK,e)},getOfflineTaskByName:function(e){return c.a.post(l.a.GET_OFFLINE_TASK_BY_NAME,e)},getOfflineDataSource:function(e){return c.a.post(l.a.GET_OFFLINE_DATASOURCE,e)},getOfflineTableList:function(e){return c.a.post(l.a.GET_OFFLINE_TABLELIST,e)},getOfflineTableColumn:function(e){return c.a.post(l.a.GET_OFFLINE_TABLECOLUMN,e)},getOfflineJobData:function(e){return c.a.post(l.a.GET_OFFLINE_JOBDATA,e)},saveOfflineJobData:function(e){return c.a.post(l.a.SAVE_OFFLINE_JOBDATA,e)},addOfflineFunction:function(e){return c.a.post(l.a.ADD_OFFLINE_FUNCTION,e)},getTableListByName:function(e){return c.a.post(s.GET_TABLE_LIST_BY_NAME,e)},getRecommentTask:function(e){return c.a.post(s.GET_RECOMMEND_TASK,e)},getColumnsOfTable:function(e){return c.a.post(s.GET_COLUMNS_OF_TABLE,e)},getAllFunction:function(e){return c.a.post(s.GET_ALL_FUNCTION_NAME,e)},delOfflineTask:function(e){return c.a.post(l.a.DEL_OFFLINE_TASK,e)},delOfflineFolder:function(e){return c.a.post(l.a.DEL_OFFLINE_FOLDER,e)},delOfflineRes:function(e){return c.a.post(l.a.DEL_OFFLINE_RES,e)},delOfflineFn:function(e){return c.a.post(l.a.DEL_OFFLINE_FN,e)},moveOfflineFn:function(e){return c.a.post(l.a.MOVE_OFFLINE_FN,e)},getOfflineFn:function(e){return c.a.post(l.a.GET_FN_DETAIL,e)},getOfflineRes:function(e){return c.a.post(l.a.GET_RES_DETAIL,e)},getDataPreview:function(e){return c.a.post(l.a.DATA_PREVIEW,e)},getHBaseColumnFamily:function(e){return c.a.post(l.a.GET_HBASE_COLUMN_FAMILY,e)},getOfflineAlarmList:function(e){return c.a.post(l.a.GET_ALARM_LIST,e)},addOfflineAlarm:function(e){return c.a.post(l.a.ADD_ALARM,e)},updateOfflineAlarm:function(e){return c.a.post(l.a.UPDATE_ALARM,e)},closeOfflineAlarm:function(e){return c.a.post(l.a.CLOSE_ALARM,e)},openOfflineAlarm:function(e){return c.a.post(l.a.OEPN_ALARM,e)},deleteOfflineAlarm:function(e){return c.a.post(l.a.DELETE_ALARM,e)},getOfflineAlarmRecords:function(e){return c.a.post(l.a.GET_ALARM_RECORDS,e)},getOfflineAlarmStatistics:function(e){return c.a.post(l.a.ALARM_STATISTICS,e)},addOrUpdateSource:function(e){return c.a.post(l.a.SAVE_DATA_SOURCE,e)},deleteDataSource:function(e){return c.a.post(l.a.DELETE_DATA_SOURCE,e)},queryDataSource:function(e){return c.a.post(l.a.QUERY_DATA_SOURCE,e)},getDataSourceById:function(e){return c.a.post(l.a.GET_DATA_SOURCE_BY_ID,e)},testDSConnection:function(e){return c.a.post(l.a.TEST_DATA_SOURCE_CONNECTION,e)},getDataSourceTypes:function(e){return c.a.post(l.a.GET_DATA_SOURCE_TYPES,e)},saveSyncConfig:function(e){return c.a.post(l.a.SAVE_SYNC_CONFIG,e)},getSyncHistoryList:function(e){return c.a.post(l.a.GET_SYNC_HISTORY,e)},getSyncDetail:function(e){return c.a.post(l.a.GET_SYNC_DETAIL,e)},publishSyncTask:function(e){return c.a.post(l.a.PUBLISH_SYNC_TASK,e)},checkSyncConfig:function(e){return c.a.post(l.a.CHECK_SYNC_CONFIG,e)},getTaskOfOfflineSource:function(e){return c.a.post(l.a.GET_TASK_LIST_OF_OFFLINE_SOURCE,e)},getTaskOfStreamSource:function(e){return c.a.post(d.GET_TASK_LIST_OF_STREAM_SOURCE,e)},createTable:function(e){return c.a.post(m.a.CREATE_TABLE,e)},searchTable:function(e){return c.a.post(m.a.SEARCH_TABLE,e)},getTable:function(e){return c.a.post(m.a.GET_TABLE,e)},getTablesByName:function(e){return c.a.post(m.a.GET_TABLES_BY_NAME,e)},previewTable:function(e){return c.a.post(m.a.PREVIEW_TABLE,e)},saveTable:function(e){return c.a.post(m.a.SAVE_TABLE,e)},searchLog:function(e){return c.a.post(m.a.SEARCH_LOG,e)},getProjectUsersData:function(e){return c.a.post(s.GET_PROJECT_USERS,e)},getCreateTableCode:function(e){return c.a.post(m.a.GET_CREATE_CODE,e)},dropTable:function(e){return c.a.post(m.a.DROP_TABLE,e)},createDdlTable:function(e){return c.a.post(m.a.DDL_CREATE_TABLE,e)},uploadTableData:function(e){return c.a.post(m.a.UPLOAD_TABLE_DATA,e)},checkTableExist:function(e){return c.a.post(m.a.CHECK_TABLE_EXIST,e)},checkHdfsLocExist:function(e){return c.a.post(m.a.CHECK_HDFSLOC_EXIST,e)},getTablePartition:function(e){return c.a.post(m.a.GET_TABLE_PARTITION,e)},checkTablePartition:function(e){return c.a.post(m.a.CHECK_TABLE_PARTITION,e)},importLocalData:function(e){return c.a.postAsFormData(m.a.UPLOAD_TABLE_DATA,e)},getTableRelTree:function(e){return c.a.post(m.a.GET_REL_TABLE_TREE,e)},getRelTableInfo:function(e){return c.a.post(m.a.GET_REL_TABLE_INFO,e)},getParentRelTable:function(e){return c.a.post(m.a.GET_PARENT_REL_TABLES,e)},getChildRelTables:function(e){return c.a.post(m.a.GET_CHILD_REL_TABLES,e)},getRelTableTasks:function(e){return c.a.post(m.a.GET_REL_TABLE_TASKS,e)},getDirtyDataTrend:function(e){return c.a.post(m.a.GET_DIRTY_DATA_TREND,e)},top30DirtyData:function(e){return c.a.post(m.a.TOP30_DIRTY_DATA,e)},getDirtyDataTables:function(e){return c.a.post(m.a.GET_DIRTY_DATA_TABLES,e)},getPubSyncTask:function(e){return c.a.post(m.a.GET_PUB_SYNC_TASK,e)},getDirtyDataTableInfo:function(e){return c.a.post(m.a.GET_DIRTY_DATA_TABLE_INFO,e)},getDirtyDataTableOverview:function(e){return c.a.post(m.a.GET_DIRTY_TABLE_OVERVIEW,e)},countDirtyData:function(e){return c.a.post(m.a.COUNT_DIRTY_DATA,e)},getDirtyDataAnalytics:function(e){return c.a.post(m.a.GET_DIRTY_DATA_ANALYTICS,e)},countProjectTable:function(e){return c.a.post(l.a.PROJECT_TABLE_COUNT,e)},countProjectStore:function(e){return c.a.post(l.a.PROJECT_STORE_COUNT,e)},getProjectStoreTop:function(e){return c.a.post(l.a.PROJECT_STORE_TOP,e)},getProjectTableStoreTop:function(e){return c.a.post(l.a.PROJECT_TABLE_STORE_TOP,e)},getProjectDataOverview:function(e){return c.a.post(l.a.PROJECT_DATA_OVERVIEW,e)},streamSaveDataSource:function(e){return c.a.post(d.STREAM_SAVE_DATA_SOURCE,e)},streamTestDataSourceConnection:function(e){return c.a.post(d.STREAM_TEST_DATA_SOURCE_CONNECTION,e)},streamDeleteDataSource:function(e){return c.a.post(d.STREAM_DELETE_DATA_SOURCE,e)},getStreamTablelist:function(e){return c.a.post(d.GET_STREAM_TABLELIST,e)},streamQueryDataSource:function(e){return c.a.post(d.STREAM_QUERY_DATA_SOURCE,e)},getStreamDataSource:function(e){return c.a.post(d.GET_STREAM_DATA_SOURCE,e)},getStreamTableColumn:function(e){return c.a.post(d.GET_STREAM_TABLECOLUMN,e)}}},tHbZ:function(e,t,a){"use strict";a.d(t,"a",function(){return h});a("93XW");var n=a("d1El"),r=a.n(n),o=a("Yz+Y"),i=a.n(o),s=a("iCc5"),c=a.n(s),l=a("V7oC"),u=a.n(l),p=a("FYw3"),d=a.n(p),m=a("mRg0"),E=a.n(m),f=a("sbe7"),T=a.n(f),h=function(e){function t(e){return c()(this,t),d()(this,(t.__proto__||i()(t)).call(this,e))}return E()(t,e),u()(t,[{key:"render",value:function(){return this.props.notSynced?T.a.createElement(r.a,{title:"修改已保存至本地存储但尚未同步到服务器，你可以点击上面的保存按钮立即同步。"},T.a.createElement("span",{style:{display:"inline-block",marginRight:8,borderRadius:"50%",border:"4px solid ",borderColor:"#EF5350"}})):T.a.createElement("span",{style:{display:"inline-block",marginRight:8,borderRadius:"50%",border:"4px solid ",borderColor:"#00A755"}})}}]),t}(T.a.Component)},udPp:function(e,t,a){"use strict";var n=a("zbcj"),r=a.n(n)()(["UPDATE_APP"],{prefix:"app/"});t.a=r},"vB4/":function(e,t,a){"use strict";a("zbcj");var n=a("PVY6");t.a={LOGOUT:n.g+"/v2/logout",CHECKISROOT:n.b+"/status/status",RDOS_SEARCH_UIC_USERS:n.f+"/common/project/getUicUsersNotInProject",RDOS_ADD_USER:n.f+"/common/roleUser/addRoleUserNew",DQ_SEARCH_UIC_USERS:n.e+"/user/getUicUsersNotInProject",DQ_ADD_USER:n.e+"/roleUser/addRoleUserNew",DATAAPI_MASSAGE_QUERY:n.c+"/notify/pageQuery",DATAAPI_GET_MASSAGE_BY_ID:n.c+"/notify/getOne",DATAAPI_MASSAGE_MARK_AS_READ:n.c+"/notify/tabRead",DATAAPI_MASSAGE_MARK_AS_ALL_READ:n.c+"/notify/allRead",DATAAPI_MASSAGE_DELETE:n.c+"/notify/delete",DATAAPI_QUERY_USER:n.c+"/user/pageQuery",DATAAPI_REMOVE_USER:n.c+"/roleUser/remove",DATAAPI_UPDATE_USER_ROLE:n.c+"/roleUser/updateUserRole",DATAAPI_ADD_USER:n.c+"/roleUser/addRoleUserNew",DATAAPI_ROLE_QUERY:n.c+"/role/pageQuery",DATAAPI_GET_ROLE_TREE:n.c+"/permission/tree",DATAAPI_ROLE_PERMISSION:n.c+"/permission/getPermissionIdsByRoleId",DATAAPI_ROLE_PERMISSION_ADD_OR_EDIT:n.c+"/role/addOrUpdateRole",DATAAPI_REMOVE_ROLE:n.c+"/role/deleteRole",DATAAPI_SEARCH_UIC_USERS:n.c+"/user/getUicUsersNotInProject",DL_MASSAGE_QUERY:n.d+"/notify/pageQuery",DL_GET_MASSAGE_BY_ID:n.d+"/notify/getOne",DL_MASSAGE_MARK_AS_READ:n.d+"/notify/tabRead",DL_MASSAGE_MARK_AS_ALL_READ:n.d+"/notify/allRead",DL_MASSAGE_DELETE:n.d+"/notify/delete",DL_QUERY_USER:n.d+"/user/pageQuery",DL_REMOVE_USER:n.d+"/roleUser/remove",DL_ADD_USER:n.d+"/roleUser/addRoleUserNew",DL_UPDATE_USER_ROLE:n.d+"/roleUser/updateUserRole",DL_ROLE_QUERY:n.d+"/role/pageQuery",DL_GET_ROLE_TREE:n.d+"/permission/tree",DL_ROLE_PERMISSION:n.d+"/permission/getPermissionIdsByRoleId",DL_ROLE_PERMISSION_ADD_OR_EDIT:n.d+"/role/addOrUpdateRole",DL_REMOVE_ROLE:n.d+"/role/deleteRole",DL_SEARCH_UIC_USERS:n.d+"/user/getUicUsersNotInProject"}},vFRS:function(e,t,a){"use strict";a("tL+A");var n=a("QpBz"),r=a.n(n),o=(a("zmYW"),a("DtFj")),i=a.n(o),s=(a("MaXC"),a("4IMT")),c=a.n(s),l=(a("pJsf"),a("g4D/")),u=a.n(l),p=a("Yz+Y"),d=a.n(p),m=a("iCc5"),E=a.n(m),f=a("V7oC"),T=a.n(f),h=a("FYw3"),_=a.n(h),A=a("mRg0"),g=a.n(A),b=(a("PFYH"),a("Jv8k")),y=a.n(b),v=(a("Z8Mf"),a("j7zX")),S=a.n(v),C=a("sbe7"),R=a.n(C),O=(a("17x9"),a("LvDl")),I=a("dtw8"),D=a("7Qib"),L=a("1I4j"),P=a("btJW");function k(e){var t="";switch(e.value){case 0:t="#EF5350";break;case 1:default:t="#d9d9d9"}return R.a.createElement(P.a,{style:{background:t}})}var N=a("YIQC"),U=S.a.TabPane,M=y.a.Item,F=function(e){function t(){var e,a,n,r;E()(this,t);for(var o=arguments.length,s=Array(o),l=0;l<o;l++)s[l]=arguments[l];return a=n=_()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={selectedApp:"",table:{data:[]},selectedRowKeys:[],selectedRows:[],selectedAll:!1},n.loadMsg=function(e){var t=n.props.msgList,a=n.state.selectedApp,r=Object(O.assign)({currentPage:t.currentPage,pageSize:10,mode:t.msgType},e);L.a.getMessage(a,r).then(function(e){n.setState({table:e.data})})},n.getUnreadRows=function(){var e=[];return n.state.selectedRows.forEach(function(t){0===t.readStatus&&e.push(t.id)}),e},n.resetRowKeys=function(){n.setState({selectedRowKeys:[],selectedRows:[],selectedAll:!1})},n.markAsRead=function(){var e=n.state,t=e.selectedApp,a=(e.selectedRowKeys,n.getUnreadRows());n.selectedNotNull(a)&&L.a.markAsRead(t,{notifyRecordIds:a}).then(function(e){1===e.code&&(n.resetRowKeys(),n.loadMsg())})},n.markAsAllRead=function(){var e=n.state,t=e.selectedApp,a=(e.selectedRowKeys,n.getUnreadRows());L.a.markAsAllRead(t,{notifyRecordIds:a}).then(function(e){1===e.code&&(n.resetRowKeys(),n.loadMsg())})},n.deleteMsg=function(){var e=n.state,t=e.selectedApp,a=e.selectedRowKeys;n.selectedNotNull(a)&&L.a.deleteMsgs(t,{notifyRecordIds:a}).then(function(e){1===e.code&&(n.loadMsg(),n.setState({selectedAll:!1,selectedRowKeys:[]}))})},n.handleTableChange=function(e,t){n.props.updateMsg({currentPage:e.current}),n.setState({selectedRowKeys:[],selectedAll:!1},n.loadMsg)},n.onPaneChange=function(e){n.props.updateMsg({currentPage:1,msgType:e}),n.loadMsg({mode:e})},n.onAppSelect=function(e){var t=e.key;n.props.updateMsg({currentPage:1}),n.setState({selectedApp:t,selectedRowKeys:[]},n.loadMsg)},n.onCheckAllChange=function(e){var t=[],a=[];if(e.target.checked)for(var r=n.state.table.data,o=0;o<r.length;o++){var i=r[o];t.push(i.id),a.push(i)}n.setState({selectedRowKeys:t,selectedRows:a,selectedAll:e.target.checked})},n.tableFooter=function(e){var t=n.props.msgList,a=n.state,r=a.selectedAll,o=a.table,i=!o||!o.data||0===o.data.length;return R.a.createElement("tr",{className:"ant-table-row  ant-table-row-level-0"},R.a.createElement("td",{style:{padding:"0 24px"}},R.a.createElement(u.a,{checked:r,disabled:i,onChange:n.onCheckAllChange})),R.a.createElement("td",null,R.a.createElement(c.a,{size:"small",type:"primary",disabled:i,onClick:n.deleteMsg},"删除"),"3"!==t.msgType&&R.a.createElement("span",null,R.a.createElement(c.a,{size:"small",type:"primary",disabled:i,onClick:n.markAsRead},"标为已读"),R.a.createElement(c.a,{disabled:i,size:"small",type:"primary",onClick:n.markAsAllRead},"全部已读"))))},n.renderPane=function(){var e=n.props,t=e.apps,a=e.msgList,r=n.state,o=r.table,s=r.selectedApp,c=r.selectedRowKeys,l=[];if(t&&t.length>0)for(var u=0;u<t.length;u++){var p=t[u];p.enable&&"main"!==p.id&&!p.disableExt&&l.push(R.a.createElement(M,{app:p,key:p.id},p.name))}var d=[{title:"标题与内容",dataIndex:"content",key:"content",render:function(e,t){return R.a.createElement(I.c,{to:"message/detail/"+t.id+"?app="+s},R.a.createElement(k,{value:t.readStatus})," ",e)}},{width:100,title:"状态",dataIndex:"readStatus",key:"readStatus",render:function(e){var t="未读";return 1===e&&(t="已读"),t}},{width:150,title:"发送时间",dataIndex:"gmtCreate",key:"gmtCreate",render:function(e){return D.a.formatDateTime(e)}},{width:120,title:"类型描述",dataIndex:"status",key:"status",render:function(e){return Object(N.b)(s,e)}}],m={selectedRowKeys:c,onChange:function(e,t){n.setState({selectedRowKeys:e,selectedRows:t})}},E={total:o&&o.totalCount,defaultPageSize:10,current:a.currentPage};return R.a.createElement("div",{className:"m-panel",style:{overflowY:"auto",height:"calc(100% - 80px)"}},R.a.createElement(y.a,{selectedKeys:[s],onSelect:n.onAppSelect,className:"left"},l),R.a.createElement("div",{className:"right panel-content"},R.a.createElement(i.a,{rowKey:"id",className:"m-table",columns:d,dataSource:o.data||[],rowSelection:m,onChange:n.handleTableChange,pagination:E,footer:n.tableFooter})))},r=a,_()(n,r)}return g()(t,e),T()(t,[{key:"componentDidMount",value:function(){var e=this.props.apps,t=D.a.getParameterByName("app"),a=e.find(function(e){return e.default});a&&this.setState({selectedApp:t||a.id},this.loadMsg)}},{key:"selectedNotNull",value:function(e){return!(!e||e.length<=0)||(r.a.error("请选择要操作的消息！"),!1)}},{key:"render",value:function(){var e=this.props.msgList,t=this.renderPane();return R.a.createElement("div",{className:"box-1 m-tabs",style:{height:"calc(100% - 40px)"}},R.a.createElement(S.a,{animated:!1,activeKey:e.msgType,onChange:this.onPaneChange},R.a.createElement(U,{tab:"全部消息",key:"1"}," ",t," "),R.a.createElement(U,{tab:"未读消息",key:"2"}," ",t," "),R.a.createElement(U,{tab:"已读消息",key:"3"}," ",t," ")))}}]),t}(C.Component);t.a=F},w3QJ:function(e,t,a){"use strict";a.d(t,"a",function(){return p}),a.d(t,"b",function(){return d});var n=a("sk9p"),r=a.n(n),o=a("FyfS"),i=a.n(o),s=a("oF3Q"),c=a.n(s),l=a("gDS+"),u=a.n(l);function p(e){return"#link#"+u()(e)+"#link#"}function d(e){var t=/#link#(.+)#link#/g,a=[],n=void 0;for(n=t.exec(e);n;){var o=document.createElement("a"),s=JSON.parse(n[1]),l=c()(s),u=!0,p=!1,d=void 0;try{for(var m,E=i()(l);!(u=(m=E.next()).done);u=!0){var f=r()(m.value,2),T=f[0],h=f[1];o.setAttribute(T,h)}}catch(e){p=!0,d=e}finally{try{!u&&E.return&&E.return()}finally{if(p)throw d}}o.className="editor_custom_link",o.innerHTML="logDownload",a.push({start:n.index,end:n.index+n[0].length,node:o}),n=t.exec(e)}return a}},wFDc:function(e,t,a){"use strict";var n=a("iCc5"),r=a.n(n),o=a("V7oC"),i=a.n(o),s=(a("56ye"),function(){function e(){r()(this,e),this.className="progress-bar",this.hodor=document.createElement("div"),this.hodor.className=this.className,this.img=document.createElement("div"),this.img.className="progress-img",this.img.innerHTML='<svg version="1.1" id="loader-1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"\n                         width="30px" height="30px" viewBox="0 0 50 50" style="enable-background:new 0 0 50 50;" xml:space="preserve">\n                        <path fill="#2491F7" d="M25.251,6.461c-10.318,0-18.683,8.365-18.683,18.683h4.068c0-8.071,6.543-14.615,14.615-14.615V6.461z">\n                        <animateTransform attributeType="xml"\n                          attributeName="transform"\n                          type="rotate"\n                          from="0 25 25"\n                          to="360 25 25"\n                          dur="0.6s"\n                          repeatCount="indefinite"/>\n                        </path>\n                      </svg>'}return i()(e,[{key:"show",value:function(){document.body.appendChild(this.hodor),document.body.appendChild(this.img)}},{key:"hide",value:function(){this.hasAdded()&&(document.body.removeChild(this.hodor),document.body.removeChild(this.img))}},{key:"hasAdded",value:function(){return document.getElementsByClassName(this.className).length>0}}]),e}());t.a=new s},wPMF:function(e,t,a){"use strict";a.d(t,"b",function(){return n}),a.d(t,"c",function(){return r}),a.d(t,"a",function(){return o}),a.d(t,"d",function(){return i});var n={MAIN:"main",RDOS:"rdos",DATA_QUALITY:"dataQuality",API:"dataApi",LABEL:"dataLabel",DATA_MAP:"map",META_DATA:"metaData"},r={TENANT_OWVER:1,PROJECT_OWNER:2,PROJECT_ADMIN:3,VISITOR:4,OPERATION:5,DEVELOPER:6,CUSTOM:7},o={TENANT_OWVER:1,ADMIN:2,VISITOR:3,DEVELOPER:4,CUSTOM:5},i={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}}},xis9:function(e,t,a){"use strict";var n=a("gDS+"),r=a.n(n),o=a("iCc5"),i=a.n(o),s=a("V7oC"),c=a.n(s),l=(a("bZMm"),a("wFDc")),u=a("5012"),p=a("2FT0"),d=function(){function e(){i()(this,e)}return c()(e,[{key:"get",value:function(e,t){var a=t?this.build(e,t):e;return this.request(a,{method:"GET"})}},{key:"post",value:function(e,t){var a={method:"POST"};return t&&(a.body=r()(t)),this.request(e,a)}},{key:"postAsFormData",value:function(e,t){var a={method:"POST"};return t&&(a.body=this.buildFormData(t)),this.request(e,a)}},{key:"postForm",value:function(e,t){var a={method:"POST"};return t&&(a.body=new FormData(t)),this.request(e,a)}},{key:"request",value:function(e,t){return l.a.show(),t.credentials="same-origin",fetch(e,t).then(p.b).then(function(e){return setTimeout(function(){l.a.hide()},300),e.json()}).then(p.a).catch(function(e){return l.a.hide(),Object(u.h)("请求异常","服务器可能出了点问题, 请稍后再试！"),e})}},{key:"defaultHeader",value:function(){return{Accept:"*/*","Content-Type":"application/json"}}},{key:"build",value:function(e,t){var a=[];if(t)for(var n in t)n&&a.push(n+"="+encodeURIComponent(t[n]));return e+"?"+a.join("&")}},{key:"buildFormData",value:function(e){if(e){var t=new FormData;for(var a in e)a&&t.append(a,e[a]);return t}}}]),e}();t.a=new d},yGiC:function(e,t,a){"use strict";a("7Qib");var n=a("W95b"),r=a("hPfy");t.a={queryRole:function(e){return n.a.post(r.a.DQ_ROLE_QUERY,e)},updateRole:function(e){return n.a.post(r.a.DQ_ROLE_UPDATE,e)},deleteRole:function(e){return n.a.post(r.a.DQ_ROLE_DELETE,e)},getRolePerissions:function(e){return n.a.post(r.a.DQ_ROLE_PERMISSION_TREE,e)},getRolePerission:function(e){return n.a.post(r.a.DQ_ROLE_PERMISSION,e)},getUserById:function(e){return n.a.post(r.a.DQ_GET_USER_BY_ID,e)},addUser:function(e){return n.a.post(r.a.DQ_USER_ROLE_ADD,e)},delUser:function(e){return n.a.post(r.a.DQ_USER_ROLE_DELETE,e)},updateUser:function(e){return n.a.post(r.a.DQ_USER_ROLE_UPDATE,e)},getUsers:function(e){return n.a.post(r.a.DQ_GET_USER_LIST,e)},getUserPages:function(e){return n.a.post(r.a.DQ_GET_USER_PAGES,e)},getUsersNotInProject:function(e){return n.a.post(r.a.DQ_GET_USER_NOT_IN_PROJECT,e)}}}}]);