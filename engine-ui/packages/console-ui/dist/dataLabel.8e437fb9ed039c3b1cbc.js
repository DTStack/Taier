(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{102:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(39),r=a.n(n)()(["CHANGE_LOADING","GET_DATA_SOURCES","GET_DATA_SOURCES_TYPE","GET_DATA_SOURCES_LIST","GET_TAG_DATA_SOURCES_LIST","GET_DATA_SOURCES_TABLE","RESET_DATA_SOURCES_TABLE","GET_DATA_SOURCES_COLUMN","RESET_DATA_SOURCES_COLUMN","GET_DATA_SOURCES_PREVIEW"],{prefix:"dataSource/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(r,"dataSourceActionType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/dataSourceActionType.js")},142:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var n=a(4),r=a.n(n),i=a(0),s=a.n(i);function o(e){var t=e.style,a=r()({},{textIndent:"5px",backgroundColor:"transparent",backgroundImage:"none",width:"100%",border:"none"},t);return s.a.createElement("textarea",r()({},e,{style:a}))}"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(o,"TableCell","/Users/ziv/Development/Workspace/data-stack/src/widgets/tableCell/index.js")},151:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(39),r=a.n(n)()(["CHANGE_LOADING","GET_RULE_TAG_LIST","GET_REGISTERED_TAG_LIST","GET_ALL_IDENTIFY_COLUMN"],{prefix:"tagConfig/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(r,"tagConfigActionType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/tagConfigActionType.js")},162:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(39),r=a.n(n)()(["GET_CATALOGUE","GET_API_MARKET_LIST","GET_MARKET_API_DETAIL","GET_API_EXT_INFO"],{prefix:"apiMarket/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(r,"apiMarketActionType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/apiMarketActionType.js")},176:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(149);function r(e){return{type:n.a.UPDATE_APP,data:e}}"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(r,"updateApp","/Users/ziv/Development/Workspace/data-stack/src/webapps/main/actions/app.js")},177:function(e,t,a){"use strict";a.d(t,"a",function(){return s});var n=a(9),r=a(110),i={id:0,dtuicUserId:0,userName:"未登录"};function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,t=arguments[1];switch(t.type){case r.a.GET_USER:return t.data;case r.a.UPDATE_USER:return null!==t.data?Object(n.assign)(e,t.data):e;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(i,"initalUser","/Users/ziv/Development/Workspace/data-stack/src/webapps/main/reducers/modules/user.js"),__REACT_HOT_LOADER__.register(s,"user","/Users/ziv/Development/Workspace/data-stack/src/webapps/main/reducers/modules/user.js"))},178:function(e,t,a){"use strict";a.d(t,"a",function(){return u});var n=a(14),r=a(192),i=a(143),s=a.n(i),o=a(62),l=a(113);function c(e){return Object(o.e)(e,Object(o.d)(Object(o.a)(s.a,Object(r.createLogger)()),window.devToolsExtension?window.devToolsExtension():function(e){return e}))}function p(e){return Object(o.e)(e,Object(o.a)(s.a))}function u(e,t){var a=p(e),r=t&&"hash"===t?n.g:n.f;return{store:a,history:Object(l.syncHistoryWithStore)(r,a)}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(c,"configureStoreDev","/Users/ziv/Development/Workspace/data-stack/src/utils/reduxUtils.js"),__REACT_HOT_LOADER__.register(p,"configureStoreProd","/Users/ziv/Development/Workspace/data-stack/src/utils/reduxUtils.js"),__REACT_HOT_LOADER__.register(u,"getStore","/Users/ziv/Development/Workspace/data-stack/src/utils/reduxUtils.js"))},196:function(e,t,a){"use strict";var n=a(39),r=a.n(n)()(["GET_USER_LIST","GET_ALL_MENU_LIST","GET_PERIOD_TYPE","GET_NOTIFY_TYPE"],{prefix:"common/"}),i=r;t.a=i;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(r,"commonActionType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/commonActionType.js"),__REACT_HOT_LOADER__.register(i,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/commonActionType.js"))},227:function(e,t,a){},231:function(e,t,a){},233:function(e,t,a){},235:function(e,t,a){},387:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(39),r=a.n(n)()(["GET_APPLYING_LIST","GET_APPLYED_LIST"],{prefix:"mine/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(r,"mineActionType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/mineActionType.js")},393:function(e,t,a){},569:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(39),r=a.n(n)()(["GET_ALL_APPLY_LIST"],{prefix:"approval/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(r,"approvalActionType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/approvalActionType.js")},570:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var n=a(39),r=a.n(n)()(["GET_ALL_API_LIST"],{prefix:"apiManage/"});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(r,"apiManageActionType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/apiManageActionType.js")},606:function(e,t,a){var n={"./af":369,"./af.js":369,"./ar":368,"./ar-dz":367,"./ar-dz.js":367,"./ar-kw":366,"./ar-kw.js":366,"./ar-ly":365,"./ar-ly.js":365,"./ar-ma":364,"./ar-ma.js":364,"./ar-sa":363,"./ar-sa.js":363,"./ar-tn":362,"./ar-tn.js":362,"./ar.js":368,"./az":361,"./az.js":361,"./be":360,"./be.js":360,"./bg":359,"./bg.js":359,"./bm":358,"./bm.js":358,"./bn":357,"./bn.js":357,"./bo":356,"./bo.js":356,"./br":355,"./br.js":355,"./bs":354,"./bs.js":354,"./ca":353,"./ca.js":353,"./cs":352,"./cs.js":352,"./cv":351,"./cv.js":351,"./cy":350,"./cy.js":350,"./da":349,"./da.js":349,"./de":348,"./de-at":347,"./de-at.js":347,"./de-ch":346,"./de-ch.js":346,"./de.js":348,"./dv":345,"./dv.js":345,"./el":344,"./el.js":344,"./en-au":343,"./en-au.js":343,"./en-ca":342,"./en-ca.js":342,"./en-gb":341,"./en-gb.js":341,"./en-ie":340,"./en-ie.js":340,"./en-nz":339,"./en-nz.js":339,"./eo":338,"./eo.js":338,"./es":337,"./es-do":336,"./es-do.js":336,"./es-us":335,"./es-us.js":335,"./es.js":337,"./et":334,"./et.js":334,"./eu":333,"./eu.js":333,"./fa":332,"./fa.js":332,"./fi":331,"./fi.js":331,"./fo":330,"./fo.js":330,"./fr":329,"./fr-ca":328,"./fr-ca.js":328,"./fr-ch":327,"./fr-ch.js":327,"./fr.js":329,"./fy":326,"./fy.js":326,"./gd":325,"./gd.js":325,"./gl":324,"./gl.js":324,"./gom-latn":323,"./gom-latn.js":323,"./gu":322,"./gu.js":322,"./he":321,"./he.js":321,"./hi":320,"./hi.js":320,"./hr":319,"./hr.js":319,"./hu":318,"./hu.js":318,"./hy-am":317,"./hy-am.js":317,"./id":316,"./id.js":316,"./is":315,"./is.js":315,"./it":314,"./it.js":314,"./ja":313,"./ja.js":313,"./jv":312,"./jv.js":312,"./ka":311,"./ka.js":311,"./kk":310,"./kk.js":310,"./km":309,"./km.js":309,"./kn":308,"./kn.js":308,"./ko":307,"./ko.js":307,"./ky":306,"./ky.js":306,"./lb":305,"./lb.js":305,"./lo":304,"./lo.js":304,"./lt":303,"./lt.js":303,"./lv":302,"./lv.js":302,"./me":301,"./me.js":301,"./mi":300,"./mi.js":300,"./mk":299,"./mk.js":299,"./ml":298,"./ml.js":298,"./mr":297,"./mr.js":297,"./ms":296,"./ms-my":295,"./ms-my.js":295,"./ms.js":296,"./mt":294,"./mt.js":294,"./my":293,"./my.js":293,"./nb":292,"./nb.js":292,"./ne":291,"./ne.js":291,"./nl":290,"./nl-be":289,"./nl-be.js":289,"./nl.js":290,"./nn":288,"./nn.js":288,"./pa-in":287,"./pa-in.js":287,"./pl":286,"./pl.js":286,"./pt":285,"./pt-br":284,"./pt-br.js":284,"./pt.js":285,"./ro":283,"./ro.js":283,"./ru":282,"./ru.js":282,"./sd":281,"./sd.js":281,"./se":280,"./se.js":280,"./si":279,"./si.js":279,"./sk":278,"./sk.js":278,"./sl":277,"./sl.js":277,"./sq":276,"./sq.js":276,"./sr":275,"./sr-cyrl":274,"./sr-cyrl.js":274,"./sr.js":275,"./ss":273,"./ss.js":273,"./sv":272,"./sv.js":272,"./sw":271,"./sw.js":271,"./ta":270,"./ta.js":270,"./te":269,"./te.js":269,"./tet":268,"./tet.js":268,"./th":267,"./th.js":267,"./tl-ph":266,"./tl-ph.js":266,"./tlh":265,"./tlh.js":265,"./tr":264,"./tr.js":264,"./tzl":263,"./tzl.js":263,"./tzm":262,"./tzm-latn":261,"./tzm-latn.js":261,"./tzm.js":262,"./uk":260,"./uk.js":260,"./ur":259,"./ur.js":259,"./uz":258,"./uz-latn":257,"./uz-latn.js":257,"./uz.js":258,"./vi":256,"./vi.js":256,"./x-pseudo":255,"./x-pseudo.js":255,"./yo":254,"./yo.js":254,"./zh-cn":229,"./zh-cn.js":229,"./zh-hk":253,"./zh-hk.js":253,"./zh-tw":252,"./zh-tw.js":252};function r(e){var t=i(e);return a(t)}function i(e){var t=n[e];if(!(t+1)){var a=new Error('Cannot find module "'+e+'".');throw a.code="MODULE_NOT_FOUND",a}return t}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=606},81:function(e,t,a){"use strict";a(60);var n=a(22),r=a.n(n),i=a(8),s=a.n(i),o=a(5),l=a.n(o),c=a(7),p=a.n(c),u=a(1),d=a.n(u),_=a(6),m=a.n(_),h=a(2),E=a.n(h),g=a(9),f=a(0),T=a.n(f),v=(a(227),E.a.oneOfType([E.a.string,E.a.number])),A={children:E.a.node,left:v,width:v,visible:E.a.bool},y=function(e){function t(e){return l()(this,t),d()(this,(t.__proto__||s()(t)).call(this,e))}return m()(t,e),p()(t,[{key:"render",value:function(){var e=this.props,t=e.children,a=e.visible,n=e.style,i=e.className,s=e.onClose,o="slide-pane",l={top:0,transform:a?"translate3d(0%, 0, 0)":"translate3d(150%, 0, 0)"};return i&&(o=o+" "+i),n&&(l=Object(g.assign)(l,n)),T.a.createElement("div",{className:o,style:l},T.a.createElement("div",{className:"slide-pane-conent"},t),T.a.createElement("span",{className:"slide-pane-toggle",onClick:s},T.a.createElement(r.a,{type:"double-right"})))}}]),t}(f.Component);y.propTypes=A;var C=y;t.a=C;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(v,"strOrNum","/Users/ziv/Development/Workspace/data-stack/src/widgets/slidePane/index.js"),__REACT_HOT_LOADER__.register(A,"propType","/Users/ziv/Development/Workspace/data-stack/src/widgets/slidePane/index.js"),__REACT_HOT_LOADER__.register(y,"SlidePane","/Users/ziv/Development/Workspace/data-stack/src/widgets/slidePane/index.js"),__REACT_HOT_LOADER__.register(C,"default","/Users/ziv/Development/Workspace/data-stack/src/widgets/slidePane/index.js"))},837:function(e,t,a){"use strict";a.r(t);var n=a(62),r=a(113),i=a(177),s=a(130),o=a(102),l=a(9),c={loading:!1,sourceQuery:[],sourceType:[],sourceList:[],tagSourceList:[],sourceTable:[],sourceColumn:[],sourcePart:[],sourcePreview:{}};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c,t=arguments[1],a=t.type,n=t.payload;switch(a){case o.a.CHANGE_LOADING:var r=Object(l.cloneDeep)(e),i=r.loading;return r.loading=!i,r;case o.a.GET_DATA_SOURCES:var s=Object(l.cloneDeep)(e);s.sourceQuery;return s.sourceQuery=n,s;case o.a.GET_DATA_SOURCES_TYPE:var p=Object(l.cloneDeep)(e);p.sourceType;return p.sourceType=n,p;case o.a.GET_DATA_SOURCES_LIST:var u=Object(l.cloneDeep)(e);u.sourceList;return u.sourceList=n,u;case o.a.GET_TAG_DATA_SOURCES_LIST:var d=Object(l.cloneDeep)(e);d.tagSourceList;return d.tagSourceList=n,d;case o.a.GET_DATA_SOURCES_TABLE:var _=Object(l.cloneDeep)(e);_.sourceTable;return _.sourceTable=n,_;case o.a.RESET_DATA_SOURCES_TABLE:var m=Object(l.cloneDeep)(e);m.sourceTable;return m.sourceTable=[],m;case o.a.GET_DATA_SOURCES_COLUMN:var h=Object(l.cloneDeep)(e);h.sourceColumn;return h.sourceColumn=n,h;case o.a.RESET_DATA_SOURCES_COLUMN:var E=Object(l.cloneDeep)(e);E.sourceColumn;return E.sourceColumn=[],E;case o.a.GET_DATA_SOURCES_PREVIEW:var g=Object(l.cloneDeep)(e);g.sourcePreview;return g.sourcePreview=n,g;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(c,"initialState","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/modules/dataSource/index.js"),__REACT_HOT_LOADER__.register(p,"dataSource","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/modules/dataSource/index.js"));var u=a(196),d={userList:[],menuList:[],periodType:[],notifyType:[]};function _(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments[1],a=t.type,n=t.payload;switch(a){case u.a.GET_USER_LIST:var r=Object(l.cloneDeep)(e);r.userList;return r.userList=n,r;case u.a.GET_ALL_MENU_LIST:var i=Object(l.cloneDeep)(e);i.menuList;return i.menuList=n,i;case u.a.GET_PERIOD_TYPE:var s=Object(l.cloneDeep)(e);s.periodType;return s.periodType=n,s;case u.a.GET_NOTIFY_TYPE:var o=Object(l.cloneDeep)(e);o.notifyType;return o.notifyType=n,o;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(d,"initialState","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/modules/common.js"),__REACT_HOT_LOADER__.register(_,"common","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/modules/common.js"));var m=a(151),h={loading:!1,ruleTagList:[],registeredTagList:[],identifyColumn:[]};function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments[1],a=t.type,n=t.payload;switch(a){case m.a.CHANGE_LOADING:var r=Object(l.cloneDeep)(e),i=r.loading;return r.loading=!i,r;case m.a.GET_RULE_TAG_LIST:var s=Object(l.cloneDeep)(e);s.ruleTagList;return s.ruleTagList=n,s;case m.a.GET_REGISTERED_TAG_LIST:var o=Object(l.cloneDeep)(e);o.registeredTagList;return o.registeredTagList=n,o;case m.a.GET_ALL_IDENTIFY_COLUMN:var c=Object(l.cloneDeep)(e);c.identifyColumn;return c.identifyColumn=n,c;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(h,"initialState","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/modules/tagConfig/index.js"),__REACT_HOT_LOADER__.register(E,"tagConfig","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/modules/tagConfig/index.js"));var g=a(162),f={apiCatalogue:[],apiList:[],api:{},apiCallInfo:{}};function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments[1],a=t.type,n=t.payload;switch(a){case g.a.GET_CATALOGUE:var r=Object(l.cloneDeep)(e);return r.apiCatalogue=n,r;case g.a.GET_API_MARKET_LIST:var i=Object(l.cloneDeep)(e);return i.apiList=n,i;case g.a.GET_MARKET_API_DETAIL:var s=Object(l.cloneDeep)(e);return s.api[n.apiId]=n,s;case g.a.GET_API_EXT_INFO:var o=Object(l.cloneDeep)(e);return o.apiCallInfo[n.apiId]=n,o;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(f,"initialState","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/modules/apiMarket/index.js"),__REACT_HOT_LOADER__.register(T,"apiMarket","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/modules/apiMarket/index.js"));var v=a(387),A={apiList:{applyingList:[],appliedList:[]}};function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments[1],a=t.type,n=t.payload;switch(a){case v.a.GET_APPLYING_LIST:var r=Object(l.cloneDeep)(e);return r.apiList.applyingList=n,r;case v.a.GET_APPLYED_LIST:var i=Object(l.cloneDeep)(e);return i.apiList.appliedList=n,i;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(A,"initialState","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/modules/mine/index.js"),__REACT_HOT_LOADER__.register(y,"mine","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/modules/mine/index.js"));var C=a(570),D={apiList:[]};function b(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments[1],a=t.type,n=t.payload;switch(a){case C.a.GET_ALL_API_LIST:var r=Object(l.cloneDeep)(e);return r.apiList=n,r;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(D,"initialState","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/modules/apiManage/index.js"),__REACT_HOT_LOADER__.register(b,"apiManage","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/modules/apiManage/index.js"));var k=a(569),O={approvalList:[]};function R(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments[1],a=t.type,n=t.payload;switch(a){case k.a.GET_ALL_APPLY_LIST:var r=Object(l.cloneDeep)(e);return r.approvalList=n,r;default:return e}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(O,"initialState","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/modules/approval/index.js"),__REACT_HOT_LOADER__.register(R,"apiMarket","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/modules/approval/index.js"));var L=Object(n.c)({routing:r.routerReducer,user:i.a,app:s.a,apps:s.b,tagConfig:E,dataSource:p,common:_,apiMarket:T,mine:y,apiManage:b,approval:R}),S=L;t.default=S,"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(L,"rootReducer","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/index.js"),__REACT_HOT_LOADER__.register(S,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/reducers/index.js"))},84:function(e,t,a){"use strict";a.d(t,"a",function(){return m});var n=a(8),r=a.n(n),i=a(5),s=a.n(i),o=a(7),l=a.n(o),c=a(1),p=a.n(c),u=a(6),d=a.n(u),_=a(0),m=function(e){function t(){var e,a,n,i;s()(this,t);for(var o=arguments.length,l=Array(o),c=0;c<o;c++)l[c]=arguments[c];return a=n=p()(this,(e=t.__proto__||r()(t)).call.apply(e,[this].concat(l))),n.resize=function(){var e;return(e=n).__resize__REACT_HOT_LOADER__.apply(e,arguments)},i=a,p()(n,i)}return d()(t,e),l()(t,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.resize,!1)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resize,!1)}},{key:"__resize__REACT_HOT_LOADER__",value:function(){var e=this.props.onResize;e&&e()}},{key:"render",value:function(){return this.props.children}}]),t}(_.Component);"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(m,"Resize","/Users/ziv/Development/Workspace/data-stack/src/widgets/resize/index.js")},845:function(e,t,a){"use strict";a.r(t);var n={};a.d(n,"dataFilterDoc",function(){return ci}),a.d(n,"switchKey",function(){return pi}),a.d(n,"hdfsPath",function(){return ui}),a.d(n,"jobSpeedLimit",function(){return di}),a.d(n,"jobConcurrence",function(){return _i}),a.d(n,"errorCount",function(){return mi}),a.d(n,"hdfsConfig",function(){return hi}),a.d(n,"rdbConfig",function(){return Ei}),a.d(n,"hBaseConfig",function(){return gi}),a.d(n,"recordDirtyData",function(){return fi}),a.d(n,"errorPercentConfig",function(){return Ti});var r,i=a(0),s=a.n(i),o=a(56),l=a.n(o),c=a(195),p=a(178),u=a(8),d=a.n(u),_=a(5),m=a.n(_),h=a(7),E=a.n(h),g=a(1),f=a.n(g),T=a(6),v=a.n(T),A=a(14),y=a(20),C=(a(235),a(393),a(233),a(231),a(853),a(131),a(79),a(117),a(185)),D=a(179),b=a(128),k=a(184),O=a(183),R=a(129),L=a(182),S=a(181),w=a(180),I=a(2),x=a.n(I),H=a(12),N=a(3),P=a(4),U=a.n(P),j=(a(60),a(22)),z=a.n(j),M=a(93),W=Object(y.b)(function(e){return{user:e.user,apps:e.apps,routing:e.routing,app:e.app,common:e.common}})(r=function(e){function t(e){m()(this,t);var a=f()(this,(t.__proto__||d()(t)).call(this,e));return a.state={},a}return v()(t,e),E()(t,[{key:"render",value:function(){var e=this.props,t=(e.user,e.apps,e.common),a="/dataLabel.html#",n=[{id:"dl/market",name:"标签市场",link:a+"/dl/market",enable:t.menuList.indexOf("tag_market_menu")>-1},{id:"dl/mine",name:"我的标签",link:a+"/dl/mine",enable:t.menuList.indexOf("tag_mytag_menu")>-1},{id:"dl/tagConfig",name:"标签配置",link:a+"/dl/tagConfig",enable:t.menuList.indexOf("tag_config_menu")>-1},{id:"dl/approval",name:"审批授权",link:a+"/dl/approval",enable:t.menuList.indexOf("tag_authorized_menu")>-1},{id:"dl/manage",name:"服务管理",link:a+"/dl/manage",enable:t.menuList.indexOf("tag_service_menu")>-1},{id:"dl/dataSource",name:"数据源管理",link:a+"/dl/dataSource",enable:t.menuList.indexOf("datasource_menu")>-1}],r=s.a.createElement("span",null,s.a.createElement(z.a,{style:{fontSize:"18px",color:"#2491F7",marginRight:"10px"},type:"tags-o"}),s.a.createElement("span",{style:{fontSize:"14px",color:"#ffffff"}},"DTinsight.Tag"));return s.a.createElement(M.c,U()({logo:r,menuItems:n},this.props))}}]),t}(i.Component))||r,G=W,F=G,V=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(W,"Header","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/layout/header.js"),__REACT_HOT_LOADER__.register(G,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/layout/header.js")),a(54),a(28)),q=a.n(V),B=(a(44),a(25)),Y=a.n(B),K=(a(58),a(30)),Q=a.n(K),J=(a(40),a(16)),X=a.n(J),Z=(a(38),a(15)),$=a.n(Z),ee=(a(53),a(17)),te=a.n(ee),ae=a(162),ne=a(65),re=a.n(ne),ie=(a(210),a(83)),se=(a(371),a(160)),oe=a.n(se),le=a(76),ce=a.n(le),pe=(a(34),a(13)),ue=a.n(pe),de=a(67),_e={DL_ROLE_QUERY:N.b+"/role/pageQuery",DL_ROLE_UPDATE:N.b+"/role/addOrUpdateRole",DL_ROLE_DELETE:N.b+"/role/deleteRole",DL_ROLE_PERMISSION_TREE:N.b+"/permission/tree",DL_ROLE_PERMISSION:N.b+"/permission/getPermissionIdsByRoleId",DL_GET_USER_BY_ID:N.b+"/user/getUserById",DL_GET_USER_PAGES:N.b+"/user/pageQuery",DL_GET_USER_NOT_IN_PROJECT:N.b+"/user/listNotIn",DL_USER_ROLE_ADD:N.b+"/roleUser/addRoleUser",DL_USER_ROLE_DELETE:N.b+"/roleUser/remove",DL_USER_ROLE_UPDATE:N.b+"/roleUser/updateUserRole",MASSAGE_QUERY:N.b+"/notify/pageQuery",GET_MASSAGE_BY_ID:N.b+"/notify/getOne",MASSAGE_MARK_AS_READ:N.b+"/notify/tabRead",MASSAGE_MARK_AS_ALL_READ:N.b+"/notify/allRead",MASSAGE_DELETE:N.b+"/notify/delete",DL_GET_USER_LIST:N.b+"/user/list",GET_ALL_MENU_LIST:N.b+"/user/showMenuList",GET_PERIOD_TYPE:N.b+"/tag/listPeriodType",GET_NOTIFY_TYPE:N.b+"/tag/listNotifyType",QUERY_REGISTERED_TAG:N.b+"/tag/registerQuery",ADD_REGISTER_TAG:N.b+"/tag/registerAdd",QUERY_RULE_TAG:N.b+"/tag/customQuery",ADD_RULE_TAG:N.b+"/tag/customAdd",UPDATE_TAG_SQL_INFO:N.b+"/tag/computeInfoUpdate",GET_TAG_CONDITION:N.b+"/tag/listCustomCondition",EDIT_TAG_CONDITION:N.b+"/tag/editCustomCondition",DELETE_TAG_CONDITION:N.b+"/tag/deleteCustomCondition",UPDATE_TAG_BASE_INFO:N.b+"/tag/baseInfoUpdate",DELETE_TAG:N.b+"/tag/deleteTag",GET_RULE_TAG_RETAIL:N.b+"/tag/getOne",QUERY_TAG_LOG:N.b+"/tag/logPageQuery",PUBLISH_CHECK:N.b+"/tag/publishCheck",PUBLISH_TAG:N.b+"/tag/publishTag",QUERY_IDENTIFY_COLUMN:N.b+"/identify/pageQuery",GET_ALL_IDENTIFY_COLUMN:N.b+"/identify/identities",ADD_IDENTIFY_COLUMN:N.b+"/identify/add",UPDATE_IDENTIFY_COLUMN:N.b+"/identify/update",DELETE_IDENTIFY_COLUMN:N.b+"/identify/delete",GET_DATA_SOURCES:N.b+"/dataSource/pageQuery",CHECK_CONNECTION:N.b+"/dataSource/checkConnection",ADD_DATA_SOURCE:N.b+"/dataSource/addSource",UPDATE_DATA_SOURCE:N.b+"/dataSource/updateSource",DELETE_DATA_SOURCE:N.b+"/dataSource/deleteSource",GET_DATA_SOURCE_BY_ID:N.b+"/dataSource/getBySourceId",GET_DATA_SOURCES_LIST:N.b+"/dataSource/list",GET_TAG_DATA_SOURCES_LIST:N.b+"/dataSource/listTargetSource",GET_DATA_SOURCES_TYPE:N.b+"/dataSource/getTypes",GET_DATA_SOURCES_TABLE:N.b+"/dataSource/tablelist",GET_DATA_SOURCES_COLUMN:N.b+"/dataSource/tablecolumn",GET_COMPUTE_SOURCE:N.b+"/dataSource/listComputeSource",GET_DATA_SOURCES_PREVIEW:N.b+"/dataSource/preview",GET_API_FAIL_RANK:N.b+"/apis/listApiCallFailRateTopNForNormal",GET_API_FAIL_RANK_ADMIN:N.b+"/apis/listApiCallFailRateTopNForManager",GET_API_CALL_INFO:N.b+"/apis/getApiCallInfoForNormal",GET_USER_API_CALL_RANK:N.b+"/apis/listApiCallNumTopN",GET_USER_API_SUB_INFO:N.b+"/apply/getApiSubscribe",GET_MARKET_API_CALL_RANK:N.b+"/apis/listUserCallTopN",GET_API_CALL_ERROR_INFO_ADMIN:N.b+"/log/getApiCallErrorInfoForManager",GET_MARKET_API_APPLY_INFO:N.b+"/apply/getApplyCount",HANDLE_APPLY:N.b+"/apply/handleApply",GET_ALL_APPLY_LIST:N.b+"/apply/allApplyList",GET_ALL_API_LIST:N.b+"/tag/manageQuery",GET_DATASOURCE_BASE_INFO:N.b+"/dataSource/listDataSourceBaseInfo",DELETE_API:N.b+"/apis/deleteApi",UPDATE_API:N.b+"/apis/updateApiStatus",GET_API_CALL_RANK:N.b+"/apis/getApiCallUserRankList",GET_API_BUY_STATE:N.b+"/apply/getApiApplyList",DELETE_CATAGORY:N.b+"/catalogue/deleteCatalogue",ADD_CATAGORY:N.b+"/catalogue/addCatalogue",UPDATE_CATAGORY:N.b+"/catalogue/updateCatalogue",NEW_API:N.b+"/apis/createApi",CHANGE_API:N.b+"/apis/updateApi",GET_TABLE_BY_DATASOURCE:N.b+"/dataSource/tablelist",GET_TABLE_COLUMNS_DETAIL:N.b+"/dataSource/tablecolumn",GET_TABLE_PREVIEW_DATA:N.b+"/dataSource/preview",GET_API_DETAIL_INFO:N.b+"/apis/getApiInfo",GET_APPLY_LIST:N.b+"/apply/userApplyList",UPDATE_APPLY_STATUS:N.b+"/apply/updateApplyStatusForNormal",UPDATE_APPLY_STATUS_ADMIN:N.b+"/apply/updateApplyStatusForManager",GET_USER_API_CALL_INFO:N.b+"/apis/getApiCallInfoForNormal",GET_USER_API_CALL_INFO_ADMIN:N.b+"/apis/getApiCallInfoForManager",GET_API_CALL_ERROR_INFO:N.b+"/log/getApiCallErrorInfoForNormal",GET_API_CALL_ERROR_LOG:N.b+"/log/queryApiCallLogForNormal",GET_API_CALL_ERROR_LOG_ADMIN:N.b+"/log/queryApiCallLogForManager",GET_API_CALL_URL:N.b+"/apis/getApiCallUrl",GET_API_CREATOR_INFO:N.b+"/apis/getApiCreatorInfo",GET_CATALOGUE:N.b+"/catalogue/getCatalogue",GET_API_MARKET_LIST:N.b+"/tag/marketQuery",GET_MARKET_API_DETAIL:N.b+"/apis/getApiDetail",GET_API_EXT_INFO:N.b+"/apis/getApiExtInfoForNormal",GET_API_EXT_INFO_ADMIN:N.b+"/apis/getApiExtInfoForManager",APPLY_API:N.b+"/apply/apiApply",GET_MARKET_TOP_CALL_FUNC:N.b+"/apis/listApiCallNumTopNForManager"},me=_e,he=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(_e,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/reqUrls.js"),APP_CONF.UIC_URL||""),Ee=APP_CONF.UIC_DOMAIN||"",ge={logout:function(){var e=this;Oe.post(me.APP_LOGOUT).then(function(t){1===t.code&&e.openLogin()})},openLogin:function(){de.a.clear(),H.a.deleteCookie("dt_user_id",Ee,"/"),H.a.deleteCookie("dt_token",Ee,"/"),H.a.deleteCookie("dt_tenant_id",Ee,"/"),H.a.deleteCookie("dt_tenant_name",Ee,"/"),H.a.deleteCookie("dt_username",Ee,"/"),H.a.deleteCookie("dt_is_tenant_admin",Ee,"/"),H.a.deleteCookie("dt_is_tenant_creator",Ee,"/"),H.a.deleteCookie("project_id",Ee,"/"),window.location.href=he+"/#/login"},getLoginedUser:function(){return Oe.post(me.DL_GET_USER_BY_ID)},getUserList:function(){return Oe.post(me.DL_GET_USER_LIST)}},fe=ge;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(he,"UIC_URL_TARGET","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/api/user.js"),__REACT_HOT_LOADER__.register(Ee,"UIC_DOMAIN_URL","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/api/user.js"),__REACT_HOT_LOADER__.register(ge,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/api/user.js"));function Te(e){switch(e.status){case 402:case 200:return e;case 302:ue.a.info("登录超时, 请重新登录！");default:return e}}function ve(e){switch(e.code){case 1:return e;case 0:return fe.openLogin(),ce.a.reject(e);case 3:return oe.a.error({message:"权限通知",description:e.message}),ce.a.reject(e);case 16:hashHistory.push("/");default:return e.message&&ue.a.error(e.message,3),e}}function Ae(){var e=H.a.getCookie("project_id");e&&"undefined"!==e||H.a.deleteCookie("project_id")}function ye(){return de.a.get("session")}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Te,"authBeforeFormate","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/interceptor.js"),__REACT_HOT_LOADER__.register(ve,"authAfterFormated","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/interceptor.js"),__REACT_HOT_LOADER__.register(Ae,"isSelectedProject","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/interceptor.js"),__REACT_HOT_LOADER__.register(ye,"isLogin","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/interceptor.js"));var Ce,De,be=function(){function e(){m()(this,e)}return E()(e,[{key:"get",value:function(e,t){var a=t?this.build(e,t):e;return this.request(a,{method:"GET"})}},{key:"post",value:function(e,t){var a={method:"POST"};return t&&(a.body=re()(t)),this.request(e,a)}},{key:"postAsFormData",value:function(e,t){var a={method:"POST"};return t&&(a.body=this.buildFormData(t)),this.request(e,a)}},{key:"postForm",value:function(e,t){var a={method:"POST"};return t&&(a.body=new FormData(t)),this.request(e,a)}},{key:"request",value:function(e,t){return ie.a.show(),t.credentials="same-origin",fetch(e,t).then(Te).then(function(e){return setTimeout(function(){ie.a.hide()},300),e.json()}).then(ve).catch(function(e){ie.a.hide()})}},{key:"defaultHeader",value:function(){return{Accept:"*/*","Content-Type":"application/json"}}},{key:"build",value:function(e,t){var a=[];if(t)for(var n in t)n&&a.push(n+"="+encodeURIComponent(t[n]));return e+"?"+a.join("&")}},{key:"buildFormData",value:function(e){if(e){var t=new FormData;for(var a in e)a&&t.append(a,e[a]);return t}}}]),e}(),ke=new be,Oe=ke,Re=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(be,"Http","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/api/http.js"),__REACT_HOT_LOADER__.register(ke,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/api/http.js")),{getCatalogue:function(e){return Oe.post(me.GET_CATALOGUE,e)},listByCondition:function(e){return Oe.post(me.GET_API_MARKET_LIST,e)},getApiDetail:function(e){return Oe.post(me.GET_MARKET_API_DETAIL,e)},apiApply:function(e){return Oe.post(me.APPLY_API,e)},getApiExtInfoForNormal:function(e){return Oe.post(me.GET_API_EXT_INFO,e)},getApiExtInfoForManager:function(e){return Oe.post(me.GET_API_EXT_INFO_ADMIN,e)}}),Le=Re,Se=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Re,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/api/apiMarket.js"),{getCatalogue:function(e){return function(t){Le.getCatalogue({pid:e,lvNum:10}).then(function(e){1===e.code&&t({type:ae.a.GET_CATALOGUE,payload:e.data})})}},getApiMarketList:function(e){return function(t){return Le.listByCondition(e).then(function(e){if(1===e.code)return t({type:ae.a.GET_API_MARKET_LIST,payload:e.data.data}),e})}},getApiDetail:function(e){return function(t){return Le.getApiDetail(e).then(function(e){if(1===e.code)return t({type:ae.a.GET_MARKET_API_DETAIL,payload:e.data}),e})}},getApiExtInfo:function(e){var t="getApiExtInfoForNormal";return e.useAdmin&&(t="getApiExtInfoForManager"),function(a){return Le[t](e).then(function(e){if(1===e.code)return a({type:ae.a.GET_API_EXT_INFO,payload:e.data}),e})}},apiApply:function(e){return function(t){return Le.apiApply(e).then(function(e){if(1===e.code)return e})}}}),we=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Se,"apiMarketActions","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/actions/apiMarket/index.js"),a(48),a(18)),Ie=a.n(we),xe={MYSQL:1,ORACLE:2,SQLSERVER:3,HDFS:6,HIVE:7,HBASE:8,FTP:9,MAXCOMPUTE:10},He={1:"注册标签",2:"规则标签"},Ne={0:"新建",1:"等待运行",2:"更新中",3:"更新完成",4:"更新失败",5:"禁用"},Pe={0:"未发布",1:"已发布"},Ue={0:"启用",1:"禁用"},je={"-1":"NO_APPLY",0:"IN_HAND",1:"PASS",2:"REJECT",3:"STOPPED",4:"DISABLE"},ze={"-1":"nothing",0:"inhand",1:"success",2:"notPass",3:"stop",4:"disabled"},Me={0:"notApproved",1:"pass",2:"rejected",3:"stop",4:"disabled"},We={0:"success",1:"stop"},Ge=[{text:"MySQL",value:1},{text:"Oracle",value:2},{text:"SQLServer",value:3},{text:"Spark",value:7},{text:"MaxCompute",value:10}],Fe={labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:14}}},Ve={wrapperCol:{xs:{span:24,offset:0},sm:{span:14,offset:6}}},qe={labelCol:{xs:{span:24},sm:{span:7}},wrapperCol:{xs:{span:24},sm:{span:10}}},Be={labelCol:{span:0},wrapperCol:{span:24}},Ye={title:{text:"堆叠区域图",textStyle:{fontSize:12},textAlign:"left"},tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985"}}},color:["#2491F7","#7460EF","#26DAD2","#79E079","#7A64F3","#FFDC53","#9a64fb"],legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},toolbox:{feature:{saveAsImage:{show:!1}}},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{show:!0},axisLine:{lineStyle:{color:"#DDDDDD"}},axisLabel:{textStyle:{color:"#666666"}},nameTextStyle:{color:"#666666"},splitLine:{color:"#666666"}}],yAxis:[{type:"value",axisLabel:{formatter:"{value} 个",textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",nameGap:20,axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#DDDDDD",type:"dashed"}}}],series:[]},Ke={tooltip:{trigger:"axis",axisPointer:{label:{backgroundColor:"#6a7985"}}},color:["#2491F7","#7460EF","#26DAD2","#79E079","#7A64F3","#FFDC53","#9a64fb"],legend:{data:["邮件营销","联盟广告","视频广告","直接访问","搜索引擎"]},toolbox:{feature:{saveAsImage:{show:!1}}},grid:{left:"3%",right:"4%",bottom:"30",top:40,containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[],axisTick:{show:!0},axisLine:{lineStyle:{color:"#DDDDDD"}},axisLabel:{textStyle:{color:"#666666"}},nameTextStyle:{color:"#666666"},splitLine:{color:"#666666"}}],yAxis:[{nameGap:25,type:"value",name:"调用次数",axisLabel:{textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",axisLine:{show:!1},axisTick:{show:!1},splitLine:!1,minInterval:1},{nameGap:25,type:"value",name:"失败率 (%)",axisLabel:{textStyle:{color:"#666666",baseline:"bottom"}},nameTextStyle:{color:"#666666"},nameLocation:"end",axisLine:{show:!1},axisTick:{show:!1},splitLine:{lineStyle:{color:"#DDDDDD",type:"dashed"}},max:100}],series:[]},Qe=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(xe,"DATA_SOURCE","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(He,"TAG_TYPE","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(Ne,"TAG_STATUS","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(Pe,"TAG_PUBLISH_STATUS","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(Ue,"API_OPEN_STATUS","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(je,"API_STATUS","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(ze,"EXCHANGE_API_STATUS","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(Me,"EXCHANGE_APPLY_STATUS","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(We,"EXCHANGE_ADMIN_API_STATUS","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(Ge,"dataSourceFilter","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(Fe,"formItemLayout","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(Ve,"tailFormItemLayout","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(qe,"halfFormItemLayout","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(Be,"rowFormItemLayout","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(Ye,"lineAreaChartOptions","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js"),__REACT_HOT_LOADER__.register(Ke,"doubleLineAreaChartOptions","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/index.js")),te.a.Item),Je=$.a.TextArea,Xe=function(e){return{apiApply:function(t,a){return e(Se.apiApply({apiId:t,applyContent:a}))},getApiExtInfo:function(t){e(Se.getApiExtInfo({tagId:t}))}}},Ze=Object(y.b)(null,Xe)(Ce=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={loading:!1},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"handleOk",value:function(){var e=this;this.props.form.validateFields(function(t,a){t||(e.setState({loading:!0}),e.props.apiApply(e.props.apiId,a.applyMsg).then(function(t){e.setState({loading:!1}),e.props.getMarketApi&&e.props.getMarketApi(),t&&(ue.a.success("操作成功"),e.props.successCallBack())}))})}},{key:"handleCancel",value:function(){this.props.form.resetFields(),this.props.cancelCallback()}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return s.a.createElement("div",null,s.a.createElement(Q.a,{title:"申请API",visible:this.props.show,onOk:this.handleOk.bind(this),onCancel:this.handleCancel.bind(this),footer:[s.a.createElement(Ie.a,{key:"back",size:"large",onClick:this.handleCancel.bind(this)},"取消"),s.a.createElement(Ie.a,{key:"submit",type:"primary",size:"large",loading:this.state.loading,onClick:this.handleOk.bind(this)},"提交")]},s.a.createElement(te.a,null,s.a.createElement(Qe,U()({label:"标签名称"},Fe),s.a.createElement("p",null,this.props.name)),s.a.createElement(Qe,U()({label:"标签描述"},Fe),s.a.createElement("p",null,this.props.desc)),s.a.createElement(Qe,U()({label:"申请说明",hasFeedback:!0,required:!0},Fe),e("applyMsg",{rules:[{required:!0,message:"请输入申请信息"},{max:200,message:"最大字符不能超过200"}]})(s.a.createElement(Je,{placeholder:"请输入申请信息",autosize:{minRows:4,maxRows:8}}))))))}}]),t}(i.Component))||Ce,$e=te.a.create()(Ze),et=$e,tt=et,at=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Qe,"FormItem","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/applyBox.js"),__REACT_HOT_LOADER__.register(Je,"TextArea","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/applyBox.js"),__REACT_HOT_LOADER__.register(Xe,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/applyBox.js"),__REACT_HOT_LOADER__.register(Ze,"ApplyBox","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/applyBox.js"),__REACT_HOT_LOADER__.register($e,"WrappedApplyBox","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/applyBox.js"),__REACT_HOT_LOADER__.register(et,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/applyBox.js")),te.a.Item),nt=$.a.TextArea,rt=X.a.Option,it=$.a.Search,st=void 0,ot=function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t}},lt=function(e){return{getCatalogue:function(t){e(Se.getCatalogue(t))},getApiMarketList:function(t){return e(Se.getApiMarketList(t))}}},ct=Object(y.b)(ot,lt)(De=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={searchValue:"",pageIndex:1,loading:!0,applyBox:!1,apply:{apiId:"",tagName:"",tagDesc:""},type1:void 0,type2:void 0,apiName:"",pageSize:20,total:0,sorter:{}},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},n.openDetail=function(){var e;return(e=n).__openDetail__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"getMarketApi",value:function(){var e=this;this.setState({loading:!0});this.props.getApiMarketList({name:this.state.searchValue,pid:this.state.type1||-1,cid:this.state.type2||-1,currentPage:this.state.pageIndex,pageSize:this.state.pageSize,orderBy:{updateTime:"gmt_modified"}[this.state.sorter.columnKey],sort:{ascend:"asc",descend:"desc"}[this.state.sorter.order]}).then(function(t){e.setState({loading:!1,total:t.data.totalCount})}).catch(function(t){e.setState({loading:!1})})}},{key:"componentDidMount",value:function(){this.props.getCatalogue(0),this.getMarketApi()}},{key:"renderSourceType",value:function(e,t){function a(e){return!e||e.length<1?null:e.map(function(e){return s.a.createElement(rt,{key:e.id},e.name)})}var n=[],r=this.props.apiMarket.apiCatalogue;if(t){if(!r)return null;for(var i=0;i<r.length;i++)n.push({id:r[i].id,name:r[i].catalogueName});return a(n)}if(!r)return null;for(var o=void 0,l=0;l<r.length;l++)if(r[l].id==e){o=r[l].childCatalogue;break}if(!o)return null;for(var c=0;c<o.length;c++)o[c].api||n.push({id:o[c].id,name:o[c].catalogueName});return a(n)}},{key:"onSourceChange",value:function(e){var t=this;this.setState({type1:e,type2:void 0},function(){t.getMarketApi()})}},{key:"onUserSourceChange",value:function(e){var t=this;this.setState({type2:e},function(){t.getMarketApi()})}},{key:"handleSearch",value:function(e){var t=this;this.setState({searchValue:e,pageIndex:1},function(){t.getMarketApi()})}},{key:"getDealType",value:function(e){return{complete:"查看使用情况",nothing:"申请",applying:"查看审批进度"}[e||"nothing"]}},{key:"doApply",value:function(e){this.setState({applyBox:!0,apply:{name:e.name,apiId:e.apiId,tagDesc:e.tagDesc}})}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,sorter:a},function(){n.getMarketApi()})}},{key:"__openDetail__REACT_HOT_LOADER__",value:function(e){window.open("dataLabel.html#/dl/market/detail/"+e+"?isHideBack=true")}},{key:"initColumns",value:function(){var e=this;return[{title:"标签名称",dataIndex:"name",key:"name",width:"20%",render:function(e,t){return s.a.createElement(A.c,{to:"/dl/market/detail/"+t.apiId},e)}},{title:"值域",dataIndex:"tagRange",key:"tagRange",width:"15%"},{title:"昨日调用次数",dataIndex:"totalYd",key:"totalYd",width:"15%"},{title:"更新时间",dataIndex:"gmtModified",key:"gmtModified",width:"20%",render:function(e){return H.a.formatDateTime(e)},sorter:!0},{title:"操作",dataIndex:"applyStatus",width:"15%",render:function(t,a){switch(t){case 0:return s.a.createElement(A.c,{to:"/dl/mine?apiId="+a.id},"查看审批进度");case 1:case 3:case 4:return s.a.createElement(A.c,{to:"/dl/mine/approved?apiId="+a.id},"查看使用情况");case-1:case 2:return s.a.createElement("a",{onClick:e.doApply.bind(e,a)},"申请");default:return""}}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:this.state.pageSize,total:this.state.total}}},{key:"getCardTitle",value:function(){return s.a.createElement("div",{className:"flex font-12"},s.a.createElement(it,{placeholder:"输入标签名称搜索",style:{width:150,margin:"10px 0"},onSearch:this.handleSearch.bind(this)}),s.a.createElement("div",{className:"m-l-8"},"标签分类：",s.a.createElement(X.a,{placeholder:"选择标签分类",value:this.state.type1,allowClear:!0,onChange:this.onSourceChange.bind(this),style:{width:120}},this.renderSourceType(0,!0))),s.a.createElement("div",{className:"m-l-8"},"二级分类：",s.a.createElement(X.a,{placeholder:"选择二级分类",value:this.state.type2,allowClear:!0,onChange:this.onUserSourceChange.bind(this),style:{width:150}},this.renderSourceType(this.state.type1,!1))))}},{key:"jumpToMine",value:function(){st.destroy(),this.props.router.push("/dl/mine")}},{key:"showApplySuccessModal",value:function(){st=Q.a.success({title:"申请提交成功",content:s.a.createElement("span",null,"您可以在 ",s.a.createElement("a",{onClick:this.jumpToMine.bind(this)},"我的标签")," 中查看审批进度"),okText:"确定"})}},{key:"handleOk",value:function(){this.setState({applyBox:!1}),this.showApplySuccessModal()}},{key:"handleCancel",value:function(){this.setState({applyBox:!1})}},{key:"render",value:function(){var e=this.props,t=(e.children,e.apiMarket);return s.a.createElement("div",{className:"api-market"},s.a.createElement(tt,{show:this.state.applyBox,successCallBack:this.handleOk.bind(this),cancelCallback:this.handleCancel.bind(this),apiId:this.state.apply.apiId,name:this.state.apply.name,desc:this.state.apply.tagDesc,getMarketApi:this.getMarketApi.bind(this)}),s.a.createElement("div",{className:"m-card box-1"},s.a.createElement(q.a,{noHovering:!0,title:this.getCardTitle()},s.a.createElement(Y.a,{className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:t.apiList||[],onChange:this.onTableChange}))))}}]),t}(i.Component))||De,pt=ct,ut=pt,dt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(at,"FormItem","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/index.js"),__REACT_HOT_LOADER__.register(nt,"TextArea","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/index.js"),__REACT_HOT_LOADER__.register(rt,"Option","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/index.js"),__REACT_HOT_LOADER__.register(it,"Search","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/index.js"),__REACT_HOT_LOADER__.register(st,"modal","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/index.js"),__REACT_HOT_LOADER__.register(ot,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/index.js"),__REACT_HOT_LOADER__.register(lt,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/index.js"),__REACT_HOT_LOADER__.register(ct,"APIMarket","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/index.js"),__REACT_HOT_LOADER__.register(pt,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/index.js")),a(39)),_t=a.n(dt)()(["GET_USER","UPDATE_USER","GET_NOT_PROJECT_USERS","GET_PROJECT_USERS","GET_USER_LIST"],{prefix:"user/"}),mt=_t,ht=mt;"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(_t,"userActions","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/userActions.js"),__REACT_HOT_LOADER__.register(mt,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/consts/userActions.js"));function Et(){return function(e){fe.getLoginedUser().then(function(t){if(1===t.code)return e({type:ht.GET_USER,data:t.data})})}}function gt(e){return{type:ht.UPDATE_USER,data:e}}function ft(e){return function(t){fe.getUserList(e).then(function(e){1===e.code&&t({type:ht.GET_USER_LIST,data:e.data})})}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Et,"getUser","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/actions/user.js"),__REACT_HOT_LOADER__.register(gt,"updateUser","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/actions/user.js"),__REACT_HOT_LOADER__.register(ft,"getUserList","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/actions/user.js"));var Tt,vt=a(102),At={getDataSources:function(e){return Oe.post(me.GET_DATA_SOURCES,e)},testDSConnection:function(e){return Oe.post(me.CHECK_CONNECTION,e)},addDataSource:function(e){return Oe.post(me.ADD_DATA_SOURCE,e)},updateDataSource:function(e){return Oe.post(me.UPDATE_DATA_SOURCE,e)},deleteDataSource:function(e){return Oe.post(me.DELETE_DATA_SOURCE,e)},getDataSourcesType:function(e){return Oe.post(me.GET_DATA_SOURCES_TYPE,e)},getDataSourcesList:function(e){return Oe.post(me.GET_DATA_SOURCES_LIST,e)},getTagDataSourcesList:function(e){return Oe.post(me.GET_TAG_DATA_SOURCES_LIST,e)},getDataSourcesTable:function(e){return Oe.post(me.GET_DATA_SOURCES_TABLE,e)},getDataSourcesColumn:function(e){return Oe.post(me.GET_DATA_SOURCES_COLUMN,e)},getDataSourcesPreview:function(e){return Oe.post(me.GET_DATA_SOURCES_PREVIEW,e)}},yt=At,Ct=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(At,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/api/dataSource.js"),{getDataSources:function(e){return function(t){t({type:vt.a.CHANGE_LOADING}),yt.getDataSources(e).then(function(e){1===e.code&&t({type:vt.a.GET_DATA_SOURCES,payload:e.data}),t({type:vt.a.CHANGE_LOADING})})}},getDataSourcesType:function(e){return function(t){yt.getDataSourcesType(e).then(function(e){1===e.code&&t({type:vt.a.GET_DATA_SOURCES_TYPE,payload:e.data})})}},getDataSourcesList:function(e){return function(t){yt.getDataSourcesList(e).then(function(e){1===e.code&&t({type:vt.a.GET_DATA_SOURCES_LIST,payload:e.data})})}},getTagDataSourcesList:function(e){return function(t){yt.getTagDataSourcesList(e).then(function(e){1===e.code&&t({type:vt.a.GET_TAG_DATA_SOURCES_LIST,payload:e.data})})}},getDataSourcesTable:function(e){return function(t){yt.getDataSourcesTable(e).then(function(e){1===e.code?t({type:vt.a.GET_DATA_SOURCES_TABLE,payload:e.data}):t({type:vt.a.GET_DATA_SOURCES_TABLE,payload:[]})})}},resetDataSourcesTable:function(){return function(e){e({type:vt.a.RESET_DATA_SOURCES_TABLE})}},getDataSourcesColumn:function(e){return function(t){yt.getDataSourcesColumn(e).then(function(e){1===e.code&&t({type:vt.a.GET_DATA_SOURCES_COLUMN,payload:e.data})})}},resetDataSourcesColumn:function(){return function(e){e({type:vt.a.RESET_DATA_SOURCES_COLUMN})}},getDataSourcesPreview:function(e){return function(t){yt.getDataSourcesPreview(e).then(function(e){if(1===e.code){var a=e.data,n=a.columnList,r=a.dataList;e.data.dataList=r.map(function(e,t){var a={};return e.forEach(function(e,r){a.key=t,a[n[r]]=e}),a}),t({type:vt.a.GET_DATA_SOURCES_PREVIEW,payload:e.data})}})}}}),Dt=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Ct,"dataSourceActions","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/actions/dataSource/index.js"),a(196)),bt={getUserList:function(){return Oe.post(me.DL_GET_USER_LIST)},getAllMenuList:function(){return Oe.post(me.GET_ALL_MENU_LIST)},getPeriodType:function(){return Oe.post(me.GET_PERIOD_TYPE)},getNotifyType:function(){return Oe.post(me.GET_NOTIFY_TYPE)}},kt=bt,Ot=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(bt,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/api/common.js"),{getUserList:function(e){return function(t){kt.getUserList(e).then(function(e){1===e.code&&t({type:Dt.a.GET_USER_LIST,payload:e.data})})}},getAllMenuList:function(e){return function(t){kt.getAllMenuList(e).then(function(e){1===e.code&&t({type:Dt.a.GET_ALL_MENU_LIST,payload:e.data})})}},getPeriodType:function(e){return function(t){kt.getPeriodType(e).then(function(e){1===e.code&&t({type:Dt.a.GET_PERIOD_TYPE,payload:e.data})})}},getNotifyType:function(e){return function(t){kt.getNotifyType(e).then(function(e){1===e.code&&t({type:Dt.a.GET_NOTIFY_TYPE,payload:e.data})})}}}),Rt=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Ot,"commonActions","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/actions/common.js"),a(176)),Lt={children:x.a.node},St={children:[]},wt=Object(y.b)()(Tt=function(e){function t(){return m()(this,t),f()(this,(t.__proto__||d()(t)).apply(this,arguments))}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e(Et()),e(Object(Rt.a)(N.g)),e(Ot.getUserList()),e(Ot.getAllMenuList()),e(Ot.getPeriodType()),e(Ot.getNotifyType()),e(Ct.getDataSourcesType())}},{key:"render",value:function(){var e=this.props.children;return s.a.createElement("div",{className:"main"},s.a.createElement(F,null),s.a.createElement("div",{className:"container"},e||s.a.createElement(ut,null)))}}]),t}(i.Component))||Tt;wt.propTypes=Lt,wt.defaultProps=St;var It=wt,xt=It,Ht=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Lt,"propType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/index.js"),__REACT_HOT_LOADER__.register(St,"defaultPro","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/index.js"),__REACT_HOT_LOADER__.register(wt,"Main","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/index.js"),__REACT_HOT_LOADER__.register(It,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/index.js")),a(78),a(37)),Nt=a.n(Ht),Pt=a(387),Ut={getApplyList:function(e){return Oe.post(me.GET_APPLY_LIST,e)},updateApplyStatusForNormal:function(e){return Oe.post(me.UPDATE_APPLY_STATUS,e)},updateApplyStatusForManager:function(e){return Oe.post(me.UPDATE_APPLY_STATUS_ADMIN,e)},getApiCallInfoForNormal:function(e){return Oe.post(me.GET_API_CALL_INFO,e)},getApiCallInfoForManager:function(e){return Oe.post(me.GET_USER_API_CALL_INFO_ADMIN,e)},getApiCallErrorInfoForNormal:function(e){return Oe.post(me.GET_API_CALL_ERROR_INFO,e)},getApiCallErrorInfoForManager:function(e){return Oe.post(me.GET_API_CALL_ERROR_INFO_ADMIN,e)},getApiCallUrl:function(e){return Oe.post(me.GET_API_CALL_URL,e)},queryApiCallLogForNormal:function(e){return Oe.post(me.GET_API_CALL_ERROR_LOG,e)},queryApiCallLogForManager:function(e){return Oe.post(me.GET_API_CALL_ERROR_LOG_ADMIN,e)},getApiCreatorInfo:function(e){return Oe.post(me.GET_API_CREATOR_INFO,e)}},jt=Ut,zt=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Ut,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/api/mine.js"),{getApplyingList:function(e){return(e=e||{}).status=[0],function(t){return jt.getApplyList(e).then(function(e){1===e.code&&t({type:Pt.a.GET_APPLYING_LIST,payload:e.data})})}},getAppliedList:function(e){return(e=e||{}).status&&0!==e.status.length||(e.status=[1,2,3,4]),function(t){return jt.getApplyList(e).then(function(e){if(1===e.code)return t({type:Pt.a.GET_APPLYED_LIST,payload:e.data}),e})}},updateApplyStatus:function(e){var t="updateApplyStatusForNormal";return e.useAdmin&&(t="updateApplyStatusForManager"),function(a){return jt[t](e).then(function(e){if(1===e.code)return e})}},getApiCallInfo:function(e){var t="getApiCallInfoForNormal";return e.useAdmin&&(t="getApiCallInfoForManager"),function(a){return jt[t](e).then(function(e){if(1===e.code)return e})}},getApiCallErrorInfo:function(e){return function(t){return jt.getApiCallErrorInfoForNormal(e).then(function(e){if(1===e.code)return e})}},getApiCallUrl:function(e){return function(t){return jt.getApiCallUrl(e).then(function(e){if(1===e.code)return e})}},queryApiCallLog:function(e){var t="queryApiCallLogForNormal";return e.useAdmin&&(t="queryApiCallLogForManager"),function(a){return jt[t](e).then(function(e){if(1===e.code)return e})}},getApiCreatorInfo:function(e){return function(t){return jt.getApiCreatorInfo(e).then(function(e){if(1===e.code)return e})}}}),Mt=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(zt,"mineActions","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/actions/mine/index.js"),a(81)),Wt=$.a.TextArea,Gt=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"render",value:function(){this.props.showRecord&&this.props.showRecord.replyTime;return s.a.createElement(Mt.a,{visible:this.props.slidePaneShow,style:{right:"-20px",width:"80%",minHeight:"300px"},onClose:this.props.closeSlidePane},s.a.createElement("h1",{className:"box-title approved-card-pane-title"},"审批情况"),s.a.createElement("div",{style:{paddingLeft:30,marginBottom:30}},s.a.createElement("p",{className:"before-title-pane textarea-p","data-title":"申请说明："},s.a.createElement(Wt,{disabled:!0,value:this.props.showRecord&&this.props.showRecord.applyContent,style:{width:200,color:"#999",fontSize:14},rows:4})),s.a.createElement("p",{style:{paddingLeft:70}},H.a.formatDateTime(this.props.showRecord&&this.props.showRecord.applyTime)),this.props.isApproved?s.a.createElement("div",null,s.a.createElement("p",{className:"before-title-pane textarea-p","data-title":"审批说明："},s.a.createElement(Wt,{disabled:!0,value:this.props.showRecord&&this.props.showRecord.replyContent,style:{width:200,color:"#999",fontSize:14},rows:4})),s.a.createElement("p",{style:{paddingLeft:70}},H.a.formatDateTime(this.props.showRecord&&this.props.showRecord.replyTime))):null))}}]),t}(i.Component),Ft=Gt,Vt=Ft,qt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Wt,"TextArea","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/approvedSlidePane.js"),__REACT_HOT_LOADER__.register(Gt,"ApprovedSlidePane","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/approvedSlidePane.js"),__REACT_HOT_LOADER__.register(Ft,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/approvedSlidePane.js")),{applyTime:"gmt_modified"}),Bt={ascend:"asc",descend:"desc"},Yt=$.a.TextArea,Kt=$.a.Search,Qt=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={pageIndex:1,slidePaneShow:!1,sortedInfo:{},loading:!1,showRecord:{},apiName:void 0},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"getApplyingList",value:function(e){var t=this;this.setState({loading:!0}),this.props.getApplyingList(this.state.pageIndex,qt[this.state.sortedInfo.columnKey],Bt[this.state.sortedInfo.order],this.state.apiName).then(function(){t.setState({loading:!1}),e&&e()})}},{key:"componentDidMount",value:function(){var e=this;this.getApplyingList(function(){e.openCard(e.props.apiId)})}},{key:"componentWillReceiveProps",value:function(e){this.props.apiId!=e.apiId&&e.apiId&&this.openCard(e.apiId)}},{key:"openCard",value:function(e){var t=this.getSource();if(t)for(var a in t){var n=t[a];if(e==n.apiId){this.openApprovedState(n);break}}}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,sortedInfo:a},function(){n.getApplyingList()})}},{key:"openApprovedState",value:function(e){this.setState({slidePaneShow:!0,showRecord:e||{}})}},{key:"initColumns",value:function(){var e=this;this.state.sortedInfo;return[{title:"标签名称",dataIndex:"apiName",key:"apiName",width:"20%",render:function(t,a){return s.a.createElement("a",{onClick:e.openApprovedState.bind(e,a)},t)}},{title:"描述",dataIndex:"apiDesc",key:"apiDesc",width:"30%"},{title:"申请说明",dataIndex:"applyContent",key:"applyContent",width:"30%"},{title:"申请时间",dataIndex:"applyTime",key:"applyTime",width:"20%",sorter:!0,render:function(e){return H.a.formatDateTime(e)}}]}},{key:"getSource",value:function(){return this.props.mine.apiList.applyingList.data}},{key:"getTotal",value:function(){return this.props.mine.apiList.applyingList&&this.props.mine.apiList.applyingList.totalCount||0}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:this.getTotal()}}},{key:"closeSlidePane",value:function(){this.setState({slidePaneShow:!1,showRecord:{}})}},{key:"handleApiSearch",value:function(e){var t=this;this.setState({apiName:e,pageIndex:1},function(){t.getApplyingList()})}},{key:"render",value:function(){var e=this;return s.a.createElement(q.a,{noHovering:!0,bordered:!1},s.a.createElement(Vt,U()({},this.props,{slidePaneShow:this.state.slidePaneShow,showRecord:this.state.showRecord,closeSlidePane:this.closeSlidePane.bind(this)})),s.a.createElement("div",{className:"flex font-12"},s.a.createElement(Kt,{placeholder:"输入标签名称搜索",style:{width:150,margin:"10px 0px",marginLeft:"10px"},onSearch:this.handleApiSearch.bind(this)})),s.a.createElement(Y.a,{rowKey:"id",rowClassName:function(t,a){return e.state.showRecord.apiId==t.apiId?"row-select":""},className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange}))}}]),t}(i.Component),Jt=Qt,Xt=Jt,Zt=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(qt,"sortType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/noApprovedCard.js"),__REACT_HOT_LOADER__.register(Bt,"orderType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/noApprovedCard.js"),__REACT_HOT_LOADER__.register(Yt,"TextArea","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/noApprovedCard.js"),__REACT_HOT_LOADER__.register(Kt,"Search","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/noApprovedCard.js"),__REACT_HOT_LOADER__.register(Qt,"NoApprovedCard","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/noApprovedCard.js"),__REACT_HOT_LOADER__.register(Jt,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/noApprovedCard.js")),$.a.TextArea),$t=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={phone:"",dtuicUserId:"",email:""},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){this.getApiCreatorInfo()}},{key:"componentWillReceiveProps",value:function(e){this.props.showRecord&&this.props.showRecord.apiId!==e.showRecord.apiId&&e.slidePaneShow&&this.getApiCreatorInfo(e.showRecord.apiId)}},{key:"getApiCreatorInfo",value:function(e){var t=this;(e=e||this.props.showRecord.apiId)&&this.props.getApiCreatorInfo(e).then(function(e){e&&t.setState({phone:e.data.phoneNumber,dtuicUserId:e.data.userName,email:e.data.email})})}},{key:"render",value:function(){return s.a.createElement(Mt.a,{visible:this.props.slidePaneShow,style:{right:"-20px",width:"80%",minHeight:"300px"},onClose:this.props.closeSlidePane},s.a.createElement("h1",{className:"box-title approved-card-pane-title"},"详情"),s.a.createElement("div",{style:{paddingLeft:30,paddingTop:20}},s.a.createElement("p",null,"管理员已取消此接口的授权，您可以联系管理员咨询详细情况，管理员信息"),s.a.createElement("p",{style:{marginTop:20}},"用户名：",this.state.dtuicUserId),s.a.createElement("p",null,"手机号码：",this.state.phone),s.a.createElement("p",null,"邮箱：",this.state.email)))}}]),t}(i.Component),ea=$t,ta=ea,aa=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Zt,"TextArea","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/disabledCardSlidePane.js"),__REACT_HOT_LOADER__.register($t,"DisabledCardSlidePane","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/disabledCardSlidePane.js"),__REACT_HOT_LOADER__.register(ea,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/disabledCardSlidePane.js")),a(85),a(50)),na=a.n(aa),ra=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={callUrl:""},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"getApiCallUrl",value:function(e){var t=this;e=e||this.props.showRecord.apiId,this.props.getApiCallUrl(e).then(function(e){e&&t.setState({callUrl:e.data})})}},{key:"componentDidMount",value:function(){this.getApiCallUrl()}},{key:"componentWillReceiveProps",value:function(e){e.showRecord&&this.props.showRecord.apiId!=e.showRecord.apiId&&e.slidePaneShow&&this.getApiCallUrl(e.showRecord.apiId)}},{key:"render",value:function(){var e="/dl/market/detail/"+this.props.showRecord.apiId;return s.a.createElement("div",{style:{paddingLeft:30}},s.a.createElement("p",{style:{lineHeight:"30px"}},"调用URL：",this.state.callUrl),s.a.createElement(A.c,{to:e},"在标签市场中查看"))}}]),t}(i.Component),ia=ra,sa=ia,oa=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ra,"ApiCallMethod","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/others/apiCallMethod.js"),__REACT_HOT_LOADER__.register(ia,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/others/apiCallMethod.js")),a(70),a(31)),la=a.n(oa),ca=(a(74),a(27)),pa=a.n(ca),ua=a(84),da=a(9),_a=a(72);a(139),a(198),a(133),a(132);var ma,ha=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={apiId:"",data:{}},n.resize=function(){var e;return(e=n).__resize__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"getInfo",value:function(){var e=this;this.state.apiId&&this.props.getApiCallInfo(this.state.apiId,this.props.dateType).then(function(t){t&&e.setState({data:t.data},function(){e.initLineChart()})})}},{key:"componentDidMount",value:function(){this.setState({apiId:this.props.showRecord&&this.props.showRecord.apiId}),this.getInfo()}},{key:"componentWillReceiveProps",value:function(e){var t=this;(e.showRecord&&this.state.apiId!==e.showRecord.apiId||this.props.dateType!==e.dateType)&&this.setState({apiId:e.showRecord.apiId},function(){e.slidePaneShow&&t.getInfo()})}},{key:"__resize__REACT_HOT_LOADER__",value:function(){this.state.lineChart&&this.state.lineChart.resize()}},{key:"initLineChart",value:function(){if(this.state.data&&this.state.data.infoList){for(var e=this.state.data.infoList,t=[],a=[],n=[],r=0;r<e.length;r++)if(t.push(e[r].callCount),a.push(e[r].failRate),this.props.dateType)switch(this.props.dateType){case"1":n.push(H.a.formatHours(e[r].time));break;case"7":n.push(H.a.formatDateHours(e[r].time));break;case"30":n.push(H.a.formatDate(e[r].time))}var i=_a.init(document.getElementById("MyApiDetailState")),s=Object(da.cloneDeep)(Ke);s.grid.right="40px",s.tooltip.formatter=function(e){for(var t=e[0].name,a=0,n=e.length;a<n;a++){var r="次";"失败率"==e[a].seriesName&&(r="%"),t+='<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e[a].color+'"></span>'+e[a].seriesName+" : "+e[a].value+r}return t},s.series=[{symbol:"none",name:"调用次数",data:t,type:"line",smooth:!0,itemStyle:{normal:{color:"#1C86EE"}}},{symbol:"none",name:"失败率",data:a,type:"line",smooth:!0,yAxisIndex:1,itemStyle:{normal:{color:"#EE0000"}}}],s.xAxis[0].data=n,i.setOption(s),this.setState({lineChart:i})}}},{key:"getDateText",value:function(){switch(this.props.dateType){case"1":return"24小时";case"7":return"7天";case"30":return"30天";default:return""}}},{key:"render",value:function(){return s.a.createElement("div",{style:{paddingLeft:30}},s.a.createElement(la.a,{gutter:130,className:"m-count padding-l20 height-101"},s.a.createElement(pa.a,{span:8},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:150}},s.a.createElement("span",{className:"m-count-title text-left"},"最近",this.getDateText(),"累计调用"),s.a.createElement("span",{className:"m-count-content font-black text-left"},this.state.data&&this.state.data.callCount||0,s.a.createElement("span",{style:{fontSize:12}},"次")))),s.a.createElement(pa.a,{span:6},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:100}},s.a.createElement("span",{className:"m-count-title text-left"},"最近",this.getDateText(),"失败率"),s.a.createElement("span",{className:"m-count-content font-red text-left"},this.state.data&&this.state.data.failRate||0,s.a.createElement("span",{style:{fontSize:12}},"%")))),s.a.createElement(pa.a,{span:8},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:150}},s.a.createElement("span",{className:"m-count-title text-left"},"累计调用"),s.a.createElement("span",{className:"m-count-content font-black text-left"},this.state.data&&this.state.data.totalCount||"---")))),s.a.createElement(ua.a,{onResize:this.resize},s.a.createElement("article",{id:"MyApiDetailState",style:{width:"100%",height:"300px"}})))}}]),t}(i.Component),Ea=ha,ga=Ea,fa=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ha,"ApiCallState","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/others/apiCallState.js"),__REACT_HOT_LOADER__.register(Ea,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/others/apiCallState.js")),{1:"禁用",2:"未认证",3:"参数错误",4:"超时",5:"超出限制",6:"其他"}),Ta=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={error:{},data:[],loading:!1,pageIndex:1,total:0,filter:{}},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){this.getErrorInfo()}},{key:"getErrorInfo",value:function(e){var t=this;(e=e||this.props.showRecord.apiId)&&(this.props.getApiCallErrorInfo(e).then(function(e){if(e){for(var a={},n=0;n<e.data.recordInfoList.length;n++){var r=e.data.recordInfoList[n],i=fa[r.type];i&&(a[i]={percent:r.rate,count:r.callNum})}t.setState({error:a})}}),this.props.queryApiCallLog(e,this.state.pageIndex,this.state.filter.bizType&&this.state.filter.bizType[0]).then(function(e){e&&t.setState({data:e.data.data,total:e.data.totalCount})}))}},{key:"componentWillReceiveProps",value:function(e){this.props.showRecord&&this.props.showRecord.apiId!==e.showRecord.apiId&&e.slidePaneShow&&this.getErrorInfo(e.showRecord.apiId)}},{key:"initColumns",value:function(){var e=this;return[{title:"调用时间",dataIndex:"invokeTime",key:"invokeTime",render:function(e){return H.a.formatDateTime(e)}},{title:"错误类型",dataIndex:"bizType",key:"bizType",render:function(e){return fa[e]},filters:[{text:"参数错误",value:"3"},{text:"禁用",value:"1"},{text:"未认证",value:"2"},{text:"超时",value:"4"},{text:"超出限制",value:"5"},{text:"其他",value:"6"}],filterMultiple:!1},{title:"错误日志",dataIndex:"content",key:"content",width:"50%"},{title:"操作",dataIndex:"",key:"deal",render:function(t,a){return s.a.createElement("a",{onClick:e.lookAllErrorText.bind(e,a.content)},"查看全部")}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:5,total:this.state.total}}},{key:"getSource",value:function(){return this.state.data}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,filter:t},function(){n.getErrorInfo()})}},{key:"lookAllErrorText",value:function(e){Q.a.info({title:"错误日志",content:s.a.createElement("div",null,s.a.createElement("p",null,e)),onOk:function(){}})}},{key:"getErrorPercent",value:function(e){return this.state.error[e]&&this.state.error[e].percent||0}},{key:"getErrorCount",value:function(e){return this.state.error[e]&&this.state.error[e].count||0}},{key:"render",value:function(){return s.a.createElement("div",{style:{paddingLeft:20}},s.a.createElement("p",{style:{lineHeight:"30px",paddingLeft:"20px"},className:"child-span-padding-r20"},s.a.createElement("span",null,"参数错误: ",this.getErrorPercent("参数错误"),"% (",this.getErrorCount("参数错误"),"次)"),s.a.createElement("span",null,"禁用: ",this.getErrorPercent("禁用"),"% (",this.getErrorCount("禁用"),"次)"),s.a.createElement("span",null,"未认证: ",this.getErrorPercent("未认证"),"% (",this.getErrorCount("未认证"),"次)"),s.a.createElement("span",null,"超时: ",this.getErrorPercent("超时"),"% (",this.getErrorCount("超时"),"次)"),s.a.createElement("span",null,"超出限制: ",this.getErrorPercent("超出限制"),"% (",this.getErrorCount("超出限制"),"次)"),s.a.createElement("span",null,"其他: ",this.getErrorPercent("其他"),"% (",this.getErrorCount("其他"),"次)")),s.a.createElement(Y.a,{rowKey:"id",className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange}))}}]),t}(i.Component),va=Ta,Aa=va,ya=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(fa,"errorType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/others/errorLog.js"),__REACT_HOT_LOADER__.register(Ta,"errorLog","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/others/errorLog.js"),__REACT_HOT_LOADER__.register(va,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/others/errorLog.js")),na.a.Button),Ca=na.a.Group,Da=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={approvedText:"同意",applyText:"申请调用此接口，请批准",nowView:"callState",callStateDate:"1",errorLogDate:"7"},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"callback",value:function(e){this.setState({nowView:e})}},{key:"chooseCallStateDate",value:function(e){this.setState({callStateDate:e.target.value})}},{key:"chooseErrorLogDate",value:function(e){this.setState({errorLogDate:e.target.value})}},{key:"getDateTypeView",value:function(){switch(this.state.nowView){case"callState":return s.a.createElement("div",{className:"m-radio-group",key:"callStateDate",style:{marginTop:4,marginRight:28}},s.a.createElement(Ca,{name:"callStateDate",defaultValue:this.state.callStateDate,className:"no-bd nobackground",onChange:this.chooseCallStateDate.bind(this)},s.a.createElement(ya,{value:"1"},"最近24小时"),s.a.createElement(ya,{value:"7"},"最近7天"),s.a.createElement(ya,{value:"30"},"最近30天")));case"errorLog":return s.a.createElement("div",{className:"m-radio-group",key:"errorLogDate",style:{marginTop:4,marginRight:28}},s.a.createElement(Ca,{name:"errorLogDate",defaultValue:this.state.errorLogDate,className:"no-bd nobackground",onChange:this.chooseErrorLogDate.bind(this)},s.a.createElement(ya,{value:"7"},"最近7天")));default:return null}}},{key:"render",value:function(){var e=3==this.props.showRecord.status||1==this.props.showRecord.apiStatus?null:s.a.createElement(Nt.a.TabPane,{tab:"调用方式",key:"callMethod"},s.a.createElement(sa,this.props));return s.a.createElement(Mt.a,{className:"m-tabs tabs-filter-show",visible:this.props.slidePaneShow,style:{right:"-20px",width:"80%",minHeight:"350px"},onClose:this.props.closeSlidePane},s.a.createElement(Nt.a,{activeKey:this.state.nowView,onChange:this.callback.bind(this),tabBarExtraContent:this.getDateTypeView()},s.a.createElement(Nt.a.TabPane,{tab:"调用情况",key:"callState"},s.a.createElement(ga,U()({},this.props,{dateType:this.state.callStateDate}))),s.a.createElement(Nt.a.TabPane,{tab:"错误日志",key:"errorLog"},s.a.createElement(Aa,U()({},this.props,{dateType:this.state.errorLogDate}))),e))}}]),t}(i.Component),ba=Da,ka=ba,Oa=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ya,"RadioButton","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/detailSlidePane.js"),__REACT_HOT_LOADER__.register(Ca,"RadioGroup","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/detailSlidePane.js"),__REACT_HOT_LOADER__.register(Da,"detailSlidePane","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/detailSlidePane.js"),__REACT_HOT_LOADER__.register(ba,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/detailSlidePane.js")),Q.a.confirm),Ra=$.a.Search,La={0:"inhand",1:"success",2:"notPass",3:"stop",4:"disabled"},Sa={applyTime:"gmt_create"},wa={ascend:"asc",descend:"desc"},Ia=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={pageIndex:1,slidePaneShowNoApproved:!1,slidePaneShowDisabled:!1,slidePaneShowSuccess:!1,loading:!1,sortedInfo:{},filterInfo:{},showRecord:{},apiName:void 0},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"getAppliedList",value:function(){var e=this;this.setState({loading:!0});var t=this.state,a=t.filterInfo,n=t.sortedInfo,r=t.pageIndex,i=t.apiName;this.props.getAppliedList(r,Sa[n.columnKey],wa[n.order],a.status,i).then(function(t){if(e.props.apiId&&t)for(var a in t.data.data){var n=t.data.data[a];if(e.props.apiId==n.apiId){e.apiClick(n);break}}e.setState({loading:!1})})}},{key:"componentDidMount",value:function(){this.getAppliedList()}},{key:"componentWillReceiveProps",value:function(e){if(this.props.apiId!=e.apiId&&e.apiId){var t=this.getSource();if(t)for(var a in t.data){var n=t.data[a];if(e.apiId==n.apiId){this.dealClick(n);break}}}}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,sortedInfo:a,filterInfo:t},function(){n.getAppliedList()})}},{key:"closeSlidePane",value:function(){this.setState({slidePaneShowNoApproved:!1,slidePaneShowDisabled:!1,slidePaneShowSuccess:!1,showRecord:{}})}},{key:"apiClick",value:function(e){var t=this["state"+La[e.status]];t&&t.call(this,e)}},{key:"statesuccess",value:function(e){this.setState({slidePaneShowSuccess:!0,slidePaneShowNoApproved:!1,slidePaneShowDisabled:!1,showRecord:e||{}})}},{key:"statenotPass",value:function(e){this.setState({slidePaneShowSuccess:!1,slidePaneShowNoApproved:!0,slidePaneShowDisabled:!1,showRecord:e||{}})}},{key:"statestop",value:function(e){this.setState({slidePaneShowSuccess:!0,slidePaneShowNoApproved:!1,slidePaneShowDisabled:!1,showRecord:e||{}})}},{key:"statedisabled",value:function(e){this.setState({slidePaneShowSuccess:!1,slidePaneShowNoApproved:!1,slidePaneShowDisabled:!0,showRecord:e||{}})}},{key:"dealClick",value:function(e){var t=this["deal"+La[e.status]];t&&t.call(this,e)}},{key:"dealsuccess",value:function(e){var t=this;Oa({title:"确认停止",content:"确认停止接口？",onOk:function(){t.props.updateApplyStatus(e.id,3).then(function(e){e&&ue.a.success("停止成功"),t.getAppliedList()})},onCancel:function(){}})}},{key:"dealstop",value:function(e){var t=this;Oa({title:"确认开启",content:"确认开启接口？",onOk:function(){t.props.updateApplyStatus(e.id,1).then(function(e){e&&ue.a.success("开启成功"),t.getAppliedList()})},onCancel:function(){}})}},{key:"dealnotPass",value:function(e){this.props.router.push("/dl/market")}},{key:"initColumns",value:function(){var e=this;return[{title:"标签名称",dataIndex:"apiName",key:"apiName",render:function(t,a){if(a.apiDeleted)return s.a.createElement("a",{className:"disable-all",onClick:e.apiClick.bind(e,a)},t+"(已删除)");var n=1==a.apiStatus,r=n?"(全平台禁用)":"";return s.a.createElement("a",{className:n?"disable-all":"",onClick:e.apiClick.bind(e,a)},t+r)}},{title:"授权状态",dataIndex:"status",key:"status",render:function(e){return s.a.createElement("span",{className:"state-"+La[e]},{success:"已通过",disabled:"取消授权",stop:"停用",notPass:"已拒绝"}[La[e]])},filters:[{text:"已通过",value:"1"},{text:"已拒绝",value:"2"},{text:"停用",value:"3"},{text:"取消授权",value:"4"}]},{title:"描述",dataIndex:"apiDesc",key:"apiDesc",width:300},{title:"最近24小时调用(次)",dataIndex:"recentCallNum",key:"recentCallNum"},{title:"最近24小时失败率",dataIndex:"recentFailRate",key:"recentFailRate",render:function(e){return e+"%"}},{title:"累计调用",dataIndex:"totalCallNum",key:"totalCallNum"},{title:"订购时间",dataIndex:"applyTime",key:"applyTime",sorter:!0,render:function(e){return H.a.formatDateTime(e)}},{title:"操作",dataIndex:"deal",key:"deal",render:function(t,a){var n={success:"停用",disabled:"",stop:"启用",notPass:"再次申请"};return n[La[a.status]]?s.a.createElement("a",{onClick:e.dealClick.bind(e,a)},n[La[a.status]]):null}}]}},{key:"getSource",value:function(){return this.props.mine.apiList.appliedList.data||[]}},{key:"getTotal",value:function(){return this.props.mine.apiList.appliedList&&this.props.mine.apiList.appliedList.totalCount||0}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:this.getTotal()}}},{key:"handleApiSearch",value:function(e){var t=this;this.setState({apiName:e,pageIndex:1},function(){t.getAppliedList()})}},{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement(q.a,{noHovering:!0,bordered:!1},s.a.createElement(Vt,U()({},this.props,{isApproved:!0,showRecord:this.state.showRecord,slidePaneShow:this.state.slidePaneShowNoApproved,closeSlidePane:this.closeSlidePane.bind(this)})),s.a.createElement(ta,U()({},this.props,{showRecord:this.state.showRecord,slidePaneShow:this.state.slidePaneShowDisabled,closeSlidePane:this.closeSlidePane.bind(this)})),s.a.createElement(ka,U()({style:{right:"0px"}},this.props,{showRecord:this.state.showRecord,slidePaneShow:this.state.slidePaneShowSuccess,closeSlidePane:this.closeSlidePane.bind(this)})),s.a.createElement("div",{className:"flex font-12"},s.a.createElement(Ra,{placeholder:"输入标签名称搜索",style:{width:150,margin:"10px 0px",marginLeft:"10px"},onSearch:this.handleApiSearch.bind(this)})),s.a.createElement(Y.a,{rowClassName:function(t,a){return e.state.showRecord.apiId==t.apiId?"row-select":""},rowKey:"id",className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange})))}}]),t}(i.Component),xa=Ia,Ha=xa,Na=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Oa,"confirm","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(Ra,"Search","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(La,"exchangeDic","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(Sa,"sortType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(wa,"orderType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(Ia,"ApprovedCard","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/approvedCard.js"),__REACT_HOT_LOADER__.register(xa,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/approvedCard.js")),function(e){var t=e.user;return{mine:e.mine,user:t}}),Pa=function(e){return{getApplyingList:function(t,a,n,r){return e(zt.getApplyingList({currentPage:t,pageSize:20,orderBy:a,sort:n,apiName:r}))},getAppliedList:function(t,a,n,r,i){return e(zt.getAppliedList({currentPage:t,pageSize:20,orderBy:a,sort:n,status:r,apiName:i}))},updateApplyStatus:function(t,a){return e(zt.updateApplyStatus({applyId:t,status:a}))},getApiCallInfo:function(t,a){return e(zt.getApiCallInfo({apiId:t,time:a}))},getApiCallErrorInfo:function(t){return e(zt.getApiCallErrorInfo({apiId:t}))},getApiCallUrl:function(t){return e(zt.getApiCallUrl({apiId:t}))},queryApiCallLog:function(t,a,n){return e(zt.queryApiCallLog({apiId:t,currentPage:a,bizType:n,pageSize:5}))},getApiCreatorInfo:function(t){return e(zt.getApiCreatorInfo({apiId:t}))}}},Ua=Object(y.b)(Na,Pa)(ma=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={nowView:"notApproved",pageIndex:1},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"handleClick",value:function(e){this.setState({nowView:e}),"approved"==e?this.props.router.replace("/dl/mine/approved"):this.props.router.replace("/dl/mine")}},{key:"componentWillMount",value:function(){var e=this.props.router.params.view;e&&this.setState({nowView:e})}},{key:"getCardView",value:function(){return this.state.nowView&&"notApproved"==this.state.nowView?s.a.createElement(Xt,this.props):s.a.createElement(Ha,this.props)}},{key:"render",value:function(){this.props.children;return s.a.createElement("div",{style:{height:"100%",overflowX:"hidden"}},s.a.createElement("div",{className:"box-1 m-card shadow m-tabs"},s.a.createElement(Nt.a,{animated:!1,defaultActiveKey:this.state.nowView,onChange:this.handleClick.bind(this),style:{height:"auto",overflow:"inherit"}},s.a.createElement(Nt.a.TabPane,{tab:"未审批",key:"notApproved"},s.a.createElement(Xt,U()({apiId:this.props.location.query&&this.props.location.query.apiId},this.props))),s.a.createElement(Nt.a.TabPane,{tab:"已审批",key:"approved"},s.a.createElement(Ha,U()({apiId:this.props.location.query&&this.props.location.query.apiId},this.props))))))}}]),t}(i.Component))||ma,ja=Ua,za=ja,Ma=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Na,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/index.js"),__REACT_HOT_LOADER__.register(Pa,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/index.js"),__REACT_HOT_LOADER__.register(Ua,"MyAPI","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/index.js"),__REACT_HOT_LOADER__.register(ja,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/myApi/index.js")),a(570)),Wa={getAllApiList:function(e){return Oe.post(me.GET_ALL_API_LIST,e)},getDataSourceByBaseInfo:function(e){return Oe.post(me.GET_DATASOURCE_BASE_INFO,e)},deleteApi:function(e){return Oe.post(me.DELETE_API,e)},updateApiStatus:function(e){return Oe.post(me.UPDATE_API,e)},getApiCallUserRankList:function(e){return Oe.post(me.GET_API_CALL_RANK,e)},getApiUserApplyList:function(e){return Oe.post(me.GET_API_BUY_STATE,e)},updateCatalogue:function(e){return Oe.post(me.UPDATE_CATAGORY,e)},addCatalogue:function(e){return Oe.post(me.ADD_CATAGORY,e)},deleteCatalogue:function(e){return Oe.post(me.DELETE_CATAGORY,e)},createApi:function(e){return Oe.post(me.NEW_API,e)},tablelist:function(e){return Oe.post(me.GET_TABLE_BY_DATASOURCE,e)},tablecolumn:function(e){return Oe.post(me.GET_TABLE_COLUMNS_DETAIL,e)},previewData:function(e){return Oe.post(me.GET_TABLE_PREVIEW_DATA,e)},updateApi:function(e){return Oe.post(me.CHANGE_API,e)},getApiInfo:function(e){return Oe.post(me.GET_API_DETAIL_INFO,e)},getApiCallErrorInfoForManager:function(e){return Oe.post(me.GET_API_CALL_ERROR_INFO_ADMIN,e)}},Ga=Wa,Fa=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Wa,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/api/apiManage.js"),{getAllApiList:function(e){return function(t){return Ga.getAllApiList(e).then(function(e){if(1===e.code)return t({type:Ma.a.GET_ALL_API_LIST,payload:e.data.data}),e})}},getDataSourceByBaseInfo:function(e){return function(t){return Ga.getDataSourceByBaseInfo(e).then(function(e){if(1===e.code)return e})}},deleteApi:function(e){return function(t){return Ga.deleteApi(e).then(function(e){if(1===e.code)return e})}},openApi:function(e){return function(t){return Ga.updateApiStatus({apiId:e,apiStatus:0}).then(function(e){if(1===e.code)return e})}},closeApi:function(e){return function(t){return Ga.updateApiStatus({apiId:e,apiStatus:1}).then(function(e){if(1===e.code)return e})}},getApiCallUserRankList:function(e){return function(t){return Ga.getApiCallUserRankList(e).then(function(e){if(1===e.code)return e})}},getApiUserApplyList:function(e){return function(t){return Ga.getApiUserApplyList(e).then(function(e){if(1===e.code)return e})}},updateCatalogue:function(e){return function(t){return Ga.updateCatalogue(e).then(function(e){if(1===e.code)return e})}},deleteCatalogue:function(e){return function(t){return Ga.deleteCatalogue(e).then(function(e){if(1===e.code)return e})}},addCatalogue:function(e){return function(t){return Ga.addCatalogue(e).then(function(e){if(1===e.code)return e})}},createApi:function(e){return function(t){return Ga.createApi(e).then(function(e){if(1===e.code)return e})}},updateApi:function(e){return function(t){return Ga.updateApi(e).then(function(e){if(1===e.code)return e})}},tablelist:function(e){return function(t){return Ga.tablelist(e).then(function(e){if(1===e.code)return e})}},tablecolumn:function(e){return function(t){return Ga.tablecolumn(e).then(function(e){if(1===e.code)return e})}},previewData:function(e){return function(t){return Ga.previewData(e).then(function(e){if(1===e.code)return e})}},getApiInfo:function(e){return function(t){return Ga.getApiInfo(e).then(function(e){if(1===e.code)return e})}},getApiCallErrorInfo:function(e){return function(t){return Ga.getApiCallErrorInfoForManager(e).then(function(e){if(1===e.code)return e})}}});"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Fa,"apiManageActions","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/actions/apiManage/index.js"),a(64);function Va(e){switch(e){case xe.MYSQL:return"MySQL";case xe.ORACLE:return"Oracle";case xe.SQLSERVER:return"SQLServer";case xe.HDFS:return"HDFS";case xe.HIVE:return"Hive";case xe.HBASE:return"HBase";case xe.FTP:return"FTP";case xe.MAXCOMPUTE:return"MaxCompute";default:return"其他"}}function qa(e){switch(e.value){case!0:return s.a.createElement("span",null,"通过");case!1:return s.a.createElement("span",null,"未通过");default:return s.a.createElement("span",null,"--")}}"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Va,"dataSourceText","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/components/display/index.js"),__REACT_HOT_LOADER__.register(qa,"DetailCheckStatus","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/components/display/index.js"));var Ba,Ya,Ka,Qa=$.a.Search,Ja=X.a.Option,Xa=Q.a.confirm,Za=function(e){return{user:e.user,apiMarket:e.apiMarket,apiManage:e.apiManage,dataSource:e.dataSource}},$a=function(e){return{getCatalogue:function(t){e(Se.getCatalogue(t))},getAllApiList:function(t){return e(Fa.getAllApiList(t))},getDataSourceList:function(t){return e(Fa.getDataSourceByBaseInfo({type:t}))},deleteApi:function(t){return e(Fa.deleteApi({apiIds:[t]}))},openApi:function(t){return e(Fa.openApi(t))},closeApi:function(t){return e(Fa.closeApi(t))},getDataSourcesType:function(){return e(Ct.getDataSourcesType())}}},en=Object(y.b)(Za,$a)(Ba=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={pageSize:20,pageIndex:1,type1:void 0,type2:void 0,total:0,dataSourceType:void 0,dataSource:void 0,searchName:null,filter:{},sortedInfo:{},changeMan:null,loading:!1},n.onSourceChange=function(){var e;return(e=n).__onSourceChange__REACT_HOT_LOADER__.apply(e,arguments)},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},n.dataSourceTypeChange=function(){var e;return(e=n).__dataSourceTypeChange__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){this.props.getCatalogue(0),this.getAllApi(),this.getDataSource(null),this.props.getDataSourcesType()}},{key:"exchangeSourceType",value:function(){var e=[],t={},a=this.props.dataSource.sourceType;for(var n in a){var r=a[n];t[r.value]=r.name,e.push({text:r.name,value:r.value})}return{typeList:e,typeDic:t}}},{key:"getAllApi",value:function(){var e=this,t={};t.name=this.state.searchName,t.pid=this.state.type1,t.cid=this.state.type2,t.dataSourceType=this.state.dataSourceType&&parseInt(this.state.dataSourceType),t.dataSourceId=this.state.dataSource&&parseInt(this.state.dataSource),t.modifyUserId=this.state.changeMan,t.orderBy={gmtModified:"gmt_modified"}[this.state.sortedInfo.columnKey],t.sort={ascend:"asc",descend:"desc"}[this.state.sortedInfo.order],t.currentPage=this.state.pageIndex,t.pageSize=this.state.pageSize,this.setState({loading:!0}),this.props.getAllApiList(t).then(function(t){e.setState({loading:!1}),t&&e.setState({total:t.data.totalCount})})}},{key:"renderSourceType",value:function(e,t){function a(e){return!e||e.length<1?null:e.map(function(e){return s.a.createElement(Ja,{key:e.id},e.name)})}var n=[],r=this.props.apiMarket.apiCatalogue;if(t){if(!r)return null;for(var i=0;i<r.length;i++)n.push({id:r[i].id,name:r[i].catalogueName});return a(n)}if(!r)return null;for(var o=void 0,l=0;l<r.length;l++)if(r[l].id==e){o=r[l].childCatalogue;break}if(!o)return null;for(var c=0;c<o.length;c++)o[c].api||n.push({id:o[c].id,name:o[c].catalogueName});return a(n)}},{key:"__onSourceChange__REACT_HOT_LOADER__",value:function(e){var t=this;this.setState({type1:e,type2:void 0},function(){t.getAllApi()})}},{key:"onUserSourceChange",value:function(e){var t=this;this.setState({type2:e},function(){t.getAllApi()})}},{key:"handleSearch",value:function(e){var t=this;this.setState({searchName:e||void 0,pageIndex:1},function(){t.getAllApi()})}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,filter:t,sortedInfo:a},function(){n.getAllApi()})}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:this.state.total}}},{key:"openDetail",value:function(e){this.props.router.push("/dl/manage/detail/"+e)}},{key:"initColumns",value:function(){var e=this;return[{width:"10%",title:"标签名称",dataIndex:"name",key:"name",render:function(t,a){return s.a.createElement("a",{onClick:e.openDetail.bind(e,a.apiId)},t)}},{width:100,title:"类型",dataIndex:"type",key:"type",render:function(e,t){return He[e]}},{width:"10%",title:"描述",dataIndex:"tagDesc",key:"tagDesc"},{width:"10%",title:"数据源",dataIndex:"dataSourceType",key:"dataSourceType",render:function(e,t){return Va(t.dataSourceType)+" / "+t.dataSourceName}},{width:"10%",title:"最近24小时调用",dataIndex:"total1d",key:"total1d"},{width:"8%",title:"累计调用",dataIndex:"invokeTotal",key:"invokeTotal"},{width:"10%",title:"最近修改人",dataIndex:"modifyUser",key:"modifyUser"},{width:"10%",title:"最近修改时间",dataIndex:"gmtModified",key:"gmtModified",sorter:!0,render:function(e){return H.a.formatDateTime(e)}},{width:"10%",title:"创建人",dataIndex:"createUser",key:"createUser"},{width:100,title:"启用状态",dataIndex:"apiStatus",key:"apiStatus",render:function(e,t){return Ue[e]}},{width:120,title:"操作",dataIndex:"deal",key:"deal",render:function(t,a){return 0==a.apiStatus?s.a.createElement("a",{onClick:e.closeApi.bind(e,a.apiId)},"禁用"):s.a.createElement("div",null,s.a.createElement("a",{onClick:e.openApi.bind(e,a.apiId)},"开启"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.editApi.bind(e,a.id)},"编辑"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.deleteApi.bind(e,a.apiId)},"删除"))}}]}},{key:"getSource",value:function(){return this.props.apiManage.apiList}},{key:"editApi",value:function(e){this.props.router.push("/dl/manage/editApi/"+e)}},{key:"openApi",value:function(e){var t=this;Xa({title:"确认开启?",content:"确认开启标签",onOk:function(){t.setState({loading:!0}),t.props.openApi(e).then(function(e){t.setState({loading:!1}),ue.a.success("开启成功"),e&&t.getAllApi()})},onCancel:function(){}})}},{key:"closeApi",value:function(e){var t=this;Xa({title:"确认禁用?",content:"确认禁用标签",onOk:function(){t.setState({loading:!0}),t.props.closeApi(e).then(function(e){t.setState({loading:!1}),ue.a.success("禁用成功"),e&&t.getAllApi()})},onCancel:function(){}})}},{key:"deleteApi",value:function(e){var t=this;Xa({title:"确认删除?",content:"确认删除标签",onOk:function(){t.setState({loading:!0}),t.props.deleteApi(e).then(function(e){t.setState({loading:!1}),1===e.code&&(ue.a.success("删除成功"),t.getAllApi())})},onCancel:function(){}})}},{key:"gerDataSourceView",value:function(){var e=this.state.dataSourceList;return e?e.map(function(e,t){return s.a.createElement(Ja,{key:e.id},e.name)}):null}},{key:"getDataSource",value:function(){var e=this;this.props.getDataSourceList(this.state.dataSourceType).then(function(t){if(t){var a=t.data;e.setState({dataSourceList:a})}})}},{key:"getDataSourceTypeView",value:function(){var e=this.exchangeSourceType(),t=e.typeList;e.typeDic;return!t||t.length<1?null:t.map(function(e){return s.a.createElement(Ja,{key:e.value},e.text)})}},{key:"__dataSourceTypeChange__REACT_HOT_LOADER__",value:function(e){var t=this;this.setState({dataSourceType:e,dataSource:void 0},function(){t.getDataSource(),t.getAllApi()})}},{key:"dataSourceChange",value:function(e){var t=this;this.setState({dataSource:e},function(){t.getAllApi()})}},{key:"changeManCheck",value:function(e){var t=this,a=null;e.target.checked&&(a=this.props.user.id),this.setState({changeMan:a},function(){t.getAllApi()})}},{key:"openApiType",value:function(){this.props.router.push("/dl/manage/apiType")}},{key:"newApi",value:function(){this.props.router.push("/dl/manage/newApi")}},{key:"render",value:function(){this.props.children;var e=s.a.createElement("div",{className:"flex font-12"},s.a.createElement(Qa,{placeholder:"输入标签名称搜索",style:{width:200,margin:"10px 0"},onSearch:this.handleSearch.bind(this)}),s.a.createElement("div",{className:"m-l-8"},"标签分类：",s.a.createElement(X.a,{allowClear:!0,value:this.state.type1,style:{width:150},onChange:this.onSourceChange},this.renderSourceType(0,!0))),s.a.createElement("div",{className:"m-l-8"},"类型：",s.a.createElement(X.a,{allowClear:!0,value:this.state.dataSourceType,style:{width:150},onChange:this.dataSourceTypeChange},this.getDataSourceTypeView()))),t=s.a.createElement("div",{style:{paddingTop:"10px"}},s.a.createElement(Ie.a,{onClick:this.openApiType.bind(this),style:{marginRight:"8px"},type:"primary"},"类目管理"));return s.a.createElement("div",{className:"api-management"},s.a.createElement("div",{style:{marginTop:"20px"},className:"margin-0-20 m-card box-2"},s.a.createElement(q.a,{noHovering:!0,title:e,extra:t},s.a.createElement(Y.a,{rowKey:"id",className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange}))))}}]),t}(i.Component))||Ba,tn=en,an=tn,nn=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Qa,"Search","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/index.js"),__REACT_HOT_LOADER__.register(Ja,"Option","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/index.js"),__REACT_HOT_LOADER__.register(Xa,"confirm","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/index.js"),__REACT_HOT_LOADER__.register(Za,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/index.js"),__REACT_HOT_LOADER__.register($a,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/index.js"),__REACT_HOT_LOADER__.register(en,"APIMana","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/index.js"),__REACT_HOT_LOADER__.register(tn,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/index.js")),a(569)),rn={allApplyList:function(e){return Oe.post(me.GET_ALL_APPLY_LIST,e)},handleApply:function(e){return Oe.post(me.HANDLE_APPLY,e)}},sn=rn,on=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(rn,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/api/approval.js"),{allApplyList:function(e){return function(t){return sn.allApplyList(e).then(function(e){if(1===e.code)return t({type:nn.a.GET_ALL_APPLY_LIST,payload:e.data.data}),e})}},handleApply:function(e){return function(t){return sn.handleApply(e).then(function(e){if(1===e.code)return e})}}}),ln=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(on,"approvalActions","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/actions/approval/index.js"),$.a.TextArea),cn=$.a.Search,pn=te.a.Item,un={applyTime:"gmt_modified"},dn={ascend:"asc",descend:"desc"},_n=function(e){var t=e.user;return{approval:e.approval,apiManage:e.apiManage,user:t}},mn=function(e){return{approvalList:function(t){return e(on.allApplyList(t))},handleApply:function(t){return e(on.handleApply(t))}}},hn=Object(y.b)(_n,mn)(Ya=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={pageIndex:1,spVisible:!1,msgVisible:!1,data:[],sorter:{},filter:{status:null},userName:"",applyContent:"",replyContent:"",apiName:void 0,spApplyMsg:{},total:0},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){var e=this,t=this.props.router.location.query&&this.props.router.location.query.status,a=[];t&&a.push(t.toString()),this.setState({filter:{status:a&&a.length>0?a:null}},function(){e.getApprovalList()})}},{key:"getApprovalList",value:function(){var e=this;this.props.approvalList({userName:this.state.userName,status:this.state.filter.status&&this.state.filter.status[0],currentPage:this.state.pageIndex,pageSize:20,sort:dn[this.state.sorter.order],orderBy:un[this.state.sorter.columnKey],apiName:this.state.apiName}).then(function(t){t&&e.setState({total:t.data.totalCount})})}},{key:"handleSearch",value:function(e){var t=this;this.setState({userName:e,pageIndex:1},function(){t.getApprovalList()})}},{key:"handleApiSearch",value:function(e){var t=this;this.setState({apiName:e,pageIndex:1},function(){t.getApprovalList()})}},{key:"onSourceChange",value:function(){}},{key:"handleCancel",value:function(){this.setState({spVisible:!1,msgVisible:!1})}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,filter:t,sorter:a},function(){n.getApprovalList()})}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:20,total:this.state.total}}},{key:"getDealType",value:function(e){return{notApproved:"立即审批",pass:"查看详情",rejected:"查看详情",stop:"查看详情",disabled:"查看详情"}[e||"nothing"]}},{key:"deal",value:function(e){var t=this["deal"+Me[e.status]];t&&t.call(this,e)}},{key:"dealrejected",value:function(e){this.lookDetail(e)}},{key:"dealstop",value:function(e){this.lookDetail(e)}},{key:"dealdisabled",value:function(e){this.lookDetail(e)}},{key:"dealpass",value:function(e){this.lookDetail(e)}},{key:"dealnotApproved",value:function(e){this.spShow(e)}},{key:"getSource",value:function(){return this.props.approval.approvalList}},{key:"initColumns",value:function(){var e=this;return[{title:"申请人",dataIndex:"applyUserName",key:"applyUserName"},{title:"状态",dataIndex:"status",key:"status",render:function(e){return s.a.createElement("span",{className:"state-"+Me[e]},{notApproved:"未审批",pass:"已通过",rejected:"已拒绝",stop:"停用",disabled:"取消授权"}[Me[e]])},filterMultiple:!1,filters:[{text:"未审批",value:"0"},{text:"已通过",value:"1"},{text:"已拒绝",value:"2"},{text:"停用",value:"3"},{text:"取消授权",value:"4"}],filteredValue:this.state.filter.status||null},{title:"申请标签",dataIndex:"apiName",key:"apiName"},{title:"申请说明",dataIndex:"applyContent",key:"applyContent",width:"250px"},{title:"申请时间",dataIndex:"applyTime",key:"applyTime",sorter:!0,render:function(e){return H.a.formatDateTime(e)}},{title:"操作",dataIndex:"deal",render:function(t,a){return s.a.createElement("a",{onClick:e.deal.bind(e,a)},e.getDealType(Me[a.status]))}}]}},{key:"renderSourceType",value:function(){return null}},{key:"getCardTitle",value:function(){return s.a.createElement("div",{className:"flex font-12"},s.a.createElement(cn,{placeholder:"输入用户名称搜索",style:{width:150,margin:"10px 0"},onSearch:this.handleSearch.bind(this)}),s.a.createElement(cn,{placeholder:"输入标签名称搜索",style:{width:150,margin:"10px 0px",marginLeft:"30px"},onSearch:this.handleApiSearch.bind(this)}))}},{key:"sp",value:function(e){var t=this;this.props.form.validateFields(function(a,n){if(!a){var r=t.state.spApplyMsg.id,i=n.APIGroup;t.props.handleApply({applyId:r,isPassed:e,approvalContent:i}).then(function(e){t.setState({spVisible:!1}),e&&(ue.a.success("审批成功"),t.getApprovalList())})}})}},{key:"spShow",value:function(e){this.props.form.resetFields(),this.setState({spVisible:!0,spApplyMsg:e})}},{key:"lookDetail",value:function(e){this.setState({msgVisible:!0,applyContent:e.applyContent,replyContent:e.replyContent})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator;return s.a.createElement("div",{className:"api-approval"},s.a.createElement("h1",{className:"box-title"},"审批授权"),s.a.createElement("div",{className:"margin-0-20 m-card"},s.a.createElement(q.a,{noHovering:!0,title:this.getCardTitle(),className:"shadow"},s.a.createElement(Y.a,{rowKey:"id",className:"m-table monitor-table",columns:this.initColumns(),loading:!1,pagination:this.getPagination(),dataSource:this.getSource(),onChange:this.onTableChange}))),s.a.createElement(Q.a,{title:"审批授权",visible:this.state.spVisible,onCancel:this.handleCancel.bind(this),footer:s.a.createElement("div",null,s.a.createElement(Ie.a,{type:"danger",onClick:this.sp.bind(this,!1)},"拒绝"),s.a.createElement(Ie.a,{type:"primary",onClick:this.sp.bind(this,!0)},"同意"))},s.a.createElement(te.a,null,s.a.createElement(pn,U()({},Fe,{label:"申请说明"}),s.a.createElement(ln,{disabled:!0,value:this.state.spApplyMsg.applyContent})),s.a.createElement(pn,U()({},Fe,{label:"审批说明"}),e("APIGroup",{rules:[{required:!0,message:"请填写审批说明"},{max:200,message:"最大字数不能超过200"}]})(s.a.createElement(ln,null))))),s.a.createElement(Q.a,{title:"审批详情",visible:this.state.msgVisible,footer:s.a.createElement(Ie.a,{type:"primary",onClick:this.handleCancel.bind(this)},"关闭"),onCancel:this.handleCancel.bind(this)},s.a.createElement(te.a,null,s.a.createElement(pn,U()({},Fe,{label:"申请说明"}),s.a.createElement(ln,{disabled:!0,value:this.state.applyContent})),s.a.createElement(pn,U()({},Fe,{label:"审批说明"}),s.a.createElement(ln,{disabled:!0,value:this.state.replyContent})))))}}]),t}(i.Component))||Ya,En=te.a.create()(hn),gn=En,fn=gn,Tn=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ln,"TextArea","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/approval/index.js"),__REACT_HOT_LOADER__.register(cn,"Search","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/approval/index.js"),__REACT_HOT_LOADER__.register(pn,"FormItem","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/approval/index.js"),__REACT_HOT_LOADER__.register(un,"sortType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/approval/index.js"),__REACT_HOT_LOADER__.register(dn,"orderType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/approval/index.js"),__REACT_HOT_LOADER__.register(_n,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/approval/index.js"),__REACT_HOT_LOADER__.register(mn,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/approval/index.js"),__REACT_HOT_LOADER__.register(hn,"APIApproval","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/approval/index.js"),__REACT_HOT_LOADER__.register(En,"WrapComponent","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/approval/index.js"),__REACT_HOT_LOADER__.register(gn,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/approval/index.js")),a(36)),vn=a.n(Tn),An=(a(223),a(101)),yn=a.n(An),Cn=(a(96),a(61)),Dn=a.n(Cn),bn=(a(188),a(52)),kn=a.n(bn),On=(a(391),a(193)),Rn=a.n(On),Ln=a(151),Sn={queryRegisteredTag:function(e){return Oe.post(me.QUERY_REGISTERED_TAG,e)},addRegisterTag:function(e){return Oe.post(me.ADD_REGISTER_TAG,e)},queryRuleTag:function(e){return Oe.post(me.QUERY_RULE_TAG,e)},addRuleTag:function(e){return Oe.post(me.ADD_RULE_TAG,e)},updateTagSqlInfo:function(e){return Oe.post(me.UPDATE_TAG_SQL_INFO,e)},getTagCondition:function(e){return Oe.post(me.GET_TAG_CONDITION,e)},editTagCondition:function(e){return Oe.post(me.EDIT_TAG_CONDITION,e)},deleteTagCondition:function(e){return Oe.post(me.DELETE_TAG_CONDITION,e)},getComputeSource:function(e){return Oe.post(me.GET_COMPUTE_SOURCE,e)},queryTagLogInfo:function(e){return Oe.post(me.QUERY_TAG_LOG,e)},updateTagBaseInfo:function(e){return Oe.post(me.UPDATE_TAG_BASE_INFO,e)},deleteTag:function(e){return Oe.post(me.DELETE_TAG,e)},checkPublish:function(e){return Oe.post(me.PUBLISH_CHECK,e)},publishTag:function(e){return Oe.post(me.PUBLISH_TAG,e)},getRuleTagDetail:function(e){return Oe.post(me.GET_RULE_TAG_RETAIL,e)},getAllIdentifyColumn:function(e){return Oe.post(me.GET_ALL_IDENTIFY_COLUMN,e)},queryIdentifyColumn:function(e){return Oe.post(me.QUERY_IDENTIFY_COLUMN,e)},addIdentifyColumn:function(e){return Oe.post(me.ADD_IDENTIFY_COLUMN,e)},updateIdentifyColumn:function(e){return Oe.post(me.UPDATE_IDENTIFY_COLUMN,e)},deleteIdentifyColumn:function(e){return Oe.post(me.DELETE_IDENTIFY_COLUMN,e)}},wn=Sn,In=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Sn,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/api/tagConfig.js"),{getRegisteredTagList:function(e){return function(t){t({type:Ln.a.CHANGE_LOADING}),wn.getRegisteredTag(e).then(function(e){1===e.code&&t({type:Ln.a.GET_REGISTERED_TAG_LIST,payload:e.data}),t({type:Ln.a.CHANGE_LOADING})})}},getRuleTagList:function(e){return function(t){t({type:Ln.a.CHANGE_LOADING}),wn.queryRuleTag(e).then(function(e){1===e.code&&t({type:Ln.a.GET_RULE_TAG_LIST,payload:e.data}),t({type:Ln.a.CHANGE_LOADING})})}},getAllIdentifyColumn:function(e){return function(t){wn.getAllIdentifyColumn(e).then(function(e){1===e.code&&t({type:Ln.a.GET_ALL_IDENTIFY_COLUMN,payload:e.data})})}}}),xn=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(In,"tagConfigActions","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/actions/tagConfig/index.js"),X.a.Option),Hn=te.a.Item,Nn=$.a.TextArea,Pn=function(e){return{tagConfig:e.tagConfig,dataSource:e.dataSource,apiMarket:e.apiMarket}},Un=function(e){return{getTagDataSourcesList:function(t){e(Ct.getTagDataSourcesList(t))},getAllIdentifyColumn:function(t){e(In.getAllIdentifyColumn(t))},getDataSourcesTable:function(t){e(Ct.getDataSourcesTable(t))},resetDataSourcesTable:function(){e(Ct.resetDataSourcesTable())},getDataSourcesColumn:function(t){e(Ct.getDataSourcesColumn(t))},resetDataSourcesColumn:function(){e(Ct.resetDataSourcesColumn())}}},jn=Object(y.b)(Pn,Un)(Ka=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={},n.initCatagoryOption=function(){var e;return(e=n).__initCatagoryOption__REACT_HOT_LOADER__.apply(e,arguments)},n.onSourceChange=function(){var e;return(e=n).__onSourceChange__REACT_HOT_LOADER__.apply(e,arguments)},n.onSourceTableChange=function(){var e;return(e=n).__onSourceTableChange__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){this.props.getTagDataSourcesList(),this.props.getAllIdentifyColumn()}},{key:"__initCatagoryOption__REACT_HOT_LOADER__",value:function(e){var t=this;return e.some(function(e){return!0===e.api})?[]:e.map(function(e){return{value:e.id,label:e.catalogueName,children:t.initCatagoryOption(e.childCatalogue)}})}},{key:"__onSourceChange__REACT_HOT_LOADER__",value:function(e){this.props.form.setFieldsValue({originTable:void 0,originColumn:void 0,identityColumn:void 0}),this.props.resetDataSourcesTable(),this.props.resetDataSourcesColumn(),this.props.getDataSourcesTable({sourceId:e})}},{key:"__onSourceTableChange__REACT_HOT_LOADER__",value:function(e){var t=this.props.form;t.setFieldsValue({originColumn:void 0,identityColumn:void 0}),this.props.resetDataSourcesColumn(),this.props.getDataSourcesColumn({sourceId:t.getFieldValue("dataSourceId"),tableName:e})}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.visible,n=e.editData,r=e.apiMarket,i=e.dataSource,o=e.tagConfig,l=t.getFieldDecorator,c=r.apiCatalogue,p=o.identifyColumn,u=i.tagSourceList,d=i.sourceTable,_=i.sourceColumn,m="已发布"===Pe[n.publishStatus],h=(n.name?"编辑":"新建")+He[n.type];return s.a.createElement(Q.a,{title:h,wrapClassName:"ruleTagModal",width:"50%",visible:a,maskClosable:!1,okText:"保存",cancelText:"取消",onOk:this.props.saveTag.bind(this,t),onCancel:this.props.cancel.bind(this,t)},s.a.createElement(te.a,null,s.a.createElement(Hn,U()({},Fe,{label:"标签名称"}),l("name",{rules:[{required:!0,message:"标签名称不可为空"},{max:20,message:"最大字数不能超过20"},{pattern:new RegExp(/^([\w|\u4e00-\u9fa5]*)$/),message:"名称只能以字母，数字，下划线组成"}],initialValue:n.name})(s.a.createElement($.a,{disabled:m}))),s.a.createElement(Hn,U()({},Fe,{label:"标签描述"}),l("tagDesc",{rules:[{max:200,message:"描述字符不能超过200"}],initialValue:n.tagDesc})(s.a.createElement(Nn,{placeholder:"标签描述",autosize:{minRows:2,maxRows:6}}))),s.a.createElement(Hn,U()({},Fe,{label:"标签类目"}),l("catalogueId",{rules:[{required:!0,message:"标签类目不可为空"}],initialValue:n.catalogueId})(s.a.createElement(Rn.a,{showSearch:!0,popupClassName:"noheight",options:this.initCatagoryOption(c),placeholder:"请选择分组"}))),s.a.createElement(Hn,U()({},Fe,{label:"值域"}),l("tagRange",{rules:[{required:!0,message:"值域不可为空"},{max:200,message:"请控制在200个字符以内！"}],initialValue:n.tagRange})(s.a.createElement(Nn,{placeholder:"值域",autosize:{minRows:2,maxRows:6}}))),s.a.createElement(Hn,U()({},Fe,{label:"目标数据库"}),l("dataSourceId",{rules:[{required:!0,message:"目标数据库不可为空"}],initialValue:n.dataSourceId?n.dataSourceId.toString():void 0})(s.a.createElement(X.a,{showSearch:!0,optionFilterProp:"title",placeholder:"选择目标数据库",disabled:m,onChange:this.onSourceChange},u.map(function(e){var t=e.dataName+"（"+e.sourceTypeValue+"）";return s.a.createElement(xn,{key:e.id,value:e.id.toString(),title:t},t)})))),"注册标签"===He[n.type]?s.a.createElement("div",null,s.a.createElement(Hn,U()({},Fe,{label:"来源表"}),l("originTable",{rules:[{required:!0,message:"请选择来源表"}],initialValue:n.originTable})(s.a.createElement(X.a,{showSearch:!0,placeholder:"选择来源表",disabled:m,onChange:this.onSourceTableChange},d.map(function(e){return s.a.createElement(xn,{key:e,value:e},e)})))),s.a.createElement(Hn,U()({},Fe,{label:"来源列"}),l("originColumn",{rules:[{required:!0,message:"请选择来源列"}],initialValue:n.originColumn})(s.a.createElement(X.a,{showSearch:!0,disabled:m,placeholder:"选择来源列"},_.map(function(e){return s.a.createElement(xn,{key:e.key,value:e.key},e.key)})))),s.a.createElement(Hn,U()({},Fe,{label:"识别列ID"}),l("identityColumn",{rules:[{required:!0,message:"识别列ID不可为空"}],initialValue:n.identityColumn})(s.a.createElement(X.a,{showSearch:!0,disabled:m,placeholder:"选择识别列ID"},_.map(function(e){return s.a.createElement(xn,{key:e.key,value:e.key},e.key)}))))):s.a.createElement("div",null,s.a.createElement(Hn,U()({},Fe,{label:"来源表"}),l("originTable",{rules:[{required:!0,message:"来源表不可为空"},{max:64,message:"请控制在64个字符以内！"}],initialValue:n.originTable})(s.a.createElement($.a,{disabled:m}))),s.a.createElement(Hn,U()({},Fe,{label:"识别列ID"}),l("identityColumn",{rules:[{required:!0,message:"识别列ID不可为空"},{max:64,message:"请控制在64个字符以内！"}],initialValue:n.identityColumn})(s.a.createElement($.a,{disabled:m})))),s.a.createElement(Hn,U()({},Fe,{label:"识别列类型"}),l("identityId",{rules:[{required:!0,message:"识别列类型不可为空"}],initialValue:n.identityId?n.identityId.toString():void 0})(s.a.createElement(X.a,{showSearch:!0,optionFilterProp:"title",placeholder:"选择识别列类型",disabled:m},p.map(function(e){return s.a.createElement(xn,{key:e.id,value:e.id.toString(),title:e.name},e.name)}))))))}}]),t}(i.Component))||Ka;jn=te.a.create()(jn);"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(xn,"Option","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/dashboard/editTagModal.js"),__REACT_HOT_LOADER__.register(Hn,"FormItem","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/dashboard/editTagModal.js"),__REACT_HOT_LOADER__.register(Nn,"TextArea","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/dashboard/editTagModal.js"),__REACT_HOT_LOADER__.register(Pn,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/dashboard/editTagModal.js"),__REACT_HOT_LOADER__.register(Un,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/dashboard/editTagModal.js"),__REACT_HOT_LOADER__.register(jn,"EditTagModal","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/dashboard/editTagModal.js"));var zn,Mn,Wn,Gn=$.a.Search,Fn=X.a.Option,Vn=function(e){return{apiMarket:e.apiMarket}},qn=function(e){return{getDataSourcesTable:function(t){e(Ct.getDataSourcesTable(t))},getDataSourcesColumn:function(t){e(Ct.getDataSourcesColumn(t))}}},Bn=Object(y.b)(Vn,qn)(zn=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={visible:!1,loading:!1,queryParams:{currentPage:1,pageSize:20},tagList:{},editData:{},catalogue2Data:[]},n.getTagListData=function(){var e;return(e=n).__getTagListData__REACT_HOT_LOADER__.apply(e,arguments)},n.initRuleTagTable=function(){var e;return(e=n).__initRuleTagTable__REACT_HOT_LOADER__.apply(e,arguments)},n.initRegisterTagTable=function(){var e;return(e=n).__initRegisterTagTable__REACT_HOT_LOADER__.apply(e,arguments)},n.checkPublish=function(){var e;return(e=n).__checkPublish__REACT_HOT_LOADER__.apply(e,arguments)},n.addTag=function(){var e;return(e=n).__addTag__REACT_HOT_LOADER__.apply(e,arguments)},n.editBaseInfo=function(){var e;return(e=n).__editBaseInfo__REACT_HOT_LOADER__.apply(e,arguments)},n.removeTag=function(){var e;return(e=n).__removeTag__REACT_HOT_LOADER__.apply(e,arguments)},n.cancel=function(){var e;return(e=n).__cancel__REACT_HOT_LOADER__.apply(e,arguments)},n.openModal=function(){var e;return(e=n).__openModal__REACT_HOT_LOADER__.apply(e,arguments)},n.closeModal=function(){var e;return(e=n).__closeModal__REACT_HOT_LOADER__.apply(e,arguments)},n.saveTag=function(){var e;return(e=n).__saveTag__REACT_HOT_LOADER__.apply(e,arguments)},n.onFirstCatalogueChange=function(){var e;return(e=n).__onFirstCatalogueChange__REACT_HOT_LOADER__.apply(e,arguments)},n.getSecondCatalogue=function(){var e;return(e=n).__getSecondCatalogue__REACT_HOT_LOADER__.apply(e,arguments)},n.onSecondCatalogueChange=function(){var e;return(e=n).__onSecondCatalogueChange__REACT_HOT_LOADER__.apply(e,arguments)},n.onTagNameSearch=function(){var e;return(e=n).__onTagNameSearch__REACT_HOT_LOADER__.apply(e,arguments)},n.getCatalogueArray=function(){var e;return(e=n).__getCatalogueArray__REACT_HOT_LOADER__.apply(e,arguments)},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){this.getTagListData(this.state.queryParams)}},{key:"__getTagListData__REACT_HOT_LOADER__",value:function(e){var t=this;this.setState({loading:!0}),("rule"===this.props.tagType?wn.queryRuleTag:wn.queryRegisteredTag)(e).then(function(e){1===e.code&&t.setState({loading:!1,tagList:e.data})})}},{key:"__initRuleTagTable__REACT_HOT_LOADER__",value:function(){var e=this;return[{title:"标签名称",dataIndex:"name",key:"name",width:"10%"},{title:"标签描述",dataIndex:"tagDesc",key:"tagDesc",width:"12%"},{title:"标签类目",dataIndex:"catalogueName",key:"catalogueName",width:"10%"},{title:"值域",dataIndex:"tagRange",key:"tagRange",width:100},{title:"目标数据库",dataIndex:"dataSourceName",key:"dataSourceName",width:"8%"},{title:"来源表",dataIndex:"originTable",key:"originTable",width:"8%"},{title:"识别列ID",dataIndex:"identityColumn",key:"identityColumn",width:100},{title:"识别列类型",dataIndex:"identityName",key:"identityName",width:"8%"},{title:"更新日期",dataIndex:"gmtModified",key:"gmtModified",width:"10%",render:function(e){return e?H.a.formatDateTime(e):"--"}},{title:"状态",dataIndex:"status",key:"status",width:100,render:function(e){return Ne[e]}},{title:"发布状态",dataIndex:"publishStatus",key:"publishStatus",width:90,render:function(e){return Pe[e]}},{title:"操作",width:90,render:function(t,a){var n=s.a.createElement(kn.a,null,"更新中"!=Ne[a.status]&&s.a.createElement(kn.a.Item,{key:"edit"},s.a.createElement("a",{onClick:e.editBaseInfo.bind(e,a)},"编辑")),"更新中"!=Ne[a.status]&&"未发布"===Pe[a.publishStatus]&&s.a.createElement(kn.a.Item,{key:"edit2"},s.a.createElement(A.c,{to:"/dl/tagConfig/ruleTagEdit/"+a.id},"配置计算逻辑")),"更新完成"==Ne[a.status]&&"未发布"===Pe[a.publishStatus]&&s.a.createElement(kn.a.Item,{key:"pub"},s.a.createElement("a",{onClick:e.checkPublish.bind(e,a.id)},"发布")),s.a.createElement(kn.a.Item,{key:"log"},s.a.createElement(A.c,{to:"/dl/tagConfig/tagLog/"+a.id},"查看更新历史")),s.a.createElement(kn.a.Item,{key:"del"},s.a.createElement(Dn.a,{title:"确定删除此标签？",okText:"确定",cancelText:"取消",onConfirm:e.removeTag.bind(e,a.id)},s.a.createElement("a",null,"删除"))));return s.a.createElement("span",{id:"tag_"+a.id},s.a.createElement(yn.a,{getPopupContainer:function(){return document.getElementById("tag_"+a.id)},overlay:n,trigger:["click"]},s.a.createElement(Ie.a,null,"操作",s.a.createElement(z.a,{type:"down"}))))}}]}},{key:"__initRegisterTagTable__REACT_HOT_LOADER__",value:function(){var e=this;return[{title:"标签名称",dataIndex:"name",key:"name",width:"10%"},{title:"标签描述",dataIndex:"tagDesc",key:"tagDesc",width:"10%"},{title:"标签类目",dataIndex:"catalogueName",key:"catalogueName",width:"8%"},{title:"值域",dataIndex:"tagRange",key:"tagRange",width:120},{title:"目标数据库",dataIndex:"dataSourceName",key:"dataSourceName",width:"8%"},{title:"识别列ID",dataIndex:"identityColumn",key:"identityColumn",width:"8%"},{title:"识别列类型",dataIndex:"identityName",key:"identityName",width:"8%"},{title:"来源表",dataIndex:"originTable",key:"originTable",width:"8%"},{title:"来源列",dataIndex:"originColumn",key:"originColumn",width:"8%"},{title:"状态",dataIndex:"status",key:"status",width:100,render:function(e){return Ne[e]}},{title:"发布状态",dataIndex:"publishStatus",key:"publishStatus",width:90,render:function(e){return Pe[e]}},{title:"操作",width:110,render:function(t,a){var n=s.a.createElement(kn.a,null,s.a.createElement(kn.a.Item,{key:"1"},s.a.createElement(A.c,{to:"/dl/manage/newApi/"+a.id},"发布")),s.a.createElement(kn.a.Item,{key:"2"},s.a.createElement(Dn.a,{title:"确定删除此标签？",okText:"确定",cancelText:"取消",onConfirm:e.removeTag.bind(e,a.id)},s.a.createElement("a",null,"删除")))),r="tag_"+a.id;return s.a.createElement("div",null,s.a.createElement("a",{onClick:function(){e.editBaseInfo(a)}},"编辑"),s.a.createElement("span",{className:"ant-divider",id:r}),"已发布"==Pe[a.publishStatus]?s.a.createElement(Dn.a,{title:"确定删除此标签？",okText:"确定",cancelText:"取消",onConfirm:e.removeTag.bind(e,a.id)},s.a.createElement("a",null,"删除")):s.a.createElement(yn.a,{getPopupContainer:function(){return document.getElementById(r)},overlay:n,trigger:["click"]},s.a.createElement("a",{className:"ant-dropdown-link"},"更多 ",s.a.createElement(z.a,{type:"down"}))))}}]}},{key:"__checkPublish__REACT_HOT_LOADER__",value:function(e){wn.checkPublish({tagId:e}).then(function(t){1===t.code&&t.data&&A.g.push("/dl/manage/newApi/"+e)})}},{key:"__addTag__REACT_HOT_LOADER__",value:function(e){this.openModal(),this.setState({editData:{type:"rule"===this.props.tagType?2:1}})}},{key:"__editBaseInfo__REACT_HOT_LOADER__",value:function(e){var t=U()({},e,{catalogueId:this.getCatalogueArray(e.catalogueId)});this.openModal(),this.setState({editData:t}),"register"===this.props.tagType&&"未发布"===Pe[t.publishStatus]&&(this.props.getDataSourcesTable({sourceId:t.dataSourceId}),this.props.getDataSourcesColumn({sourceId:t.dataSourceId,tableName:t.originTable}))}},{key:"__removeTag__REACT_HOT_LOADER__",value:function(e){var t=this,a=this.state.queryParams;e&&wn.deleteTag({tagId:e}).then(function(e){1===e.code&&(ue.a.success("删除成功！"),t.getTagListData(a))})}},{key:"__cancel__REACT_HOT_LOADER__",value:function(e){this.closeModal(),e.resetFields()}},{key:"__openModal__REACT_HOT_LOADER__",value:function(){this.setState({visible:!0})}},{key:"__closeModal__REACT_HOT_LOADER__",value:function(){this.setState({visible:!1})}},{key:"__saveTag__REACT_HOT_LOADER__",value:function(e){var t=this,a=this.state,n=a.queryParams,r=a.editData;e.validateFields(function(a,i){var s=void 0,o=void 0,l=void 0;a||(i.catalogueId=[].concat(vn()(i.catalogueId)).pop(),r.id?(s=wn.updateTagBaseInfo,o=U()({},i,{id:r.id}),l="更新成功"):(s="rule"===t.props.tagType?wn.addRuleTag:wn.addRegisterTag,o=i,l="新增成功"),s(o).then(function(a){1===a.code&&(ue.a.success(l),t.closeModal(),e.resetFields(),t.getTagListData(n),t.setState({editData:{}}))}))})}},{key:"__onFirstCatalogueChange__REACT_HOT_LOADER__",value:function(e){var t=U()({},this.state.queryParams,{currentPage:1,pid:e||void 0});e?this.getSecondCatalogue(e):this.setState({catalogue2Data:[]}),this.getTagListData(t),this.setState({queryParams:t})}},{key:"__getSecondCatalogue__REACT_HOT_LOADER__",value:function(e){var t=this.props.apiMarket.apiCatalogue.filter(function(t){return t.id==e})[0].childCatalogue;t=t.some(function(e){return e.api})?[]:t,this.setState({catalogue2Data:t})}},{key:"__onSecondCatalogueChange__REACT_HOT_LOADER__",value:function(e){var t=U()({},this.state.queryParams,{currentPage:1,cid:e||void 0});this.getTagListData(t),this.setState({queryParams:t})}},{key:"__onTagNameSearch__REACT_HOT_LOADER__",value:function(e){var t=U()({},this.state.queryParams,{currentPage:1,name:e||void 0});this.getTagListData(t),this.setState({queryParams:t})}},{key:"__getCatalogueArray__REACT_HOT_LOADER__",value:function(e){var t=[];return function a(n){for(var r=0;r<n.length;r++){if(n[r].api)return;if(n[r].id===e)return t.push(n[r].id),n[r].id;if(a(n[r].childCatalogue))return t.push(n[r].id),n[r].id}}(this.props.apiMarket.apiCatalogue),t.reverse()}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=U()({},this.state.queryParams,{currentPage:e.current});this.getTagListData(n),this.setState({queryParams:n})}},{key:"render",value:function(){var e=this.props.apiMarket.apiCatalogue,t=this.state,a=t.queryParams,n=t.visible,r=t.loading,i=t.tagList,o=t.editData,l=t.catalogue2Data,c="rule"===this.props.tagType?this.initRuleTagTable:this.initRegisterTagTable,p=s.a.createElement("div",{className:"flex font-12"},s.a.createElement(Gn,{placeholder:"标签名称",onSearch:this.onTagNameSearch,style:{width:200,margin:"10px 0"}}),s.a.createElement("div",{className:"m-l-8"},"标签分类：",s.a.createElement(X.a,{allowClear:!0,showSearch:!0,style:{width:150},placeholder:"选择标签分类",optionFilterProp:"title",onChange:this.onFirstCatalogueChange},e.map(function(e){return s.a.createElement(Fn,{key:e.id,value:e.id.toString(),title:e.catalogueName},e.catalogueName)}))),s.a.createElement("div",{className:"m-l-8"},"二级分类：",s.a.createElement(X.a,{allowClear:!0,showSearch:!0,style:{width:150},optionFilterProp:"title",placeholder:"选择二级分类",onChange:this.onSecondCatalogueChange},l.map(function(e){return s.a.createElement(Fn,{key:e.id,value:e.id.toString(),title:e.catalogueName},e.catalogueName)})))),u=s.a.createElement("div",null,s.a.createElement(A.c,{to:"dl/tagConfig/identify"},s.a.createElement(Ie.a,{type:"primary",style:{margin:10}},"识别列配置")),s.a.createElement(Ie.a,{type:"primary",onClick:this.addTag},"新建标签")),d={current:a.currentPage,pageSize:a.pageSize,total:i.totalCount};return s.a.createElement(q.a,{title:p,extra:u,noHovering:!0,bordered:!1},s.a.createElement(Y.a,{rowKey:"id",className:"m-table",columns:c(),loading:r,pagination:d,dataSource:i.data,onChange:this.onTableChange}),s.a.createElement(jn,{visible:n,editData:o,saveTag:this.saveTag,cancel:this.cancel}))}}]),t}(i.Component))||zn,Yn=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Gn,"Search","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/dashboard/tagPane.js"),__REACT_HOT_LOADER__.register(Fn,"Option","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/dashboard/tagPane.js"),__REACT_HOT_LOADER__.register(Vn,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/dashboard/tagPane.js"),__REACT_HOT_LOADER__.register(qn,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/dashboard/tagPane.js"),__REACT_HOT_LOADER__.register(Bn,"TagPane","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/dashboard/tagPane.js")),a(851),Nt.a.TabPane),Kn=Object(y.b)()(Mn=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={},n.showInfo=function(){var e;return(e=n).__showInfo__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){this.props.dispatch(Se.getCatalogue(0))}},{key:"__showInfo__REACT_HOT_LOADER__",value:function(){Q.a.info({title:"注册标签与新建标签的区别",maskClosable:!0,width:"40%",content:s.a.createElement("div",null,s.a.createElement("p",null,"注册标签：您已有计算好的标签结果，不需要配置标签计算逻辑，注册标签后即可提供标签服务"),s.a.createElement("p",null,"使用流程：点击“注册标签”->配置标签服务的信息->发布"),s.a.createElement("p",{style:{marginTop:10}},"新建标签：您只有原始数据，需要通过加工原始数据来形成标签"),s.a.createElement("p",null,"使用流程：点击“新建标签”->配置标签计算逻辑->配置标签服务信息->发布"))})}},{key:"render",value:function(){return s.a.createElement("div",{className:"box-1 m-card shadow m-tabs"},s.a.createElement(Nt.a,{animated:!1,defaultActiveKey:"1",style:{height:"auto"}},s.a.createElement(Yn,{tab:"规则标签",key:"1"},s.a.createElement(Bn,{tagType:"rule"})),s.a.createElement(Yn,{tab:"注册标签",key:"2"},s.a.createElement(Bn,{tagType:"register"}))),s.a.createElement("div",{className:"diff-tooltip"},s.a.createElement("a",{onClick:this.showInfo},"注册与新建有什么区别？")))}}]),t}(i.Component))||Mn,Qn=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Yn,"TabPane","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/dashboard/index.js"),__REACT_HOT_LOADER__.register(Kn,"TagConfigIndex","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/dashboard/index.js")),a(75),a(47)),Jn=a.n(Qn),Xn=(a(99),a(69)),Zn=a.n(Xn),$n=a(19),er=a.n($n),tr=a(68),ar=X.a.Option,nr=te.a.Item,rr=$.a.TextArea,ir={beginDate:er()().format("YYYY-MM-DD"),endDate:er()().add(100,"years").format("YYYY-MM-DD"),periodType:"2",day:void 0,weekDay:void 0,hour:0,min:0,beginHour:0,beginMin:0,gapHour:void 0,endHour:0,endMin:0},sr={labelCol:{xs:{span:24},sm:{span:9}},wrapperCol:{xs:{span:24},sm:{span:10}}},or=function(e){return{common:e.common,dataSource:e.dataSource}},lr=function(e){return{getDataSourcesList:function(t){e(Ct.getDataSourcesList(t))},getDataSourcesTable:function(t){e(Ct.getDataSourcesTable(t))},resetDataSourcesTable:function(){e(Ct.resetDataSourcesTable())}}},cr=Object(y.b)(or,lr)(Wn=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={tagId:n.props.routeParams.id,currentData:{},curCondition:{},conditionList:[],computeList:[],scheduleConfObj:ir,notifyVO:{sendTypes:[],receivers:[]}},n.getTagDetailInfo=function(){var e;return(e=n).__getTagDetailInfo__REACT_HOT_LOADER__.apply(e,arguments)},n.getComputeSourceData=function(){var e;return(e=n).__getComputeSourceData__REACT_HOT_LOADER__.apply(e,arguments)},n.initColumns=function(){var e;return(e=n).__initColumns__REACT_HOT_LOADER__.apply(e,arguments)},n.renderEditTD=function(){var e;return(e=n).__renderEditTD__REACT_HOT_LOADER__.apply(e,arguments)},n.renderTD=function(){var e;return(e=n).__renderTD__REACT_HOT_LOADER__.apply(e,arguments)},n.onDataSourceChange=function(){var e;return(e=n).__onDataSourceChange__REACT_HOT_LOADER__.apply(e,arguments)},n.addNewCondition=function(){var e;return(e=n).__addNewCondition__REACT_HOT_LOADER__.apply(e,arguments)},n.onPeriodTypeChange=function(){var e;return(e=n).__onPeriodTypeChange__REACT_HOT_LOADER__.apply(e,arguments)},n.onSendTypesChange=function(){var e;return(e=n).__onSendTypesChange__REACT_HOT_LOADER__.apply(e,arguments)},n.onReceiversChange=function(){var e;return(e=n).__onReceiversChange__REACT_HOT_LOADER__.apply(e,arguments)},n.changeScheduleConfTime=function(){var e;return(e=n).__changeScheduleConfTime__REACT_HOT_LOADER__.apply(e,arguments)},n.onBeginDateChange=function(){var e;return(e=n).__onBeginDateChange__REACT_HOT_LOADER__.apply(e,arguments)},n.onEndDateChange=function(){var e;return(e=n).__onEndDateChange__REACT_HOT_LOADER__.apply(e,arguments)},n.checkTime=function(){var e;return(e=n).__checkTime__REACT_HOT_LOADER__.apply(e,arguments)},n.checkDate=function(){var e;return(e=n).__checkDate__REACT_HOT_LOADER__.apply(e,arguments)},n.saveRuleTag=function(){var e;return(e=n).__saveRuleTag__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){this.getTagDetailInfo(),this.getComputeSourceData(),this.props.getDataSourcesList()}},{key:"__getTagDetailInfo__REACT_HOT_LOADER__",value:function(){var e=this;wn.getRuleTagDetail({tagId:this.state.tagId}).then(function(t){1===t.code&&(e.setState({currentData:t.data,conditionList:t.data.conditions}),t.data.scheduleConf&&e.setState({scheduleConfObj:JSON.parse(t.data.scheduleConf)}),t.data.notifyVO&&e.setState({notifyVO:t.data.notifyVO}))})}},{key:"__getComputeSourceData__REACT_HOT_LOADER__",value:function(){var e=this;wn.getComputeSource().then(function(t){1===t.code&&e.setState({computeList:t.data})})}},{key:"__initColumns__REACT_HOT_LOADER__",value:function(){var e=this;return[{title:"数据源",dataIndex:"dataSourceId",key:"dataSourceId",width:"25%",render:function(t,a){return e.renderColumns(t,a,"dataSourceId")}},{title:"表名",dataIndex:"tableName",key:"tableName",width:"25%",render:function(t,a){return e.renderColumns(t,a,"tableName")}},{title:"过滤条件",dataIndex:"sqlCondition",key:"sqlCondition",width:"40%",render:function(t,a){return e.renderColumns(t,a,"sqlCondition")}},{title:"操作",width:"10%",render:function(t,a){return s.a.createElement("div",null,a.editable?s.a.createElement("span",null,s.a.createElement("a",{className:"m-r-8",onClick:e.saveCondition.bind(e,a.id)},"保存"),s.a.createElement("a",{onClick:e.cancelEdit.bind(e,a.id)},"取消")):s.a.createElement("span",null,s.a.createElement("a",{className:"m-r-8",onClick:e.editCondition.bind(e,a.id)},"编辑"),s.a.createElement(Dn.a,{title:"确定要删除吗？",onConfirm:e.deleteCondition.bind(e,a.id)},s.a.createElement("a",null,"删除"))))}}]}},{key:"renderColumns",value:function(e,t,a){return{children:s.a.createElement(te.a,{layout:"inline"},t.editable?this.renderEditTD(e,t,a):this.renderTD(e,t,a)),props:{}}}},{key:"__renderEditTD__REACT_HOT_LOADER__",value:function(e,t,a){var n=this.props,r=n.form,i=n.dataSource,o=r.getFieldDecorator,l=i.sourceList,c=i.sourceTable;switch(a){case"dataSourceId":return s.a.createElement(nr,U()({},Be,{className:"edit-td"}),o("dataSourceId",{rules:[{required:!0,message:"数据源不可为空"}],initialValue:t.dataSourceId.toString()})(s.a.createElement(X.a,{showSearch:!0,optionFilterProp:"title",onChange:this.onDataSourceChange},l.map(function(e){var t=e.dataName+"（"+e.sourceTypeValue+"）";return s.a.createElement(ar,{key:e.id,value:e.id.toString(),title:t},t)}))));case"tableName":return s.a.createElement(nr,U()({},Be,{className:"edit-td"}),o("tableName",{rules:[{required:!0,message:"数据表不可为空"}],initialValue:t.tableName})(s.a.createElement(X.a,{showSearch:!0},c.map(function(e){return s.a.createElement(ar,{key:e,value:e},e)}))));case"sqlCondition":return s.a.createElement(nr,U()({},Be,{className:"edit-td"}),o("sqlCondition",{rules:[],initialValue:t.sqlCondition})(s.a.createElement($.a,{placeholder:"sql过滤条件"})))}}},{key:"__renderTD__REACT_HOT_LOADER__",value:function(e,t,a){switch(a){case"dataSourceId":return t.dataSourceName+"（"+t.sourceTypeValue+"）";default:return e}}},{key:"__onDataSourceChange__REACT_HOT_LOADER__",value:function(e){var t=this.props.form;this.props.resetDataSourcesTable(),this.props.getDataSourcesTable({sourceId:e}),t.setFieldsValue({tableName:void 0})}},{key:"editCondition",value:function(e){var t=this.state,a=t.curCondition,n=t.conditionList,r=[].concat(vn()(n)),i=r.filter(function(t){return e===t.id})[0];Object(da.isEmpty)(a)||("edit"===a.editStatus?(delete a.editable,delete a.editStatus):r.shift()),i&&(i.editable=!0,i.editStatus="edit",this.props.resetDataSourcesTable(),this.props.getDataSourcesTable({sourceId:i.dataSourceId}),this.setState({curCondition:i,conditionList:r}))}},{key:"cancelEdit",value:function(e){var t=this.state.conditionList,a=[].concat(vn()(t)),n=a.filter(function(t){return e===t.id})[0];"edit"===n.editStatus?(delete n.editable,delete n.editStatus):a.splice(a.indexOf(n),1),this.setState({curCondition:{},conditionList:a})}},{key:"deleteCondition",value:function(e){var t=[].concat(vn()(this.state.conditionList)),a=t.filter(function(t){return e===t.id})[0],n=t.indexOf(a);a&&(t.splice(n,1),this.setState({conditionList:t}))}},{key:"saveCondition",value:function(e){var t=this,a=this.props,n=a.form,r=a.dataSource.sourceList,i=this.state,s=(i.tagId,i.curCondition),o=i.conditionList,l=[].concat(vn()(o)),c=l.filter(function(t){return e===t.id})[0],p=l.indexOf(c);n.validateFields(["dataSourceId","tableName","sqlCondition"],function(e,a){if(!e){delete s.editable;var n=[].concat(vn()(r)).filter(function(e){return e.id==a.dataSourceId})[0];l[p]=U()({},s,a,{dataSourceName:n.dataName,sourceTypeValue:n.sourceTypeValue}),t.setState({curCondition:{},conditionList:l})}})}},{key:"__addNewCondition__REACT_HOT_LOADER__",value:function(){var e=this.props.form,t=this.state,a=t.tagId,n=t.conditionList,r=t.curCondition,i=[].concat(vn()(n));Object(da.isEmpty)(r)||("edit"===r.editStatus?(delete r.editable,delete r.editStatus):(i.shift(),e.resetFields()));var s={id:i[0]?i[0].id+1:1,editStatus:"new",editable:!0,tagId:a,dataSourceId:"",tableName:"",sqlCondition:""};i.unshift(s),this.setState({curCondition:s,conditionList:i})}},{key:"__onPeriodTypeChange__REACT_HOT_LOADER__",value:function(e){var t=U()({},ir,{periodType:e});this.setState({scheduleConfObj:t})}},{key:"__onSendTypesChange__REACT_HOT_LOADER__",value:function(e){var t=this.props.form,a=this.state.notifyVO,n=t.getFieldValue("receivers");0===e.length&&0===n.length&&t.setFieldsValue({receivers:[]}),this.setState({notifyVO:U()({},a,{sendTypes:e})})}},{key:"__onReceiversChange__REACT_HOT_LOADER__",value:function(e){var t=this.props.form,a=this.state.notifyVO,n=t.getFieldValue("sendTypes");0===e.length&&0===n.length&&t.setFieldsValue({sendTypes:[]}),this.setState({notifyVO:U()({},a,{receivers:e})})}},{key:"__changeScheduleConfTime__REACT_HOT_LOADER__",value:function(e,t){var a=this.state.scheduleConfObj,n={};n[e]=t,this.setState({scheduleConfObj:U()({},a,n)})}},{key:"__onBeginDateChange__REACT_HOT_LOADER__",value:function(e,t){this.changeScheduleConfTime("beginDate",t)}},{key:"__onEndDateChange__REACT_HOT_LOADER__",value:function(e,t){this.changeScheduleConfTime("endDate",t)}},{key:"renderDynamic",value:function(){var e=this,t=this.props,a=t.form,n=t.common,r=a.getFieldDecorator,i=(n.periodType,n.notifyType,this.state.scheduleConfObj),o=function(t){for(var a=[],n=0;n<=23;n++)a.push(s.a.createElement(ar,{key:n,value:""+n},n<10?"0"+n:n));return s.a.createElement(X.a,{style:{width:150},onChange:e.changeScheduleConfTime.bind(e,t)},a)},l=function(t){for(var a=[],n=0;n<=59;n++)a.push(s.a.createElement(ar,{key:n,value:""+n},n<10?"0"+n:n));return s.a.createElement(X.a,{style:{width:150},onChange:e.changeScheduleConfTime.bind(e,t)},a)};switch(i.periodType){case"1":return s.a.createElement("div",null,s.a.createElement(nr,U()({},sr,{label:"开始时间"}),r("beginHour",{rules:[{required:!0,message:"开始时间不能为空"},{validator:this.checkTime.bind(this)}],initialValue:""+i.beginHour})(o("beginHour")),s.a.createElement("span",{className:"m-8"},"时"),r("beginMin",{rules:[{required:!0,message:"开始时间不能为空"},{validator:this.checkTime.bind(this)}],initialValue:""+i.beginMin})(l("beginMin")),s.a.createElement("span",{className:"m-8"},"分")),s.a.createElement(nr,U()({},sr,{label:"间隔时间"}),r("gapHour",{rules:[{required:!0,message:"间隔时间不能为空"}],initialValue:i.gapHour?i.gapHour:void 0})(function(){for(var t=[],a=1;a<=23;a++)t.push(s.a.createElement(ar,{key:a,value:""+a},a,"小时"));return s.a.createElement(X.a,{style:{width:150},onChange:e.changeScheduleConfTime.bind(e,"gapHour")},t)}())),s.a.createElement(nr,U()({},sr,{label:"结束时间"}),r("endHour",{rules:[{required:!0,message:"结束时间不能为空"},{validator:this.checkTime.bind(this)}],initialValue:""+i.endHour})(o("endHour")),s.a.createElement("span",{className:"m-8"},"时"),r("endMin",{rules:[{required:!0,message:"结束时间不能为空"},{validator:this.checkTime.bind(this)}],initialValue:""+i.endMin})(l("endMin")),s.a.createElement("span",{className:"m-8"},"分")));case"2":return s.a.createElement(nr,U()({},sr,{label:"起调周期"}),r("hour",{rules:[{required:!0}],initialValue:""+i.hour})(o("hour")),s.a.createElement("span",{className:"m-8"},"时"),r("min",{rules:[{required:!0}],initialValue:""+i.min})(l("min")),s.a.createElement("span",{className:"m-8"},"分"));case"3":return s.a.createElement("div",null,s.a.createElement(nr,U()({},sr,{label:"选择时间"}),r("weekDay",{rules:[{required:!0,message:"周内天数不能为空"}],initialValue:i.weekDay?i.weekDay:[]})(s.a.createElement(X.a,{mode:"multiple",style:{width:328},onChange:e.changeScheduleConfTime.bind(e,"weekDay")},s.a.createElement(ar,{key:1,value:"1"},"星期一"),s.a.createElement(ar,{key:2,value:"2"},"星期二"),s.a.createElement(ar,{key:3,value:"3"},"星期三"),s.a.createElement(ar,{key:4,value:"4"},"星期四"),s.a.createElement(ar,{key:5,value:"5"},"星期五"),s.a.createElement(ar,{key:6,value:"6"},"星期六"),s.a.createElement(ar,{key:7,value:"7"},"星期天")))),s.a.createElement(nr,U()({},sr,{label:"起调周期"}),r("hour1",{rules:[{required:!0}],initialValue:""+i.hour})(o("hour")),s.a.createElement("span",{className:"m-8"},"时"),r("min1",{rules:[{required:!0}],initialValue:""+i.min})(l("min")),s.a.createElement("span",{className:"m-8"},"分")));case"4":return s.a.createElement("div",null,s.a.createElement(nr,U()({},sr,{label:"选择时间"}),r("day",{rules:[{required:!0,message:"月内天数不能为空"}],initialValue:i.day?i.day:[]})(function(){for(var t=[],a=1;a<=31;a++)t.push(s.a.createElement(ar,{key:a,value:""+a},"每月"+a+"号"));return s.a.createElement(X.a,{mode:"multiple",style:{width:328},onChange:e.changeScheduleConfTime.bind(e,"day")},t)}())),s.a.createElement(nr,U()({},sr,{label:"起调周期"}),r("hour2",{rules:[{required:!0}],initialValue:""+i.hour})(o("hour")),s.a.createElement("span",{className:"m-8"},"时"),r("min2",{rules:[{required:!0}],initialValue:""+i.min})(l("min")),s.a.createElement("span",{className:"m-8"},"分")))}}},{key:"__checkTime__REACT_HOT_LOADER__",value:function(e,t,a){var n=this.props.form,r=n.getFieldValue("beginHour"),i=n.getFieldValue("beginMin"),s=n.getFieldValue("endHour"),o=n.getFieldValue("endMin");60*parseInt(r)+parseInt(i)>=60*parseInt(s)+parseInt(o)?a("开始时间不能晚于结束时间"):n.setFieldsValue({beginHour:r,beginMin:i,endHour:s,endMin:o}),a()}},{key:"__checkDate__REACT_HOT_LOADER__",value:function(e,t,a){var n=this.props.form,r=n.getFieldValue("beginDate"),i=n.getFieldValue("endDate");r&&i?r.valueOf()>i.valueOf()?a("生效日期的开始时间不能晚于结束时间"):n.setFieldsValue({beginDate:r,endDate:i}):a(),a()}},{key:"__saveRuleTag__REACT_HOT_LOADER__",value:function(){var e=this.props.form,t=this.state,a=t.tagId,n=t.curCondition,r=t.conditionList,i=t.scheduleConfObj,s=t.notifyVO;Object(da.isEmpty)(n)?r.length<1?ue.a.error("请添加基本信息"):e.validateFields(function(e,t){e&&e.endDate&&ue.a.error(e.endDate.errors[0].message),e||(r.forEach(function(e,t){"new"===e.editStatus&&delete e.id}),wn.updateTagSqlInfo({id:a,conditions:r,notifyVO:s,scheduleConf:re()(i),sqlText:t.sqlText,computeSourceId:t.computeSourceId}).then(function(e){1===e.code&&(ue.a.success("保存成功"),A.g.push("/dl/tagConfig"))}))}):ue.a.error("基本信息未保存")}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.common,n=t.getFieldDecorator,r=a.periodType,i=a.notifyType,o=a.userList,l=this.state,c=l.currentData,p=l.conditionList,u=l.computeList,d=l.scheduleConfObj,_=l.notifyVO,m=_.sendTypes,h=_.receivers,E=s.a.createElement("div",null,s.a.createElement(tr.a,null)," 配置计算逻辑");return s.a.createElement("div",{className:"box-1 m-card shadow"},s.a.createElement(q.a,{title:E,extra:!1,noHovering:!0,bordered:!1},s.a.createElement("div",{className:"tag-edit-step"},s.a.createElement("h2",null,s.a.createElement("div",{className:"rank-number m-r-8"},"1"),"基本信息",s.a.createElement(Ie.a,{type:"primary",className:"right",onClick:this.addNewCondition},"添加")),s.a.createElement(Y.a,{rowKey:"id",className:"m-table",columns:this.initColumns(),pagination:!1,dataSource:p})),s.a.createElement("div",{className:"tag-edit-step"},s.a.createElement("h2",null,s.a.createElement("div",{className:"rank-number m-r-8"},"2"),"同步目标计算引擎"),s.a.createElement(nr,null,n("computeSourceId",{rules:[{required:!0,message:"不可为空"}],initialValue:c.computeSourceId?c.computeSourceId.toString():void 0})(s.a.createElement(X.a,{style:{width:300},placeholder:"选择要同步的计算引擎"},u.map(function(e){var t=e.dataName+"（"+e.sourceTypeValue+"）";return s.a.createElement(ar,{key:e.id,value:e.id.toString(),title:t},t)}))))),s.a.createElement("div",{className:"tag-edit-step"},s.a.createElement("h2",null,s.a.createElement("div",{className:"rank-number m-r-8"},"3"),"根据以上数据源输入指标计算SQL"),s.a.createElement(nr,null,n("sqlText",{rules:[{required:!0,message:"SQL不可为空"}],initialValue:c.sqlText})(s.a.createElement(rr,{placeholder:"在此输入指标计算sql",autosize:{minRows:6}})))),s.a.createElement("div",{className:"tag-edit-step"},s.a.createElement("h2",null,s.a.createElement("div",{className:"rank-number m-r-8"},"4"),"调度时间设置"),s.a.createElement(nr,U()({},sr,{label:"调度周期"}),n("periodType",{rules:[{required:!0,message:"执行周期不能为空"}],initialValue:""+d.periodType})(s.a.createElement(X.a,{style:{width:328},onChange:this.onPeriodTypeChange},r.map(function(e){return s.a.createElement(ar,{key:e.value,value:e.value.toString()},e.name)})))),5!=d.periodType&&s.a.createElement(nr,U()({},sr,{label:"生效日期"}),n("beginDate",{rules:[{required:!0,message:"生效日期不能为空"},{validator:this.checkDate.bind(this)}],initialValue:er()(d.beginDate)})(s.a.createElement(Zn.a,{style:{width:150},format:"YYYY-MM-DD",placeholder:"开始日期",onChange:this.onBeginDateChange})),s.a.createElement("span",{className:"m-8"},"到"),n("endDate",{rules:[{required:!0,message:"生效日期不能为空"},{validator:this.checkDate.bind(this)}],initialValue:er()(d.endDate)})(s.a.createElement(Zn.a,{style:{width:150},format:"YYYY-MM-DD",placeholder:"结束日期",onChange:this.onEndDateChange}))),this.renderDynamic(),s.a.createElement(nr,U()({},sr,{label:"通知方式"}),n("sendTypes",{rules:[{required:h.length,message:"选择通知方式"}],initialValue:m.map(function(e){return e.toString()})})(s.a.createElement(Jn.a.Group,{onChange:this.onSendTypesChange},i.map(function(e){return s.a.createElement(Jn.a,{key:e.value,value:e.value.toString()},e.name)})))),s.a.createElement(nr,U()({},sr,{label:"通知接收人"}),n("receivers",{rules:[{required:m.length,message:"选择通知接收人"}],initialValue:h.map(function(e){return e.toString()})})(s.a.createElement(X.a,{allowClear:!0,mode:"multiple",style:{width:328},onChange:this.onReceiversChange},o.map(function(e){return s.a.createElement(ar,{key:e.id,value:e.id.toString()},e.userName)}))))),s.a.createElement("div",{className:"tag-edit-step txt-right"},s.a.createElement(A.c,{to:"/dl/tagConfig"},s.a.createElement(Ie.a,{type:"primary",className:"m-r-8"},"取消")),s.a.createElement(Ie.a,{type:"primary",onClick:this.saveRuleTag},"保存"))))}}]),t}(i.Component))||Wn;cr=te.a.create()(cr);"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ar,"Option","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/ruleTagEdit/index.js"),__REACT_HOT_LOADER__.register(nr,"FormItem","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/ruleTagEdit/index.js"),__REACT_HOT_LOADER__.register(rr,"TextArea","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/ruleTagEdit/index.js"),__REACT_HOT_LOADER__.register(ir,"initialSchedule","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/ruleTagEdit/index.js"),__REACT_HOT_LOADER__.register(sr,"formItemLayout","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/ruleTagEdit/index.js"),__REACT_HOT_LOADER__.register(or,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/ruleTagEdit/index.js"),__REACT_HOT_LOADER__.register(lr,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/ruleTagEdit/index.js"),__REACT_HOT_LOADER__.register(cr,"RuleTagEdit","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/ruleTagEdit/index.js"));var pr=te.a.Item,ur=$.a.TextArea,dr=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={visible:!1,loading:!1,queryParams:{currentPage:1,pageSize:20},columnData:{},currentData:{}},n.getColumnData=function(){var e;return(e=n).__getColumnData__REACT_HOT_LOADER__.apply(e,arguments)},n.initColumns=function(){var e;return(e=n).__initColumns__REACT_HOT_LOADER__.apply(e,arguments)},n.addColumn=function(){var e;return(e=n).__addColumn__REACT_HOT_LOADER__.apply(e,arguments)},n.saveColumn=function(){var e;return(e=n).__saveColumn__REACT_HOT_LOADER__.apply(e,arguments)},n.editColumn=function(){var e;return(e=n).__editColumn__REACT_HOT_LOADER__.apply(e,arguments)},n.deleteColumn=function(){var e;return(e=n).__deleteColumn__REACT_HOT_LOADER__.apply(e,arguments)},n.cancel=function(){var e;return(e=n).__cancel__REACT_HOT_LOADER__.apply(e,arguments)},n.openModal=function(){var e;return(e=n).__openModal__REACT_HOT_LOADER__.apply(e,arguments)},n.closeModal=function(){var e;return(e=n).__closeModal__REACT_HOT_LOADER__.apply(e,arguments)},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){this.getColumnData(this.state.queryParams)}},{key:"__getColumnData__REACT_HOT_LOADER__",value:function(e){var t=this;this.setState({loading:!0}),wn.queryIdentifyColumn(e).then(function(e){1===e.code&&t.setState({columnData:e.data,loading:!1})})}},{key:"__initColumns__REACT_HOT_LOADER__",value:function(){var e=this;return[{title:"识别列类型",dataIndex:"name",key:"name",width:"45%"},{title:"描述",dataIndex:"identityDesc",key:"identityDesc",width:"45%"},{title:"操作",width:"10%",render:function(t,a){return s.a.createElement("div",null,s.a.createElement("a",{onClick:e.editColumn.bind(e,a)},"编辑"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement(Dn.a,{title:"确定删除此识别列？",okText:"确定",cancelText:"取消",onConfirm:e.deleteColumn.bind(e,a.id)},s.a.createElement("a",null,"删除")))}}]}},{key:"__addColumn__REACT_HOT_LOADER__",value:function(){this.openModal(),this.setState({currentData:{}})}},{key:"__saveColumn__REACT_HOT_LOADER__",value:function(){var e=this,t=this.props.form,a=this.state,n=a.queryParams,r=a.currentData;t.validateFields(function(a,i){var s=void 0,o=void 0,l=void 0;a||(r.id?(s=wn.updateIdentifyColumn,o=U()({},i,{id:r.id}),l="更新成功"):(s=wn.addIdentifyColumn,o=i,l="新增成功"),s(o).then(function(a){1===a.code&&(ue.a.success(l),e.getColumnData(n),e.closeModal(),e.setState({currentData:{}}),t.resetFields())}))})}},{key:"__editColumn__REACT_HOT_LOADER__",value:function(e){this.openModal(),this.setState({currentData:e})}},{key:"__deleteColumn__REACT_HOT_LOADER__",value:function(e){var t=this,a=this.state.queryParams;e&&wn.deleteIdentifyColumn({identifyId:e}).then(function(e){1===e.code&&(ue.a.success("删除成功！"),t.getColumnData(a))})}},{key:"__cancel__REACT_HOT_LOADER__",value:function(){this.closeModal(),this.props.form.resetFields()}},{key:"__openModal__REACT_HOT_LOADER__",value:function(){this.setState({visible:!0})}},{key:"__closeModal__REACT_HOT_LOADER__",value:function(){this.setState({visible:!1})}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=U()({},this.state.queryParams,{currentPage:e.current});this.getColumnData(n),this.setState({queryParams:n})}},{key:"render",value:function(){var e=this.props.form.getFieldDecorator,t=this.state,a=t.visible,n=t.queryParams,r=t.loading,i=t.columnData,o=t.currentData,l=s.a.createElement("div",null,s.a.createElement(tr.a,null)," 识别列类型配置"),c=s.a.createElement(Ie.a,{type:"primary",style:{margin:10},onClick:this.addColumn},"新建识别列"),p={current:n.currentPage,pageSize:n.pageSize,total:i.totalCount};return s.a.createElement("div",{className:"box-1 m-card shadow"},s.a.createElement(q.a,{title:l,extra:c,noHovering:!0,bordered:!1},s.a.createElement(Y.a,{rowKey:"id",className:"m-table",columns:this.initColumns(),loading:r,pagination:p,dataSource:i.data,onChange:this.onTableChange}),s.a.createElement(Q.a,{title:o.id?"编辑识别列":"新建识别列",width:"50%",visible:a,maskClosable:!1,okText:"确定",cancelText:"取消",onOk:this.saveColumn,onCancel:this.cancel},s.a.createElement(te.a,null,s.a.createElement(pr,U()({},Fe,{label:"类型名称"}),e("name",{rules:[{required:!0,message:"类型名称不可为空"},{max:20,message:"最大字数不能超过20"},{pattern:new RegExp(/^([\w|\u4e00-\u9fa5]*)$/),message:"名称只能以字母，数字，下划线组成"}],initialValue:o.name})(s.a.createElement($.a,{placeholder:"请输入类型名称"}))),s.a.createElement(pr,U()({},Fe,{label:"描述"}),e("identityDesc",{rules:[{max:200,message:"描述字符不能超过200"}],initialValue:o.identityDesc})(s.a.createElement(ur,{placeholder:"类型描述",autosize:{minRows:3,maxRows:6}})))))))}}]),t}(i.Component);dr=te.a.create()(dr);"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(pr,"FormItem","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/identifyColumn/index.js"),__REACT_HOT_LOADER__.register(ur,"TextArea","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/identifyColumn/index.js"),__REACT_HOT_LOADER__.register(dr,"IdentifyColumn","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/identifyColumn/index.js")),a(91);var _r,mr=a(46),hr=a.n(mr),Er=X.a.Option,gr=Zn.a.RangePicker,fr=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={loading:!1,queryParams:{tagId:n.props.routeParams.id,currentPage:1,pageSize:20},logList:{}},n.getTagLogData=function(){var e;return(e=n).__getTagLogData__REACT_HOT_LOADER__.apply(e,arguments)},n.initColumns=function(){var e;return(e=n).__initColumns__REACT_HOT_LOADER__.apply(e,arguments)},n.showInfo=function(){var e;return(e=n).__showInfo__REACT_HOT_LOADER__.apply(e,arguments)},n.onUpdateTimeChange=function(){var e;return(e=n).__onUpdateTimeChange__REACT_HOT_LOADER__.apply(e,arguments)},n.disabledDate=function(){var e;return(e=n).__disabledDate__REACT_HOT_LOADER__.apply(e,arguments)},n.onStatueChange=function(){var e;return(e=n).__onStatueChange__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){this.getTagLogData(this.state.queryParams)}},{key:"__getTagLogData__REACT_HOT_LOADER__",value:function(e){var t=this;this.setState({loading:!0}),wn.queryTagLogInfo(e).then(function(e){1===e.code&&t.setState({loading:!1,logList:e.data})})}},{key:"__initColumns__REACT_HOT_LOADER__",value:function(){var e=this;return[{title:"标签名称",dataIndex:"tagName",key:"tagName",width:"15%"},{title:"更新时间",dataIndex:"gmtModifiedFormat",key:"gmtModifiedFormat",width:"15%"},{title:"状态",dataIndex:"status",key:"status",width:"15%",render:function(e){return Ne[e]}},{title:"日志内容",dataIndex:"log",key:"log",width:"45%",render:function(e){return s.a.createElement(hr.a,{overlayClassName:"m-tooltip",placement:"bottom",title:e,arrowPointAtCenter:!0},s.a.createElement("div",{className:"ellipsis-td"},e))}},{title:"操作",key:"operation",render:function(t,a){return s.a.createElement("a",{onClick:e.showInfo.bind(e,a)},"查看详情")}}]}},{key:"__showInfo__REACT_HOT_LOADER__",value:function(e){Q.a.info({title:e.tagName+" 日志内容",maskClosable:!0,width:"40%",content:s.a.createElement("div",{style:{maxHeight:400,overflowY:"auto",whiteSpace:"pre-line"}},e.log)})}},{key:"__onUpdateTimeChange__REACT_HOT_LOADER__",value:function(e,t){var a=U()({},this.state.queryParams,{currentPage:1,startTime:e[0]?e[0].startOf("day").valueOf():void 0,endTime:e[1]?e[1].startOf("day").valueOf():void 0});this.getTagLogData(a),this.setState({queryParams:a})}},{key:"__disabledDate__REACT_HOT_LOADER__",value:function(e){return e&&e.valueOf()>Date.now()}},{key:"__onStatueChange__REACT_HOT_LOADER__",value:function(e){var t=U()({},this.state.queryParams,{currentPage:1,tagStatus:e||void 0});this.getTagLogData(t),this.setState({queryParams:t})}},{key:"render",value:function(){var e=this.state,t=e.queryParams,a=e.loading,n=e.logList,r=s.a.createElement("div",{className:"flex font-12"},s.a.createElement("div",{className:"flex",style:{alignItems:"center"}},"更新时间：",s.a.createElement(gr,{format:"YYYY-MM-DD",style:{width:250},placeholder:["更新开始时间","更新结束时间"],disabledDate:this.disabledDate,onChange:this.onUpdateTimeChange})),s.a.createElement("div",{className:"m-l-8"},"状态：",s.a.createElement(X.a,{allowClear:!0,style:{width:150},placeholder:"选择状态",onChange:this.onStatueChange},s.a.createElement(Er,{key:"3"},"更新完成"),s.a.createElement(Er,{key:"4"},"更新失败")))),i={current:t.currentPage,pageSize:t.pageSize,total:n.totalCount};return s.a.createElement("div",null,s.a.createElement("h1",{className:"box-title"},s.a.createElement(tr.a,null)," 标签日志更新历史"),s.a.createElement("div",{className:"box-2 m-card shadow"},s.a.createElement(q.a,{title:r,extra:!1,noHovering:!0,bordered:!1},s.a.createElement(Y.a,{rowKey:"id",className:"m-table fixed-table",columns:this.initColumns(),loading:a,pagination:i,dataSource:n.data,onChange:this.onTableChange}))))}}]),t}(i.Component),Tr=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Er,"Option","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/log/index.js"),__REACT_HOT_LOADER__.register(gr,"RangePicker","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/log/index.js"),__REACT_HOT_LOADER__.register(fr,"TagLog","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/tagConfig/log/index.js")),a(224),a(109)),vr=a.n(Tr),Ar=(a(197),a(97)),yr=a.n(Ar),Cr=a(142),Dr=te.a.Item,br=X.a.Option,kr=$.a.TextArea,Or=function(e){return{dataSource:e.dataSource,tagConfig:e.tagConfig,apiMarket:e.apiMarket}},Rr=function(e){return{getDataSourcesList:function(t){e(Ct.getDataSourcesList(t))},getDataSourcesPreview:function(t){e(Ct.getDataSourcesPreview(t))},getCatalogue:function(t){e(Se.getCatalogue(t))},getAllIdentifyColumn:function(t){e(In.getAllIdentifyColumn(t))}}},Lr=Object(y.b)(Or,Rr)(_r=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={showPreview:!1},n.initCatagoryOption=function(){var e;return(e=n).__initCatagoryOption__REACT_HOT_LOADER__.apply(e,arguments)},n.getCatalogueArray=function(){var e;return(e=n).__getCatalogueArray__REACT_HOT_LOADER__.apply(e,arguments)},n.onSourcePreview=function(){var e;return(e=n).__onSourcePreview__REACT_HOT_LOADER__.apply(e,arguments)},n.previewTableColumns=function(){var e;return(e=n).__previewTableColumns__REACT_HOT_LOADER__.apply(e,arguments)},n.getScroll=function(){var e;return(e=n).__getScroll__REACT_HOT_LOADER__.apply(e,arguments)},n.next=function(){var e;return(e=n).__next__REACT_HOT_LOADER__.apply(e,arguments)},n.cancel=function(){var e;return(e=n).__cancel__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){this.props.getCatalogue(0),this.props.getDataSourcesList(),this.props.getAllIdentifyColumn()}},{key:"__initCatagoryOption__REACT_HOT_LOADER__",value:function(e){var t=this;return e.some(function(e){return!0===e.api})?[]:e.map(function(e){return{value:e.id,label:e.catalogueName,children:t.initCatagoryOption(e.childCatalogue)}})}},{key:"__getCatalogueArray__REACT_HOT_LOADER__",value:function(e){var t=this.props.apiMarket.apiCatalogue,a=[];if(!e)return[];return function t(n){for(var r=0;r<n.length;r++){if(n[r].api)return;if(n[r].id===e)return a.push(n[r].id),n[r].id;if(t(n[r].childCatalogue))return a.push(n[r].id),n[r].id}}(t),a.reverse()}},{key:"__onSourcePreview__REACT_HOT_LOADER__",value:function(){var e=this.props,t=(e.form,e.basicInfo),a=this.state.showPreview,n=t.dataSourceId,r=t.originTable;n&&r?(a||this.props.getDataSourcesPreview({dataSourceId:n,tableName:r}),this.setState({showPreview:!a})):ue.a.error("未选择数据源或数据表")}},{key:"__previewTableColumns__REACT_HOT_LOADER__",value:function(e){return e&&e.map(function(e){return{title:e,key:e,dataIndex:e,width:80,render:function(e){return s.a.createElement(Cr.a,{className:"no-scroll-bar",value:e||void 0,readOnly:!0,style:{minWidth:80,width:"100%",resize:"none"}})}}})}},{key:"__getScroll__REACT_HOT_LOADER__",value:function(e){var t=this.props.dataSource.sourcePreview;return t.columnList?e*t.columnList.length:0}},{key:"__next__REACT_HOT_LOADER__",value:function(){var e=this,t=this.props,a=t.currentStep,n=t.navToStep;t.form.validateFields({force:!0},function(t,r){t||(r.catalogueId=[].concat(vn()(r.catalogueId)).pop(),e.props.changeBasicInfo(r),n(a+1))})}},{key:"__cancel__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.url,a=e.history;t?a?A.f.push(t):A.g.push(t):A.f.go(-1)}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.tagType,n=e.tagConfig,r=e.apiMarket,i=e.dataSource,o=e.basicInfo,l=e.editStatus,c=t.getFieldDecorator,p=r.apiCatalogue,u=n.identifyColumn,d=i.sourceList,_=(i.sourceTable,i.sourceColumn,i.sourcePreview),m=this.state.showPreview;return s.a.createElement("div",null,s.a.createElement("div",{className:"steps-content"},s.a.createElement(te.a,null,s.a.createElement(Dr,U()({},qe,{label:"所属分组"}),c("catalogueId",{rules:[{required:!0,message:"请选择分组"}],initialValue:this.getCatalogueArray(o.catalogueId)})(s.a.createElement(Rn.a,{showSearch:!0,popupClassName:"noheight",options:this.initCatagoryOption(p),placeholder:"请选择分组"}))),s.a.createElement(Dr,U()({},qe,{label:"标签名称"}),c("name",{rules:[{required:!0,message:"请输入标签名称"},{max:20,message:"最大字数不能超过20"},{pattern:new RegExp(/^([\w|\u4e00-\u9fa5]*)$/),message:"名称只能以字母，数字，下划线组成"}],initialValue:o.name})(s.a.createElement($.a,{disabled:"edit"===l}))),s.a.createElement(Dr,U()({},qe,{label:"标签描述"}),c("tagDesc",{rules:[{max:200,message:"标签描述字符不能超过200"}],initialValue:o.tagDesc})(s.a.createElement(kr,{placeholder:"标签描述",autosize:{minRows:2,maxRows:6}}))),s.a.createElement(Dr,U()({},qe,{label:"值域"}),c("tagRange",{rules:[{required:!0,message:"值域不可为空"}],initialValue:o.tagRange})(s.a.createElement(kr,{placeholder:"值域",autosize:{minRows:2,maxRows:6}}))),s.a.createElement(Dr,U()({},qe,{label:"调用限制"}),c("reqLimit",{rules:[{required:!0,message:"请输入调用次数限制"},{validator:function(e,t,a){t&&(t>1e3||t<1)?a("请输入不大于1000的正整数"):a()}}],initialValue:o.reqLimit})(s.a.createElement(yr.a,{min:1,step:1,max:1e3,precision:0,style:{width:"100%"},placeholder:"单用户每秒最高调用次数"}))),s.a.createElement(Dr,U()({},qe,{label:"返回条数限制"}),c("respLimit",{rules:[{required:!0,message:"请输入最大返回条数"}],initialValue:o.respLimit})(s.a.createElement(yr.a,{min:1,step:1,max:2e3,precision:0,style:{width:"100%"},placeholder:"单次最大返回数据条数 (最高支持2000条)"}))),s.a.createElement(Dr,U()({},qe,{label:"目标数据库"}),c("dataSourceId",{rules:[{required:!0,message:"请选择数据源"}],initialValue:o.dataSourceId?o.dataSourceId.toString():void 0})(s.a.createElement(X.a,{showSearch:!0,disabled:!0,placeholder:"请选择数据源"},d.map(function(e){var t=e.dataName+"（"+e.sourceTypeValue+"）";return s.a.createElement(br,{key:e.id,value:e.id.toString(),title:t},t)})))),"注册标签"==He[a]&&s.a.createElement(Dr,U()({},qe,{label:"来源表"}),c("originTable",{rules:[{required:!0,message:"不可为空"}],initialValue:o.originTable})(s.a.createElement($.a,{disabled:!0}))),"注册标签"==He[a]&&s.a.createElement(Dr,U()({},qe,{label:"来源列"}),c("originColumn",{rules:[{required:!0,message:"不可为空"}],initialValue:o.originColumn})(s.a.createElement($.a,{disabled:!0}))),s.a.createElement(Dr,U()({},qe,{label:"识别列ID"}),c("identityColumn",{rules:[{required:!0,message:"识别列ID不可为空"}],initialValue:o.identityColumn})(s.a.createElement($.a,{disabled:!0}))),s.a.createElement(Dr,U()({},qe,{label:"识别列类型"}),c("identityId",{rules:[{required:!0,message:"识别列类型不可为空"}],initialValue:o.identityId?o.identityId.toString():void 0})(s.a.createElement(X.a,{showSearch:!0,disabled:!0,optionFilterProp:"title",placeholder:"选择识别列类型"},u.map(function(e){return s.a.createElement(br,{key:e.id,value:e.id.toString(),title:e.name},e.name)})))),s.a.createElement("div",{className:"txt-center font-14"},s.a.createElement("a",{onClick:this.onSourcePreview.bind(this)},"数据预览",s.a.createElement(z.a,{type:m?"up":"down",style:{marginLeft:5}}))),m&&s.a.createElement(q.a,{className:"box-2",style:{marginTop:"10px"},noHovering:!0},s.a.createElement(Y.a,{rowKey:function(e,t){return t},className:"m-table m-cells",columns:this.previewTableColumns(_.columnList),dataSource:_.dataList,pagination:!1,scroll:{x:this.getScroll(80),y:400}})))),s.a.createElement("div",{className:"steps-action"},s.a.createElement(Ie.a,{className:"m-r-8",onClick:this.cancel},"取消"),s.a.createElement(Ie.a,{type:"primary",onClick:this.next},"下一步")))}}]),t}(i.Component))||_r;Lr=te.a.create()(Lr);"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Dr,"FormItem","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/stepOne.js"),__REACT_HOT_LOADER__.register(br,"Option","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/stepOne.js"),__REACT_HOT_LOADER__.register(kr,"TextArea","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/stepOne.js"),__REACT_HOT_LOADER__.register(Or,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/stepOne.js"),__REACT_HOT_LOADER__.register(Rr,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/stepOne.js"),__REACT_HOT_LOADER__.register(Lr,"StepOne","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/stepOne.js"));var Sr,wr,Ir,xr=$.a.TextArea,Hr=X.a.Option,Nr=function(e){return{dataSource:e.dataSource}},Pr=Object(y.b)(Nr)(Sr=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={loading:!1,tableColumns:[],dataSource:[]},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){e.addInputsignal&&!this.props.addInputsignal&&this.addInput(),e.initValue!=this.props.initValue&&this.initDataSource(e.initValue)}},{key:"initDataSource",value:function(e){this.backMsg(e),this.setState({dataSource:e})}},{key:"backMsg",value:function(e,t){var a=[];for(var n in e){var r=e[n];r.tmp?a.push(r.tmp):r.isEdit||a.push(r)}this.props.inputParamsChange(a,t)}},{key:"addInput",value:function(){var e=this,t=Object(da.cloneDeep)(this.state.dataSource);t.unshift({key:Math.random(),fieldName:"",paramType:"",paramName:"",operator:"",required:!0,desc:"",isEdit:!0}),this.setState({dataSource:t},function(){e.props.changeAddinputOverSignal()})}},{key:"getTableColumns",value:function(){var e=this;this.props.tablecolumn(this.props.dataSourceId,this.props.tableId).then(function(t){t&&e.setState({tableColumns:t.data})})}},{key:"getColumnsView",value:function(){return this.props.dataSource.sourceColumn.map(function(e){return s.a.createElement(Hr,{title:e.key,key:e.key,value:e.type+"@@"+e.key},e.key)})}},{key:"changeTableParam",value:function(e,t){if(t=t.split("@@")){var a=Object(da.cloneDeep)(this.state.dataSource);a[e].paramType=t[0],a[e].fieldName=t[1],this.setState({dataSource:a})}}},{key:"setRequired",value:function(e,t){var a=Object(da.cloneDeep)(this.state.dataSource);a[e].required=t.target.checked,this.setState({dataSource:a})}},{key:"textAreaChange",value:function(e,t){var a=t.target.value,n=Object(da.cloneDeep)(this.state.dataSource);n[e].desc=a,this.setState({dataSource:n})}},{key:"paramNameChange",value:function(e,t){var a=t.target.value,n=Object(da.cloneDeep)(this.state.dataSource);n[e].paramName=a,this.setState({dataSource:n})}},{key:"operatorsChange",value:function(e,t){var a=Object(da.cloneDeep)(this.state.dataSource);a[e].operator=t,this.setState({dataSource:a})}},{key:"checkInfo",value:function(e,t){var a=Object(da.cloneDeep)(this.state.dataSource),n=a[e];if(t&&(n=n.tmp),!n.fieldName)return ue.a.error("请选择字段"),!1;if(!n.paramName)return ue.a.error("请填写参数名"),!1;if(!n.operator)return ue.a.error("请选择操作符"),!1;if(!this.checkVal(n))return!1;for(var r in a)if(r!=e&&a[r].fieldName==n.fieldName&&a[r].operator==n.operator)return t?ue.a.error("原数据与现有数据重复，请修改保存"):ue.a.error("不能设置相同字段的相同规则"),!1;return!0}},{key:"checkVal",value:function(e){return e.desc&&e.desc.length>200?(ue.a.error("说明不得大于200字符"),!1):!(e.paramName&&e.paramName.length>16)||(ue.a.error("参数名不得大于16字符"),!1)}},{key:"saveInfo",value:function(e){var t=Object(da.cloneDeep)(this.state.dataSource);if(this.checkInfo(e)){t[e].isEdit=!1;var a=!t[e].tmp;t[e].tmp&&(t[e].tmp=null),a?this.backMsg(t,t[e]):this.backMsg(t),this.setState({dataSource:t})}}},{key:"cancelSave",value:function(e){var t=Object(da.cloneDeep)(this.state.dataSource);if(t[e].tmp){if(!this.checkInfo(e,!0))return;t[e]=Object(da.cloneDeep)(t[e].tmp),t[e].isEdit=!1}else t.splice(e,1);this.setState({dataSource:t})}},{key:"editInfo",value:function(e){var t=Object(da.cloneDeep)(this.state.dataSource);t[e].tmp=Object(da.cloneDeep)(t[e]),t[e].isEdit=!0,this.setState({dataSource:t})}},{key:"removeInfo",value:function(e){var t=Object(da.cloneDeep)(this.state.dataSource);t.splice(e,1),this.backMsg(t),this.setState({dataSource:t})}},{key:"initColumns",value:function(){var e=this;return[{title:"字段",dataIndex:"fieldName",key:"fieldName",width:"200px",render:function(t,a,n){return a.isEdit?s.a.createElement(X.a,{showSearch:!0,defaultValue:a.paramType?a.paramType+"@@"+a.fieldName:null,onChange:e.changeTableParam.bind(e,n),style:{width:"100%"}},e.getColumnsView()):a.fieldName}},{title:"参数名",dataIndex:"paramName",key:"paramName",width:"100px",render:function(t,a,n){return a.isEdit?s.a.createElement($.a,{onBlur:e.paramNameChange.bind(e,n),defaultValue:a.paramName}):a.paramName}},{title:"数据类型",dataIndex:"paramType",key:"paramType",render:function(e,t){return t.paramType||""}},{title:"操作符",dataIndex:"operator",key:"operator",width:"100px",render:function(t,a,n){return a.isEdit?s.a.createElement(X.a,{style:{width:"100%"},defaultValue:a.operator,onChange:e.operatorsChange.bind(e,n)},s.a.createElement(Hr,{value:"="},"="),s.a.createElement(Hr,{value:">"},">"),s.a.createElement(Hr,{value:">="},">="),s.a.createElement(Hr,{value:"<"}," <"),s.a.createElement(Hr,{value:"<="},"<="),s.a.createElement(Hr,{value:"!="},"!="),s.a.createElement(Hr,{value:"in"},"in"),s.a.createElement(Hr,{value:"not in"},"not in"),s.a.createElement(Hr,{value:"like"},"like"),s.a.createElement(Hr,{value:"not like"},"not like")):a.operator}},{title:"是否必填",dataIndex:"required",key:"required",render:function(t,a,n){return a.isEdit?s.a.createElement(Jn.a,{onClick:e.setRequired.bind(e,n),defaultChecked:a.required}):s.a.createElement(Jn.a,{defaultChecked:a.required,disabled:!0})}},{title:"说明",dataIndex:"desc",key:"desc",render:function(t,a,n){return a.isEdit?s.a.createElement(xr,{onBlur:e.textAreaChange.bind(e,n),defaultValue:a.desc}):s.a.createElement(xr,{key:"textareadisabled",defaultValue:a.desc,disabled:!0})}},{title:"操作",dataIndex:"deal",key:"deal",render:function(t,a,n){return a.isEdit?s.a.createElement("div",null,s.a.createElement("a",{onClick:e.saveInfo.bind(e,n)},"保存"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.cancelSave.bind(e,n)},"取消")):s.a.createElement("div",null,s.a.createElement("a",{onClick:e.editInfo.bind(e,n)},"编辑"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.removeInfo.bind(e,n)},"删除"))}}]}},{key:"render",value:function(){return s.a.createElement(Y.a,{className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:!1,dataSource:this.state.dataSource})}}]),t}(i.Component))||Sr,Ur=Pr,jr=Ur,zr=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(xr,"TextArea","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/paramsTable/inputParams.js"),__REACT_HOT_LOADER__.register(Hr,"Option","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/paramsTable/inputParams.js"),__REACT_HOT_LOADER__.register(Nr,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/paramsTable/inputParams.js"),__REACT_HOT_LOADER__.register(Pr,"InputParams","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/paramsTable/inputParams.js"),__REACT_HOT_LOADER__.register(Ur,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/paramsTable/inputParams.js")),$.a.TextArea),Mr=X.a.Option,Wr=function(e){return{dataSource:e.dataSource}},Gr=function(e){return{}},Fr=Object(y.b)(Wr,Gr)(wr=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={loading:!1,tableColumns:[],dataSource:[]},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){e.addOutputsignal&&!this.props.addOutputsignal&&this.addOutput(e.inputToOutputData),e.initValue!=this.props.initValue&&this.initDataSource(e.initValue)}},{key:"initDataSource",value:function(e){var t=e;e||(t=[]),e&&e.some(function(e){return!e.fieldName})&&(t=[]),this.backMsg(t),this.setState({dataSource:t})}},{key:"backMsg",value:function(e){var t=[];for(var a in e){var n=e[a];n.tmp?t.push(n.tmp):n.isEdit||t.push(n)}this.props.outputParamsChange(t)}},{key:"addOutput",value:function(e){var t=this,a=Object(da.cloneDeep)(this.state.dataSource),n={key:Math.random(),fieldName:"",paramType:"",paramName:"",operator:"",required:!0,desc:"",isEdit:!0};e&&(n.fieldName=e.fieldName,n.paramType=e.paramType,n.paramName=e.paramName,n.operator=e.operator,n.required=e.required,n.desc=e.desc),a.unshift(n),this.setState({dataSource:a},function(){t.props.changeAddoutputOverSignal()})}},{key:"getTableColumns",value:function(){var e=this;this.props.tablecolumn(this.props.dataSourceId,this.props.tableId).then(function(t){t&&e.setState({tableColumns:t.data})})}},{key:"getColumnsView",value:function(){return this.props.dataSource.sourceColumn.map(function(e){return s.a.createElement(Mr,{title:e.key,key:e.key,value:e.type+"@@"+e.key},e.key)})}},{key:"changeTableParam",value:function(e,t){if(t=t.split("@@")){var a=Object(da.cloneDeep)(this.state.dataSource);a[e].paramType=t[0],a[e].fieldName=t[1],this.setState({dataSource:a})}}},{key:"setRequired",value:function(e,t){var a=Object(da.cloneDeep)(this.state.dataSource);a[e].required=t.target.checked,this.setState({dataSource:a})}},{key:"textAreaChange",value:function(e,t){var a=t.target.value,n=Object(da.cloneDeep)(this.state.dataSource);n[e].desc=a,this.setState({dataSource:n})}},{key:"paramNameChange",value:function(e,t){var a=t.target.value,n=Object(da.cloneDeep)(this.state.dataSource);n[e].paramName=a,this.setState({dataSource:n})}},{key:"operatorsChange",value:function(e,t){var a=Object(da.cloneDeep)(this.state.dataSource);a[e].operator=t,this.setState({dataSource:a})}},{key:"checkInfo",value:function(e,t){var a=Object(da.cloneDeep)(this.state.dataSource),n=a[e];if(t&&(n=n.tmp),!n.fieldName)return ue.a.error("请选择字段"),!1;if(!n.paramName)return ue.a.error("请填写参数名"),!1;if(!this.checkVal(n))return!1;for(var r in a)if(r!=e&&a[r].fieldName==n.fieldName)return t?ue.a.error("原数据与现有数据重复，请修改保存"):ue.a.error("不能设置相同字段"),!1;return!0}},{key:"checkVal",value:function(e){return e.desc&&e.desc.length>200?(ue.a.error("说明不得大于200字符"),!1):!(e.paramName&&e.paramName.length>16)||(ue.a.error("参数名不得大于16字符"),!1)}},{key:"saveInfo",value:function(e){var t=Object(da.cloneDeep)(this.state.dataSource);this.checkInfo(e)&&(t[e].isEdit=!1,t[e].tmp&&(t[e].tmp=null),this.backMsg(t),this.setState({dataSource:t}))}},{key:"cancelSave",value:function(e){var t=Object(da.cloneDeep)(this.state.dataSource);if(t[e].tmp){if(!this.checkInfo(e,!0))return;t[e]=Object(da.cloneDeep)(t[e].tmp),t[e].isEdit=!1}else t.splice(e,1);this.setState({dataSource:t})}},{key:"editInfo",value:function(e){var t=Object(da.cloneDeep)(this.state.dataSource);t[e].tmp=Object(da.cloneDeep)(t[e]),t[e].isEdit=!0,this.setState({dataSource:t})}},{key:"removeInfo",value:function(e){var t=Object(da.cloneDeep)(this.state.dataSource);t.splice(e,1),this.backMsg(t),this.setState({dataSource:t})}},{key:"initColumns",value:function(){var e=this;return[{title:"字段",dataIndex:"fieldName",key:"fieldName",width:"200px",render:function(t,a,n){return a.isEdit?s.a.createElement(X.a,{showSearch:!0,defaultValue:a.paramType?a.paramType+"@@"+a.paramType:null,onChange:e.changeTableParam.bind(e,n),style:{width:"100%"}},e.getColumnsView()):a.fieldName}},{title:"参数名",dataIndex:"paramName",key:"paramName",width:"100px",render:function(t,a,n){return a.isEdit?s.a.createElement($.a,{onBlur:e.paramNameChange.bind(e,n),defaultValue:a.paramName}):a.paramName}},{title:"数据类型",dataIndex:"paramType",key:"paramType",render:function(e,t){return t.paramType||""}},{title:"说明",dataIndex:"desc",key:"desc",render:function(t,a,n){return a.isEdit?s.a.createElement(zr,{onBlur:e.textAreaChange.bind(e,n),defaultValue:a.desc}):s.a.createElement(zr,{key:"textareadisabled",defaultValue:a.desc,disabled:!0})}},{title:"操作",dataIndex:"deal",key:"deal",render:function(t,a,n){return a.isEdit?s.a.createElement("div",null,s.a.createElement("a",{onClick:e.saveInfo.bind(e,n)},"保存"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.cancelSave.bind(e,n)},"取消")):s.a.createElement("div",null,s.a.createElement("a",{onClick:e.editInfo.bind(e,n)},"编辑"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement("a",{onClick:e.removeInfo.bind(e,n)},"删除"))}}]}},{key:"render",value:function(){return s.a.createElement(Y.a,{className:"m-table monitor-table",columns:this.initColumns(),loading:this.state.loading,pagination:!1,dataSource:this.state.dataSource})}}]),t}(i.Component))||wr,Vr=Fr,qr=Vr,Br=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(zr,"TextArea","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/paramsTable/outputParams.js"),__REACT_HOT_LOADER__.register(Mr,"Option","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/paramsTable/outputParams.js"),__REACT_HOT_LOADER__.register(Wr,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/paramsTable/outputParams.js"),__REACT_HOT_LOADER__.register(Gr,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/paramsTable/outputParams.js"),__REACT_HOT_LOADER__.register(Fr,"OutputParams","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/paramsTable/outputParams.js"),__REACT_HOT_LOADER__.register(Vr,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/paramsTable/outputParams.js")),te.a.Item),Yr=X.a.Option,Kr=$.a.TextArea,Qr=function(e){return{dataSource:e.dataSource,tagConfig:e.tagConfig,apiMarket:e.apiMarket}},Jr=function(e){return{getDataSourcesColumn:function(t){e(Ct.getDataSourcesColumn(t))}}},Xr=Object(y.b)(Qr,Jr)(Ir=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={addInputsignal:!1,addOutputsignal:!1,inputData:[],outputData:[],inputToOutputData:{},initInputValue:[],initOutputValue:[]},n.changeAddinputOverSignal=function(){var e;return(e=n).__changeAddinputOverSignal__REACT_HOT_LOADER__.apply(e,arguments)},n.addInput=function(){var e;return(e=n).__addInput__REACT_HOT_LOADER__.apply(e,arguments)},n.inputParamsChange=function(){var e;return(e=n).__inputParamsChange__REACT_HOT_LOADER__.apply(e,arguments)},n.changeAddoutputOverSignal=function(){var e;return(e=n).__changeAddoutputOverSignal__REACT_HOT_LOADER__.apply(e,arguments)},n.addOutput=function(){var e;return(e=n).__addOutput__REACT_HOT_LOADER__.apply(e,arguments)},n.outputParamsChange=function(){var e;return(e=n).__outputParamsChange__REACT_HOT_LOADER__.apply(e,arguments)},n.prev=function(){var e;return(e=n).__prev__REACT_HOT_LOADER__.apply(e,arguments)},n.next=function(){var e;return(e=n).__next__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.basicInfo,a=e.paramsConfig;Object(da.isEmpty)(a)||this.setState({initInputValue:a.inputParams,initOutputValue:a.outputParams}),this.props.getDataSourcesColumn({sourceId:t.dataSourceId,tableName:t.originTable})}},{key:"__changeAddinputOverSignal__REACT_HOT_LOADER__",value:function(){this.setState({addInputsignal:!1})}},{key:"__addInput__REACT_HOT_LOADER__",value:function(e){this.setState({addInputsignal:!0})}},{key:"__inputParamsChange__REACT_HOT_LOADER__",value:function(e,t){this.setState({inputData:e})}},{key:"__changeAddoutputOverSignal__REACT_HOT_LOADER__",value:function(){this.setState({addOutputsignal:!1})}},{key:"__addOutput__REACT_HOT_LOADER__",value:function(e){e&&!e.param&&(e=null),this.setState({addOutputsignal:!0,inputToOutputData:e})}},{key:"__outputParamsChange__REACT_HOT_LOADER__",value:function(e){this.setState({outputData:e})}},{key:"__prev__REACT_HOT_LOADER__",value:function(){var e=this.state,t=e.inputData,a=e.outputData,n=this.props,r=n.currentStep;(0,n.navToStep)(r-1),this.props.changeParamsConfig({inputParams:t,outputParams:a})}},{key:"__next__REACT_HOT_LOADER__",value:function(){var e=this.state,t=e.inputData,a=e.outputData,n=this.props,r=n.tagId,i=n.currentStep,s=n.navToStep,o=n.basicInfo;if(!t||t.length<1)ue.a.error("请设置输入参数");else if(!a||a.length<1)ue.a.error("请设置输出参数");else if(t&&a&&t.length>0&&a.length>0){if(!t.some(function(e){return e.required}))return void ue.a.error("输入参数必须有一个必填项");this.props.changeParamsConfig({inputParams:t,outputParams:a}),wn.publishTag(U()({},o,{id:r,inputParams:t,outputParams:a})).then(function(e){1===e.code&&s(i+1)})}else ue.a.error("请设置输入输出参数")}},{key:"render",value:function(){var e=this.props,t=e.form,a=e.tagConfig,n=e.apiMarket,r=e.dataSource,i=(t.getFieldDecorator,n.apiCatalogue,a.identifyColumn,r.sourceColumn,this.state),o=i.initInputValue,l=i.initOutputValue;return s.a.createElement("div",null,s.a.createElement("div",{className:"steps-content"},s.a.createElement(q.a,{title:s.a.createElement("span",null,s.a.createElement("span",{style:{color:"#f04134"}},"*")," 输入参数"),extra:s.a.createElement(Ie.a,{onClick:this.addInput,style:{marginTop:"10px"},type:"primary"},"添加输入参数"),className:"box-2",noHovering:!0},s.a.createElement(jr,U()({initValue:o,inputParamsChange:this.inputParamsChange,changeAddinputOverSignal:this.changeAddinputOverSignal,addInputsignal:this.state.addInputsignal},this.props))),s.a.createElement(q.a,{title:s.a.createElement("span",null,s.a.createElement("span",{style:{color:"#f04134"}},"*")," 输出参数"),extra:s.a.createElement(Ie.a,{onClick:this.addOutput,style:{marginTop:"10px"},type:"primary"},"添加输出参数"),style:{marginTop:"20px"},className:"box-2",noHovering:!0},s.a.createElement(qr,U()({initValue:l,inputToOutputData:this.state.inputToOutputData,outputParamsChange:this.outputParamsChange,changeAddoutputOverSignal:this.changeAddoutputOverSignal,addOutputsignal:this.state.addOutputsignal},this.props)))),s.a.createElement("div",{className:"steps-action"},s.a.createElement(Ie.a,{className:"m-r-8",onClick:this.prev},"上一步"),s.a.createElement(Ie.a,{type:"primary",onClick:this.next},"下一步")))}}]),t}(i.Component))||Ir;Xr=te.a.create()(Xr);"undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Br,"FormItem","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/stepTwo.js"),__REACT_HOT_LOADER__.register(Yr,"Option","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/stepTwo.js"),__REACT_HOT_LOADER__.register(Kr,"TextArea","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/stepTwo.js"),__REACT_HOT_LOADER__.register(Qr,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/stepTwo.js"),__REACT_HOT_LOADER__.register(Jr,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/stepTwo.js"),__REACT_HOT_LOADER__.register(Xr,"StepTwo","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/stepTwo.js"));var Zr,$r,ei,ti,ai,ni=void 0,ri=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={time:3},n.countDown=function(){var e;return(e=n).__countDown__REACT_HOT_LOADER__.apply(e,arguments)},n.back=function(){var e;return(e=n).__back__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"__countDown__REACT_HOT_LOADER__",value:function(e){var t=this;ni=setInterval(function(){e-=1,t.setState({time:e}),0===e&&A.g.push("/dl/manage")},1e3)}},{key:"componentDidMount",value:function(){this.countDown(this.state.time)}},{key:"componentWillUnmount",value:function(){clearInterval(ni)}},{key:"__back__REACT_HOT_LOADER__",value:function(){A.g.push("/dl/manage")}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("div",{className:"txt-center"},s.a.createElement("div",{style:{fontSize:"30px",marginTop:"40px"}},s.a.createElement(z.a,{type:"check-circle",style:{fontSize:"60px",color:"#00CD00"}}),s.a.createElement("br",null),"操作成功",s.a.createElement("br",null))),s.a.createElement("div",{className:"txt-center",style:{fontSize:"14px",marginTop:"30px"}},this.state.time,"秒后自动返回"),s.a.createElement("div",{className:"txt-center",style:{padding:"20px 0"}},s.a.createElement(Ie.a,{size:"large",style:{marginLeft:"8px"}},s.a.createElement("a",{onClick:this.back},"返回"))))}}]),t}(i.Component),ii=ri,si=ii,oi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ni,"timeClock","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/stepThree.js"),__REACT_HOT_LOADER__.register(ri,"ManageComplete","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/stepThree.js"),__REACT_HOT_LOADER__.register(ii,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/stepThree.js")),vr.a.Step),li=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={current:0,editStatus:"new",basicInfo:{},paramsConfig:{},tagId:n.props.routeParams.tagId,tagType:1},n.navToStep=function(){var e;return(e=n).__navToStep__REACT_HOT_LOADER__.apply(e,arguments)},n.changeBasicInfo=function(){var e;return(e=n).__changeBasicInfo__REACT_HOT_LOADER__.apply(e,arguments)},n.changeParamsConfig=function(){var e;return(e=n).__changeParamsConfig__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.state.tagId;Ga.getApiInfo({tagId:t}).then(function(t){if(1===t.code){var a=t.data,n={name:a.name,catalogueId:a.catalogueId,tagDesc:a.tagDesc,tagRange:a.tagRange,reqLimit:a.reqLimit,respLimit:a.respLimit,dataSourceId:a.dataSourceId,identityColumn:a.identityColumn,identityId:a.identityId,originTable:a.originTable,originColumn:a.originColumn};e.setState({basicInfo:n,paramsConfig:{inputParams:a.inputParam,outputParams:a.outputParam},tagType:a.type})}}),this.props.route.path.indexOf("editApi")>-1&&this.setState({editStatus:"edit"})}},{key:"__navToStep__REACT_HOT_LOADER__",value:function(e){this.setState({current:e})}},{key:"__changeBasicInfo__REACT_HOT_LOADER__",value:function(e){var t=U()({},this.state.basicInfo,e);this.setState({basicInfo:t})}},{key:"__changeParamsConfig__REACT_HOT_LOADER__",value:function(e){var t=U()({},this.state.paramsConfig,e);this.setState({paramsConfig:t})}},{key:"render",value:function(){var e=this.state,t=e.tagId,a=e.tagType,n=e.current,r=e.basicInfo,i=e.paramsConfig,o=e.editStatus,l=[{title:"基本属性",content:s.a.createElement(Lr,{tagType:a,currentStep:n,navToStep:this.navToStep,basicInfo:r,editStatus:o,changeBasicInfo:this.changeBasicInfo})},{title:"参数配置",content:s.a.createElement(Xr,{tagId:t,currentStep:n,navToStep:this.navToStep,basicInfo:r,paramsConfig:i,changeParamsConfig:this.changeParamsConfig})},{title:"完成",content:s.a.createElement(si,{currentStep:n,navToStep:this.navToStep})}];return s.a.createElement("div",{className:"box-1"},s.a.createElement("h1",{className:"box-title"},s.a.createElement(tr.a,null),s.a.createElement("span",{className:"m-l-8"},"标签发布")),s.a.createElement("div",{className:"steps-container"},s.a.createElement(vr.a,{current:n},l.map(function(e){return s.a.createElement(oi,{key:e.title,title:e.title})})),l[n].content))}}]),t}(i.Component),ci=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(oi,"Step","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/index.js"),__REACT_HOT_LOADER__.register(li,"PublishTag","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/publishTag/index.js")),s.a.createElement("div",null,"where 条件即针对源头数据筛选条件，根据指定的 column、table、where 条件拼接 SQL 进行数据抽取，暂时不支持limit关键字过滤。利用 where 条件可进行全量同步和增量同步，具体说明如下：",s.a.createElement("br",null),s.a.createElement("ul",null,s.a.createElement("li",null,"1）全量同步：第一次做数据导入时通常为全量导入，可不用设置 where 条件。"),s.a.createElement("li",null,"2）增量同步：增量导入在实际业务场景中，往往会选择当天的数据进行同步，通常需要编写 where 条件语句，请先确认表中描述增量字段（时间戳）为哪一个。如tableA增量的字段为create_time，则填写create_time > 您需要的日期，如果需要日期动态变化，请参考帮助文档。")))),pi=s.a.createElement("ul",null,s.a.createElement("li",null,"MySQL：支持数值型切分键"),s.a.createElement("li",null,"Oracle：支持数值型、字符串类型切分键")),ui=s.a.createElement("div",null,"user/hive/warehouse/projectName.db/",s.a.createElement("br",null),"tableName 是RD-OS默认的HDFS文件组织方式，projectName为项目名， 其中每个tableName是HDFS内的一个目录，储存着一张表的数据。 如果此表的数据存储在当前项目空间内，只需修改tableName即可， 否则需要根据HDFS的存储位置填写。"),di=s.a.createElement("div",null,"设置作业速率上限，则数据同步作业的总速率将尽可能按照这个上限进行同步， 需根据实际硬件配置调整，默认为1"),_i=s.a.createElement("ul",null,s.a.createElement("li",null," 1.作业速率上限=作业并发数单作业的传输速率，当作业速率上限已定，选择的并发数越高则单并发的速率越低，同时所占用的内存会越高，这可以根据你的业务需求选择设定的值"),s.a.createElement("li",null,"2.作业并发数下拉框选择对象，取决作业速率上限。作业速率上限选择值nMB/s，作业并发数最大能选择n")),mi=s.a.createElement("div",null,"表示脏数据的最大容忍条数，如果您配置0， 则表示严格不允许脏数据存在；如果不填则代表容忍脏数据"),hi=s.a.createElement("div",null,"高可用模式下的填写规则：",s.a.createElement("ul",null,s.a.createElement("li",null,"1、分别要填写：nameservice名称、 namenode名称（多个以逗号分隔）、proxy.provider参数；"),s.a.createElement("li",null,"2、所有参数以JSON格式填写；"),s.a.createElement("li",null,"3、格式为：",s.a.createElement("br",null),'"dfs.nameservices": "nameservice名称", "dfs.ha.namenodes.nameservice名称": "namenode名称，以逗号分隔", "dfs.namenode.rpc-address.nameservice名称.namenode名称": "", "dfs.namenode.rpc-address.nameservice名称.namenode名称": "", "dfs.client.failover.proxy.provider.',s.a.createElement("br",null),'nameservice名称": "org.apache.hadoop.',s.a.createElement("br",null),"hdfs.server.namenode.ha.",s.a.createElement("br",null),'ConfiguredFailoverProxyProvider"'),s.a.createElement("li",null,"4、详细参数含义请参考《帮助文档》或",s.a.createElement("a",{href:"http://hadoop.apache.org/docs/r2.7.4/hadoop-project-dist/hadoop-hdfs/HDFSHighAvailabilityWithQJM.html",target:"blank"},"Hadoop官方文档")))),Ei=s.a.createElement("div",null,"JDBC URL配置参考：",s.a.createElement("ul",null,s.a.createElement("li",null,"MySQL: jdbc:mysql://host:port/batch?useCursorFetch=true"),s.a.createElement("li",null,"Oracle: jdbc:oracle:thin:@host:port:ORCL"),s.a.createElement("li",null,"Hive: jdbc:hive2://host:port/projectName"))),gi=s.a.createElement("div",null,"HBase配置说明：",s.a.createElement("ul",null,s.a.createElement("li",null,'1、Zookeeper 集群的地址，多个地址间用逗号分割。例 如：" IP1:Port, IP2:Port, IP3:Port/子目录".默认是 localhost,是给伪分布式用的。要修改才能在完全分布式的情况下使用。如果在hbase-env.sh设置了HBASEMANAGESZK， 这些ZooKeeper节点就会和HBase一起启动'),s.a.createElement("li",null,"2、Port: ZooKeeper的zoo.conf中的配置。客户端连接的端口， 默认2181"),s.a.createElement("li",null,"3、子目录：HBase在ZooKeeper中配置的子目录"))),fi=s.a.createElement("div",null,s.a.createElement("p",null,"保存到默认位置，您可以在“数据管理-脏数据管理”中查看，表名：defaultName（生命周期：30天）")),Ti=s.a.createElement("div",null,s.a.createElement("p",null,"任务执行结束后统计错误记录占比，当比例过高时，将此任务实例置为失败")),vi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ci,"dataFilterDoc","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/helpDoc/docs.js"),__REACT_HOT_LOADER__.register(pi,"switchKey","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/helpDoc/docs.js"),__REACT_HOT_LOADER__.register(ui,"hdfsPath","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/helpDoc/docs.js"),__REACT_HOT_LOADER__.register(di,"jobSpeedLimit","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/helpDoc/docs.js"),__REACT_HOT_LOADER__.register(_i,"jobConcurrence","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/helpDoc/docs.js"),__REACT_HOT_LOADER__.register(mi,"errorCount","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/helpDoc/docs.js"),__REACT_HOT_LOADER__.register(hi,"hdfsConfig","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/helpDoc/docs.js"),__REACT_HOT_LOADER__.register(Ei,"rdbConfig","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/helpDoc/docs.js"),__REACT_HOT_LOADER__.register(gi,"hBaseConfig","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/helpDoc/docs.js"),__REACT_HOT_LOADER__.register(fi,"recordDirtyData","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/helpDoc/docs.js"),__REACT_HOT_LOADER__.register(Ti,"errorPercentConfig","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/helpDoc/docs.js")),function(e){function t(){return m()(this,t),f()(this,(t.__proto__||d()(t)).apply(this,arguments))}return v()(t,e),E()(t,[{key:"render",value:function(){var e=this.props.doc;return s.a.createElement(hr.a,{key:e,title:n[e]},s.a.createElement(z.a,U()({className:"help-doc"},this.props.style,{type:"question-circle-o"})))}}]),t}(s.a.Component)),Ai=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(vi,"HelpDoc","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/helpDoc/index.js"),te.a.Item),yi=X.a.Option,Ci='{\n    "defaultFS": "",\n    "hadoopConfig": {\n        "dfs.nameservices": "defaultDfs", \n        "dfs.ha.namenodes.defaultDfs": "namenode1", \n        "dfs.namenode.rpc-address.defaultDfs.namenode1": "", \n        "dfs.client.failover.proxy.provider.defaultDfs": "org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider" \n    }\n}',Di=function(e){return{dataSource:e.dataSource}},bi=function(e){return{getDataSourcesType:function(t){e(Ct.getDataSourcesType(t))}}},ki=Object(y.b)(Di,bi)(Zr=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={sourceType:void 0,hasHdfsConfig:!1,hadoopConfig:"defaultDfs"},n.onOk=function(){var e;return(e=n).__onOk__REACT_HOT_LOADER__.apply(e,arguments)},n.testConnection=function(){var e;return(e=n).__testConnection__REACT_HOT_LOADER__.apply(e,arguments)},n.cancel=function(){var e;return(e=n).__cancel__REACT_HOT_LOADER__.apply(e,arguments)},n.sourceChange=function(){var e;return(e=n).__sourceChange__REACT_HOT_LOADER__.apply(e,arguments)},n.enableHdfsConfig=function(){var e;return(e=n).__enableHdfsConfig__REACT_HOT_LOADER__.apply(e,arguments)},n.renderSourceType=function(){var e;return(e=n).__renderSourceType__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){}},{key:"componentWillReceiveProps",value:function(e){var t=this.props.sourceData,a=e.sourceData;a&&a!==t&&(7===a.type?this.setState({sourceType:a.type||1,hasHdfsConfig:!0}):this.setState({sourceType:a.type||1}))}},{key:"__onOk__REACT_HOT_LOADER__",value:function(e){var t=this.props,a=t.editDataSource,n=t.form;n.validateFields(function(e,t){e||(t.dataJson.jdbcUrl&&(t.dataJson.jdbcUrl=H.a.trim(t.dataJson.jdbcUrl)),t.dataJson.defaultFS&&(t.dataJson.defaultFS=H.a.trim(t.dataJson.defaultFS)),a(t,n))})}},{key:"__testConnection__REACT_HOT_LOADER__",value:function(){var e=this.state.sourceType,t=this.props.form,a=void 0;e===xe.MAXCOMPUTE&&(a=["type","dataName","dataJson.project","dataJson.endPoint","dataJson.accessKey","dataJson.accessId"]),t.validateFields(a,function(e,t){e||yt.testDSConnection(t).then(function(e){e.data?ue.a.success("数据源连接正常！"):ue.a.error("数据库连接失败！")})})}},{key:"__cancel__REACT_HOT_LOADER__",value:function(){var e=this.props,t=e.form,a=e.handCancel;t.resetFields(),a()}},{key:"__sourceChange__REACT_HOT_LOADER__",value:function(e){this.setState({sourceType:parseInt(e)}),this.props.form.resetFields()}},{key:"__enableHdfsConfig__REACT_HOT_LOADER__",value:function(e){this.setState({hasHdfsConfig:!e.target.value})}},{key:"renderDynamic",value:function(){var e=this.state,t=e.hasHdfsConfig,a=e.sourceType,n=this.props,r=n.form,i=n.sourceData,o=r.getFieldDecorator,l=i.dataJson||{};switch(a){case xe.HIVE:return s.a.createElement("div",null,s.a.createElement(Ai,U()({},Fe,{label:"JDBC URL",hasFeedback:!0}),o("dataJson.jdbcUrl",{rules:[{required:!0,message:"jdbcUrl不可为空！"}],initialValue:l.jdbcUrl||""})(s.a.createElement($.a,{autoComplete:"off"}))),s.a.createElement(Ai,U()({},Fe,{label:"用户名"}),o("dataJson.username",{rules:[],initialValue:l.username||""})(s.a.createElement($.a,{autoComplete:"off"}))),s.a.createElement(Ai,U()({},Fe,{label:"密码"}),o("dataJson.password",{rules:[],initialValue:""})(s.a.createElement($.a,{type:"password"}))),s.a.createElement(Ai,U()({},Fe,{label:"defaultFS",hasFeedback:!0}),o("dataJson.defaultFS",{rules:[{required:!0,message:"defaultFS不可为空！"}],initialValue:l.defaultFS||""})(s.a.createElement($.a,{placeholder:"hdfs://host:port"}))),s.a.createElement(Ai,Ve,o("hasHdfsConfig",{initialValue:!1})(s.a.createElement(Jn.a,{checked:t,onChange:this.enableHdfsConfig},"高可用配置"))),s.a.createElement(Ai,U()({},Fe,{label:"高可用配置",style:{display:t?"block":"none"}}),o("dataJson.hadoopConfig",{rules:[],initialValue:l.hadoopConfig||""})(s.a.createElement($.a,{type:"textarea",rows:5,placeholder:Ci})),s.a.createElement(vi,{doc:"hdfsConfig"})));case xe.MAXCOMPUTE:return s.a.createElement("div",null,s.a.createElement(Ai,U()({},Fe,{label:"AccessId",hasFeedback:!0}),o("dataJson.accessId",{rules:[{required:!0,message:"access ID不可为空！"}],initialValue:l.accessId||""})(s.a.createElement($.a,{autoComplete:"off"}))),s.a.createElement(Ai,U()({},Fe,{label:"AccessKey",hasFeedback:!0}),o("dataJson.accessKey",{rules:[{required:!0,message:"access Key不可为空！"}],initialValue:l.accessKey||""})(s.a.createElement($.a,{type:"password",autoComplete:"off"}))),s.a.createElement(Ai,U()({},Fe,{label:"Project Name",hasFeedback:!0}),o("dataJson.project",{rules:[{required:!0,message:"Project Name不可为空！"}],initialValue:l.project||""})(s.a.createElement($.a,{autoComplete:"off"}))),s.a.createElement(Ai,U()({},Fe,{label:"End Point",hasFeedback:!0}),o("dataJson.endPoint",{rules:[{required:!0,message:"End Point不可为空！"}],initialValue:l.endPoint||""})(s.a.createElement($.a,{autoComplete:"off"}))));case xe.MYSQL:case xe.ORACLE:case xe.SQLSERVER:return s.a.createElement("div",null,s.a.createElement(Ai,U()({},Fe,{label:"JDBC URL",hasFeedback:!0}),o("dataJson.jdbcUrl",{rules:[{required:!0,message:"jdbcUrl不可为空！"}],initialValue:l.jdbcUrl||""})(s.a.createElement($.a,{autoComplete:"off"}))),s.a.createElement(Ai,U()({},Fe,{label:"用户名",hasFeedback:!0}),o("dataJson.username",{rules:[{required:!0,message:"用户名不可为空！"}],initialValue:l.username||""})(s.a.createElement($.a,{autoComplete:"off"}))),s.a.createElement(Ai,U()({},Fe,{label:"密码",hasFeedback:!0}),o("dataJson.password",{rules:[{required:!0,message:"密码不可为空！"}],initialValue:""})(s.a.createElement($.a,{type:"password"}))))}}},{key:"__renderSourceType__REACT_HOT_LOADER__",value:function(e){return e.map(function(e){return s.a.createElement(yi,{key:e.value,value:e.value.toString()},e.name)})}},{key:"render",value:function(){var e=this.props,t=e.visible,a=e.form,n=e.title,r=e.sourceData,i=e.status,o=e.dataSource,l=(this.state.hasHdfsConfig,a.getFieldDecorator);return s.a.createElement(Q.a,{title:n,maskClosable:!1,wrapClassName:"vertical-center-modal",visible:t,onCancel:this.cancel,footer:!1},s.a.createElement(te.a,null,s.a.createElement(Ai,U()({},Fe,{label:"数据源类型",hasFeedback:!0}),l("type",{rules:[{required:!0,message:"数据源类型不可为空！"}],initialValue:r.type?r.type.toString():"1"})(s.a.createElement(X.a,{onChange:this.sourceChange,disabled:"edit"===i},this.renderSourceType(o.sourceType)))),s.a.createElement(Ai,U()({},Fe,{label:"数据源名称",hasFeedback:!0}),l("dataName",{rules:[{required:!0,message:"数据源名称不可为空！"},{max:128,message:"数据源名称不得超过128个字符！"},{pattern:/^[A-Za-z0-9_]+$/,message:"名称只能由字母与数字、下划线组成"}],initialValue:r.dataName||""})(s.a.createElement($.a,{autoComplete:"off",disabled:"edit"===i}))),s.a.createElement(Ai,U()({},Fe,{label:"数据源描述",hasFeedback:!0}),l("dataDesc",{rules:[{max:200,message:"描述请控制在200个字符以内！"}],initialValue:r.dataDesc||""})(s.a.createElement($.a,{type:"textarea",rows:4}))),this.renderDynamic(),s.a.createElement(Ai,Ve,s.a.createElement(Ie.a,{icon:"sync",type:"primary","data-target":"test",onClick:this.testConnection,style:{marginRight:"10px"}},"测试连通性"),s.a.createElement(Ie.a,{type:"primary",style:{marginRight:"10px"},onClick:this.onOk},"确定"),s.a.createElement(Ie.a,{onClick:this.cancel},"取消"))))}}]),t}(i.Component))||Zr,Oi=te.a.create()(ki),Ri=Oi,Li=Ri,Si=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Ai,"FormItem","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(yi,"Option","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(Ci,"hdfsConf","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(Di,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(bi,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(ki,"DataSourceModal","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(Oi,"DataSourceFormWrapper","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/dataSource/editModal.js"),__REACT_HOT_LOADER__.register(Ri,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/dataSource/editModal.js")),a(849),$.a.Search),wi=function(e){return{dataSource:e.dataSource}},Ii=function(e){return{getDataSources:function(t){e(Ct.getDataSources(t))}}},xi=Object(y.b)(wi,Ii)($r=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={visible:!1,title:"新增数据源",status:"add",source:{},params:{currentPage:1,pageSize:20,name:void 0,type:void 0,active:void 0}},n.searchDataSources=function(){var e;return(e=n).__searchDataSources__REACT_HOT_LOADER__.apply(e,arguments)},n.editDataSource=function(){var e;return(e=n).__editDataSource__REACT_HOT_LOADER__.apply(e,arguments)},n.remove=function(){var e;return(e=n).__remove__REACT_HOT_LOADER__.apply(e,arguments)},n.handleTableChange=function(){var e;return(e=n).__handleTableChange__REACT_HOT_LOADER__.apply(e,arguments)},n.initEdit=function(){var e;return(e=n).__initEdit__REACT_HOT_LOADER__.apply(e,arguments)},n.initColumns=function(){var e;return(e=n).__initColumns__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){this.props.getDataSources(this.state.params)}},{key:"__searchDataSources__REACT_HOT_LOADER__",value:function(e){var t=U()({},this.state.params,{name:e||void 0,currentPage:1});this.props.getDataSources(t),this.setState({params:t})}},{key:"__editDataSource__REACT_HOT_LOADER__",value:function(e,t){var a=this,n=this.state,r=n.title,i=n.status,s=n.source,o=n.params;"edit"===i?yt.updateDataSource(U()({},s,e)).then(function(e){1===e.code&&(ue.a.success(r+"成功！"),a.props.getDataSources(o))}):yt.addDataSource(e).then(function(e){1===e.code&&(ue.a.success(r+"成功！"),a.props.getDataSources(o))}),t.resetFields(),this.setState({visible:!1,source:{}})}},{key:"__remove__REACT_HOT_LOADER__",value:function(e){var t=this;1!==e.active?yt.deleteDataSource({sourceId:e.id}).then(function(e){1===e.code&&(ue.a.success("移除数据源成功！"),t.props.getDataSources(t.state.params))}):ue.a.info("此数据源已在任务中被引用，无法删除!")}},{key:"__handleTableChange__REACT_HOT_LOADER__",value:function(e,t){var a=t.active,n=t.type,r=U()({},this.state.params,{currentPage:e.current,active:a?a[0]:void 0,type:n?n[0]:void 0});this.props.getDataSources(r),this.setState({params:r})}},{key:"__initEdit__REACT_HOT_LOADER__",value:function(e){this.setState({visible:!0,title:"编辑数据源",status:"edit",source:e})}},{key:"__initColumns__REACT_HOT_LOADER__",value:function(){var e=this;return[{title:"数据源名称",dataIndex:"dataName",key:"dataName",width:"18%",render:function(e){return s.a.createElement("div",{className:"ellipsis-td",title:e},e)}},{title:"类型",dataIndex:"type",key:"type",filters:Ge,filterMultiple:!1,width:"10%",render:function(e,t){return t.sourceTypeValue}},{title:"描述信息",dataIndex:"dataDesc",key:"dataDesc",width:"22%"},{title:"最近修改人",dataIndex:"modifyUserName",key:"modifyUserName",width:"15%"},{title:"最近修改时间",dataIndex:"gmtModified",key:"gmtModified",render:function(e){return er()(e).format("YYYY-MM-DD HH:mm:ss")},width:"15%"},{title:"状态",dataIndex:"active",key:"active",filters:[{text:"未启用",value:0},{text:"使用中",value:1}],filterMultiple:!1,render:function(e,t){return 1===t.active?"使用中":"未启用"},width:"10%"},{title:"操作",width:"10%",render:function(t,a){return s.a.createElement("span",null,s.a.createElement("a",{onClick:function(){e.initEdit(a)}},"编辑"),s.a.createElement("span",{className:"ant-divider"}),s.a.createElement(Dn.a,{title:"确定删除此数据源？",okText:"确定",cancelText:"取消",onConfirm:function(){e.remove(a)}},s.a.createElement("a",null,"删除")))}}]}},{key:"render",value:function(){var e=this,t=this.state,a=t.visible,n=t.title,r=t.status,i=t.source,o=t.params,l=this.props.dataSource,c=l.sourceQuery,p=l.loading,u={current:o.currentPage,pageSize:o.pageSize,total:c.totalCount},d=s.a.createElement(Si,{placeholder:"数据源名称",style:{width:200,margin:"10px 0"},onSearch:this.searchDataSources}),_=s.a.createElement(Ie.a,{type:"primary",style:{margin:"10px 0"},className:"right",onClick:function(){e.setState({visible:!0,source:{},status:"add",title:"添加数据源"})}},"新增数据源");return s.a.createElement("div",{className:"source-page"},s.a.createElement("h1",{className:"box-title"},"数据源管理"),s.a.createElement("div",{className:"box-2 m-card shadow"},s.a.createElement(q.a,{noHovering:!0,bordered:!1,title:d,extra:_},s.a.createElement(Y.a,{rowKey:"id",loading:p,className:"m-table fixed-table",pagination:u,columns:this.initColumns(),dataSource:c.data,onChange:this.handleTableChange}))),s.a.createElement(Li,{title:n,status:r,visible:a,sourceData:i,editDataSource:this.editDataSource,handCancel:function(){e.setState({visible:!1,source:{}})}}))}}]),t}(i.Component))||$r,Hi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Si,"Search","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/dataSource/index.js"),__REACT_HOT_LOADER__.register(wi,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/dataSource/index.js"),__REACT_HOT_LOADER__.register(Ii,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/dataSource/index.js"),__REACT_HOT_LOADER__.register(xi,"DataSource","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/dataSource/index.js")),void 0),Ni=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={applyBox:!1,apply:{apiId:"",apiName:"",desc:""}},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"getTopRightButton",value:function(){var e=this.getValue("applyStatus");return 1==e||3==e?null:0==e?s.a.createElement(Ie.a,{onClick:this.jumpToMine.bind(this),size:"large",type:"primary"},"查看审批情况"):s.a.createElement(Ie.a,{onClick:this.doApply.bind(this),size:"large",type:"primary"},"立即订购")}},{key:"doApply",value:function(){this.setState({applyBox:!0,apply:{apiId:this.props.apiId,name:this.getApiValue("name"),desc:this.getApiValue("desc")}})}},{key:"back",value:function(){this.props.router.replace("/dl/market")}},{key:"getValue",value:function(e){var t=this.props.apiMarket&&this.props.apiMarket.apiCallInfo&&this.props.apiMarket.apiCallInfo[this.props.apiId];return t?t[e]:null}},{key:"getApiValue",value:function(e){var t=this.props.apiMarket&&this.props.apiMarket.api&&this.props.apiMarket.api[this.props.apiId];return t?t[e]:null}},{key:"showApplySuccessModal",value:function(){Hi=Q.a.success({title:"申请提交成功",content:s.a.createElement("span",null,"您可以在 ",s.a.createElement("a",{onClick:this.jumpToMine.bind(this)},"我的API")," 中查看审批进度"),okText:"确定"})}},{key:"jumpToMine",value:function(){Hi&&Hi.destroy(),this.props.router.push("/dl/mine")}},{key:"jumpToMineApproved",value:function(){this.props.router.push("/dl/mine/approved?apiId="+this.props.apiId)}},{key:"handleOk",value:function(){this.setState({applyBox:!1}),this.showApplySuccessModal()}},{key:"handleCancel",value:function(){this.setState({applyBox:!1})}},{key:"render",value:function(){var e=this.props.router.location.query&&this.props.router.location.query.isHideBack?null:s.a.createElement(pa.a,{span:1},s.a.createElement(z.a,{type:"left-circle-o",onClick:this.back.bind(this),style:{fontSize:18,cursor:"pointer"}}));return s.a.createElement(q.a,{className:"box-1",noHovering:!0},s.a.createElement(tt,{show:this.state.applyBox,successCallBack:this.handleOk.bind(this),cancelCallback:this.handleCancel.bind(this),apiId:this.state.apply.apiId,name:this.state.apply.name,desc:this.state.apply.desc}),s.a.createElement(la.a,{className:"m-count",style:{height:"auto"}},e,s.a.createElement(pa.a,{span:12},s.a.createElement(la.a,{className:"header-title"},this.getApiValue("name")),s.a.createElement(la.a,{className:"header-content"},this.getApiValue("desc"))),s.a.createElement(pa.a,{span:3},s.a.createElement("section",{className:"m-count-section ",style:{width:150,marginTop:0}},s.a.createElement("span",{className:"m-count-title text-left"},"订购人数"),s.a.createElement("span",{className:"m-count-content font-black text-left"},H.a.toQfw(this.getValue("applyNum")||0),s.a.createElement("span",{style:{fontSize:12}})))),s.a.createElement(pa.a,{span:5},s.a.createElement("section",{className:"m-count-section",style:{width:200,marginTop:0}},s.a.createElement("span",{className:"m-count-title text-left"},"累计调用"),s.a.createElement("span",{className:"m-count-content font-black text-left"},H.a.toQfw(this.getValue("apiCallNum")||0),s.a.createElement("span",{style:{fontSize:12}})))),s.a.createElement(pa.a,{span:3},this.getTopRightButton())))}}]),t}(i.Component),Pi=Ni,Ui=Pi,ji=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Hi,"modal","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/detail/topCard.js"),__REACT_HOT_LOADER__.register(Ni,"TopCard","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/detail/topCard.js"),__REACT_HOT_LOADER__.register(Pi,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/detail/topCard.js")),function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t}}),zi=function(e){return{getApiDetail:function(t){e(Se.getApiDetail({apiId:t}))},getApiExtInfo:function(t){e(Se.getApiExtInfo({apiId:t}))}}},Mi=Object(y.b)(ji,zi)(ei=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={apiId:""},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.router.params&&this.props.router.params.api;t&&this.setState({apiId:t},function(){e.props.getApiDetail(t),e.props.getApiExtInfo(t)})}},{key:"getRequestDataSource",value:function(){return this.getValue("reqParam")||[]}},{key:"getRequestColumns",value:function(){return[{title:"参数名",dataIndex:"paramName",key:"paramName"},{title:"数据类型",dataIndex:"paramType",key:"paramType"},{title:"是否必填",dataIndex:"required",key:"required",render:function(e){return e?"是":"否"}},{title:"说明",dataIndex:"desc",key:"desc"}]}},{key:"getResponseDataSource",value:function(){return this.getValue("respParam")||[]}},{key:"getResponseColumns",value:function(){return[{title:"参数名",dataIndex:"paramName",key:"paramName"},{title:"数据类型",dataIndex:"paramType",key:"paramType"},{title:"是否必填",dataIndex:"required",key:"required",render:function(e){return e?"是":"否"}},{title:"说明",dataIndex:"desc",key:"desc"}]}},{key:"getValue",value:function(e){var t=this.props.apiMarket&&this.props.apiMarket.api&&this.props.apiMarket.api[this.state.apiId];return t?t[e]:null}},{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement(Ui,U()({},this.state,this.props)),s.a.createElement(q.a,{className:"box-1",noHovering:!0},s.a.createElement("div",null,s.a.createElement("h1",{className:"title-border-l-blue"},"基本信息"),s.a.createElement("div",{style:{marginTop:15}},s.a.createElement("p",{"data-title":"支持格式：",className:"pseudo-title p-line"},this.getValue("supportType")),s.a.createElement("p",{"data-title":"请求协议：",className:"pseudo-title p-line"},this.getValue("reqProtocol")),s.a.createElement("p",{"data-title":"请求方式：",className:"pseudo-title p-line"},this.getValue("reqMethod")))),s.a.createElement(la.a,{gutter:30,style:{marginTop:20}},s.a.createElement(pa.a,{span:12},s.a.createElement("section",null,s.a.createElement("h1",{className:"title-border-l-blue"},"请求参数"),s.a.createElement(Y.a,{rowKey:"paramName",style:{marginTop:15},className:"m-table border-table",pagination:!1,dataSource:this.getRequestDataSource(),columns:this.getRequestColumns()}))),s.a.createElement(pa.a,{span:12},s.a.createElement("section",null,s.a.createElement("h1",{className:"title-border-l-blue"},"返回参数"),s.a.createElement(Y.a,{rowKey:"paramName",style:{marginTop:15},className:"m-table border-table",pagination:!1,dataSource:this.getResponseDataSource(),columns:this.getResponseColumns()})))),s.a.createElement("div",{style:{marginTop:20}},s.a.createElement("h1",{className:"title-border-l-blue"},"JSON样例"),s.a.createElement("div",{style:{marginTop:15}},s.a.createElement("pre",null,re()({inFields:{id:175,date:"2017-09-08 12:33:23",in:"12,34,45"}},null,"    \r"))))))}}]),t}(i.Component))||ei,Wi=Mi,Gi=Wi,Fi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ji,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/detail/index.js"),__REACT_HOT_LOADER__.register(zi,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/detail/index.js"),__REACT_HOT_LOADER__.register(Mi,"APIDetail","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/detail/index.js"),__REACT_HOT_LOADER__.register(Wi,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/market/detail/index.js")),function(e){function t(){return m()(this,t),f()(this,(t.__proto__||d()(t)).apply(this,arguments))}return v()(t,e),E()(t,[{key:"getTopRightButton",value:function(){var e=We[this.getValue("status")];return e?"stop"==e?s.a.createElement("div",null,s.a.createElement(Ie.a,{onClick:this.props.openApi,style:{marginRight:"5px"}},"开启"),s.a.createElement(Ie.a,{onClick:this.editApi.bind(this,this.props.apiId),style:{marginRight:"5px"},type:"primary"},"编辑"),s.a.createElement(Ie.a,{onClick:this.props.deleteApi,type:"danger"},"删除")):s.a.createElement(Ie.a,{onClick:this.props.closeApi,size:"large",type:"danger"},"禁用"):null}},{key:"editApi",value:function(e){this.props.router.push("/dl/manage/editApi/"+e)}},{key:"back",value:function(){this.props.router.goBack()}},{key:"openApiDetail",value:function(){window.open(location.origin+location.pathname+"#/dl/market/detail/"+this.props.apiId+"?isHideBack=true")}},{key:"getValue",value:function(e){var t=this.props.apiMarket&&this.props.apiMarket.apiCallInfo&&this.props.apiMarket.apiCallInfo[this.props.apiId];return t?t[e]:null}},{key:"render",value:function(){return s.a.createElement(q.a,{className:"box-1",noHovering:!0},s.a.createElement(la.a,{className:"m-count",style:{height:"auto"}},s.a.createElement(pa.a,{span:1},s.a.createElement(z.a,{type:"left-circle-o",onClick:this.back.bind(this),style:{fontSize:18,cursor:"pointer"}})),s.a.createElement(pa.a,{span:10},s.a.createElement(la.a,{className:"header-title"},this.getValue("apiName")),s.a.createElement(la.a,{className:"header-content"},this.getValue("apiDesc")),s.a.createElement(la.a,{className:"header-content"},s.a.createElement("a",{onClick:this.openApiDetail.bind(this)},"查看详情"))),s.a.createElement(pa.a,{span:3},s.a.createElement("section",{className:"m-count-section ",style:{width:150,marginTop:0}},s.a.createElement("span",{className:"m-count-title text-left"},"订购人数"),s.a.createElement("span",{className:"m-count-content font-black text-left"},H.a.toQfw(this.getValue("applyNum")||0),s.a.createElement("span",{style:{fontSize:12}})))),s.a.createElement(pa.a,{span:5},s.a.createElement("section",{className:"m-count-section",style:{width:200,marginTop:0}},s.a.createElement("span",{className:"m-count-title text-left"},"累计调用"),s.a.createElement("span",{className:"m-count-content font-black text-left"},H.a.toQfw(this.getValue("apiCallNum")||0),s.a.createElement("span",{style:{fontSize:12}})))),s.a.createElement(pa.a,{span:5},this.getTopRightButton())))}}]),t}(i.Component)),Vi=Fi,qi=Vi,Bi=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Fi,"ManageTopCard","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/topCard.js"),__REACT_HOT_LOADER__.register(Vi,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/topCard.js")),{1:"disable",2:"unauthorize",3:"paramerror",4:"timeout",5:"outlimit",6:"other"}),Yi={disable:"禁用",unauthorize:"未认证",paramerror:"参数错误",timeout:"超时",outlimit:"超过限制",other:"其他"},Ki=function(e){return{}},Qi=function(e){return{getApiCallErrorInfo:function(t,a){return e(Fa.getApiCallErrorInfo({apiId:t,time:a}))},queryApiCallLog:function(t,a,n){return e(zt.queryApiCallLog({apiId:t,currentPage:a,bizType:n,useAdmin:!0}))}}},Ji=Object(y.b)(Ki,Qi)(ti=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={error:{},data:[],loading:!1,pageIndex:1,total:0,filter:{}},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){this.getErrorInfo()}},{key:"getErrorInfo",value:function(e){var t=this;(e=e||this.props.apiId)&&(this.props.getApiCallErrorInfo(e,this.props.dateType).then(function(e){if(e){for(var a={},n=0;n<e.data.recordInfoList.length;n++){var r=e.data.recordInfoList[n],i=Bi[r.type];i&&(a[i]={percent:r.rate,count:r.callNum})}t.setState({error:a})}}),this.props.queryApiCallLog(e,this.state.pageIndex,this.state.filter.bizType&&this.state.filter.bizType[0]).then(function(e){e&&t.setState({data:e.data.data,total:e.data.totalCount})}))}},{key:"componentWillReceiveProps",value:function(e){this.props.apiId!==e.apiId&&this.getErrorInfo(e.apiId)}},{key:"initColumns",value:function(){var e=this;return[{title:"调用时间",dataIndex:"invokeTime",key:"invokeTime",render:function(e){return H.a.formatDateTime(e)}},{title:"调用用户",dataIndex:"userName",key:"userName"},{title:"错误类型",dataIndex:"bizType",key:"bizType",render:function(e){return Yi[Bi[e]]},filters:[{text:"参数错误",value:"3"},{text:"禁用",value:"1"},{text:"未认证",value:"2"},{text:"超时",value:"4"},{text:"超过限制",value:"5"},{text:"其他",value:"6"}],filterMultiple:!1},{title:"错误日志",dataIndex:"content",key:"content",width:"50%"},{title:"操作",dataIndex:"",key:"deal",render:function(t,a){return s.a.createElement("a",{onClick:e.lookAllErrorText.bind(e,a.content)},"查看全部")}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:10,total:this.state.total}}},{key:"getSource",value:function(){return this.state.data}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){var n=this;this.setState({pageIndex:e.current,filter:t},function(){n.getErrorInfo()})}},{key:"lookAllErrorText",value:function(e){Q.a.info({title:"错误日志",content:s.a.createElement("div",null,s.a.createElement("p",null,e)),onOk:function(){}})}},{key:"getErrorPercent",value:function(e){return this.state.error[e]&&this.state.error[e].percent||0}},{key:"getErrorCount",value:function(e){return this.state.error[e]&&this.state.error[e].count||0}},{key:"render",value:function(){var e=this.getSource(),t="m-table monitor-table table-p-l20";return e.length<3&&(t+=" mini-filter"),s.a.createElement("div",null,s.a.createElement("p",{style:{lineHeight:"1",padding:"14px 0px 14px 20px"},className:"child-span-padding-r20"},s.a.createElement("span",null,"参数错误: ",this.getErrorPercent("paramerror"),"% (",this.getErrorCount("paramerror"),"次)"),s.a.createElement("span",null,"禁用: ",this.getErrorPercent("disable"),"% (",this.getErrorCount("disable"),"次)"),s.a.createElement("span",null,"未认证: ",this.getErrorPercent("unauthorize"),"% (",this.getErrorCount("unauthorize"),"次)"),s.a.createElement("span",null,"超时: ",this.getErrorPercent("timeout"),"% (",this.getErrorCount("timeout"),"次)"),s.a.createElement("span",null,"超过限制: ",this.getErrorPercent("outlimit"),"% (",this.getErrorCount("outlimit"),"次)"),s.a.createElement("span",null,"其他: ",this.getErrorPercent("other"),"% (",this.getErrorCount("other"),"次)")),s.a.createElement(Y.a,{rowKey:"id",className:t,columns:this.initColumns(),loading:this.state.loading,pagination:this.getPagination(),dataSource:e,onChange:this.onTableChange}))}}]),t}(i.Component))||ti,Xi=Ji,Zi=Xi,$i=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Bi,"errorType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/errorLog.js"),__REACT_HOT_LOADER__.register(Yi,"errorExchange","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/errorLog.js"),__REACT_HOT_LOADER__.register(Ki,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/errorLog.js"),__REACT_HOT_LOADER__.register(Qi,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/errorLog.js"),__REACT_HOT_LOADER__.register(Ji,"ManageErrorLog","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/errorLog.js"),__REACT_HOT_LOADER__.register(Xi,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/errorLog.js")),function(e){function t(){return m()(this,t),f()(this,(t.__proto__||d()(t)).apply(this,arguments))}return v()(t,e),E()(t,[{key:"getSource",value:function(){return this.props.data||[]}},{key:"render",value:function(){return s.a.createElement(Y.a,{rowKey:function(e){return e.userId},style:{marginTop:"20px",marginBottom:"20px"},className:"m-table border-table table-p-l20",rowClassName:function(){return"h-33"},pagination:!1,columns:[{title:"排名",dataIndex:"rank",key:"rank",className:"color-666",render:function(e,t,a){return s.a.createElement("span",{className:"rank-number rank-number_"+(a+1)},a+1)}},{title:"用户",dataIndex:"userName",key:"userName",className:"color-666"},{title:"调用次数",dataIndex:"callNum",key:"callNum",className:"color-666"}],dataSource:this.getSource(),onChange:this.onTableChange})}}]),t}(i.Component)),es=$i,ts=es,as=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register($i,"ManageTopCall","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/topCall.js"),__REACT_HOT_LOADER__.register(es,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/topCall.js")),a(72));a(139),a(198),a(133),a(132);var ns,rs,is,ss=function(e){var t=e.user;return{apiMarket:e.apiMarket,apiManage:e.apiManage,user:t}},os=function(e){return{getApiCallUserRankList:function(t,a){return e(Fa.getApiCallUserRankList({apiId:t,time:a}))},getApiCallInfo:function(t,a){return e(zt.getApiCallInfo({apiId:t,time:a,useAdmin:!0}))}}},ls=Object(y.b)(ss,os)(ai=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={topCallUser:"",failPercent:"",callCount:"",callList:[],topCallList:[],apiId:"",dateType:""},n.resize=function(){var e;return(e=n).__resize__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({apiId:this.props.apiId,dateType:this.props.dateType},function(){e.getApiCallUserRankList(),e.getApiCallInfoList()})}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.state.apiId==e.apiId&&this.state.dateType==e.dateType||this.setState({apiId:e.apiId,dateType:e.dateType},function(){t.getApiCallUserRankList(),t.getApiCallInfoList()})}},{key:"getApiCallInfoList",value:function(){var e=this,t=this.state.apiId,a=this.state.dateType;t&&a&&this.props.getApiCallInfo(t,a).then(function(t){t&&e.setState({callList:t.data.infoList,topCallUser:t.data.topCallUserName,failPercent:t.data.failRate,callCount:t.data.callCount},function(){e.initLineChart()})})}},{key:"getApiCallUserRankList",value:function(){var e=this,t=this.state.apiId,a=this.state.dateType;t&&a&&this.props.getApiCallUserRankList(t,a).then(function(t){t&&e.setState({topCallList:t.data})})}},{key:"__resize__REACT_HOT_LOADER__",value:function(){this.state.lineChart&&this.state.lineChart.resize()}},{key:"initLineChart",value:function(){for(var e=this.state.callList,t=[],a=[],n=[],r=0;r<e.length;r++)switch(t.push(e[r].callCount),a.push(e[r].failRate),this.props.dateType){case"1":n.push(H.a.formatHours(e[r].time));break;case"7":n.push(H.a.formatDateHours(e[r].time));break;case"30":case"-1":n.push(H.a.formatDate(e[r].time))}var i=as.init(document.getElementById("manageApiDetail")),s=Object(da.cloneDeep)(Ke);s.tooltip.formatter=function(e){for(var t=e[0].name,a=0,n=e.length;a<n;a++){var r="次";"失败率"==e[a].seriesName&&(r="%"),t+='<br/><span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+e[a].color+'"></span>'+e[a].seriesName+" : "+e[a].value+r}return t},s.series=[{symbol:"none",name:"调用次数",data:t,type:"line",smooth:!0,itemStyle:{normal:{color:"#1C86EE"}}},{symbol:"none",name:"失败率",data:a,type:"line",smooth:!0,yAxisIndex:1,itemStyle:{normal:{color:"#EE0000"}}}],s.xAxis[0].data=n,i.setOption(s),this.setState({lineChart:i})}},{key:"getDateText",value:function(){switch(this.props.dateType){case"1":return"24小时";case"7":return"7天";case"30":return"30天";case"-1":return"历史以来";default:return""}}},{key:"render",value:function(){return s.a.createElement("div",{style:{paddingLeft:"20px",paddingRight:"20px"}},s.a.createElement(la.a,null,s.a.createElement(pa.a,{span:16},s.a.createElement(la.a,{gutter:100,className:"m-count padding-l20 height-101"},s.a.createElement(pa.a,{span:6},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:150}},s.a.createElement("span",{className:"m-count-title text-left"},this.getDateText(),"累计调用"),s.a.createElement("span",{className:"m-count-content font-black text-left"},this.state.callCount||0,s.a.createElement("span",{style:{fontSize:12}},"次")))),s.a.createElement(pa.a,{span:4},s.a.createElement("section",{className:"m-count-section margin-t20",style:{width:100}},s.a.createElement("span",{className:"m-count-title text-left"},this.getDateText(),"失败率"),s.a.createElement("span",{className:"m-count-content font-red text-left"},this.state.failPercent||0,s.a.createElement("span",{style:{fontSize:12}},"%"))))),s.a.createElement(ua.a,{onResize:this.resize},s.a.createElement("article",{id:"manageApiDetail",style:{width:"100%",height:"300px"}}))),s.a.createElement(pa.a,{span:8,style:{paddingTop:"20px"}},s.a.createElement("p",{style:{fontWeight:"bold",lineHeight:1,fontSize:"14px"}},"排行榜"),s.a.createElement(ts,{data:this.state.topCallList}))))}}]),t}(i.Component))||ai,cs=ls,ps=cs,us=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ss,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/callState.js"),__REACT_HOT_LOADER__.register(os,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/callState.js"),__REACT_HOT_LOADER__.register(ls,"ApiManageCallState","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/callState.js"),__REACT_HOT_LOADER__.register(cs,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/callState.js")),function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={pageIndex:1,filter:{},sortedInfo:{}},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"initColumns",value:function(){var e=this;return[{title:"用户",dataIndex:"userName",key:"userName"},{title:"状态",dataIndex:"status",key:"status",filters:[{text:"正常",value:"1"},{text:"停用",value:"3"},{text:"取消授权",value:"4"}],render:function(e,t){return s.a.createElement("span",{className:"state-"+ze[e]},{success:"正常",stop:"停用",disabled:"取消授权"}[ze[e]])}},{title:"最近24小时调用",dataIndex:"recent24HCallNum",key:"recent24HCallNum"},{title:"最近24小时失败率",dataIndex:"recent24HFailRate",key:"recent24HFailRate",render:function(e){return e+"%"}},{title:"最近7天调用",dataIndex:"recent7DCallNum",key:"recent7DCallNum"},{title:"最近30天调用",dataIndex:"recent30DCallNum",key:"recent30DCallNum"},{title:"累计调用",dataIndex:"totalCallNum",key:"totalCallNum"},{title:"订购时间",dataIndex:"applyTime",key:"applyTime",render:function(e){return H.a.formatDateTime(e)}},{title:"操作",dataIndex:"",key:"deal",render:function(t,a){return"disabled"!=ze[a.status]?s.a.createElement("a",{onClick:function(){e.props.cancelApi(a.applyId)}},"取消授权"):s.a.createElement("a",{onClick:function(){e.props.applyApi(a.applyId)}},"恢复授权")}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:10,total:this.props.total}}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){this.setState({pageIndex:e.current,filter:t,sortedInfo:a}),this.props.tableChange({page:e.current,filter:t,sortedInfo:a})}},{key:"lookAllErrorText",value:function(){}},{key:"render",value:function(){return s.a.createElement(Y.a,{rowKey:"applyId",className:"m-table monitor-table table-p-l20",columns:this.initColumns(),loading:this.props.loading,pagination:this.getPagination(),dataSource:this.props.data,onChange:this.onTableChange})}}]),t}(i.Component)),ds=us,_s=ds,ms=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(us,"EnableTable","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/buyStateTable/enableTable.js"),__REACT_HOT_LOADER__.register(ds,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/buyStateTable/enableTable.js")),function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={pageIndex:1,filter:{},sortedInfo:{}},n.onTableChange=function(){var e;return(e=n).__onTableChange__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"initColumns",value:function(){return[{title:"用户",dataIndex:"userName",key:"userName"},{title:"最近24小时调用",dataIndex:"recent24HCallNum",key:"recent24HCallNum"},{title:"最近24小时失败率",dataIndex:"recent24HFailRate",key:"recent24HFailRate",render:function(e){return e+"%"}},{title:"最近7天调用",dataIndex:"recent7DCallNum",key:"recent7DCallNum"},{title:"最近30天调用",dataIndex:"recent30DCallNum",key:"recent30DCallNum"},{title:"累计调用",dataIndex:"totalCallNum",key:"totalCallNum"},{title:"订购时间",dataIndex:"applyTime",key:"applyTime",render:function(e){return H.a.formatDateTime(e)}}]}},{key:"getPagination",value:function(){return{current:this.state.pageIndex,pageSize:10,total:this.props.total}}},{key:"__onTableChange__REACT_HOT_LOADER__",value:function(e,t,a){this.setState({pageIndex:e.current,filter:t,sortedInfo:a}),this.props.tableChange({page:e.current,filter:t,sortedInfo:a})}},{key:"lookAllErrorText",value:function(){}},{key:"render",value:function(){return s.a.createElement(Y.a,{rowKey:"applyId",className:"m-table monitor-table table-p-l20",columns:this.initColumns(),loading:this.props.loading,pagination:this.getPagination(),dataSource:this.props.data,onChange:this.onTableChange})}}]),t}(i.Component)),hs=ms,Es=hs,gs=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(ms,"DisableTable","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/buyStateTable/disableTable.js"),__REACT_HOT_LOADER__.register(hs,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/buyStateTable/disableTable.js")),Q.a.confirm),fs=function(e){var t=e.user;return{apiMarket:e.apiMarket,apiManage:e.apiManage,user:t}},Ts=function(e){return{getApiUserApplyList:function(t){return e(Fa.getApiUserApplyList(t))},updateUserApiStatus:function(t){return e(zt.updateApplyStatus(t))}}},vs=Object(y.b)(fs,Ts)(ns=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={data:[],total:0,disAbleKey:"init",enAbleKey:"init",loading:!1},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){this.tableChange({filter:{},sortedInfo:{},page:1})}},{key:"initState",value:function(){this.setState({disAbleKey:Math.random(),enAbleKey:Math.random(),total:0,dataDisable:[],dataEnable:[]})}},{key:"componentWillReceiveProps",value:function(e){this.props.apiId==e.apiId&&this.props.disAble==e.disAble||(this.initState(),this.tableChange({filter:{},sortedInfo:{},page:1},e.apiId))}},{key:"tableChange",value:function(e,t){var a=e.filter,n=(e.sortedInfo,e.page),r=a.status;(!r||r.length<1)&&(r=["1","3","4"]);var i={};i.apiId=t||this.props.apiId,i.pageSize=10,i.currentPage=n,i.status=r,this.getData(i)}},{key:"getData",value:function(e){var t=this;e||(e=this.state.requestParams),e.apiId&&(this.setState({loading:!0,requestParams:e}),this.props.getApiUserApplyList(e).then(function(e){t.setState({loading:!1}),e&&t.setState({data:e.data.data,total:e.data.totalCount})}))}},{key:"cancelApi",value:function(e){var t=this;gs({title:"确认取消?",content:"确认取消授权",onOk:function(){t.props.updateUserApiStatus({applyId:e,useAdmin:!0,status:4}).then(function(e){e&&(ue.a.success("取消成功"),t.getData())})},onCancel:function(){}})}},{key:"applyApi",value:function(e){var t=this;gs({title:"确认授权?",content:"确认授权",onOk:function(){t.props.updateUserApiStatus({applyId:e,useAdmin:!0,status:1}).then(function(e){e&&(ue.a.success("授权成功"),t.getData())})},onCancel:function(){}})}},{key:"lookAllErrorText",value:function(){}},{key:"getTable",value:function(){return this.props.statusDisAble?s.a.createElement(Es,{loading:this.state.loading,key:this.state.disAbleKey,total:this.state.total,data:this.state.data,tableChange:this.tableChange.bind(this)}):s.a.createElement(_s,{cancelApi:this.cancelApi.bind(this),applyApi:this.applyApi.bind(this),loading:this.state.loading,key:this.state.enAbleKey,total:this.state.total,data:this.state.data,tableChange:this.tableChange.bind(this)})}},{key:"render",value:function(){return s.a.createElement("div",null,this.getTable())}}]),t}(i.Component))||ns,As=vs,ys=As,Cs=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(gs,"confirm","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/buyState.js"),__REACT_HOT_LOADER__.register(fs,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/buyState.js"),__REACT_HOT_LOADER__.register(Ts,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/buyState.js"),__REACT_HOT_LOADER__.register(vs,"BuyManageState","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/buyState.js"),__REACT_HOT_LOADER__.register(As,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/tabPanes/buyState.js")),Q.a.confirm),Ds=na.a.Button,bs=na.a.Group,ks=function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t}},Os=function(e){return{getApiDetail:function(t){e(Se.getApiDetail({apiId:t}))},getApiExtInfo:function(t){e(Se.getApiExtInfo({apiId:t,useAdmin:!0}))},deleteApi:function(t){return e(Fa.deleteApi({apiIds:[t]}))},openApi:function(t){return e(Fa.openApi(t))},closeApi:function(t){return e(Fa.closeApi(t))}}},Rs=Object(y.b)(ks,Os)(rs=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.state={apiId:"",nowView:"callState",callStateDate:"1",errorLogDate:"7"},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"deleteApi",value:function(){var e=this,t=this.state.apiId;Cs({title:"确认删除该标签？",onOk:function(){e.props.deleteApi(t).then(function(t){t&&(ue.a.success("删除成功"),e.getApiExtInfo())})},onCancel:function(){}})}},{key:"openApi",value:function(){var e=this,t=this.state.apiId;Cs({title:"确认开启该标签？",onOk:function(){e.props.openApi(t).then(function(t){ue.a.success("开启成功"),t&&e.getApiExtInfo()})},onCancel:function(){}})}},{key:"closeApi",value:function(){var e=this,t=this.state.apiId;Cs({title:"确认禁用该标签？",onOk:function(){e.props.closeApi(t).then(function(t){ue.a.success("禁用成功"),t&&e.getApiExtInfo()})},onCancel:function(){}})}},{key:"getApiExtInfo",value:function(){this.props.getApiExtInfo(this.state.apiId)}},{key:"componentDidMount",value:function(){var e=this,t=this.props.router.params&&this.props.router.params.api;t&&this.setState({apiId:t},function(){e.getApiExtInfo()})}},{key:"callback",value:function(e){this.setState({nowView:e})}},{key:"chooseCallStateDate",value:function(e){this.setState({callStateDate:e.target.value})}},{key:"chooseErrorLogDate",value:function(e){this.setState({errorLogDate:e.target.value})}},{key:"getValue",value:function(e){var t=this.props.apiMarket&&this.props.apiMarket.apiCallInfo&&this.props.apiMarket.apiCallInfo[this.state.apiId];return t?t[e]:null}},{key:"getDateTypeView",value:function(){switch(this.state.nowView){case"callState":return s.a.createElement("div",{className:"m-radio-group",key:"callStateDate",style:{marginTop:"4px",marginRight:"8px"}},s.a.createElement(bs,{name:"callStateDate",defaultValue:this.state.callStateDate,className:"no-bd nobackground",onChange:this.chooseCallStateDate.bind(this)},s.a.createElement(Ds,{value:"1"},"最近24小时"),s.a.createElement(Ds,{value:"7"},"最近7天"),s.a.createElement(Ds,{value:"30"},"最近30天"),s.a.createElement(Ds,{value:"-1"},"历史以来")));case"errorLog":return s.a.createElement("div",{className:"m-radio-group",key:"errorLogDate",style:{marginTop:"4px",marginRight:"8px"}},s.a.createElement(bs,{name:"errorLogDate",defaultValue:this.state.errorLogDate,className:"no-bd nobackground",onChange:this.chooseErrorLogDate.bind(this)},s.a.createElement(Ds,{value:"7"},"最近7天")));default:return null}}},{key:"render",value:function(){var e=void 0;return"stop"==We[this.getValue("status")]&&(e=!0),s.a.createElement("div",null,s.a.createElement(qi,U()({},this.state,this.props,{deleteApi:this.deleteApi.bind(this),openApi:this.openApi.bind(this),closeApi:this.closeApi.bind(this)})),s.a.createElement("div",{className:"tabs-box m-tabs noheight tabs-filter-show"},s.a.createElement(Nt.a,{defaultActiveKey:this.state.nowView,onChange:this.callback.bind(this),tabBarExtraContent:this.getDateTypeView()},s.a.createElement(Nt.a.TabPane,{tab:"调用情况",key:"callState"},s.a.createElement(ps,{dateType:this.state.callStateDate,apiId:this.state.apiId})),s.a.createElement(Nt.a.TabPane,{tab:"错误日志",key:"errorLog"},s.a.createElement(Zi,{dateType:this.state.errorLogDate,apiId:this.state.apiId})),s.a.createElement(Nt.a.TabPane,{tab:"订购情况",key:"buyState"},s.a.createElement(ys,{statusDisAble:e,apiId:this.state.apiId})))))}}]),t}(i.Component))||rs,Ls=Rs,Ss=Ls,ws=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Cs,"confirm","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(Ds,"RadioButton","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(bs,"RadioGroup","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(ks,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(Os,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(Rs,"APIManageDetail","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/index.js"),__REACT_HOT_LOADER__.register(Ls,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiDetail/index.js")),a(156),a(80)),Is=a.n(ws),xs=Is.a.TreeNode,Hs=function(e){function t(e){m()(this,t);var a=f()(this,(t.__proto__||d()(t)).call(this,e));return a.state={maxDeepLength:2,expandedKeys:[],editNode:null,mode:"",addPid:"",autoExpandParent:!0},a.onSelect=function(){return a.__onSelect__REACT_HOT_LOADER__.apply(a,arguments)},a.onCheck=function(){return a.__onCheck__REACT_HOT_LOADER__.apply(a,arguments)},a.checkVal=function(){return a.__checkVal__REACT_HOT_LOADER__.apply(a,arguments)},a.onExpands=function(){return a.__onExpands__REACT_HOT_LOADER__.apply(a,arguments)},a.editInput=null,a}return v()(t,e),E()(t,[{key:"componentDidMount",value:function(){this.props.maxDeepLength&&(this.state.maxDeepLength=this.props.maxDeepLength)}},{key:"componentWillReceiveProps",value:function(e){e.maxDeepLength&&this.props.maxDeepLength!=e.maxDeepLength&&this.setState({maxDeepLength:e.maxDeepLength})}},{key:"getTreeView",value:function(){var e=this.props.tree,t=[];return e?{view:function e(a,n){for(var r=[],i=0;i<a.length;i++){var o=a[i],l=!(o.childCatalogue.length>0);o.api?r.push(s.a.createElement(xs,{title:o.catalogueName,key:o.id})):(t.push(o.id.toString()),r.push(s.a.createElement(xs,{title:this.getTreeNodeTitle.call(this,o.id,o.catalogueName,!1,l,n),key:o.id},e.call(this,o.childCatalogue,n+1))))}return r}.call(this,e,1),expandedKeys:t}:null}},{key:"__onSelect__REACT_HOT_LOADER__",value:function(e,t){}},{key:"__onCheck__REACT_HOT_LOADER__",value:function(e,t){}},{key:"deleteNode",value:function(e){this.props.deleteCatalogue(e)}},{key:"__checkVal__REACT_HOT_LOADER__",value:function(e){var t=/^([\w|\u4e00-\u9fa5]{1,20})$/.test(e);return t||ue.a.error("类目名称不能超过20个字符，只能以字母、数字、下划线和汉字组成！"),t}},{key:"getTreeNodeTitle",value:function(e,t,a,n,r){var i=this.state.maxDeepLength,o=void 0;return o=a?s.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},s.a.createElement(hr.a,{title:"添加新分类"},s.a.createElement(z.a,{type:"plus-square-o",onClick:this.addNode.bind(this,e)}))):n?r>=i?s.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},s.a.createElement(hr.a,{title:"编辑"},s.a.createElement(z.a,{type:"edit",onClick:this.editNode.bind(this,e)})),s.a.createElement(hr.a,{title:"删除"},s.a.createElement(Dn.a,{title:"您确定删除该分类吗",onConfirm:this.deleteNode.bind(this,e),okText:"确定",cancelText:"取消"},s.a.createElement(z.a,{type:"minus-square-o"})))):s.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},s.a.createElement(hr.a,{title:"添加新分类"},s.a.createElement(z.a,{type:"plus-square-o",onClick:this.addNode.bind(this,e)})),s.a.createElement(hr.a,{title:"编辑"},s.a.createElement(z.a,{type:"edit",onClick:this.editNode.bind(this,e)})),s.a.createElement(hr.a,{title:"删除"},s.a.createElement(Dn.a,{title:"您确定删除该分类吗",onConfirm:this.deleteNode.bind(this,e),okText:"确定",cancelText:"取消"},s.a.createElement(z.a,{type:"minus-square-o"})))):r<i?s.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},s.a.createElement(hr.a,{title:"添加新分类"},s.a.createElement(z.a,{type:"plus-square-o",onClick:this.addNode.bind(this,e)})),s.a.createElement(hr.a,{title:"编辑"},s.a.createElement(z.a,{type:"edit",onClick:this.editNode.bind(this,e)}))):s.a.createElement("span",{className:"tree-hover-show-item tree-item",style:{marginLeft:"3px"}},s.a.createElement(hr.a,{title:"编辑"},s.a.createElement(z.a,{type:"edit",onClick:this.editNode.bind(this,e)}))),s.a.createElement("span",{className:"tree-hover-show"},this.state.editNode==e?s.a.createElement("input",{ref:this.setRange.bind(this),autoFocus:!0,defaultValue:t,onBlur:this.editOver.bind(this,e)}):t,o)}},{key:"setRange",value:function(e){if(e){var t=e.value.length;e.setSelectionRange(t,t),this.editInput=e}}},{key:"editOver",value:function(e,t){var a=this,n=this.editInput.value;if(!this.checkVal(n))return this.props.getCatalogue(0),void this.setState({editNode:null});this.setState({editNode:null},function(){"add"!=a.state.mode?a.props.updateCatalogue(e,n):a.props.addCatalogue(a.state.addPid,n)})}},{key:"editNode",value:function(e){this.setState({editNode:e,mode:"edit"})}},{key:"addNode",value:function(e){var t=Object(da.cloneDeep)(this.props.tree),a=Math.random();!function e(t,n){if(0!=n)for(var r=0;r<t.length;r++){var i=t[r];if(i.id==n)return void i.childCatalogue.push({id:a,catalogueName:"新建分类名"+i.childCatalogue.length,childCatalogue:[]});e(i.childCatalogue,n)}else t.push({id:a,catalogueName:"新建分类名",childCatalogue:[]})}(t,e),this.setState({editNode:a,mode:"add",addPid:e}),this.props.addCatalogueEdit(t)}},{key:"__onExpands__REACT_HOT_LOADER__",value:function(e,t){this.setState({expandedKeys:e,autoExpandParent:!1})}},{key:"render",value:function(){var e=this.getTreeView(),t=e.view,a=e.expandedKeys,n=this.state.expandedKeys.length>0?this.state.expandedKeys:a;return s.a.createElement(Is.a,{showIcon:!0,expandedKeys:n,onSelect:this.onSelect,onCheck:this.onCheck,onExpand:this.onExpands,autoExpandParent:this.state.autoExpandParent},s.a.createElement(xs,{title:this.getTreeNodeTitle.call(this,0,"标签管理",!0,!1,0),key:0},t))}}]),t}(i.Component),Ns=Hs,Ps=Ns,Us=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(xs,"TreeNode","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiTypeTree.js"),__REACT_HOT_LOADER__.register(Hs,"ApiTypeTree","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiTypeTree.js"),__REACT_HOT_LOADER__.register(Ns,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiTypeTree.js")),function(e){var t=e.user;return{apiMarket:e.apiMarket,user:t}}),js=function(e){return{getCatalogue:function(t){e(Se.getCatalogue(t))},deleteCatalogue:function(t){return e(Fa.deleteCatalogue({id:t}))},updateCatalogue:function(t,a){return e(Fa.updateCatalogue({id:t,nodeName:a}))},addCatalogue:function(t,a){return e(Fa.addCatalogue({pid:t,nodeName:a}))},addCatalogueEdit:function(t){e({type:ae.a.GET_CATALOGUE,payload:t})}}},zs=Object(y.b)(Us,js)(is=function(e){function t(){var e,a,n,r;m()(this,t);for(var i=arguments.length,s=Array(i),o=0;o<i;o++)s[o]=arguments[o];return a=n=f()(this,(e=t.__proto__||d()(t)).call.apply(e,[this].concat(s))),n.onSelect=function(){var e;return(e=n).__onSelect__REACT_HOT_LOADER__.apply(e,arguments)},n.onCheck=function(){var e;return(e=n).__onCheck__REACT_HOT_LOADER__.apply(e,arguments)},r=a,f()(n,r)}return v()(t,e),E()(t,[{key:"__onSelect__REACT_HOT_LOADER__",value:function(e,t){}},{key:"__onCheck__REACT_HOT_LOADER__",value:function(e,t){}},{key:"componentDidMount",value:function(){this.props.getCatalogue(0)}},{key:"deleteCatalogue",value:function(e){var t=this;this.props.deleteCatalogue(e).then(function(e){e&&ue.a.success("删除成功"),t.props.getCatalogue(0)})}},{key:"addCatalogue",value:function(e,t){var a=this;this.props.addCatalogue(e,t).then(function(e){e&&ue.a.success("新增成功"),a.props.getCatalogue(0)})}},{key:"updateCatalogue",value:function(e,t){var a=this;this.props.updateCatalogue(e,t).then(function(e){e&&ue.a.success("更改成功"),a.props.getCatalogue(0)})}},{key:"render",value:function(){return s.a.createElement("div",{className:"m-card"},s.a.createElement("h1",{className:"box-title"}," ",s.a.createElement(tr.a,null)," 类目管理"),s.a.createElement(q.a,{className:"box-2 g-datamanage",noHovering:!0},s.a.createElement(Ps,{getCatalogue:this.props.getCatalogue,addCatalogue:this.addCatalogue.bind(this),addCatalogueEdit:this.props.addCatalogueEdit,updateCatalogue:this.updateCatalogue.bind(this),deleteCatalogue:this.deleteCatalogue.bind(this),tree:this.props.apiMarket.apiCatalogue})))}}]),t}(i.Component))||is,Ms=zs,Ws=Ms,Gs=("undefined"!=typeof __REACT_HOT_LOADER__&&(__REACT_HOT_LOADER__.register(Us,"mapStateToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiType.js"),__REACT_HOT_LOADER__.register(js,"mapDispatchToProps","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiType.js"),__REACT_HOT_LOADER__.register(zs,"ApiType","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiType.js"),__REACT_HOT_LOADER__.register(Ms,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/views/management/apiType.js")),s.a.createElement(A.d,{path:"/",component:C.a},s.a.createElement(A.b,{component:xt}),s.a.createElement(A.d,{path:"/message",component:D.a},s.a.createElement(A.b,{component:b.a}),s.a.createElement(A.d,{path:"list",component:b.a}),s.a.createElement(A.d,{path:"detail/:msgId",component:k.a})),s.a.createElement(A.d,{path:"/admin",component:O.a},s.a.createElement(A.b,{component:R.a}),s.a.createElement(A.d,{path:"user",component:R.a}),s.a.createElement(A.d,{path:"role",component:L.a}),s.a.createElement(A.d,{path:"role/add",component:S.a}),s.a.createElement(A.d,{path:"role/edit/:roleId",component:w.a})),s.a.createElement(A.d,{path:"/dl",component:xt},s.a.createElement(A.b,{component:ut}),s.a.createElement(A.d,{path:"market",component:ut}),s.a.createElement(A.d,{path:"market/detail/:api",component:Gi}),s.a.createElement(A.d,{path:"mine",component:za}),s.a.createElement(A.d,{path:"mine/:view",component:za}),s.a.createElement(A.d,{path:"approval",component:fn}),s.a.createElement(A.d,{path:"manage",component:an}),s.a.createElement(A.d,{path:"manage/detail/:api",component:Ss}),s.a.createElement(A.d,{path:"manage/apiType",component:Ws}),s.a.createElement(A.d,{path:"manage/newApi/:tagId",component:li}),s.a.createElement(A.d,{path:"manage/editApi/:tagId",component:li}),s.a.createElement(A.d,{path:"tagConfig",component:Kn}),s.a.createElement(A.d,{path:"tagConfig/identify",component:dr}),s.a.createElement(A.d,{path:"tagConfig/ruleTagEdit/:id",component:cr}),s.a.createElement(A.d,{path:"tagConfig/tagLog/:id",component:fr}),s.a.createElement(A.d,{path:"dataSource",component:xi})))),Fs=Gs,Vs=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Gs,"default","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/routers.js"),function(e){function t(){return m()(this,t),f()(this,(t.__proto__||d()(t)).apply(this,arguments))}return v()(t,e),E()(t,[{key:"render",value:function(){var e=this.props,t=e.store,a=e.history;return s.a.createElement(y.a,{store:t},s.a.createElement(A.e,{routes:Fs,history:a,key:Math.random()}))}}]),t}(s.a.Component)),qs=("undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(Vs,"Root","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/root.js"),function(e){var t=a(837).default,n=Object(p.a)(t,"hash"),r=n.store,i=n.history;l.a.render(s.a.createElement(c.AppContainer,null,s.a.createElement(e,{store:r,history:i})),document.getElementById("app"))});qs(Vs);"undefined"!=typeof __REACT_HOT_LOADER__&&__REACT_HOT_LOADER__.register(qs,"render","/Users/ziv/Development/Workspace/data-stack/src/webapps/dataLabel/app.js")},849:function(e,t,a){},851:function(e,t,a){},853:function(e,t,a){}},[[845,13,15,14,17,18,21,16]]]);